(()=>{var sce=Object.create;var CD=Object.defineProperty;var ace=Object.getOwnPropertyDescriptor;var lce=Object.getOwnPropertyNames;var cce=Object.getPrototypeOf,dce=Object.prototype.hasOwnProperty;var R5=t=>CD(t,"__esModule",{value:!0});var Za=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var st=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),SD=(t,e)=>{R5(t);for(var r in e)CD(t,r,{get:e[r],enumerable:!0})},uce=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of lce(e))!dce.call(t,o)&&o!=="default"&&CD(t,o,{get:()=>e[o],enumerable:!(r=ace(e,o))||r.enumerable});return t},X=t=>uce(R5(CD(t!=null?sce(cce(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var N5=st(xD=>{"use strict";Object.defineProperty(xD,"__esModule",{value:!0});xD.DI=void 0;var M5=class{constructor(){this.registry=new Map,this.flags=new Map,this.loaders=new Map}get(e){return this.has(e)?this.registry.get(e):this.load(e)}load(e){let r=this.loaders.get(e);if(!r)throw new Error(`${e} is not registered`);let o=r();return this.set(e,o),this.loaders.delete(e),o}has(e){return this.flags.has(e)}set(e,r){this.registry.set(e,r),this.flags.set(e,!0)}setLazy(e,r){this.loaders.set(e,r)}unset(e){this.registry.delete(e),this.flags.delete(e)}reset(){this.registry.clear(),this.flags.clear()}};xD.DI=M5});var jR=st((nNe,U5)=>{"use strict";var z5=Object.getOwnPropertySymbols,fce=Object.prototype.hasOwnProperty,mce=Object.prototype.propertyIsEnumerable;function gce(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function vce(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(o.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}U5.exports=vce()?Object.assign:function(t,e){for(var r,o=gce(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var a in r)fce.call(r,a)&&(o[a]=r[a]);if(z5){i=z5(r);for(var l=0;l<i.length;l++)mce.call(r,i[l])&&(o[i[l]]=r[i[l]])}}return o}});var r6=st(Kn=>{"use strict";var KR=jR(),Nb=60103,H5=60106;Kn.Fragment=60107;Kn.StrictMode=60108;Kn.Profiler=60114;var G5=60109,V5=60110,$5=60112;Kn.Suspense=60113;var W5=60115,j5=60116;typeof Symbol=="function"&&Symbol.for&&(oc=Symbol.for,Nb=oc("react.element"),H5=oc("react.portal"),Kn.Fragment=oc("react.fragment"),Kn.StrictMode=oc("react.strict_mode"),Kn.Profiler=oc("react.profiler"),G5=oc("react.provider"),V5=oc("react.context"),$5=oc("react.forward_ref"),Kn.Suspense=oc("react.suspense"),W5=oc("react.memo"),j5=oc("react.lazy"));var oc,K5=typeof Symbol=="function"&&Symbol.iterator;function bce(t){return t===null||typeof t!="object"?null:(t=K5&&t[K5]||t["@@iterator"],typeof t=="function"?t:null)}function FS(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y5={};function Bb(t,e,r){this.props=t,this.context=e,this.refs=Y5,this.updater=r||q5}Bb.prototype.isReactComponent={};Bb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(FS(85));this.updater.enqueueSetState(this,t,e,"setState")};Bb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X5(){}X5.prototype=Bb.prototype;function qR(t,e,r){this.props=t,this.context=e,this.refs=Y5,this.updater=r||q5}var YR=qR.prototype=new X5;YR.constructor=qR;KR(YR,Bb.prototype);YR.isPureReactComponent=!0;var XR={current:null},Q5=Object.prototype.hasOwnProperty,J5={key:!0,ref:!0,__self:!0,__source:!0};function Z5(t,e,r){var o,i={},s=null,a=null;if(e!=null)for(o in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Q5.call(e,o)&&!J5.hasOwnProperty(o)&&(i[o]=e[o]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(o in l=t.defaultProps,l)i[o]===void 0&&(i[o]=l[o]);return{$$typeof:Nb,type:t,key:s,ref:a,props:i,_owner:XR.current}}function yce(t,e){return{$$typeof:Nb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function QR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nb}function Cce(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var e6=/\/+/g;function JR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cce(""+t.key):e.toString(36)}function wD(t,e,r,o,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Nb:case H5:a=!0}}if(a)return a=t,i=i(a),t=o===""?"."+JR(a,0):o,Array.isArray(i)?(r="",t!=null&&(r=t.replace(e6,"$&/")+"/"),wD(i,e,r,"",function(d){return d})):i!=null&&(QR(i)&&(i=yce(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(e6,"$&/")+"/")+t)),e.push(i)),1;if(a=0,o=o===""?".":o+":",Array.isArray(t))for(var l=0;l<t.length;l++){s=t[l];var c=o+JR(s,l);a+=wD(s,e,r,c,i)}else if(c=bce(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=o+JR(s,l++),a+=wD(s,e,r,c,i);else if(s==="object")throw e=""+t,Error(FS(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return a}function TD(t,e,r){if(t==null)return t;var o=[],i=0;return wD(t,o,"","",function(s){return e.call(r,s,i++)}),o}function Sce(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var t6={current:null};function dp(){var t=t6.current;if(t===null)throw Error(FS(321));return t}var xce={ReactCurrentDispatcher:t6,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:XR,IsSomeRendererActing:{current:!1},assign:KR};Kn.Children={map:TD,forEach:function(t,e,r){TD(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return TD(t,function(){e++}),e},toArray:function(t){return TD(t,function(e){return e})||[]},only:function(t){if(!QR(t))throw Error(FS(143));return t}};Kn.Component=Bb;Kn.PureComponent=qR;Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xce;Kn.cloneElement=function(t,e,r){if(t==null)throw Error(FS(267,t));var o=KR({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=XR.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Q5.call(e,c)&&!J5.hasOwnProperty(c)&&(o[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)o.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:Nb,type:t.type,key:i,ref:s,props:o,_owner:a}};Kn.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:V5,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:G5,_context:t},t.Consumer=t};Kn.createElement=Z5;Kn.createFactory=function(t){var e=Z5.bind(null,t);return e.type=t,e};Kn.createRef=function(){return{current:null}};Kn.forwardRef=function(t){return{$$typeof:$5,render:t}};Kn.isValidElement=QR;Kn.lazy=function(t){return{$$typeof:j5,_payload:{_status:-1,_result:t},_init:Sce}};Kn.memo=function(t,e){return{$$typeof:W5,type:t,compare:e===void 0?null:e}};Kn.useCallback=function(t,e){return dp().useCallback(t,e)};Kn.useContext=function(t,e){return dp().useContext(t,e)};Kn.useDebugValue=function(){};Kn.useEffect=function(t,e){return dp().useEffect(t,e)};Kn.useImperativeHandle=function(t,e,r){return dp().useImperativeHandle(t,e,r)};Kn.useLayoutEffect=function(t,e){return dp().useLayoutEffect(t,e)};Kn.useMemo=function(t,e){return dp().useMemo(t,e)};Kn.useReducer=function(t,e,r){return dp().useReducer(t,e,r)};Kn.useRef=function(t){return dp().useRef(t)};Kn.useState=function(t){return dp().useState(t)};Kn.version="17.0.2"});var he=st((iNe,n6)=>{"use strict";n6.exports=r6()});var c6=st(so=>{"use strict";var Lb,MS,DD,ZR;typeof performance=="object"&&typeof performance.now=="function"?(o6=performance,so.unstable_now=function(){return o6.now()}):(eF=Date,i6=eF.now(),so.unstable_now=function(){return eF.now()-i6});var o6,eF,i6;typeof window=="undefined"||typeof MessageChannel!="function"?(Ob=null,tF=null,rF=function(){if(Ob!==null)try{var t=so.unstable_now();Ob(!0,t),Ob=null}catch(e){throw setTimeout(rF,0),e}},Lb=function(t){Ob!==null?setTimeout(Lb,0,t):(Ob=t,setTimeout(rF,0))},MS=function(t,e){tF=setTimeout(t,e)},DD=function(){clearTimeout(tF)},so.unstable_shouldYield=function(){return!1},ZR=so.unstable_forceFrameRate=function(){}):(s6=window.setTimeout,a6=window.clearTimeout,typeof console!="undefined"&&(l6=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof l6!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),NS=!1,BS=null,kD=-1,nF=5,oF=0,so.unstable_shouldYield=function(){return so.unstable_now()>=oF},ZR=function(){},so.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nF=0<t?Math.floor(1e3/t):5},iF=new MessageChannel,PD=iF.port2,iF.port1.onmessage=function(){if(BS!==null){var t=so.unstable_now();oF=t+nF;try{BS(!0,t)?PD.postMessage(null):(NS=!1,BS=null)}catch(e){throw PD.postMessage(null),e}}else NS=!1},Lb=function(t){BS=t,NS||(NS=!0,PD.postMessage(null))},MS=function(t,e){kD=s6(function(){t(so.unstable_now())},e)},DD=function(){a6(kD),kD=-1});var Ob,tF,rF,s6,a6,l6,NS,BS,kD,nF,oF,iF,PD;function sF(t,e){var r=t.length;t.push(e);e:for(;;){var o=r-1>>>1,i=t[o];if(i!==void 0&&0<_D(i,e))t[o]=e,t[r]=i,r=o;else break e}}function sd(t){return t=t[0],t===void 0?null:t}function ED(t){var e=t[0];if(e!==void 0){var r=t.pop();if(r!==e){t[0]=r;e:for(var o=0,i=t.length;o<i;){var s=2*(o+1)-1,a=t[s],l=s+1,c=t[l];if(a!==void 0&&0>_D(a,r))c!==void 0&&0>_D(c,a)?(t[o]=c,t[l]=r,o=l):(t[o]=a,t[s]=r,o=s);else if(c!==void 0&&0>_D(c,r))t[o]=c,t[l]=r,o=l;else break e}}return e}return null}function _D(t,e){var r=t.sortIndex-e.sortIndex;return r!==0?r:t.id-e.id}var Xd=[],Wh=[],wce=1,ic=null,ca=3,AD=!1,hg=!1,LS=!1;function aF(t){for(var e=sd(Wh);e!==null;){if(e.callback===null)ED(Wh);else if(e.startTime<=t)ED(Wh),e.sortIndex=e.expirationTime,sF(Xd,e);else break;e=sd(Wh)}}function lF(t){if(LS=!1,aF(t),!hg)if(sd(Xd)!==null)hg=!0,Lb(cF);else{var e=sd(Wh);e!==null&&MS(lF,e.startTime-t)}}function cF(t,e){hg=!1,LS&&(LS=!1,DD()),AD=!0;var r=ca;try{for(aF(e),ic=sd(Xd);ic!==null&&(!(ic.expirationTime>e)||t&&!so.unstable_shouldYield());){var o=ic.callback;if(typeof o=="function"){ic.callback=null,ca=ic.priorityLevel;var i=o(ic.expirationTime<=e);e=so.unstable_now(),typeof i=="function"?ic.callback=i:ic===sd(Xd)&&ED(Xd),aF(e)}else ED(Xd);ic=sd(Xd)}if(ic!==null)var s=!0;else{var a=sd(Wh);a!==null&&MS(lF,a.startTime-e),s=!1}return s}finally{ic=null,ca=r,AD=!1}}var Tce=ZR;so.unstable_IdlePriority=5;so.unstable_ImmediatePriority=1;so.unstable_LowPriority=4;so.unstable_NormalPriority=3;so.unstable_Profiling=null;so.unstable_UserBlockingPriority=2;so.unstable_cancelCallback=function(t){t.callback=null};so.unstable_continueExecution=function(){hg||AD||(hg=!0,Lb(cF))};so.unstable_getCurrentPriorityLevel=function(){return ca};so.unstable_getFirstCallbackNode=function(){return sd(Xd)};so.unstable_next=function(t){switch(ca){case 1:case 2:case 3:var e=3;break;default:e=ca}var r=ca;ca=e;try{return t()}finally{ca=r}};so.unstable_pauseExecution=function(){};so.unstable_requestPaint=Tce;so.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=ca;ca=t;try{return e()}finally{ca=r}};so.unstable_scheduleCallback=function(t,e,r){var o=so.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?o+r:o):r=o,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=r+i,t={id:wce++,callback:e,priorityLevel:t,startTime:r,expirationTime:i,sortIndex:-1},r>o?(t.sortIndex=r,sF(Wh,t),sd(Xd)===null&&t===sd(Wh)&&(LS?DD():LS=!0,MS(lF,r-o))):(t.sortIndex=i,sF(Xd,t),hg||AD||(hg=!0,Lb(cF))),t};so.unstable_wrapCallback=function(t){var e=ca;return function(){var r=ca;ca=e;try{return t.apply(this,arguments)}finally{ca=r}}}});var u6=st((aNe,d6)=>{"use strict";d6.exports=c6()});var QG=st(uc=>{"use strict";var ID=he(),ei=jR(),Ds=u6();function xt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!ID)throw Error(xt(227));var p6=new Set,OS={};function fg(t,e){zb(t,e),zb(t+"Capture",e)}function zb(t,e){for(OS[t]=e,t=0;t<e.length;t++)p6.add(e[t])}var up=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Dce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h6=Object.prototype.hasOwnProperty,f6={},m6={};function kce(t){return h6.call(m6,t)?!0:h6.call(f6,t)?!1:Dce.test(t)?m6[t]=!0:(f6[t]=!0,!1)}function Pce(t,e,r,o){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ece(t,e,r,o){if(e===null||typeof e=="undefined"||Pce(t,e,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _a(t,e,r,o,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Vs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vs[t]=new _a(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vs[e]=new _a(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vs[t]=new _a(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vs[t]=new _a(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vs[t]=new _a(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vs[t]=new _a(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vs[t]=new _a(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vs[t]=new _a(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vs[t]=new _a(t,5,!1,t.toLowerCase(),null,!1,!1)});var dF=/[\-:]([a-z])/g;function uF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dF,uF);Vs[e]=new _a(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dF,uF);Vs[e]=new _a(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dF,uF);Vs[e]=new _a(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vs[t]=new _a(t,1,!1,t.toLowerCase(),null,!1,!1)});Vs.xlinkHref=new _a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vs[t]=new _a(t,1,!1,t.toLowerCase(),null,!0,!0)});function pF(t,e,r,o){var i=Vs.hasOwnProperty(e)?Vs[e]:null,s=i!==null?i.type===0:o?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(Ece(e,r,i,o)&&(r=null),o||i===null?kce(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,o=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,o?t.setAttributeNS(o,e,r):t.setAttribute(e,r))))}var mg=ID.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zS=60103,gg=60106,jh=60107,hF=60108,US=60114,fF=60109,mF=60110,RD=60112,HS=60113,FD=60120,MD=60115,gF=60116,vF=60121,bF=60128,g6=60129,yF=60130,CF=60131;typeof Symbol=="function"&&Symbol.for&&(us=Symbol.for,zS=us("react.element"),gg=us("react.portal"),jh=us("react.fragment"),hF=us("react.strict_mode"),US=us("react.profiler"),fF=us("react.provider"),mF=us("react.context"),RD=us("react.forward_ref"),HS=us("react.suspense"),FD=us("react.suspense_list"),MD=us("react.memo"),gF=us("react.lazy"),vF=us("react.block"),us("react.scope"),bF=us("react.opaque.id"),g6=us("react.debug_trace_mode"),yF=us("react.offscreen"),CF=us("react.legacy_hidden"));var us,v6=typeof Symbol=="function"&&Symbol.iterator;function GS(t){return t===null||typeof t!="object"?null:(t=v6&&t[v6]||t["@@iterator"],typeof t=="function"?t:null)}var SF;function VS(t){if(SF===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);SF=e&&e[1]||""}return`
`+SF+t}var xF=!1;function ND(t,e){if(!t||xF)return"";xF=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var o=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){o=c}t.call(e.prototype)}else{try{throw Error()}catch(c){o=c}t()}}catch(c){if(c&&o&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=o.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l])return`
`+i[a].replace(" at new "," at ");while(1<=a&&0<=l);break}}}finally{xF=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?VS(t):""}function _ce(t){switch(t.tag){case 5:return VS(t.type);case 16:return VS("Lazy");case 13:return VS("Suspense");case 19:return VS("SuspenseList");case 0:case 2:case 15:return t=ND(t.type,!1),t;case 11:return t=ND(t.type.render,!1),t;case 22:return t=ND(t.type._render,!1),t;case 1:return t=ND(t.type,!0),t;default:return""}}function Ub(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jh:return"Fragment";case gg:return"Portal";case US:return"Profiler";case hF:return"StrictMode";case HS:return"Suspense";case FD:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mF:return(t.displayName||"Context")+".Consumer";case fF:return(t._context.displayName||"Context")+".Provider";case RD:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case MD:return Ub(t.type);case vF:return Ub(t._render);case gF:e=t._payload,t=t._init;try{return Ub(t(e))}catch(r){}}return null}function Kh(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function b6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ace(t){var e=b6(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){o=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(a){o=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function BD(t){t._valueTracker||(t._valueTracker=Ace(t))}function y6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),o="";return t&&(o=b6(t)?t.checked?"true":"false":t.value),t=o,t!==r?(e.setValue(t),!0):!1}function LD(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function wF(t,e){var r=e.checked;return ei({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function C6(t,e){var r=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;r=Kh(e.value!=null?e.value:r),t._wrapperState={initialChecked:o,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S6(t,e){e=e.checked,e!=null&&pF(t,"checked",e,!1)}function TF(t,e){S6(t,e);var r=Kh(e.value),o=e.type;if(r!=null)o==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?DF(t,e.type,r):e.hasOwnProperty("defaultValue")&&DF(t,e.type,Kh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x6(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function DF(t,e,r){(e!=="number"||LD(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function Ice(t){var e="";return ID.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function kF(t,e){return t=ei({children:void 0},e),(e=Ice(e.children))&&(t.children=e),t}function Hb(t,e,r,o){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Kh(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,o&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function PF(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xt(91));return ei({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function w6(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(xt(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(xt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Kh(r)}}function T6(t,e){var r=Kh(e.value),o=Kh(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),o!=null&&(t.defaultValue=""+o)}function D6(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var EF={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function k6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _F(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var OD,P6=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,o,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,o,i)})}:t}(function(t,e){if(t.namespaceURI!==EF.svg||"innerHTML"in t)t.innerHTML=e;else{for(OD=OD||document.createElement("div"),OD.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=OD.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $S(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var WS={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rce=["Webkit","ms","Moz","O"];Object.keys(WS).forEach(function(t){Rce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),WS[e]=WS[t]})});function E6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||WS.hasOwnProperty(t)&&WS[t]?(""+e).trim():e+"px"}function _6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var o=r.indexOf("--")===0,i=E6(r,e[r],o);r==="float"&&(r="cssFloat"),o?t.setProperty(r,i):t[r]=i}}var Fce=ei({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AF(t,e){if(e){if(Fce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xt(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(xt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xt(62))}}function IF(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function RF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var FF=null,Gb=null,Vb=null;function A6(t){if(t=cx(t)){if(typeof FF!="function")throw Error(xt(280));var e=t.stateNode;e&&(e=ik(e),FF(t.stateNode,t.type,e))}}function I6(t){Gb?Vb?Vb.push(t):Vb=[t]:Gb=t}function R6(){if(Gb){var t=Gb,e=Vb;if(Vb=Gb=null,A6(t),e)for(t=0;t<e.length;t++)A6(e[t])}}function MF(t,e){return t(e)}function F6(t,e,r,o,i){return t(e,r,o,i)}function NF(){}var M6=MF,vg=!1,BF=!1;function LF(){(Gb!==null||Vb!==null)&&(NF(),R6())}function Mce(t,e,r){if(BF)return t(e,r);BF=!0;try{return M6(t,e,r)}finally{BF=!1,LF()}}function jS(t,e){var r=t.stateNode;if(r===null)return null;var o=ik(r);if(o===null)return null;r=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(xt(231,e,typeof r));return r}var OF=!1;if(up)try{$b={},Object.defineProperty($b,"passive",{get:function(){OF=!0}}),window.addEventListener("test",$b,$b),window.removeEventListener("test",$b,$b)}catch(t){OF=!1}var $b;function Nce(t,e,r,o,i,s,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var KS=!1,zD=null,UD=!1,zF=null,Bce={onError:function(t){KS=!0,zD=t}};function Lce(t,e,r,o,i,s,a,l,c){KS=!1,zD=null,Nce.apply(Bce,arguments)}function Oce(t,e,r,o,i,s,a,l,c){if(Lce.apply(this,arguments),KS){if(KS){var d=zD;KS=!1,zD=null}else throw Error(xt(198));UD||(UD=!0,zF=d)}}function bg(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!=0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function N6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B6(t){if(bg(t)!==t)throw Error(xt(188))}function zce(t){var e=t.alternate;if(!e){if(e=bg(t),e===null)throw Error(xt(188));return e!==t?null:t}for(var r=t,o=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(o=i.return,o!==null){r=o;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return B6(i),t;if(s===o)return B6(i),e;s=s.sibling}throw Error(xt(188))}if(r.return!==o.return)r=i,o=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,o=s;break}if(l===o){a=!0,o=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,o=i;break}if(l===o){a=!0,o=s,r=i;break}l=l.sibling}if(!a)throw Error(xt(189))}}if(r.alternate!==o)throw Error(xt(190))}if(r.tag!==3)throw Error(xt(188));return r.stateNode.current===r?t:e}function L6(t){if(t=zce(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function O6(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var z6,UF,U6,H6,HF=!1,Qd=[],qh=null,Yh=null,Xh=null,qS=new Map,YS=new Map,XS=[],G6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GF(t,e,r,o,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[o]}}function V6(t,e){switch(t){case"focusin":case"focusout":qh=null;break;case"dragenter":case"dragleave":Yh=null;break;case"mouseover":case"mouseout":Xh=null;break;case"pointerover":case"pointerout":qS.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":YS.delete(e.pointerId)}}function QS(t,e,r,o,i,s){return t===null||t.nativeEvent!==s?(t=GF(e,r,o,i,s),e!==null&&(e=cx(e),e!==null&&UF(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Uce(t,e,r,o,i){switch(e){case"focusin":return qh=QS(qh,t,e,r,o,i),!0;case"dragenter":return Yh=QS(Yh,t,e,r,o,i),!0;case"mouseover":return Xh=QS(Xh,t,e,r,o,i),!0;case"pointerover":var s=i.pointerId;return qS.set(s,QS(qS.get(s)||null,t,e,r,o,i)),!0;case"gotpointercapture":return s=i.pointerId,YS.set(s,QS(YS.get(s)||null,t,e,r,o,i)),!0}return!1}function Hce(t){var e=yg(t.target);if(e!==null){var r=bg(e);if(r!==null){if(e=r.tag,e===13){if(e=N6(r),e!==null){t.blockedOn=e,H6(t.lanePriority,function(){Ds.unstable_runWithPriority(t.priority,function(){U6(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function HD(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=qF(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=cx(r),e!==null&&UF(e),t.blockedOn=r,!1;e.shift()}return!0}function $6(t,e,r){HD(t)&&r.delete(e)}function Gce(){for(HF=!1;0<Qd.length;){var t=Qd[0];if(t.blockedOn!==null){t=cx(t.blockedOn),t!==null&&z6(t);break}for(var e=t.targetContainers;0<e.length;){var r=qF(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&Qd.shift()}qh!==null&&HD(qh)&&(qh=null),Yh!==null&&HD(Yh)&&(Yh=null),Xh!==null&&HD(Xh)&&(Xh=null),qS.forEach($6),YS.forEach($6)}function JS(t,e){t.blockedOn===e&&(t.blockedOn=null,HF||(HF=!0,Ds.unstable_scheduleCallback(Ds.unstable_NormalPriority,Gce)))}function W6(t){function e(i){return JS(i,t)}if(0<Qd.length){JS(Qd[0],t);for(var r=1;r<Qd.length;r++){var o=Qd[r];o.blockedOn===t&&(o.blockedOn=null)}}for(qh!==null&&JS(qh,t),Yh!==null&&JS(Yh,t),Xh!==null&&JS(Xh,t),qS.forEach(e),YS.forEach(e),r=0;r<XS.length;r++)o=XS[r],o.blockedOn===t&&(o.blockedOn=null);for(;0<XS.length&&(r=XS[0],r.blockedOn===null);)Hce(r),r.blockedOn===null&&XS.shift()}function GD(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Wb={animationend:GD("Animation","AnimationEnd"),animationiteration:GD("Animation","AnimationIteration"),animationstart:GD("Animation","AnimationStart"),transitionend:GD("Transition","TransitionEnd")},VF={},j6={};up&&(j6=document.createElement("div").style,"AnimationEvent"in window||(delete Wb.animationend.animation,delete Wb.animationiteration.animation,delete Wb.animationstart.animation),"TransitionEvent"in window||delete Wb.transitionend.transition);function VD(t){if(VF[t])return VF[t];if(!Wb[t])return t;var e=Wb[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in j6)return VF[t]=e[r];return t}var K6=VD("animationend"),q6=VD("animationiteration"),Y6=VD("animationstart"),X6=VD("transitionend"),Q6=new Map,$F=new Map,Vce=["abort","abort",K6,"animationEnd",q6,"animationIteration",Y6,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",X6,"transitionEnd","waiting","waiting"];function WF(t,e){for(var r=0;r<t.length;r+=2){var o=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),$F.set(o,e),Q6.set(o,i),fg(i,[o])}}var $ce=Ds.unstable_now;$ce();var Lo=8;function jb(t){if((1&t)!=0)return Lo=15,1;if((2&t)!=0)return Lo=14,2;if((4&t)!=0)return Lo=13,4;var e=24&t;return e!==0?(Lo=12,e):(t&32)!=0?(Lo=11,32):(e=192&t,e!==0?(Lo=10,e):(t&256)!=0?(Lo=9,256):(e=3584&t,e!==0?(Lo=8,e):(t&4096)!=0?(Lo=7,4096):(e=4186112&t,e!==0?(Lo=6,e):(e=62914560&t,e!==0?(Lo=5,e):t&67108864?(Lo=4,67108864):(t&134217728)!=0?(Lo=3,134217728):(e=805306368&t,e!==0?(Lo=2,e):(1073741824&t)!=0?(Lo=1,1073741824):(Lo=8,t))))))}function Wce(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function jce(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(xt(358,t))}}function ZS(t,e){var r=t.pendingLanes;if(r===0)return Lo=0;var o=0,i=0,s=t.expiredLanes,a=t.suspendedLanes,l=t.pingedLanes;if(s!==0)o=s,i=Lo=15;else if(s=r&134217727,s!==0){var c=s&~a;c!==0?(o=jb(c),i=Lo):(l&=s,l!==0&&(o=jb(l),i=Lo))}else s=r&~a,s!==0?(o=jb(s),i=Lo):l!==0&&(o=jb(l),i=Lo);if(o===0)return 0;if(o=31-Qh(o),o=r&((0>o?0:1<<o)<<1)-1,e!==0&&e!==o&&(e&a)==0){if(jb(e),i<=Lo)return e;Lo=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)r=31-Qh(e),i=1<<r,o|=t[r],e&=~i;return o}function J6(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $D(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Kb(24&~e),t===0?$D(10,e):t;case 10:return t=Kb(192&~e),t===0?$D(8,e):t;case 8:return t=Kb(3584&~e),t===0&&(t=Kb(4186112&~e),t===0&&(t=512)),t;case 2:return e=Kb(805306368&~e),e===0&&(e=268435456),e}throw Error(xt(358,t))}function Kb(t){return t&-t}function jF(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function WD(t,e,r){t.pendingLanes|=e;var o=e-1;t.suspendedLanes&=o,t.pingedLanes&=o,t=t.eventTimes,e=31-Qh(e),t[e]=r}var Qh=Math.clz32?Math.clz32:Yce,Kce=Math.log,qce=Math.LN2;function Yce(t){return t===0?32:31-(Kce(t)/qce|0)|0}var Xce=Ds.unstable_UserBlockingPriority,Qce=Ds.unstable_runWithPriority,jD=!0;function Jce(t,e,r,o){vg||NF();var i=KF,s=vg;vg=!0;try{F6(i,t,e,r,o)}finally{(vg=s)||LF()}}function Zce(t,e,r,o){Qce(Xce,KF.bind(null,t,e,r,o))}function KF(t,e,r,o){if(jD){var i;if((i=(e&4)==0)&&0<Qd.length&&-1<G6.indexOf(t))t=GF(null,t,e,r,o),Qd.push(t);else{var s=qF(t,e,r,o);if(s===null)i&&V6(t,o);else{if(i){if(-1<G6.indexOf(t)){t=GF(s,t,e,r,o),Qd.push(t);return}if(Uce(s,t,e,r,o))return;V6(t,o)}kH(t,e,o,null,r)}}}}function qF(t,e,r,o){var i=RF(o);if(i=yg(i),i!==null){var s=bg(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=N6(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return kH(t,e,o,i,r),null}var Jh=null,YF=null,KD=null;function Z6(){if(KD)return KD;var t,e=YF,r=e.length,o,i="value"in Jh?Jh.value:Jh.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(o=1;o<=a&&e[r-o]===i[s-o];o++);return KD=i.slice(t,1<o?1-o:void 0)}function qD(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function YD(){return!0}function eH(){return!1}function xl(t){function e(r,o,i,s,a){this._reactName=r,this._targetInst=i,this.type=o,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?YD:eH,this.isPropagationStopped=eH,this}return ei(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=YD)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=YD)},persist:function(){},isPersistent:YD}),e}var qb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XF=xl(qb),ex=ei({},qb,{view:0,detail:0}),ede=xl(ex),QF,JF,tx,XD=ei({},ex,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tx&&(tx&&t.type==="mousemove"?(QF=t.screenX-tx.screenX,JF=t.screenY-tx.screenY):JF=QF=0,tx=t),QF)},movementY:function(t){return"movementY"in t?t.movementY:JF}}),tH=xl(XD),tde=ei({},XD,{dataTransfer:0}),rde=xl(tde),nde=ei({},ex,{relatedTarget:0}),ZF=xl(nde),ode=ei({},qb,{animationName:0,elapsedTime:0,pseudoElement:0}),ide=xl(ode),sde=ei({},qb,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ade=xl(sde),lde=ei({},qb,{data:0}),rH=xl(lde),cde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ude={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pde(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ude[t])?!!e[t]:!1}function eM(){return pde}var hde=ei({},ex,{key:function(t){if(t.key){var e=cde[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qD(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dde[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eM,charCode:function(t){return t.type==="keypress"?qD(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qD(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fde=xl(hde),mde=ei({},XD,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nH=xl(mde),gde=ei({},ex,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eM}),vde=xl(gde),bde=ei({},qb,{propertyName:0,elapsedTime:0,pseudoElement:0}),yde=xl(bde),Cde=ei({},XD,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sde=xl(Cde),xde=[9,13,27,32],tM=up&&"CompositionEvent"in window,rx=null;up&&"documentMode"in document&&(rx=document.documentMode);var wde=up&&"TextEvent"in window&&!rx,oH=up&&(!tM||rx&&8<rx&&11>=rx),iH=String.fromCharCode(32),sH=!1;function aH(t,e){switch(t){case"keyup":return xde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yb=!1;function Tde(t,e){switch(t){case"compositionend":return lH(e);case"keypress":return e.which!==32?null:(sH=!0,iH);case"textInput":return t=e.data,t===iH&&sH?null:t;default:return null}}function Dde(t,e){if(Yb)return t==="compositionend"||!tM&&aH(t,e)?(t=Z6(),KD=YF=Jh=null,Yb=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oH&&e.locale!=="ko"?null:e.data;default:return null}}var kde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cH(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kde[t.type]:e==="textarea"}function dH(t,e,r,o){I6(o),e=tk(e,"onChange"),0<e.length&&(r=new XF("onChange","change",null,r,o),t.push({event:r,listeners:e}))}var nx=null,ox=null;function Pde(t){SH(t,0)}function QD(t){var e=ey(t);if(y6(e))return t}function Ede(t,e){if(t==="change")return e}var uH=!1;up&&(up?(ZD="oninput"in document,ZD||(rM=document.createElement("div"),rM.setAttribute("oninput","return;"),ZD=typeof rM.oninput=="function"),JD=ZD):JD=!1,uH=JD&&(!document.documentMode||9<document.documentMode));var JD,ZD,rM;function pH(){nx&&(nx.detachEvent("onpropertychange",hH),ox=nx=null)}function hH(t){if(t.propertyName==="value"&&QD(ox)){var e=[];if(dH(e,ox,t,RF(t)),t=Pde,vg)t(e);else{vg=!0;try{MF(t,e)}finally{vg=!1,LF()}}}}function _de(t,e,r){t==="focusin"?(pH(),nx=e,ox=r,nx.attachEvent("onpropertychange",hH)):t==="focusout"&&pH()}function Ade(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return QD(ox)}function Ide(t,e){if(t==="click")return QD(e)}function Rde(t,e){if(t==="input"||t==="change")return QD(e)}function Fde(t,e){return t===e&&(t!==0||1/t==1/e)||t!==t&&e!==e}var sc=typeof Object.is=="function"?Object.is:Fde,Mde=Object.prototype.hasOwnProperty;function ix(t,e){if(sc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++)if(!Mde.call(e,r[o])||!sc(t[r[o]],e[r[o]]))return!1;return!0}function fH(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mH(t,e){var r=fH(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=e&&o>=e)return{node:r,offset:e-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fH(r)}}function gH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vH(){for(var t=window,e=LD();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch(o){r=!1}if(r)t=e.contentWindow;else break;e=LD(t.document)}return e}function nM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Nde=up&&"documentMode"in document&&11>=document.documentMode,Xb=null,oM=null,sx=null,iM=!1;function bH(t,e,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;iM||Xb==null||Xb!==LD(o)||(o=Xb,"selectionStart"in o&&nM(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),sx&&ix(sx,o)||(sx=o,o=tk(oM,"onSelect"),0<o.length&&(e=new XF("onSelect","select",null,e,r),t.push({event:e,listeners:o}),e.target=Xb)))}WF("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);WF("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);WF(Vce,2);for(sM="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ek=0;ek<sM.length;ek++)$F.set(sM[ek],0);var sM,ek;zb("onMouseEnter",["mouseout","mouseover"]);zb("onMouseLeave",["mouseout","mouseover"]);zb("onPointerEnter",["pointerout","pointerover"]);zb("onPointerLeave",["pointerout","pointerover"]);fg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fg("onBeforeInput",["compositionend","keypress","textInput","paste"]);fg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ax="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yH=new Set("cancel close invalid load scroll toggle".split(" ").concat(ax));function CH(t,e,r){var o=t.type||"unknown-event";t.currentTarget=r,Oce(o,e,void 0,t),t.currentTarget=null}function SH(t,e){e=(e&4)!=0;for(var r=0;r<t.length;r++){var o=t[r],i=o.event;o=o.listeners;e:{var s=void 0;if(e)for(var a=o.length-1;0<=a;a--){var l=o[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;CH(i,l,d),s=c}else for(a=0;a<o.length;a++){if(l=o[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;CH(i,l,d),s=c}}}if(UD)throw t=zF,UD=!1,zF=null,t}function jo(t,e){var r=RH(e),o=t+"__bubble";r.has(o)||(DH(e,t,2,!1),r.add(o))}var xH="_reactListening"+Math.random().toString(36).slice(2);function wH(t){t[xH]||(t[xH]=!0,p6.forEach(function(e){yH.has(e)||TH(e,!1,t,null),TH(e,!0,t,null)}))}function TH(t,e,r,o){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=r;if(t==="selectionchange"&&r.nodeType!==9&&(s=r.ownerDocument),o!==null&&!e&&yH.has(t)){if(t!=="scroll")return;i|=2,s=o}var a=RH(s),l=t+"__"+(e?"capture":"bubble");a.has(l)||(e&&(i|=4),DH(s,t,i,e),a.add(l))}function DH(t,e,r,o){var i=$F.get(e);switch(i===void 0?2:i){case 0:i=Jce;break;case 1:i=Zce;break;default:i=KF}r=i.bind(null,e,r,t),i=void 0,!OF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),o?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function kH(t,e,r,o,i){var s=o;if((e&1)==0&&(e&2)==0&&o!==null)e:for(;;){if(o===null)return;var a=o.tag;if(a===3||a===4){var l=o.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=o.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=yg(l),a===null)return;if(c=a.tag,c===5||c===6){o=s=a;continue e}l=l.parentNode}}o=o.return}Mce(function(){var d=s,u=RF(r),p=[];e:{var h=Q6.get(t);if(h!==void 0){var f=XF,m=t;switch(t){case"keypress":if(qD(r)===0)break e;case"keydown":case"keyup":f=fde;break;case"focusin":m="focus",f=ZF;break;case"focusout":m="blur",f=ZF;break;case"beforeblur":case"afterblur":f=ZF;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=tH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=rde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=vde;break;case K6:case q6:case Y6:f=ide;break;case X6:f=yde;break;case"scroll":f=ede;break;case"wheel":f=Sde;break;case"copy":case"cut":case"paste":f=ade;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=nH}var g=(e&4)!=0,v=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var S=d,C;S!==null;){C=S;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,y!==null&&(b=jS(S,y),b!=null&&g.push(lx(S,b,C)))),v)break;S=S.return}0<g.length&&(h=new f(h,m,null,r,u),p.push({event:h,listeners:g}))}}if((e&7)==0){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&(e&16)==0&&(m=r.relatedTarget||r.fromElement)&&(yg(m)||m[Zb]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=r.relatedTarget||r.toElement,f=d,m=m?yg(m):null,m!==null&&(v=bg(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=d),f!==m)){if(g=tH,b="onMouseLeave",y="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(g=nH,b="onPointerLeave",y="onPointerEnter",S="pointer"),v=f==null?h:ey(f),C=m==null?h:ey(m),h=new g(b,S+"leave",f,r,u),h.target=v,h.relatedTarget=C,b=null,yg(u)===d&&(g=new g(y,S+"enter",m,r,u),g.target=C,g.relatedTarget=v,b=g),v=b,f&&m)t:{for(g=f,y=m,S=0,C=g;C;C=Qb(C))S++;for(C=0,b=y;b;b=Qb(b))C++;for(;0<S-C;)g=Qb(g),S--;for(;0<C-S;)y=Qb(y),C--;for(;S--;){if(g===y||y!==null&&g===y.alternate)break t;g=Qb(g),y=Qb(y)}g=null}else g=null;f!==null&&PH(p,h,f,g,!1),m!==null&&v!==null&&PH(p,v,m,g,!0)}}e:{if(h=d?ey(d):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=Ede;else if(cH(h))if(uH)x=Rde;else{x=Ade;var w=_de}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Ide);if(x&&(x=x(t,d))){dH(p,x,r,u);break e}w&&w(t,h,d),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&DF(h,"number",h.value)}switch(w=d?ey(d):window,t){case"focusin":(cH(w)||w.contentEditable==="true")&&(Xb=w,oM=d,sx=null);break;case"focusout":sx=oM=Xb=null;break;case"mousedown":iM=!0;break;case"contextmenu":case"mouseup":case"dragend":iM=!1,bH(p,r,u);break;case"selectionchange":if(Nde)break;case"keydown":case"keyup":bH(p,r,u)}var k;if(tM)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Yb?aH(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(oH&&r.locale!=="ko"&&(Yb||T!=="onCompositionStart"?T==="onCompositionEnd"&&Yb&&(k=Z6()):(Jh=u,YF="value"in Jh?Jh.value:Jh.textContent,Yb=!0)),w=tk(d,T),0<w.length&&(T=new rH(T,t,null,r,u),p.push({event:T,listeners:w}),k?T.data=k:(k=lH(r),k!==null&&(T.data=k)))),(k=wde?Tde(t,r):Dde(t,r))&&(d=tk(d,"onBeforeInput"),0<d.length&&(u=new rH("onBeforeInput","beforeinput",null,r,u),p.push({event:u,listeners:d}),u.data=k))}SH(p,e)})}function lx(t,e,r){return{instance:t,listener:e,currentTarget:r}}function tk(t,e){for(var r=e+"Capture",o=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=jS(t,r),s!=null&&o.unshift(lx(t,s,i)),s=jS(t,e),s!=null&&o.push(lx(t,s,i))),t=t.return}return o}function Qb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PH(t,e,r,o,i){for(var s=e._reactName,a=[];r!==null&&r!==o;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===o)break;l.tag===5&&d!==null&&(l=d,i?(c=jS(r,s),c!=null&&a.unshift(lx(r,c,l))):i||(c=jS(r,s),c!=null&&a.push(lx(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}function rk(){}var aM=null,lM=null;function EH(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function cM(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _H=typeof setTimeout=="function"?setTimeout:void 0,Bde=typeof clearTimeout=="function"?clearTimeout:void 0;function dM(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Jb(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function AH(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var uM=0;function Lde(t){return{$$typeof:bF,toString:t,valueOf:t}}var nk=Math.random().toString(36).slice(2),Zh="__reactFiber$"+nk,ok="__reactProps$"+nk,Zb="__reactContainer$"+nk,IH="__reactEvents$"+nk;function yg(t){var e=t[Zh];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Zb]||r[Zh]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=AH(t);t!==null;){if(r=t[Zh])return r;t=AH(t)}return e}t=r,r=t.parentNode}return null}function cx(t){return t=t[Zh]||t[Zb],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ey(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(xt(33))}function ik(t){return t[ok]||null}function RH(t){var e=t[IH];return e===void 0&&(e=t[IH]=new Set),e}var pM=[],ty=-1;function ef(t){return{current:t}}function Ko(t){0>ty||(t.current=pM[ty],pM[ty]=null,ty--)}function yi(t,e){ty++,pM[ty]=t.current,t.current=e}var tf={},da=ef(tf),el=ef(!1),Cg=tf;function ry(t,e){var r=t.type.contextTypes;if(!r)return tf;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function tl(t){return t=t.childContextTypes,t!=null}function sk(){Ko(el),Ko(da)}function FH(t,e,r){if(da.current!==tf)throw Error(xt(168));yi(da,e),yi(el,r)}function MH(t,e,r){var o=t.stateNode;if(t=e.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var i in o)if(!(i in t))throw Error(xt(108,Ub(e)||"Unknown",i));return ei({},r,o)}function ak(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tf,Cg=da.current,yi(da,t),yi(el,el.current),!0}function NH(t,e,r){var o=t.stateNode;if(!o)throw Error(xt(169));r?(t=MH(t,e,Cg),o.__reactInternalMemoizedMergedChildContext=t,Ko(el),Ko(da),yi(da,t)):Ko(el),yi(el,r)}var hM=null,Sg=null,Ode=Ds.unstable_runWithPriority,fM=Ds.unstable_scheduleCallback,mM=Ds.unstable_cancelCallback,zde=Ds.unstable_shouldYield,BH=Ds.unstable_requestPaint,gM=Ds.unstable_now,Ude=Ds.unstable_getCurrentPriorityLevel,lk=Ds.unstable_ImmediatePriority,LH=Ds.unstable_UserBlockingPriority,OH=Ds.unstable_NormalPriority,zH=Ds.unstable_LowPriority,UH=Ds.unstable_IdlePriority,vM={},Hde=BH!==void 0?BH:function(){},pp=null,ck=null,bM=!1,HH=gM(),ua=1e4>HH?gM:function(){return gM()-HH};function ny(){switch(Ude()){case lk:return 99;case LH:return 98;case OH:return 97;case zH:return 96;case UH:return 95;default:throw Error(xt(332))}}function GH(t){switch(t){case 99:return lk;case 98:return LH;case 97:return OH;case 96:return zH;case 95:return UH;default:throw Error(xt(332))}}function xg(t,e){return t=GH(t),Ode(t,e)}function dx(t,e,r){return t=GH(t),fM(t,e,r)}function Jd(){if(ck!==null){var t=ck;ck=null,mM(t)}VH()}function VH(){if(!bM&&pp!==null){bM=!0;var t=0;try{var e=pp;xg(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),pp=null}catch(r){throw pp!==null&&(pp=pp.slice(t+1)),fM(lk,Jd),r}finally{bM=!1}}}var Gde=mg.ReactCurrentBatchConfig;function ad(t,e){if(t&&t.defaultProps){e=ei({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var dk=ef(null),uk=null,oy=null,pk=null;function yM(){pk=oy=uk=null}function CM(t){var e=dk.current;Ko(dk),t.type._context._currentValue=e}function $H(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function iy(t,e){uk=t,pk=oy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!=0&&(ld=!0),t.firstContext=null)}function ac(t,e){if(pk!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(pk=t,e=1073741823),e={context:t,observedBits:e,next:null},oy===null){if(uk===null)throw Error(xt(308));oy=e,uk.dependencies={lanes:0,firstContext:e,responders:null}}else oy=oy.next=e;return t._currentValue}var rf=!1;function SM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function WH(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function of(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function jH(t,e){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:o.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:o.shared,effects:o.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ux(t,e,r,o){var i=t.updateQueue;rf=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var u=t.alternate;if(u!==null){u=u.updateQueue;var p=u.lastBaseUpdate;p!==a&&(p===null?u.firstBaseUpdate=d:p.next=d,u.lastBaseUpdate=c)}}if(s!==null){p=i.baseState,a=0,u=d=c=null;do{l=s.lane;var h=s.eventTime;if((o&l)===l){u!==null&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=t,m=s;switch(l=e,h=r,m.tag){case 1:if(f=m.payload,typeof f=="function"){p=f.call(h,p,l);break e}p=f;break e;case 3:f.flags=f.flags&-4097|64;case 0:if(f=m.payload,l=typeof f=="function"?f.call(h,p,l):f,l==null)break e;p=ei({},p,l);break e;case 2:rf=!0}}s.callback!==null&&(t.flags|=32,l=i.effects,l===null?i.effects=[s]:l.push(s))}else h={eventTime:h,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(d=u=h,c=p):u=u.next=h,a|=l;if(s=s.next,s===null){if(l=i.shared.pending,l===null)break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}while(1);u===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,wx|=a,t.lanes=a,t.memoizedState=p}}function KH(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],i=o.callback;if(i!==null){if(o.callback=null,o=r,typeof i!="function")throw Error(xt(191,i));i.call(o)}}}var qH=new ID.Component().refs;function hk(t,e,r,o){e=t.memoizedState,r=r(o,e),r=r==null?e:ei({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fk={isMounted:function(t){return(t=t._reactInternals)?bg(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var o=wl(),i=lf(t),s=nf(o,i);s.payload=e,r!=null&&(s.callback=r),of(t,s),cf(t,i,o)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var o=wl(),i=lf(t),s=nf(o,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),of(t,s),cf(t,i,o)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wl(),o=lf(t),i=nf(r,o);i.tag=2,e!=null&&(i.callback=e),of(t,i),cf(t,o,r)}};function YH(t,e,r,o,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,s,a):e.prototype&&e.prototype.isPureReactComponent?!ix(r,o)||!ix(i,s):!0}function XH(t,e,r){var o=!1,i=tf,s=e.contextType;return typeof s=="object"&&s!==null?s=ac(s):(i=tl(e)?Cg:da.current,o=e.contextTypes,s=(o=o!=null)?ry(t,i):tf),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fk,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function QH(t,e,r,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,o),e.state!==t&&fk.enqueueReplaceState(e,e.state,null)}function xM(t,e,r,o){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=qH,SM(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ac(s):(s=tl(e)?Cg:da.current,i.context=ry(t,s)),ux(t,r,i,o),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hk(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fk.enqueueReplaceState(i,i.state,null),ux(t,r,i,o),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var mk=Array.isArray;function px(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xt(309));var o=r.stateNode}if(!o)throw Error(xt(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;a===qH&&(a=o.refs={}),s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(xt(284));if(!r._owner)throw Error(xt(290,t))}return t}function gk(t,e){if(t.type!=="textarea")throw Error(xt(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function JH(t){function e(v,y){if(t){var S=v.lastEffect;S!==null?(S.nextEffect=y,v.lastEffect=y):v.firstEffect=v.lastEffect=y,y.nextEffect=null,y.flags=8}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function o(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=pf(v,y),v.index=0,v.sibling=null,v}function s(v,y,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<y?(v.flags=2,y):S):(v.flags=2,y)):y}function a(v){return t&&v.alternate===null&&(v.flags=2),v}function l(v,y,S,C){return y===null||y.tag!==6?(y=oN(S,v.mode,C),y.return=v,y):(y=i(y,S),y.return=v,y)}function c(v,y,S,C){return y!==null&&y.elementType===S.type?(C=i(y,S.props),C.ref=px(v,y,S),C.return=v,C):(C=Mk(S.type,S.key,S.props,null,v.mode,C),C.ref=px(v,y,S),C.return=v,C)}function d(v,y,S,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=iN(S,v.mode,C),y.return=v,y):(y=i(y,S.children||[]),y.return=v,y)}function u(v,y,S,C,b){return y===null||y.tag!==7?(y=hy(S,v.mode,C,b),y.return=v,y):(y=i(y,S),y.return=v,y)}function p(v,y,S){if(typeof y=="string"||typeof y=="number")return y=oN(""+y,v.mode,S),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case zS:return S=Mk(y.type,y.key,y.props,null,v.mode,S),S.ref=px(v,null,y),S.return=v,S;case gg:return y=iN(y,v.mode,S),y.return=v,y}if(mk(y)||GS(y))return y=hy(y,v.mode,S,null),y.return=v,y;gk(v,y)}return null}function h(v,y,S,C){var b=y!==null?y.key:null;if(typeof S=="string"||typeof S=="number")return b!==null?null:l(v,y,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zS:return S.key===b?S.type===jh?u(v,y,S.props.children,C,b):c(v,y,S,C):null;case gg:return S.key===b?d(v,y,S,C):null}if(mk(S)||GS(S))return b!==null?null:u(v,y,S,C,null);gk(v,S)}return null}function f(v,y,S,C,b){if(typeof C=="string"||typeof C=="number")return v=v.get(S)||null,l(y,v,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case zS:return v=v.get(C.key===null?S:C.key)||null,C.type===jh?u(y,v,C.props.children,b,C.key):c(y,v,C,b);case gg:return v=v.get(C.key===null?S:C.key)||null,d(y,v,C,b)}if(mk(C)||GS(C))return v=v.get(S)||null,u(y,v,C,b,null);gk(y,C)}return null}function m(v,y,S,C){for(var b=null,x=null,w=y,k=y=0,T=null;w!==null&&k<S.length;k++){w.index>k?(T=w,w=null):T=w.sibling;var A=h(v,w,S[k],C);if(A===null){w===null&&(w=T);break}t&&w&&A.alternate===null&&e(v,w),y=s(A,y,k),x===null?b=A:x.sibling=A,x=A,w=T}if(k===S.length)return r(v,w),b;if(w===null){for(;k<S.length;k++)w=p(v,S[k],C),w!==null&&(y=s(w,y,k),x===null?b=w:x.sibling=w,x=w);return b}for(w=o(v,w);k<S.length;k++)T=f(w,v,k,S[k],C),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?k:T.key),y=s(T,y,k),x===null?b=T:x.sibling=T,x=T);return t&&w.forEach(function(E){return e(v,E)}),b}function g(v,y,S,C){var b=GS(S);if(typeof b!="function")throw Error(xt(150));if(S=b.call(S),S==null)throw Error(xt(151));for(var x=b=null,w=y,k=y=0,T=null,A=S.next();w!==null&&!A.done;k++,A=S.next()){w.index>k?(T=w,w=null):T=w.sibling;var E=h(v,w,A.value,C);if(E===null){w===null&&(w=T);break}t&&w&&E.alternate===null&&e(v,w),y=s(E,y,k),x===null?b=E:x.sibling=E,x=E,w=T}if(A.done)return r(v,w),b;if(w===null){for(;!A.done;k++,A=S.next())A=p(v,A.value,C),A!==null&&(y=s(A,y,k),x===null?b=A:x.sibling=A,x=A);return b}for(w=o(v,w);!A.done;k++,A=S.next())A=f(w,v,k,A.value,C),A!==null&&(t&&A.alternate!==null&&w.delete(A.key===null?k:A.key),y=s(A,y,k),x===null?b=A:x.sibling=A,x=A);return t&&w.forEach(function(F){return e(v,F)}),b}return function(v,y,S,C){var b=typeof S=="object"&&S!==null&&S.type===jh&&S.key===null;b&&(S=S.props.children);var x=typeof S=="object"&&S!==null;if(x)switch(S.$$typeof){case zS:e:{for(x=S.key,b=y;b!==null;){if(b.key===x){switch(b.tag){case 7:if(S.type===jh){r(v,b.sibling),y=i(b,S.props.children),y.return=v,v=y;break e}break;default:if(b.elementType===S.type){r(v,b.sibling),y=i(b,S.props),y.ref=px(v,b,S),y.return=v,v=y;break e}}r(v,b);break}else e(v,b);b=b.sibling}S.type===jh?(y=hy(S.props.children,v.mode,C,S.key),y.return=v,v=y):(C=Mk(S.type,S.key,S.props,null,v.mode,C),C.ref=px(v,y,S),C.return=v,v=C)}return a(v);case gg:e:{for(b=S.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){r(v,y.sibling),y=i(y,S.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=iN(S,v.mode,C),y.return=v,v=y}return a(v)}if(typeof S=="string"||typeof S=="number")return S=""+S,y!==null&&y.tag===6?(r(v,y.sibling),y=i(y,S),y.return=v,v=y):(r(v,y),y=oN(S,v.mode,C),y.return=v,v=y),a(v);if(mk(S))return m(v,y,S,C);if(GS(S))return g(v,y,S,C);if(x&&gk(v,S),typeof S=="undefined"&&!b)switch(v.tag){case 1:case 22:case 0:case 11:case 15:throw Error(xt(152,Ub(v.type)||"Component"))}return r(v,y)}}var vk=JH(!0),ZH=JH(!1),hx={},Zd=ef(hx),fx=ef(hx),mx=ef(hx);function wg(t){if(t===hx)throw Error(xt(174));return t}function wM(t,e){switch(yi(mx,e),yi(fx,t),yi(Zd,hx),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_F(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_F(e,t)}Ko(Zd),yi(Zd,e)}function sy(){Ko(Zd),Ko(fx),Ko(mx)}function eG(t){wg(mx.current);var e=wg(Zd.current),r=_F(e,t.type);e!==r&&(yi(fx,t),yi(Zd,r))}function TM(t){fx.current===t&&(Ko(Zd),Ko(fx))}var Ci=ef(0);function bk(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hp=null,sf=null,eu=!1;function tG(t,e){var r=dc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function rG(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function DM(t){if(eu){var e=sf;if(e){var r=e;if(!rG(t,e)){if(e=Jb(r.nextSibling),!e||!rG(t,e)){t.flags=t.flags&-1025|2,eu=!1,hp=t;return}tG(hp,r)}hp=t,sf=Jb(e.firstChild)}else t.flags=t.flags&-1025|2,eu=!1,hp=t}}function nG(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hp=t}function yk(t){if(t!==hp)return!1;if(!eu)return nG(t),eu=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!cM(e,t.memoizedProps))for(e=sf;e;)tG(t,e),e=Jb(e.nextSibling);if(nG(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){sf=Jb(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}sf=null}}else sf=hp?Jb(t.stateNode.nextSibling):null;return!0}function kM(){sf=hp=null,eu=!1}var ay=[];function PM(){for(var t=0;t<ay.length;t++)ay[t]._workInProgressVersionPrimary=null;ay.length=0}var gx=mg.ReactCurrentDispatcher,lc=mg.ReactCurrentBatchConfig,vx=0,Ni=null,pa=null,$s=null,Ck=!1,bx=!1;function rl(){throw Error(xt(321))}function EM(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!sc(t[r],e[r]))return!1;return!0}function _M(t,e,r,o,i,s){if(vx=s,Ni=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gx.current=t===null||t.memoizedState===null?$de:Wde,t=r(o,i),bx){s=0;do{if(bx=!1,!(25>s))throw Error(xt(301));s+=1,$s=pa=null,e.updateQueue=null,gx.current=jde,t=r(o,i)}while(bx)}if(gx.current=Tk,e=pa!==null&&pa.next!==null,vx=0,$s=pa=Ni=null,Ck=!1,e)throw Error(xt(300));return t}function Tg(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $s===null?Ni.memoizedState=$s=t:$s=$s.next=t,$s}function Dg(){if(pa===null){var t=Ni.alternate;t=t!==null?t.memoizedState:null}else t=pa.next;var e=$s===null?Ni.memoizedState:$s.next;if(e!==null)$s=e,pa=t;else{if(t===null)throw Error(xt(310));pa=t,t={memoizedState:pa.memoizedState,baseState:pa.baseState,baseQueue:pa.baseQueue,queue:pa.queue,next:null},$s===null?Ni.memoizedState=$s=t:$s=$s.next=t}return $s}function tu(t,e){return typeof e=="function"?e(t):e}function yx(t){var e=Dg(),r=e.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=t;var o=pa,i=o.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}o.baseQueue=i=s,r.pending=null}if(i!==null){i=i.next,o=o.baseState;var l=a=s=null,c=i;do{var d=c.lane;if((vx&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),o=c.eagerReducer===t?c.eagerState:t(o,c.action);else{var u={lane:d,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};l===null?(a=l=u,s=o):l=l.next=u,Ni.lanes|=d,wx|=d}c=c.next}while(c!==null&&c!==i);l===null?s=o:l.next=a,sc(o,e.memoizedState)||(ld=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return[e.memoizedState,r.dispatch]}function Cx(t){var e=Dg(),r=e.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=t;var o=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);sc(s,e.memoizedState)||(ld=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,o]}function oG(t,e,r){var o=e._getVersion;o=o(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===o:(t=t.mutableReadLanes,(t=(vx&t)===t)&&(e._workInProgressVersionPrimary=o,ay.push(e))),t)return r(e._source);throw ay.push(e),Error(xt(350))}function iG(t,e,r,o){var i=Aa;if(i===null)throw Error(xt(349));var s=e._getVersion,a=s(e._source),l=gx.current,c=l.useState(function(){return oG(i,e,r)}),d=c[1],u=c[0];c=$s;var p=t.memoizedState,h=p.refs,f=h.getSnapshot,m=p.source;p=p.subscribe;var g=Ni;return t.memoizedState={refs:h,source:e,subscribe:o},l.useEffect(function(){h.getSnapshot=r,h.setSnapshot=d;var v=s(e._source);if(!sc(a,v)){v=r(e._source),sc(u,v)||(d(v),v=lf(g),i.mutableReadLanes|=v&i.pendingLanes),v=i.mutableReadLanes,i.entangledLanes|=v;for(var y=i.entanglements,S=v;0<S;){var C=31-Qh(S),b=1<<C;y[C]|=v,S&=~b}}},[r,e,o]),l.useEffect(function(){return o(e._source,function(){var v=h.getSnapshot,y=h.setSnapshot;try{y(v(e._source));var S=lf(g);i.mutableReadLanes|=S&i.pendingLanes}catch(C){y(function(){throw C})}})},[e,o]),sc(f,r)&&sc(m,e)&&sc(p,o)||(t={pending:null,dispatch:null,lastRenderedReducer:tu,lastRenderedState:u},t.dispatch=d=FM.bind(null,Ni,t),c.queue=t,c.baseQueue=null,u=oG(i,e,r),c.memoizedState=c.baseState=u),u}function sG(t,e,r){var o=Dg();return iG(o,t,e,r)}function Sx(t){var e=Tg();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:tu,lastRenderedState:t},t=t.dispatch=FM.bind(null,Ni,t),[e.memoizedState,t]}function Sk(t,e,r,o){return t={tag:t,create:e,destroy:r,deps:o,next:null},e=Ni.updateQueue,e===null?(e={lastEffect:null},Ni.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,e.lastEffect=t)),t}function aG(t){var e=Tg();return t={current:t},e.memoizedState=t}function xk(){return Dg().memoizedState}function AM(t,e,r,o){var i=Tg();Ni.flags|=t,i.memoizedState=Sk(1|e,r,void 0,o===void 0?null:o)}function IM(t,e,r,o){var i=Dg();o=o===void 0?null:o;var s=void 0;if(pa!==null){var a=pa.memoizedState;if(s=a.destroy,o!==null&&EM(o,a.deps)){Sk(e,r,s,o);return}}Ni.flags|=t,i.memoizedState=Sk(1|e,r,s,o)}function lG(t,e){return AM(516,4,t,e)}function wk(t,e){return IM(516,4,t,e)}function cG(t,e){return IM(4,2,t,e)}function dG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uG(t,e,r){return r=r!=null?r.concat([t]):null,IM(4,2,dG.bind(null,e,t),r)}function RM(){}function pG(t,e){var r=Dg();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&EM(e,o[1])?o[0]:(r.memoizedState=[t,e],t)}function hG(t,e){var r=Dg();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&EM(e,o[1])?o[0]:(t=t(),r.memoizedState=[t,e],t)}function Vde(t,e){var r=ny();xg(98>r?98:r,function(){t(!0)}),xg(97<r?97:r,function(){var o=lc.transition;lc.transition=1;try{t(!1),e()}finally{lc.transition=o}})}function FM(t,e,r){var o=wl(),i=lf(t),s={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s,a=t.alternate,t===Ni||a!==null&&a===Ni)bx=Ck=!0;else{if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,c=a(l,r);if(s.eagerReducer=a,s.eagerState=c,sc(c,l))return}catch(d){}finally{}cf(t,i,o)}}var Tk={readContext:ac,useCallback:rl,useContext:rl,useEffect:rl,useImperativeHandle:rl,useLayoutEffect:rl,useMemo:rl,useReducer:rl,useRef:rl,useState:rl,useDebugValue:rl,useDeferredValue:rl,useTransition:rl,useMutableSource:rl,useOpaqueIdentifier:rl,unstable_isNewReconciler:!1},$de={readContext:ac,useCallback:function(t,e){return Tg().memoizedState=[t,e===void 0?null:e],t},useContext:ac,useEffect:lG,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,AM(4,2,dG.bind(null,e,t),r)},useLayoutEffect:function(t,e){return AM(4,2,t,e)},useMemo:function(t,e){var r=Tg();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var o=Tg();return e=r!==void 0?r(e):e,o.memoizedState=o.baseState=e,t=o.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=FM.bind(null,Ni,t),[o.memoizedState,t]},useRef:aG,useState:Sx,useDebugValue:RM,useDeferredValue:function(t){var e=Sx(t),r=e[0],o=e[1];return lG(function(){var i=lc.transition;lc.transition=1;try{o(t)}finally{lc.transition=i}},[t]),r},useTransition:function(){var t=Sx(!1),e=t[0];return t=Vde.bind(null,t[1]),aG(t),[t,e]},useMutableSource:function(t,e,r){var o=Tg();return o.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},iG(o,t,e,r)},useOpaqueIdentifier:function(){if(eu){var t=!1,e=Lde(function(){throw t||(t=!0,r("r:"+(uM++).toString(36))),Error(xt(355))}),r=Sx(e)[1];return(Ni.mode&2)==0&&(Ni.flags|=516,Sk(5,function(){r("r:"+(uM++).toString(36))},void 0,null)),e}return e="r:"+(uM++).toString(36),Sx(e),e},unstable_isNewReconciler:!1},Wde={readContext:ac,useCallback:pG,useContext:ac,useEffect:wk,useImperativeHandle:uG,useLayoutEffect:cG,useMemo:hG,useReducer:yx,useRef:xk,useState:function(){return yx(tu)},useDebugValue:RM,useDeferredValue:function(t){var e=yx(tu),r=e[0],o=e[1];return wk(function(){var i=lc.transition;lc.transition=1;try{o(t)}finally{lc.transition=i}},[t]),r},useTransition:function(){var t=yx(tu)[0];return[xk().current,t]},useMutableSource:sG,useOpaqueIdentifier:function(){return yx(tu)[0]},unstable_isNewReconciler:!1},jde={readContext:ac,useCallback:pG,useContext:ac,useEffect:wk,useImperativeHandle:uG,useLayoutEffect:cG,useMemo:hG,useReducer:Cx,useRef:xk,useState:function(){return Cx(tu)},useDebugValue:RM,useDeferredValue:function(t){var e=Cx(tu),r=e[0],o=e[1];return wk(function(){var i=lc.transition;lc.transition=1;try{o(t)}finally{lc.transition=i}},[t]),r},useTransition:function(){var t=Cx(tu)[0];return[xk().current,t]},useMutableSource:sG,useOpaqueIdentifier:function(){return Cx(tu)[0]},unstable_isNewReconciler:!1},Kde=mg.ReactCurrentOwner,ld=!1;function nl(t,e,r,o){e.child=t===null?ZH(e,null,r,o):vk(e,t.child,r,o)}function fG(t,e,r,o,i){r=r.render;var s=e.ref;return iy(e,i),o=_M(t,e,r,o,s,i),t!==null&&!ld?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,fp(t,e,i)):(e.flags|=1,nl(t,e,o,i),e.child)}function mG(t,e,r,o,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!rN(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,gG(t,e,a,o,i,s)):(t=Mk(r.type,null,o,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return a=t.child,(i&s)==0&&(i=a.memoizedProps,r=r.compare,r=r!==null?r:ix,r(i,o)&&t.ref===e.ref)?fp(t,e,s):(e.flags|=1,t=pf(a,o),t.ref=e.ref,t.return=e,e.child=t)}function gG(t,e,r,o,i,s){if(t!==null&&ix(t.memoizedProps,o)&&t.ref===e.ref)if(ld=!1,(s&i)!=0)(t.flags&16384)!=0&&(ld=!0);else return e.lanes=t.lanes,fp(t,e,s);return NM(t,e,r,o,s)}function MM(t,e,r){var o=e.pendingProps,i=o.children,s=t!==null?t.memoizedState:null;if(o.mode==="hidden"||o.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},Fk(e,r);else if((r&1073741824)!=0)e.memoizedState={baseLanes:0},Fk(e,s!==null?s.baseLanes:r);else return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Fk(e,t),null;else s!==null?(o=s.baseLanes|r,e.memoizedState=null):o=r,Fk(e,o);return nl(t,e,i,r),e.child}function vG(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function NM(t,e,r,o,i){var s=tl(r)?Cg:da.current;return s=ry(e,s),iy(e,i),r=_M(t,e,r,o,s,i),t!==null&&!ld?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,fp(t,e,i)):(e.flags|=1,nl(t,e,r,i),e.child)}function bG(t,e,r,o,i){if(tl(r)){var s=!0;ak(e)}else s=!1;if(iy(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),XH(e,r,o),xM(e,r,o,i),o=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=ac(d):(d=tl(r)?Cg:da.current,d=ry(e,d));var u=r.getDerivedStateFromProps,p=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==o||c!==d)&&QH(e,a,o,d),rf=!1;var h=e.memoizedState;a.state=h,ux(e,o,a,i),c=e.memoizedState,l!==o||h!==c||el.current||rf?(typeof u=="function"&&(hk(e,r,u,o),c=e.memoizedState),(l=rf||YH(e,r,l,o,h,c,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4)):(typeof a.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=o,e.memoizedState=c),a.props=o,a.state=c,a.context=d,o=l):(typeof a.componentDidMount=="function"&&(e.flags|=4),o=!1)}else{a=e.stateNode,WH(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:ad(e.type,l),a.props=d,p=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=ac(c):(c=tl(r)?Cg:da.current,c=ry(e,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||h!==c)&&QH(e,a,o,c),rf=!1,h=e.memoizedState,a.state=h,ux(e,o,a,i);var m=e.memoizedState;l!==p||h!==m||el.current||rf?(typeof f=="function"&&(hk(e,r,f,o),m=e.memoizedState),(d=rf||YH(e,r,d,o,h,m,c))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(o,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(o,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),e.memoizedProps=o,e.memoizedState=m),a.props=o,a.state=m,a.context=c,o=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),o=!1)}return BM(t,e,r,o,s,i)}function BM(t,e,r,o,i,s){vG(t,e);var a=(e.flags&64)!=0;if(!o&&!a)return i&&NH(e,r,!1),fp(t,e,s);o=e.stateNode,Kde.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&a?(e.child=vk(e,t.child,null,s),e.child=vk(e,null,l,s)):nl(t,e,l,s),e.memoizedState=o.state,i&&NH(e,r,!0),e.child}function yG(t){var e=t.stateNode;e.pendingContext?FH(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FH(t,e.context,!1),wM(t,e.containerInfo)}var Dk={dehydrated:null,retryLane:0};function CG(t,e,r){var o=e.pendingProps,i=Ci.current,s=!1,a;return(a=(e.flags&64)!=0)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!=0),a?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(i|=1),yi(Ci,i&1),t===null?(o.fallback!==void 0&&DM(e),t=o.children,i=o.fallback,s?(t=SG(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Dk,t):typeof o.unstable_expectedLoadTime=="number"?(t=SG(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Dk,e.lanes=33554432,t):(r=nN({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?s?(o=wG(t,e,o.children,o.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Dk,o):(r=xG(t,e,o.children,r),e.memoizedState=null,r):s?(o=wG(t,e,o.children,o.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Dk,o):(r=xG(t,e,o.children,r),e.memoizedState=null,r)}function SG(t,e,r,o){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)==0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=nN(e,i,0,null),r=hy(r,i,o,null),s.return=t,r.return=t,s.sibling=r,t.child=s,r}function xG(t,e,r,o){var i=t.child;return t=i.sibling,r=pf(i,{mode:"visible",children:r}),(e.mode&2)==0&&(r.lanes=o),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function wG(t,e,r,o,i){var s=e.mode,a=t.child;t=a.sibling;var l={mode:"hidden",children:r};return(s&2)==0&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,a=r.lastEffect,a!==null?(e.firstEffect=r.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):r=pf(a,l),t!==null?o=pf(t,o):(o=hy(o,s,i,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,o}function TG(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$H(t.return,e)}function LM(t,e,r,o,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:i,lastEffect:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=o,a.tail=r,a.tailMode=i,a.lastEffect=s)}function DG(t,e,r){var o=e.pendingProps,i=o.revealOrder,s=o.tail;if(nl(t,e,o.children,r),o=Ci.current,(o&2)!=0)o=o&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!=0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TG(t,r);else if(t.tag===19)TG(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(yi(Ci,o),(e.mode&2)==0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&bk(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),LM(e,!1,i,r,s,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bk(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}LM(e,!0,r,null,s,e.lastEffect);break;case"together":LM(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function fp(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),wx|=e.lanes,(r&e.childLanes)!=0){if(t!==null&&e.child!==t.child)throw Error(xt(153));if(e.child!==null){for(t=e.child,r=pf(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=pf(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var kG,OM,PG,EG;kG=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};OM=function(){};PG=function(t,e,r,o){var i=t.memoizedProps;if(i!==o){t=e.stateNode,wg(Zd.current);var s=null;switch(r){case"input":i=wF(t,i),o=wF(t,o),s=[];break;case"option":i=kF(t,i),o=kF(t,o),s=[];break;case"select":i=ei({},i,{value:void 0}),o=ei({},o,{value:void 0}),s=[];break;case"textarea":i=PF(t,i),o=PF(t,o),s=[];break;default:typeof i.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=rk)}AF(r,o);var a;r=null;for(d in i)if(!o.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(OS.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in o){var c=o[d];if(l=i!=null?i[d]:void 0,o.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(OS.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&jo("scroll",t),s||l===c||(s=[])):typeof c=="object"&&c!==null&&c.$$typeof===bF?c.toString():(s=s||[]).push(d,c))}r&&(s=s||[]).push("style",r);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};EG=function(t,e,r,o){r!==o&&(e.flags|=4)};function xx(t,e){if(!eu)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function qde(t,e,r){var o=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return tl(e.type)&&sk(),null;case 3:return sy(),Ko(el),Ko(da),PM(),o=e.stateNode,o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(yk(e)?e.flags|=4:o.hydrate||(e.flags|=256)),OM(e),null;case 5:TM(e);var i=wg(mx.current);if(r=e.type,t!==null&&e.stateNode!=null)PG(t,e,r,o,i),t.ref!==e.ref&&(e.flags|=128);else{if(!o){if(e.stateNode===null)throw Error(xt(166));return null}if(t=wg(Zd.current),yk(e)){o=e.stateNode,r=e.type;var s=e.memoizedProps;switch(o[Zh]=e,o[ok]=s,r){case"dialog":jo("cancel",o),jo("close",o);break;case"iframe":case"object":case"embed":jo("load",o);break;case"video":case"audio":for(t=0;t<ax.length;t++)jo(ax[t],o);break;case"source":jo("error",o);break;case"img":case"image":case"link":jo("error",o),jo("load",o);break;case"details":jo("toggle",o);break;case"input":C6(o,s),jo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},jo("invalid",o);break;case"textarea":w6(o,s),jo("invalid",o)}AF(r,s),t=null;for(var a in s)s.hasOwnProperty(a)&&(i=s[a],a==="children"?typeof i=="string"?o.textContent!==i&&(t=["children",i]):typeof i=="number"&&o.textContent!==""+i&&(t=["children",""+i]):OS.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&jo("scroll",o));switch(r){case"input":BD(o),x6(o,s,!0);break;case"textarea":BD(o),D6(o);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(o.onclick=rk)}o=t,e.updateQueue=o,o!==null&&(e.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,t===EF.html&&(t=k6(r)),t===EF.html?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=a.createElement(r,{is:o.is}):(t=a.createElement(r),r==="select"&&(a=t,o.multiple?a.multiple=!0:o.size&&(a.size=o.size))):t=a.createElementNS(t,r),t[Zh]=e,t[ok]=o,kG(t,e,!1,!1),e.stateNode=t,a=IF(r,o),r){case"dialog":jo("cancel",t),jo("close",t),i=o;break;case"iframe":case"object":case"embed":jo("load",t),i=o;break;case"video":case"audio":for(i=0;i<ax.length;i++)jo(ax[i],t);i=o;break;case"source":jo("error",t),i=o;break;case"img":case"image":case"link":jo("error",t),jo("load",t),i=o;break;case"details":jo("toggle",t),i=o;break;case"input":C6(t,o),i=wF(t,o),jo("invalid",t);break;case"option":i=kF(t,o);break;case"select":t._wrapperState={wasMultiple:!!o.multiple},i=ei({},o,{value:void 0}),jo("invalid",t);break;case"textarea":w6(t,o),i=PF(t,o),jo("invalid",t);break;default:i=o}AF(r,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?_6(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P6(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&$S(t,c):typeof c=="number"&&$S(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(OS.hasOwnProperty(s)?c!=null&&s==="onScroll"&&jo("scroll",t):c!=null&&pF(t,s,c,a))}switch(r){case"input":BD(t),x6(t,o,!1);break;case"textarea":BD(t),D6(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Kh(o.value));break;case"select":t.multiple=!!o.multiple,s=o.value,s!=null?Hb(t,!!o.multiple,s,!1):o.defaultValue!=null&&Hb(t,!!o.multiple,o.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rk)}EH(r,o)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)EG(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(xt(166));r=wg(mx.current),wg(Zd.current),yk(e)?(o=e.stateNode,r=e.memoizedProps,o[Zh]=e,o.nodeValue!==r&&(e.flags|=4)):(o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Zh]=e,e.stateNode=o)}return null;case 13:return Ko(Ci),o=e.memoizedState,(e.flags&64)!=0?(e.lanes=r,e):(o=o!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&yk(e):r=t.memoizedState!==null,o&&!r&&(e.mode&2)!=0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Ci.current&1)!=0?Ws===0&&(Ws=3):((Ws===0||Ws===3)&&(Ws=4),Aa===null||(wx&134217727)==0&&(cy&134217727)==0||uy(Aa,ha))),(o||r)&&(e.flags|=4),null);case 4:return sy(),OM(e),t===null&&wH(e.stateNode.containerInfo),null;case 10:return CM(e),null;case 17:return tl(e.type)&&sk(),null;case 19:if(Ko(Ci),o=e.memoizedState,o===null)return null;if(s=(e.flags&64)!=0,a=o.rendering,a===null)if(s)xx(o,!1);else{if(Ws!==0||t!==null&&(t.flags&64)!=0)for(t=e.child;t!==null;){if(a=bk(t),a!==null){for(e.flags|=64,xx(o,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),o.lastEffect===null&&(e.firstEffect=null),e.lastEffect=o.lastEffect,o=r,r=e.child;r!==null;)s=r,t=o,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return yi(Ci,Ci.current&1|2),e.child}t=t.sibling}o.tail!==null&&ua()>YM&&(e.flags|=64,s=!0,xx(o,!1),e.lanes=33554432)}else{if(!s)if(t=bk(a),t!==null){if(e.flags|=64,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),xx(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!eu)return e=e.lastEffect=o.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*ua()-o.renderingStartTime>YM&&r!==1073741824&&(e.flags|=64,s=!0,xx(o,!1),e.lanes=33554432);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=e.lastEffect,o.renderingStartTime=ua(),r.sibling=null,e=Ci.current,yi(Ci,s?e&1|2:e&1),r):null;case 23:case 24:return tN(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&o.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(xt(156,e.tag))}function Yde(t){switch(t.tag){case 1:tl(t.type)&&sk();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(sy(),Ko(el),Ko(da),PM(),e=t.flags,(e&64)!=0)throw Error(xt(285));return t.flags=e&-4097|64,t;case 5:return TM(t),null;case 13:return Ko(Ci),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Ko(Ci),null;case 4:return sy(),null;case 10:return CM(t),null;case 23:case 24:return tN(),null;default:return null}}function zM(t,e){try{var r="",o=e;do r+=_ce(o),o=o.return;while(o);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function UM(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Xde=typeof WeakMap=="function"?WeakMap:Map;function _G(t,e,r){r=nf(-1,r),r.tag=3,r.payload={element:null};var o=e.value;return r.callback=function(){Ek||(Ek=!0,XM=o),UM(t,e)},r}function AG(t,e,r){r=nf(-1,r),r.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var i=e.value;r.payload=function(){return UM(t,e),o(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){typeof o!="function"&&(ru===null?ru=new Set([this]):ru.add(this),UM(t,e));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}var Qde=typeof WeakSet=="function"?WeakSet:Set;function IG(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){uf(t,r)}else e.current=null}function Jde(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,o=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:ad(e.type,r),o),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&dM(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(xt(163))}function Zde(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)==3){var o=t.create;t.destroy=o()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;o=i.next,i=i.tag,(i&4)!=0&&(i&1)!=0&&(jG(r,t),aue(r,t)),t=o}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(o=r.elementType===r.type?e.memoizedProps:ad(r.type,e.memoizedProps),t.componentDidUpdate(o,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&KH(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}KH(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&EH(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&W6(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(xt(163))}function RG(t,e){for(var r=t;;){if(r.tag===5){var o=r.stateNode;if(e)o=o.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{o=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,o.style.display=E6("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function FG(t,e){if(Sg&&typeof Sg.onCommitFiberUnmount=="function")try{Sg.onCommitFiberUnmount(hM,e)}catch(s){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var o=r,i=o.destroy;if(o=o.tag,i!==void 0)if((o&4)!=0)jG(e,r);else{o=e;try{i()}catch(s){uf(o,s)}}r=r.next}while(r!==t)}break;case 1:if(IG(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){uf(e,s)}break;case 5:IG(e);break;case 4:LG(t,e)}}function MG(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function NG(t){return t.tag===5||t.tag===3||t.tag===4}function BG(t){e:{for(var e=t.return;e!==null;){if(NG(e))break e;e=e.return}throw Error(xt(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var o=!1;break;case 3:e=e.containerInfo,o=!0;break;case 4:e=e.containerInfo,o=!0;break;default:throw Error(xt(161))}r.flags&16&&($S(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||NG(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}o?HM(t,r,e):GM(t,r,e)}function HM(t,e,r){var o=t.tag,i=o===5||o===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=rk));else if(o!==4&&(t=t.child,t!==null))for(HM(t,e,r),t=t.sibling;t!==null;)HM(t,e,r),t=t.sibling}function GM(t,e,r){var o=t.tag,i=o===5||o===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(GM(t,e,r),t=t.sibling;t!==null;)GM(t,e,r),t=t.sibling}function LG(t,e){for(var r=e,o=!1,i,s;;){if(!o){o=r.return;e:for(;;){if(o===null)throw Error(xt(160));switch(i=o.stateNode,o.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}o=o.return}o=!0}if(r.tag===5||r.tag===6){e:for(var a=t,l=r,c=l;;)if(FG(a,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}s?(a=i,l=r.stateNode,a.nodeType===8?a.parentNode.removeChild(l):a.removeChild(l)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(FG(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function VM(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do(o.tag&3)==3&&(t=o.destroy,o.destroy=void 0,t!==void 0&&t()),o=o.next;while(o!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){o=e.memoizedProps;var i=t!==null?t.memoizedProps:o;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(r[ok]=o,t==="input"&&o.type==="radio"&&o.name!=null&&S6(r,o),IF(t,i),e=IF(t,o),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];a==="style"?_6(r,l):a==="dangerouslySetInnerHTML"?P6(r,l):a==="children"?$S(r,l):pF(r,a,l,e)}switch(t){case"input":TF(r,o);break;case"textarea":T6(r,o);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!o.multiple,s=o.value,s!=null?Hb(r,!!o.multiple,s,!1):t!==!!o.multiple&&(o.defaultValue!=null?Hb(r,!!o.multiple,o.defaultValue,!0):Hb(r,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(xt(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,W6(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(qM=ua(),RG(e.child,!0)),OG(e);return;case 19:OG(e);return;case 17:return;case 23:case 24:RG(e,e.memoizedState!==null);return}throw Error(xt(163))}function OG(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Qde),e.forEach(function(o){var i=due.bind(null,t,o);r.has(o)||(r.add(o),o.then(i,i))})}}function eue(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var tue=Math.ceil,kk=mg.ReactCurrentDispatcher,$M=mg.ReactCurrentOwner,Lr=0,Aa=null,ps=null,ha=0,kg=0,WM=ef(0),Ws=0,Pk=null,ly=0,wx=0,cy=0,jM=0,KM=null,qM=0,YM=1/0;function dy(){YM=ua()+500}var Zt=null,Ek=!1,XM=null,ru=null,af=!1,Tx=null,Dx=90,QM=[],JM=[],mp=null,kx=0,ZM=null,_k=-1,gp=0,Ak=0,Px=null,Ik=!1;function wl(){return(Lr&48)!=0?ua():_k!==-1?_k:_k=ua()}function lf(t){if(t=t.mode,(t&2)==0)return 1;if((t&4)==0)return ny()===99?1:2;if(gp===0&&(gp=ly),Gde.transition!==0){Ak!==0&&(Ak=KM!==null?KM.pendingLanes:0),t=gp;var e=4186112&~Ak;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=ny(),(Lr&4)!=0&&t===98?t=$D(12,gp):(t=Wce(t),t=$D(t,gp)),t}function cf(t,e,r){if(50<kx)throw kx=0,ZM=null,Error(xt(185));if(t=Rk(t,e),t===null)return null;WD(t,e,r),t===Aa&&(cy|=e,Ws===4&&uy(t,ha));var o=ny();e===1?(Lr&8)!=0&&(Lr&48)==0?eN(t):(cc(t,r),Lr===0&&(dy(),Jd())):((Lr&4)==0||o!==98&&o!==99||(mp===null?mp=new Set([t]):mp.add(t)),cc(t,r)),KM=t}function Rk(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function cc(t,e){for(var r=t.callbackNode,o=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Qh(a),c=1<<l,d=s[l];if(d===-1){if((c&o)==0||(c&i)!=0){d=e,jb(c);var u=Lo;s[l]=10<=u?d+250:6<=u?d+5e3:-1}}else d<=e&&(t.expiredLanes|=c);a&=~c}if(o=ZS(t,t===Aa?ha:0),e=Lo,o===0)r!==null&&(r!==vM&&mM(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==vM&&mM(r)}e===15?(r=eN.bind(null,t),pp===null?(pp=[r],ck=fM(lk,VH)):pp.push(r),r=vM):e===14?r=dx(99,eN.bind(null,t)):(r=jce(e),r=dx(r,zG.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function zG(t){if(_k=-1,Ak=gp=0,(Lr&48)!=0)throw Error(xt(327));var e=t.callbackNode;if(df()&&t.callbackNode!==e)return null;var r=ZS(t,t===Aa?ha:0);if(r===0)return null;var o=r,i=Lr;Lr|=16;var s=VG();(Aa!==t||ha!==o)&&(dy(),py(t,o));do try{oue();break}catch(l){GG(t,l)}while(1);if(yM(),kk.current=s,Lr=i,ps!==null?o=0:(Aa=null,ha=0,o=Ws),(ly&cy)!=0)py(t,0);else if(o!==0){if(o===2&&(Lr|=64,t.hydrate&&(t.hydrate=!1,dM(t.containerInfo)),r=J6(t),r!==0&&(o=Ex(t,r))),o===1)throw e=Pk,py(t,0),uy(t,r),cc(t,ua()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,o){case 0:case 1:throw Error(xt(345));case 2:Pg(t);break;case 3:if(uy(t,r),(r&62914560)===r&&(o=qM+500-ua(),10<o)){if(ZS(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_H(Pg.bind(null,t),o);break}Pg(t);break;case 4:if(uy(t,r),(r&4186112)===r)break;for(o=t.eventTimes,i=-1;0<r;){var a=31-Qh(r);s=1<<a,a=o[a],a>i&&(i=a),r&=~s}if(r=i,r=ua()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tue(r/1960))-r,10<r){t.timeoutHandle=_H(Pg.bind(null,t),r);break}Pg(t);break;case 5:Pg(t);break;default:throw Error(xt(329))}}return cc(t,ua()),t.callbackNode===e?zG.bind(null,t):null}function uy(t,e){for(e&=~jM,e&=~cy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Qh(e),o=1<<r;t[r]=-1,e&=~o}}function eN(t){if((Lr&48)!=0)throw Error(xt(327));if(df(),t===Aa&&(t.expiredLanes&ha)!=0){var e=ha,r=Ex(t,e);(ly&cy)!=0&&(e=ZS(t,e),r=Ex(t,e))}else e=ZS(t,0),r=Ex(t,e);if(t.tag!==0&&r===2&&(Lr|=64,t.hydrate&&(t.hydrate=!1,dM(t.containerInfo)),e=J6(t),e!==0&&(r=Ex(t,e))),r===1)throw r=Pk,py(t,0),uy(t,e),cc(t,ua()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pg(t),cc(t,ua()),null}function rue(){if(mp!==null){var t=mp;mp=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,cc(e,ua())})}Jd()}function UG(t,e){var r=Lr;Lr|=1;try{return t(e)}finally{Lr=r,Lr===0&&(dy(),Jd())}}function HG(t,e){var r=Lr;Lr&=-2,Lr|=8;try{return t(e)}finally{Lr=r,Lr===0&&(dy(),Jd())}}function Fk(t,e){yi(WM,kg),kg|=e,ly|=e}function tN(){kg=WM.current,Ko(WM)}function py(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Bde(r)),ps!==null)for(r=ps.return;r!==null;){var o=r;switch(o.tag){case 1:o=o.type.childContextTypes,o!=null&&sk();break;case 3:sy(),Ko(el),Ko(da),PM();break;case 5:TM(o);break;case 4:sy();break;case 13:Ko(Ci);break;case 19:Ko(Ci);break;case 10:CM(o);break;case 23:case 24:tN()}r=r.return}Aa=t,ps=pf(t.current,null),ha=kg=ly=e,Ws=0,Pk=null,jM=cy=wx=0}function GG(t,e){do{var r=ps;try{if(yM(),gx.current=Tk,Ck){for(var o=Ni.memoizedState;o!==null;){var i=o.queue;i!==null&&(i.pending=null),o=o.next}Ck=!1}if(vx=0,$s=pa=Ni=null,bx=!1,$M.current=null,r===null||r.return===null){Ws=1,Pk=e,ps=null;break}e:{var s=t,a=r.return,l=r,c=e;if(e=ha,l.flags|=2048,l.firstEffect=l.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c;if((l.mode&2)==0){var u=l.alternate;u?(l.updateQueue=u.updateQueue,l.memoizedState=u.memoizedState,l.lanes=u.lanes):(l.updateQueue=null,l.memoizedState=null)}var p=(Ci.current&1)!=0,h=a;do{var f;if(f=h.tag===13){var m=h.memoizedState;if(m!==null)f=m.dehydrated!==null;else{var g=h.memoizedProps;f=g.fallback===void 0?!1:g.unstable_avoidThisFallback!==!0?!0:!p}}if(f){var v=h.updateQueue;if(v===null){var y=new Set;y.add(d),h.updateQueue=y}else v.add(d);if((h.mode&2)==0){if(h.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var S=nf(-1,1);S.tag=2,of(l,S)}l.lanes|=1;break e}c=void 0,l=e;var C=s.pingCache;if(C===null?(C=s.pingCache=new Xde,c=new Set,C.set(d,c)):(c=C.get(d),c===void 0&&(c=new Set,C.set(d,c))),!c.has(l)){c.add(l);var b=cue.bind(null,s,d,l);d.then(b,b)}h.flags|=4096,h.lanes=e;break e}h=h.return}while(h!==null);c=Error((Ub(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ws!==5&&(Ws=2),c=zM(c,l),h=a;do{switch(h.tag){case 3:s=c,h.flags|=4096,e&=-e,h.lanes|=e;var x=_G(h,s,e);jH(h,x);break e;case 1:s=c;var w=h.type,k=h.stateNode;if((h.flags&64)==0&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ru===null||!ru.has(k)))){h.flags|=4096,e&=-e,h.lanes|=e;var T=AG(h,s,e);jH(h,T);break e}}h=h.return}while(h!==null)}WG(r)}catch(A){e=A,ps===r&&r!==null&&(ps=r=r.return);continue}break}while(1)}function VG(){var t=kk.current;return kk.current=Tk,t===null?Tk:t}function Ex(t,e){var r=Lr;Lr|=16;var o=VG();Aa===t&&ha===e||py(t,e);do try{nue();break}catch(i){GG(t,i)}while(1);if(yM(),Lr=r,kk.current=o,ps!==null)throw Error(xt(261));return Aa=null,ha=0,Ws}function nue(){for(;ps!==null;)$G(ps)}function oue(){for(;ps!==null&&!zde();)$G(ps)}function $G(t){var e=qG(t.alternate,t,kg);t.memoizedProps=t.pendingProps,e===null?WG(t):ps=e,$M.current=null}function WG(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)==0){if(r=qde(r,e,kg),r!==null){ps=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(kg&1073741824)!=0||(r.mode&4)==0){for(var o=0,i=r.child;i!==null;)o|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=o}t!==null&&(t.flags&2048)==0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=Yde(e),r!==null){r.flags&=2047,ps=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){ps=e;return}ps=e=t}while(e!==null);Ws===0&&(Ws=5)}function Pg(t){var e=ny();return xg(99,iue.bind(null,t,e)),null}function iue(t,e){do df();while(Tx!==null);if((Lr&48)!=0)throw Error(xt(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(xt(177));t.callbackNode=null;var o=r.lanes|r.childLanes,i=o,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<s;){var c=31-Qh(s),d=1<<c;i[c]=0,a[c]=-1,l[c]=-1,s&=~d}if(mp!==null&&(o&24)==0&&mp.has(t)&&mp.delete(t),t===Aa&&(ps=Aa=null,ha=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,o=r.firstEffect):o=r:o=r.firstEffect,o!==null){if(i=Lr,Lr|=32,$M.current=null,aM=jD,a=vH(),nM(a)){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(d=l.getSelection&&l.getSelection())&&d.rangeCount!==0){l=d.anchorNode,s=d.anchorOffset,c=d.focusNode,d=d.focusOffset;try{l.nodeType,c.nodeType}catch(A){l=null;break e}var u=0,p=-1,h=-1,f=0,m=0,g=a,v=null;t:for(;;){for(var y;g!==l||s!==0&&g.nodeType!==3||(p=u+s),g!==c||d!==0&&g.nodeType!==3||(h=u+d),g.nodeType===3&&(u+=g.nodeValue.length),(y=g.firstChild)!==null;)v=g,g=y;for(;;){if(g===a)break t;if(v===l&&++f===s&&(p=u),v===c&&++m===d&&(h=u),(y=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=y}l=p===-1||h===-1?null:{start:p,end:h}}else l=null;l=l||{start:0,end:0}}else l=null;lM={focusedElem:a,selectionRange:l},jD=!1,Px=null,Ik=!1,Zt=o;do try{sue()}catch(A){if(Zt===null)throw Error(xt(330));uf(Zt,A),Zt=Zt.nextEffect}while(Zt!==null);Px=null,Zt=o;do try{for(a=t;Zt!==null;){var S=Zt.flags;if(S&16&&$S(Zt.stateNode,""),S&128){var C=Zt.alternate;if(C!==null){var b=C.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(S&1038){case 2:BG(Zt),Zt.flags&=-3;break;case 6:BG(Zt),Zt.flags&=-3,VM(Zt.alternate,Zt);break;case 1024:Zt.flags&=-1025;break;case 1028:Zt.flags&=-1025,VM(Zt.alternate,Zt);break;case 4:VM(Zt.alternate,Zt);break;case 8:l=Zt,LG(a,l);var x=l.alternate;MG(l),x!==null&&MG(x)}Zt=Zt.nextEffect}}catch(A){if(Zt===null)throw Error(xt(330));uf(Zt,A),Zt=Zt.nextEffect}while(Zt!==null);if(b=lM,C=vH(),S=b.focusedElem,a=b.selectionRange,C!==S&&S&&S.ownerDocument&&gH(S.ownerDocument.documentElement,S)){for(a!==null&&nM(S)&&(C=a.start,b=a.end,b===void 0&&(b=C),"selectionStart"in S?(S.selectionStart=C,S.selectionEnd=Math.min(b,S.value.length)):(b=(C=S.ownerDocument||document)&&C.defaultView||window,b.getSelection&&(b=b.getSelection(),l=S.textContent.length,x=Math.min(a.start,l),a=a.end===void 0?x:Math.min(a.end,l),!b.extend&&x>a&&(l=a,a=x,x=l),l=mH(S,x),s=mH(S,a),l&&s&&(b.rangeCount!==1||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==s.node||b.focusOffset!==s.offset)&&(C=C.createRange(),C.setStart(l.node,l.offset),b.removeAllRanges(),x>a?(b.addRange(C),b.extend(s.node,s.offset)):(C.setEnd(s.node,s.offset),b.addRange(C)))))),C=[],b=S;b=b.parentNode;)b.nodeType===1&&C.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<C.length;S++)b=C[S],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}jD=!!aM,lM=aM=null,t.current=r,Zt=o;do try{for(S=t;Zt!==null;){var w=Zt.flags;if(w&36&&Zde(S,Zt.alternate,Zt),w&128){C=void 0;var k=Zt.ref;if(k!==null){var T=Zt.stateNode;switch(Zt.tag){case 5:C=T;break;default:C=T}typeof k=="function"?k(C):k.current=C}}Zt=Zt.nextEffect}}catch(A){if(Zt===null)throw Error(xt(330));uf(Zt,A),Zt=Zt.nextEffect}while(Zt!==null);Zt=null,Hde(),Lr=i}else t.current=r;if(af)af=!1,Tx=t,Dx=e;else for(Zt=o;Zt!==null;)e=Zt.nextEffect,Zt.nextEffect=null,Zt.flags&8&&(w=Zt,w.sibling=null,w.stateNode=null),Zt=e;if(o=t.pendingLanes,o===0&&(ru=null),o===1?t===ZM?kx++:(kx=0,ZM=t):kx=0,r=r.stateNode,Sg&&typeof Sg.onCommitFiberRoot=="function")try{Sg.onCommitFiberRoot(hM,r,void 0,(r.current.flags&64)==64)}catch(A){}if(cc(t,ua()),Ek)throw Ek=!1,t=XM,XM=null,t;return(Lr&8)!=0||Jd(),null}function sue(){for(;Zt!==null;){var t=Zt.alternate;Ik||Px===null||((Zt.flags&8)!=0?O6(Zt,Px)&&(Ik=!0):Zt.tag===13&&eue(t,Zt)&&O6(Zt,Px)&&(Ik=!0));var e=Zt.flags;(e&256)!=0&&Jde(t,Zt),(e&512)==0||af||(af=!0,dx(97,function(){return df(),null})),Zt=Zt.nextEffect}}function df(){if(Dx!==90){var t=97<Dx?97:Dx;return Dx=90,xg(t,lue)}return!1}function aue(t,e){QM.push(e,t),af||(af=!0,dx(97,function(){return df(),null}))}function jG(t,e){JM.push(e,t),af||(af=!0,dx(97,function(){return df(),null}))}function lue(){if(Tx===null)return!1;var t=Tx;if(Tx=null,(Lr&48)!=0)throw Error(xt(331));var e=Lr;Lr|=32;var r=JM;JM=[];for(var o=0;o<r.length;o+=2){var i=r[o],s=r[o+1],a=i.destroy;if(i.destroy=void 0,typeof a=="function")try{a()}catch(c){if(s===null)throw Error(xt(330));uf(s,c)}}for(r=QM,QM=[],o=0;o<r.length;o+=2){i=r[o],s=r[o+1];try{var l=i.create;i.destroy=l()}catch(c){if(s===null)throw Error(xt(330));uf(s,c)}}for(l=t.current.firstEffect;l!==null;)t=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=t;return Lr=e,Jd(),!0}function KG(t,e,r){e=zM(r,e),e=_G(t,e,1),of(t,e),e=wl(),t=Rk(t,1),t!==null&&(WD(t,1,e),cc(t,e))}function uf(t,e){if(t.tag===3)KG(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){KG(r,t,e);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ru===null||!ru.has(o))){t=zM(e,t);var i=AG(r,t,1);if(of(r,i),i=wl(),r=Rk(r,1),r!==null)WD(r,1,i),cc(r,i);else if(typeof o.componentDidCatch=="function"&&(ru===null||!ru.has(o)))try{o.componentDidCatch(e,t)}catch(s){}break}}r=r.return}}function cue(t,e,r){var o=t.pingCache;o!==null&&o.delete(e),e=wl(),t.pingedLanes|=t.suspendedLanes&r,Aa===t&&(ha&r)===r&&(Ws===4||Ws===3&&(ha&62914560)===ha&&500>ua()-qM?py(t,0):jM|=r),cc(t,e)}function due(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)==0?e=1:(e&4)==0?e=ny()===99?1:2:(gp===0&&(gp=ly),e=Kb(62914560&~gp),e===0&&(e=4194304))),r=wl(),t=Rk(t,e),t!==null&&(WD(t,e,r),cc(t,r))}var qG;qG=function(t,e,r){var o=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||el.current)ld=!0;else if((r&o)!=0)ld=(t.flags&16384)!=0;else{switch(ld=!1,e.tag){case 3:yG(e),kM();break;case 5:eG(e);break;case 1:tl(e.type)&&ak(e);break;case 4:wM(e,e.stateNode.containerInfo);break;case 10:o=e.memoizedProps.value;var i=e.type._context;yi(dk,i._currentValue),i._currentValue=o;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!=0?CG(t,e,r):(yi(Ci,Ci.current&1),e=fp(t,e,r),e!==null?e.sibling:null);yi(Ci,Ci.current&1);break;case 19:if(o=(r&e.childLanes)!=0,(t.flags&64)!=0){if(o)return DG(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yi(Ci,Ci.current),o)break;return null;case 23:case 24:return e.lanes=0,MM(t,e,r)}return fp(t,e,r)}else ld=!1;switch(e.lanes=0,e.tag){case 2:if(o=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=ry(e,da.current),iy(e,r),i=_M(null,e,o,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,tl(o)){var s=!0;ak(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,SM(e);var a=o.getDerivedStateFromProps;typeof a=="function"&&hk(e,o,a,t),i.updater=fk,e.stateNode=i,i._reactInternals=e,xM(e,o,t,r),e=BM(null,e,o,!0,s,r)}else e.tag=0,nl(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=pue(i),t=ad(i,t),s){case 0:e=NM(null,e,i,t,r);break e;case 1:e=bG(null,e,i,t,r);break e;case 11:e=fG(null,e,i,t,r);break e;case 14:e=mG(null,e,i,ad(i.type,t),o,r);break e}throw Error(xt(306,i,""))}return e;case 0:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:ad(o,i),NM(t,e,o,i,r);case 1:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:ad(o,i),bG(t,e,o,i,r);case 3:if(yG(e),o=e.updateQueue,t===null||o===null)throw Error(xt(282));if(o=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,WH(t,e),ux(e,o,null,r),o=e.memoizedState.element,o===i)kM(),e=fp(t,e,r);else{if(i=e.stateNode,(s=i.hydrate)&&(sf=Jb(e.stateNode.containerInfo.firstChild),hp=e,s=eu=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],ay.push(s);for(r=ZH(e,null,o,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else nl(t,e,o,r),kM();e=e.child}return e;case 5:return eG(e),t===null&&DM(e),o=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,cM(o,i)?a=null:s!==null&&cM(o,s)&&(e.flags|=16),vG(t,e),nl(t,e,a,r),e.child;case 6:return t===null&&DM(e),null;case 13:return CG(t,e,r);case 4:return wM(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=vk(e,null,o,r):nl(t,e,o,r),e.child;case 11:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:ad(o,i),fG(t,e,o,i,r);case 7:return nl(t,e,e.pendingProps,r),e.child;case 8:return nl(t,e,e.pendingProps.children,r),e.child;case 12:return nl(t,e,e.pendingProps.children,r),e.child;case 10:e:{o=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value;var l=e.type._context;if(yi(dk,l._currentValue),l._currentValue=s,a!==null)if(l=a.value,s=sc(l,s)?0:(typeof o._calculateChangedBits=="function"?o._calculateChangedBits(l,s):1073741823)|0,s===0){if(a.children===i.children&&!el.current){e=fp(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){a=l.child;for(var d=c.firstContext;d!==null;){if(d.context===o&&(d.observedBits&s)!=0){l.tag===1&&(d=nf(-1,r&-r),d.tag=2,of(l,d)),l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),$H(l.return,r),c.lanes|=r;break}d=d.next}}else a=l.tag===10&&l.type===e.type?null:l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}nl(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,o=s.children,iy(e,r),i=ac(i,s.unstable_observedBits),o=o(i),e.flags|=1,nl(t,e,o,r),e.child;case 14:return i=e.type,s=ad(i,e.pendingProps),s=ad(i.type,s),mG(t,e,i,s,o,r);case 15:return gG(t,e,e.type,e.pendingProps,o,r);case 17:return o=e.type,i=e.pendingProps,i=e.elementType===o?i:ad(o,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,tl(o)?(t=!0,ak(e)):t=!1,iy(e,r),XH(e,o,i),xM(e,o,i,r),BM(null,e,o,!0,t,r);case 19:return DG(t,e,r);case 23:return MM(t,e,r);case 24:return MM(t,e,r)}throw Error(xt(156,e.tag))};function uue(t,e,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function dc(t,e,r,o){return new uue(t,e,r,o)}function rN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pue(t){if(typeof t=="function")return rN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===RD)return 11;if(t===MD)return 14}return 2}function pf(t,e){var r=t.alternate;return r===null?(r=dc(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Mk(t,e,r,o,i,s){var a=2;if(o=t,typeof t=="function")rN(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case jh:return hy(r.children,i,s,e);case g6:a=8,i|=16;break;case hF:a=8,i|=1;break;case US:return t=dc(12,r,e,i|8),t.elementType=US,t.type=US,t.lanes=s,t;case HS:return t=dc(13,r,e,i),t.type=HS,t.elementType=HS,t.lanes=s,t;case FD:return t=dc(19,r,e,i),t.elementType=FD,t.lanes=s,t;case yF:return nN(r,i,s,e);case CF:return t=dc(24,r,e,i),t.elementType=CF,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fF:a=10;break e;case mF:a=9;break e;case RD:a=11;break e;case MD:a=14;break e;case gF:a=16,o=null;break e;case vF:a=22;break e}throw Error(xt(130,t==null?t:typeof t,""))}return e=dc(a,r,e,i),e.elementType=t,e.type=o,e.lanes=s,e}function hy(t,e,r,o){return t=dc(7,t,o,e),t.lanes=r,t}function nN(t,e,r,o){return t=dc(23,t,o,e),t.elementType=yF,t.lanes=r,t}function oN(t,e,r){return t=dc(6,t,null,e),t.lanes=r,t}function iN(t,e,r){return e=dc(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hue(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jF(0),this.expirationTimes=jF(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jF(0),this.mutableSourceEagerHydrationData=null}function fue(t,e,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gg,key:o==null?null:""+o,children:t,containerInfo:e,implementation:r}}function Nk(t,e,r,o){var i=e.current,s=wl(),a=lf(i);e:if(r){r=r._reactInternals;t:{if(bg(r)!==r||r.tag!==1)throw Error(xt(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(tl(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(xt(171))}if(r.tag===1){var c=r.type;if(tl(c)){r=MH(r,c,l);break e}}r=l}else r=tf;return e.context===null?e.context=r:e.pendingContext=r,e=nf(s,a),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),of(i,e),cf(i,a,s),a}function sN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YG(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function aN(t,e){YG(t,e),(t=t.alternate)&&YG(t,e)}function mue(){return null}function lN(t,e,r){var o=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new hue(t,e,r!=null&&r.hydrate===!0),e=dc(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,SM(e),t[Zb]=r.current,wH(t.nodeType===8?t.parentNode:t),o)for(t=0;t<o.length;t++){e=o[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}lN.prototype.render=function(t){Nk(t,this._internalRoot,null,null)};lN.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Nk(null,t,null,function(){e[Zb]=null})};function _x(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gue(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new lN(t,0,e?{hydrate:!0}:void 0)}function Bk(t,e,r,o,i){var s=r._reactRootContainer;if(s){var a=s._internalRoot;if(typeof i=="function"){var l=i;i=function(){var d=sN(a);l.call(d)}}Nk(e,a,t,i)}else{if(s=r._reactRootContainer=gue(r,o),a=s._internalRoot,typeof i=="function"){var c=i;i=function(){var d=sN(a);c.call(d)}}HG(function(){Nk(e,a,t,i)})}return sN(a)}z6=function(t){if(t.tag===13){var e=wl();cf(t,4,e),aN(t,4)}};UF=function(t){if(t.tag===13){var e=wl();cf(t,67108864,e),aN(t,67108864)}};U6=function(t){if(t.tag===13){var e=wl(),r=lf(t);cf(t,r,e),aN(t,r)}};H6=function(t,e){return e()};FF=function(t,e,r){switch(e){case"input":if(TF(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var o=r[e];if(o!==t&&o.form===t.form){var i=ik(o);if(!i)throw Error(xt(90));y6(o),TF(o,i)}}}break;case"textarea":T6(t,r);break;case"select":e=r.value,e!=null&&Hb(t,!!r.multiple,e,!1)}};MF=UG;F6=function(t,e,r,o,i){var s=Lr;Lr|=4;try{return xg(98,t.bind(null,e,r,o,i))}finally{Lr=s,Lr===0&&(dy(),Jd())}};NF=function(){(Lr&49)==0&&(rue(),df())};M6=function(t,e){var r=Lr;Lr|=2;try{return t(e)}finally{Lr=r,Lr===0&&(dy(),Jd())}};function XG(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_x(e))throw Error(xt(200));return fue(t,e,null,r)}var vue={Events:[cx,ey,ik,I6,R6,df,{current:!1}]},Ax={findFiberByHostInstance:yg,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},bue={bundleType:Ax.bundleType,version:Ax.version,rendererPackageName:Ax.rendererPackageName,rendererConfig:Ax.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mg.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=L6(t),t===null?null:t.stateNode},findFiberByHostInstance:Ax.findFiberByHostInstance||mue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Ix=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Ix.isDisabled&&Ix.supportsFiber))try{hM=Ix.inject(bue),Sg=Ix}catch(t){}var Ix;uc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vue;uc.createPortal=XG;uc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xt(188)):Error(xt(268,Object.keys(t)));return t=L6(e),t=t===null?null:t.stateNode,t};uc.flushSync=function(t,e){var r=Lr;if((r&48)!=0)return t(e);Lr|=1;try{if(t)return xg(99,t.bind(null,e))}finally{Lr=r,Jd()}};uc.hydrate=function(t,e,r){if(!_x(e))throw Error(xt(200));return Bk(null,t,e,!0,r)};uc.render=function(t,e,r){if(!_x(e))throw Error(xt(200));return Bk(null,t,e,!1,r)};uc.unmountComponentAtNode=function(t){if(!_x(t))throw Error(xt(40));return t._reactRootContainer?(HG(function(){Bk(null,null,t,!1,function(){t._reactRootContainer=null,t[Zb]=null})}),!0):!1};uc.unstable_batchedUpdates=UG;uc.unstable_createPortal=function(t,e){return XG(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};uc.unstable_renderSubtreeIntoContainer=function(t,e,r,o){if(!_x(r))throw Error(xt(200));if(t==null||t._reactInternals===void 0)throw Error(xt(38));return Bk(t,e,r,!1,o)};uc.version="17.0.2"});var Lk=st((cNe,ZG)=>{"use strict";function JG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JG)}catch(t){console.error(t)}}JG(),ZG.exports=QG()});var t7=st((e7,cN)=>{(function(t){if(typeof e7=="object"&&typeof cN!="undefined")cN.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window!="undefined"?e=window:typeof globalThis!="undefined"?e=globalThis:typeof self!="undefined"?e=self:e=this,e.Bugsnag=t()}})(function(){var t,e,r,o=["navigation","request","process","log","user","state","error","manual"],i=function(O,ee,ce){for(var de=ce,_e=0,Ve=O.length;_e<Ve;_e++)de=ee(de,O[_e],_e,O);return de},s=function(O,ee){return i(O,function(ce,de,_e,Ve){return ee(de,_e,Ve)?ce.concat(de):ce},[])},a=function(O,ee){return i(O,function(ce,de,_e,Ve){return ce===!0||de===ee},!1)},l=function(O){return Object.prototype.toString.call(O)==="[object Array]"},c=!{toString:null}.propertyIsEnumerable("toString"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(O){var ee=[],ce;for(ce in O)Object.prototype.hasOwnProperty.call(O,ce)&&ee.push(ce);if(!c)return ee;for(var de=0,_e=d.length;de<_e;de++)Object.prototype.hasOwnProperty.call(O,d[de])&&ee.push(d[de]);return ee},p=function(O,ee){return O===void 0&&(O=1),ee===void 0&&(ee=1/0),function(ce){return typeof ce=="number"&&parseInt(""+ce,10)===ce&&ce>=O&&ce<=ee}},h=function(O){return typeof O=="function"||l(O)&&s(O,function(ee){return typeof ee=="function"}).length===O.length},f=function(O){return typeof O=="string"&&!!O.length},m={},g=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};m.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:f},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(O){return O===void 0||f(O)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(O){return O===void 0||f(O)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(O){return O===!0||O===!1}},enabledErrorTypes:{defaultValue:function(){return g()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(O){if(typeof O!="object"||!O)return!1;var ee=u(O),ce=u(g());return!(s(ee,function(de){return a(ce,de)}).length<ee.length||s(u(O),function(de){return typeof O[de]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:h},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:h},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:h},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(O){return O&&typeof O=="object"&&f(O.notify)&&f(O.sessions)&&s(u(O),function(ee){return!a(["notify","sessions"],ee)}).length===0}},autoTrackSessions:{defaultValue:function(O){return!0},message:"should be true|false",validate:function(O){return O===!0||O===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(O){return O===null||l(O)&&s(O,function(ee){return typeof ee=="string"}).length===O.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(O){return typeof O=="string"&&O.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number \u2264100",validate:function(O){return p(0,100)(O)}},enabledBreadcrumbTypes:{defaultValue:function(){return o},message:"should be null or a list of available breadcrumb types ("+o.join(",")+")",validate:function(O){return O===null||l(O)&&i(O,function(ee,ce){return ee===!1?ee:a(o,ce)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(O){return O===void 0||typeof O=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(O){return O===null||O&&i(u(O),function(ee,ce){return ee&&a(["id","email","name"],ce)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(O){return typeof O=="object"&&O!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(O){return!O||O&&i(["debug","info","warn","error"],function(ee,ce){return ee&&typeof O[ce]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(O){return l(O)&&O.length===s(O,function(ee){return typeof ee=="string"||ee&&typeof ee.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(O){return l(O)&&O.length===s(O,function(ee){return ee&&typeof ee=="object"&&typeof ee.load=="function"}).length}}};var v=function(O){for(var ee=1;ee<arguments.length;ee++){var ce=arguments[ee];for(var de in ce)Object.prototype.hasOwnProperty.call(ce,de)&&(O[de]=ce[de])}return O},y=function(O,ee){return i(O,function(ce,de,_e,Ve){return ce.concat(ee(de,_e,Ve))},[])};function S(){return S=Object.assign||function(O){for(var ee=1;ee<arguments.length;ee++){var ce=arguments[ee];for(var de in ce)Object.prototype.hasOwnProperty.call(ce,de)&&(O[de]=ce[de])}return O},S.apply(this,arguments)}var C=m.schema,b={releaseStage:v({},C.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:S({},C.appType,{defaultValue:function(){return"browser"}}),logger:v({},C.logger,{defaultValue:function(){return typeof console!="undefined"&&typeof console.debug=="function"?x():void 0}})},x=function(){var O={},ee=console.log;return y(["debug","info","warn","error"],function(ce){var de=console[ce];O[ce]=typeof de=="function"?de.bind(console,"[bugsnag]"):ee.bind(console,"[bugsnag]")}),O},w=function(){function O(ce,de,_e,Ve){Ve===void 0&&(Ve=new Date),this.type=_e,this.message=ce,this.metadata=de,this.timestamp=Ve}var ee=O.prototype;return ee.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},O}(),k=w,T={};(function(O,ee){"use strict";typeof t=="function"&&t.amd?t("stackframe",[],ee):typeof T=="object"?T=ee():O.StackFrame=ee()})(this,function(){"use strict";function O(Ft){return!isNaN(parseFloat(Ft))&&isFinite(Ft)}function ee(Ft){return Ft.charAt(0).toUpperCase()+Ft.substring(1)}function ce(Ft){return function(){return this[Ft]}}var de=["isConstructor","isEval","isNative","isToplevel"],_e=["columnNumber","lineNumber"],Ve=["fileName","functionName","source"],Qe=["args"],Tt=de.concat(_e,Ve,Qe);function ct(Ft){if(Ft instanceof Object)for(var kn=0;kn<Tt.length;kn++)Ft.hasOwnProperty(Tt[kn])&&Ft[Tt[kn]]!==void 0&&this["set"+ee(Tt[kn])](Ft[Tt[kn]])}ct.prototype={getArgs:function(){return this.args},setArgs:function(Ft){if(Object.prototype.toString.call(Ft)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=Ft},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Ft){if(Ft instanceof ct)this.evalOrigin=Ft;else if(Ft instanceof Object)this.evalOrigin=new ct(Ft);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var Ft=this.getFunctionName()||"{anonymous}",kn="("+(this.getArgs()||[]).join(",")+")",Ea=this.getFileName()?"@"+this.getFileName():"",li=O(this.getLineNumber())?":"+this.getLineNumber():"",Br=O(this.getColumnNumber())?":"+this.getColumnNumber():"";return Ft+kn+Ea+li+Br}};for(var Qt=0;Qt<de.length;Qt++)ct.prototype["get"+ee(de[Qt])]=ce(de[Qt]),ct.prototype["set"+ee(de[Qt])]=function(Ft){return function(kn){this[Ft]=Boolean(kn)}}(de[Qt]);for(var Rt=0;Rt<_e.length;Rt++)ct.prototype["get"+ee(_e[Rt])]=ce(_e[Rt]),ct.prototype["set"+ee(_e[Rt])]=function(Ft){return function(kn){if(!O(kn))throw new TypeError(Ft+" must be a Number");this[Ft]=Number(kn)}}(_e[Rt]);for(var Dn=0;Dn<Ve.length;Dn++)ct.prototype["get"+ee(Ve[Dn])]=ce(Ve[Dn]),ct.prototype["set"+ee(Ve[Dn])]=function(Ft){return function(kn){this[Ft]=String(kn)}}(Ve[Dn]);return ct});var A={};(function(O,ee){"use strict";typeof t=="function"&&t.amd?t("error-stack-parser",["stackframe"],ee):typeof A=="object"?A=ee(T):O.ErrorStackParser=ee(O.StackFrame)})(this,function(ee){"use strict";var ce=/(^|@)\S+\:\d+/,de=/^\s*at .*(\S+\:\d+|\(native\))/m,_e=/^(eval@)?(\[native code\])?$/;return{parse:function(Qe){if(typeof Qe.stacktrace!="undefined"||typeof Qe["opera#sourceloc"]!="undefined")return this.parseOpera(Qe);if(Qe.stack&&Qe.stack.match(de))return this.parseV8OrIE(Qe);if(Qe.stack)return this.parseFFOrSafari(Qe);throw new Error("Cannot parse given Error object")},extractLocation:function(Qe){if(Qe.indexOf(":")===-1)return[Qe];var Tt=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,ct=Tt.exec(Qe.replace(/[\(\)]/g,""));return[ct[1],ct[2]||void 0,ct[3]||void 0]},parseV8OrIE:function(Qe){var Tt=Qe.stack.split(`
`).filter(function(ct){return!!ct.match(de)},this);return Tt.map(function(ct){ct.indexOf("(eval ")>-1&&(ct=ct.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var Qt=ct.replace(/^\s+/,"").replace(/\(eval code/g,"("),Rt=Qt.match(/ (\((.+):(\d+):(\d+)\)$)/);Qt=Rt?Qt.replace(Rt[0],""):Qt;var Dn=Qt.split(/\s+/).slice(1),Ft=this.extractLocation(Rt?Rt[1]:Dn.pop()),kn=Dn.join(" ")||void 0,Ea=["eval","<anonymous>"].indexOf(Ft[0])>-1?void 0:Ft[0];return new ee({functionName:kn,fileName:Ea,lineNumber:Ft[1],columnNumber:Ft[2],source:ct})},this)},parseFFOrSafari:function(Qe){var Tt=Qe.stack.split(`
`).filter(function(ct){return!ct.match(_e)},this);return Tt.map(function(ct){if(ct.indexOf(" > eval")>-1&&(ct=ct.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),ct.indexOf("@")===-1&&ct.indexOf(":")===-1)return new ee({functionName:ct});var Qt=/((.*".+"[^@]*)?[^@]*)(?:@)/,Rt=ct.match(Qt),Dn=Rt&&Rt[1]?Rt[1]:void 0,Ft=this.extractLocation(ct.replace(Qt,""));return new ee({functionName:Dn,fileName:Ft[0],lineNumber:Ft[1],columnNumber:Ft[2],source:ct})},this)},parseOpera:function(Qe){return!Qe.stacktrace||Qe.message.indexOf(`
`)>-1&&Qe.message.split(`
`).length>Qe.stacktrace.split(`
`).length?this.parseOpera9(Qe):Qe.stack?this.parseOpera11(Qe):this.parseOpera10(Qe)},parseOpera9:function(Qe){for(var Tt=/Line (\d+).*script (?:in )?(\S+)/i,ct=Qe.message.split(`
`),Qt=[],Rt=2,Dn=ct.length;Rt<Dn;Rt+=2){var Ft=Tt.exec(ct[Rt]);Ft&&Qt.push(new ee({fileName:Ft[2],lineNumber:Ft[1],source:ct[Rt]}))}return Qt},parseOpera10:function(Qe){for(var Tt=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,ct=Qe.stacktrace.split(`
`),Qt=[],Rt=0,Dn=ct.length;Rt<Dn;Rt+=2){var Ft=Tt.exec(ct[Rt]);Ft&&Qt.push(new ee({functionName:Ft[3]||void 0,fileName:Ft[2],lineNumber:Ft[1],source:ct[Rt]}))}return Qt},parseOpera11:function(Qe){var Tt=Qe.stack.split(`
`).filter(function(ct){return!!ct.match(ce)&&!ct.match(/^Error created at/)},this);return Tt.map(function(ct){var Qt=ct.split("@"),Rt=this.extractLocation(Qt.pop()),Dn=Qt.shift()||"",Ft=Dn.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,kn;Dn.match(/\(([^\)]*)\)/)&&(kn=Dn.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var Ea=kn===void 0||kn==="[arguments not available]"?void 0:kn.split(",");return new ee({functionName:Ft,args:Ea,fileName:Rt[0],lineNumber:Rt[1],columnNumber:Rt[2],source:ct})},this)}}});var E=A,F=function(O){return!!O&&(!!O.stack||!!O.stacktrace||!!O["opera#sourceloc"])&&typeof(O.stack||O.stacktrace||O["opera#sourceloc"])=="string"&&O.stack!==O.name+": "+O.message},z=L;function L(O){switch(Object.prototype.toString.call(O)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return O instanceof Error}}var R=z,N=function(O,ee,ce,de){var _e;if(!!ee){var Ve;if(ce===null)return W(O,ee);typeof ce=="object"&&(Ve=ce),typeof ce=="string"&&(Ve=(_e={},_e[ce]=de,_e)),!!Ve&&(O[ee]||(O[ee]={}),O[ee]=v({},O[ee],Ve))}},V=function(O,ee,ce){if(typeof ee=="string"){if(!ce)return O[ee];if(O[ee])return O[ee][ce]}},W=function(O,ee,ce){if(typeof ee=="string"){if(!ce){delete O[ee];return}O[ee]&&delete O[ee][ce]}},me={add:N,get:V,clear:W},ie={};(function(O,ee){"use strict";typeof t=="function"&&t.amd?t("stack-generator",["stackframe"],ee):typeof ie=="object"?ie=ee(T):O.StackGenerator=ee(O.StackFrame)})(this,function(O){return{backtrace:function(ce){var de=[],_e=10;typeof ce=="object"&&typeof ce.maxStackSize=="number"&&(_e=ce.maxStackSize);for(var Ve=arguments.callee;Ve&&de.length<_e&&Ve.arguments;){for(var Qe=new Array(Ve.arguments.length),Tt=0;Tt<Qe.length;++Tt)Qe[Tt]=Ve.arguments[Tt];/function(?:\s+([\w$]+))+\s*\(/.test(Ve.toString())?de.push(new O({functionName:RegExp.$1||void 0,args:Qe})):de.push(new O({args:Qe}));try{Ve=Ve.caller}catch(ct){break}}return de}}});var Z=function(){function O(ce,de,_e,Ve,Qe){_e===void 0&&(_e=[]),Ve===void 0&&(Ve=I()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=Qe,this._handledState=Ve,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._user={},this._session=void 0,this.errors=[{errorClass:U(ce),errorMessage:U(de),type:O.__type,stacktrace:i(_e,function(Tt,ct){var Qt=P(ct);try{return JSON.stringify(Qt)==="{}"?Tt:Tt.concat(Qt)}catch(Rt){return Tt}},[])}]}var ee=O.prototype;return ee.addMetadata=function(de,_e,Ve){return me.add(this._metadata,de,_e,Ve)},ee.getMetadata=function(de,_e){return me.get(this._metadata,de,_e)},ee.clearMetadata=function(de,_e){return me.clear(this._metadata,de,_e)},ee.getUser=function(){return this._user},ee.setUser=function(de,_e,Ve){this._user={id:de,email:_e,name:Ve}},ee.toJSON=function(){return{payloadVersion:"4",exceptions:y(this.errors,function(de){return v({},de,{message:de.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session}},O}(),P=function(O){var ee={file:O.fileName,method:_(O.functionName),lineNumber:O.lineNumber,columnNumber:O.columnNumber,code:void 0,inProject:void 0};return ee.lineNumber>-1&&!ee.file&&!ee.method&&(ee.file="global code"),ee},_=function(O){return/^global code$/i.test(O)?"global code":O},I=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},U=function(O){return typeof O=="string"?O:""};Z.getStacktrace=function(O,ee,ce){if(F(O))return E.parse(O).slice(ee);try{return s(ie.backtrace(),function(de){return(de.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+ce)}catch(de){return[]}},Z.create=function(O,ee,ce,de,_e,Ve){_e===void 0&&(_e=0);var Qe=$(O,ee,de,Ve),Tt=Qe[0],ct=Qe[1],Qt;try{var Rt=Z.getStacktrace(Tt,ct>0?1+ct+_e:0,1+_e);Qt=new Z(Tt.name,Tt.message,Rt,ce,O)}catch(Dn){Qt=new Z(Tt.name,Tt.message,[],ce,O)}return Tt.name==="InvalidError"&&Qt.addMetadata(""+de,"non-error parameter",M(O)),Qt};var M=function(O){return O===null?"null":O===void 0?"undefined":O},$=function(O,ee,ce,de){var _e,Ve=0,Qe=function(Tt){de&&de.warn(ce+' received a non-error: "'+Tt+'"');var ct=new Error(ce+' received a non-error. See "'+ce+'" tab for more detail.');return ct.name="InvalidError",ct};if(!ee)R(O)?_e=O:(_e=Qe(typeof O),Ve+=2);else switch(typeof O){case"string":case"number":case"boolean":_e=new Error(String(O)),Ve+=1;break;case"function":_e=Qe("function"),Ve+=2;break;case"object":O!==null&&R(O)?_e=O:O!==null&&H(O)?(_e=new Error(O.message||O.errorMessage),_e.name=O.name||O.errorClass,Ve+=1):(_e=Qe(O===null?"null":"unsupported object"),Ve+=2);break;default:_e=Qe("nothing"),Ve+=2}if(!F(_e))try{throw _e}catch(Tt){F(Tt)&&(_e=Tt,Ve=1)}return[_e,Ve]};Z.__type="browserjs";var H=function(O){return(typeof O.name=="string"||typeof O.errorClass=="string")&&(typeof O.message=="string"||typeof O.errorMessage=="string")},Y=Z,ae=function(O,ee,ce){var de=0,_e=function(){if(de>=O.length)return ce(null,!0);ee(O[de],function(Ve,Qe){if(Ve)return ce(Ve);if(Qe===!1)return ce(null,!1);de++,_e()})};_e()},le=function(O,ee,ce,de){var _e=function(Ve,Qe){if(typeof Ve!="function")return Qe(null);try{if(Ve.length!==2){var Tt=Ve(ee);return Tt&&typeof Tt.then=="function"?Tt.then(function(ct){return setTimeout(function(){return Qe(null,ct)})},function(ct){setTimeout(function(){return ce(ct),Qe(null,!0)})}):Qe(null,Tt)}Ve(ee,function(ct,Qt){if(ct)return ce(ct),Qe(null);Qe(null,Qt)})}catch(ct){ce(ct),Qe(null)}};ae(O,_e,de)},xe=function(O,ee,ce,de){for(var _e=!1,Ve=O.slice();!_e&&Ve.length;)try{_e=Ve.pop()(ee)===!1}catch(Qe){de.error("Error occurred in "+ce+" callback, continuing anyway\u2026"),de.error(Qe)}return _e},Se=function(ee,ce){var de="000000000"+ee;return de.substr(de.length-ce)},je=typeof window=="object"?window:self,ze=0;for(var Le in je)Object.hasOwnProperty.call(je,Le)&&ze++;var dt=navigator.mimeTypes?navigator.mimeTypes.length:0,mt=Se((dt+navigator.userAgent.length).toString(36)+ze.toString(36),4),ot=function(){return mt},vt=0,$t=4,Kt=36,_t=Math.pow(Kt,$t);function nr(){return Se((Math.random()*_t<<0).toString(Kt),$t)}function vn(){return vt=vt<_t?vt:0,vt++,vt-1}function Cr(){var O="c",ee=new Date().getTime().toString(Kt),ce=Se(vn().toString(Kt),$t),de=ot(),_e=nr()+nr();return O+ee+ce+de+_e}Cr.fingerprint=ot;var Ot=Cr,Wt=function(){function O(){this.id=Ot(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var ee=O.prototype;return ee.getUser=function(){return this._user},ee.setUser=function(de,_e,Ve){this._user={id:de,email:_e,name:Ve}},ee.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},ee._track=function(de){this[de._handledState.unhandled?"_unhandled":"_handled"]+=1},O}(),Et=Wt,zt=function(){},Ar=function(){function O(ce,de,_e,Ve){var Qe=this;de===void 0&&(de=m.schema),_e===void 0&&(_e=[]),this._notifier=Ve,this._config={},this._schema=de,this._delivery={sendSession:zt,sendEvent:zt},this._logger={debug:zt,info:zt,warn:zt,error:zt},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=O,this.Event=Y,this.Breadcrumb=k,this.Session=Et,this._config=this._configure(ce,_e),y(_e.concat(this._config.plugins),function(Qt){Qt&&Qe._loadPlugin(Qt)}),this._depth=1;var Tt=this,ct=this.notify;this.notify=function(){return ct.apply(Tt,arguments)}}var ee=O.prototype;return ee.addMetadata=function(de,_e,Ve){return me.add(this._metadata,de,_e,Ve)},ee.getMetadata=function(de,_e){return me.get(this._metadata,de,_e)},ee.clearMetadata=function(de,_e){return me.clear(this._metadata,de,_e)},ee.getContext=function(){return this._context},ee.setContext=function(de){this._context=de},ee._configure=function(de,_e){var Ve=i(_e,function(Qt,Rt){return Rt&&Rt.configSchema?v({},Qt,Rt.configSchema):Qt},this._schema),Qe=i(u(Ve),function(Qt,Rt){var Dn=Ve[Rt].defaultValue(de[Rt]);if(de[Rt]!==void 0){var Ft=Ve[Rt].validate(de[Rt]);Ft?Ve[Rt].allowPartialObject?Qt.config[Rt]=v(Dn,de[Rt]):Qt.config[Rt]=de[Rt]:(Qt.errors[Rt]=Ve[Rt].message,Qt.config[Rt]=Dn)}else Qt.config[Rt]=Dn;return Qt},{errors:{},config:{}}),Tt=Qe.errors,ct=Qe.config;if(Ve.apiKey){if(!ct.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(ct.apiKey)||(Tt.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=v({},ct.metadata),this._user=v({},ct.user),this._context=ct.context,ct.logger&&(this._logger=ct.logger),ct.onError&&(this._cbs.e=this._cbs.e.concat(ct.onError)),ct.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(ct.onBreadcrumb)),ct.onSession&&(this._cbs.s=this._cbs.s.concat(ct.onSession)),u(Tt).length&&this._logger.warn(yn(Tt,de)),ct},ee.getUser=function(){return this._user},ee.setUser=function(de,_e,Ve){this._user={id:de,email:_e,name:Ve}},ee._loadPlugin=function(de){var _e=de.load(this);return de.name&&(this._plugins["~"+de.name+"~"]=_e),this},ee.getPlugin=function(de){return this._plugins["~"+de+"~"]},ee._setDelivery=function(de){this._delivery=de(this)},ee.startSession=function(){var de=new Et;de.app.releaseStage=this._config.releaseStage,de.app.version=this._config.appVersion,de.app.type=this._config.appType,de._user=v({},this._user);var _e=xe(this._cbs.s,de,"onSession",this._logger);return _e?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,de)},ee.addOnError=function(de,_e){_e===void 0&&(_e=!1),this._cbs.e[_e?"unshift":"push"](de)},ee.removeOnError=function(de){this._cbs.e=s(this._cbs.e,function(_e){return _e!==de})},ee._addOnSessionPayload=function(de){this._cbs.sp.push(de)},ee.addOnSession=function(de){this._cbs.s.push(de)},ee.removeOnSession=function(de){this._cbs.s=s(this._cbs.s,function(_e){return _e!==de})},ee.addOnBreadcrumb=function(de,_e){_e===void 0&&(_e=!1),this._cbs.b[_e?"unshift":"push"](de)},ee.removeOnBreadcrumb=function(de){this._cbs.b=s(this._cbs.b,function(_e){return _e!==de})},ee.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},ee.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},ee.leaveBreadcrumb=function(de,_e,Ve){if(de=typeof de=="string"?de:"",Ve=typeof Ve=="string"&&a(o,Ve)?Ve:"manual",_e=typeof _e=="object"&&_e!==null?_e:{},!!de){var Qe=new k(de,_e,Ve),Tt=xe(this._cbs.b,Qe,"onBreadcrumb",this._logger);if(Tt){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(Qe),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},ee._isBreadcrumbTypeEnabled=function(de){var _e=this._config.enabledBreadcrumbTypes;return _e===null||a(_e,de)},ee.notify=function(de,_e,Ve){Ve===void 0&&(Ve=zt);var Qe=Y.create(de,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(Qe,_e,Ve)},ee._notify=function(de,_e,Ve){var Qe=this;if(Ve===void 0&&(Ve=zt),de.app=v({},de.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),de.context=de.context||this._context,de._metadata=v({},de._metadata,this._metadata),de._user=v({},de._user,this._user),de.breadcrumbs=this._breadcrumbs.slice(),this._config.enabledReleaseStages!==null&&!a(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),Ve(null,de);var Tt=de.severity,ct=function(Rt){Qe._logger.error("Error occurred in onError callback, continuing anyway\u2026"),Qe._logger.error(Rt)},Qt=[].concat(this._cbs.e).concat(_e);le(Qt,de,ct,function(Rt,Dn){if(Rt&&ct(Rt),!Dn)return Qe._logger.debug("Event not sent due to onError callback"),Ve(null,de);Qe._isBreadcrumbTypeEnabled("error")&&O.prototype.leaveBreadcrumb.call(Qe,de.errors[0].errorClass,{errorClass:de.errors[0].errorClass,errorMessage:de.errors[0].errorMessage,severity:de.severity},"error"),Tt!==de.severity&&(de._handledState.severityReason={type:"userCallbackSetSeverity"}),de.unhandled!==de._handledState.unhandled&&(de._handledState.severityReason.unhandledOverridden=!0,de._handledState.unhandled=de.unhandled),Qe._session&&(Qe._session._track(de),de._session=Qe._session),Qe._delivery.sendEvent({apiKey:de.apiKey||Qe._config.apiKey,notifier:Qe._notifier,events:[de]},function(Ft){return Ve(Ft,de)})})},O}(),yn=function(O,ee){var ce=new Error(`Invalid configuration
`+y(u(O),function(de){return"  - "+de+" "+O[de]+", got "+we(ee[de])}).join(`

`));return ce},we=function(O){switch(typeof O){case"string":case"number":case"object":return JSON.stringify(O);default:return String(O)}},ve=Ar,Me=function(O,ee,ce,de){var _e=de&&de.redactedKeys?de.redactedKeys:[],Ve=de&&de.redactedPaths?de.redactedPaths:[];return JSON.stringify(J(O,_e,Ve),ee,ce)},re=20,fe=25e3,Q=8,pe="...";function ke(O){return O instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(O))}function Ie(O){return"[Throws: "+(O?O.message:"?")+"]"}function q(O,ee){for(var ce=0,de=O.length;ce<de;ce++)if(O[ce]===ee)return!0;return!1}function K(O,ee){for(var ce=0,de=O.length;ce<de;ce++)if(ee.indexOf(O[ce])===0)return!0;return!1}function G(O,ee){for(var ce=0,de=O.length;ce<de;ce++)if(typeof O[ce]=="string"&&O[ce].toLowerCase()===ee.toLowerCase()||O[ce]&&typeof O[ce].test=="function"&&O[ce].test(ee))return!0;return!1}function se(O){return Object.prototype.toString.call(O)==="[object Array]"}function be(O,ee){try{return O[ee]}catch(ce){return Ie(ce)}}function J(O,ee,ce){var de=[],_e=0;function Ve(Qe,Tt){function ct(){return Tt.length>Q&&_e>fe}if(_e++,Tt.length>re||ct())return pe;if(Qe===null||typeof Qe!="object")return Qe;if(q(de,Qe))return"[Circular]";if(de.push(Qe),typeof Qe.toJSON=="function")try{_e--;var Qt=Ve(Qe.toJSON(),Tt);return de.pop(),Qt}catch(Jn){return Ie(Jn)}var Rt=ke(Qe);if(Rt){_e--;var Dn=Ve({name:Qe.name,message:Qe.message},Tt);return de.pop(),Dn}if(se(Qe)){for(var Ft=[],kn=0,Ea=Qe.length;kn<Ea;kn++){if(ct()){Ft.push(pe);break}Ft.push(Ve(Qe[kn],Tt.concat("[]")))}return de.pop(),Ft}var li={};try{for(var Br in Qe)if(!!Object.prototype.hasOwnProperty.call(Qe,Br)){if(K(ce,Tt.join("."))&&G(ee,Br)){li[Br]="[REDACTED]";continue}if(ct()){li[Br]=pe;break}li[Br]=Ve(be(Qe,Br),Tt.concat(Br))}}catch(Jn){}return de.pop(),li}return Ve(O,[])}var ne={},ye=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];ne.event=function(O,ee){var ce=Me(O,null,null,{redactedPaths:ye,redactedKeys:ee});if(ce.length>1e6&&(O.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+ce.length/1e6+`MB (limit = 1MB)
metadata was removed`},ce=Me(O,null,null,{redactedPaths:ye,redactedKeys:ee}),ce.length>1e6))throw new Error("payload exceeded 1MB limit");return ce},ne.session=function(O,ee){var ce=Me(O,null,null);if(ce.length>1e6)throw new Error("payload exceeded 1MB limit");return ce};var Be={};Be=function(O,ee){return ee===void 0&&(ee=window),{sendEvent:function(ce,de){de===void 0&&(de=function(){});var _e=Ue(O._config,"notify","4",ee),Ve=new ee.XDomainRequest;Ve.onload=function(){de(null)},Ve.open("POST",_e),setTimeout(function(){try{Ve.send(ne.event(ce,O._config.redactedKeys))}catch(Qe){O._logger.error(Qe),de(Qe)}},0)},sendSession:function(ce,de){de===void 0&&(de=function(){});var _e=Ue(O._config,"sessions","1",ee),Ve=new ee.XDomainRequest;Ve.onload=function(){de(null)},Ve.open("POST",_e),setTimeout(function(){try{Ve.send(ne.session(ce,O._config.redactedKeys))}catch(Qe){O._logger.error(Qe),de(Qe)}},0)}}};var Ue=function(O,ee,ce,de){var _e=JSON.parse(JSON.stringify(new Date)),Ve=Oe(O.endpoints[ee],de.location.protocol);return Ve+"?apiKey="+encodeURIComponent(O.apiKey)+"&payloadVersion="+ce+"&sentAt="+encodeURIComponent(_e)},Oe=Be._matchPageProtocol=function(O,ee){return ee==="http:"?O.replace(/^https:/,"http:"):O},bt=function(O,ee){return ee===void 0&&(ee=window),{sendEvent:function(ce,de){de===void 0&&(de=function(){});try{var _e=O._config.endpoints.notify,Ve=new ee.XMLHttpRequest;Ve.onreadystatechange=function(){Ve.readyState===ee.XMLHttpRequest.DONE&&de(null)},Ve.open("POST",_e),Ve.setRequestHeader("Content-Type","application/json"),Ve.setRequestHeader("Bugsnag-Api-Key",ce.apiKey||O._config.apiKey),Ve.setRequestHeader("Bugsnag-Payload-Version","4"),Ve.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Ve.send(ne.event(ce,O._config.redactedKeys))}catch(Qe){O._logger.error(Qe)}},sendSession:function(ce,de){de===void 0&&(de=function(){});try{var _e=O._config.endpoints.sessions,Ve=new ee.XMLHttpRequest;Ve.onreadystatechange=function(){Ve.readyState===ee.XMLHttpRequest.DONE&&de(null)},Ve.open("POST",_e),Ve.setRequestHeader("Content-Type","application/json"),Ve.setRequestHeader("Bugsnag-Api-Key",O._config.apiKey),Ve.setRequestHeader("Bugsnag-Payload-Version","1"),Ve.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Ve.send(ne.session(ce,O._config.redactedKeys))}catch(Qe){O._logger.error(Qe)}}}},lt=new Date,Lt=function(){lt=new Date},et={name:"appDuration",load:function(O){return O.addOnError(function(ee){var ce=new Date;ee.app.duration=ce-lt},!0),{reset:Lt}}},qt=function(O){return O===void 0&&(O=window),{load:function(ee){ee.addOnError(function(ce){ce.context===void 0&&(ce.context=O.location.pathname)},!0)}}},jr=function(ee,ce){var de="000000000"+ee;return de.substr(de.length-ce)},Ae=typeof window=="object"?window:self,tt=0;for(var j in Ae)Object.hasOwnProperty.call(Ae,j)&&tt++;var Ye=navigator.mimeTypes?navigator.mimeTypes.length:0,en=jr((Ye+navigator.userAgent.length).toString(36)+tt.toString(36),4),St=function(){return en},Kr=0,Ct=4,Ir=36,Ke=Math.pow(Ir,Ct);function Je(){return jr((Math.random()*Ke<<0).toString(Ir),Ct)}function qi(){return Kr=Kr<Ke?Kr:0,Kr++,Kr-1}function Ce(){var O="c",ee=new Date().getTime().toString(Ir),ce=jr(qi().toString(Ir),Ct),de=St(),_e=Je()+Je();return O+ee+ce+de+_e}Ce.fingerprint=St;var Ne=Ce,B="bugsnag-anonymous-id",He=function(){try{var O=window.localStorage,ee=O.getItem(B);return ee&&/^c[a-z0-9]{20,32}$/.test(ee)||(ee=Ne(),O.setItem(B,ee)),ee}catch(ce){}},Ee=function(O,ee){return O===void 0&&(O=navigator),ee===void 0&&(ee=window.screen),{load:function(ce){var de={locale:O.browserLanguage||O.systemLanguage||O.userLanguage||O.language,userAgent:O.userAgent};ee&&ee.orientation&&ee.orientation.type?de.orientation=ee.orientation.type:de.orientation=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait",ce._config.generateAnonymousId&&(de.id=He()),ce.addOnSession(function(_e){_e.device=v({},_e.device,de),ce._config.collectUserIp||te(_e)}),ce.addOnError(function(_e){_e.device=v({},_e.device,de,{time:new Date}),ce._config.collectUserIp||te(_e)},!0)},configSchema:{generateAnonymousId:{validate:function(ce){return ce===!0||ce===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},te=function(O){var ee=O.getUser();(!ee||!ee.id)&&O.setUser(O.device.id)},gt=function(O){return O===void 0&&(O=window),{load:function(ee){ee.addOnError(function(ce){ce.request&&ce.request.url||(ce.request=v({},ce.request,{url:O.location.href}))},!0)}}},it={load:function(O){O._sessionDelegate=At}},At={startSession:function(O,ee){var ce=O;return ce._session=ee,ce._pausedSession=null,ce._config.enabledReleaseStages!==null&&!a(ce._config.enabledReleaseStages,ce._config.releaseStage)?(ce._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),ce):(ce._delivery.sendSession({notifier:ce._notifier,device:ee.device,app:ee.app,sessions:[{id:ee.id,startedAt:ee.startedAt,user:ee._user}]}),ce)},resumeSession:function(O){return O._session?O:O._pausedSession?(O._session=O._pausedSession,O._pausedSession=null,O):O.startSession()},pauseSession:function(O){O._pausedSession=O._session,O._session=null}},It={load:function(O){O._config.collectUserIp||O.addOnError(function(ee){ee._user&&typeof ee._user.id=="undefined"&&delete ee._user.id,ee._user=v({id:"[REDACTED]"},ee._user),ee.request=v({clientIp:"[REDACTED]"},ee.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(O){return O===!0||O===!1}}}},ut={};ut.load=function(O){var ee=/^(local-)?dev(elopment)?$/.test(O._config.releaseStage);ee||!O._isBreadcrumbTypeEnabled("log")||y(Yt,function(ce){var de=console[ce];console[ce]=function(){for(var _e=arguments.length,Ve=new Array(_e),Qe=0;Qe<_e;Qe++)Ve[Qe]=arguments[Qe];O.leaveBreadcrumb("Console output",i(Ve,function(Tt,ct,Qt){var Rt="[Unknown value]";try{Rt=String(ct)}catch(Dn){}if(Rt==="[object Object]")try{Rt=JSON.stringify(ct)}catch(Dn){}return Tt["["+Qt+"]"]=Rt,Tt},{severity:ce.indexOf("group")===0?"log":ce}),"log"),de.apply(console,Ve)},console[ce]._restore=function(){console[ce]=de}})};var Yt=s(["log","debug","info","warn","error"],function(O){return typeof console!="undefined"&&typeof console[O]=="function"}),Hr=200,Sr=5e5,tn=function(O,ee){return O===void 0&&(O=document),ee===void 0&&(ee=window),{load:function(ce){if(!ce._config.trackInlineScripts)return;var de=ee.location.href,_e="",Ve=!!O.attachEvent,Qe=Ve?O.readyState==="complete":O.readyState!=="loading",Tt=function(){return O.documentElement.outerHTML};_e=Tt();var ct=O.onreadystatechange;O.onreadystatechange=function(){O.readyState==="interactive"&&(_e=Tt(),Qe=!0);try{ct.apply(this,arguments)}catch(Br){}};var Qt=null,Rt=function(Br){Qt=Br},Dn=function(){var Br=O.currentScript||Qt;if(!Br&&!Qe){var Jn=O.scripts||O.getElementsByTagName("script");Br=Jn[Jn.length-1]}return Br},Ft=function(Br){(!Qe||!_e)&&(_e=Tt());var Jn=["<!-- DOC START -->"].concat(_e.split(`
`)),Gs=Br-1,ds=Math.max(Gs-3,0),cp=Math.min(Gs+3,Jn.length);return i(Jn.slice(ds,cp),function(la,RS,WR){return la[ds+1+WR]=RS.length<=Hr?RS:RS.substr(0,Hr),la},{})};ce.addOnError(function(Br){Br.errors[0].stacktrace=s(Br.errors[0].stacktrace,function(cp){return!/__trace__$/.test(cp.method)});var Jn=Br.errors[0].stacktrace[0];if(!(Jn&&Jn.file&&Jn.file.replace(/#.*$/,"")!==de.replace(/#.*$/,""))){var Gs=Dn();if(Gs){var ds=Gs.innerHTML;Br.addMetadata("script","content",ds.length<=Sr?ds:ds.substr(0,Sr)),Jn&&Jn.lineNumber&&(Jn.code=Ft(Jn.lineNumber))}}},!0);var kn=y(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(Br){return Tr(ee,Br,function(Jn){return li(Jn,function(Gs){return{get:function(){return Gs[0]},replace:function(ds){Gs[0]=ds}}})})}),Ea=kn[0];y(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(Br){!ee[Br]||!ee[Br].prototype||!Object.prototype.hasOwnProperty.call(ee[Br].prototype,"addEventListener")||(Tr(ee[Br].prototype,"addEventListener",function(Jn){return li(Jn,Bo)}),Tr(ee[Br].prototype,"removeEventListener",function(Jn){return li(Jn,Bo,!0)}))});function li(Br,Jn,Gs){return Gs===void 0&&(Gs=!1),function(){var ds=[].slice.call(arguments);try{var cp=Jn(ds),la=cp.get();if(Gs&&Br.apply(this,ds),typeof la!="function")return Br.apply(this,ds);if(la.__trace__)cp.replace(la.__trace__);else{var RS=Dn();la.__trace__=function(){Rt(RS),Ea(function(){Rt(null)},0);var ice=la.apply(this,arguments);return Rt(null),ice},la.__trace__.__trace__=la.__trace__,cp.replace(la.__trace__)}}catch(WR){}if(Br.apply)return Br.apply(this,ds);switch(ds.length){case 1:return Br(ds[0]);case 2:return Br(ds[0],ds[1]);default:return Br()}}}},configSchema:{trackInlineScripts:{validate:function(ce){return ce===!0||ce===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function Tr(O,ee,ce){var de=O[ee];if(!de)return de;var _e=ce(de);return O[ee]=_e,de}function Bo(O){var ee=!!O[1]&&typeof O[1].handleEvent=="function";return{get:function(){return ee?O[1].handleEvent:O[1]},replace:function(ce){ee?O[1].handleEvent=ce:O[1]=ce}}}var _S=function(O){return O===void 0&&(O=window),{load:function(ee){"addEventListener"in O&&(!ee._isBreadcrumbTypeEnabled("user")||O.addEventListener("click",function(ce){var de,_e;try{de=id(ce.target),_e=AS(ce.target,O)}catch(Ve){de="[hidden]",_e="[hidden]",ee._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}ee.leaveBreadcrumb("UI click",{targetText:de,targetSelector:_e},"user")},!0))}}},id=function(O){var ee=O.textContent||O.innerText||"";return!ee&&(O.type==="submit"||O.type==="button")&&(ee=O.value),ee=ee.replace(/^\s+|\s+$/g,""),HR(ee,140)};function AS(O,ee){var ce=[O.tagName];if(O.id&&ce.push("#"+O.id),O.className&&O.className.length&&ce.push("."+O.className.split(" ").join(".")),!ee.document.querySelectorAll||!Array.prototype.indexOf)return ce.join("");try{if(ee.document.querySelectorAll(ce.join("")).length===1)return ce.join("")}catch(_e){return ce.join("")}if(O.parentNode.childNodes.length>1){var de=Array.prototype.indexOf.call(O.parentNode.childNodes,O)+1;ce.push(":nth-child("+de+")")}return ee.document.querySelectorAll(ce.join("")).length===1?ce.join(""):O.parentNode?AS(O.parentNode,ee)+" > "+ce.join(""):ce.join("")}function HR(O,ee){var ce="(...)";return O&&O.length<=ee?O:O.slice(0,ee-ce.length)+ce}var bD={};bD=function(O){O===void 0&&(O=window);var ee={load:function(ce){if("addEventListener"in O&&!!ce._isBreadcrumbTypeEnabled("navigation")){var de=function(_e){return function(){return ce.leaveBreadcrumb(_e,{},"navigation")}};O.addEventListener("pagehide",de("Page hidden"),!0),O.addEventListener("pageshow",de("Page shown"),!0),O.addEventListener("load",de("Page loaded"),!0),O.document.addEventListener("DOMContentLoaded",de("DOMContentLoaded"),!0),O.addEventListener("load",function(){return O.addEventListener("popstate",de("Navigated back"),!0)}),O.addEventListener("hashchange",function(_e){var Ve=_e.oldURL?{from:Fb(_e.oldURL,O),to:Fb(_e.newURL,O),state:ug(O)}:{to:Fb(O.location.href,O)};ce.leaveBreadcrumb("Hash changed",Ve,"navigation")},!0),O.history.replaceState&&Vh(ce,O.history,"replaceState",O),O.history.pushState&&Vh(ce,O.history,"pushState",O)}}};return ee};var Fb=function(O,ee){var ce=ee.document.createElement("A");return ce.href=O,""+ce.pathname+ce.search+ce.hash},yD=function(O,ee,ce,de){var _e=Fb(O.location.href,O);return{title:ce,state:ee,prevState:ug(O),to:de||_e,from:_e}},Vh=function(O,ee,ce,de){var _e=ee[ce];ee[ce]=function(Ve,Qe,Tt){O.leaveBreadcrumb("History "+ce,yD(de,Ve,Qe,Tt),"navigation"),typeof O.resetEventCount=="function"&&O.resetEventCount(),O._config.autoTrackSessions&&O.startSession(),_e.apply(ee,[Ve,Qe].concat(Tt!==void 0?Tt:[]))}},ug=function(O){try{return O.history.state}catch(ee){}},Mb="request",A5="BS~~S",IS="BS~~U",GR="BS~~M",qle=function(O,ee){O===void 0&&(O=[]),ee===void 0&&(ee=window);var ce=[],de={load:function(_e){if(!_e._isBreadcrumbTypeEnabled("request"))return;var Ve=[_e._config.endpoints.notify,_e._config.endpoints.sessions].concat(O);Qe(),Qt();function Qe(){if("addEventListener"in ee.XMLHttpRequest.prototype){var Ft=ee.XMLHttpRequest.prototype.open;ee.XMLHttpRequest.prototype.open=function(Ea,li){this[IS]=li,this[GR]=Ea,this[A5]&&(this.removeEventListener("load",Tt),this.removeEventListener("error",ct)),this.addEventListener("load",Tt),this.addEventListener("error",ct),this[A5]=!0,Ft.apply(this,arguments)}}}function Tt(){var Ft=this[IS];if(Ft===void 0){_e._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof Ft=="string"&&a(Ve,Ft.replace(/\?.*$/,"")))){var kn={status:this.status,request:this[GR]+" "+this[IS]};this.status>=400?_e.leaveBreadcrumb("XMLHttpRequest failed",kn,Mb):_e.leaveBreadcrumb("XMLHttpRequest succeeded",kn,Mb)}}function ct(){var Ft=this[IS];if(Ft===void 0){_e._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof Ft=="string"&&a(Ve,Ft.replace(/\?.*$/,""))||_e.leaveBreadcrumb("XMLHttpRequest error",{request:this[GR]+" "+this[IS]},Mb)}function Qt(){if(!(!("fetch"in ee)||ee.fetch.polyfill)){var Ft=ee.fetch;ee.fetch=function(){var Ea=arguments,li=arguments[0],Br=arguments[1],Jn,Gs=null;return li&&typeof li=="object"?(Gs=li.url,Br&&"method"in Br?Jn=Br.method:li&&"method"in li&&(Jn=li.method)):(Gs=li,Br&&"method"in Br&&(Jn=Br.method)),Jn===void 0&&(Jn="GET"),new Promise(function(ds,cp){Ft.apply(void 0,Ea).then(function(la){Rt(la,Jn,Gs),ds(la)}).catch(function(la){Dn(Jn,Gs),cp(la)})})}}}var Rt=function(Ft,kn,Ea){var li={status:Ft.status,request:kn+" "+Ea};Ft.status>=400?_e.leaveBreadcrumb("fetch() failed",li,Mb):_e.leaveBreadcrumb("fetch() succeeded",li,Mb)},Dn=function(Ft,kn){_e.leaveBreadcrumb("fetch() error",{request:Ft+" "+kn},Mb)}}};return de},Yle={load:function(O){var ee=0;O.addOnError(function(ce){if(ee>=O._config.maxEvents)return!1;ee++}),O.resetEventCount=function(){ee=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(O){return p(1,100)(O)}}}},VR={};VR={load:function(O){O.addOnError(function(ee){var ce=i(ee.errors,function(de,_e){return de.concat(_e.stacktrace)},[]);y(ce,function(de){de.file=Xle(de.file)})})}};var Xle=VR._strip=function(O){return typeof O=="string"?O.replace(/\?.*$/,"").replace(/#.*$/,""):O},Qle=function(O){return O===void 0&&(O=window),{load:function(ee){if(!ee._config.autoDetectErrors||!ee._config.enabledErrorTypes.unhandledExceptions)return;function ce(_e,Ve,Qe,Tt,ct){if(Qe===0&&/Script error\.?/.test(_e))ee._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var Qt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},Rt;if(ct)Rt=ee.Event.create(ct,!0,Qt,"window onerror",1),I5(Rt.errors[0].stacktrace,Ve,Qe,Tt);else if(typeof _e=="object"&&_e!==null&&(!Ve||typeof Ve!="string")&&!Qe&&!Tt&&!ct){var Dn=_e.type?"Event: "+_e.type:"Error",Ft=_e.message||_e.detail||"";Rt=ee.Event.create({name:Dn,message:Ft},!0,Qt,"window onerror",1),Rt.originalError=_e,Rt.addMetadata("window onerror",{event:_e,extraParameters:Ve})}else Rt=ee.Event.create(_e,!0,Qt,"window onerror",1),I5(Rt.errors[0].stacktrace,Ve,Qe,Tt);ee._notify(Rt)}typeof de=="function"&&de.apply(this,arguments)}var de=O.onerror;O.onerror=ce}}},I5=function(O,ee,ce,de){O[0]||O.push({});var _e=O[0];!_e.file&&typeof ee=="string"&&(_e.file=ee),!_e.lineNumber&&$R(ce)&&(_e.lineNumber=ce),_e.columnNumber||($R(de)?_e.columnNumber=de:window.event&&$R(window.event.errorCharacter)&&(_e.columnNumber=window.event.errorCharacter))},$R=function(O){return typeof O=="number"&&String.call(O)!=="NaN"},Jle,Zle=function(O){O===void 0&&(O=window);var ee={load:function(ce){if(!(!ce._config.autoDetectErrors||!ce._config.enabledErrorTypes.unhandledRejections)){var de=function(_e){var Ve=_e.reason,Qe=!1;try{_e.detail&&_e.detail.reason&&(Ve=_e.detail.reason,Qe=!0)}catch(ct){}var Tt=ce.Event.create(Ve,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,ce._logger);Qe&&y(Tt.errors[0].stacktrace,ece(Ve)),ce._notify(Tt,function(ct){if(R(ct.originalError)&&!ct.originalError.stack){var Qt;ct.addMetadata("unhandledRejection handler",(Qt={},Qt[Object.prototype.toString.call(ct.originalError)]={name:ct.originalError.name,message:ct.originalError.message,code:ct.originalError.code},Qt))}})};"addEventListener"in O?O.addEventListener("unhandledrejection",de):O.onunhandledrejection=function(_e,Ve){de({detail:{reason:_e,promise:Ve}})},Jle=de}}};return ee},ece=function(O){return function(ee){ee.file!==O.toString()&&ee.method&&(ee.method=ee.method.replace(/^\s+/,""))}},pg={},tce="Bugsnag JavaScript",rce="7.14.1",nce="https://github.com/bugsnag/bugsnag-js",oce=v({},m.schema,b),Ja={_client:null,createClient:function(O){typeof O=="string"&&(O={apiKey:O}),O||(O={});var ee=[et,Ee(),qt(),gt(),Yle,it,It,VR,Qle(),Zle(),bD(),_S(),qle(),ut,tn()],ce=new ve(O,oce,ee,{name:tce,version:rce,url:nce});return ce._setDelivery(window.XDomainRequest?Be:bt),ce._logger.debug("Loaded!"),ce.leaveBreadcrumb("Bugsnag loaded",{},"state"),ce._config.autoTrackSessions?ce.startSession():ce},start:function(O){return Ja._client?(Ja._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),Ja._client):(Ja._client=Ja.createClient(O),Ja._client)}};return y(["resetEventCount"].concat(u(ve.prototype)),function(O){/^_/.test(O)||(Ja[O]=function(){if(!Ja._client)return console.log("Bugsnag."+O+"() was called before Bugsnag.start()");Ja._client._depth+=1;var ee=Ja._client[O].apply(Ja._client,arguments);return Ja._client._depth-=1,ee})}),pg=Ja,pg.Client=ve,pg.Event=Y,pg.Session=Et,pg.Breadcrumb=k,pg.default=Ja,pg})});var Ok=st((dNe,r7)=>{r7.exports=t7()});var o7=st((n7,dN)=>{(function(t){if(typeof n7=="object"&&typeof dN!="undefined")dN.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window!="undefined"?e=window:typeof globalThis!="undefined"?e=globalThis:typeof self!="undefined"?e=self:e=this,e.BugsnagPluginReact=t()}})(function(){var t,e,r,o={};function i(){return i=Object.assign||function(u){for(var p=1;p<arguments.length;p++){var h=arguments[p];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(u[f]=h[f])}return u},i.apply(this,arguments)}function s(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function a(u,p){u.prototype=Object.create(p.prototype),u.prototype.constructor=u,l(u,p)}function l(u,p){return l=Object.setPrototypeOf||function(f,m){return f.__proto__=m,f},l(u,p)}o=function(){function u(){var h=typeof window!="undefined"&&window.React;if(this.name="react",this.lazy=arguments.length===0&&!h,!this.lazy&&(this.React=(arguments.length<=0?void 0:arguments[0])||h,!this.React))throw new Error("@bugsnag/plugin-react reference to `React` was undefined")}var p=u.prototype;return p.load=function(f){if(!this.lazy){var m=d(this.React,f);return m.createErrorBoundary=function(){return m},m}var g=function(){throw new Error(`@bugsnag/plugin-react was used incorrectly. Valid usage is as follows:
Pass React to the plugin constructor

  \`Bugsnag.start({ plugins: [new BugsnagPluginReact(React)] })\`
and then call \`const ErrorBoundary = Bugsnag.getPlugin('react').createErrorBoundary()\`

Or if React is not available until after Bugsnag has started,
construct the plugin with no arguments
  \`Bugsnag.start({ plugins: [new BugsnagPluginReact()] })\`,
then pass in React when available to construct your error boundary
  \`const ErrorBoundary = Bugsnag.getPlugin('react').createErrorBoundary(React)\``)};return g.createErrorBoundary=function(v){if(!v)throw new Error("@bugsnag/plugin-react reference to `React` was undefined");return d(v,f)},g},u}();var c=function(u){for(var p=u.split(/\s*\n\s*/g),h="",f=0,m=p.length;f<m;f++)p[f].length&&(h+=""+(h.length?`
`:"")+p[f]);return h},d=function(u,p){return function(h){a(f,h);function f(g){var v;return v=h.call(this,g)||this,v.state={error:null,info:null},v.handleClearError=v.handleClearError.bind(s(v)),v}var m=f.prototype;return m.handleClearError=function(){this.setState({error:null,info:null})},m.componentDidCatch=function(v,y){var S=this.props.onError,C={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},b=p.Event.create(v,!0,C,1);y&&y.componentStack&&(y.componentStack=c(y.componentStack)),b.addMetadata("react",y),p._notify(b,S),this.setState({error:v,info:y})},m.render=function(){var v=this.state.error;if(v){var y=this.props.FallbackComponent;return y?u.createElement(y,i({},this.state,{clearError:this.handleClearError})):null}return this.props.children},f}(u.Component)};return o.formatComponentStack=c,o.default=o,o})});var G7=st((oBe,H7)=>{"use strict";var Tue=function(t,e,r,o,i,s,a,l){if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,o,i,s,a,l],u=0;c=new Error(e.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};H7.exports=Tue});var q7=st((wp,K7)=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});var cd=G7(),TN=Object.prototype.hasOwnProperty,Due=Array.prototype.splice,kue=Object.prototype.toString;function Ig(t){return kue.call(t).slice(8,-1)}var eP=Object.assign||function(t,e){return DN(e).forEach(function(r){TN.call(e,r)&&(t[r]=e[r])}),t},DN=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function gf(t){return Array.isArray(t)?eP(t.constructor(t.length),t):Ig(t)==="Map"?new Map(t):Ig(t)==="Set"?new Set(t):t&&typeof t=="object"?eP(Object.create(Object.getPrototypeOf(t)),t):t}var V7=function(){function t(){this.commands=eP({},Pue),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var o=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||cd(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),cd(typeof i=="object"&&i!==null,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var s=e;return DN(i).forEach(function(a){if(TN.call(o.commands,a)){var l=e===s;s=o.commands[a](i[a],s,i,e),l&&o.isEquals(s,e)&&(s=e)}else{var c=Ig(e)==="Map"?o.update(e.get(a),i[a]):o.update(e[a],i[a]),d=Ig(s)==="Map"?s.get(a):s[a];(!o.isEquals(c,d)||typeof c=="undefined"&&!TN.call(e,a))&&(s===e&&(s=gf(e)),Ig(s)==="Map"?s.set(a,c):s[a]=c)}}),s},t}();wp.Context=V7;var Pue={$push:function(t,e,r){return $7(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return $7(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,o){return Eue(e,r),t.forEach(function(i){W7(i),e===o&&i.length&&(e=gf(o)),Due.apply(e,i)}),e},$set:function(t,e,r){return Aue(r),t},$toggle:function(t,e){Ox(t,"$toggle");var r=t.length?gf(e):e;return t.forEach(function(o){r[o]=!e[o]}),r},$unset:function(t,e,r,o){return Ox(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===o&&(e=gf(o)),delete e[i])}),e},$add:function(t,e,r,o){return j7(e,"$add"),Ox(t,"$add"),Ig(e)==="Map"?t.forEach(function(i){var s=i[0],a=i[1];e===o&&e.get(s)!==a&&(e=gf(o)),e.set(s,a)}):t.forEach(function(i){e===o&&!e.has(i)&&(e=gf(o)),e.add(i)}),e},$remove:function(t,e,r,o){return j7(e,"$remove"),Ox(t,"$remove"),t.forEach(function(i){e===o&&e.has(i)&&(e=gf(o)),e.delete(i)}),e},$merge:function(t,e,r,o){return Iue(e,t),DN(t).forEach(function(i){t[i]!==e[i]&&(e===o&&(e=gf(o)),e[i]=t[i])}),e},$apply:function(t,e){return _ue(t),t(e)}},kN=new V7;wp.isEquals=kN.update.isEquals;wp.extend=kN.extend;wp.default=kN.update;wp.default.default=K7.exports=eP(wp.default,wp);function $7(t,e,r){cd(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",r,t),Ox(e[r],r)}function Ox(t,e){cd(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function Eue(t,e){cd(Array.isArray(t),"Expected $splice target to be an array; got %s",t),W7(e.$splice)}function W7(t){cd(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function _ue(t){cd(typeof t=="function","update(): expected spec of $apply to be a function; got %s.",t)}function Aue(t){cd(Object.keys(t).length===1,"Cannot have more than one key in an object with $set")}function Iue(t,e){cd(e&&typeof e=="object","update(): $merge expects a spec of type 'object'; got %s",e),cd(t&&typeof t=="object","update(): $merge expects a target of type 'object'; got %s",t)}function j7(t,e){var r=Ig(t);cd(r==="Map"||r==="Set","update(): %s expects a target of type Set or Map; got %s",e,r)}});var on=st(VP=>{(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(a){return o(s(a),arguments)}function r(a,l){return e.apply(null,[a].concat(l||[]))}function o(a,l){var c=1,d=a.length,u,p="",h,f,m,g,v,y,S,C;for(h=0;h<d;h++)if(typeof a[h]=="string")p+=a[h];else if(typeof a[h]=="object"){if(m=a[h],m.keys)for(u=l[c],f=0;f<m.keys.length;f++){if(u==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[f],m.keys[f-1]));u=u[m.keys[f]]}else m.param_no?u=l[m.param_no]:u=l[c++];if(t.not_type.test(m.type)&&t.not_primitive.test(m.type)&&u instanceof Function&&(u=u()),t.numeric_arg.test(m.type)&&typeof u!="number"&&isNaN(u))throw new TypeError(e("[sprintf] expecting number but found %T",u));switch(t.number.test(m.type)&&(S=u>=0),m.type){case"b":u=parseInt(u,10).toString(2);break;case"c":u=String.fromCharCode(parseInt(u,10));break;case"d":case"i":u=parseInt(u,10);break;case"j":u=JSON.stringify(u,null,m.width?parseInt(m.width):0);break;case"e":u=m.precision?parseFloat(u).toExponential(m.precision):parseFloat(u).toExponential();break;case"f":u=m.precision?parseFloat(u).toFixed(m.precision):parseFloat(u);break;case"g":u=m.precision?String(Number(u.toPrecision(m.precision))):parseFloat(u);break;case"o":u=(parseInt(u,10)>>>0).toString(8);break;case"s":u=String(u),u=m.precision?u.substring(0,m.precision):u;break;case"t":u=String(!!u),u=m.precision?u.substring(0,m.precision):u;break;case"T":u=Object.prototype.toString.call(u).slice(8,-1).toLowerCase(),u=m.precision?u.substring(0,m.precision):u;break;case"u":u=parseInt(u,10)>>>0;break;case"v":u=u.valueOf(),u=m.precision?u.substring(0,m.precision):u;break;case"x":u=(parseInt(u,10)>>>0).toString(16);break;case"X":u=(parseInt(u,10)>>>0).toString(16).toUpperCase();break}t.json.test(m.type)?p+=u:(t.number.test(m.type)&&(!S||m.sign)?(C=S?"+":"-",u=u.toString().replace(t.sign,"")):C="",v=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",y=m.width-(C+u).length,g=m.width&&y>0?v.repeat(y):"",p+=m.align?C+u+g:v==="0"?C+g+u:g+C+u)}return p}var i=Object.create(null);function s(a){if(i[a])return i[a];for(var l=a,c,d=[],u=0;l;){if((c=t.text.exec(l))!==null)d.push(c[0]);else if((c=t.modulo.exec(l))!==null)d.push("%");else if((c=t.placeholder.exec(l))!==null){if(c[2]){u|=1;var p=[],h=c[2],f=[];if((f=t.key.exec(h))!==null)for(p.push(f[1]);(h=h.substring(f[0].length))!=="";)if((f=t.key_access.exec(h))!==null)p.push(f[1]);else if((f=t.index_access.exec(h))!==null)p.push(f[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=p}else u|=2;if(u===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");l=l.substring(c[0].length)}return i[a]=d}typeof VP!="undefined"&&(VP.sprintf=e,VP.vsprintf=r),typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var pB=st((V3e,uB)=>{var yV=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);yV?(cB=new Uint8Array(16),uB.exports=function(){return yV(cB),cB}):(dB=new Array(16),uB.exports=function(){for(var e=0,r;e<16;e++)(e&3)==0&&(r=Math.random()*4294967296),dB[e]=r>>>((e&3)<<3)&255;return dB});var cB,dB});var hB=st(($3e,SV)=>{var CV=[];for(gw=0;gw<256;++gw)CV[gw]=(gw+256).toString(16).substr(1);var gw;function rpe(t,e){var r=e||0,o=CV;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}SV.exports=rpe});var vB=st((W3e,wV)=>{var npe=pB(),ope=hB(),xV,fB,mB=0,gB=0;function ipe(t,e,r){var o=e&&r||0,i=e||[];t=t||{};var s=t.node||xV,a=t.clockseq!==void 0?t.clockseq:fB;if(s==null||a==null){var l=npe();s==null&&(s=xV=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=fB=(l[6]<<8|l[7])&16383)}var c=t.msecs!==void 0?t.msecs:new Date().getTime(),d=t.nsecs!==void 0?t.nsecs:gB+1,u=c-mB+(d-gB)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||c>mB)&&t.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");mB=c,gB=d,fB=a,c+=122192928e5;var p=((c&268435455)*1e4+d)%4294967296;i[o++]=p>>>24&255,i[o++]=p>>>16&255,i[o++]=p>>>8&255,i[o++]=p&255;var h=c/4294967296*1e4&268435455;i[o++]=h>>>8&255,i[o++]=h&255,i[o++]=h>>>24&15|16,i[o++]=h>>>16&255,i[o++]=a>>>8|128,i[o++]=a&255;for(var f=0;f<6;++f)i[o+f]=s[f];return e||ope(i)}wV.exports=ipe});var DV=st((j3e,TV)=>{var spe=pB(),ape=hB();function lpe(t,e,r){var o=e&&r||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||spe)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e)for(var s=0;s<16;++s)e[o+s]=i[s];return e||ape(i)}TV.exports=lpe});var Cc=st((K3e,PV)=>{var cpe=vB(),kV=DV(),bB=kV;bB.v1=cpe;bB.v4=kV;PV.exports=bB});var e$=st(()=>{});var t$=st(()=>{});var r$=st((exports,module)=>{(function(e,r){typeof exports=="object"&&typeof module=="object"?module.exports=r():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],r):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=r():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=r()})(exports,function(){return(()=>{"use strict";var __webpack_modules__=[,(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addLinkAttributes=v,e.deprecated=T,e.getFilenameFromUrl=C,e.getPdfFilenameFromUrl=b,e.getXfaPageViewport=F,e.isDataScheme=y,e.isPdfFile=S,e.isValidFetchUrl=w,e.loadScript=k,e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PDFDateString=e.PageViewport=e.LinkTarget=e.DOMSVGFactory=e.DOMStandardFontDataFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=void 0;var o=r(2),i=r(5);let s="noopener noreferrer nofollow",a="http://www.w3.org/2000/svg",l={CSS:96,PDF:72,get PDF_TO_CSS_UNITS(){return(0,o.shadow)(this,"PDF_TO_CSS_UNITS",this.CSS/this.PDF)}};e.PixelsPerInch=l;class c extends i.BaseCanvasFactory{constructor({ownerDocument:L=globalThis.document}={}){super();this._document=L}_createCanvas(L,R){let N=this._document.createElement("canvas");return N.width=L,N.height=R,N}}e.DOMCanvasFactory=c;async function d(z,L=!1){if(w(z,document.baseURI)){let R=await fetch(z);if(!R.ok)throw new Error(R.statusText);return L?new Uint8Array(await R.arrayBuffer()):(0,o.stringToBytes)(await R.text())}return new Promise((R,N)=>{let V=new XMLHttpRequest;V.open("GET",z,!0),L&&(V.responseType="arraybuffer"),V.onreadystatechange=()=>{if(V.readyState===XMLHttpRequest.DONE){if(V.status===200||V.status===0){let W;if(L&&V.response?W=new Uint8Array(V.response):!L&&V.responseText&&(W=(0,o.stringToBytes)(V.responseText)),W){R(W);return}}N(new Error(V.statusText))}},V.send(null)})}class u extends i.BaseCMapReaderFactory{_fetchData(L,R){return d(L,this.isCompressed).then(N=>({cMapData:N,compressionType:R}))}}e.DOMCMapReaderFactory=u;class p extends i.BaseStandardFontDataFactory{_fetchData(L){return d(L,!0)}}e.DOMStandardFontDataFactory=p;class h extends i.BaseSVGFactory{_createSVG(L){return document.createElementNS(a,L)}}e.DOMSVGFactory=h;class f{constructor({viewBox:L,scale:R,rotation:N,offsetX:V=0,offsetY:W=0,dontFlip:me=!1}){this.viewBox=L,this.scale=R,this.rotation=N,this.offsetX=V,this.offsetY=W;let ie=(L[2]+L[0])/2,Z=(L[3]+L[1])/2,P,_,I,U;switch(N%=360,N<0&&(N+=360),N){case 180:P=-1,_=0,I=0,U=1;break;case 90:P=0,_=1,I=1,U=0;break;case 270:P=0,_=-1,I=-1,U=0;break;case 0:P=1,_=0,I=0,U=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}me&&(I=-I,U=-U);let M,$,H,Y;P===0?(M=Math.abs(Z-L[1])*R+V,$=Math.abs(ie-L[0])*R+W,H=Math.abs(L[3]-L[1])*R,Y=Math.abs(L[2]-L[0])*R):(M=Math.abs(ie-L[0])*R+V,$=Math.abs(Z-L[1])*R+W,H=Math.abs(L[2]-L[0])*R,Y=Math.abs(L[3]-L[1])*R),this.transform=[P*R,_*R,I*R,U*R,M-P*R*ie-I*R*Z,$-_*R*ie-U*R*Z],this.width=H,this.height=Y}clone({scale:L=this.scale,rotation:R=this.rotation,offsetX:N=this.offsetX,offsetY:V=this.offsetY,dontFlip:W=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:L,rotation:R,offsetX:N,offsetY:V,dontFlip:W})}convertToViewportPoint(L,R){return o.Util.applyTransform([L,R],this.transform)}convertToViewportRectangle(L){let R=o.Util.applyTransform([L[0],L[1]],this.transform),N=o.Util.applyTransform([L[2],L[3]],this.transform);return[R[0],R[1],N[0],N[1]]}convertToPdfPoint(L,R){return o.Util.applyInverseTransform([L,R],this.transform)}}e.PageViewport=f;class m extends o.BaseException{constructor(L,R){super(L,"RenderingCancelledException");this.type=R}}e.RenderingCancelledException=m;let g={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};e.LinkTarget=g;function v(z,{url:L,target:R,rel:N,enabled:V=!0}={}){(0,o.assert)(L&&typeof L=="string",'addLinkAttributes: A valid "url" parameter must provided.');let W=(0,o.removeNullCharacters)(L);V?z.href=z.title=W:(z.href="",z.title=`Disabled: ${W}`,z.onclick=()=>!1);let me="";switch(R){case g.NONE:break;case g.SELF:me="_self";break;case g.BLANK:me="_blank";break;case g.PARENT:me="_parent";break;case g.TOP:me="_top";break}z.target=me,z.rel=typeof N=="string"?N:s}function y(z){let L=z.length,R=0;for(;R<L&&z[R].trim()==="";)R++;return z.substring(R,R+5).toLowerCase()==="data:"}function S(z){return typeof z=="string"&&/\.pdf$/i.test(z)}function C(z){let L=z.indexOf("#"),R=z.indexOf("?"),N=Math.min(L>0?L:z.length,R>0?R:z.length);return z.substring(z.lastIndexOf("/",N)+1,N)}function b(z,L="document.pdf"){if(typeof z!="string")return L;if(y(z))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),L;let R=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,N=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,V=R.exec(z),W=N.exec(V[1])||N.exec(V[2])||N.exec(V[3]);if(W&&(W=W[0],W.includes("%")))try{W=N.exec(decodeURIComponent(W))[0]}catch(me){}return W||L}class x{constructor(){this.started=Object.create(null),this.times=[]}time(L){L in this.started&&(0,o.warn)(`Timer is already running for ${L}`),this.started[L]=Date.now()}timeEnd(L){L in this.started||(0,o.warn)(`Timer has not been started for ${L}`),this.times.push({name:L,start:this.started[L],end:Date.now()}),delete this.started[L]}toString(){let L=[],R=0;for(let N of this.times){let V=N.name;V.length>R&&(R=V.length)}for(let N of this.times){let V=N.end-N.start;L.push(`${N.name.padEnd(R)} ${V}ms
`)}return L.join("")}}e.StatTimer=x;function w(z,L){try{let{protocol:R}=L?new URL(z,L):new URL(z);return R==="http:"||R==="https:"}catch(R){return!1}}function k(z,L=!1){return new Promise((R,N)=>{let V=document.createElement("script");V.src=z,V.onload=function(W){L&&V.remove(),R(W)},V.onerror=function(){N(new Error(`Cannot load script at: ${V.src}`))},(document.head||document.documentElement).appendChild(V)})}function T(z){console.log("Deprecated API usage: "+z)}let A;class E{static toDateObject(L){if(!L||!(0,o.isString)(L))return null;A||(A=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let R=A.exec(L);if(!R)return null;let N=parseInt(R[1],10),V=parseInt(R[2],10);V=V>=1&&V<=12?V-1:0;let W=parseInt(R[3],10);W=W>=1&&W<=31?W:1;let me=parseInt(R[4],10);me=me>=0&&me<=23?me:0;let ie=parseInt(R[5],10);ie=ie>=0&&ie<=59?ie:0;let Z=parseInt(R[6],10);Z=Z>=0&&Z<=59?Z:0;let P=R[7]||"Z",_=parseInt(R[8],10);_=_>=0&&_<=23?_:0;let I=parseInt(R[9],10)||0;return I=I>=0&&I<=59?I:0,P==="-"?(me+=_,ie+=I):P==="+"&&(me-=_,ie-=I),new Date(Date.UTC(N,V,W,me,ie,Z))}}e.PDFDateString=E;function F(z,{scale:L=1,rotation:R=0}){let{width:N,height:V}=z.attributes.style,W=[0,0,parseInt(N),parseInt(V)];return new f({viewBox:W,scale:L,rotation:R})}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrayByteLength=Le,e.arraysToBytes=dt,e.assert=me,e.bytesToString=je,e.createObjectURL=Ie,e.createPromiseCapability=ke,e.createValidAbsoluteUrl=P,e.escapeString=Et,e.getModificationDate=pe,e.getVerbosityLevel=R,e.info=N,e.isArrayBuffer=fe,e.isArrayEqual=Q,e.isAscii=zt,e.isBool=ve,e.isNum=Me,e.isSameOrigin=ie,e.isString=re,e.objectFromMap=vt,e.objectSize=ot,e.removeNullCharacters=Se,e.setVerbosityLevel=L,e.shadow=_,e.string32=mt,e.stringToBytes=ze,e.stringToPDFString=Wt,e.stringToUTF16BEString=Ar,e.stringToUTF8String=yn,e.unreachable=W,e.utf8StringToString=we,e.warn=V,e.VerbosityLevel=e.Util=e.UNSUPPORTED_FEATURES=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.IsLittleEndianCached=e.IsEvalSupportedCached=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,r(3);let o=[1,0,0,1,0,0];e.IDENTITY_MATRIX=o;let i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;let s={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=s;let a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=a;let l={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=l;let c={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=c;let d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=d;let u={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=u;let p={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=p;let h={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=h;let f={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=f;let m={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=m;let g={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=g;let v={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=v;let y={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=y;let S={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=S;let C={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=C;let b={O:"PageOpen",C:"PageClose"};e.PageActionEventType=b;let x={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=x;let w={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=w;let k={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=k;let T={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=T;let A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=A;let E={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=E;let F={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=F;let z=k.WARNINGS;function L(q){Number.isInteger(q)&&(z=q)}function R(){return z}function N(q){z>=k.INFOS&&console.log(`Info: ${q}`)}function V(q){z>=k.WARNINGS&&console.log(`Warning: ${q}`)}function W(q){throw new Error(q)}function me(q,K){q||W(K)}function ie(q,K){let G;try{if(G=new URL(q),!G.origin||G.origin==="null")return!1}catch(be){return!1}let se=new URL(K,G);return G.origin===se.origin}function Z(q){if(!q)return!1;switch(q.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function P(q,K=null,G=null){if(!q)return null;try{if(G&&typeof q=="string"){if(G.addDefaultProtocol&&q.startsWith("www.")){let be=q.match(/\./g);be&&be.length>=2&&(q=`http://${q}`)}if(G.tryConvertEncoding)try{q=yn(q)}catch(be){}}let se=K?new URL(q,K):new URL(q);if(Z(se))return se}catch(se){}return null}function _(q,K,G){return Object.defineProperty(q,K,{value:G,enumerable:!0,configurable:!0,writable:!1}),G}let I=function(){function K(G,se){this.constructor===K&&W("Cannot initialize BaseException."),this.message=G,this.name=se}return K.prototype=new Error,K.constructor=K,K}();e.BaseException=I;class U extends I{constructor(K,G){super(K,"PasswordException");this.code=G}}e.PasswordException=U;class M extends I{constructor(K,G){super(K,"UnknownErrorException");this.details=G}}e.UnknownErrorException=M;class $ extends I{constructor(K){super(K,"InvalidPDFException")}}e.InvalidPDFException=$;class H extends I{constructor(K){super(K,"MissingPDFException")}}e.MissingPDFException=H;class Y extends I{constructor(K,G){super(K,"UnexpectedResponseException");this.status=G}}e.UnexpectedResponseException=Y;class ae extends I{constructor(K){super(K,"FormatError")}}e.FormatError=ae;class le extends I{constructor(K){super(K,"AbortException")}}e.AbortException=le;let xe=/\x00/g;function Se(q){return typeof q!="string"?(V("The argument for removeNullCharacters must be a string."),q):q.replace(xe,"")}function je(q){me(q!==null&&typeof q=="object"&&q.length!==void 0,"Invalid argument for bytesToString");let K=q.length,G=8192;if(K<G)return String.fromCharCode.apply(null,q);let se=[];for(let be=0;be<K;be+=G){let J=Math.min(be+G,K),ne=q.subarray(be,J);se.push(String.fromCharCode.apply(null,ne))}return se.join("")}function ze(q){me(typeof q=="string","Invalid argument for stringToBytes");let K=q.length,G=new Uint8Array(K);for(let se=0;se<K;++se)G[se]=q.charCodeAt(se)&255;return G}function Le(q){return q.length!==void 0?q.length:(me(q.byteLength!==void 0,"arrayByteLength - invalid argument."),q.byteLength)}function dt(q){let K=q.length;if(K===1&&q[0]instanceof Uint8Array)return q[0];let G=0;for(let J=0;J<K;J++)G+=Le(q[J]);let se=0,be=new Uint8Array(G);for(let J=0;J<K;J++){let ne=q[J];ne instanceof Uint8Array||(typeof ne=="string"?ne=ze(ne):ne=new Uint8Array(ne));let ye=ne.byteLength;be.set(ne,se),se+=ye}return be}function mt(q){return String.fromCharCode(q>>24&255,q>>16&255,q>>8&255,q&255)}function ot(q){return Object.keys(q).length}function vt(q){let K=Object.create(null);for(let[G,se]of q)K[G]=se;return K}function $t(){let q=new Uint8Array(4);return q[0]=1,new Uint32Array(q.buffer,0,1)[0]===1}let Kt={get value(){return _(this,"value",$t())}};e.IsLittleEndianCached=Kt;function _t(){try{return new Function(""),!0}catch(q){return!1}}let nr={get value(){return _(this,"value",_t())}};e.IsEvalSupportedCached=nr;let vn=[...Array(256).keys()].map(q=>q.toString(16).padStart(2,"0"));class Cr{static makeHexColor(K,G,se){return`#${vn[K]}${vn[G]}${vn[se]}`}static transform(K,G){return[K[0]*G[0]+K[2]*G[1],K[1]*G[0]+K[3]*G[1],K[0]*G[2]+K[2]*G[3],K[1]*G[2]+K[3]*G[3],K[0]*G[4]+K[2]*G[5]+K[4],K[1]*G[4]+K[3]*G[5]+K[5]]}static applyTransform(K,G){let se=K[0]*G[0]+K[1]*G[2]+G[4],be=K[0]*G[1]+K[1]*G[3]+G[5];return[se,be]}static applyInverseTransform(K,G){let se=G[0]*G[3]-G[1]*G[2],be=(K[0]*G[3]-K[1]*G[2]+G[2]*G[5]-G[4]*G[3])/se,J=(-K[0]*G[1]+K[1]*G[0]+G[4]*G[1]-G[5]*G[0])/se;return[be,J]}static getAxialAlignedBoundingBox(K,G){let se=Cr.applyTransform(K,G),be=Cr.applyTransform(K.slice(2,4),G),J=Cr.applyTransform([K[0],K[3]],G),ne=Cr.applyTransform([K[2],K[1]],G);return[Math.min(se[0],be[0],J[0],ne[0]),Math.min(se[1],be[1],J[1],ne[1]),Math.max(se[0],be[0],J[0],ne[0]),Math.max(se[1],be[1],J[1],ne[1])]}static inverseTransform(K){let G=K[0]*K[3]-K[1]*K[2];return[K[3]/G,-K[1]/G,-K[2]/G,K[0]/G,(K[2]*K[5]-K[4]*K[3])/G,(K[4]*K[1]-K[5]*K[0])/G]}static apply3dTransform(K,G){return[K[0]*G[0]+K[1]*G[1]+K[2]*G[2],K[3]*G[0]+K[4]*G[1]+K[5]*G[2],K[6]*G[0]+K[7]*G[1]+K[8]*G[2]]}static singularValueDecompose2dScale(K){let G=[K[0],K[2],K[1],K[3]],se=K[0]*G[0]+K[1]*G[2],be=K[0]*G[1]+K[1]*G[3],J=K[2]*G[0]+K[3]*G[2],ne=K[2]*G[1]+K[3]*G[3],ye=(se+ne)/2,Be=Math.sqrt((se+ne)**2-4*(se*ne-J*be))/2,Ue=ye+Be||1,Oe=ye-Be||1;return[Math.sqrt(Ue),Math.sqrt(Oe)]}static normalizeRect(K){let G=K.slice(0);return K[0]>K[2]&&(G[0]=K[2],G[2]=K[0]),K[1]>K[3]&&(G[1]=K[3],G[3]=K[1]),G}static intersect(K,G){function se(ye,Be){return ye-Be}let be=[K[0],K[2],G[0],G[2]].sort(se),J=[K[1],K[3],G[1],G[3]].sort(se),ne=[];if(K=Cr.normalizeRect(K),G=Cr.normalizeRect(G),be[0]===K[0]&&be[1]===G[0]||be[0]===G[0]&&be[1]===K[0])ne[0]=be[1],ne[2]=be[2];else return null;if(J[0]===K[1]&&J[1]===G[1]||J[0]===G[1]&&J[1]===K[1])ne[1]=J[1],ne[3]=J[2];else return null;return ne}}e.Util=Cr;let Ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Wt(q){let K=q.length,G=[];if(q[0]==="\xFE"&&q[1]==="\xFF")for(let se=2;se<K;se+=2)G.push(String.fromCharCode(q.charCodeAt(se)<<8|q.charCodeAt(se+1)));else if(q[0]==="\xFF"&&q[1]==="\xFE")for(let se=2;se<K;se+=2)G.push(String.fromCharCode(q.charCodeAt(se+1)<<8|q.charCodeAt(se)));else for(let se=0;se<K;++se){let be=Ot[q.charCodeAt(se)];G.push(be?String.fromCharCode(be):q.charAt(se))}return G.join("")}function Et(q){return q.replace(/([()\\\n\r])/g,K=>K===`
`?"\\n":K==="\r"?"\\r":`\\${K}`)}function zt(q){return/^[\x00-\x7F]*$/.test(q)}function Ar(q){let K=["\xFE\xFF"];for(let G=0,se=q.length;G<se;G++){let be=q.charCodeAt(G);K.push(String.fromCharCode(be>>8&255),String.fromCharCode(be&255))}return K.join("")}function yn(q){return decodeURIComponent(escape(q))}function we(q){return unescape(encodeURIComponent(q))}function ve(q){return typeof q=="boolean"}function Me(q){return typeof q=="number"}function re(q){return typeof q=="string"}function fe(q){return typeof q=="object"&&q!==null&&q.byteLength!==void 0}function Q(q,K){if(q.length!==K.length)return!1;for(let G=0,se=q.length;G<se;G++)if(q[G]!==K[G])return!1;return!0}function pe(q=new Date){return[q.getUTCFullYear().toString(),(q.getUTCMonth()+1).toString().padStart(2,"0"),q.getUTCDate().toString().padStart(2,"0"),q.getUTCHours().toString().padStart(2,"0"),q.getUTCMinutes().toString().padStart(2,"0"),q.getUTCSeconds().toString().padStart(2,"0")].join("")}function ke(){let q=Object.create(null),K=!1;return Object.defineProperty(q,"settled",{get(){return K}}),q.promise=new Promise(function(G,se){q.resolve=function(be){K=!0,G(be)},q.reject=function(be){K=!0,se(be)}}),q}function Ie(q,K="",G=!1){if(URL.createObjectURL&&!G)return URL.createObjectURL(new Blob([q],{type:K}));let se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",be=`data:${K};base64,`;for(let J=0,ne=q.length;J<ne;J+=3){let ye=q[J]&255,Be=q[J+1]&255,Ue=q[J+2]&255,Oe=ye>>2,bt=(ye&3)<<4|Be>>4,lt=J+1<ne?(Be&15)<<2|Ue>>6:64,Lt=J+2<ne?Ue&63:64;be+=se[Oe]+se[bt]+se[lt]+se[Lt]}return be}},(t,e,r)=>{var o=r(4)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;let r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=r},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseSVGFactory=e.BaseStandardFontDataFactory=e.BaseCMapReaderFactory=e.BaseCanvasFactory=void 0;var o=r(2);class i{constructor(){this.constructor===i&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,u){if(d<=0||u<=0)throw new Error("Invalid canvas size");let p=this._createCanvas(d,u);return{canvas:p,context:p.getContext("2d")}}reset(d,u,p){if(!d.canvas)throw new Error("Canvas is not specified");if(u<=0||p<=0)throw new Error("Invalid canvas size");d.canvas.width=u,d.canvas.height=p}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,u){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=i;class s{constructor({baseUrl:d=null,isCompressed:u=!1}){this.constructor===s&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=u}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");let u=this.baseUrl+d+(this.isCompressed?".bcmap":""),p=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(u,p).catch(h=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${u}`)})}_fetchData(d,u){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class a{constructor({baseUrl:d=null}){this.constructor===a&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");let u=`${this.baseUrl}${d}`;return this._fetchData(u).catch(p=>{throw new Error(`Unable to load font data at: ${u}`)})}_fetchData(d){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=a;class l{constructor(){this.constructor===l&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,u){if(d<=0||u<=0)throw new Error("Invalid SVG dimensions");let p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),p.setAttribute("width",`${d}px`),p.setAttribute("height",`${u}px`),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${d} ${u}`),p}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,o.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=l},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){let r=new PDFDocumentLoadingTask,o;if(typeof e=="string"||e instanceof URL)o={url:e};else if((0,_util.isArrayBuffer)(e))o={data:e};else if(e instanceof PDFDataRangeTransport)o={range:e};else{if(typeof e!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");o=e}let i=Object.create(null),s=null,a=null;for(let c in o){let d=o[c];switch(c){case"url":if(typeof window!="undefined")try{i[c]=new URL(d,window.location).href;continue}catch(u){(0,_util.warn)(`Cannot create valid URL: "${u}".`)}else if(typeof d=="string"||d instanceof URL){i[c]=d.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":s=d;continue;case"worker":a=d;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&d instanceof Buffer)i[c]=new Uint8Array(d);else{if(d instanceof Uint8Array)break;if(typeof d=="string")i[c]=(0,_util.stringToBytes)(d);else if(typeof d=="object"&&d!==null&&!isNaN(d.length))i[c]=new Uint8Array(d);else if((0,_util.isArrayBuffer)(d))i[c]=new Uint8Array(d);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}i[c]=d}if(i.rangeChunkSize=i.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory,i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory,i.ignoreErrors=i.stopAtErrors!==!0,i.fontExtraProperties=i.fontExtraProperties===!0,i.pdfBug=i.pdfBug===!0,i.enableXfa=i.enableXfa===!0,(typeof i.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null),Number.isInteger(i.maxImageSize)||(i.maxImageSize=-1),typeof i.useWorkerFetch!="boolean"&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof i.isEvalSupported!="boolean"&&(i.isEvalSupported=!0),typeof i.disableFontFace!="boolean"&&(i.disableFontFace=_is_node.isNodeJS),typeof i.useSystemFonts!="boolean"&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace),typeof i.ownerDocument=="undefined"&&(i.ownerDocument=globalThis.document),typeof i.disableRange!="boolean"&&(i.disableRange=!1),typeof i.disableStream!="boolean"&&(i.disableStream=!1),typeof i.disableAutoFetch!="boolean"&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!a){let c={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};a=c.port?PDFWorker.fromPort(c):new PDFWorker(c),r._worker=a}let l=r.docId;return a.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");let c=_fetchDocument(a,i,s,l),d=new Promise(function(u){let p;s?p=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},s):i.data||(p=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),u(p)});return Promise.all([c,d]).then(function([u,p]){if(r.destroyed)throw new Error("Loading aborted");let h=new _message_handler.MessageHandler(l,u,a.port);h.postMessageTransfers=a.postMessageTransfers;let f=new WorkerTransport(h,r,p,i);r._transport=f,h.send("Ready",null)})}).catch(r._capability.reject),r}async function _fetchDocument(e,r,o,i){if(e.destroyed)throw new Error("Worker was destroyed");o&&(r.length=o.length,r.initialData=o.initialData,r.progressiveDone=o.progressiveDone,r.contentDispositionFilename=o.contentDispositionFilename);let s=await e.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.11.338",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,postMessageTransfers:e.postMessageTransfers,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});if(e.destroyed)throw new Error("Worker was destroyed");return s}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var r;this.destroyed=!0,await((r=this._transport)==null?void 0:r.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,o,i=!1,s=null){this.length=r,this.initialData=o,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,o){for(let i of this._rangeListeners)i(r,o)}onDataProgress(r,o){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(r,o)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(let o of this._progressiveReadListeners)o(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,o){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,o){this._pdfInfo=r,this._transport=o,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,o,i,s,a=!1){this._pageIndex=r,this._pageInfo=o,this._ownerDocument=s,this._transport=i,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:o=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:a=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:o,offsetX:i,offsetY:s,dontFlip:a})}getAnnotations({intent:r="display"}={}){let o=this._transport.getRenderingIntent(r),i=this._annotationPromises.get(o.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,o.renderingIntent),this._annotationPromises.set(o.cacheKey,i),i=i.then(s=>{for(let a of s)a.titleObj!==void 0&&Object.defineProperty(a,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),a.titleObj.str}}),a.contentsObj!==void 0&&Object.defineProperty(a,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),a.contentsObj.str}});return s})),i}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var r;return((r=this._transport._htmlForXfa)==null?void 0:r.children[this._pageIndex])||null}render({canvasContext:r,viewport:o,intent:i="display",annotationMode:s=_util.AnnotationMode.ENABLE,transform:a=null,imageLayer:l=null,canvasFactory:c=null,background:d=null,optionalContentConfigPromise:u=null}){var S,C;((S=arguments[0])==null?void 0:S.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&s===_util.AnnotationMode.ENABLE&&(s=_util.AnnotationMode.ENABLE_FORMS)),((C=arguments[0])==null?void 0:C.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&s===_util.AnnotationMode.ENABLE&&(s=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");let p=this._transport.getRenderingIntent(i,s);this.pendingCleanup=!1,u||(u=this._transport.getOptionalContentConfig());let h=this._intentStates.get(p.cacheKey);h||(h=Object.create(null),this._intentStates.set(p.cacheKey,h)),h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null);let f=c||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),m=!!(p.renderingIntent&_util.RenderingIntentFlag.PRINT);h.displayReadyCapability||(h.displayReadyCapability=(0,_util.createPromiseCapability)(),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(p));let g=b=>{h.renderTasks.delete(v),(this.cleanupAfterRender||m)&&(this.pendingCleanup=!0),this._tryCleanup(),b?(v.capability.reject(b),this._abortOperatorList({intentState:h,reason:b instanceof Error?b:new Error(b)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},v=new InternalRenderTask({callback:g,params:{canvasContext:r,viewport:o,transform:a,imageLayer:l,background:d},objs:this.objs,commonObjs:this.commonObjs,operatorList:h.operatorList,pageIndex:this._pageIndex,canvasFactory:f,useRequestAnimationFrame:!m,pdfBug:this._pdfBug});(h.renderTasks||(h.renderTasks=new Set)).add(v);let y=v.task;return Promise.all([h.displayReadyCapability.promise,u]).then(([b,x])=>{if(this.pendingCleanup){g();return}this._stats&&this._stats.time("Rendering"),v.initializeGraphics({transparency:b,optionalContentConfig:x}),v.operatorListChanged()}).catch(g),y}getOperatorList({intent:r="display",annotationMode:o=_util.AnnotationMode.ENABLE}={}){function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}let s=this._transport.getRenderingIntent(r,o,!0),a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=(0,_util.createPromiseCapability)(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({normalizeWhitespace:r=!1,disableCombineTextItems:o=!1,includeMarkedContent:i=!1}={}){let s=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:r===!0,combineTextItems:o!==!0,includeMarkedContent:i===!0},{highWaterMark:s,size(a){return a.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));let o=this.streamTextContent(r);return new Promise(function(i,s){function a(){l.read().then(function({value:d,done:u}){if(u){i(c);return}Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},s)}let l=o.getReader(),c={items:[],styles:Object.create(null)};a()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;let r=[];for(let o of this._intentStates.values())if(this._abortOperatorList({intentState:o,reason:new Error("Page was destroyed."),force:!0}),!o.opListReadCapability)for(let i of o.renderTasks)r.push(i.completed),i.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(let{renderTasks:o,operatorList:i}of this._intentStates.values())if(o.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(r,o){let i=this._intentStates.get(o);!i||(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(r))}_renderPageChunk(r,o){for(let i=0,s=r.length;i<s;i++)o.operatorList.fnArray.push(r.fnArray[i]),o.operatorList.argsArray.push(r.argsArray[i]);o.operatorList.lastChunk=r.lastChunk;for(let i of o.renderTasks)i.operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:r,cacheKey:o}){let s=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:o,annotationStorage:r&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),a=this._intentStates.get(o);a.streamReader=s;let l=()=>{s.read().then(({value:c,done:d})=>{if(d){a.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,a),l())},c=>{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(let d of a.renderTasks)d.operatorListChanged();this._tryCleanup()}if(a.displayReadyCapability)a.displayReadyCapability.reject(c);else if(a.opListReadCapability)a.opListReadCapability.reject(c);else throw c}})};l()}_abortOperatorList({intentState:r,reason:o,force:i=!1}){if(!!r.streamReader){if(!i){if(r.renderTasks.size>0)return;if(o instanceof _display_utils.RenderingCancelledException){r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:o,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(r.streamReader.cancel(new _util.AbortException(o.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(let[s,a]of this._intentStates)if(a===r){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve(void 0)}postMessage(r,o){function i(l){var u;if(typeof l=="function"||typeof l=="symbol"||l instanceof URL)throw new Error(`LoopbackPort.postMessage - cannot clone: ${l==null?void 0:l.toString()}`);if(typeof l!="object"||l===null)return l;if(s.has(l))return s.get(l);let c,d;if((c=l.buffer)&&(0,_util.isArrayBuffer)(c))return(o==null?void 0:o.includes(c))?d=new l.constructor(c,l.byteOffset,l.byteLength):d=new l.constructor(l),s.set(l,d),d;if(l instanceof Map){d=new Map,s.set(l,d);for(let[p,h]of l)d.set(p,i(h));return d}if(l instanceof Set){d=new Set,s.set(l,d);for(let p of l)d.add(i(p));return d}d=Array.isArray(l)?[]:Object.create(null),s.set(l,d);for(let p in l){let h,f=l;for(;!(h=Object.getOwnPropertyDescriptor(f,p));)f=Object.getPrototypeOf(f);typeof h.value!="undefined"&&(typeof h.value=="function"&&!((u=l.hasOwnProperty)==null?void 0:u.call(l,p))||(d[p]=i(h.value)))}return d}let s=new WeakMap,a={data:i(r)};this._deferred.then(()=>{for(let l of this._listeners)l.call(this,a)})}addEventListener(r,o){this._listeners.push(o)}removeEventListener(r,o){let i=this._listeners.indexOf(o);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof Za=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let e=(t=document==null?void 0:document.currentScript)==null?void 0:t.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(e){let r=`importScripts("${e}");`;return URL.createObjectURL(new Blob([r]))}}class PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:e=null,port:r=null,verbosity:o=(0,_util.getVerbosityLevel)()}={}){if(r&&PDFWorker._workerPorts.has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=e,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=o,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r){PDFWorker._workerPorts.set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let e=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));let r=new Worker(e),o=new _message_handler.MessageHandler("main","worker",r),i=()=>{r.removeEventListener("error",s),o.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||i()};r.addEventListener("error",s),o.on("test",l=>{if(r.removeEventListener("error",s),this.destroyed){i();return}l?(this._messageHandler=o,this._port=r,this._webWorker=r,l.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),o.destroy(),r.terminate())}),o.on("ready",l=>{if(r.removeEventListener("error",s),this.destroyed){i();return}try{a()}catch(c){this._setupFakeWorker()}});let a=()=>{let l=new Uint8Array([this.postMessageTransfers?255:0]);try{o.send("test",l,[l.buffer])}catch(c){(0,_util.warn)("Cannot use postMessage transfers."),l[0]=0,o.send("test",l)}};a();return}catch(r){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let r=new LoopbackPort;this._port=r;let o=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(o+"_worker",o,r);e.setup(i,r);let s=new _message_handler.MessageHandler(o,o+"_worker",r);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!(e==null?void 0:e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(e.port)?this._workerPorts.get(e.port):new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch(r){return null}}static get _setupFakeWorkerGlobal(){let loader=async()=>{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof Za=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(r,o,i,s){this.messageHandler=r,this.loadingTask=o,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:o.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,s.useWorkerFetch||(this.CMapReaderFactory=new s.CMapReaderFactory({baseUrl:s.cMapUrl,isCompressed:s.cMapPacked}),this.StandardFontDataFactory=new s.StandardFontDataFactory({baseUrl:s.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(r,o=_util.AnnotationMode.ENABLE,i=!1){let s=_util.RenderingIntentFlag.DISPLAY,a="";switch(r){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(o){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,a=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${o}`)}return i&&(s+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:s,cacheKey:`${s}_${a}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));let r=[];for(let i of this.pageCache)i&&r.push(i._destroy());this.pageCache.length=0,this.pagePromises.length=0,this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let o=this.messageHandler.sendWithPromise("Terminate",null);return r.push(o),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:r,loadingTask:o}=this;r.on("GetReader",(i,s)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(a),"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),r.on("ReaderHeadersReady",i=>{let s=(0,_util.createPromiseCapability)(),a=this._fullReader;return a.headersReady.then(()=>{(!a.isStreamingSupported||!a.isRangeSupported)&&(this._lastProgress&&o.onProgress&&o.onProgress(this._lastProgress),a.onProgress=l=>{o.onProgress&&o.onProgress({loaded:l.loaded,total:l.total})}),s.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})},s.reject),s.promise}),r.on("GetRangeReader",(i,s)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){s.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(l),"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),r.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,o._capability.resolve(new PDFDocumentProxy(i,this))}),r.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":s=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}o._capability.reject(s)}),r.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),o.onPassword){let s=a=>{this._passwordCapability.resolve({password:a})};try{o.onPassword(s,i.code)}catch(a){this._passwordCapability.reject(a)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),r.on("DataLoaded",i=>{o.onProgress&&o.onProgress({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),r.on("StartRenderPage",i=>{if(this.destroyed)return;this.pageCache[i.pageIndex]._startRenderPage(i.transparency,i.cacheKey)}),r.on("commonobj",i=>{var c;if(this.destroyed)return;let[s,a,l]=i;if(!this.commonObjs.has(s))switch(a){case"Font":let d=this._params;if("error"in l){let h=l.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}let u=null;d.pdfBug&&((c=globalThis.FontInspector)==null?void 0:c.enabled)&&(u={registerFont(h,f){globalThis.FontInspector.fontAdded(h,f)}});let p=new _font_loader.FontFaceObject(l,{isEvalSupported:d.isEvalSupported,disableFontFace:d.disableFontFace,ignoreErrors:d.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(p).catch(h=>r.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&p.data&&(p.data=null),this.commonObjs.resolve(s,p)});break;case"FontPath":case"Image":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${a}`)}}),r.on("obj",i=>{var u;if(this.destroyed)return;let[s,a,l,c]=i,d=this.pageCache[a];if(!d.objs.has(s))switch(l){case"Image":d.objs.resolve(s,c);let p=8e6;((u=c==null?void 0:c.data)==null?void 0:u.length)>p&&(d.cleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${l}`)}}),r.on("DocProgress",i=>{this.destroyed||o.onProgress&&o.onProgress({loaded:i.loaded,total:i.total})}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:r}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request"));let o=r-1;if(o in this.pagePromises)return this.pagePromises[o];let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:o}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");let a=new PDFPageProxy(o,s,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[o]=a,a});return this.pagePromises[o]=i,i}getPageIndex(r){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:r})}getAnnotations(r,o){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:o})}saveDocument(){var r,o;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(o=(r=this._fullReader)==null?void 0:r.filename)!=null?o:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>{var o,i,s,a;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:(i=(o=this._fullReader)==null?void 0:o.filename)!=null?i:null,contentLength:(a=(s=this._fullReader)==null?void 0:s.contentLength)!=null?a:null}})}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}async startCleanup(r=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let o=0,i=this.pageCache.length;o<i;o++){let s=this.pageCache[o];if(!s)continue;if(!s.cleanup())throw new Error(`startCleanup: Page ${o+1} is currently rendering.`)}this.commonObjs.clear(),r||this.fontLoader.clear(),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){let r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,enableXfa:r.enableXfa})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(r){return this._objs[r]?this._objs[r]:this._objs[r]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(r,o=null){if(o)return this._ensureObj(r).capability.promise.then(o),null;let i=this._objs[r];if(!i||!i.resolved)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return i.data}has(r){let o=this._objs[r];return(o==null?void 0:o.resolved)||!1}resolve(r,o){let i=this._ensureObj(r);i.resolved=!0,i.data=o,i.capability.resolve(o)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(r){this._internalRenderTask=r,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:r,params:o,objs:i,commonObjs:s,operatorList:a,pageIndex:l,canvasFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1}){this.callback=r,this.params=o,this.objs=i,this.commonObjs=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this._pdfBug=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=o.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:o}){var d;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)==null?void 0:d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:i,viewport:s,transform:a,imageLayer:l,background:c}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,l,o),this.gfx.beginDrawing({transform:a,viewport:s,transparency:r,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}let version="2.11.338";exports.version=version;let build="dedff3c98";exports.build=build},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var o=r(2);class i{constructor({docId:c,onUnsupportedFeature:d,ownerDocument:u=globalThis.document,styleElement:p=null}){this.constructor===i&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=c,this._onUnsupportedFeature=d,this._document=u,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(c){this.nativeFontFaces.push(c),this._document.fonts.add(c)}insertRule(c){let d=this.styleElement;d||(d=this.styleElement=this._document.createElement("style"),d.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(d));let u=d.sheet;u.insertRule(c,u.cssRules.length)}clear(){for(let c of this.nativeFontFaces)this._document.fonts.delete(c);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(c){if(c.attached||c.missingFile)return;if(c.attached=!0,this.isFontLoadingAPISupported){let u=c.createNativeFontFace();if(u){this.addNativeFontFace(u);try{await u.loaded}catch(p){throw this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)(`Failed to load font '${u.family}': '${p}'.`),c.disableFontFace=!0,p}}return}let d=c.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(u=>{let p=this._queueLoadingCallback(u);this._prepareFontLoadEvent([d],[c],p)})}}_queueLoadingCallback(c){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var d;let c=!!((d=this._document)==null?void 0:d.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",c)}get isSyncFontLoadingSupported(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(c,d,u){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;e.FontLoader=s,e.FontLoader=s=class extends i{constructor(c){super(c);this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let c=!1;if(typeof navigator=="undefined")c=!0;else{let d=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(d==null?void 0:d[1])>=14&&(c=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",c)}_queueLoadingCallback(c){function d(){for((0,o.assert)(!p.done,"completeRequest() cannot be called twice."),p.done=!0;u.requests.length>0&&u.requests[0].done;){let h=u.requests.shift();setTimeout(h.callback,0)}}let u=this.loadingContext,p={id:`pdfjs-font-loading-${u.nextRequestId++}`,done:!1,complete:d,callback:c};return u.requests.push(p),p}get _loadTestFont(){let c=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,o.shadow)(this,"_loadTestFont",c())}_prepareFontLoadEvent(c,d,u){function p(L,R){return L.charCodeAt(R)<<24|L.charCodeAt(R+1)<<16|L.charCodeAt(R+2)<<8|L.charCodeAt(R+3)&255}function h(L,R,N,V){let W=L.substring(0,R),me=L.substring(R+N);return W+V+me}let f,m,g=this._document.createElement("canvas");g.width=1,g.height=1;let v=g.getContext("2d"),y=0;function S(L,R){if(y++,y>30){(0,o.warn)("Load test font never loaded."),R();return}if(v.font="30px "+L,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(S.bind(null,L,R))}let C=`lt${Date.now()}${this.loadTestFontId++}`,b=this._loadTestFont;b=h(b,976,C.length,C);let w=16,k=1482184792,T=p(b,w);for(f=0,m=C.length-3;f<m;f+=4)T=T-k+p(C,f)|0;f<C.length&&(T=T-k+p(C+"XXX",f)|0),b=h(b,w,4,(0,o.string32)(T));let A=`url(data:font/opentype;base64,${btoa(b)});`,E=`@font-face {font-family:"${C}";src:${A}}`;this.insertRule(E);let F=[];for(let L of d)F.push(L.loadedName);F.push(C);let z=this._document.createElement("div");z.style.visibility="hidden",z.style.width=z.style.height="10px",z.style.position="absolute",z.style.top=z.style.left="0px";for(let L of F){let R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=L,z.appendChild(R)}this._document.body.appendChild(z),S(C,()=>{this._document.body.removeChild(z),u.complete()})}};class a{constructor(c,{isEvalSupported:d=!0,disableFontFace:u=!1,ignoreErrors:p=!1,onUnsupportedFeature:h,fontRegistry:f=null}){this.compiledGlyphs=Object.create(null);for(let m in c)this[m]=c[m];this.isEvalSupported=d!==!1,this.disableFontFace=u===!0,this.ignoreErrors=p===!0,this._onUnsupportedFeature=h,this.fontRegistry=f}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let c;if(!this.cssFontInfo)c=new FontFace(this.loadedName,this.data,{});else{let d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),c=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this.fontRegistry&&this.fontRegistry.registerFont(this),c}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let c=(0,o.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(c)});`,u;if(!this.cssFontInfo)u=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let p=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(p+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),u=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${p}src:${d}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,d),u}getPathGenerator(c,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let u;try{u=c.get(this.loadedName+"_path_"+d)}catch(p){if(!this.ignoreErrors)throw p;return this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)(`getPathGenerator - ignoring character: "${p}".`),this.compiledGlyphs[d]=function(h,f){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){let p=[];for(let h of u){let f=h.args!==void 0?h.args.join(","):"";p.push("c.",h.cmd,"(",f,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",p.join(""))}return this.compiledGlyphs[d]=function(p,h){for(let f of u)f.cmd==="scale"&&(f.args=[h,-h]),p[f.cmd].apply(p,f.args)}}}e.FontFaceObject=a},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCMapReaderFactory=e.NodeCanvasFactory=void 0;var o=r(5),i=r(4),s=r(2);let a=class{constructor(){(0,s.unreachable)("Not implemented: NodeCanvasFactory")}};e.NodeCanvasFactory=a;let l=class{constructor(){(0,s.unreachable)("Not implemented: NodeCMapReaderFactory")}};e.NodeCMapReaderFactory=l;let c=class{constructor(){(0,s.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(e.NodeStandardFontDataFactory=c,i.isNodeJS){let d=function(u){return new Promise((p,h)=>{Za("fs").readFile(u,(m,g)=>{if(m||!g){h(new Error(m));return}p(new Uint8Array(g))})})};e.NodeCanvasFactory=a=class extends o.BaseCanvasFactory{_createCanvas(u,p){return e$().createCanvas(u,p)}},e.NodeCMapReaderFactory=l=class extends o.BaseCMapReaderFactory{_fetchData(u,p){return d(u).then(h=>({cMapData:h,compressionType:p}))}},e.NodeStandardFontDataFactory=c=class extends o.BaseStandardFontDataFactory{_fetchData(u){return d(u)}}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var o=r(2);class i{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(a,l){let c=this._storage.get(a);return c===void 0?l:Object.assign(l,c)}setValue(a,l){let c=this._storage.get(a),d=!1;if(c!==void 0)for(let[u,p]of Object.entries(l))c[u]!==p&&(d=!0,c[u]=p);else d=!0,this._storage.set(a,l);d&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,o.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}e.AnnotationStorage=i},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var o=r(2),i=r(11),s=r(1);let a=16,l=100,c=4096,d=2,u=15,p=10,h=!0,f=1e3,m=16,g=1.000001;function v(Z){if(!Z.mozCurrentTransform){Z._originalSave=Z.save,Z._originalRestore=Z.restore,Z._originalRotate=Z.rotate,Z._originalScale=Z.scale,Z._originalTranslate=Z.translate,Z._originalTransform=Z.transform,Z._originalSetTransform=Z.setTransform,Z._originalResetTransform=Z.resetTransform,Z._transformMatrix=Z._transformMatrix||[1,0,0,1,0,0],Z._transformStack=[];try{let P=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Z),"lineWidth");Z._setLineWidth=P.set,Z._getLineWidth=P.get,Object.defineProperty(Z,"lineWidth",{set:function(I){this._setLineWidth(I*g)},get:function(){return this._getLineWidth()}})}catch(P){}Object.defineProperty(Z,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(Z,"mozCurrentTransformInverse",{get:function(){let[_,I,U,M,$,H]=this._transformMatrix,Y=_*M-I*U,ae=I*U-_*M;return[M/Y,I/ae,U/ae,_/Y,(M*$-U*H)/ae,(I*$-_*H)/Y]}}),Z.save=function(){let _=this._transformMatrix;this._transformStack.push(_),this._transformMatrix=_.slice(0,6),this._originalSave()},Z.restore=function(){let _=this._transformStack.pop();_&&(this._transformMatrix=_,this._originalRestore())},Z.translate=function(_,I){let U=this._transformMatrix;U[4]=U[0]*_+U[2]*I+U[4],U[5]=U[1]*_+U[3]*I+U[5],this._originalTranslate(_,I)},Z.scale=function(_,I){let U=this._transformMatrix;U[0]*=_,U[1]*=_,U[2]*=I,U[3]*=I,this._originalScale(_,I)},Z.transform=function(_,I,U,M,$,H){let Y=this._transformMatrix;this._transformMatrix=[Y[0]*_+Y[2]*I,Y[1]*_+Y[3]*I,Y[0]*U+Y[2]*M,Y[1]*U+Y[3]*M,Y[0]*$+Y[2]*H+Y[4],Y[1]*$+Y[3]*H+Y[5]],Z._originalTransform(_,I,U,M,$,H)},Z.setTransform=function(_,I,U,M,$,H){this._transformMatrix=[_,I,U,M,$,H],Z._originalSetTransform(_,I,U,M,$,H)},Z.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],Z._originalResetTransform()},Z.rotate=function(_){let I=Math.cos(_),U=Math.sin(_),M=this._transformMatrix;this._transformMatrix=[M[0]*I+M[2]*U,M[1]*I+M[3]*U,M[0]*-U+M[2]*I,M[1]*-U+M[3]*I,M[4],M[5]],this._originalRotate(_)}}}class y{constructor(P){this.canvasFactory=P,this.cache=Object.create(null)}getCanvas(P,_,I,U){let M;return this.cache[P]!==void 0?(M=this.cache[P],this.canvasFactory.reset(M,_,I),M.context.setTransform(1,0,0,1,0,0)):(M=this.canvasFactory.create(_,I),this.cache[P]=M),U&&v(M.context),M}clear(){for(let P in this.cache){let _=this.cache[P];this.canvasFactory.destroy(_),delete this.cache[P]}}}class S{constructor(P=0){this._cache=new Map,this._maxSize=P}has(P){return this._cache.has(P)}get(P){if(this._cache.has(P)){let _=this._cache.get(P);this._cache.delete(P),this._cache.set(P,_)}return this._cache.get(P)}set(P,_){this._maxSize<=0||(this._cache.size+1>this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(P,_))}clear(){this._cache.clear()}}function C(Z){let P=1e3,_=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=Z.width,U=Z.height,M=I+1,$,H,Y,ae,le=new Uint8Array(M*(U+1)),xe=I+7&~7,Se=Z.data,je=new Uint8Array(xe*U),ze=0;for($=0,H=Se.length;$<H;$++){let vt=Se[$],$t=128;for(;$t>0;)je[ze++]=vt&$t?0:255,$t>>=1}let Le=0;for(ze=0,je[ze]!==0&&(le[0]=1,++Le),Y=1;Y<I;Y++)je[ze]!==je[ze+1]&&(le[Y]=je[ze]?2:1,++Le),ze++;for(je[ze]!==0&&(le[Y]=2,++Le),$=1;$<U;$++){ze=$*xe,ae=$*M,je[ze-xe]!==je[ze]&&(le[ae]=je[ze]?1:8,++Le);let vt=(je[ze]?4:0)+(je[ze-xe]?8:0);for(Y=1;Y<I;Y++)vt=(vt>>2)+(je[ze+1]?4:0)+(je[ze-xe+1]?8:0),_[vt]&&(le[ae+Y]=_[vt],++Le),ze++;if(je[ze-xe]!==je[ze]&&(le[ae+Y]=je[ze]?2:4,++Le),Le>P)return null}for(ze=xe*(U-1),ae=$*M,je[ze]!==0&&(le[ae]=8,++Le),Y=1;Y<I;Y++)je[ze]!==je[ze+1]&&(le[ae+Y]=je[ze]?4:8,++Le),ze++;if(je[ze]!==0&&(le[ae+Y]=4,++Le),Le>P)return null;let dt=new Int32Array([0,M,-1,0,-M,0,0,0,1]),mt=[];for($=0;Le&&$<=U;$++){let vt=$*M,$t=vt+I;for(;vt<$t&&!le[vt];)vt++;if(vt===$t)continue;let Kt=[vt%M,$],_t=vt,nr=le[vt];do{let vn=dt[nr];do vt+=vn;while(!le[vt]);let Cr=le[vt];Cr!==5&&Cr!==10?(nr=Cr,le[vt]=0):(nr=Cr&51*nr>>4,le[vt]&=nr>>2|nr<<2),Kt.push(vt%M,vt/M|0),le[vt]||--Le}while(_t!==vt);mt.push(Kt),--$}return function(vt){vt.save(),vt.scale(1/I,-1/U),vt.translate(0,-U),vt.beginPath();for(let $t=0,Kt=mt.length;$t<Kt;$t++){let _t=mt[$t];vt.moveTo(_t[0],_t[1]);for(let nr=2,vn=_t.length;nr<vn;nr+=2)vt.lineTo(_t[nr],_t[nr+1])}vt.fill(),vt.beginPath(),vt.restore()}}class b{constructor(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}clone(){return Object.create(this)}setCurrentPoint(P,_){this.x=P,this.y=_}}function x(Z,P,_=null){if(typeof ImageData!="undefined"&&P instanceof ImageData){Z.putImageData(P,0,0);return}let I=P.height,U=P.width,M=I%m,$=(I-M)/m,H=M===0?$:$+1,Y=Z.createImageData(U,m),ae=0,le,xe=P.data,Se=Y.data,je,ze,Le,dt,mt,ot,vt,$t;if(_)switch(_.length){case 1:mt=_[0],ot=_[0],vt=_[0],$t=_[0];break;case 4:mt=_[0],ot=_[1],vt=_[2],$t=_[3];break}if(P.kind===o.ImageKind.GRAYSCALE_1BPP){let Kt=xe.byteLength,_t=new Uint32Array(Se.buffer,0,Se.byteLength>>2),nr=_t.length,vn=U+7>>3,Cr=4294967295,Ot=o.IsLittleEndianCached.value?4278190080:255;for($t&&$t[0]===255&&$t[255]===0&&([Cr,Ot]=[Ot,Cr]),je=0;je<H;je++){for(Le=je<$?m:M,le=0,ze=0;ze<Le;ze++){let Wt=Kt-ae,Et=0,zt=Wt>vn?U:Wt*8-7,Ar=zt&~7,yn=0,we=0;for(;Et<Ar;Et+=8)we=xe[ae++],_t[le++]=we&128?Cr:Ot,_t[le++]=we&64?Cr:Ot,_t[le++]=we&32?Cr:Ot,_t[le++]=we&16?Cr:Ot,_t[le++]=we&8?Cr:Ot,_t[le++]=we&4?Cr:Ot,_t[le++]=we&2?Cr:Ot,_t[le++]=we&1?Cr:Ot;for(;Et<zt;Et++)yn===0&&(we=xe[ae++],yn=128),_t[le++]=we&yn?Cr:Ot,yn>>=1}for(;le<nr;)_t[le++]=0;Z.putImageData(Y,0,je*m)}}else if(P.kind===o.ImageKind.RGBA_32BPP){let Kt=!!(mt||ot||vt);for(ze=0,dt=U*m*4,je=0;je<$;je++){if(Se.set(xe.subarray(ae,ae+dt)),ae+=dt,Kt)for(let _t=0;_t<dt;_t+=4)mt&&(Se[_t+0]=mt[Se[_t+0]]),ot&&(Se[_t+1]=ot[Se[_t+1]]),vt&&(Se[_t+2]=vt[Se[_t+2]]);Z.putImageData(Y,0,ze),ze+=m}if(je<H){if(dt=U*M*4,Se.set(xe.subarray(ae,ae+dt)),Kt)for(let _t=0;_t<dt;_t+=4)mt&&(Se[_t+0]=mt[Se[_t+0]]),ot&&(Se[_t+1]=ot[Se[_t+1]]),vt&&(Se[_t+2]=vt[Se[_t+2]]);Z.putImageData(Y,0,ze)}}else if(P.kind===o.ImageKind.RGB_24BPP){let Kt=!!(mt||ot||vt);for(Le=m,dt=U*Le,je=0;je<H;je++){for(je>=$&&(Le=M,dt=U*Le),le=0,ze=dt;ze--;)Se[le++]=xe[ae++],Se[le++]=xe[ae++],Se[le++]=xe[ae++],Se[le++]=255;if(Kt)for(let _t=0;_t<le;_t+=4)mt&&(Se[_t+0]=mt[Se[_t+0]]),ot&&(Se[_t+1]=ot[Se[_t+1]]),vt&&(Se[_t+2]=vt[Se[_t+2]]);Z.putImageData(Y,0,je*m)}}else throw new Error(`bad image kind: ${P.kind}`)}function w(Z,P){let _=P.height,I=P.width,U=_%m,M=(_-U)/m,$=U===0?M:M+1,H=Z.createImageData(I,m),Y=0,ae=P.data,le=H.data;for(let xe=0;xe<$;xe++){let Se=xe<M?m:U,je=3;for(let ze=0;ze<Se;ze++){let Le,dt=0;for(let mt=0;mt<I;mt++)dt||(Le=ae[Y++],dt=128),le[je]=Le&dt?0:255,je+=4,dt>>=1}Z.putImageData(H,0,xe*m)}}function k(Z,P){let _=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let I=0,U=_.length;I<U;I++){let M=_[I];Z[M]!==void 0&&(P[M]=Z[M])}Z.setLineDash!==void 0&&(P.setLineDash(Z.getLineDash()),P.lineDashOffset=Z.lineDashOffset)}function T(Z){Z.strokeStyle="#000000",Z.fillStyle="#000000",Z.fillRule="nonzero",Z.globalAlpha=1,Z.lineWidth=1,Z.lineCap="butt",Z.lineJoin="miter",Z.miterLimit=10,Z.globalCompositeOperation="source-over",Z.font="10px sans-serif",Z.setLineDash!==void 0&&(Z.setLineDash([]),Z.lineDashOffset=0)}function A(Z,P,_,I){let U=Z.length;for(let M=3;M<U;M+=4){let $=Z[M];if($===0)Z[M-3]=P,Z[M-2]=_,Z[M-1]=I;else if($<255){let H=255-$;Z[M-3]=Z[M-3]*$+P*H>>8,Z[M-2]=Z[M-2]*$+_*H>>8,Z[M-1]=Z[M-1]*$+I*H>>8}}}function E(Z,P,_){let I=Z.length,U=1/255;for(let M=3;M<I;M+=4){let $=_?_[Z[M]]:Z[M];P[M]=P[M]*$*U|0}}function F(Z,P,_){let I=Z.length;for(let U=3;U<I;U+=4){let M=Z[U-3]*77+Z[U-2]*152+Z[U-1]*28;P[U]=_?P[U]*_[M>>8]>>8:P[U]*M>>16}}function z(Z,P,_,I,U,M,$){let H=!!M,Y=H?M[0]:0,ae=H?M[1]:0,le=H?M[2]:0,xe;U==="Luminosity"?xe=F:xe=E;let je=Math.min(I,Math.ceil(1048576/_));for(let ze=0;ze<I;ze+=je){let Le=Math.min(je,I-ze),dt=Z.getImageData(0,ze,_,Le),mt=P.getImageData(0,ze,_,Le);H&&A(dt.data,Y,ae,le),xe(dt.data,mt.data,$),Z.putImageData(mt,0,ze)}}function L(Z,P,_){let I=P.canvas,U=P.context;Z.setTransform(P.scaleX,0,0,P.scaleY,P.offsetX,P.offsetY),z(U,_,I.width,I.height,P.subtype,P.backdrop,P.transferMap),Z.drawImage(I,0,0)}function R(Z,P){let _=o.Util.singularValueDecompose2dScale(Z);_[0]=Math.fround(_[0]),_[1]=Math.fround(_[1]);let I=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return P!==void 0?P:_[0]<=I||_[1]<=I}let N=["butt","round","square"],V=["miter","round","bevel"],W={},me={};class ie{constructor(P,_,I,U,M,$){this.ctx=P,this.current=new b,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=_,this.objs=I,this.canvasFactory=U,this.imageLayer=M,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=$,this.cachedCanvases=new y(this.canvasFactory),this.cachedCanvasPatterns=new S(d),this.cachedPatterns=new Map,P&&v(P),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:P,viewport:_,transparency:I=!1,background:U=null}){let M=this.ctx.canvas.width,$=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=U||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,M,$),this.ctx.restore(),I){let H=this.cachedCanvases.getCanvas("transparent",M,$,!0);this.compositeCtx=this.ctx,this.transparentCanvas=H.canvas,this.ctx=H.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),T(this.ctx),P&&this.ctx.transform.apply(this.ctx,P),this.ctx.transform.apply(this.ctx,_.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(P,_,I,U){let M=P.argsArray,$=P.fnArray,H=_||0,Y=M.length;if(Y===H)return H;let ae=Y-H>p&&typeof I=="function",le=ae?Date.now()+u:0,xe=0,Se=this.commonObjs,je=this.objs,ze;for(;;){if(U!==void 0&&H===U.nextBreakPoint)return U.breakIt(H,I),H;if(ze=$[H],ze!==o.OPS.dependency)this[ze].apply(this,M[H]);else for(let Le of M[H]){let dt=Le.startsWith("g_")?Se:je;if(!dt.has(Le))return dt.get(Le,I),H}if(H++,H===Y)return H;if(ae&&++xe>p){if(Date.now()>le)return I(),H;xe=0}}}endDrawing(){for(;this.stateStack.length||this.current.activeSMask!==null;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedCanvasPatterns.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(P,_){let I=P.width,U=P.height,M=Math.max(Math.hypot(_[0],_[1]),1),$=Math.max(Math.hypot(_[2],_[3]),1),H=I,Y=U,ae="prescale1",le,xe;for(;M>2&&H>1||$>2&&Y>1;){let Se=H,je=Y;M>2&&H>1&&(Se=Math.ceil(H/2),M/=H/Se),$>2&&Y>1&&(je=Math.ceil(Y/2),$/=Y/je),le=this.cachedCanvases.getCanvas(ae,Se,je),xe=le.context,xe.clearRect(0,0,Se,je),xe.drawImage(P,0,0,H,Y,0,0,Se,je),P=le.canvas,H=Se,Y=je,ae=ae==="prescale1"?"prescale2":"prescale1"}return{img:P,paintWidth:H,paintHeight:Y}}_createMaskCanvas(P){let _=this.ctx,I=P.width,U=P.height,M=this.current.fillColor,$=this.current.patternFill,H=this.cachedCanvases.getCanvas("maskCanvas",I,U),Y=H.context;w(Y,P);let ae=_.mozCurrentTransform,le=o.Util.transform(ae,[1/I,0,0,-1/U,0,0]);le=o.Util.transform(le,[1,0,0,1,0,-U]);let xe=o.Util.applyTransform([0,0],le),Se=o.Util.applyTransform([I,U],le),je=o.Util.normalizeRect([xe[0],xe[1],Se[0],Se[1]]),ze=Math.ceil(je[2]-je[0]),Le=Math.ceil(je[3]-je[1]),dt=this.cachedCanvases.getCanvas("fillCanvas",ze,Le,!0),mt=dt.context,ot=Math.min(xe[0],Se[0]),vt=Math.min(xe[1],Se[1]);mt.translate(-ot,-vt),mt.transform.apply(mt,le);let $t=this._scaleImage(H.canvas,mt.mozCurrentTransformInverse);mt.imageSmoothingEnabled=R(mt.mozCurrentTransform,P.interpolate),mt.drawImage($t.img,0,0,$t.img.width,$t.img.height,0,0,I,U),mt.globalCompositeOperation="source-in";let Kt=o.Util.transform(mt.mozCurrentTransformInverse,[1,0,0,1,-ot,-vt]);return mt.fillStyle=$?M.getPattern(_,this,Kt,!1):M,mt.fillRect(0,0,I,U),{canvas:dt.canvas,offsetX:Math.round(ot),offsetY:Math.round(vt)}}setLineWidth(P){this.current.lineWidth=P,this.ctx.lineWidth=P}setLineCap(P){this.ctx.lineCap=N[P]}setLineJoin(P){this.ctx.lineJoin=V[P]}setMiterLimit(P){this.ctx.miterLimit=P}setDash(P,_){let I=this.ctx;I.setLineDash!==void 0&&(I.setLineDash(P),I.lineDashOffset=_)}setRenderingIntent(P){}setFlatness(P){}setGState(P){for(let _=0,I=P.length;_<I;_++){let U=P[_],M=U[0],$=U[1];switch(M){case"LW":this.setLineWidth($);break;case"LC":this.setLineCap($);break;case"LJ":this.setLineJoin($);break;case"ML":this.setMiterLimit($);break;case"D":this.setDash($[0],$[1]);break;case"RI":this.setRenderingIntent($);break;case"FL":this.setFlatness($);break;case"Font":this.setFont($[0],$[1]);break;case"CA":this.current.strokeAlpha=U[1];break;case"ca":this.current.fillAlpha=U[1],this.ctx.globalAlpha=U[1];break;case"BM":this.ctx.globalCompositeOperation=$;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=$?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=$}}}beginSMaskGroup(){let P=this.current.activeSMask,_=P.canvas.width,I=P.canvas.height,U="smaskGroupAt"+this.groupLevel,M=this.cachedCanvases.getCanvas(U,_,I,!0),$=this.ctx,H=$.mozCurrentTransform;this.ctx.save();let Y=M.context;Y.scale(1/P.scaleX,1/P.scaleY),Y.translate(-P.offsetX,-P.offsetY),Y.transform.apply(Y,H),P.startTransformInverse=Y.mozCurrentTransformInverse,k($,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push($),this.groupLevel++}suspendSMaskGroup(){let P=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),L(this.ctx,this.current.activeSMask,P),this.ctx.restore(),this.ctx.save(),k(P,this.ctx),this.current.resumeSMaskCtx=P;let _=o.Util.transform(this.current.activeSMask.startTransformInverse,P.mozCurrentTransform);this.ctx.transform.apply(this.ctx,_),P.save(),P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,P.canvas.width,P.canvas.height),P.restore()}resumeSMaskGroup(){let P=this.current.resumeSMaskCtx,_=this.ctx;this.ctx=P,this.groupStack.push(_),this.groupLevel++}endSMaskGroup(){let P=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),L(this.ctx,this.current.activeSMask,P),this.ctx.restore(),k(P,this.ctx);let _=o.Util.transform(this.current.activeSMask.startTransformInverse,P.mozCurrentTransform);this.ctx.transform.apply(this.ctx,_)}save(){this.ctx.save();let P=this.current;this.stateStack.push(P),this.current=P.clone(),this.current.resumeSMaskCtx=null}restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null}transform(P,_,I,U,M,$){this.ctx.transform(P,_,I,U,M,$),this._cachedGetSinglePixelWidth=null}constructPath(P,_){let I=this.ctx,U=this.current,M=U.x,$=U.y;for(let H=0,Y=0,ae=P.length;H<ae;H++)switch(P[H]|0){case o.OPS.rectangle:M=_[Y++],$=_[Y++];let le=_[Y++],xe=_[Y++],Se=M+le,je=$+xe;I.moveTo(M,$),le===0||xe===0?I.lineTo(Se,je):(I.lineTo(Se,$),I.lineTo(Se,je),I.lineTo(M,je)),I.closePath();break;case o.OPS.moveTo:M=_[Y++],$=_[Y++],I.moveTo(M,$);break;case o.OPS.lineTo:M=_[Y++],$=_[Y++],I.lineTo(M,$);break;case o.OPS.curveTo:M=_[Y+4],$=_[Y+5],I.bezierCurveTo(_[Y],_[Y+1],_[Y+2],_[Y+3],M,$),Y+=6;break;case o.OPS.curveTo2:I.bezierCurveTo(M,$,_[Y],_[Y+1],_[Y+2],_[Y+3]),M=_[Y+2],$=_[Y+3],Y+=4;break;case o.OPS.curveTo3:M=_[Y+2],$=_[Y+3],I.bezierCurveTo(_[Y],_[Y+1],M,$,M,$),Y+=4;break;case o.OPS.closePath:I.closePath();break}U.setCurrentPoint(M,$)}closePath(){this.ctx.closePath()}stroke(P){P=typeof P!="undefined"?P:!0;let _=this.ctx,I=this.current.strokeColor;if(_.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof I=="object"&&(I==null?void 0:I.getPattern)){let U=this.getSinglePixelWidth();_.save(),_.strokeStyle=I.getPattern(_,this,_.mozCurrentTransformInverse),_.lineWidth=Math.max(U,this.current.lineWidth),_.stroke(),_.restore()}else{let U=this.getSinglePixelWidth();U<0&&-U>=this.current.lineWidth?(_.save(),_.resetTransform(),_.lineWidth=Math.round(this._combinedScaleFactor),_.stroke(),_.restore()):(_.lineWidth=Math.max(U,this.current.lineWidth),_.stroke())}P&&this.consumePath(),_.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(P){P=typeof P!="undefined"?P:!0;let _=this.ctx,I=this.current.fillColor,U=this.current.patternFill,M=!1;U&&(_.save(),_.fillStyle=I.getPattern(_,this,_.mozCurrentTransformInverse),M=!0),this.contentVisible&&(this.pendingEOFill?(_.fill("evenodd"),this.pendingEOFill=!1):_.fill()),M&&_.restore(),P&&this.consumePath()}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=W}eoClip(){this.pendingClip=me}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let P=this.pendingTextPaths,_=this.ctx;if(P===void 0){_.beginPath();return}_.save(),_.beginPath();for(let I=0;I<P.length;I++){let U=P[I];_.setTransform.apply(_,U.transform),_.translate(U.x,U.y),U.addToPath(_,U.fontSize)}_.restore(),_.clip(),_.beginPath(),delete this.pendingTextPaths}setCharSpacing(P){this.current.charSpacing=P}setWordSpacing(P){this.current.wordSpacing=P}setHScale(P){this.current.textHScale=P/100}setLeading(P){this.current.leading=-P}setFont(P,_){let I=this.commonObjs.get(P),U=this.current;if(!I)throw new Error(`Can't find font for ${P}`);if(U.fontMatrix=I.fontMatrix||o.FONT_IDENTITY_MATRIX,(U.fontMatrix[0]===0||U.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+P),_<0?(_=-_,U.fontDirection=-1):U.fontDirection=1,this.current.font=I,this.current.fontSize=_,I.isType3Font)return;let M=I.loadedName||"sans-serif",$="normal";I.black?$="900":I.bold&&($="bold");let H=I.italic?"italic":"normal",Y=`"${M}", ${I.fallbackName}`,ae=_;_<a?ae=a:_>l&&(ae=l),this.current.fontSizeScale=_/ae,this.ctx.font=`${H} ${$} ${ae}px ${Y}`}setTextRenderingMode(P){this.current.textRenderingMode=P}setTextRise(P){this.current.textRise=P}moveText(P,_){this.current.x=this.current.lineX+=P,this.current.y=this.current.lineY+=_}setLeadingMoveText(P,_){this.setLeading(-_),this.moveText(P,_)}setTextMatrix(P,_,I,U,M,$){this.current.textMatrix=[P,_,I,U,M,$],this.current.textMatrixScale=Math.hypot(P,_),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(P,_,I,U,M){let $=this.ctx,H=this.current,Y=H.font,ae=H.textRenderingMode,le=H.fontSize/H.fontSizeScale,xe=ae&o.TextRenderingMode.FILL_STROKE_MASK,Se=!!(ae&o.TextRenderingMode.ADD_TO_PATH_FLAG),je=H.patternFill&&!Y.missingFile,ze;(Y.disableFontFace||Se||je)&&(ze=Y.getPathGenerator(this.commonObjs,P)),Y.disableFontFace||je?($.save(),$.translate(_,I),$.beginPath(),ze($,le),U&&$.setTransform.apply($,U),(xe===o.TextRenderingMode.FILL||xe===o.TextRenderingMode.FILL_STROKE)&&$.fill(),(xe===o.TextRenderingMode.STROKE||xe===o.TextRenderingMode.FILL_STROKE)&&(M&&($.resetTransform(),$.lineWidth=Math.round(this._combinedScaleFactor)),$.stroke()),$.restore()):((xe===o.TextRenderingMode.FILL||xe===o.TextRenderingMode.FILL_STROKE)&&$.fillText(P,_,I),(xe===o.TextRenderingMode.STROKE||xe===o.TextRenderingMode.FILL_STROKE)&&(M?($.save(),$.moveTo(_,I),$.resetTransform(),$.lineWidth=Math.round(this._combinedScaleFactor),$.strokeText(P,0,0),$.restore()):$.strokeText(P,_,I))),Se&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:$.mozCurrentTransform,x:_,y:I,fontSize:le,addToPath:ze})}get isFontSubpixelAAEnabled(){let{context:P}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);P.scale(1.5,1),P.fillText("I",0,10);let _=P.getImageData(0,0,10,10).data,I=!1;for(let U=3;U<_.length;U+=4)if(_[U]>0&&_[U]<255){I=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",I)}showText(P){let _=this.current,I=_.font;if(I.isType3Font)return this.showType3Text(P);let U=_.fontSize;if(U===0)return;let M=this.ctx,$=_.fontSizeScale,H=_.charSpacing,Y=_.wordSpacing,ae=_.fontDirection,le=_.textHScale*ae,xe=P.length,Se=I.vertical,je=Se?1:-1,ze=I.defaultVMetrics,Le=U*_.fontMatrix[0],dt=_.textRenderingMode===o.TextRenderingMode.FILL&&!I.disableFontFace&&!_.patternFill;M.save();let mt;if(_.patternFill){M.save();let nr=_.fillColor.getPattern(M,this,M.mozCurrentTransformInverse);mt=M.mozCurrentTransform,M.restore(),M.fillStyle=nr}M.transform.apply(M,_.textMatrix),M.translate(_.x,_.y+_.textRise),ae>0?M.scale(le,-1):M.scale(le,1);let ot=_.lineWidth,vt=!1,$t=_.textMatrixScale;if($t===0||ot===0){let nr=_.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(nr===o.TextRenderingMode.STROKE||nr===o.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,ot=this.getSinglePixelWidth(),vt=ot<0)}else ot/=$t;$!==1&&(M.scale($,$),ot/=$),M.lineWidth=ot;let Kt=0,_t;for(_t=0;_t<xe;++_t){let nr=P[_t];if((0,o.isNum)(nr)){Kt+=je*nr*U/1e3;continue}let vn=!1,Cr=(nr.isSpace?Y:0)+H,Ot=nr.fontChar,Wt=nr.accent,Et,zt,Ar=nr.width;if(Se){let we=nr.vmetric||ze,ve=-(nr.vmetric?we[1]:Ar*.5)*Le,Me=we[2]*Le;Ar=we?-we[0]:Ar,Et=ve/$,zt=(Kt+Me)/$}else Et=Kt/$,zt=0;if(I.remeasure&&Ar>0){let we=M.measureText(Ot).width*1e3/U*$;if(Ar<we&&this.isFontSubpixelAAEnabled){let ve=Ar/we;vn=!0,M.save(),M.scale(ve,1),Et/=ve}else Ar!==we&&(Et+=(Ar-we)/2e3*U/$)}if(this.contentVisible&&(nr.isInFont||I.missingFile)){if(dt&&!Wt)M.fillText(Ot,Et,zt);else if(this.paintChar(Ot,Et,zt,mt,vt),Wt){let we=Et+U*Wt.offset.x/$,ve=zt-U*Wt.offset.y/$;this.paintChar(Wt.fontChar,we,ve,mt,vt)}}let yn;Se?yn=Ar*Le-Cr*ae:yn=Ar*Le+Cr*ae,Kt+=yn,vn&&M.restore()}Se?_.y-=Kt:_.x+=Kt*le,M.restore()}showType3Text(P){let _=this.ctx,I=this.current,U=I.font,M=I.fontSize,$=I.fontDirection,H=U.vertical?1:-1,Y=I.charSpacing,ae=I.wordSpacing,le=I.textHScale*$,xe=I.fontMatrix||o.FONT_IDENTITY_MATRIX,Se=P.length,je=I.textRenderingMode===o.TextRenderingMode.INVISIBLE,ze,Le,dt,mt;if(!(je||M===0)){for(this._cachedGetSinglePixelWidth=null,_.save(),_.transform.apply(_,I.textMatrix),_.translate(I.x,I.y),_.scale(le,$),ze=0;ze<Se;++ze){if(Le=P[ze],(0,o.isNum)(Le)){mt=H*Le*M/1e3,this.ctx.translate(mt,0),I.x+=mt*le;continue}let ot=(Le.isSpace?ae:0)+Y,vt=U.charProcOperatorList[Le.operatorListId];if(!vt){(0,o.warn)(`Type3 character "${Le.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Le,this.save(),_.scale(M,M),_.transform.apply(_,xe),this.executeOperatorList(vt),this.restore()),dt=o.Util.applyTransform([Le.width,0],xe)[0]*M+ot,_.translate(dt,0),I.x+=dt*le}_.restore(),this.processingType3=null}}setCharWidth(P,_){}setCharWidthAndBounds(P,_,I,U,M,$){this.ctx.rect(I,U,M-I,$-U),this.clip(),this.endPath()}getColorN_Pattern(P){let _;if(P[0]==="TilingPattern"){let I=P[1],U=this.baseTransform||this.ctx.mozCurrentTransform.slice(),M={createCanvasGraphics:$=>new ie($,this.commonObjs,this.objs,this.canvasFactory)};_=new i.TilingPattern(P,I,this.ctx,M,U)}else _=this._getPattern(P[1],P[2]);return _}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(P,_,I){let U=o.Util.makeHexColor(P,_,I);this.ctx.strokeStyle=U,this.current.strokeColor=U}setFillRGBColor(P,_,I){let U=o.Util.makeHexColor(P,_,I);this.ctx.fillStyle=U,this.current.fillColor=U,this.current.patternFill=!1}_getPattern(P,_=null){let I;return this.cachedPatterns.has(P)?I=this.cachedPatterns.get(P):(I=(0,i.getShadingPattern)(this.objs.get(P),this.cachedCanvasPatterns),this.cachedPatterns.set(P,I)),_&&(I.matrix=_),I}shadingFill(P){if(!this.contentVisible)return;let _=this.ctx;this.save();let I=this._getPattern(P);_.fillStyle=I.getPattern(_,this,_.mozCurrentTransformInverse,!0);let U=_.mozCurrentTransformInverse;if(U){let M=_.canvas,$=M.width,H=M.height,Y=o.Util.applyTransform([0,0],U),ae=o.Util.applyTransform([0,H],U),le=o.Util.applyTransform([$,0],U),xe=o.Util.applyTransform([$,H],U),Se=Math.min(Y[0],ae[0],le[0],xe[0]),je=Math.min(Y[1],ae[1],le[1],xe[1]),ze=Math.max(Y[0],ae[0],le[0],xe[0]),Le=Math.max(Y[1],ae[1],le[1],xe[1]);this.ctx.fillRect(Se,je,ze-Se,Le-je)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(P,_){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(P)&&P.length===6&&this.transform.apply(this,P),this.baseTransform=this.ctx.mozCurrentTransform,_)){let I=_[2]-_[0],U=_[3]-_[1];this.ctx.rect(_[0],_[1],I,U),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(P){if(!this.contentVisible)return;this.save();let _=this.ctx;P.isolated||(0,o.info)("TODO: Support non-isolated groups."),P.knockout&&(0,o.warn)("Knockout groups not supported.");let I=_.mozCurrentTransform;if(P.matrix&&_.transform.apply(_,P.matrix),!P.bbox)throw new Error("Bounding box is required.");let U=o.Util.getAxialAlignedBoundingBox(P.bbox,_.mozCurrentTransform),M=[0,0,_.canvas.width,_.canvas.height];U=o.Util.intersect(U,M)||[0,0,0,0];let $=Math.floor(U[0]),H=Math.floor(U[1]),Y=Math.max(Math.ceil(U[2])-$,1),ae=Math.max(Math.ceil(U[3])-H,1),le=1,xe=1;Y>c&&(le=Y/c,Y=c),ae>c&&(xe=ae/c,ae=c);let Se="groupAt"+this.groupLevel;P.smask&&(Se+="_smask_"+this.smaskCounter++%2);let je=this.cachedCanvases.getCanvas(Se,Y,ae,!0),ze=je.context;ze.scale(1/le,1/xe),ze.translate(-$,-H),ze.transform.apply(ze,I),P.smask?this.smaskStack.push({canvas:je.canvas,context:ze,offsetX:$,offsetY:H,scaleX:le,scaleY:xe,subtype:P.smask.subtype,backdrop:P.smask.backdrop,transferMap:P.smask.transferMap||null,startTransformInverse:null}):(_.setTransform(1,0,0,1,0,0),_.translate($,H),_.scale(le,xe)),k(_,ze),this.ctx=ze,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(_),this.groupLevel++,this.current.activeSMask=null}endGroup(P){if(!this.contentVisible)return;this.groupLevel--;let _=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled=!1,P.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(_.canvas,0,0),this.restore()}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(P,_,I,U){if(this.save(),T(this.ctx),this.current=new b,Array.isArray(_)&&_.length===4){let M=_[2]-_[0],$=_[3]-_[1];this.ctx.rect(_[0],_[1],M,$),this.clip(),this.endPath()}this.transform.apply(this,I),this.transform.apply(this,U)}endAnnotation(){this.restore()}paintImageMaskXObject(P){if(!this.contentVisible)return;let _=this.ctx,I=P.width,U=P.height,M=this.processingType3;if(h&&M&&M.compiled===void 0&&(I<=f&&U<=f?M.compiled=C({data:P.data,width:I,height:U}):M.compiled=null),M==null?void 0:M.compiled){M.compiled(_);return}let $=this._createMaskCanvas(P),H=$.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(H,$.offsetX,$.offsetY),_.restore()}paintImageMaskXObjectRepeat(P,_,I=0,U=0,M,$){if(!this.contentVisible)return;let H=this.ctx;H.save();let Y=H.mozCurrentTransform;H.transform(_,I,U,M,0,0);let ae=this._createMaskCanvas(P);H.setTransform(1,0,0,1,0,0);for(let le=0,xe=$.length;le<xe;le+=2){let Se=o.Util.transform(Y,[_,I,U,M,$[le],$[le+1]]),[je,ze]=o.Util.applyTransform([0,0],Se);H.drawImage(ae.canvas,je,ze)}H.restore()}paintImageMaskXObjectGroup(P){if(!this.contentVisible)return;let _=this.ctx,I=this.current.fillColor,U=this.current.patternFill;for(let M=0,$=P.length;M<$;M++){let H=P[M],Y=H.width,ae=H.height,le=this.cachedCanvases.getCanvas("maskCanvas",Y,ae),xe=le.context;xe.save(),w(xe,H),xe.globalCompositeOperation="source-in",xe.fillStyle=U?I.getPattern(xe,this,_.mozCurrentTransformInverse,!1):I,xe.fillRect(0,0,Y,ae),xe.restore(),_.save(),_.transform.apply(_,H.transform),_.scale(1,-1),_.drawImage(le.canvas,0,0,Y,ae,0,-1,1,1),_.restore()}}paintImageXObject(P){if(!this.contentVisible)return;let _=P.startsWith("g_")?this.commonObjs.get(P):this.objs.get(P);if(!_){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(_)}paintImageXObjectRepeat(P,_,I,U){if(!this.contentVisible)return;let M=P.startsWith("g_")?this.commonObjs.get(P):this.objs.get(P);if(!M){(0,o.warn)("Dependent image isn't ready yet");return}let $=M.width,H=M.height,Y=[];for(let ae=0,le=U.length;ae<le;ae+=2)Y.push({transform:[_,0,0,I,U[ae],U[ae+1]],x:0,y:0,w:$,h:H});this.paintInlineImageXObjectGroup(M,Y)}paintInlineImageXObject(P){if(!this.contentVisible)return;let _=P.width,I=P.height,U=this.ctx;this.save(),U.scale(1/_,-1/I);let M;if(typeof HTMLElement=="function"&&P instanceof HTMLElement||!P.data)M=P;else{let H=this.cachedCanvases.getCanvas("inlineImage",_,I),Y=H.context;x(Y,P,this.current.transferMaps),M=H.canvas}let $=this._scaleImage(M,U.mozCurrentTransformInverse);if(U.imageSmoothingEnabled=R(U.mozCurrentTransform,P.interpolate),U.drawImage($.img,0,0,$.paintWidth,$.paintHeight,0,-I,_,I),this.imageLayer){let H=this.getCanvasPosition(0,-I);this.imageLayer.appendImage({imgData:P,left:H[0],top:H[1],width:_/U.mozCurrentTransformInverse[0],height:I/U.mozCurrentTransformInverse[3]})}this.restore()}paintInlineImageXObjectGroup(P,_){if(!this.contentVisible)return;let I=this.ctx,U=P.width,M=P.height,$=this.cachedCanvases.getCanvas("inlineImage",U,M),H=$.context;x(H,P,this.current.transferMaps);for(let Y=0,ae=_.length;Y<ae;Y++){let le=_[Y];if(I.save(),I.transform.apply(I,le.transform),I.scale(1,-1),I.drawImage($.canvas,le.x,le.y,le.w,le.h,0,-1,1,1),this.imageLayer){let xe=this.getCanvasPosition(le.x,le.y);this.imageLayer.appendImage({imgData:P,left:xe[0],top:xe[1],width:U,height:M})}I.restore()}}paintSolidColorImageMask(){!this.contentVisible||this.ctx.fillRect(0,0,1,1)}markPoint(P){}markPointProps(P,_){}beginMarkedContent(P){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(P,_){P==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(_)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(){let P=this.ctx;this.pendingClip&&(this.pendingClip===me?P.clip("evenodd"):P.clip(),this.pendingClip=null),P.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){let P=this.ctx.mozCurrentTransform,_=Math.abs(P[0]*P[3]-P[2]*P[1]),I=P[0]**2+P[2]**2,U=P[1]**2+P[3]**2,M=Math.sqrt(Math.max(I,U))/_;I!==U&&this._combinedScaleFactor*M>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*M):_>Number.EPSILON?this._cachedGetSinglePixelWidth=M:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(P,_){let I=this.ctx.mozCurrentTransform;return[I[0]*P+I[2]*_+I[4],I[1]*P+I[3]*_+I[5]]}isContentVisible(){for(let P=this.markedContentStack.length-1;P>=0;P--)if(!this.markedContentStack[P].visible)return!1;return!0}}e.CanvasGraphics=ie;for(let Z in o.OPS)ie.prototype[Z]!==void 0&&(ie.prototype[o.OPS[Z]]=ie.prototype[Z])},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getShadingPattern=p,e.TilingPattern=void 0;var o=r(2);function i(m,g){if(!g||typeof Path2D=="undefined")return;let v=g[2]-g[0],y=g[3]-g[1],S=new Path2D;S.rect(g[0],g[1],v,y),m.clip(S)}class s{constructor(){this.constructor===s&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class a extends s{constructor(g,v){super();this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null,this.cachedCanvasPatterns=v}_createGradient(g){let v;this._type==="axial"?v=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(v=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let y of this._colorStops)v.addColorStop(y[0],y[1]);return v}getPattern(g,v,y,S=!1){let C;if(S)i(g,this._bbox),C=this._createGradient(g);else if(this.cachedCanvasPatterns.has(this))C=this.cachedCanvasPatterns.get(this);else{let b=v.cachedCanvases.getCanvas("pattern",v.ctx.canvas.width,v.ctx.canvas.height,!0),x=b.context;x.clearRect(0,0,x.canvas.width,x.canvas.height),x.beginPath(),x.rect(0,0,x.canvas.width,x.canvas.height),x.setTransform.apply(x,v.baseTransform),this.matrix&&x.transform.apply(x,this.matrix),i(x,this._bbox),x.fillStyle=this._createGradient(x),x.fill(),C=g.createPattern(b.canvas,"repeat"),this.cachedCanvasPatterns.set(this,C)}if(!S){let b=new DOMMatrix(y);try{C.setTransform(b)}catch(x){(0,o.warn)(`RadialAxialShadingPattern.getPattern: "${x==null?void 0:x.message}".`)}}return C}}function l(m,g,v,y,S,C,b,x){let w=g.coords,k=g.colors,T=m.data,A=m.width*4,E;w[v+1]>w[y+1]&&(E=v,v=y,y=E,E=C,C=b,b=E),w[y+1]>w[S+1]&&(E=y,y=S,S=E,E=b,b=x,x=E),w[v+1]>w[y+1]&&(E=v,v=y,y=E,E=C,C=b,b=E);let F=(w[v]+g.offsetX)*g.scaleX,z=(w[v+1]+g.offsetY)*g.scaleY,L=(w[y]+g.offsetX)*g.scaleX,R=(w[y+1]+g.offsetY)*g.scaleY,N=(w[S]+g.offsetX)*g.scaleX,V=(w[S+1]+g.offsetY)*g.scaleY;if(z>=V)return;let W=k[C],me=k[C+1],ie=k[C+2],Z=k[b],P=k[b+1],_=k[b+2],I=k[x],U=k[x+1],M=k[x+2],$=Math.round(z),H=Math.round(V),Y,ae,le,xe,Se,je,ze,Le;for(let dt=$;dt<=H;dt++){if(dt<R){let Kt;dt<z?Kt=0:Kt=(z-dt)/(z-R),Y=F-(F-L)*Kt,ae=W-(W-Z)*Kt,le=me-(me-P)*Kt,xe=ie-(ie-_)*Kt}else{let Kt;dt>V?Kt=1:R===V?Kt=0:Kt=(R-dt)/(R-V),Y=L-(L-N)*Kt,ae=Z-(Z-I)*Kt,le=P-(P-U)*Kt,xe=_-(_-M)*Kt}let mt;dt<z?mt=0:dt>V?mt=1:mt=(z-dt)/(z-V),Se=F-(F-N)*mt,je=W-(W-I)*mt,ze=me-(me-U)*mt,Le=ie-(ie-M)*mt;let ot=Math.round(Math.min(Y,Se)),vt=Math.round(Math.max(Y,Se)),$t=A*dt+ot*4;for(let Kt=ot;Kt<=vt;Kt++)mt=(Y-Kt)/(Y-Se),mt<0?mt=0:mt>1&&(mt=1),T[$t++]=ae-(ae-je)*mt|0,T[$t++]=le-(le-ze)*mt|0,T[$t++]=xe-(xe-Le)*mt|0,T[$t++]=255}}function c(m,g,v){let y=g.coords,S=g.colors,C,b;switch(g.type){case"lattice":let x=g.verticesPerRow,w=Math.floor(y.length/x)-1,k=x-1;for(C=0;C<w;C++){let T=C*x;for(let A=0;A<k;A++,T++)l(m,v,y[T],y[T+1],y[T+x],S[T],S[T+1],S[T+x]),l(m,v,y[T+x+1],y[T+1],y[T+x],S[T+x+1],S[T+1],S[T+x])}break;case"triangles":for(C=0,b=y.length;C<b;C+=3)l(m,v,y[C],y[C+1],y[C+2],S[C],S[C+1],S[C+2]);break;default:throw new Error("illegal figure")}}class d extends s{constructor(g){super();this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[7],this._background=g[8],this.matrix=null}_createMeshCanvas(g,v,y){let S=1.1,C=3e3,b=2,x=Math.floor(this._bounds[0]),w=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-x,T=Math.ceil(this._bounds[3])-w,A=Math.min(Math.ceil(Math.abs(k*g[0]*S)),C),E=Math.min(Math.ceil(Math.abs(T*g[1]*S)),C),F=k/A,z=T/E,L={coords:this._coords,colors:this._colors,offsetX:-x,offsetY:-w,scaleX:1/F,scaleY:1/z},R=A+b*2,N=E+b*2,V=y.getCanvas("mesh",R,N,!1),W=V.context,me=W.createImageData(A,E);if(v){let Z=me.data;for(let P=0,_=Z.length;P<_;P+=4)Z[P]=v[0],Z[P+1]=v[1],Z[P+2]=v[2],Z[P+3]=255}for(let Z of this._figures)c(me,Z,L);return W.putImageData(me,b,b),{canvas:V.canvas,offsetX:x-b*F,offsetY:w-b*z,scaleX:F,scaleY:z}}getPattern(g,v,y,S=!1){i(g,this._bbox);let C;if(S)C=o.Util.singularValueDecompose2dScale(g.mozCurrentTransform);else if(C=o.Util.singularValueDecompose2dScale(v.baseTransform),this.matrix){let x=o.Util.singularValueDecompose2dScale(this.matrix);C=[C[0]*x[0],C[1]*x[1]]}let b=this._createMeshCanvas(C,S?null:this._background,v.cachedCanvases);return S||(g.setTransform.apply(g,v.baseTransform),this.matrix&&g.transform.apply(g,this.matrix)),g.translate(b.offsetX,b.offsetY),g.scale(b.scaleX,b.scaleY),g.createPattern(b.canvas,"no-repeat")}}class u extends s{getPattern(){return"hotpink"}}function p(m,g){switch(m[0]){case"RadialAxial":return new a(m,g);case"Mesh":return new d(m);case"Dummy":return new u}throw new Error(`Unknown IR type: ${m[0]}`)}let h={COLORED:1,UNCOLORED:2};class f{static get MAX_PATTERN_SIZE(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(g,v,y,S,C){this.operatorList=g[2],this.matrix=g[3]||[1,0,0,1,0,0],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.color=v,this.ctx=y,this.canvasGraphicsFactory=S,this.baseTransform=C}createPatternCanvas(g){let v=this.operatorList,y=this.bbox,S=this.xstep,C=this.ystep,b=this.paintType,x=this.tilingType,w=this.color,k=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+x);let T=y[0],A=y[1],E=y[2],F=y[3],z=o.Util.singularValueDecompose2dScale(this.matrix),L=o.Util.singularValueDecompose2dScale(this.baseTransform),R=[z[0]*L[0],z[1]*L[1]],N=this.getSizeAndScale(S,this.ctx.canvas.width,R[0]),V=this.getSizeAndScale(C,this.ctx.canvas.height,R[1]),W=g.cachedCanvases.getCanvas("pattern",N.size,V.size,!0),me=W.context,ie=k.createCanvasGraphics(me);ie.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(ie,b,w);let Z=T,P=A,_=E,I=F;return T<0&&(Z=0,_+=Math.abs(T)),A<0&&(P=0,I+=Math.abs(A)),me.translate(-(N.scale*Z),-(V.scale*P)),ie.transform(N.scale,0,0,V.scale,0,0),this.clipBbox(ie,Z,P,_,I),ie.baseTransform=ie.ctx.mozCurrentTransform.slice(),ie.executeOperatorList(v),ie.endDrawing(),{canvas:W.canvas,scaleX:N.scale,scaleY:V.scale,offsetX:Z,offsetY:P}}getSizeAndScale(g,v,y){g=Math.abs(g);let S=Math.max(f.MAX_PATTERN_SIZE,v),C=Math.ceil(g*y);return C>=S?C=S:y=C/g,{scale:y,size:C}}clipBbox(g,v,y,S,C){let b=S-v,x=C-y;g.ctx.rect(v,y,b,x),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,v,y){let S=g.ctx,C=g.current;switch(v){case h.COLORED:let b=this.ctx;S.fillStyle=b.fillStyle,S.strokeStyle=b.strokeStyle,C.fillColor=b.fillStyle,C.strokeColor=b.strokeStyle;break;case h.UNCOLORED:let x=o.Util.makeHexColor(y[0],y[1],y[2]);S.fillStyle=x,S.strokeStyle=x,C.fillColor=x,C.strokeColor=x;break;default:throw new o.FormatError(`Unsupported paint type: ${v}`)}}getPattern(g,v,y,S=!1){let C=y;S||(C=o.Util.transform(C,v.baseTransform),this.matrix&&(C=o.Util.transform(C,this.matrix)));let b=this.createPatternCanvas(v),x=new DOMMatrix(C);x=x.translate(b.offsetX,b.offsetY),x=x.scale(1/b.scaleX,1/b.scaleY);let w=g.createPattern(b.canvas,"repeat");try{w.setTransform(x)}catch(k){(0,o.warn)(`TilingPattern.getPattern: "${k==null?void 0:k.message}".`)}return w}}e.TilingPattern=f},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;let r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=r.workerPort===void 0?null:r.workerPort,r.workerSrc=r.workerSrc===void 0?"":r.workerSrc},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var o=r(2);let i={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(c){if(!(c instanceof Error||typeof c=="object"&&c!==null))return(0,o.warn)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c;switch(c.name){case"AbortException":return new o.AbortException(c.message);case"MissingPDFException":return new o.MissingPDFException(c.message);case"PasswordException":return new o.PasswordException(c.message,c.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new o.UnknownErrorException(c.message,c.details);default:return new o.UnknownErrorException(c.message,c.toString())}}class l{constructor(d,u,p){this.sourceName=d,this.targetName=u,this.comObj=p,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=h=>{let f=h.data;if(f.targetName!==this.sourceName)return;if(f.stream){this._processStreamMessage(f);return}if(f.callback){let g=f.callbackId,v=this.callbackCapabilities[g];if(!v)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],f.callback===i.DATA)v.resolve(f.data);else if(f.callback===i.ERROR)v.reject(a(f.reason));else throw new Error("Unexpected callback case");return}let m=this.actionHandler[f.action];if(!m)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){let g=this.sourceName,v=f.sourceName;new Promise(function(y){y(m(f.data))}).then(function(y){p.postMessage({sourceName:g,targetName:v,callback:i.DATA,callbackId:f.callbackId,data:y})},function(y){p.postMessage({sourceName:g,targetName:v,callback:i.ERROR,callbackId:f.callbackId,reason:a(y)})});return}if(f.streamId){this._createStreamSink(f);return}m(f.data)},p.addEventListener("message",this._onComObjOnMessage)}on(d,u){let p=this.actionHandler;if(p[d])throw new Error(`There is already an actionName called "${d}"`);p[d]=u}send(d,u,p){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:u},p)}sendWithPromise(d,u,p){let h=this.callbackId++,f=(0,o.createPromiseCapability)();this.callbackCapabilities[h]=f;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:h,data:u},p)}catch(m){f.reject(m)}return f.promise}sendWithStream(d,u,p,h){let f=this.streamId++,m=this.sourceName,g=this.targetName,v=this.comObj;return new ReadableStream({start:y=>{let S=(0,o.createPromiseCapability)();return this.streamControllers[f]={controller:y,startCall:S,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:m,targetName:g,action:d,streamId:f,data:u,desiredSize:y.desiredSize},h),S.promise},pull:y=>{let S=(0,o.createPromiseCapability)();return this.streamControllers[f].pullCall=S,v.postMessage({sourceName:m,targetName:g,stream:s.PULL,streamId:f,desiredSize:y.desiredSize}),S.promise},cancel:y=>{(0,o.assert)(y instanceof Error,"cancel must have a valid reason");let S=(0,o.createPromiseCapability)();return this.streamControllers[f].cancelCall=S,this.streamControllers[f].isClosed=!0,v.postMessage({sourceName:m,targetName:g,stream:s.CANCEL,streamId:f,reason:a(y)}),S.promise}},p)}_createStreamSink(d){let u=d.streamId,p=this.sourceName,h=d.sourceName,f=this.comObj,m=this,g=this.actionHandler[d.action],v={enqueue(y,S=1,C){if(this.isCancelled)return;let b=this.desiredSize;this.desiredSize-=S,b>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),m._postMessage({sourceName:p,targetName:h,stream:s.ENQUEUE,streamId:u,chunk:y},C)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:p,targetName:h,stream:s.CLOSE,streamId:u}),delete m.streamSinks[u])},error(y){(0,o.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:p,targetName:h,stream:s.ERROR,streamId:u,reason:a(y)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[u]=v,new Promise(function(y){y(g(d.data,v))}).then(function(){f.postMessage({sourceName:p,targetName:h,stream:s.START_COMPLETE,streamId:u,success:!0})},function(y){f.postMessage({sourceName:p,targetName:h,stream:s.START_COMPLETE,streamId:u,reason:a(y)})})}_processStreamMessage(d){let u=d.streamId,p=this.sourceName,h=d.sourceName,f=this.comObj,m=this.streamControllers[u],g=this.streamSinks[u];switch(d.stream){case s.START_COMPLETE:d.success?m.startCall.resolve():m.startCall.reject(a(d.reason));break;case s.PULL_COMPLETE:d.success?m.pullCall.resolve():m.pullCall.reject(a(d.reason));break;case s.PULL:if(!g){f.postMessage({sourceName:p,targetName:h,stream:s.PULL_COMPLETE,streamId:u,success:!0});break}g.desiredSize<=0&&d.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=d.desiredSize,new Promise(function(v){v(g.onPull&&g.onPull())}).then(function(){f.postMessage({sourceName:p,targetName:h,stream:s.PULL_COMPLETE,streamId:u,success:!0})},function(v){f.postMessage({sourceName:p,targetName:h,stream:s.PULL_COMPLETE,streamId:u,reason:a(v)})});break;case s.ENQUEUE:if((0,o.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(d.chunk);break;case s.CLOSE:if((0,o.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),this._deleteStreamController(m,u);break;case s.ERROR:(0,o.assert)(m,"error should have stream controller"),m.controller.error(a(d.reason)),this._deleteStreamController(m,u);break;case s.CANCEL_COMPLETE:d.success?m.cancelCall.resolve():m.cancelCall.reject(a(d.reason)),this._deleteStreamController(m,u);break;case s.CANCEL:if(!g)break;new Promise(function(v){v(g.onCancel&&g.onCancel(a(d.reason)))}).then(function(){f.postMessage({sourceName:p,targetName:h,stream:s.CANCEL_COMPLETE,streamId:u,success:!0})},function(v){f.postMessage({sourceName:p,targetName:h,stream:s.CANCEL_COMPLETE,streamId:u,reason:a(v)})}),g.sinkCapability.reject(a(d.reason)),g.isCancelled=!0,delete this.streamSinks[u];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(d,u){await Promise.allSettled([d.startCall&&d.startCall.promise,d.pullCall&&d.pullCall.promise,d.cancelCall&&d.cancelCall.promise]),delete this.streamControllers[u]}_postMessage(d,u){u&&this.postMessageTransfers?this.comObj.postMessage(d,u):this.comObj.postMessage(d)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=l},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=r(2);class i{constructor({parsedData:a,rawData:l}){this._metadataMap=a,this._data=l}getRaw(){return this._data}get(a){var l;return(l=this._metadataMap.get(a))!=null?l:null}getAll(){return(0,o.objectFromMap)(this._metadataMap)}has(a){return this._metadataMap.has(a)}}e.Metadata=i},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var o=r(2);class i{constructor(l,c){this.visible=!0,this.name=l,this.intent=c}}class s{constructor(l){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,l!==null){this.name=l.name,this.creator=l.creator,this._order=l.order;for(let c of l.groups)this._groups.set(c.id,new i(c.name,c.intent));if(l.baseState==="OFF")for(let c of this._groups)c.visible=!1;for(let c of l.on)this._groups.get(c).visible=!0;for(let c of l.off)this._groups.get(c).visible=!1}}_evaluateVisibilityExpression(l){let c=l.length;if(c<2)return!0;let d=l[0];for(let u=1;u<c;u++){let p=l[u],h;if(Array.isArray(p))h=this._evaluateVisibilityExpression(p);else if(this._groups.has(p))h=this._groups.get(p).visible;else return(0,o.warn)(`Optional content group not found: ${p}`),!0;switch(d){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return d==="And"}isVisible(l){if(this._groups.size===0)return!0;if(!l)return(0,o.warn)("Optional content group not defined."),!0;if(l.type==="OCG")return this._groups.has(l.id)?this._groups.get(l.id).visible:((0,o.warn)(`Optional content group not found: ${l.id}`),!0);if(l.type==="OCMD"){if(l.expression)return this._evaluateVisibilityExpression(l.expression);if(!l.policy||l.policy==="AnyOn"){for(let c of l.ids){if(!this._groups.has(c))return(0,o.warn)(`Optional content group not found: ${c}`),!0;if(this._groups.get(c).visible)return!0}return!1}else if(l.policy==="AllOn"){for(let c of l.ids){if(!this._groups.has(c))return(0,o.warn)(`Optional content group not found: ${c}`),!0;if(!this._groups.get(c).visible)return!1}return!0}else if(l.policy==="AnyOff"){for(let c of l.ids){if(!this._groups.has(c))return(0,o.warn)(`Optional content group not found: ${c}`),!0;if(!this._groups.get(c).visible)return!0}return!1}else if(l.policy==="AllOff"){for(let c of l.ids){if(!this._groups.has(c))return(0,o.warn)(`Optional content group not found: ${c}`),!0;if(this._groups.get(c).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${l.policy}.`),!0}return(0,o.warn)(`Unknown group type ${l.type}.`),!0}setVisibility(l,c=!0){if(!this._groups.has(l)){(0,o.warn)(`Optional content group not found: ${l}`);return}this._groups.get(l).visible=!!c}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,o.objectFromMap)(this._groups):null}getGroup(l){return this._groups.get(l)||null}}e.OptionalContentConfig=s},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var o=r(2),i=r(1);class s{constructor(d,u){(0,o.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d.progressiveDone||!1,this._contentDispositionFilename=d.contentDispositionFilename||null;let p=d.initialData;if((p==null?void 0:p.length)>0){let h=new Uint8Array(p).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){let u=new Uint8Array(d.chunk).buffer;if(d.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(u):this._queuedChunks.push(u);else{let p=this._rangeReaders.some(function(h){return h._begin!==d.begin?!1:(h._enqueue(u),!0)});(0,o.assert)(p,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d,u;return(u=(d=this._fullRequestReader)==null?void 0:d._loaded)!=null?u:0}_onProgress(d){if(d.total===void 0){let u=this._rangeReaders[0];(u==null?void 0:u.onProgress)&&u.onProgress({loaded:d.loaded})}else{let u=this._fullRequestReader;(u==null?void 0:u.onProgress)&&u.onProgress({loaded:d.loaded,total:d.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){let u=this._rangeReaders.indexOf(d);u>=0&&this._rangeReaders.splice(u,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let d=this._queuedChunks;return this._queuedChunks=null,new a(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,u){if(u<=this._progressiveDataLength)return null;let p=new l(this,d,u);return this._pdfDataRangeTransport.requestDataRange(d,u),this._rangeReaders.push(p),p}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(let u of this._rangeReaders.slice(0))u.cancel(d);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=s;class a{constructor(d,u,p=!1,h=null){this._stream=d,this._done=p||!1,this._filename=(0,i.isPdfFile)(h)?h:null,this._queuedChunks=u||[],this._loaded=0;for(let f of this._queuedChunks)this._loaded+=f.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let d=(0,o.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(let u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class l{constructor(d,u,p){this._stream=d,this._begin=u,this._end=p,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(let p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let u=this._queuedChunk;return this._queuedChunk=null,{value:u,done:!1}}if(this._done)return{value:void 0,done:!0};let d=(0,o.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(let u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class r{static textContent(i){let s=[],a={items:s,styles:Object.create(null)};function l(c){var p;if(!c)return;let d=null,u=c.name;if(u==="#text")d=c.value;else if(r.shouldBuildText(u))((p=c==null?void 0:c.attributes)==null?void 0:p.textContent)?d=c.attributes.textContent:c.value&&(d=c.value);else return;if(d!==null&&s.push({str:d}),!!c.children)for(let h of c.children)l(h)}return l(i),a}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=r},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var o=r(2),i=r(1),s=r(9),a=r(19);let l=1e3,c=new WeakSet;class d{static create(P){switch(P.data.annotationType){case o.AnnotationType.LINK:return new p(P);case o.AnnotationType.TEXT:return new h(P);case o.AnnotationType.WIDGET:switch(P.data.fieldType){case"Tx":return new m(P);case"Btn":return P.data.radioButton?new v(P):P.data.checkBox?new g(P):new y(P);case"Ch":return new S(P)}return new f(P);case o.AnnotationType.POPUP:return new C(P);case o.AnnotationType.FREETEXT:return new x(P);case o.AnnotationType.LINE:return new w(P);case o.AnnotationType.SQUARE:return new k(P);case o.AnnotationType.CIRCLE:return new T(P);case o.AnnotationType.POLYLINE:return new A(P);case o.AnnotationType.CARET:return new F(P);case o.AnnotationType.INK:return new z(P);case o.AnnotationType.POLYGON:return new E(P);case o.AnnotationType.HIGHLIGHT:return new L(P);case o.AnnotationType.UNDERLINE:return new R(P);case o.AnnotationType.SQUIGGLY:return new N(P);case o.AnnotationType.STRIKEOUT:return new V(P);case o.AnnotationType.STAMP:return new W(P);case o.AnnotationType.FILEATTACHMENT:return new me(P);default:return new u(P)}}}class u{constructor(P,{isRenderable:_=!1,ignoreBorder:I=!1,createQuadrilaterals:U=!1}={}){this.isRenderable=_,this.data=P.data,this.layer=P.layer,this.page=P.page,this.viewport=P.viewport,this.linkService=P.linkService,this.downloadManager=P.downloadManager,this.imageResourcesPath=P.imageResourcesPath,this.renderForms=P.renderForms,this.svgFactory=P.svgFactory,this.annotationStorage=P.annotationStorage,this.enableScripting=P.enableScripting,this.hasJSActions=P.hasJSActions,this._fieldObjects=P.fieldObjects,this._mouseState=P.mouseState,_&&(this.container=this._createContainer(I)),U&&(this.quadrilaterals=this._createQuadrilaterals(I))}_createContainer(P=!1){let _=this.data,I=this.page,U=this.viewport,M=document.createElement("section"),$=_.rect[2]-_.rect[0],H=_.rect[3]-_.rect[1];M.setAttribute("data-annotation-id",_.id);let Y=o.Util.normalizeRect([_.rect[0],I.view[3]-_.rect[1]+I.view[1],_.rect[2],I.view[3]-_.rect[3]+I.view[1]]);if(M.style.transform=`matrix(${U.transform.join(",")})`,M.style.transformOrigin=`${-Y[0]}px ${-Y[1]}px`,!P&&_.borderStyle.width>0){M.style.borderWidth=`${_.borderStyle.width}px`,_.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE&&($-=2*_.borderStyle.width,H-=2*_.borderStyle.width);let ae=_.borderStyle.horizontalCornerRadius,le=_.borderStyle.verticalCornerRadius;if(ae>0||le>0){let Se=`${ae}px / ${le}px`;M.style.borderRadius=Se}switch(_.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:M.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:M.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:M.style.borderBottomStyle="solid";break;default:break}_.borderColor||_.color||null?M.style.borderColor=o.Util.makeHexColor(_.color[0]|0,_.color[1]|0,_.color[2]|0):M.style.borderWidth=0}return M.style.left=`${Y[0]}px`,M.style.top=`${Y[1]}px`,M.style.width=`${$}px`,M.style.height=`${H}px`,M}_createQuadrilaterals(P=!1){if(!this.data.quadPoints)return null;let _=[],I=this.data.rect;for(let U of this.data.quadPoints)this.data.rect=[U[2].x,U[2].y,U[1].x,U[1].y],_.push(this._createContainer(P));return this.data.rect=I,_}_createPopup(P,_){let I=this.container;this.quadrilaterals&&(P=P||this.quadrilaterals,I=this.quadrilaterals[0]),P||(P=document.createElement("div"),P.style.height=I.style.height,P.style.width=I.style.width,I.appendChild(P));let M=new b({container:I,trigger:P,color:_.color,titleObj:_.titleObj,modificationDate:_.modificationDate,contentsObj:_.contentsObj,hideWrapper:!0}).render();M.style.left=I.style.width,I.appendChild(M)}_renderQuadrilaterals(P){for(let _ of this.quadrilaterals)_.className=P;return this.quadrilaterals}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(P,_=null){let I=[];if(this._fieldObjects){let U=this._fieldObjects[P];if(U)for(let{page:M,id:$,exportValues:H}of U){if(M===-1||$===_)continue;let Y=typeof H=="string"?H:null,ae=document.getElementById($);if(ae&&!c.has(ae)){(0,o.warn)(`_getElementsByName - element not allowed: ${$}`);continue}I.push({id:$,exportValue:Y,domElement:ae})}return I}for(let U of document.getElementsByName(P)){let{id:M,exportValue:$}=U;M!==_&&(!c.has(U)||I.push({id:M,exportValue:$,domElement:U}))}return I}static get platform(){let P=typeof navigator!="undefined"?navigator.platform:"";return(0,o.shadow)(this,"platform",{isWin:P.includes("Win"),isMac:P.includes("Mac")})}}class p extends u{constructor(P){let _=!!(P.data.url||P.data.dest||P.data.action||P.data.isTooltipOnly||P.data.resetForm||P.data.actions&&(P.data.actions.Action||P.data.actions["Mouse Up"]||P.data.actions["Mouse Down"]));super(P,{isRenderable:_,createQuadrilaterals:!0})}render(){var U;let{data:P,linkService:_}=this,I=document.createElement("a");if(P.url)_.addLinkAttributes||(0,o.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(U=_.addLinkAttributes)==null||U.call(_,I,P.url,P.newWindow);else if(P.action)this._bindNamedAction(I,P.action);else if(P.dest)this._bindLink(I,P.dest);else{let M=!1;P.actions&&(P.actions.Action||P.actions["Mouse Up"]||P.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(M=!0,this._bindJSAction(I,P)),P.resetForm?this._bindResetFormAction(I,P.resetForm):M||this._bindLink(I,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((M,$)=>{let H=$===0?I:I.cloneNode();return M.appendChild(H),M}):(this.container.className="linkAnnotation",this.container.appendChild(I),this.container)}_bindLink(P,_){P.href=this.linkService.getDestinationHash(_),P.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&(P.className="internalLink")}_bindNamedAction(P,_){P.href=this.linkService.getAnchorUrl(""),P.onclick=()=>(this.linkService.executeNamedAction(_),!1),P.className="internalLink"}_bindJSAction(P,_){P.href=this.linkService.getAnchorUrl("");let I=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let U of Object.keys(_.actions)){let M=I.get(U);!M||(P[M]=()=>{var $;return($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:U}}),!1})}P.onclick||(P.onclick=()=>!1),P.className="internalLink"}_bindResetFormAction(P,_){let I=P.onclick;if(I||(P.href=this.linkService.getAnchorUrl("")),P.className="internalLink",!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),I||(P.onclick=()=>!1);return}P.onclick=()=>{var le;I&&I();let{fields:U,refs:M,include:$}=_,H=[];if(U.length!==0||M.length!==0){let xe=new Set(M);for(let Se of U){let je=this._fieldObjects[Se]||[];for(let{id:ze}of je)xe.add(ze)}for(let Se of Object.values(this._fieldObjects))for(let je of Se)xe.has(je.id)===$&&H.push(je)}else for(let xe of Object.values(this._fieldObjects))H.push(...xe);let Y=this.annotationStorage,ae=[];for(let xe of H){let{id:Se}=xe;switch(ae.push(Se),xe.type){case"text":{let ze=xe.defaultValue||"";Y.setValue(Se,{value:ze,valueAsString:ze});break}case"checkbox":case"radiobutton":{let ze=xe.defaultValue===xe.exportValues;Y.setValue(Se,{value:ze});break}case"combobox":case"listbox":{let ze=xe.defaultValue||"";Y.setValue(Se,{value:ze});break}default:continue}let je=document.getElementById(Se);!je||!c.has(je)||je.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ae,name:"ResetForm"}})),!1}}}class h extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_})}render(){this.container.className="textAnnotation";let P=document.createElement("img");return P.style.height=this.container.style.height,P.style.width=this.container.style.width,P.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",P.alt="[{{type}} Annotation]",P.dataset.l10nId="text_annotation_type",P.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(P,this.data),this.container.appendChild(P),this.container}}class f extends u{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(P){let{isWin:_,isMac:I}=u.platform;return _&&P.ctrlKey||I&&P.metaKey}_setEventListener(P,_,I,U){_.includes("mouse")?P.addEventListener(_,M=>{var $;($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:I,value:U(M),shift:M.shiftKey,modifier:this._getKeyModifier(M)}})}):P.addEventListener(_,M=>{var $;($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:I,value:M.target.checked}})})}_setEventListeners(P,_,I){var U;for(let[M,$]of _)($==="Action"||((U=this.data.actions)==null?void 0:U[$]))&&this._setEventListener(P,M,$,I)}_setBackgroundColor(P){let _=this.data.backgroundColor||null;P.style.backgroundColor=_===null?"transparent":o.Util.makeHexColor(_[0],_[1],_[2])}_dispatchEventFromSandbox(P,_){let I=(M,$,H)=>{let Y=H.detail[M];H.target.style[$]=a.ColorConverters[`${Y[0]}_HTML`](Y.slice(1))},U={display:M=>{let $=M.detail.display%2==1;M.target.style.visibility=$?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:$,print:M.detail.display===0||M.detail.display===3})},print:M=>{this.annotationStorage.setValue(this.data.id,{print:M.detail.print})},hidden:M=>{M.target.style.visibility=M.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:M.detail.hidden})},focus:M=>{setTimeout(()=>M.target.focus({preventScroll:!1}),0)},userName:M=>{M.target.title=M.detail.userName},readonly:M=>{M.detail.readonly?M.target.setAttribute("readonly",""):M.target.removeAttribute("readonly")},required:M=>{M.detail.required?M.target.setAttribute("required",""):M.target.removeAttribute("required")},bgColor:M=>{I("bgColor","backgroundColor",M)},fillColor:M=>{I("fillColor","backgroundColor",M)},fgColor:M=>{I("fgColor","color",M)},textColor:M=>{I("textColor","color",M)},borderColor:M=>{I("borderColor","borderColor",M)},strokeColor:M=>{I("strokeColor","borderColor",M)}};for(let M of Object.keys(_.detail)){let $=P[M]||U[M];$&&$(_)}}}class m extends f{constructor(P){let _=P.renderForms||!P.data.hasAppearance&&!!P.data.fieldValue;super(P,{isRenderable:_})}setPropertyOnSiblings(P,_,I,U){let M=this.annotationStorage;for(let $ of this._getElementsByName(P.name,P.id))$.domElement&&($.domElement[_]=I),M.setValue($.id,{[U]:I})}render(){var U;let P=this.annotationStorage,_=this.data.id;this.container.className="textWidgetAnnotation";let I=null;if(this.renderForms){let M=P.getValue(_,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),$=M.valueAsString||M.value||"",H={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(I=document.createElement("textarea"),I.textContent=$):(I=document.createElement("input"),I.type="text",I.setAttribute("value",$)),c.add(I),I.disabled=this.data.readOnly,I.name=this.data.fieldName,I.tabIndex=l,H.userValue=$,I.setAttribute("id",_),I.addEventListener("input",ae=>{P.setValue(_,{value:ae.target.value}),this.setPropertyOnSiblings(I,"value",ae.target.value,"value")}),I.addEventListener("resetform",ae=>{let le=this.data.defaultFieldValue||"";I.value=H.userValue=le,delete H.formattedValue});let Y=ae=>{H.formattedValue&&(ae.target.value=H.formattedValue),ae.target.scrollLeft=0,H.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){I.addEventListener("focus",le=>{H.userValue&&(le.target.value=H.userValue)}),I.addEventListener("updatefromsandbox",le=>{let xe={value(Se){H.userValue=Se.detail.value||"",P.setValue(_,{value:H.userValue.toString()}),H.formattedValue||(Se.target.value=H.userValue)},valueAsString(Se){H.formattedValue=Se.detail.valueAsString||"",Se.target!==document.activeElement&&(Se.target.value=H.formattedValue),P.setValue(_,{formattedValue:H.formattedValue})},selRange(Se){let[je,ze]=Se.detail.selRange;je>=0&&ze<Se.target.value.length&&Se.target.setSelectionRange(je,ze)}};this._dispatchEventFromSandbox(xe,le)}),I.addEventListener("keydown",le=>{var Se;H.beforeInputValue=le.target.value;let xe=-1;le.key==="Escape"?xe=0:le.key==="Enter"?xe=2:le.key==="Tab"&&(xe=3),xe!==-1&&(H.userValue=le.target.value,(Se=this.linkService.eventBus)==null||Se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:le.target.value,willCommit:!0,commitKey:xe,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}}))});let ae=Y;Y=null,I.addEventListener("blur",le=>{var xe;this._mouseState.isDown&&(H.userValue=le.target.value,(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:le.target.value,willCommit:!0,commitKey:1,selStart:le.target.selectionStart,selEnd:le.target.selectionEnd}})),ae(le)}),I.addEventListener("mousedown",le=>{H.beforeInputValue=le.target.value,H.beforeInputSelectionRange=null}),I.addEventListener("keyup",le=>{le.target.selectionStart===le.target.selectionEnd&&(H.beforeInputSelectionRange=null)}),I.addEventListener("select",le=>{H.beforeInputSelectionRange=[le.target.selectionStart,le.target.selectionEnd]}),((U=this.data.actions)==null?void 0:U.Keystroke)&&I.addEventListener("input",le=>{var je;let xe=-1,Se=-1;H.beforeInputSelectionRange&&([xe,Se]=H.beforeInputSelectionRange),(je=this.linkService.eventBus)==null||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:H.beforeInputValue,change:le.data,willCommit:!1,selStart:xe,selEnd:Se}})}),this._setEventListeners(I,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],le=>le.target.value)}if(Y&&I.addEventListener("blur",Y),this.data.maxLen!==null&&(I.maxLength=this.data.maxLen),this.data.comb){let le=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;I.classList.add("comb"),I.style.letterSpacing=`calc(${le}px - 1ch)`}}else I=document.createElement("div"),I.textContent=this.data.fieldValue,I.style.verticalAlign="middle",I.style.display="table-cell";return this._setTextStyle(I),this._setBackgroundColor(I),this.container.appendChild(I),this.container}_setTextStyle(P){let _=["left","center","right"],{fontSize:I,fontColor:U}=this.data.defaultAppearanceData,M=P.style;I&&(M.fontSize=`${I}px`),M.color=o.Util.makeHexColor(U[0],U[1],U[2]),this.data.textAlignment!==null&&(M.textAlign=_[this.data.textAlignment])}}class g extends f{constructor(P){super(P,{isRenderable:P.renderForms})}render(){let P=this.annotationStorage,_=this.data,I=_.id,U=P.getValue(I,{value:_.exportValue===_.fieldValue}).value;typeof U=="string"&&(U=U!=="Off",P.setValue(I,{value:U})),this.container.className="buttonWidgetAnnotation checkBox";let M=document.createElement("input");return c.add(M),M.disabled=_.readOnly,M.type="checkbox",M.name=_.fieldName,U&&M.setAttribute("checked",!0),M.setAttribute("id",I),M.setAttribute("exportValue",_.exportValue),M.tabIndex=l,M.addEventListener("change",$=>{let{name:H,checked:Y}=$.target;for(let ae of this._getElementsByName(H,I)){let le=Y&&ae.exportValue===_.exportValue;ae.domElement&&(ae.domElement.checked=le),P.setValue(ae.id,{value:le})}P.setValue(I,{value:Y})}),M.addEventListener("resetform",$=>{let H=_.defaultFieldValue||"Off";$.target.checked=H===_.exportValue}),this.enableScripting&&this.hasJSActions&&(M.addEventListener("updatefromsandbox",$=>{let H={value(Y){Y.target.checked=Y.detail.value!=="Off",P.setValue(I,{value:Y.target.checked})}};this._dispatchEventFromSandbox(H,$)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(M),this.container.appendChild(M),this.container}}class v extends f{constructor(P){super(P,{isRenderable:P.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";let P=this.annotationStorage,_=this.data,I=_.id,U=P.getValue(I,{value:_.fieldValue===_.buttonValue}).value;typeof U=="string"&&(U=U!==_.buttonValue,P.setValue(I,{value:U}));let M=document.createElement("input");if(c.add(M),M.disabled=_.readOnly,M.type="radio",M.name=_.fieldName,U&&M.setAttribute("checked",!0),M.setAttribute("id",I),M.tabIndex=l,M.addEventListener("change",$=>{let{name:H,checked:Y}=$.target;for(let ae of this._getElementsByName(H,I))P.setValue(ae.id,{value:!1});P.setValue(I,{value:Y})}),M.addEventListener("resetform",$=>{let H=_.defaultFieldValue;$.target.checked=H!=null&&H===_.buttonValue}),this.enableScripting&&this.hasJSActions){let $=_.buttonValue;M.addEventListener("updatefromsandbox",H=>{let Y={value:ae=>{let le=$===ae.detail.value;for(let xe of this._getElementsByName(ae.target.name)){let Se=le&&xe.id===I;xe.domElement&&(xe.domElement.checked=Se),P.setValue(xe.id,{value:Se})}}};this._dispatchEventFromSandbox(Y,H)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)}return this._setBackgroundColor(M),this.container.appendChild(M),this.container}}class y extends p{render(){let P=super.render();return P.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(P.title=this.data.alternativeText),P}}class S extends f{constructor(P){super(P,{isRenderable:P.renderForms})}render(){this.container.className="choiceWidgetAnnotation";let P=this.annotationStorage,_=this.data.id;P.getValue(_,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:I}=this.data.defaultAppearanceData;I||(I=9);let U=`calc(${I}px * var(--zoom-factor))`,M=document.createElement("select");c.add(M),M.disabled=this.data.readOnly,M.name=this.data.fieldName,M.setAttribute("id",_),M.tabIndex=l,M.style.fontSize=`${I}px`,this.data.combo||(M.size=this.data.options.length,this.data.multiSelect&&(M.multiple=!0)),M.addEventListener("resetform",Y=>{let ae=this.data.defaultFieldValue;for(let le of M.options)le.selected=le.value===ae});for(let Y of this.data.options){let ae=document.createElement("option");ae.textContent=Y.displayValue,ae.value=Y.exportValue,this.data.combo&&(ae.style.fontSize=U),this.data.fieldValue.includes(Y.exportValue)&&ae.setAttribute("selected",!0),M.appendChild(ae)}let $=(Y,ae)=>{let le=ae?"value":"textContent",xe=Y.target.options;return Y.target.multiple?Array.prototype.filter.call(xe,Se=>Se.selected).map(Se=>Se[le]):xe.selectedIndex===-1?null:xe[xe.selectedIndex][le]},H=Y=>{let ae=Y.target.options;return Array.prototype.map.call(ae,le=>({displayValue:le.textContent,exportValue:le.value}))};return this.enableScripting&&this.hasJSActions?(M.addEventListener("updatefromsandbox",Y=>{let ae={value(le){let xe=le.detail.value,Se=new Set(Array.isArray(xe)?xe:[xe]);for(let je of M.options)je.selected=Se.has(je.value);P.setValue(_,{value:$(le,!0)})},multipleSelection(le){M.multiple=!0},remove(le){let xe=M.options,Se=le.detail.remove;xe[Se].selected=!1,M.remove(Se),xe.length>0&&Array.prototype.findIndex.call(xe,ze=>ze.selected)===-1&&(xe[0].selected=!0),P.setValue(_,{value:$(le,!0),items:H(le)})},clear(le){for(;M.length!==0;)M.remove(0);P.setValue(_,{value:null,items:[]})},insert(le){let{index:xe,displayValue:Se,exportValue:je}=le.detail.insert,ze=document.createElement("option");ze.textContent=Se,ze.value=je,M.insertBefore(ze,M.children[xe]),P.setValue(_,{value:$(le,!0),items:H(le)})},items(le){let{items:xe}=le.detail;for(;M.length!==0;)M.remove(0);for(let Se of xe){let{displayValue:je,exportValue:ze}=Se,Le=document.createElement("option");Le.textContent=je,Le.value=ze,M.appendChild(Le)}M.options.length>0&&(M.options[0].selected=!0),P.setValue(_,{value:$(le,!0),items:H(le)})},indices(le){let xe=new Set(le.detail.indices);for(let Se of le.target.options)Se.selected=xe.has(Se.index);P.setValue(_,{value:$(le,!0)})},editable(le){le.target.disabled=!le.detail.editable}};this._dispatchEventFromSandbox(ae,Y)}),M.addEventListener("input",Y=>{var xe;let ae=$(Y,!0),le=$(Y,!1);P.setValue(_,{value:ae}),(xe=this.linkService.eventBus)==null||xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:le,changeEx:ae,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(M,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Y=>Y.target.checked)):M.addEventListener("input",function(Y){P.setValue(_,{value:$(Y)})}),this._setBackgroundColor(M),this.container.appendChild(M),this.container}}class C extends u{constructor(P){var I,U;let _=!!(((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_})}render(){let P=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",P.includes(this.data.parentType))return this.container;let _=`[data-annotation-id="${this.data.parentId}"]`,I=this.layer.querySelectorAll(_);if(I.length===0)return this.container;let U=new b({container:this.container,trigger:Array.from(I),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj}),M=this.page,$=o.Util.normalizeRect([this.data.parentRect[0],M.view[3]-this.data.parentRect[1]+M.view[1],this.data.parentRect[2],M.view[3]-this.data.parentRect[3]+M.view[1]]),H=$[0]+this.data.parentRect[2]-this.data.parentRect[0],Y=$[1];return this.container.style.transformOrigin=`${-H}px ${-Y}px`,this.container.style.left=`${H}px`,this.container.style.top=`${Y}px`,this.container.appendChild(U.render()),this.container}}class b{constructor(P){this.container=P.container,this.trigger=P.trigger,this.color=P.color,this.titleObj=P.titleObj,this.modificationDate=P.modificationDate,this.contentsObj=P.contentsObj,this.hideWrapper=P.hideWrapper||!1,this.pinned=!1}render(){let P=.7,_=document.createElement("div");_.className="popupWrapper",this.hideElement=this.hideWrapper?_:this.container,this.hideElement.hidden=!0;let I=document.createElement("div");I.className="popup";let U=this.color;if(U){let Y=P*(255-U[0])+U[0],ae=P*(255-U[1])+U[1],le=P*(255-U[2])+U[2];I.style.backgroundColor=o.Util.makeHexColor(Y|0,ae|0,le|0)}let M=document.createElement("h1");M.dir=this.titleObj.dir,M.textContent=this.titleObj.str,I.appendChild(M);let $=i.PDFDateString.toDateObject(this.modificationDate);if($){let Y=document.createElement("span");Y.textContent="{{date}}, {{time}}",Y.dataset.l10nId="annotation_date_string",Y.dataset.l10nArgs=JSON.stringify({date:$.toLocaleDateString(),time:$.toLocaleTimeString()}),I.appendChild(Y)}let H=this._formatContents(this.contentsObj);I.appendChild(H),Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(let Y of this.trigger)Y.addEventListener("click",this._toggle.bind(this)),Y.addEventListener("mouseover",this._show.bind(this,!1)),Y.addEventListener("mouseout",this._hide.bind(this,!1));return I.addEventListener("click",this._hide.bind(this,!0)),_.appendChild(I),_}_formatContents({str:P,dir:_}){let I=document.createElement("p");I.dir=_;let U=P.split(/(?:\r\n?|\n)/);for(let M=0,$=U.length;M<$;++M){let H=U[M];I.appendChild(document.createTextNode(H)),M<$-1&&I.appendChild(document.createElement("br"))}return I}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(P=!1){P&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(P=!0){P&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class x extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class w extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";let P=this.data,_=P.rect[2]-P.rect[0],I=P.rect[3]-P.rect[1],U=this.svgFactory.create(_,I),M=this.svgFactory.createElement("svg:line");return M.setAttribute("x1",P.rect[2]-P.lineCoordinates[0]),M.setAttribute("y1",P.rect[3]-P.lineCoordinates[1]),M.setAttribute("x2",P.rect[2]-P.lineCoordinates[2]),M.setAttribute("y2",P.rect[3]-P.lineCoordinates[3]),M.setAttribute("stroke-width",P.borderStyle.width||1),M.setAttribute("stroke","transparent"),U.appendChild(M),this.container.append(U),this._createPopup(M,P),this.container}}class k extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";let P=this.data,_=P.rect[2]-P.rect[0],I=P.rect[3]-P.rect[1],U=this.svgFactory.create(_,I),M=P.borderStyle.width,$=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",M/2),$.setAttribute("y",M/2),$.setAttribute("width",_-M),$.setAttribute("height",I-M),$.setAttribute("stroke-width",M||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","none"),U.appendChild($),this.container.append(U),this._createPopup($,P),this.container}}class T extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";let P=this.data,_=P.rect[2]-P.rect[0],I=P.rect[3]-P.rect[1],U=this.svgFactory.create(_,I),M=P.borderStyle.width,$=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",_/2),$.setAttribute("cy",I/2),$.setAttribute("rx",_/2-M/2),$.setAttribute("ry",I/2-M/2),$.setAttribute("stroke-width",M||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","none"),U.appendChild($),this.container.append(U),this._createPopup($,P),this.container}}class A extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0});this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let P=this.data,_=P.rect[2]-P.rect[0],I=P.rect[3]-P.rect[1],U=this.svgFactory.create(_,I),M=[];for(let H of P.vertices){let Y=H.x-P.rect[0],ae=P.rect[3]-H.y;M.push(Y+","+ae)}M=M.join(" ");let $=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",M),$.setAttribute("stroke-width",P.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","none"),U.appendChild($),this.container.append(U),this._createPopup($,P),this.container}}class E extends A{constructor(P){super(P);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class F extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class z extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0});this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let P=this.data,_=P.rect[2]-P.rect[0],I=P.rect[3]-P.rect[1],U=this.svgFactory.create(_,I);for(let M of P.inkLists){let $=[];for(let Y of M){let ae=Y.x-P.rect[0],le=P.rect[3]-Y.y;$.push(`${ae},${le}`)}$=$.join(" ");let H=this.svgFactory.createElement(this.svgElementName);H.setAttribute("points",$),H.setAttribute("stroke-width",P.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","none"),this._createPopup(H,P),U.appendChild(H)}return this.container.append(U),this.container}}class L extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class R extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class N extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class V extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class W extends u{constructor(P){var I,U;let _=!!(P.data.hasPopup||((I=P.data.titleObj)==null?void 0:I.str)||((U=P.data.contentsObj)==null?void 0:U.str));super(P,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class me extends u{constructor(P){super(P,{isRenderable:!0});var U;let{filename:_,content:I}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(_),this.content=I,(U=this.linkService.eventBus)==null||U.dispatch("fileattachmentannotation",{source:this,id:(0,o.stringToPDFString)(_),filename:_,content:I})}render(){var _,I;this.container.className="fileAttachmentAnnotation";let P=document.createElement("div");return P.style.height=this.container.style.height,P.style.width=this.container.style.width,P.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((_=this.data.titleObj)==null?void 0:_.str)||((I=this.data.contentsObj)==null?void 0:I.str))&&this._createPopup(P,this.data),this.container.appendChild(P),this.container}_download(){var P;(P=this.downloadManager)==null||P.openOrDownloadData(this.container,this.content,this.filename)}}class ie{static render(P){let _=[],I=[];for(let U of P.annotations)if(!!U){if(U.annotationType===o.AnnotationType.POPUP){I.push(U);continue}_.push(U)}I.length&&_.push(...I);for(let U of _){let M=d.create({data:U,layer:P.div,page:P.page,viewport:P.viewport,linkService:P.linkService,downloadManager:P.downloadManager,imageResourcesPath:P.imageResourcesPath||"",renderForms:P.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:P.annotationStorage||new s.AnnotationStorage,enableScripting:P.enableScripting,hasJSActions:P.hasJSActions,fieldObjects:P.fieldObjects,mouseState:P.mouseState||{isDown:!1}});if(M.isRenderable){let $=M.render();if(U.hidden&&($.style.visibility="hidden"),Array.isArray($))for(let H of $)P.div.appendChild(H);else M instanceof C?P.div.prepend($):P.div.appendChild($)}}}static update(P){let _=`matrix(${P.viewport.transform.join(",")})`;for(let I of P.annotations){let U=P.div.querySelectorAll(`[data-annotation-id="${I.id}"]`);if(U)for(let M of U)M.style.transform=_}P.div.hidden=!1}}e.AnnotationLayer=ie},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function r(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class o{static CMYK_G([s,a,l,c]){return["G",1-Math.min(1,.3*s+.59*l+.11*a+c)]}static G_CMYK([s]){return["CMYK",0,0,0,1-s]}static G_RGB([s]){return["RGB",s,s,s]}static G_HTML([s]){let a=r(s);return`#${a}${a}${a}`}static RGB_G([s,a,l]){return["G",.3*s+.59*a+.11*l]}static RGB_HTML([s,a,l]){let c=r(s),d=r(a),u=r(l);return`#${c}${d}${u}`}static T_HTML(){return"#00000000"}static CMYK_RGB([s,a,l,c]){return["RGB",1-Math.min(1,s+c),1-Math.min(1,l+c),1-Math.min(1,a+c)]}static CMYK_HTML(s){return this.RGB_HTML(this.CMYK_RGB(s))}static RGB_CMYK([s,a,l]){let c=1-s,d=1-a,u=1-l,p=Math.min(c,d,u);return["CMYK",c,d,u,p]}}e.ColorConverters=o},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=y;var o=r(2);let i=1e5,s=30,a=.8,l=new Map,c=/^\s+$/g;function d(S,C){let b=l.get(S);if(b)return b;C.save(),C.font=`${s}px ${S}`;let x=C.measureText(""),w=x.fontBoundingBoxAscent,k=Math.abs(x.fontBoundingBoxDescent);if(w){C.restore();let A=w/(w+k);return l.set(S,A),A}C.strokeStyle="red",C.clearRect(0,0,s,s),C.strokeText("g",0,0);let T=C.getImageData(0,0,s,s).data;k=0;for(let A=T.length-1-3;A>=0;A-=4)if(T[A]>0){k=Math.ceil(A/4/s);break}C.clearRect(0,0,s,s),C.strokeText("A",0,s),T=C.getImageData(0,0,s,s).data,w=0;for(let A=0,E=T.length;A<E;A+=4)if(T[A]>0){w=s-Math.floor(A/4/s);break}if(C.restore(),w){let A=w/(w+k);return l.set(S,A),A}return l.set(S,a),a}function u(S,C,b,x){let w=document.createElement("span"),k=S._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL};S._textDivs.push(w);let T=o.Util.transform(S._viewport.transform,C.transform),A=Math.atan2(T[1],T[0]),E=b[C.fontName];E.vertical&&(A+=Math.PI/2);let F=Math.hypot(T[2],T[3]),z=F*d(E.fontFamily,x),L,R;A===0?(L=T[4],R=T[5]-z):(L=T[4]+z*Math.sin(A),R=T[5]-z*Math.cos(A)),w.style.left=`${L}px`,w.style.top=`${R}px`,w.style.fontSize=`${F}px`,w.style.fontFamily=E.fontFamily,w.setAttribute("role","presentation"),w.textContent=C.str,w.dir=C.dir,S._fontInspectorEnabled&&(w.dataset.fontName=C.fontName),A!==0&&(k.angle=A*(180/Math.PI));let N=!1;if(C.str.length>1||S._enhanceTextSelection&&c.test(C.str))N=!0;else if(C.transform[0]!==C.transform[3]){let V=Math.abs(C.transform[0]),W=Math.abs(C.transform[3]);V!==W&&Math.max(V,W)/Math.min(V,W)>1.5&&(N=!0)}if(N&&(E.vertical?k.canvasWidth=C.height*S._viewport.scale:k.canvasWidth=C.width*S._viewport.scale),S._textDivProperties.set(w,k),S._textContentStream&&S._layoutText(w),S._enhanceTextSelection&&k.hasText){let V=1,W=0;A!==0&&(V=Math.cos(A),W=Math.sin(A));let me=(E.vertical?C.height:C.width)*S._viewport.scale,ie=F,Z,P;A!==0?(Z=[V,W,-W,V,L,R],P=o.Util.getAxialAlignedBoundingBox([0,0,me,ie],Z)):P=[L,R,L+me,R+ie],S._bounds.push({left:P[0],top:P[1],right:P[2],bottom:P[3],div:w,size:[me,ie],m:Z})}}function p(S){if(S._canceled)return;let C=S._textDivs,b=S._capability,x=C.length;if(x>i){S._renderingDone=!0,b.resolve();return}if(!S._textContentStream)for(let w=0;w<x;w++)S._layoutText(C[w]);S._renderingDone=!0,b.resolve()}function h(S,C,b){let x=0;for(let w=0;w<b;w++){let k=S[C++];k>0&&(x=x?Math.min(k,x):k)}return x}function f(S){let C=S._bounds,b=S._viewport,x=m(b.width,b.height,C);for(let w=0;w<x.length;w++){let k=C[w].div,T=S._textDivProperties.get(k);if(T.angle===0){T.paddingLeft=C[w].left-x[w].left,T.paddingTop=C[w].top-x[w].top,T.paddingRight=x[w].right-C[w].right,T.paddingBottom=x[w].bottom-C[w].bottom,S._textDivProperties.set(k,T);continue}let A=x[w],E=C[w],F=E.m,z=F[0],L=F[1],R=[[0,0],[0,E.size[1]],[E.size[0],0],E.size],N=new Float64Array(64);for(let W=0,me=R.length;W<me;W++){let ie=o.Util.applyTransform(R[W],F);N[W+0]=z&&(A.left-ie[0])/z,N[W+4]=L&&(A.top-ie[1])/L,N[W+8]=z&&(A.right-ie[0])/z,N[W+12]=L&&(A.bottom-ie[1])/L,N[W+16]=L&&(A.left-ie[0])/-L,N[W+20]=z&&(A.top-ie[1])/z,N[W+24]=L&&(A.right-ie[0])/-L,N[W+28]=z&&(A.bottom-ie[1])/z,N[W+32]=z&&(A.left-ie[0])/-z,N[W+36]=L&&(A.top-ie[1])/-L,N[W+40]=z&&(A.right-ie[0])/-z,N[W+44]=L&&(A.bottom-ie[1])/-L,N[W+48]=L&&(A.left-ie[0])/L,N[W+52]=z&&(A.top-ie[1])/-z,N[W+56]=L&&(A.right-ie[0])/L,N[W+60]=z&&(A.bottom-ie[1])/-z}let V=1+Math.min(Math.abs(z),Math.abs(L));T.paddingLeft=h(N,32,16)/V,T.paddingTop=h(N,48,16)/V,T.paddingRight=h(N,0,16)/V,T.paddingBottom=h(N,16,16)/V,S._textDivProperties.set(k,T)}}function m(S,C,b){let x=b.map(function(k,T){return{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom,index:T,x1New:void 0,x2New:void 0}});g(S,x);let w=new Array(b.length);for(let k of x){let T=k.index;w[T]={left:k.x1New,top:0,right:k.x2New,bottom:0}}b.map(function(k,T){let A=w[T],E=x[T];E.x1=k.top,E.y1=S-A.right,E.x2=k.bottom,E.y2=S-A.left,E.index=T,E.x1New=void 0,E.x2New=void 0}),g(C,x);for(let k of x){let T=k.index;w[T].top=k.x1New,w[T].bottom=k.x2New}return w}function g(S,C){C.sort(function(w,k){return w.x1-k.x1||w.index-k.index});let x=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(let w of C){let k=0;for(;k<x.length&&x[k].end<=w.y1;)k++;let T=x.length-1;for(;T>=0&&x[T].start>=w.y2;)T--;let A,E,F,z,L=-1/0;for(F=k;F<=T;F++){A=x[F],E=A.boundary;let V;E.x2>w.x1?V=E.index>w.index?E.x1New:w.x1:E.x2New===void 0?V=(E.x2+w.x1)/2:V=E.x2New,V>L&&(L=V)}for(w.x1New=L,F=k;F<=T;F++)A=x[F],E=A.boundary,E.x2New===void 0?E.x2>w.x1?E.index>w.index&&(E.x2New=E.x2):E.x2New=L:E.x2New>L&&(E.x2New=Math.max(L,E.x2));let R=[],N=null;for(F=k;F<=T;F++){A=x[F],E=A.boundary;let V=E.x2>w.x2?E:w;N===V?R[R.length-1].end=A.end:(R.push({start:A.start,end:A.end,boundary:V}),N=V)}for(x[k].start<w.y1&&(R[0].start=w.y1,R.unshift({start:x[k].start,end:w.y1,boundary:x[k].boundary})),w.y2<x[T].end&&(R[R.length-1].end=w.y2,R.push({start:w.y2,end:x[T].end,boundary:x[T].boundary})),F=k;F<=T;F++){if(A=x[F],E=A.boundary,E.x2New!==void 0)continue;let V=!1;for(z=k-1;!V&&z>=0&&x[z].start>=E.y1;z--)V=x[z].boundary===E;for(z=T+1;!V&&z<x.length&&x[z].end<=E.y2;z++)V=x[z].boundary===E;for(z=0;!V&&z<R.length;z++)V=R[z].boundary===E;V||(E.x2New=L)}Array.prototype.splice.apply(x,[k,T-k+1].concat(R))}for(let w of x){let k=w.boundary;k.x2New===void 0&&(k.x2New=Math.max(S,k.x2))}}class v{constructor({textContent:C,textContentStream:b,container:x,viewport:w,textDivs:k,textContentItemsStr:T,enhanceTextSelection:A}){var E;this._textContent=C,this._textContentStream=b,this._container=x,this._document=x.ownerDocument,this._viewport=w,this._textDivs=k||[],this._textContentItemsStr=T||[],this._enhanceTextSelection=!!A,this._fontInspectorEnabled=!!((E=globalThis.FontInspector)==null?void 0:E.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(C,b){for(let x=0,w=C.length;x<w;x++){if(C[x].str===void 0){if(C[x].type==="beginMarkedContentProps"||C[x].type==="beginMarkedContent"){let k=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),C[x].id!==null&&this._container.setAttribute("id",`${C[x].id}`),k.appendChild(this._container)}else C[x].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(C[x].str),u(this,C[x],b,this._layoutTextCtx)}}_layoutText(C){let b=this._textDivProperties.get(C),x="";if(b.canvasWidth!==0&&b.hasText){let{fontSize:w,fontFamily:k}=C.style;(w!==this._layoutTextLastFontSize||k!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${w} ${k}`,this._layoutTextLastFontSize=w,this._layoutTextLastFontFamily=k);let{width:T}=this._layoutTextCtx.measureText(C.textContent);if(T>0){let A=b.canvasWidth/T;this._enhanceTextSelection&&(b.scale=A),x=`scaleX(${A})`}}if(b.angle!==0&&(x=`rotate(${b.angle}deg) ${x}`),x.length>0&&(this._enhanceTextSelection&&(b.originalTransform=x),C.style.transform=x),b.hasText&&this._container.appendChild(C),b.hasEOL){let w=document.createElement("br");w.setAttribute("role","presentation"),this._container.appendChild(w)}}_render(C=0){let b=(0,o.createPromiseCapability)(),x=Object.create(null),w=this._document.createElement("canvas");if(w.height=w.width=s,w.mozOpaque=!0,this._layoutTextCtx=w.getContext("2d",{alpha:!1}),this._textContent){let k=this._textContent.items,T=this._textContent.styles;this._processItems(k,T),b.resolve()}else if(this._textContentStream){let k=()=>{this._reader.read().then(({value:T,done:A})=>{if(A){b.resolve();return}Object.assign(x,T.styles),this._processItems(T.items,x),k()},b.reject)};this._reader=this._textContentStream.getReader(),k()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');b.promise.then(()=>{x=null,C?this._renderTimer=setTimeout(()=>{p(this),this._renderTimer=null},C):p(this)},this._capability.reject)}expandTextDivs(C=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(f(this),this._bounds=null);let b=[],x=[];for(let w=0,k=this._textDivs.length;w<k;w++){let T=this._textDivs[w],A=this._textDivProperties.get(T);!A.hasText||(C?(b.length=0,x.length=0,A.originalTransform&&b.push(A.originalTransform),A.paddingTop>0?(x.push(`${A.paddingTop}px`),b.push(`translateY(${-A.paddingTop}px)`)):x.push(0),A.paddingRight>0?x.push(`${A.paddingRight/A.scale}px`):x.push(0),A.paddingBottom>0?x.push(`${A.paddingBottom}px`):x.push(0),A.paddingLeft>0?(x.push(`${A.paddingLeft/A.scale}px`),b.push(`translateX(${-A.paddingLeft/A.scale}px)`)):x.push(0),T.style.padding=x.join(" "),b.length&&(T.style.transform=b.join(" "))):(T.style.padding=null,T.style.transform=A.originalTransform))}}}function y(S){let C=new v({textContent:S.textContent,textContentStream:S.textContentStream,container:S.container,viewport:S.viewport,textDivs:S.textDivs,textContentItemsStr:S.textContentItemsStr,enhanceTextSelection:S.enhanceTextSelection});return C._render(S.timeout),C}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var o=r(2),i=r(1),s=r(4);let a=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=a;{let m=function(b){let x=[],w=[];for(let k of b){if(k.fn==="save"){x.push({fnId:92,fn:"group",items:[]}),w.push(x),x=x[x.length-1].items;continue}k.fn==="restore"?x=w.pop():x.push(k)}return x},g=function(b){if(Number.isInteger(b))return b.toString();let x=b.toFixed(10),w=x.length-1;if(x[w]!=="0")return x;do w--;while(x[w]==="0");return x.substring(0,x[w]==="."?w:w+1)},v=function(b){if(b[4]===0&&b[5]===0){if(b[1]===0&&b[2]===0)return b[0]===1&&b[3]===1?"":`scale(${g(b[0])} ${g(b[3])})`;if(b[0]===b[3]&&b[1]===-b[2]){let x=Math.acos(b[0])*180/Math.PI;return`rotate(${g(x)})`}}else if(b[0]===1&&b[1]===0&&b[2]===0&&b[3]===1)return`translate(${g(b[4])} ${g(b[5])})`;return`matrix(${g(b[0])} ${g(b[1])} ${g(b[2])} ${g(b[3])} ${g(b[4])} ${g(b[5])})`},l={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",u=["butt","round","square"],p=["miter","round","bevel"],h=function(){let b=new Uint8Array([137,80,78,71,13,10,26,10]),x=12,w=new Int32Array(256);for(let L=0;L<256;L++){let R=L;for(let N=0;N<8;N++)R&1?R=3988292384^R>>1&2147483647:R=R>>1&2147483647;w[L]=R}function k(L,R,N){let V=-1;for(let W=R;W<N;W++){let me=(V^L[W])&255,ie=w[me];V=V>>>8^ie}return V^-1}function T(L,R,N,V){let W=V,me=R.length;N[W]=me>>24&255,N[W+1]=me>>16&255,N[W+2]=me>>8&255,N[W+3]=me&255,W+=4,N[W]=L.charCodeAt(0)&255,N[W+1]=L.charCodeAt(1)&255,N[W+2]=L.charCodeAt(2)&255,N[W+3]=L.charCodeAt(3)&255,W+=4,N.set(R,W),W+=R.length;let ie=k(N,V+4,W);N[W]=ie>>24&255,N[W+1]=ie>>16&255,N[W+2]=ie>>8&255,N[W+3]=ie&255}function A(L,R,N){let V=1,W=0;for(let me=R;me<N;++me)V=(V+(L[me]&255))%65521,W=(W+V)%65521;return W<<16|V}function E(L){if(!s.isNodeJS)return F(L);try{let R;parseInt(process.versions.node)>=8?R=L:R=Buffer.from(L);let N=Za("zlib").deflateSync(R,{level:9});return N instanceof Uint8Array?N:new Uint8Array(N)}catch(R){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+R)}return F(L)}function F(L){let R=L.length,N=65535,V=Math.ceil(R/N),W=new Uint8Array(2+R+V*5+4),me=0;W[me++]=120,W[me++]=156;let ie=0;for(;R>N;)W[me++]=0,W[me++]=255,W[me++]=255,W[me++]=0,W[me++]=0,W.set(L.subarray(ie,ie+N),me),me+=N,ie+=N,R-=N;W[me++]=1,W[me++]=R&255,W[me++]=R>>8&255,W[me++]=~R&65535&255,W[me++]=(~R&65535)>>8&255,W.set(L.subarray(ie),me),me+=L.length-ie;let Z=A(L,0,L.length);return W[me++]=Z>>24&255,W[me++]=Z>>16&255,W[me++]=Z>>8&255,W[me++]=Z&255,W}function z(L,R,N,V){let W=L.width,me=L.height,ie,Z,P,_=L.data;switch(R){case o.ImageKind.GRAYSCALE_1BPP:Z=0,ie=1,P=W+7>>3;break;case o.ImageKind.RGB_24BPP:Z=2,ie=8,P=W*3;break;case o.ImageKind.RGBA_32BPP:Z=6,ie=8,P=W*4;break;default:throw new Error("invalid format")}let I=new Uint8Array((1+P)*me),U=0,M=0;for(let xe=0;xe<me;++xe)I[U++]=0,I.set(_.subarray(M,M+P),U),M+=P,U+=P;if(R===o.ImageKind.GRAYSCALE_1BPP&&V){U=0;for(let xe=0;xe<me;xe++){U++;for(let Se=0;Se<P;Se++)I[U++]^=255}}let $=new Uint8Array([W>>24&255,W>>16&255,W>>8&255,W&255,me>>24&255,me>>16&255,me>>8&255,me&255,ie,Z,0,0,0]),H=E(I),Y=b.length+x*3+$.length+H.length,ae=new Uint8Array(Y),le=0;return ae.set(b,le),le+=b.length,T("IHDR",$,ae,le),le+=x+$.length,T("IDATA",H,ae,le),le+=x+H.length,T("IEND",new Uint8Array(0),ae,le),(0,o.createObjectURL)(ae,"image/png",N)}return function(R,N,V){let W=R.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:R.kind;return z(R,W,N,V)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=l.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(x,w){this.x=x,this.y=w}}let y=0,S=0,C=0;e.SVGGraphics=a=class{constructor(b,x,w=!1){this.svgFactory=new i.DOMSVGFactory,this.current=new f,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=b,this.objs=x,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!w,this._operatorIdMapping=[];for(let k in o.OPS)this._operatorIdMapping[o.OPS[k]]=k}save(){this.transformStack.push(this.transformMatrix);let b=this.current;this.extraStack.push(b),this.current=b.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(b){this.save(),this.executeOpTree(b),this.restore()}loadDependencies(b){let x=b.fnArray,w=b.argsArray;for(let k=0,T=x.length;k<T;k++)if(x[k]===o.OPS.dependency)for(let A of w[k]){let E=A.startsWith("g_")?this.commonObjs:this.objs,F=new Promise(z=>{E.get(A,z)});this.current.dependencies.push(F)}return Promise.all(this.current.dependencies)}transform(b,x,w,k,T,A){let E=[b,x,w,k,T,A];this.transformMatrix=o.Util.transform(this.transformMatrix,E),this.tgrp=null}getSVG(b,x){this.viewport=x;let w=this._initialize(x);return this.loadDependencies(b).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(b)),w))}convertOpList(b){let x=this._operatorIdMapping,w=b.argsArray,k=b.fnArray,T=[];for(let A=0,E=k.length;A<E;A++){let F=k[A];T.push({fnId:F,fn:x[F],args:w[A]})}return m(T)}executeOpTree(b){for(let x of b){let w=x.fn,k=x.fnId,T=x.args;switch(k|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(T);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(T[0],T[1]);break;case o.OPS.setFont:this.setFont(T);break;case o.OPS.showText:this.showText(T[0]);break;case o.OPS.showSpacedText:this.showText(T[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(T[0],T[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(T[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(T[0]);break;case o.OPS.setHScale:this.setHScale(T[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(T[0],T[1],T[2],T[3],T[4],T[5]);break;case o.OPS.setTextRise:this.setTextRise(T[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(T[0]);break;case o.OPS.setLineWidth:this.setLineWidth(T[0]);break;case o.OPS.setLineJoin:this.setLineJoin(T[0]);break;case o.OPS.setLineCap:this.setLineCap(T[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(T[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(T[0],T[1],T[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(T[0],T[1],T[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(T);break;case o.OPS.setFillColorN:this.setFillColorN(T);break;case o.OPS.shadingFill:this.shadingFill(T[0]);break;case o.OPS.setDash:this.setDash(T[0],T[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(T[0]);break;case o.OPS.setFlatness:this.setFlatness(T[0]);break;case o.OPS.setGState:this.setGState(T[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(T[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(T[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(T[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(T[0],T[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(T[0],T[1],T[2],T[3],T[4],T[5]);break;case o.OPS.constructPath:this.constructPath(T[0],T[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(x.items);break;default:(0,o.warn)(`Unimplemented operator ${w}`);break}}}setWordSpacing(b){this.current.wordSpacing=b}setCharSpacing(b){this.current.charSpacing=b}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(b,x,w,k,T,A){let E=this.current;E.textMatrix=E.lineMatrix=[b,x,w,k,T,A],E.textMatrixScale=Math.hypot(b,x),E.x=E.lineX=0,E.y=E.lineY=0,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${g(E.fontSize)}px`),E.tspan.setAttributeNS(null,"y",g(-E.y)),E.txtElement=this.svgFactory.createElement("svg:text"),E.txtElement.appendChild(E.tspan)}beginText(){let b=this.current;b.x=b.lineX=0,b.y=b.lineY=0,b.textMatrix=o.IDENTITY_MATRIX,b.lineMatrix=o.IDENTITY_MATRIX,b.textMatrixScale=1,b.tspan=this.svgFactory.createElement("svg:tspan"),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtgrp=this.svgFactory.createElement("svg:g"),b.xcoords=[],b.ycoords=[]}moveText(b,x){let w=this.current;w.x=w.lineX+=b,w.y=w.lineY+=x,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${g(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",g(-w.y))}showText(b){let x=this.current,w=x.font,k=x.fontSize;if(k===0)return;let T=x.fontSizeScale,A=x.charSpacing,E=x.wordSpacing,F=x.fontDirection,z=x.textHScale*F,L=w.vertical,R=L?1:-1,N=w.defaultVMetrics,V=k*x.fontMatrix[0],W=0;for(let Z of b){if(Z===null){W+=F*E;continue}else if((0,o.isNum)(Z)){W+=R*Z*k/1e3;continue}let P=(Z.isSpace?E:0)+A,_=Z.fontChar,I,U,M=Z.width;if(L){let H,Y=Z.vmetric||N;H=Z.vmetric?Y[1]:M*.5,H=-H*V;let ae=Y[2]*V;M=Y?-Y[0]:M,I=H/T,U=(W+ae)/T}else I=W/T,U=0;(Z.isInFont||w.missingFile)&&(x.xcoords.push(x.x+I),L&&x.ycoords.push(-x.y+U),x.tspan.textContent+=_);let $;L?$=M*V-P*F:$=M*V+P*F,W+=$}x.tspan.setAttributeNS(null,"x",x.xcoords.map(g).join(" ")),L?x.tspan.setAttributeNS(null,"y",x.ycoords.map(g).join(" ")):x.tspan.setAttributeNS(null,"y",g(-x.y)),L?x.y-=W:x.x+=W*z,x.tspan.setAttributeNS(null,"font-family",x.fontFamily),x.tspan.setAttributeNS(null,"font-size",`${g(x.fontSize)}px`),x.fontStyle!==l.fontStyle&&x.tspan.setAttributeNS(null,"font-style",x.fontStyle),x.fontWeight!==l.fontWeight&&x.tspan.setAttributeNS(null,"font-weight",x.fontWeight);let me=x.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(me===o.TextRenderingMode.FILL||me===o.TextRenderingMode.FILL_STROKE?(x.fillColor!==l.fillColor&&x.tspan.setAttributeNS(null,"fill",x.fillColor),x.fillAlpha<1&&x.tspan.setAttributeNS(null,"fill-opacity",x.fillAlpha)):x.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?x.tspan.setAttributeNS(null,"fill","transparent"):x.tspan.setAttributeNS(null,"fill","none"),me===o.TextRenderingMode.STROKE||me===o.TextRenderingMode.FILL_STROKE){let Z=1/(x.textMatrixScale||1);this._setStrokeAttributes(x.tspan,Z)}let ie=x.textMatrix;x.textRise!==0&&(ie=ie.slice(),ie[5]+=x.textRise),x.txtElement.setAttributeNS(null,"transform",`${v(ie)} scale(${g(z)}, -1)`),x.txtElement.setAttributeNS(c,"xml:space","preserve"),x.txtElement.appendChild(x.tspan),x.txtgrp.appendChild(x.txtElement),this._ensureTransformGroup().appendChild(x.txtElement)}setLeadingMoveText(b,x){this.setLeading(-x),this.moveText(b,x)}addFontStyle(b){if(!b.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));let x=(0,o.createObjectURL)(b.data,b.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${b.loadedName}"; src: url(${x}); }
`}setFont(b){let x=this.current,w=this.commonObjs.get(b[0]),k=b[1];x.font=w,this.embedFonts&&!w.missingFile&&!this.embeddedFonts[w.loadedName]&&(this.addFontStyle(w),this.embeddedFonts[w.loadedName]=w),x.fontMatrix=w.fontMatrix||o.FONT_IDENTITY_MATRIX;let T="normal";w.black?T="900":w.bold&&(T="bold");let A=w.italic?"italic":"normal";k<0?(k=-k,x.fontDirection=-1):x.fontDirection=1,x.fontSize=k,x.fontFamily=w.loadedName,x.fontWeight=T,x.fontStyle=A,x.tspan=this.svgFactory.createElement("svg:tspan"),x.tspan.setAttributeNS(null,"y",g(-x.y)),x.xcoords=[],x.ycoords=[]}endText(){var x;let b=this.current;b.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((x=b.txtElement)==null?void 0:x.hasChildNodes())&&(b.element=b.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(b){b>0&&(this.current.lineWidth=b)}setLineCap(b){this.current.lineCap=u[b]}setLineJoin(b){this.current.lineJoin=p[b]}setMiterLimit(b){this.current.miterLimit=b}setStrokeAlpha(b){this.current.strokeAlpha=b}setStrokeRGBColor(b,x,w){this.current.strokeColor=o.Util.makeHexColor(b,x,w)}setFillAlpha(b){this.current.fillAlpha=b}setFillRGBColor(b,x,w){this.current.fillColor=o.Util.makeHexColor(b,x,w),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(b){this.current.strokeColor=this._makeColorN_Pattern(b)}setFillColorN(b){this.current.fillColor=this._makeColorN_Pattern(b)}shadingFill(b){let x=this.viewport.width,w=this.viewport.height,k=o.Util.inverseTransform(this.transformMatrix),T=o.Util.applyTransform([0,0],k),A=o.Util.applyTransform([0,w],k),E=o.Util.applyTransform([x,0],k),F=o.Util.applyTransform([x,w],k),z=Math.min(T[0],A[0],E[0],F[0]),L=Math.min(T[1],A[1],E[1],F[1]),R=Math.max(T[0],A[0],E[0],F[0]),N=Math.max(T[1],A[1],E[1],F[1]),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",z),V.setAttributeNS(null,"y",L),V.setAttributeNS(null,"width",R-z),V.setAttributeNS(null,"height",N-L),V.setAttributeNS(null,"fill",this._makeShadingPattern(b)),this.current.fillAlpha<1&&V.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(V)}_makeColorN_Pattern(b){return b[0]==="TilingPattern"?this._makeTilingPattern(b):this._makeShadingPattern(b)}_makeTilingPattern(b){let x=b[1],w=b[2],k=b[3]||o.IDENTITY_MATRIX,[T,A,E,F]=b[4],z=b[5],L=b[6],R=b[7],N=`shading${C++}`,[V,W,me,ie]=o.Util.normalizeRect([...o.Util.applyTransform([T,A],k),...o.Util.applyTransform([E,F],k)]),[Z,P]=o.Util.singularValueDecompose2dScale(k),_=z*Z,I=L*P,U=this.svgFactory.createElement("svg:pattern");U.setAttributeNS(null,"id",N),U.setAttributeNS(null,"patternUnits","userSpaceOnUse"),U.setAttributeNS(null,"width",_),U.setAttributeNS(null,"height",I),U.setAttributeNS(null,"x",`${V}`),U.setAttributeNS(null,"y",`${W}`);let M=this.svg,$=this.transformMatrix,H=this.current.fillColor,Y=this.current.strokeColor,ae=this.svgFactory.create(me-V,ie-W);if(this.svg=ae,this.transformMatrix=k,R===2){let le=o.Util.makeHexColor(...x);this.current.fillColor=le,this.current.strokeColor=le}return this.executeOpTree(this.convertOpList(w)),this.svg=M,this.transformMatrix=$,this.current.fillColor=H,this.current.strokeColor=Y,U.appendChild(ae.childNodes[0]),this.defs.appendChild(U),`url(#${N})`}_makeShadingPattern(b){switch(b[0]){case"RadialAxial":let x=`shading${C++}`,w=b[3],k;switch(b[1]){case"axial":let T=b[4],A=b[5];k=this.svgFactory.createElement("svg:linearGradient"),k.setAttributeNS(null,"id",x),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"x1",T[0]),k.setAttributeNS(null,"y1",T[1]),k.setAttributeNS(null,"x2",A[0]),k.setAttributeNS(null,"y2",A[1]);break;case"radial":let E=b[4],F=b[5],z=b[6],L=b[7];k=this.svgFactory.createElement("svg:radialGradient"),k.setAttributeNS(null,"id",x),k.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),k.setAttributeNS(null,"cx",F[0]),k.setAttributeNS(null,"cy",F[1]),k.setAttributeNS(null,"r",L),k.setAttributeNS(null,"fx",E[0]),k.setAttributeNS(null,"fy",E[1]),k.setAttributeNS(null,"fr",z);break;default:throw new Error(`Unknown RadialAxial type: ${b[1]}`)}for(let T of w){let A=this.svgFactory.createElement("svg:stop");A.setAttributeNS(null,"offset",T[0]),A.setAttributeNS(null,"stop-color",T[1]),k.appendChild(A)}return this.defs.appendChild(k),`url(#${x})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${b[0]}`)}}setDash(b,x){this.current.dashArray=b,this.current.dashPhase=x}constructPath(b,x){let w=this.current,k=w.x,T=w.y,A=[],E=0;for(let F of b)switch(F|0){case o.OPS.rectangle:k=x[E++],T=x[E++];let z=x[E++],L=x[E++],R=k+z,N=T+L;A.push("M",g(k),g(T),"L",g(R),g(T),"L",g(R),g(N),"L",g(k),g(N),"Z");break;case o.OPS.moveTo:k=x[E++],T=x[E++],A.push("M",g(k),g(T));break;case o.OPS.lineTo:k=x[E++],T=x[E++],A.push("L",g(k),g(T));break;case o.OPS.curveTo:k=x[E+4],T=x[E+5],A.push("C",g(x[E]),g(x[E+1]),g(x[E+2]),g(x[E+3]),g(k),g(T)),E+=6;break;case o.OPS.curveTo2:A.push("C",g(k),g(T),g(x[E]),g(x[E+1]),g(x[E+2]),g(x[E+3])),k=x[E+2],T=x[E+3],E+=4;break;case o.OPS.curveTo3:k=x[E+2],T=x[E+3],A.push("C",g(x[E]),g(x[E+1]),g(k),g(T),g(k),g(T)),E+=4;break;case o.OPS.closePath:A.push("Z");break}A=A.join(" "),w.path&&b.length>0&&b[0]!==o.OPS.rectangle&&b[0]!==o.OPS.moveTo?A=w.path.getAttributeNS(null,"d")+A:(w.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(w.path)),w.path.setAttributeNS(null,"d",A),w.path.setAttributeNS(null,"fill","none"),w.element=w.path,w.setCurrentPoint(k,T)}endPath(){let b=this.current;if(b.path=null,!this.pendingClip)return;if(!b.element){this.pendingClip=null;return}let x=`clippath${y++}`,w=this.svgFactory.createElement("svg:clipPath");w.setAttributeNS(null,"id",x),w.setAttributeNS(null,"transform",v(this.transformMatrix));let k=b.element.cloneNode(!0);if(this.pendingClip==="evenodd"?k.setAttributeNS(null,"clip-rule","evenodd"):k.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,w.appendChild(k),this.defs.appendChild(w),b.activeClipUrl){b.clipGroup=null;for(let T of this.extraStack)T.clipGroup=null;w.setAttributeNS(null,"clip-path",b.activeClipUrl)}b.activeClipUrl=`url(#${x})`,this.tgrp=null}clip(b){this.pendingClip=b}closePath(){let b=this.current;if(b.path){let x=`${b.path.getAttributeNS(null,"d")}Z`;b.path.setAttributeNS(null,"d",x)}}setLeading(b){this.current.leading=-b}setTextRise(b){this.current.textRise=b}setTextRenderingMode(b){this.current.textRenderingMode=b}setHScale(b){this.current.textHScale=b/100}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(let[x,w]of b)switch(x){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w);break;case"CA":this.setStrokeAlpha(w);break;case"ca":this.setFillAlpha(w);break;default:(0,o.warn)(`Unimplemented graphic state operator ${x}`);break}}fill(){let b=this.current;b.element&&(b.element.setAttributeNS(null,"fill",b.fillColor),b.element.setAttributeNS(null,"fill-opacity",b.fillAlpha),this.endPath())}stroke(){let b=this.current;b.element&&(this._setStrokeAttributes(b.element),b.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(b,x=1){let w=this.current,k=w.dashArray;x!==1&&k.length>0&&(k=k.map(function(T){return x*T})),b.setAttributeNS(null,"stroke",w.strokeColor),b.setAttributeNS(null,"stroke-opacity",w.strokeAlpha),b.setAttributeNS(null,"stroke-miterlimit",g(w.miterLimit)),b.setAttributeNS(null,"stroke-linecap",w.lineCap),b.setAttributeNS(null,"stroke-linejoin",w.lineJoin),b.setAttributeNS(null,"stroke-width",g(x*w.lineWidth)+"px"),b.setAttributeNS(null,"stroke-dasharray",k.map(g).join(" ")),b.setAttributeNS(null,"stroke-dashoffset",g(x*w.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width","1px"),b.setAttributeNS(null,"height","1px"),b.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(b)}paintImageXObject(b){let x=b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b);if(!x){(0,o.warn)(`Dependent image with object ID ${b} is not ready yet`);return}this.paintInlineImageXObject(x)}paintInlineImageXObject(b,x){let w=b.width,k=b.height,T=h(b,this.forceDataSchema,!!x),A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y","0"),A.setAttributeNS(null,"width",g(w)),A.setAttributeNS(null,"height",g(k)),this.current.element=A,this.clip("nonzero");let E=this.svgFactory.createElement("svg:image");E.setAttributeNS(d,"xlink:href",T),E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y",g(-k)),E.setAttributeNS(null,"width",g(w)+"px"),E.setAttributeNS(null,"height",g(k)+"px"),E.setAttributeNS(null,"transform",`scale(${g(1/w)} ${g(-1/k)})`),x?x.appendChild(E):this._ensureTransformGroup().appendChild(E)}paintImageMaskXObject(b){let x=this.current,w=b.width,k=b.height,T=x.fillColor;x.maskId=`mask${S++}`;let A=this.svgFactory.createElement("svg:mask");A.setAttributeNS(null,"id",x.maskId);let E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",g(w)),E.setAttributeNS(null,"height",g(k)),E.setAttributeNS(null,"fill",T),E.setAttributeNS(null,"mask",`url(#${x.maskId})`),this.defs.appendChild(A),this._ensureTransformGroup().appendChild(E),this.paintInlineImageXObject(b,A)}paintFormXObjectBegin(b,x){if(Array.isArray(b)&&b.length===6&&this.transform(b[0],b[1],b[2],b[3],b[4],b[5]),x){let w=x[2]-x[0],k=x[3]-x[1],T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x",x[0]),T.setAttributeNS(null,"y",x[1]),T.setAttributeNS(null,"width",g(w)),T.setAttributeNS(null,"height",g(k)),this.current.element=T,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(b){let x=this.svgFactory.create(b.width,b.height),w=this.svgFactory.createElement("svg:defs");x.appendChild(w),this.defs=w;let k=this.svgFactory.createElement("svg:g");return k.setAttributeNS(null,"transform",v(b.transform)),x.appendChild(k),this.svg=k,x}_ensureClipGroup(){if(!this.current.clipGroup){let b=this.svgFactory.createElement("svg:g");b.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(b),this.current.clipGroup=b}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var o=r(2),i=r(17);class s{static setupStorage(l,c,d,u,p){let h=u.getValue(c,{value:null});switch(d.name){case"textarea":if(h.value!==null&&(l.textContent=h.value),p==="print")break;l.addEventListener("input",f=>{u.setValue(c,{value:f.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(h.value===d.attributes.xfaOn?l.setAttribute("checked",!0):h.value===d.attributes.xfaOff&&l.removeAttribute("checked"),p==="print")break;l.addEventListener("change",f=>{u.setValue(c,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(h.value!==null&&l.setAttribute("value",h.value),p==="print")break;l.addEventListener("input",f=>{u.setValue(c,{value:f.target.value})})}break;case"select":if(h.value!==null)for(let f of d.children)f.attributes.value===h.value&&(f.attributes.selected=!0);l.addEventListener("input",f=>{let m=f.target.options,g=m.selectedIndex===-1?"":m[m.selectedIndex].value;u.setValue(c,{value:g})});break}}static setAttributes({html:l,element:c,storage:d=null,intent:u,linkService:p}){var m;let{attributes:h}=c,f=l instanceof HTMLAnchorElement;h.type==="radio"&&(h.name=`${h.name}-${u}`);for(let[g,v]of Object.entries(h))if(!(v==null||g==="dataId"))if(g!=="style")if(g==="textContent")l.textContent=v;else if(g==="class")l.setAttribute(g,v.join(" "));else{if(f&&(g==="href"||g==="newWindow"))continue;l.setAttribute(g,v)}else Object.assign(l.style,v);f&&(p.addLinkAttributes||(0,o.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(m=p.addLinkAttributes)==null||m.call(p,l,h.href,h.newWindow)),d&&h.dataId&&this.setupStorage(l,h.dataId,c,d)}static render(l){var y;let c=l.annotationStorage,d=l.linkService,u=l.xfa,p=l.intent||"display",h=document.createElement(u.name);u.attributes&&this.setAttributes({html:h,element:u,intent:p,linkService:d});let f=[[u,-1,h]],m=l.div;m.appendChild(h);let g=`matrix(${l.viewport.transform.join(",")})`;m.style.transform=g,m.setAttribute("class","xfaLayer xfaFont");let v=[];for(;f.length>0;){let[S,C,b]=f[f.length-1];if(C+1===S.children.length){f.pop();continue}let x=S.children[++f[f.length-1][1]];if(x===null)continue;let{name:w}=x;if(w==="#text"){let T=document.createTextNode(x.value);v.push(T),b.appendChild(T);continue}let k;if(((y=x==null?void 0:x.attributes)==null?void 0:y.xmlns)?k=document.createElementNS(x.attributes.xmlns,w):k=document.createElement(w),b.appendChild(k),x.attributes&&this.setAttributes({html:k,element:x,storage:c,intent:p,linkService:d}),x.children&&x.children.length>0)f.push([x,-1,k]);else if(x.value){let T=document.createTextNode(x.value);i.XfaText.shouldBuildText(w)&&v.push(T),k.appendChild(T)}}for(let S of m.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:v}}static update(l){let c=`matrix(${l.viewport.transform.join(",")})`;l.div.style.transform=c,l.div.hidden=!1}}e.XfaLayer=s},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var o=r(2),i=r(24);let s=Za("fs"),a=Za("http"),l=Za("https"),c=t$(),d=/^file:\/\/\/[a-zA-Z]:\//;function u(C){let b=c.parse(C);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(C)?c.parse(`file:///${C}`):(b.host||(b.protocol="file:"),b)}class p{constructor(b){this.source=b,this.url=u(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b,x;return(x=(b=this._fullRequestReader)==null?void 0:b._loaded)!=null?x:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new y(this):new g(this),this._fullRequestReader}getRangeReader(b,x){if(x<=this._progressiveDataLength)return null;let w=this.isFsUrl?new S(this,b,x):new v(this,b,x);return this._rangeRequestReaders.push(w),w}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b);for(let x of this._rangeRequestReaders.slice(0))x.cancel(b)}}e.PDFNodeStream=p;class h{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;let x=b.source;this._contentLength=x.length,this._loaded=0,this._filename=null,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let b=this._readableStream.read();return b===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=b.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",x=>{this._error(x)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();let x=b.source;this._isStreamingSupported=!x.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let b=this._readableStream.read();return b===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=b.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",x=>{this._error(x)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(C,b){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:b}}class g extends h{constructor(b){super(b);let x=w=>{if(w.statusCode===404){let E=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E,this._headersCapability.reject(E);return}this._headersCapability.resolve(),this._setReadableStream(w);let k=E=>this._readableStream.headers[E.toLowerCase()],{allowRangeRequests:T,suggestedLength:A}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:k,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=A||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(k)};this._request=null,this._url.protocol==="http:"?this._request=a.request(m(this._url,b.httpHeaders),x):this._request=l.request(m(this._url,b.httpHeaders),x),this._request.on("error",w=>{this._storedError=w,this._headersCapability.reject(w)}),this._request.end()}}class v extends f{constructor(b,x,w){super(b);this._httpHeaders={};for(let T in b.httpHeaders){let A=b.httpHeaders[T];typeof A!="undefined"&&(this._httpHeaders[T]=A)}this._httpHeaders.Range=`bytes=${x}-${w-1}`;let k=T=>{if(T.statusCode===404){let A=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A;return}this._setReadableStream(T)};this._request=null,this._url.protocol==="http:"?this._request=a.request(m(this._url,this._httpHeaders),k):this._request=l.request(m(this._url,this._httpHeaders),k),this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class y extends h{constructor(b){super(b);let x=decodeURIComponent(this._url.path);d.test(this._url.href)&&(x=x.replace(/^\//,"")),s.lstat(x,(w,k)=>{if(w){w.code==="ENOENT"&&(w=new o.MissingPDFException(`Missing PDF "${x}".`)),this._storedError=w,this._headersCapability.reject(w);return}this._contentLength=k.size,this._setReadableStream(s.createReadStream(x)),this._headersCapability.resolve()})}}class S extends f{constructor(b,x,w){super(b);let k=decodeURIComponent(this._url.path);d.test(this._url.href)&&(k=k.replace(/^\//,"")),this._setReadableStream(s.createReadStream(k,{start:x,end:w-1}))}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=c,e.extractFilenameFromHeader=l,e.validateRangeRequestCapabilities=a,e.validateResponseStatus=d;var o=r(2),i=r(25),s=r(1);function a({getResponseHeader:u,isHttp:p,rangeChunkSize:h,disableRange:f}){(0,o.assert)(h>0,"Range chunk size must be larger than zero");let m={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(u("Content-Length"),10);return!Number.isInteger(g)||(m.suggestedLength=g,g<=2*h)||f||!p||u("Accept-Ranges")!=="bytes"||(u("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function l(u){let p=u("Content-Disposition");if(p){let h=(0,i.getFilenameFromContentDispositionHeader)(p);if(h.includes("%"))try{h=decodeURIComponent(h)}catch(f){}if((0,s.isPdfFile)(h))return h}return null}function c(u,p){return u===404||u===0&&p.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+p+'".'):new o.UnexpectedResponseException(`Unexpected server response (${u}) while retrieving PDF "${p}".`,u)}function d(u){return u===200||u===206}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var o=r(2);function i(s){let a=!0,l=c("filename\\*","i").exec(s);if(l){l=l[1];let g=h(l);return g=unescape(g),g=f(g),g=m(g),u(g)}if(l=p(s),l){let g=m(l);return u(g)}if(l=c("filename","i").exec(s),l){l=l[1];let g=h(l);return g=m(g),u(g)}function c(g,v){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function d(g,v){if(g){if(!/^[\x00-\xFF]+$/.test(v))return v;try{let y=new TextDecoder(g,{fatal:!0}),S=(0,o.stringToBytes)(v);v=y.decode(S),a=!1}catch(y){if(/^utf-?8$/i.test(g))try{v=decodeURIComponent(escape(v)),a=!1}catch(S){}}}return v}function u(g){return a&&/[\x80-\xff]/.test(g)&&(g=d("utf-8",g),a&&(g=d("iso-8859-1",g))),g}function p(g){let v=[],y,S=c("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=S.exec(g))!==null;){let[,b,x,w]=y;if(b=parseInt(b,10),b in v){if(b===0)break;continue}v[b]=[x,w]}let C=[];for(let b=0;b<v.length&&b in v;++b){let[x,w]=v[b];w=h(w),x&&(w=unescape(w),b===0&&(w=f(w))),C.push(w)}return C.join("")}function h(g){if(g.startsWith('"')){let v=g.slice(1).split('\\"');for(let y=0;y<v.length;++y){let S=v[y].indexOf('"');S!==-1&&(v[y]=v[y].slice(0,S),v.length=y+1),v[y]=v[y].replace(/\\(.)/g,"$1")}g=v.join('"')}return g}function f(g){let v=g.indexOf("'");if(v===-1)return g;let y=g.slice(0,v),C=g.slice(v+1).replace(/^[^']*'/,"");return d(y,C)}function m(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,y,S,C){if(S==="q"||S==="Q")return C=C.replace(/_/g," "),C=C.replace(/=([0-9a-fA-F]{2})/g,function(b,x){return String.fromCharCode(parseInt(x,16))}),d(y,C);try{C=atob(C)}catch(b){}return d(y,C)})}return""}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var o=r(2),i=r(24);let s=200,a=206;function l(h){let f=h.response;return typeof f!="string"?f:(0,o.stringToBytes)(f).buffer}class c{constructor(f,m={}){this.url=f,this.isHttp=/^https?:/i.test(f),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.getXhr=m.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(f,m,g){let v={begin:f,end:m};for(let y in g)v[y]=g[y];return this.request(v)}requestFull(f){return this.request(f)}request(f){let m=this.getXhr(),g=this.currXhrId++,v=this.pendingRequests[g]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(let y in this.httpHeaders){let S=this.httpHeaders[y];typeof S!="undefined"&&m.setRequestHeader(y,S)}return this.isHttp&&"begin"in f&&"end"in f?(m.setRequestHeader("Range",`bytes=${f.begin}-${f.end-1}`),v.expectedStatus=a):v.expectedStatus=s,m.responseType="arraybuffer",f.onError&&(m.onerror=function(y){f.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,g),m.onprogress=this.onProgress.bind(this,g),v.onHeadersReceived=f.onHeadersReceived,v.onDone=f.onDone,v.onError=f.onError,v.onProgress=f.onProgress,m.send(null),g}onProgress(f,m){var v;let g=this.pendingRequests[f];!g||(v=g.onProgress)==null||v.call(g,m)}onStateChange(f,m){var b,x,w;let g=this.pendingRequests[f];if(!g)return;let v=g.xhr;if(v.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),v.readyState!==4||!(f in this.pendingRequests))return;if(delete this.pendingRequests[f],v.status===0&&this.isHttp){(b=g.onError)==null||b.call(g,v.status);return}let y=v.status||s;if(!(y===s&&g.expectedStatus===a)&&y!==g.expectedStatus){(x=g.onError)==null||x.call(g,v.status);return}let C=l(v);if(y===a){let k=v.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);g.onDone({begin:parseInt(T[1],10),chunk:C})}else C?g.onDone({begin:0,chunk:C}):(w=g.onError)==null||w.call(g,v.status)}getRequestXhr(f){return this.pendingRequests[f].xhr}isPendingRequest(f){return f in this.pendingRequests}abortRequest(f){let m=this.pendingRequests[f].xhr;delete this.pendingRequests[f],m.abort()}}class d{constructor(f){this._source=f,this._manager=new c(f.url,{httpHeaders:f.httpHeaders,withCredentials:f.withCredentials}),this._rangeChunkSize=f.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(f){let m=this._rangeRequestReaders.indexOf(f);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new u(this._manager,this._source),this._fullRequestReader}getRangeReader(f,m){let g=new p(this._manager,f,m);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(f){var m;(m=this._fullRequestReader)==null||m.cancel(f);for(let g of this._rangeRequestReaders.slice(0))g.cancel(f)}}e.PDFNetworkStream=d;class u{constructor(f,m){this._manager=f;let g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=f.requestFull(g),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let f=this._fullRequestId,m=this._manager.getRequestXhr(f),g=S=>m.getResponseHeader(S),{allowRangeRequests:v,suggestedLength:y}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(f),this._headersReceivedCapability.resolve()}_onDone(f){if(f&&(this._requests.length>0?this._requests.shift().resolve({value:f.chunk,done:!1}):this._cachedChunks.push(f.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(f){this._storedError=(0,i.createResponseStatusError)(f,this._url),this._headersReceivedCapability.reject(this._storedError);for(let m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(f){var m;(m=this.onProgress)==null||m.call(this,{loaded:f.loaded,total:f.lengthComputable?f.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let f=(0,o.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0,this._headersReceivedCapability.reject(f);for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class p{constructor(f,m,g){this._manager=f;let v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._requestId=f.requestRange(m,g,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var f;(f=this.onClosed)==null||f.call(this,this)}_onDone(f){let m=f.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(f){this._storedError=(0,i.createResponseStatusError)(f,this._url);for(let m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(f){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:f.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};let f=(0,o.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var o=r(2),i=r(24);function s(u,p,h){return{method:"GET",headers:u,signal:h==null?void 0:h.signal,mode:"cors",credentials:p?"include":"same-origin",redirect:"follow"}}function a(u){let p=new Headers;for(let h in u){let f=u[h];typeof f!="undefined"&&p.append(h,f)}return p}class l{constructor(p){this.source=p,this.isHttp=/^https?:/i.test(p.url),this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p,h;return(h=(p=this._fullRequestReader)==null?void 0:p._loaded)!=null?h:0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(p,h){if(h<=this._progressiveDataLength)return null;let f=new d(this,p,h);return this._rangeRequestReaders.push(f),f}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(let h of this._rangeRequestReaders.slice(0))h.cancel(p)}}e.PDFFetchStream=l;class c{constructor(p){this._stream=p,this._reader=null,this._loaded=0,this._filename=null;let h=p.source;this._withCredentials=h.withCredentials||!1,this._contentLength=h.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._headers=a(this._stream.httpHeaders);let f=h.url;fetch(f,s(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,i.validateResponseStatus)(m.status))throw(0,i.createResponseStatusError)(m.status,f);this._reader=m.body.getReader(),this._headersCapability.resolve();let g=S=>m.headers.get(S),{allowRangeRequests:v,suggestedLength:y}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=y||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:p,done:h}=await this._reader.read();return h?{value:p,done:h}:(this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){this._reader&&this._reader.cancel(p),this._abortController&&this._abortController.abort()}}class d{constructor(p,h,f){this._stream=p,this._reader=null,this._loaded=0;let m=p.source;this._withCredentials=m.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!m.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${h}-${f-1}`);let g=m.url;fetch(g,s(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,i.validateResponseStatus)(v.status))throw(0,i.createResponseStatusError)(v.status,g);this._readCapability.resolve(),this._reader=v.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:p,done:h}=await this._reader.read();return h?{value:p,done:h}:(this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){this._reader&&this._reader.cancel(p),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLinkAttributes",{enumerable:!0,get:function(){return e.addLinkAttributes}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(t,"LinkTarget",{enumerable:!0,get:function(){return e.LinkTarget}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(t,"createObjectURL",{enumerable:!0,get:function(){return r.createObjectURL}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return r.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(t,"removeNullCharacters",{enumerable:!0,get:function(){return r.removeNullCharacters}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return r.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return o.build}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return o.getDocument}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return o.LoopbackPort}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return o.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return o.PDFWorker}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return o.version}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return i.AnnotationLayer}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return s.GlobalWorkerOptions}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return l.renderTextLayer}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}});var e=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),i=__w_pdfjs_require__(18),s=__w_pdfjs_require__(12),a=__w_pdfjs_require__(4),l=__w_pdfjs_require__(20),c=__w_pdfjs_require__(21),d=__w_pdfjs_require__(22);let u="2.11.338",p="dedff3c98";if(a.isNodeJS){let{PDFNodeStream:h}=__w_pdfjs_require__(23);(0,o.setPDFNetworkStreamFactory)(f=>new h(f))}else{let{PDFNetworkStream:h}=__w_pdfjs_require__(26),{PDFFetchStream:f}=__w_pdfjs_require__(27);(0,o.setPDFNetworkStreamFactory)(m=>(0,e.isValidFetchUrl)(m.url)?new f(m):new h(m))}})(),__webpack_exports__})()})});var PB=st(Cw=>{var ype,Cpe,Spe,xpe;(function(t){var e="undefined",r=e!==typeof Buffer&&Buffer,o=e!==typeof Uint8Array&&Uint8Array,i=e!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||x,l=4294967296,c=16777216,d;ype=u("Uint64BE",!0,!0),Cpe=u("Int64BE",!0,!1),Spe=u("Uint64LE",!1,!0),xpe=u("Int64LE",!1,!1);function u(w,k,T){var A=k?0:4,E=k?4:0,F=k?0:3,z=k?1:2,L=k?2:1,R=k?3:0,N=k?y:C,V=k?S:b,W=Z.prototype,me="is"+w,ie="_"+me;return W.buffer=void 0,W.offset=0,W[ie]=!0,W.toNumber=U,W.toString=M,W.toJSON=U,W.toArray=p,r&&(W.toBuffer=h),o&&(W.toArrayBuffer=f),Z[me]=P,t[w]=Z,Z;function Z(Y,ae,le,xe){return this instanceof Z?_(this,Y,ae,le,xe):new Z(Y,ae,le,xe)}function P(Y){return!!(Y&&Y[ie])}function _(Y,ae,le,xe,Se){if(o&&i&&(ae instanceof i&&(ae=new o(ae)),xe instanceof i&&(xe=new o(xe))),!ae&&!le&&!xe&&!d){Y.buffer=v(s,0);return}if(!m(ae,le)){var je=d||Array;Se=le,xe=ae,le=0,ae=new je(8)}Y.buffer=ae,Y.offset=le|=0,e!==typeof xe&&(typeof xe=="string"?I(ae,le,xe,Se||10):m(xe,Se)?g(ae,le,xe,Se):typeof Se=="number"?($(ae,le+A,xe),$(ae,le+E,Se)):xe>0?N(ae,le,xe):xe<0?V(ae,le,xe):g(ae,le,s,0))}function I(Y,ae,le,xe){var Se=0,je=le.length,ze=0,Le=0;le[0]==="-"&&Se++;for(var dt=Se;Se<je;){var mt=parseInt(le[Se++],xe);if(!(mt>=0))break;Le=Le*xe+mt,ze=ze*xe+Math.floor(Le/l),Le%=l}dt&&(ze=~ze,Le?Le=l-Le:ze++),$(Y,ae+A,ze),$(Y,ae+E,Le)}function U(){var Y=this.buffer,ae=this.offset,le=H(Y,ae+A),xe=H(Y,ae+E);return T||(le|=0),le?le*l+xe:xe}function M(Y){var ae=this.buffer,le=this.offset,xe=H(ae,le+A),Se=H(ae,le+E),je="",ze=!T&&xe&2147483648;for(ze&&(xe=~xe,Se=l-Se),Y=Y||10;;){var Le=xe%Y*l+Se;if(xe=Math.floor(xe/Y),Se=Math.floor(Le/Y),je=(Le%Y).toString(Y)+je,!xe&&!Se)break}return ze&&(je="-"+je),je}function $(Y,ae,le){Y[ae+R]=le&255,le=le>>8,Y[ae+L]=le&255,le=le>>8,Y[ae+z]=le&255,le=le>>8,Y[ae+F]=le&255}function H(Y,ae){return Y[ae+F]*c+(Y[ae+z]<<16)+(Y[ae+L]<<8)+Y[ae+R]}}function p(w){var k=this.buffer,T=this.offset;return d=null,w!==!1&&a(k)?k.length===8?k:k.slice(T,T+8):v(k,T)}function h(w){var k=this.buffer,T=this.offset;return d=r,w!==!1&&r.isBuffer(k)?k.length===8?k:k.slice(T,T+8):r.from(f.call(this,w))}function f(w){var k=this.buffer,T=this.offset,A=k.buffer;if(d=o,w!==!1&&!k.offset&&A instanceof i)return A.byteLength===8?A:A.slice(T,T+8);var E=new o(8);return g(E,0,k,T),E.buffer}function m(w,k){var T=w&&w.length;return k|=0,T&&k+8<=T&&typeof w[k]!="string"}function g(w,k,T,A){k|=0,A|=0;for(var E=0;E<8;E++)w[k++]=T[A++]&255}function v(w,k){return Array.prototype.slice.call(w,k,k+8)}function y(w,k,T){for(var A=k+8;A>k;)w[--A]=T&255,T/=256}function S(w,k,T){var A=k+8;for(T++;A>k;)w[--A]=-T&255^255,T/=256}function C(w,k,T){for(var A=k+8;k<A;)w[k++]=T&255,T/=256}function b(w,k,T){var A=k+8;for(T++;k<A;)w[k++]=-T&255^255,T/=256}function x(w){return!!w&&Object.prototype.toString.call(w)=="[object Array]"}})(typeof Cw=="object"&&typeof Cw.nodeName!="string"?Cw:Cw||{})});var a$=st((b4e,s$)=>{var Sw=1e3,xw=Sw*60,ww=xw*60,Tw=ww*24,wpe=Tw*365.25;s$.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Tpe(t);if(r==="number"&&isNaN(t)===!1)return e.long?kpe(t):Dpe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Tpe(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),o=(e[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return r*wpe;case"days":case"day":case"d":return r*Tw;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ww;case"minutes":case"minute":case"mins":case"min":case"m":return r*xw;case"seconds":case"second":case"secs":case"sec":case"s":return r*Sw;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Dpe(t){return t>=Tw?Math.round(t/Tw)+"d":t>=ww?Math.round(t/ww)+"h":t>=xw?Math.round(t/xw)+"m":t>=Sw?Math.round(t/Sw)+"s":t+"ms"}function kpe(t){return iE(t,Tw,"day")||iE(t,ww,"hour")||iE(t,xw,"minute")||iE(t,Sw,"second")||t+" ms"}function iE(t,e,r){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}});var c$=st((En,l$)=>{En=l$.exports=EB.debug=EB.default=EB;En.coerce=Rpe;En.disable=Ape;En.enable=_pe;En.enabled=Ipe;En.humanize=a$();En.instances=[];En.names=[];En.skips=[];En.formatters={};function Ppe(t){var e=0,r;for(r in t)e=(e<<5)-e+t.charCodeAt(r),e|=0;return En.colors[Math.abs(e)%En.colors.length]}function EB(t){var e;function r(){if(!!r.enabled){var o=r,i=+new Date,s=i-(e||i);o.diff=s,o.prev=e,o.curr=i,e=i;for(var a=new Array(arguments.length),l=0;l<a.length;l++)a[l]=arguments[l];a[0]=En.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(u,p){if(u==="%%")return u;c++;var h=En.formatters[p];if(typeof h=="function"){var f=a[c];u=h.call(o,f),a.splice(c,1),c--}return u}),En.formatArgs.call(o,a);var d=r.log||En.log||console.log.bind(console);d.apply(o,a)}}return r.namespace=t,r.enabled=En.enabled(t),r.useColors=En.useColors(),r.color=Ppe(t),r.destroy=Epe,typeof En.init=="function"&&En.init(r),En.instances.push(r),r}function Epe(){var t=En.instances.indexOf(this);return t!==-1?(En.instances.splice(t,1),!0):!1}function _pe(t){En.save(t),En.names=[],En.skips=[];var e,r=(typeof t=="string"?t:"").split(/[\s,]+/),o=r.length;for(e=0;e<o;e++)!r[e]||(t=r[e].replace(/\*/g,".*?"),t[0]==="-"?En.skips.push(new RegExp("^"+t.substr(1)+"$")):En.names.push(new RegExp("^"+t+"$")));for(e=0;e<En.instances.length;e++){var i=En.instances[e];i.enabled=En.enabled(i.namespace)}}function Ape(){En.enable("")}function Ipe(t){if(t[t.length-1]==="*")return!0;var e,r;for(e=0,r=En.skips.length;e<r;e++)if(En.skips[e].test(t))return!1;for(e=0,r=En.names.length;e<r;e++)if(En.names[e].test(t))return!0;return!1}function Rpe(t){return t instanceof Error?t.stack||t.message:t}});var _B=st((Ba,u$)=>{Ba=u$.exports=c$();Ba.log=Npe;Ba.formatArgs=Mpe;Ba.save=Bpe;Ba.load=d$;Ba.useColors=Fpe;Ba.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:Lpe();Ba.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Fpe(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Ba.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function Mpe(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+Ba.humanize(this.diff),!!e){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(o++,s==="%c"&&(i=o))}),t.splice(i,0,r)}}function Npe(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function Bpe(t){try{t==null?Ba.storage.removeItem("debug"):Ba.storage.debug=t}catch(e){}}function d$(){var t;try{t=Ba.storage.debug}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}Ba.enable(d$());function Lpe(){try{return window.localStorage}catch(t){}}});var xL=st(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});var m0=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{},Cu=[],Sc=[],Ope=typeof Uint8Array!="undefined"?Uint8Array:Array,AB=!1;function p$(){AB=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Cu[e]=t[e],Sc[t.charCodeAt(e)]=e;Sc["-".charCodeAt(0)]=62,Sc["_".charCodeAt(0)]=63}function zpe(t){AB||p$();var e,r,o,i,s,a,l=t.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=t[l-2]==="="?2:t[l-1]==="="?1:0,a=new Ope(l*3/4-s),o=s>0?l-4:l;var c=0;for(e=0,r=0;e<o;e+=4,r+=3)i=Sc[t.charCodeAt(e)]<<18|Sc[t.charCodeAt(e+1)]<<12|Sc[t.charCodeAt(e+2)]<<6|Sc[t.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=i&255;return s===2?(i=Sc[t.charCodeAt(e)]<<2|Sc[t.charCodeAt(e+1)]>>4,a[c++]=i&255):s===1&&(i=Sc[t.charCodeAt(e)]<<10|Sc[t.charCodeAt(e+1)]<<4|Sc[t.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=i&255),a}function Upe(t){return Cu[t>>18&63]+Cu[t>>12&63]+Cu[t>>6&63]+Cu[t&63]}function Hpe(t,e,r){for(var o,i=[],s=e;s<r;s+=3)o=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(Upe(o));return i.join("")}function h$(t){AB||p$();for(var e,r=t.length,o=r%3,i="",s=[],a=16383,l=0,c=r-o;l<c;l+=a)s.push(Hpe(t,l,l+a>c?c:l+a));return o===1?(e=t[r-1],i+=Cu[e>>2],i+=Cu[e<<4&63],i+="=="):o===2&&(e=(t[r-2]<<8)+t[r-1],i+=Cu[e>>10],i+=Cu[e>>4&63],i+=Cu[e<<2&63],i+="="),s.push(i),s.join("")}function sE(t,e,r,o,i){var s,a,l=i*8-o-1,c=(1<<l)-1,d=c>>1,u=-7,p=r?i-1:0,h=r?-1:1,f=t[e+p];for(p+=h,s=f&(1<<-u)-1,f>>=-u,u+=l;u>0;s=s*256+t[e+p],p+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=o;u>0;a=a*256+t[e+p],p+=h,u-=8);if(s===0)s=1-d;else{if(s===c)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,o),s=s-d}return(f?-1:1)*a*Math.pow(2,s-o)}function f$(t,e,r,o,i,s){var a,l,c,d=s*8-i-1,u=(1<<d)-1,p=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:s-1,m=o?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+p>=1?e+=h/c:e+=h*Math.pow(2,1-p),e*c>=2&&(a++,c/=2),a+p>=u?(l=0,a=u):a+p>=1?(l=(e*c-1)*Math.pow(2,i),a=a+p):(l=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=l&255,f+=m,l/=256,i-=8);for(a=a<<i|l,d+=i;d>0;t[r+f]=a&255,f+=m,a/=256,d-=8);t[r+f-m]|=g*128}var Gpe={}.toString,m$=Array.isArray||function(t){return Gpe.call(t)=="[object Array]"},Vpe=50;rt.TYPED_ARRAY_SUPPORT=m0.TYPED_ARRAY_SUPPORT!==void 0?m0.TYPED_ARRAY_SUPPORT:!0;function IB(){return rt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Kp(t,e){if(IB()<e)throw new RangeError("Invalid typed array length");return rt.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=rt.prototype):(t===null&&(t=new rt(e)),t.length=e),t}function rt(t,e,r){if(!rt.TYPED_ARRAY_SUPPORT&&!(this instanceof rt))return new rt(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return RB(this,t)}return g$(this,t,e,r)}rt.poolSize=8192;rt._augment=function(t){return t.__proto__=rt.prototype,t};function g$(t,e,r,o){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer?jpe(t,e,r,o):typeof e=="string"?Wpe(t,e,r):Kpe(t,e)}rt.from=function(t,e,r){return g$(null,t,e,r)};rt.TYPED_ARRAY_SUPPORT&&(rt.prototype.__proto__=Uint8Array.prototype,rt.__proto__=Uint8Array);function v$(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function $pe(t,e,r,o){return v$(e),e<=0?Kp(t,e):r!==void 0?typeof o=="string"?Kp(t,e).fill(r,o):Kp(t,e).fill(r):Kp(t,e)}rt.alloc=function(t,e,r){return $pe(null,t,e,r)};function RB(t,e){if(v$(e),t=Kp(t,e<0?0:MB(e)|0),!rt.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}rt.allocUnsafe=function(t){return RB(null,t)};rt.allocUnsafeSlow=function(t){return RB(null,t)};function Wpe(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!rt.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var o=b$(e,r)|0;t=Kp(t,o);var i=t.write(e,r);return i!==o&&(t=t.slice(0,i)),t}function FB(t,e){var r=e.length<0?0:MB(e.length)|0;t=Kp(t,r);for(var o=0;o<r;o+=1)t[o]=e[o]&255;return t}function jpe(t,e,r,o){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(o||0))throw new RangeError("'length' is out of bounds");return r===void 0&&o===void 0?e=new Uint8Array(e):o===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,o),rt.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=rt.prototype):t=FB(t,e),t}function Kpe(t,e){if(Su(e)){var r=MB(e.length)|0;return t=Kp(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer!="undefined"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||phe(e.length)?Kp(t,0):FB(t,e);if(e.type==="Buffer"&&m$(e.data))return FB(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function MB(t){if(t>=IB())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+IB().toString(16)+" bytes");return t|0}rt.isBuffer=uE;function Su(t){return!!(t!=null&&t._isBuffer)}rt.compare=function(e,r){if(!Su(e)||!Su(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var o=e.length,i=r.length,s=0,a=Math.min(o,i);s<a;++s)if(e[s]!==r[s]){o=e[s],i=r[s];break}return o<i?-1:i<o?1:0};rt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};rt.concat=function(e,r){if(!m$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return rt.alloc(0);var o;if(r===void 0)for(r=0,o=0;o<e.length;++o)r+=e[o].length;var i=rt.allocUnsafe(r),s=0;for(o=0;o<e.length;++o){var a=e[o];if(!Su(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};function b$(t,e){if(Su(t))return t.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return cE(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return P$(t).length;default:if(o)return cE(t).length;e=(""+e).toLowerCase(),o=!0}}rt.byteLength=b$;function qpe(t,e,r){var o=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return ohe(this,e,r);case"utf8":case"utf-8":return x$(this,e,r);case"ascii":return rhe(this,e,r);case"latin1":case"binary":return nhe(this,e,r);case"base64":return ehe(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ihe(this,e,r);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}rt.prototype._isBuffer=!0;function dv(t,e,r){var o=t[e];t[e]=t[r],t[r]=o}rt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)dv(this,r,r+1);return this};rt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)dv(this,r,r+3),dv(this,r+1,r+2);return this};rt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)dv(this,r,r+7),dv(this,r+1,r+6),dv(this,r+2,r+5),dv(this,r+3,r+4);return this};rt.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?x$(this,0,e):qpe.apply(this,arguments)};rt.prototype.equals=function(e){if(!Su(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:rt.compare(this,e)===0};rt.prototype.inspect=function(){var e="",r=Vpe;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};rt.prototype.compare=function(e,r,o,i,s){if(!Su(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),o===void 0&&(o=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||o>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=o)return 0;if(i>=s)return-1;if(r>=o)return 1;if(r>>>=0,o>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,l=o-r,c=Math.min(a,l),d=this.slice(i,s),u=e.slice(r,o),p=0;p<c;++p)if(d[p]!==u[p]){a=d[p],l=u[p];break}return a<l?-1:l<a?1:0};function y$(t,e,r,o,i){if(t.length===0)return-1;if(typeof r=="string"?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=rt.from(e,o)),Su(e))return e.length===0?-1:C$(t,e,r,o,i);if(typeof e=="number")return e=e&255,rt.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):C$(t,[e],r,o,i);throw new TypeError("val must be string, number or Buffer")}function C$(t,e,r,o,i){var s=1,a=t.length,l=e.length;if(o!==void 0&&(o=String(o).toLowerCase(),o==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(f,m){return s===1?f[m]:f.readUInt16BE(m*s)}var d;if(i){var u=-1;for(d=r;d<a;d++)if(c(t,d)===c(e,u===-1?0:d-u)){if(u===-1&&(u=d),d-u+1===l)return u*s}else u!==-1&&(d-=d-u),u=-1}else for(r+l>a&&(r=a-l),d=r;d>=0;d--){for(var p=!0,h=0;h<l;h++)if(c(t,d+h)!==c(e,h)){p=!1;break}if(p)return d}return-1}rt.prototype.includes=function(e,r,o){return this.indexOf(e,r,o)!==-1};rt.prototype.indexOf=function(e,r,o){return y$(this,e,r,o,!0)};rt.prototype.lastIndexOf=function(e,r,o){return y$(this,e,r,o,!1)};function Ype(t,e,r,o){r=Number(r)||0;var i=t.length-r;o?(o=Number(o),o>i&&(o=i)):o=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");o>s/2&&(o=s/2);for(var a=0;a<o;++a){var l=parseInt(e.substr(a*2,2),16);if(isNaN(l))return a;t[r+a]=l}return a}function Xpe(t,e,r,o){return dE(cE(e,t.length-r),t,r,o)}function S$(t,e,r,o){return dE(dhe(e),t,r,o)}function Qpe(t,e,r,o){return S$(t,e,r,o)}function Jpe(t,e,r,o){return dE(P$(e),t,r,o)}function Zpe(t,e,r,o){return dE(uhe(e,t.length-r),t,r,o)}rt.prototype.write=function(e,r,o,i){if(r===void 0)i="utf8",o=this.length,r=0;else if(o===void 0&&typeof r=="string")i=r,o=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(o)?(o=o|0,i===void 0&&(i="utf8")):(i=o,o=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((o===void 0||o>s)&&(o=s),e.length>0&&(o<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Ype(this,e,r,o);case"utf8":case"utf-8":return Xpe(this,e,r,o);case"ascii":return S$(this,e,r,o);case"latin1":case"binary":return Qpe(this,e,r,o);case"base64":return Jpe(this,e,r,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zpe(this,e,r,o);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};rt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ehe(t,e,r){return e===0&&r===t.length?h$(t):h$(t.slice(e,r))}function x$(t,e,r){r=Math.min(t.length,r);for(var o=[],i=e;i<r;){var s=t[i],a=null,l=s>239?4:s>223?3:s>191?2:1;if(i+l<=r){var c,d,u,p;switch(l){case 1:s<128&&(a=s);break;case 2:c=t[i+1],(c&192)==128&&(p=(s&31)<<6|c&63,p>127&&(a=p));break;case 3:c=t[i+1],d=t[i+2],(c&192)==128&&(d&192)==128&&(p=(s&15)<<12|(c&63)<<6|d&63,p>2047&&(p<55296||p>57343)&&(a=p));break;case 4:c=t[i+1],d=t[i+2],u=t[i+3],(c&192)==128&&(d&192)==128&&(u&192)==128&&(p=(s&15)<<18|(c&63)<<12|(d&63)<<6|u&63,p>65535&&p<1114112&&(a=p))}}a===null?(a=65533,l=1):a>65535&&(a-=65536,o.push(a>>>10&1023|55296),a=56320|a&1023),o.push(a),i+=l}return the(o)}var w$=4096;function the(t){var e=t.length;if(e<=w$)return String.fromCharCode.apply(String,t);for(var r="",o=0;o<e;)r+=String.fromCharCode.apply(String,t.slice(o,o+=w$));return r}function rhe(t,e,r){var o="";r=Math.min(t.length,r);for(var i=e;i<r;++i)o+=String.fromCharCode(t[i]&127);return o}function nhe(t,e,r){var o="";r=Math.min(t.length,r);for(var i=e;i<r;++i)o+=String.fromCharCode(t[i]);return o}function ohe(t,e,r){var o=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>o)&&(r=o);for(var i="",s=e;s<r;++s)i+=che(t[s]);return i}function ihe(t,e,r){for(var o=t.slice(e,r),i="",s=0;s<o.length;s+=2)i+=String.fromCharCode(o[s]+o[s+1]*256);return i}rt.prototype.slice=function(e,r){var o=this.length;e=~~e,r=r===void 0?o:~~r,e<0?(e+=o,e<0&&(e=0)):e>o&&(e=o),r<0?(r+=o,r<0&&(r=0)):r>o&&(r=o),r<e&&(r=e);var i;if(rt.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=rt.prototype;else{var s=r-e;i=new rt(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};function Rs(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}rt.prototype.readUIntLE=function(e,r,o){e=e|0,r=r|0,o||Rs(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return i};rt.prototype.readUIntBE=function(e,r,o){e=e|0,r=r|0,o||Rs(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};rt.prototype.readUInt8=function(e,r){return r||Rs(e,1,this.length),this[e]};rt.prototype.readUInt16LE=function(e,r){return r||Rs(e,2,this.length),this[e]|this[e+1]<<8};rt.prototype.readUInt16BE=function(e,r){return r||Rs(e,2,this.length),this[e]<<8|this[e+1]};rt.prototype.readUInt32LE=function(e,r){return r||Rs(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};rt.prototype.readUInt32BE=function(e,r){return r||Rs(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};rt.prototype.readIntLE=function(e,r,o){e=e|0,r=r|0,o||Rs(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};rt.prototype.readIntBE=function(e,r,o){e=e|0,r=r|0,o||Rs(e,r,this.length);for(var i=r,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};rt.prototype.readInt8=function(e,r){return r||Rs(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};rt.prototype.readInt16LE=function(e,r){r||Rs(e,2,this.length);var o=this[e]|this[e+1]<<8;return o&32768?o|4294901760:o};rt.prototype.readInt16BE=function(e,r){r||Rs(e,2,this.length);var o=this[e+1]|this[e]<<8;return o&32768?o|4294901760:o};rt.prototype.readInt32LE=function(e,r){return r||Rs(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};rt.prototype.readInt32BE=function(e,r){return r||Rs(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};rt.prototype.readFloatLE=function(e,r){return r||Rs(e,4,this.length),sE(this,e,!0,23,4)};rt.prototype.readFloatBE=function(e,r){return r||Rs(e,4,this.length),sE(this,e,!1,23,4)};rt.prototype.readDoubleLE=function(e,r){return r||Rs(e,8,this.length),sE(this,e,!0,52,8)};rt.prototype.readDoubleBE=function(e,r){return r||Rs(e,8,this.length),sE(this,e,!1,52,8)};function ll(t,e,r,o,i,s){if(!Su(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+o>t.length)throw new RangeError("Index out of range")}rt.prototype.writeUIntLE=function(e,r,o,i){if(e=+e,r=r|0,o=o|0,!i){var s=Math.pow(2,8*o)-1;ll(this,e,r,o,s,0)}var a=1,l=0;for(this[r]=e&255;++l<o&&(a*=256);)this[r+l]=e/a&255;return r+o};rt.prototype.writeUIntBE=function(e,r,o,i){if(e=+e,r=r|0,o=o|0,!i){var s=Math.pow(2,8*o)-1;ll(this,e,r,o,s,0)}var a=o-1,l=1;for(this[r+a]=e&255;--a>=0&&(l*=256);)this[r+a]=e/l&255;return r+o};rt.prototype.writeUInt8=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,1,255,0),rt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function aE(t,e,r,o){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-r,2);i<s;++i)t[r+i]=(e&255<<8*(o?i:1-i))>>>(o?i:1-i)*8}rt.prototype.writeUInt16LE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,2,65535,0),rt.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):aE(this,e,r,!0),r+2};rt.prototype.writeUInt16BE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,2,65535,0),rt.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):aE(this,e,r,!1),r+2};function lE(t,e,r,o){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-r,4);i<s;++i)t[r+i]=e>>>(o?i:3-i)*8&255}rt.prototype.writeUInt32LE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,4,4294967295,0),rt.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):lE(this,e,r,!0),r+4};rt.prototype.writeUInt32BE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,4,4294967295,0),rt.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):lE(this,e,r,!1),r+4};rt.prototype.writeIntLE=function(e,r,o,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*o-1);ll(this,e,r,o,s-1,-s)}var a=0,l=1,c=0;for(this[r]=e&255;++a<o&&(l*=256);)e<0&&c===0&&this[r+a-1]!==0&&(c=1),this[r+a]=(e/l>>0)-c&255;return r+o};rt.prototype.writeIntBE=function(e,r,o,i){if(e=+e,r=r|0,!i){var s=Math.pow(2,8*o-1);ll(this,e,r,o,s-1,-s)}var a=o-1,l=1,c=0;for(this[r+a]=e&255;--a>=0&&(l*=256);)e<0&&c===0&&this[r+a+1]!==0&&(c=1),this[r+a]=(e/l>>0)-c&255;return r+o};rt.prototype.writeInt8=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,1,127,-128),rt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};rt.prototype.writeInt16LE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,2,32767,-32768),rt.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):aE(this,e,r,!0),r+2};rt.prototype.writeInt16BE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,2,32767,-32768),rt.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):aE(this,e,r,!1),r+2};rt.prototype.writeInt32LE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,4,2147483647,-2147483648),rt.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):lE(this,e,r,!0),r+4};rt.prototype.writeInt32BE=function(e,r,o){return e=+e,r=r|0,o||ll(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),rt.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):lE(this,e,r,!1),r+4};function T$(t,e,r,o,i,s){if(r+o>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D$(t,e,r,o,i){return i||T$(t,e,r,4,34028234663852886e22,-34028234663852886e22),f$(t,e,r,o,23,4),r+4}rt.prototype.writeFloatLE=function(e,r,o){return D$(this,e,r,!0,o)};rt.prototype.writeFloatBE=function(e,r,o){return D$(this,e,r,!1,o)};function k$(t,e,r,o,i){return i||T$(t,e,r,8,17976931348623157e292,-17976931348623157e292),f$(t,e,r,o,52,8),r+8}rt.prototype.writeDoubleLE=function(e,r,o){return k$(this,e,r,!0,o)};rt.prototype.writeDoubleBE=function(e,r,o){return k$(this,e,r,!1,o)};rt.prototype.copy=function(e,r,o,i){if(o||(o=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<o&&(i=o),i===o||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-o&&(i=e.length-r+o);var s=i-o,a;if(this===e&&o<r&&r<i)for(a=s-1;a>=0;--a)e[a+r]=this[a+o];else if(s<1e3||!rt.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+r]=this[a+o];else Uint8Array.prototype.set.call(e,this.subarray(o,o+s),r);return s};rt.prototype.fill=function(e,r,o,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,o=this.length):typeof o=="string"&&(i=o,o=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!rt.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<o)throw new RangeError("Out of range index");if(o<=r)return this;r=r>>>0,o=o===void 0?this.length:o>>>0,e||(e=0);var a;if(typeof e=="number")for(a=r;a<o;++a)this[a]=e;else{var l=Su(e)?e:cE(new rt(e,i).toString()),c=l.length;for(a=0;a<o-r;++a)this[a+r]=l[a%c]}return this};var she=/[^+\/0-9A-Za-z-_]/g;function ahe(t){if(t=lhe(t).replace(she,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function lhe(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function che(t){return t<16?"0"+t.toString(16):t.toString(16)}function cE(t,e){e=e||1/0;for(var r,o=t.length,i=null,s=[],a=0;a<o;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===o){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function dhe(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function uhe(t,e){for(var r,o,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),o=r>>8,i=r%256,s.push(i),s.push(o);return s}function P$(t){return zpe(ahe(t))}function dE(t,e,r,o){for(var i=0;i<o&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function phe(t){return t!==t}function uE(t){return t!=null&&(!!t._isBuffer||E$(t)||hhe(t))}function E$(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function hhe(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&E$(t.slice(0,0))}function NB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _$(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function BB(t,e,r){return e&&_$(t.prototype,e),r&&_$(t,r),t}function qp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),o.forEach(function(i){qp(t,i,r[i])})}return t}function A$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LB(t,e)}function pE(t){return pE=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pE(t)}function LB(t,e){return LB=Object.setPrototypeOf||function(o,i){return o.__proto__=i,o},LB(t,e)}function fhe(t,e){if(t==null)return{};var r={},o=Object.keys(t),i,s;for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function I$(t,e){if(t==null)return{};var r=fhe(t,e),o,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)o=s[i],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(r[o]=t[o]))}return r}function Qs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R$(t,e){return e&&(typeof e=="object"||typeof e=="function")?e:Qs(t)}function mhe(t,e){return vhe(t)||yhe(t,e)||She()}function OB(t){return ghe(t)||bhe(t)||Che()}function ghe(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function vhe(t){if(Array.isArray(t))return t}function bhe(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function yhe(t,e){var r=[],o=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),l;!(o=(l=a.next()).done)&&(r.push(l.value),!(e&&r.length===e));o=!0);}catch(c){i=!0,s=c}finally{try{!o&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}function Che(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function She(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var va=function(t){return typeof t=="object"?t!==null:typeof t=="function"},xu=function(t){if(!va(t))throw TypeError(t+" is not an object!");return t},Yp=function(t){try{return!!t()}catch(e){return!0}},xc=!Yp(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7});function uv(t,e){return e={exports:{}},t(e,e.exports),e.exports}var fs=uv(function(t){var e=t.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)}),zB=fs.document,xhe=va(zB)&&va(zB.createElement),F$=function(t){return xhe?zB.createElement(t):{}},M$=!xc&&!Yp(function(){return Object.defineProperty(F$("div"),"a",{get:function(){return 7}}).a!=7}),UB=function(t,e){if(!va(t))return t;var r,o;if(e&&typeof(r=t.toString)=="function"&&!va(o=r.call(t))||typeof(r=t.valueOf)=="function"&&!va(o=r.call(t))||!e&&typeof(r=t.toString)=="function"&&!va(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")},whe=Object.defineProperty,The=xc?Object.defineProperty:function(e,r,o){if(xu(e),r=UB(r,!0),xu(o),M$)try{return whe(e,r,o)}catch(i){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[r]=o.value),e},wu={f:The},Dhe=wu.f,N$=Function.prototype,khe=/^\s*function ([^ (]*)/,B$="name";B$ in N$||xc&&Dhe(N$,B$,{configurable:!0,get:function(){try{return(""+this).match(khe)[1]}catch(t){return""}}});var If=uv(function(t){var e=t.exports={version:"2.5.7"};typeof __e=="number"&&(__e=e)}),y4e=If.version,hE=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}},wd=xc?function(t,e,r){return wu.f(t,e,hE(1,r))}:function(t,e,r){return t[e]=r,t},Phe={}.hasOwnProperty,wc=function(t,e){return Phe.call(t,e)},Ehe=0,_he=Math.random(),fE=function(t){return"Symbol(".concat(t===void 0?"":t,")_",(++Ehe+_he).toString(36))},pv=uv(function(t){var e=fE("src"),r="toString",o=Function[r],i=(""+o).split(r);If.inspectSource=function(s){return o.call(s)},(t.exports=function(s,a,l,c){var d=typeof l=="function";d&&(wc(l,"name")||wd(l,"name",a)),s[a]!==l&&(d&&(wc(l,e)||wd(l,e,s[a]?""+s[a]:i.join(String(a)))),s===fs?s[a]=l:c?s[a]?s[a]=l:wd(s,a,l):(delete s[a],wd(s,a,l)))})(Function.prototype,r,function(){return typeof this=="function"&&this[e]||o.call(this)})}),Ahe=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t},hv=function(t,e,r){if(Ahe(t),e===void 0)return t;switch(r){case 1:return function(o){return t.call(e,o)};case 2:return function(o,i){return t.call(e,o,i)};case 3:return function(o,i,s){return t.call(e,o,i,s)}}return function(){return t.apply(e,arguments)}},HB="prototype",La=function(t,e,r){var o=t&La.F,i=t&La.G,s=t&La.S,a=t&La.P,l=t&La.B,c=i?fs:s?fs[e]||(fs[e]={}):(fs[e]||{})[HB],d=i?If:If[e]||(If[e]={}),u=d[HB]||(d[HB]={}),p,h,f,m;i&&(r=e);for(p in r)h=!o&&c&&c[p]!==void 0,f=(h?c:r)[p],m=l&&h?hv(f,fs):a&&typeof f=="function"?hv(Function.call,f):f,c&&pv(c,p,f,t&La.U),d[p]!=f&&wd(d,p,m),a&&u[p]!=f&&(u[p]=f)};fs.core=If;La.F=1;La.G=2;La.S=4;La.P=8;La.B=16;La.W=32;La.U=64;La.R=128;var Go=La,Ihe=Math.ceil,Rhe=Math.floor,GB=function(t){return isNaN(t=+t)?0:(t>0?Rhe:Ihe)(t)},Fhe=Math.min,Dw=function(t){return t>0?Fhe(GB(t),9007199254740991):0},kw=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t},Mhe=function(e){var r=String(kw(this)),o="",i=GB(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(o+=r);return o},Nhe=function(t,e,r,o){var i=String(kw(t)),s=i.length,a=r===void 0?" ":String(r),l=Dw(e);if(l<=s||a=="")return i;var c=l-s,d=Mhe.call(a,Math.ceil(c/a.length));return d.length>c&&(d=d.slice(0,c)),o?d+i:i+d},L$=fs.navigator,Bhe=L$&&L$.userAgent||"";Go(Go.P+Go.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(Bhe),"String",{padStart:function(e){return Nhe(this,e,arguments.length>1?arguments[1]:void 0,!0)}});var Lhe={}.toString,fv=function(t){return Lhe.call(t).slice(8,-1)},Ohe={}.propertyIsEnumerable,zhe={f:Ohe},O$=Object("z").propertyIsEnumerable(0)?Object:function(t){return fv(t)=="String"?t.split(""):Object(t)},mE=function(t){return O$(kw(t))},z$=Object.getOwnPropertyDescriptor,Uhe=xc?z$:function(e,r){if(e=mE(e),r=UB(r,!0),M$)try{return z$(e,r)}catch(o){}if(wc(e,r))return hE(!zhe.f.call(e,r),e[r])},U$={f:Uhe},H$=function(t,e){if(xu(t),!va(e)&&e!==null)throw TypeError(e+": can't set as prototype!")},Hhe={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=hv(Function.call,U$.f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(i,s){return H$(i,s),e?i.__proto__=s:r(i,s),i}}({},!1):void 0),check:H$},G$=Hhe.set,V$=function(t,e,r){var o=e.constructor,i;return o!==r&&typeof o=="function"&&(i=o.prototype)!==r.prototype&&va(i)&&G$&&G$(t,i),t},Ghe=Math.max,Vhe=Math.min,$he=function(t,e){return t=GB(t),t<0?Ghe(t+e,0):Vhe(t,e)},Whe=function(t){return function(e,r,o){var i=mE(e),s=Dw(i.length),a=$he(o,s),l;if(t&&r!=r){for(;s>a;)if(l=i[a++],l!=l)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===r)return t||a||0;return!t&&-1}},VB=!1,$$=uv(function(t){var e="__core-js_shared__",r=fs[e]||(fs[e]={});(t.exports=function(o,i){return r[o]||(r[o]=i!==void 0?i:{})})("versions",[]).push({version:If.version,mode:VB?"pure":"global",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})}),W$=$$("keys"),$B=function(t){return W$[t]||(W$[t]=fE(t))},jhe=Whe(!1),Khe=$B("IE_PROTO"),j$=function(t,e){var r=mE(t),o=0,i=[],s;for(s in r)s!=Khe&&wc(r,s)&&i.push(s);for(;e.length>o;)wc(r,s=e[o++])&&(~jhe(i,s)||i.push(s));return i},gE="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),qhe=gE.concat("length","prototype"),Yhe=Object.getOwnPropertyNames||function(e){return j$(e,qhe)},Xhe={f:Yhe},Pw=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,vE="["+Pw+"]",K$="\u200B\x85",Qhe=RegExp("^"+vE+vE+"*"),Jhe=RegExp(vE+vE+"*$"),q$=function(t,e,r){var o={},i=Yp(function(){return!!Pw[t]()||K$[t]()!=K$}),s=o[t]=i?e(Zhe):Pw[t];r&&(o[r]=s),Go(Go.P+Go.F*i,"String",o)},Zhe=q$.trim=function(t,e){return t=String(kw(t)),e&1&&(t=t.replace(Qhe,"")),e&2&&(t=t.replace(Jhe,"")),t},Y$=q$,X$=Object.keys||function(e){return j$(e,gE)},efe=xc?Object.defineProperties:function(e,r){xu(e);for(var o=X$(r),i=o.length,s=0,a;i>s;)wu.f(e,a=o[s++],r[a]);return e},Q$=fs.document,tfe=Q$&&Q$.documentElement,rfe=$B("IE_PROTO"),WB=function(){},jB="prototype",bE=function(){var t=F$("iframe"),e=gE.length,r="<",o=">",i;for(t.style.display="none",tfe.appendChild(t),t.src="javascript:",i=t.contentWindow.document,i.open(),i.write(r+"script"+o+"document.F=Object"+r+"/script"+o),i.close(),bE=i.F;e--;)delete bE[jB][gE[e]];return bE()},KB=Object.create||function(e,r){var o;return e!==null?(WB[jB]=xu(e),o=new WB,WB[jB]=null,o[rfe]=e):o=bE(),r===void 0?o:efe(o,r)},nfe=Xhe.f,ofe=U$.f,ife=wu.f,sfe=Y$.trim,yE="Number",Ml=fs[yE],CE=Ml,SE=Ml.prototype,afe=fv(KB(SE))==yE,lfe="trim"in String.prototype,J$=function(t){var e=UB(t,!1);if(typeof e=="string"&&e.length>2){e=lfe?e.trim():sfe(e,3);var r=e.charCodeAt(0),o,i,s;if(r===43||r===45){if(o=e.charCodeAt(2),o===88||o===120)return NaN}else if(r===48){switch(e.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+e}for(var a=e.slice(2),l=0,c=a.length,d;l<c;l++)if(d=a.charCodeAt(l),d<48||d>s)return NaN;return parseInt(a,i)}}return+e};if(!Ml(" 0o1")||!Ml("0b1")||Ml("+0x1")){for(Ml=function(e){var r=arguments.length<1?0:e,o=this;return o instanceof Ml&&(afe?Yp(function(){SE.valueOf.call(o)}):fv(o)!=yE)?V$(new CE(J$(r)),o,Ml):J$(r)},qB=xc?nfe(CE):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),xE=0;qB.length>xE;xE++)wc(CE,Ew=qB[xE])&&!wc(Ml,Ew)&&ife(Ml,Ew,ofe(CE,Ew));Ml.prototype=SE,SE.constructor=Ml,pv(fs,yE,Ml)}var qB,xE,Ew,Z$=function(){var t=xu(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};xc&&/./g.flags!="g"&&wu.f(RegExp.prototype,"flags",{configurable:!0,get:Z$});var YB="toString",XB=/./[YB],eW=function(t){pv(RegExp.prototype,YB,t,!0)};Yp(function(){return XB.call({source:"a",flags:"b"})!="/a/b"})?eW(function(){var e=xu(this);return"/".concat(e.source,"/","flags"in e?e.flags:!xc&&e instanceof RegExp?Z$.call(e):void 0)}):XB.name!=YB&&eW(function(){return XB.call(this)});var QB=function(t){return Object(kw(t))},tW=function(t,e,r,o){try{return o?e(xu(r)[0],r[1]):e(r)}catch(s){var i=t.return;throw i!==void 0&&xu(i.call(t)),s}},Rf={},Tc=uv(function(t){var e=$$("wks"),r=fs.Symbol,o=typeof r=="function",i=t.exports=function(s){return e[s]||(e[s]=o&&r[s]||(o?r:fE)("Symbol."+s))};i.store=e}),cfe=Tc("iterator"),dfe=Array.prototype,rW=function(t){return t!==void 0&&(Rf.Array===t||dfe[cfe]===t)},nW=function(t,e,r){e in t?wu.f(t,e,hE(0,r)):t[e]=r},ufe=Tc("toStringTag"),pfe=fv(function(){return arguments}())=="Arguments",hfe=function(t,e){try{return t[e]}catch(r){}},ffe=function(t){var e,r,o;return t===void 0?"Undefined":t===null?"Null":typeof(r=hfe(e=Object(t),ufe))=="string"?r:pfe?fv(e):(o=fv(e))=="Object"&&typeof e.callee=="function"?"Arguments":o},mfe=Tc("iterator"),oW=If.getIteratorMethod=function(t){if(t!=null)return t[mfe]||t["@@iterator"]||Rf[ffe(t)]},JB=Tc("iterator"),iW=!1;try{sW=[7][JB](),sW.return=function(){iW=!0}}catch(t){}var sW,aW=function(t,e){if(!e&&!iW)return!1;var r=!1;try{var o=[7],i=o[JB]();i.next=function(){return{done:r=!0}},o[JB]=function(){return i},t(o)}catch(s){}return r};Go(Go.S+Go.F*!aW(function(t){}),"Array",{from:function(e){var r=QB(e),o=typeof this=="function"?this:Array,i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0,l=0,c=oW(r),d,u,p,h;if(a&&(s=hv(s,i>2?arguments[2]:void 0,2)),c!=null&&!(o==Array&&rW(c)))for(h=c.call(r),u=new o;!(p=h.next()).done;l++)nW(u,l,a?tW(h,s,[p.value,l],!0):p.value);else for(d=Dw(r.length),u=new o(d);d>l;l++)nW(u,l,a?s(r[l],l):r[l]);return u.length=l,u}});Go(Go.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var Ff=function(){function t(){NB(this,t)}return BB(t,null,[{key:"readVint",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=8-Math.floor(Math.log2(r[o]));if(i>8){var s=t.readHexString(r,o,o+i);throw new Error("Unrepresentable length: ".concat(i," ").concat(s))}if(o+i>r.length)return null;for(var a=r[o]&(1<<8-i)-1,l=1;l<i;l+=1){if(l===7&&a>=Math.pow(2,8)&&r[o+7]>0)return{length:i,value:-1};a*=Math.pow(2,8),a+=r[o+l]}return{length:i,value:a}}},{key:"writeVint",value:function(r){if(r<0||r>Math.pow(2,53))throw new Error("Unrepresentable value: ".concat(r));var o=1;for(o=1;o<=8&&!(r<Math.pow(2,7*o)-1);o+=1);for(var i=rt.alloc(o),s=r,a=1;a<=o;a+=1){var l=s&255;i[o-a]=l,s-=l,s/=Math.pow(2,8)}return i[0]|=1<<8-o,i}},{key:"concatenate",value:function(r,o){return!r||r.byteLength===0?o:!o||o.byteLength===0?r:rt.from(OB(r).concat(OB(o)))}},{key:"readHexString",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r.byteLength;return Array.from(r.slice(o,i)).map(function(s){return Number(s).toString(16)}).reduce(function(s,a){return"".concat(s).concat(a.padStart(2,"0"))},"")}},{key:"readUtf8",value:function(r){try{return rt.from(r).toString("utf8")}catch(o){return null}}},{key:"readUnsigned",value:function(r){var o=new DataView(r.buffer,r.byteOffset,r.byteLength);switch(r.byteLength){case 1:return o.getUint8(0);case 2:return o.getUint16(0);case 4:return o.getUint32(0);default:break}return r.byteLength<=6?r.reduce(function(i,s){return i*256+s},0):t.readHexString(r,0,r.byteLength)}},{key:"readSigned",value:function(r){var o=new DataView(r.buffer,r.byteOffset,r.byteLength);switch(r.byteLength){case 1:return o.getInt8(0);case 2:return o.getInt16(0);case 4:return o.getInt32(0);default:return NaN}}},{key:"readFloat",value:function(r){var o=new DataView(r.buffer,r.byteOffset,r.byteLength);switch(r.byteLength){case 4:return o.getFloat32(0);case 8:return o.getFloat64(0);default:return NaN}}},{key:"readDataFromTag",value:function(r,o){var i=r.type,s=r.name,a=r.track,l=r.discardable||!1,c=r.keyframe||!1,d=null,u;switch(i){case"u":u=t.readUnsigned(o);break;case"f":u=t.readFloat(o);break;case"i":u=t.readSigned(o);break;case"s":u=String.fromCharCode.apply(String,OB(o));break;case"8":u=t.readUtf8(o);break;default:break}if(s==="SimpleBlock"||s==="Block"){var p=0,h=t.readVint(o,p),f=h.length,m=h.value;p+=f,a=m,u=t.readSigned(o.subarray(p,p+2)),p+=2,s==="SimpleBlock"&&(c=Boolean(o[f+2]&128),l=Boolean(o[f+2]&1)),p+=1,d=o.subarray(p)}return g0({},r,{data:o,discardable:l,keyframe:c,payload:d,track:a,value:u})}}]),t}(),ZB=Tc("unscopables"),eL=Array.prototype;eL[ZB]==null&&wd(eL,ZB,{});var wE=function(t){eL[ZB][t]=!0},Mf=function(t,e){return{value:e,done:!!t}},gfe=wu.f,lW=Tc("toStringTag"),tL=function(t,e,r){t&&!wc(t=r?t:t.prototype,lW)&&gfe(t,lW,{configurable:!0,value:e})},cW={};wd(cW,Tc("iterator"),function(){return this});var vfe=function(t,e,r){t.prototype=KB(cW,{next:hE(1,r)}),tL(t,e+" Iterator")},dW=$B("IE_PROTO"),bfe=Object.prototype,yfe=Object.getPrototypeOf||function(t){return t=QB(t),wc(t,dW)?t[dW]:typeof t.constructor=="function"&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?bfe:null},_w=Tc("iterator"),rL=!([].keys&&"next"in[].keys()),Cfe="@@iterator",uW="keys",TE="values",pW=function(){return this},hW=function(t,e,r,o,i,s,a){vfe(r,e,o);var l=function(C){if(!rL&&C in p)return p[C];switch(C){case uW:return function(){return new r(this,C)};case TE:return function(){return new r(this,C)}}return function(){return new r(this,C)}},c=e+" Iterator",d=i==TE,u=!1,p=t.prototype,h=p[_w]||p[Cfe]||i&&p[i],f=h||l(i),m=i?d?l("entries"):f:void 0,g=e=="Array"&&p.entries||h,v,y,S;if(g&&(S=yfe(g.call(new t)),S!==Object.prototype&&S.next&&(tL(S,c,!0),!VB&&typeof S[_w]!="function"&&wd(S,_w,pW))),d&&h&&h.name!==TE&&(u=!0,f=function(){return h.call(this)}),(!VB||a)&&(rL||u||!p[_w])&&wd(p,_w,f),Rf[e]=f,Rf[c]=pW,i)if(v={values:d?f:l(TE),keys:s?f:l(uW),entries:m},a)for(y in v)y in p||pv(p,y,v[y]);else Go(Go.P+Go.F*(rL||u),e,v);return v},fW=hW(Array,"Array",function(t,e){this._t=mE(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Mf(1)):e=="keys"?Mf(0,r):e=="values"?Mf(0,t[r]):Mf(0,[r,t[r]])},"values");Rf.Arguments=Rf.Array;wE("keys");wE("values");wE("entries");var mW=Tc("iterator"),gW=Tc("toStringTag"),vW=Rf.Array,bW={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1};for(nL=X$(bW),DE=0;DE<nL.length;DE++)if(Aw=nL[DE],yW=bW[Aw],oL=fs[Aw],Nf=oL&&oL.prototype,Nf&&(Nf[mW]||wd(Nf,mW,vW),Nf[gW]||wd(Nf,gW,Aw),Rf[Aw]=vW,yW))for(Iw in fW)Nf[Iw]||pv(Nf,Iw,fW[Iw],!0);var Aw,yW,oL,Nf,Iw,nL,DE,CW=function(t,e,r){for(var o in e)pv(t,o,e[o],r);return t},SW=function(t,e,r,o){if(!(t instanceof e)||o!==void 0&&o in t)throw TypeError(r+": incorrect invocation!");return t},xW=uv(function(t){var e={},r={},o=t.exports=function(i,s,a,l,c){var d=c?function(){return i}:oW(i),u=hv(a,l,s?2:1),p=0,h,f,m,g;if(typeof d!="function")throw TypeError(i+" is not iterable!");if(rW(d)){for(h=Dw(i.length);h>p;p++)if(g=s?u(xu(f=i[p])[0],f[1]):u(i[p]),g===e||g===r)return g}else for(m=d.call(i);!(f=m.next()).done;)if(g=tW(m,u,f.value,s),g===e||g===r)return g};o.BREAK=e,o.RETURN=r}),wW=Tc("species"),Sfe=function(t){var e=fs[t];xc&&e&&!e[wW]&&wu.f(e,wW,{configurable:!0,get:function(){return this}})},mv=uv(function(t){var e=fE("meta"),r=wu.f,o=0,i=Object.isExtensible||function(){return!0},s=!Yp(function(){return i(Object.preventExtensions({}))}),a=function(p){r(p,e,{value:{i:"O"+ ++o,w:{}}})},l=function(p,h){if(!va(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!wc(p,e)){if(!i(p))return"F";if(!h)return"E";a(p)}return p[e].i},c=function(p,h){if(!wc(p,e)){if(!i(p))return!0;if(!h)return!1;a(p)}return p[e].w},d=function(p){return s&&u.NEED&&i(p)&&!wc(p,e)&&a(p),p},u=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:c,onFreeze:d}}),C4e=mv.KEY,S4e=mv.NEED,x4e=mv.fastKey,w4e=mv.getWeak,T4e=mv.onFreeze,Bf=function(t,e){if(!va(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t},xfe=wu.f,TW=mv.fastKey,Rw=xc?"_s":"size",kE=function(t,e){var r=TW(e),o;if(r!=="F")return t._i[r];for(o=t._f;o;o=o.n)if(o.k==e)return o},iL={getConstructor:function(t,e,r,o){var i=t(function(s,a){SW(s,i,e,"_i"),s._t=e,s._i=KB(null),s._f=void 0,s._l=void 0,s[Rw]=0,a!=null&&xW(a,r,s[o],s)});return CW(i.prototype,{clear:function(){for(var a=Bf(this,e),l=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete l[c.i];a._f=a._l=void 0,a[Rw]=0},delete:function(s){var a=Bf(this,e),l=kE(a,s);if(l){var c=l.n,d=l.p;delete a._i[l.i],l.r=!0,d&&(d.n=c),c&&(c.p=d),a._f==l&&(a._f=c),a._l==l&&(a._l=d),a[Rw]--}return!!l},forEach:function(a){Bf(this,e);for(var l=hv(a,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.n:this._f;)for(l(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!kE(Bf(this,e),a)}}),xc&&xfe(i.prototype,"size",{get:function(){return Bf(this,e)[Rw]}}),i},def:function(t,e,r){var o=kE(t,e),i,s;return o?o.v=r:(t._l=o={i:s=TW(e,!0),k:e,v:r,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[Rw]++,s!=="F"&&(t._i[s]=o)),t},getEntry:kE,setStrong:function(t,e,r){hW(t,e,function(o,i){this._t=Bf(o,e),this._k=i,this._l=void 0},function(){for(var o=this,i=o._k,s=o._l;s&&s.r;)s=s.p;return!o._t||!(o._l=s=s?s.n:o._t._f)?(o._t=void 0,Mf(1)):i=="keys"?Mf(0,s.k):i=="values"?Mf(0,s.v):Mf(0,[s.k,s.v])},r?"entries":"values",!r,!0),Sfe(e)}},wfe=function(t,e,r,o,i,s){var a=fs[t],l=a,c=i?"set":"add",d=l&&l.prototype,u={},p=function(y){var S=d[y];pv(d,y,y=="delete"?function(C){return s&&!va(C)?!1:S.call(this,C===0?0:C)}:y=="has"?function(b){return s&&!va(b)?!1:S.call(this,b===0?0:b)}:y=="get"?function(b){return s&&!va(b)?void 0:S.call(this,b===0?0:b)}:y=="add"?function(b){return S.call(this,b===0?0:b),this}:function(b,x){return S.call(this,b===0?0:b,x),this})};if(typeof l!="function"||!(s||d.forEach&&!Yp(function(){new l().entries().next()})))l=o.getConstructor(e,t,i,c),CW(l.prototype,r),mv.NEED=!0;else{var h=new l,f=h[c](s?{}:-0,1)!=h,m=Yp(function(){h.has(1)}),g=aW(function(y){new l(y)}),v=!s&&Yp(function(){for(var y=new l,S=5;S--;)y[c](S,S);return!y.has(-0)});g||(l=e(function(y,S){SW(y,l,t);var C=V$(new a,y,l);return S!=null&&xW(S,i,C[c],C),C}),l.prototype=d,d.constructor=l),(m||v)&&(p("delete"),p("has"),i&&p("get")),(v||f)&&p(c),s&&d.clear&&delete d.clear}return tL(l,t),u[t]=l,Go(Go.G+Go.W+Go.F*(l!=a),u),s||o.setStrong(l,t,i),l},sL="Map",D4e=wfe(sL,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var r=iL.getEntry(Bf(this,sL),e);return r&&r.v},set:function(e,r){return iL.def(Bf(this,sL),e===0?0:e,r)}},iL,!0),Fw=new Map([[128,{name:"ChapterDisplay",level:4,type:"m",multiple:!0,minver:1,webm:!0,description:"Contains all possible strings to use for the chapter display."}],[131,{name:"TrackType",level:3,type:"u",multiple:!1,mandatory:!0,minver:1,range:"1-254",description:"A set of track types coded on 8 bits (1: video, 2: audio, 3: complex, 0x10: logo, 0x11: subtitle, 0x12: buttons, 0x20: control).",webm:!1}],[133,{name:"ChapString",cppname:"ChapterString",level:5,type:"8",multiple:!1,mandatory:!0,minver:1,webm:!0,description:"Contains the string to use as the chapter atom."}],[134,{name:"CodecID",level:3,type:"s",mandatory:!0,minver:1,description:"An ID corresponding to the codec, see the codec page for more info.",multiple:!1,webm:!1}],[136,{name:"FlagDefault",cppname:"TrackFlagDefault",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if that track (audio, video or subs) SHOULD be active if no language found matches the user preference. (1 bit)",multiple:!1,webm:!1}],[137,{name:"ChapterTrackNumber",level:5,type:"u",mandatory:!0,multiple:!0,minver:1,webm:!1,range:"not 0",description:"UID of the Track to apply this chapter too. In the absense of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absense of this element indicates that the Chapter should be applied to any currently used Tracks."}],[145,{name:"ChapterTimeStart",level:4,type:"u",mandatory:!0,minver:1,webm:!0,description:"Timestamp of the start of Chapter (not scaled).",multiple:!1}],[146,{name:"ChapterTimeEnd",level:4,type:"u",minver:1,webm:!1,description:"Timestamp of the end of Chapter (timestamp excluded, not scaled).",multiple:!1}],[150,{name:"CueRefTime",level:5,type:"u",mandatory:!0,minver:2,webm:!1,description:"Timestamp of the referenced Block.",multiple:!1}],[151,{name:"CueRefCluster",level:5,type:"u",mandatory:!0,webm:!1,description:"The Position of the Cluster containing the referenced Block.",minver:0,multiple:!1}],[152,{name:"ChapterFlagHidden",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a chapter is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)",multiple:!1}],[16980,{name:"ContentCompAlgo",level:6,type:"u",mandatory:!0,minver:1,webm:!1,default:0,br:["","","",""],del:["1 - bzlib,","2 - lzo1x"],description:"The compression algorithm used. Algorithms that have been specified so far are: 0 - zlib,   3 - Header Stripping",multiple:!1}],[16981,{name:"ContentCompSettings",level:6,type:"b",minver:1,webm:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (ContentCompAlgo=3), the bytes that were removed from the beggining of each frames of the track.",multiple:!1}],[17026,{name:"DocType",level:1,type:"s",mandatory:!0,default:"matroska",minver:1,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files.",multiple:!1,webm:!1}],[17029,{name:"DocTypeReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum DocType version an interpreter has to support to read this file.",multiple:!1,webm:!1}],[17030,{name:"EBMLVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of EBML parser used to create the file.",multiple:!1,webm:!1}],[17031,{name:"DocTypeVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of DocType interpreter used to create the file.",multiple:!1,webm:!1}],[17476,{name:"SegmentFamily",level:2,type:"b",multiple:!0,minver:1,webm:!1,bytesize:16,description:"A randomly generated unique ID that all segments related to each other must use (128 bits)."}],[17505,{name:"DateUTC",level:2,type:"d",minver:1,description:"Date of the origin of timestamp (value 0), i.e. production date.",multiple:!1,webm:!1}],[17540,{name:"TagDefault",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Indication to know if this is the default/original language to use for the given tag. (1 bit)",multiple:!1}],[17541,{name:"TagBinary",level:4,type:"b",minver:1,webm:!1,description:"The values of the Tag if it is binary. Note that this cannot be used in the same SimpleTag as TagString.",multiple:!1}],[17543,{name:"TagString",level:4,type:"8",minver:1,webm:!1,description:"The value of the Tag.",multiple:!1}],[17545,{name:"Duration",level:2,type:"f",minver:1,range:"> 0",description:"Duration of the segment (based on TimecodeScale).",multiple:!1,webm:!1}],[17816,{name:"ChapterFlagEnabled",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Specify wether the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie should skip all the content between the TimeStart and TimeEnd of this chapter (see flag notes). (1 bit)",multiple:!1}],[18016,{name:"FileMimeType",level:3,type:"s",mandatory:!0,minver:1,webm:!1,description:"MIME type of the file.",multiple:!1}],[18017,{name:"FileUsedStartTime",level:3,type:"u",divx:!0,description:"DivX font extension",multiple:!1}],[18018,{name:"FileUsedEndTime",level:3,type:"u",divx:!0,multiple:!1,description:"DivX font extension"}],[18037,{name:"FileReferral",level:3,type:"b",webm:!1,description:"A binary value that a track/codec can refer to when the attachment is needed.",multiple:!1}],[20529,{name:"ContentEncodingOrder",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,multiple:!1,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder elements in the segment."}],[20530,{name:"ContentEncodingScope",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",br:["","",""],description:"A bit field that describes which elements have been modified in this way. Values (big endian) can be OR'ed. Possible values: 1 - all frame contents, 2 - the track's private data, 4 - the next ContentEncoding (next ContentEncodingOrder. Either the data inside ContentCompression and/or ContentEncryption)",multiple:!1}],[20531,{name:"ContentEncodingType",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,br:["",""],description:"A value describing what kind of transformation has been done. Possible values: 0 - compression, 1 - encryption",multiple:!1}],[20532,{name:"ContentCompression",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the compression used. Must be present if the value of ContentEncodingType is 0 and absent otherwise. Each block must be decompressable even if no previous block is available in order not to prevent seeking.",multiple:!1}],[20533,{name:"ContentEncryption",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the encryption used. Must be present if the value of ContentEncodingType is 1 and absent otherwise.",multiple:!1}],[21368,{name:"CueBlockNumber",level:4,type:"u",minver:1,default:1,range:"not 0",description:"Number of the Block in the specified Cluster.",multiple:!1}],[22100,{name:"ChapterStringUID",level:4,type:"8",mandatory:!1,minver:3,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage.",multiple:!1}],[22337,{name:"WritingApp",level:2,type:"8",mandatory:!0,minver:1,multiple:!1,description:'Writing application ("mkvmerge-0.3.3").'}],[22612,{name:"SilentTracks",cppname:"ClusterSilentTracks",level:2,type:"m",minver:1,multiple:!1,webm:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking. Then you should decide what track to use."}],[25152,{name:"ContentEncoding",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Settings for one content encoding like compression or encryption."}],[25188,{name:"BitDepth",cppname:"AudioBitDepth",level:4,type:"u",minver:1,range:"not 0",multiple:!1,description:"Bits per sample, mostly used for PCM."}],[25906,{name:"SignedElement",level:3,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature."}],[26148,{name:"TrackTranslate",level:3,type:"m",multiple:!0,minver:1,webm:!1,description:"The track identification for the given Chapter Codec."}],[26897,{name:"ChapProcessCommand",cppname:"ChapterProcessCommand",level:5,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."}],[26914,{name:"ChapProcessTime",cppname:"ChapterProcessTime",level:6,type:"u",mandatory:!0,minver:1,webm:!1,description:"Defines when the process command should be handled (0: during the whole chapter, 1: before starting playback, 2: after playback of the chapter)."}],[26916,{name:"ChapterTranslate",level:2,type:"m",multiple:!0,minver:1,webm:!1,description:"A tuple of corresponding ID used by chapter codecs to represent this segment."}],[26931,{name:"ChapProcessData",cppname:"ChapterProcessData",level:6,type:"b",mandatory:!0,minver:1,webm:!1,description:"Contains the command information. The data should be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands."}],[26948,{name:"ChapProcess",cppname:"ChapterProcess",level:4,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."}],[26965,{name:"ChapProcessCodecID",cppname:"ChapterProcessCodecID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used. More codec IDs can be added later."}],[29555,{name:"Tag",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters."}],[29572,{name:"SegmentFilename",level:2,type:"8",minver:1,webm:!1,description:"A filename corresponding to this segment."}],[29766,{name:"AttachmentLink",cppname:"TrackAttachmentLink",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"The UID of an attachment that is used by this codec."}],[2459272,{name:"CodecName",level:3,type:"8",minver:1,description:"A human-readable string specifying the codec."}],[408125543,{name:"Segment",level:0,type:"m",mandatory:!0,multiple:!0,minver:1,description:"This element contains all other top-level (level 1) elements. Typically a Matroska file is composed of 1 segment."}],[17530,{name:"TagLanguage",level:4,type:"s",mandatory:!0,minver:1,webm:!1,default:"und",description:"Specifies the language of the tag specified, in the Matroska languages form."}],[17827,{name:"TagName",level:4,type:"8",mandatory:!0,minver:1,webm:!1,description:"The name of the Tag that is going to be stored."}],[26568,{name:"SimpleTag",cppname:"TagSimple",level:3,recursive:!0,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contains general information about the target."}],[25542,{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Attachment(s) the tags belong to. If the value is 0 at this level, the tags apply to all the attachments in the Segment."}],[25540,{name:"TagChapterUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Chapter(s) the tags belong to. If the value is 0 at this level, the tags apply to all chapters in the Segment."}],[25545,{name:"TagEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the EditionEntry(s) the tags belong to. If the value is 0 at this level, the tags apply to all editions in the Segment."}],[25541,{name:"TagTrackUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Track(s) the tags belong to. If the value is 0 at this level, the tags apply to all tracks in the Segment."}],[25546,{name:"TargetType",cppname:"TagTargetType",level:4,type:"s",minver:1,webm:!1,strong:"informational",description:'An  string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc (see TargetType).'}],[26826,{name:"TargetTypeValue",cppname:"TagTargetTypeValue",level:4,type:"u",minver:1,webm:!1,default:50,description:"A number to indicate the logical level of the target (see TargetType)."}],[25536,{name:"Targets",cppname:"TagTargets",level:3,type:"m",mandatory:!0,minver:1,webm:!1,description:"Contain all UIDs where the specified meta data apply. It is empty to describe everything in the segment."}],[307544935,{name:"Tags",level:1,type:"m",multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters. A list of valid tags can be found here."}],[17677,{name:"ChapProcessPrivate",cppname:"ChapterProcessPrivate",level:5,type:"b",minver:1,webm:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent.'}],[17278,{name:"ChapCountry",cppname:"ChapterCountry",level:5,type:"s",multiple:!0,minver:1,webm:!1,description:"The countries corresponding to the string, same 2 octets as in Internet domains."}],[17276,{name:"ChapLanguage",cppname:"ChapterLanguage",level:5,type:"s",mandatory:!0,multiple:!0,minver:1,webm:!0,default:"eng",description:"The languages corresponding to the string, in the bibliographic ISO-639-2 form."}],[143,{name:"ChapterTrack",level:4,type:"m",minver:1,webm:!1,description:"List of tracks on which the chapter applies. If this element is not present, all tracks apply"}],[25539,{name:"ChapterPhysicalEquiv",level:4,type:"u",minver:1,webm:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50), see complete list of values.'}],[28348,{name:"ChapterSegmentEditionUID",level:4,type:"u",minver:1,webm:!1,range:"not 0",description:"The EditionUID to play from the segment linked in ChapterSegmentUID."}],[28263,{name:"ChapterSegmentUID",level:4,type:"b",minver:1,webm:!1,range:">0",bytesize:16,description:"A segment to play in place of this chapter. Edition ChapterSegmentEditionUID should be used for this segment, otherwise no edition is used."}],[29636,{name:"ChapterUID",level:4,type:"u",mandatory:!0,minver:1,webm:!0,range:"not 0",description:"A unique ID to identify the Chapter."}],[182,{name:"ChapterAtom",level:3,recursive:!0,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks)."}],[17885,{name:"EditionFlagOrdered",level:3,type:"u",minver:1,webm:!1,default:0,range:"0-1",description:"Specify if the chapters can be defined multiple times and the order to play them is enforced. (1 bit)"}],[17883,{name:"EditionFlagDefault",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a flag is set (1) the edition should be used as the default one. (1 bit)"}],[17853,{name:"EditionFlagHidden",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If an edition is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"}],[17852,{name:"EditionUID",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"A unique ID to identify the edition. It's useful for tagging an edition."}],[17849,{name:"EditionEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains all information about a segment edition."}],[272869232,{name:"Chapters",level:1,type:"m",minver:1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters Explanation."}],[18094,{name:"FileUID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,range:"not 0",description:"Unique ID representing the file, as random as possible."}],[18012,{name:"FileData",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The data of the file."}],[18030,{name:"FileName",level:3,type:"8",mandatory:!0,minver:1,webm:!1,description:"Filename of the attached file."}],[18046,{name:"FileDescription",level:3,type:"8",minver:1,webm:!1,description:"A human-friendly name for the attached file."}],[24999,{name:"AttachedFile",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"An attached file."}],[423732329,{name:"Attachments",level:1,type:"m",minver:1,webm:!1,description:"Contain attached files."}],[235,{name:"CueRefCodecState",level:5,type:"u",webm:!1,default:0,description:"The position of the Codec State corresponding to this referenced element. 0 means that the data is taken from the initial Track Entry."}],[21343,{name:"CueRefNumber",level:5,type:"u",webm:!1,default:1,range:"not 0",description:"Number of the referenced Block of Track X in the specified Cluster."}],[219,{name:"CueReference",level:4,type:"m",multiple:!0,minver:2,webm:!1,description:"The Clusters containing the required referenced Blocks."}],[234,{name:"CueCodecState",level:4,type:"u",minver:2,webm:!1,default:0,description:"The position of the Codec State corresponding to this Cue element. 0 means that the data is taken from the initial Track Entry."}],[178,{name:"CueDuration",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The duration of the block according to the segment time base. If missing the track's DefaultDuration does not apply and no duration information is available in terms of the cues."}],[240,{name:"CueRelativePosition",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The relative position of the referenced block inside the cluster with 0 being the first possible position for an element inside that cluster."}],[241,{name:"CueClusterPosition",level:4,type:"u",mandatory:!0,minver:1,description:"The position of the Cluster containing the required Block."}],[247,{name:"CueTrack",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track for which a position is given."}],[183,{name:"CueTrackPositions",level:3,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contain positions for different tracks corresponding to the timestamp."}],[179,{name:"CueTime",level:3,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp according to the segment time base."}],[187,{name:"CuePoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains all information relative to a seek point in the segment."}],[475249515,{name:"Cues",level:1,type:"m",minver:1,description:'A top-level element to speed seeking access. All entries are local to the segment. Should be mandatory for non "live" streams.'}],[18406,{name:"ContentSigHashAlgo",level:6,type:"u",minver:1,webm:!1,default:0,br:["",""],description:"The hash algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - SHA1-160 2 - MD5"}],[18405,{name:"ContentSigAlgo",level:6,type:"u",minver:1,webm:!1,default:0,br:"",description:"The algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - RSA"}],[18404,{name:"ContentSigKeyID",level:6,type:"b",minver:1,webm:!1,description:"This is the ID of the private key the data was signed with."}],[18403,{name:"ContentSignature",level:6,type:"b",minver:1,webm:!1,description:"A cryptographic signature of the contents."}],[18402,{name:"ContentEncKeyID",level:6,type:"b",minver:1,webm:!1,description:"For public key algorithms this is the ID of the public key the the data was encrypted with."}],[18401,{name:"ContentEncAlgo",level:6,type:"u",minver:1,webm:!1,default:0,br:"",description:"The encryption algorithm used. The value '0' means that the contents have not been encrypted but only signed. Predefined values: 1 - DES, 2 - 3DES, 3 - Twofish, 4 - Blowfish, 5 - AES"}],[28032,{name:"ContentEncodings",level:3,type:"m",minver:1,webm:!1,description:"Settings for several content encoding mechanisms like compression or encryption."}],[196,{name:"TrickMasterTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"}],[199,{name:"TrickMasterTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"}],[198,{name:"TrickTrackFlag",level:3,type:"u",divx:!0,default:0,description:"DivX trick track extenstions"}],[193,{name:"TrickTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"}],[192,{name:"TrickTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"}],[237,{name:"TrackJoinUID",level:5,type:"u",mandatory:!0,multiple:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of a track whose blocks are used to create this virtual track."}],[233,{name:"TrackJoinBlocks",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track"}],[230,{name:"TrackPlaneType",level:6,type:"u",mandatory:!0,minver:3,webm:!1,description:"The kind of plane this track corresponds to (0: left eye, 1: right eye, 2: background)."}],[229,{name:"TrackPlaneUID",level:6,type:"u",mandatory:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of the track representing the plane."}],[228,{name:"TrackPlane",level:5,type:"m",mandatory:!0,multiple:!0,minver:3,webm:!1,description:"Contains a video plane track that need to be combined to create this 3D track"}],[227,{name:"TrackCombinePlanes",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track"}],[226,{name:"TrackOperation",level:3,type:"m",minver:3,webm:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at the Specification Notes on the subject."}],[32123,{name:"ChannelPositions",cppname:"AudioPosition",level:4,type:"b",webm:!1,description:"Table of horizontal angles for each successive channel, see appendix."}],[159,{name:"Channels",cppname:"AudioChannels",level:4,type:"u",mandatory:!0,minver:1,default:1,range:"not 0",description:"Numbers of channels in the track."}],[30901,{name:"OutputSamplingFrequency",cppname:"AudioOutputSamplingFreq",level:4,type:"f",minver:1,default:"Sampling Frequency",range:"> 0",description:"Real output sampling frequency in Hz (used for SBR techniques)."}],[181,{name:"SamplingFrequency",cppname:"AudioSamplingFreq",level:4,type:"f",mandatory:!0,minver:1,default:"8000.0",range:"> 0",description:"Sampling frequency in Hz."}],[225,{name:"Audio",cppname:"TrackAudio",level:3,type:"m",minver:1,description:"Audio settings."}],[2327523,{name:"FrameRate",cppname:"VideoFrameRate",level:4,type:"f",range:"> 0",strong:"Informational",description:"Number of frames per second.  only."}],[3126563,{name:"GammaValue",cppname:"VideoGamma",level:4,type:"f",webm:!1,range:"> 0",description:"Gamma Value."}],[3061028,{name:"ColourSpace",cppname:"VideoColourSpace",level:4,type:"b",minver:1,webm:!1,bytesize:4,description:"Same value as in AVI (32 bits)."}],[21683,{name:"AspectRatioType",cppname:"VideoAspectRatio",level:4,type:"u",minver:1,default:0,description:"Specify the possible modifications to the aspect ratio (0: free resizing, 1: keep aspect ratio, 2: fixed)."}],[21682,{name:"DisplayUnit",cppname:"VideoDisplayUnit",level:4,type:"u",minver:1,default:0,description:"How DisplayWidth & DisplayHeight should be interpreted (0: pixels, 1: centimeters, 2: inches, 3: Display Aspect Ratio)."}],[21690,{name:"DisplayHeight",cppname:"VideoDisplayHeight",level:4,type:"u",minver:1,default:"PixelHeight",range:"not 0",description:"Height of the video frames to display. The default value is only valid when DisplayUnit is 0."}],[21680,{name:"DisplayWidth",cppname:"VideoDisplayWidth",level:4,type:"u",minver:1,default:"PixelWidth",range:"not 0",description:"Width of the video frames to display. The default value is only valid when DisplayUnit is 0."}],[21725,{name:"PixelCropRight",cppname:"VideoPixelCropRight",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the right of the image."}],[21708,{name:"PixelCropLeft",cppname:"VideoPixelCropLeft",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the left of the image."}],[21691,{name:"PixelCropTop",cppname:"VideoPixelCropTop",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the top of the image."}],[21674,{name:"PixelCropBottom",cppname:"VideoPixelCropBottom",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the bottom of the image (for HDTV content)."}],[186,{name:"PixelHeight",cppname:"VideoPixelHeight",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Height of the encoded video frames in pixels."}],[176,{name:"PixelWidth",cppname:"VideoPixelWidth",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Width of the encoded video frames in pixels."}],[21433,{name:"OldStereoMode",level:4,type:"u",maxver:"0",webm:!1,divx:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska. (0: mono, 1: right eye, 2: left eye, 3: both eyes)."}],[21440,{name:"AlphaMode",cppname:"VideoAlphaMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Alpha Video Mode. Presence of this element indicates that the BlockAdditional element could contain Alpha data."}],[21432,{name:"StereoMode",cppname:"VideoStereoMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Stereo-3D video mode (0: mono, 1: side by side (left eye is first), 2: top-bottom (right eye is first), 3: top-bottom (left eye is first), 4: checkboard (right is first), 5: checkboard (left is first), 6: row interleaved (right is first), 7: row interleaved (left is first), 8: column interleaved (right is first), 9: column interleaved (left is first), 10: anaglyph (cyan/red), 11: side by side (right eye is first), 12: anaglyph (green/magenta), 13 both eyes laced in one Block (left eye is first), 14 both eyes laced in one Block (right eye is first)) . There are some more details on 3D support in the Specification Notes."}],[154,{name:"FlagInterlaced",cppname:"VideoFlagInterlaced",level:4,type:"u",mandatory:!0,minver:2,webm:!0,default:0,range:"0-1",description:"Set if the video is interlaced. (1 bit)"}],[224,{name:"Video",cppname:"TrackVideo",level:3,type:"m",minver:1,description:"Video settings."}],[26277,{name:"TrackTranslateTrackID",level:4,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this track in the chapter codec data. The format depends on the ChapProcessCodecID used."}],[26303,{name:"TrackTranslateCodec",level:4,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."}],[26364,{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this translation applies. When not specified, it means for all editions found in the segment."}],[22203,{name:"SeekPreRoll",level:3,type:"u",mandatory:!0,multiple:!1,default:0,minver:4,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration in nanoseconds of the data the decoder must decode before the decoded data is valid."}],[22186,{name:"CodecDelay",level:3,type:"u",multiple:!1,default:0,minver:4,webm:!0,description:"CodecDelay is The codec-built-in delay in nanoseconds. This value must be subtracted from each block timestamp in order to get the actual timestamp. The value should be small so the muxing of tracks with the same actual timestamp are in the same Cluster."}],[28587,{name:"TrackOverlay",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap (see SilentTracks) the overlay track should be used instead. The order of multiple TrackOverlay matters, the first one is the one that should be used. If not found it should be the second, etc."}],[170,{name:"CodecDecodeAll",level:3,type:"u",mandatory:!0,minver:2,webm:!1,default:1,range:"0-1",description:"The codec can decode potentially damaged data (1 bit)."}],[2536e3,{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to download about the codec used."}],[3883072,{name:"CodecInfoURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to find information about the codec used."}],[3839639,{name:"CodecSettings",level:3,type:"8",webm:!1,description:"A string describing the encoding setting used."}],[25506,{name:"CodecPrivate",level:3,type:"b",minver:1,description:"Private data only known to the codec."}],[2274716,{name:"Language",cppname:"TrackLanguage",level:3,type:"s",minver:1,default:"eng",description:"Specifies the language of the track in the Matroska languages form."}],[21358,{name:"Name",cppname:"TrackName",level:3,type:"8",minver:1,description:"A human-readable track name."}],[21998,{name:"MaxBlockAdditionID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The maximum value of BlockAdditions for this track."}],[21375,{name:"TrackOffset",level:3,type:"i",webm:!1,default:0,description:"A value to add to the Block's Timestamp. This can be used to adjust the playback offset of a track."}],[2306383,{name:"TrackTimecodeScale",level:3,type:"f",mandatory:!0,minver:1,maxver:"3",webm:!1,default:"1.0",range:"> 0",description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs)."}],[2313850,{name:"DefaultDecodedFieldDuration",cppname:"TrackDefaultDecodedFieldDuration",level:3,type:"u",minver:4,range:"not 0",description:`The period in nanoseconds (not scaled by TimcodeScale)
between two successive fields at the output of the decoding process (see the notes)`}],[2352003,{name:"DefaultDuration",cppname:"TrackDefaultDuration",level:3,type:"u",minver:1,range:"not 0",description:"Number of nanoseconds (not scaled via TimecodeScale) per frame ('frame' in the Matroska sense -- one element put into a (Simple)Block)."}],[28152,{name:"MaxCache",cppname:"TrackMaxCache",level:3,type:"u",minver:1,webm:!1,description:"The maximum cache size required to store referenced frames in and the current frame. 0 means no cache is needed."}],[28135,{name:"MinCache",cppname:"TrackMinCache",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The minimum number of frames a player should be able to cache during playback. If set to 0, the reference pseudo-cache system is not used."}],[156,{name:"FlagLacing",cppname:"TrackFlagLacing",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if the track may contain blocks using lacing. (1 bit)"}],[21930,{name:"FlagForced",cppname:"TrackFlagForced",level:3,type:"u",mandatory:!0,minver:1,default:0,range:"0-1",description:"Set if that track MUST be active during playback. There can be many forced track for a kind (audio, video or subs), the player should select the one which language matches the user preference or the default + forced track. Overlay MAY happen between a forced and non-forced track of the same kind. (1 bit)"}],[185,{name:"FlagEnabled",cppname:"TrackFlagEnabled",level:3,type:"u",mandatory:!0,minver:2,webm:!0,default:1,range:"0-1",description:"Set if the track is usable. (1 bit)"}],[29637,{name:"TrackUID",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"A unique ID to identify the Track. This should be kept the same when making a direct stream copy of the Track to another file."}],[215,{name:"TrackNumber",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number)."}],[174,{name:"TrackEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Describes a track with all elements."}],[374648427,{name:"Tracks",level:1,type:"m",multiple:!0,minver:1,description:"A top-level block of information with many tracks described."}],[175,{name:"EncryptedBlock",level:2,type:"b",multiple:!0,webm:!1,description:"Similar to EncryptedBlock Structure)"}],[202,{name:"ReferenceTimeCode",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"}],[201,{name:"ReferenceOffset",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"}],[200,{name:"ReferenceFrame",level:3,type:"m",multiple:!1,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"}],[207,{name:"SliceDuration",level:5,type:"u",default:0,description:"The (scaled) duration to apply to the element."}],[206,{name:"Delay",cppname:"SliceDelay",level:5,type:"u",default:0,description:"The (scaled) delay to apply to the element."}],[203,{name:"BlockAdditionID",cppname:"SliceBlockAddID",level:5,type:"u",default:0,description:"The ID of the BlockAdditional element (0 is the main Block)."}],[205,{name:"FrameNumber",cppname:"SliceFrameNumber",level:5,type:"u",default:0,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame)."}],[204,{name:"LaceNumber",cppname:"SliceLaceNumber",level:5,type:"u",minver:1,default:0,divx:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."}],[232,{name:"TimeSlice",level:4,type:"m",multiple:!0,minver:1,divx:!1,description:"Contains extra time information about the data contained in the Block. While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."}],[142,{name:"Slices",level:3,type:"m",minver:1,divx:!1,description:"Contains slices description."}],[30114,{name:"DiscardPadding",level:3,type:"i",minver:4,webm:!0,description:"Duration in nanoseconds of the silent data added to the Block (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and should be discarded during playback."}],[164,{name:"CodecState",level:3,type:"b",minver:2,webm:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information should always be referenced by a seek entry."}],[253,{name:"ReferenceVirtual",level:3,type:"i",webm:!1,description:"Relative position of the data that should be in position of the virtual block."}],[251,{name:"ReferenceBlock",level:3,type:"i",multiple:!0,minver:1,description:"Timestamp of another frame used as a reference (ie: B or P frame). The timestamp is relative to the block it's attached to."}],[250,{name:"ReferencePriority",cppname:"FlagReferenced",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced."}],[155,{name:"BlockDuration",level:3,type:"u",minver:1,default:"TrackDuration",description:'The duration of the Block (based on TimecodeScale). This element is mandatory when DefaultDuration is set for the track (but can be omitted as other default values). When not written and with no DefaultDuration, the value is assumed to be the difference between the timestamp of this Block and the timestamp of the next Block in "display" order (not coding order). This element can be useful at the end of a Track (as there is not other Block available), or when there is a break in a track like for subtitle tracks. When set to 0 that means the frame is not a keyframe.'}],[165,{name:"BlockAdditional",level:5,type:"b",mandatory:!0,minver:1,webm:!1,description:"Interpreted by the codec as it wishes (using the BlockAddID)."}],[238,{name:"BlockAddID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"An ID to identify the BlockAdditional level."}],[166,{name:"BlockMore",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contain the BlockAdditional and some parameters."}],[30113,{name:"BlockAdditions",level:3,type:"m",minver:1,webm:!1,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data."}],[162,{name:"BlockVirtual",level:3,type:"b",webm:!1,description:"A Block with no data. It must be stored in the stream at the place the real Block should be in display order. (see Block Virtual)"}],[161,{name:"Block",level:3,type:"b",mandatory:!0,minver:1,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timecode. (see Block Structure)"}],[160,{name:"BlockGroup",level:2,type:"m",multiple:!0,minver:1,description:"Basic container of information containing a single Block or BlockVirtual, and information specific to that Block/VirtualBlock."}],[163,{name:"SimpleBlock",level:2,type:"b",multiple:!0,minver:2,webm:!0,divx:!0,description:"Similar to SimpleBlock Structure)"}],[171,{name:"PrevSize",cppname:"ClusterPrevSize",level:2,type:"u",minver:1,description:"Size of the previous Cluster, in octets. Can be useful for backward playing."}],[167,{name:"Position",cppname:"ClusterPosition",level:2,type:"u",minver:1,webm:!1,description:"The Position of the Cluster in the segment (0 in live broadcast streams). It might help to resynchronise offset on damaged streams."}],[22743,{name:"SilentTrackNumber",cppname:"ClusterSilentTrackNumber",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster."}],[231,{name:"Timecode",cppname:"ClusterTimecode",level:2,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp of the cluster (based on TimecodeScale)."}],[524531317,{name:"Cluster",level:1,type:"m",multiple:!0,minver:1,description:"The lower level element containing the (monolithic) Block structure."}],[19840,{name:"MuxingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Muxing application or library ("libmatroska-0.4.3").'}],[31657,{name:"Title",level:2,type:"8",minver:1,webm:!1,description:"General name of the segment."}],[2807730,{name:"TimecodeScaleDenominator",level:2,type:"u",mandatory:!0,minver:4,default:1e9,description:"Timestamp scale numerator, see TimecodeScale."}],[2807729,{name:"TimecodeScale",level:2,type:"u",mandatory:!0,minver:1,default:1e6,description:"Timestamp scale in nanoseconds (1.000.000 means all timestamps in the segment are expressed in milliseconds)."}],[27045,{name:"ChapterTranslateID",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this segment in the chapter codec data. The format depends on the ChapProcessCodecID used."}],[27071,{name:"ChapterTranslateCodec",level:3,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."}],[27132,{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this correspondance applies. When not specified, it means for all editions found in the segment."}],[4096955,{name:"NextFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the next segment."}],[4110627,{name:"NextUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the next chained segment (128 bits)."}],[3965867,{name:"PrevFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the previous segment."}],[3979555,{name:"PrevUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the previous chained segment (128 bits)."}],[29604,{name:"SegmentUID",level:2,type:"b",minver:1,webm:!1,range:"not 0",bytesize:16,description:"A randomly generated unique ID to identify the current segment between many others (128 bits)."}],[357149030,{name:"Info",level:1,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains miscellaneous general information and statistics on the file."}],[21420,{name:"SeekPosition",level:3,type:"u",mandatory:!0,minver:1,description:"The position of the element in the segment in octets (0 = first level 1 element)."}],[21419,{name:"SeekID",level:3,type:"b",mandatory:!0,minver:1,description:"The binary ID corresponding to the element name."}],[19899,{name:"Seek",cppname:"SeekPoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains a single seek entry to an EBML element."}],[290298740,{name:"SeekHead",cppname:"SeekHeader",level:1,type:"m",multiple:!0,minver:1,description:"Contains the position of other level 1 elements."}],[32379,{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,i:"Cluster|Block|BlockAdditional",description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption."}],[32347,{name:"SignatureElements",level:1,type:"m",webm:!1,description:"Contains elements that will be used to compute the signature."}],[32437,{name:"Signature",level:1,type:"b",webm:!1,description:"The signature of the data (until a new."}],[32421,{name:"SignaturePublicKey",level:1,type:"b",webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature)."}],[32410,{name:"SignatureHash",level:1,type:"u",webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5)."}],[32394,{name:"SignatureAlgo",level:1,type:"u",webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic)."}],[458458727,{name:"SignatureSlot",level:-1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream."}],[191,{name:"CRC-32",level:-1,type:"b",minver:1,webm:!1,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian"}],[236,{name:"Void",level:-1,type:"b",minver:1,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use."}],[17139,{name:"EBMLMaxSizeLength",level:1,type:"u",mandatory:!0,default:8,minver:1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."}],[17138,{name:"EBMLMaxIDLength",level:1,type:"u",mandatory:!0,default:4,minver:1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."}],[17143,{name:"EBMLReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum EBML version a parser has to support to read this file."}],[440786851,{name:"EBML",level:0,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this."}]]),Tfe=Math.floor,Dfe=function(e){return!va(e)&&isFinite(e)&&Tfe(e)===e};Go(Go.S,"Number",{isInteger:Dfe});var PE=fs.parseInt,kfe=Y$.trim,Pfe=/^[-+]?0[xX]/,DW=PE(Pw+"08")!==8||PE(Pw+"0x16")!==22?function(e,r){var o=kfe(String(e),3);return PE(o,r>>>0||(Pfe.test(o)?16:10))}:PE;Go(Go.S+Go.F*(Number.parseInt!=DW),"Number",{parseInt:DW});var kW;function Lf(){}Lf.prototype=Object.create(null);function Un(){Un.init.call(this)}Un.EventEmitter=Un;Un.usingDomains=!1;Un.prototype.domain=void 0;Un.prototype._events=void 0;Un.prototype._maxListeners=void 0;Un.defaultMaxListeners=10;Un.init=function(){this.domain=null,Un.usingDomains&&kW.active&&!(this instanceof kW.Domain),(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Lf,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Un.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function PW(t){return t._maxListeners===void 0?Un.defaultMaxListeners:t._maxListeners}Un.prototype.getMaxListeners=function(){return PW(this)};function Efe(t,e,r){if(e)t.call(r);else for(var o=t.length,i=Mw(t,o),s=0;s<o;++s)i[s].call(r)}function _fe(t,e,r,o){if(e)t.call(r,o);else for(var i=t.length,s=Mw(t,i),a=0;a<i;++a)s[a].call(r,o)}function Afe(t,e,r,o,i){if(e)t.call(r,o,i);else for(var s=t.length,a=Mw(t,s),l=0;l<s;++l)a[l].call(r,o,i)}function Ife(t,e,r,o,i,s){if(e)t.call(r,o,i,s);else for(var a=t.length,l=Mw(t,a),c=0;c<a;++c)l[c].call(r,o,i,s)}function Rfe(t,e,r,o){if(e)t.apply(r,o);else for(var i=t.length,s=Mw(t,i),a=0;a<i;++a)s[a].apply(r,o)}Un.prototype.emit=function(e){var r,o,i,s,a,l,c,d=e==="error";if(l=this._events,l)d=d&&l.error==null;else if(!d)return!1;if(c=this.domain,d){if(r=arguments[1],c)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=c,r.domainThrown=!1,c.emit("error",r);else{if(r instanceof Error)throw r;var u=new Error('Uncaught, unspecified "error" event. ('+r+")");throw u.context=r,u}return!1}if(o=l[e],!o)return!1;var p=typeof o=="function";switch(i=arguments.length,i){case 1:Efe(o,p,this);break;case 2:_fe(o,p,this,arguments[1]);break;case 3:Afe(o,p,this,arguments[1],arguments[2]);break;case 4:Ife(o,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];Rfe(o,p,this,s)}return!0};function EW(t,e,r,o){var i,s,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(s=t._events,s?(s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]):(s=t._events=new Lf,t._eventsCount=0),!a)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=o?[r,a]:[a,r]:o?a.unshift(r):a.push(r),!a.warned&&(i=PW(t),i&&i>0&&a.length>i)){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,Ffe(l)}return t}function Ffe(t){typeof console.warn=="function"?console.warn(t):console.log(t)}Un.prototype.addListener=function(e,r){return EW(this,e,r,!1)};Un.prototype.on=Un.prototype.addListener;Un.prototype.prependListener=function(e,r){return EW(this,e,r,!0)};function _W(t,e,r){var o=!1;function i(){t.removeListener(e,i),o||(o=!0,r.apply(t,arguments))}return i.listener=r,i}Un.prototype.once=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,_W(this,e,r)),this};Un.prototype.prependOnceListener=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_W(this,e,r)),this};Un.prototype.removeListener=function(e,r){var o,i,s,a,l;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(o=i[e],!o)return this;if(o===r||o.listener&&o.listener===r)--this._eventsCount==0?this._events=new Lf:(delete i[e],i.removeListener&&this.emit("removeListener",e,o.listener||r));else if(typeof o!="function"){for(s=-1,a=o.length;a-- >0;)if(o[a]===r||o[a].listener&&o[a].listener===r){l=o[a].listener,s=a;break}if(s<0)return this;if(o.length===1){if(o[0]=void 0,--this._eventsCount==0)return this._events=new Lf,this;delete i[e]}else Mfe(o,s);i.removeListener&&this.emit("removeListener",e,l||r)}return this};Un.prototype.removeAllListeners=function(e){var r,o;if(o=this._events,!o)return this;if(!o.removeListener)return arguments.length===0?(this._events=new Lf,this._eventsCount=0):o[e]&&(--this._eventsCount==0?this._events=new Lf:delete o[e]),this;if(arguments.length===0){for(var i=Object.keys(o),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new Lf,this._eventsCount=0,this}if(r=o[e],typeof r=="function")this.removeListener(e,r);else if(r)do this.removeListener(e,r[r.length-1]);while(r[0]);return this};Un.prototype.listeners=function(e){var r,o,i=this._events;return i?(r=i[e],r?typeof r=="function"?o=[r.listener||r]:o=Nfe(r):o=[]):o=[],o};Un.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):AW.call(t,e)};Un.prototype.listenerCount=AW;function AW(t){var e=this._events;if(e){var r=e[t];if(typeof r=="function")return 1;if(r)return r.length}return 0}Un.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Mfe(t,e){for(var r=e,o=r+1,i=t.length;o<i;r+=1,o+=1)t[r]=t[o];t.pop()}function Mw(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}function Nfe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function IW(){throw new Error("setTimeout has not been defined")}function RW(){throw new Error("clearTimeout has not been defined")}var Of=IW,zf=RW;typeof m0.setTimeout=="function"&&(Of=setTimeout);typeof m0.clearTimeout=="function"&&(zf=clearTimeout);function FW(t){if(Of===setTimeout)return setTimeout(t,0);if((Of===IW||!Of)&&setTimeout)return Of=setTimeout,setTimeout(t,0);try{return Of(t,0)}catch(e){try{return Of.call(null,t,0)}catch(r){return Of.call(this,t,0)}}}function Bfe(t){if(zf===clearTimeout)return clearTimeout(t);if((zf===RW||!zf)&&clearTimeout)return zf=clearTimeout,clearTimeout(t);try{return zf(t)}catch(e){try{return zf.call(null,t)}catch(r){return zf.call(this,t)}}}var Xp=[],v0=!1,gv,EE=-1;function Lfe(){!v0||!gv||(v0=!1,gv.length?Xp=gv.concat(Xp):EE=-1,Xp.length&&MW())}function MW(){if(!v0){var t=FW(Lfe);v0=!0;for(var e=Xp.length;e;){for(gv=Xp,Xp=[];++EE<e;)gv&&gv[EE].run();EE=-1,e=Xp.length}gv=null,v0=!1,Bfe(t)}}function Nl(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Xp.push(new NW(t,e)),Xp.length===1&&!v0&&FW(MW)}function NW(t,e){this.fun=t,this.array=e}NW.prototype.run=function(){this.fun.apply(null,this.array)};var Ofe="browser",zfe="browser",Ufe=!0,Hfe={},Gfe=[],Vfe="",$fe={},Wfe={},jfe={};function vv(){}var Kfe=vv,qfe=vv,Yfe=vv,Xfe=vv,Qfe=vv,Jfe=vv,Zfe=vv;function eme(t){throw new Error("process.binding is not supported")}function tme(){return"/"}function rme(t){throw new Error("process.chdir is not supported")}function nme(){return 0}var b0=m0.performance||{},ome=b0.now||b0.mozNow||b0.msNow||b0.oNow||b0.webkitNow||function(){return new Date().getTime()};function ime(t){var e=ome.call(b0)*.001,r=Math.floor(e),o=Math.floor(e%1*1e9);return t&&(r=r-t[0],o=o-t[1],o<0&&(r--,o+=1e9)),[r,o]}var sme=new Date;function ame(){var t=new Date,e=t-sme;return e/1e3}var lme={nextTick:Nl,title:Ofe,browser:Ufe,env:Hfe,argv:Gfe,version:Vfe,versions:$fe,on:Kfe,addListener:qfe,once:Yfe,off:Xfe,removeListener:Qfe,removeAllListeners:Jfe,emit:Zfe,binding:eme,cwd:tme,chdir:rme,umask:nme,hrtime:ime,platform:zfe,release:Wfe,config:jfe,uptime:ame},aL;typeof Object.create=="function"?aL=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:aL=function(e,r){e.super_=r;var o=function(){};o.prototype=r.prototype,e.prototype=new o,e.prototype.constructor=e};var y0=aL,cme=/%[sdj%]/g;function dme(t){if(!pL(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Uf(arguments[r]));return e.join(" ")}for(var r=1,o=arguments,i=o.length,s=String(t).replace(cme,function(l){if(l==="%%")return"%";if(r>=i)return l;switch(l){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(c){return"[Circular]"}default:return l}}),a=o[r];r<i;a=o[++r])uL(a)||!Nw(a)?s+=" "+a:s+=" "+Uf(a);return s}function BW(t,e){if(Hf(m0.process))return function(){return BW(t,e).apply(this,arguments)};var r=!1;function o(){return r||(console.error(e),r=!0),t.apply(this,arguments)}return o}var _E={},lL;function ume(t){if(Hf(lL)&&(lL=lme.env.NODE_DEBUG||""),t=t.toUpperCase(),!_E[t])if(new RegExp("\\b"+t+"\\b","i").test(lL)){var e=0;_E[t]=function(){var r=dme.apply(null,arguments);console.error("%s %d: %s",t,e,r)}}else _E[t]=function(){};return _E[t]}function Uf(t,e){var r={seen:[],stylize:hme};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),LW(e)?r.showHidden=e:e&&Cme(r,e),Hf(r.showHidden)&&(r.showHidden=!1),Hf(r.depth)&&(r.depth=2),Hf(r.colors)&&(r.colors=!1),Hf(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=pme),AE(r,t,r.depth)}Uf.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Uf.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function pme(t,e){var r=Uf.styles[e];return r?"["+Uf.colors[r][0]+"m"+t+"["+Uf.colors[r][1]+"m":t}function hme(t,e){return t}function fme(t){var e={};return t.forEach(function(r,o){e[r]=!0}),e}function AE(t,e,r){if(t.customInspect&&e&&mL(e.inspect)&&e.inspect!==Uf&&!(e.constructor&&e.constructor.prototype===e)){var o=e.inspect(r,t);return pL(o)||(o=AE(t,o,r)),o}var i=mme(t,e);if(i)return i;var s=Object.keys(e),a=fme(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),fL(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return cL(e);if(s.length===0){if(mL(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(hL(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(OW(e))return t.stylize(Date.prototype.toString.call(e),"date");if(fL(e))return cL(e)}var c="",d=!1,u=["{","}"];if(bme(e)&&(d=!0,u=["[","]"]),mL(e)){var p=e.name?": "+e.name:"";c=" [Function"+p+"]"}if(hL(e)&&(c=" "+RegExp.prototype.toString.call(e)),OW(e)&&(c=" "+Date.prototype.toUTCString.call(e)),fL(e)&&(c=" "+cL(e)),s.length===0&&(!d||e.length==0))return u[0]+c+u[1];if(r<0)return hL(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var h;return d?h=gme(t,e,r,a,s):h=s.map(function(f){return dL(t,e,r,a,f,d)}),t.seen.pop(),vme(h,c,u)}function mme(t,e){if(Hf(e))return t.stylize("undefined","undefined");if(pL(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(yme(e))return t.stylize(""+e,"number");if(LW(e))return t.stylize(""+e,"boolean");if(uL(e))return t.stylize("null","null")}function cL(t){return"["+Error.prototype.toString.call(t)+"]"}function gme(t,e,r,o,i){for(var s=[],a=0,l=e.length;a<l;++a)zW(e,String(a))?s.push(dL(t,e,r,o,String(a),!0)):s.push("");return i.forEach(function(c){c.match(/^\d+$/)||s.push(dL(t,e,r,o,c,!0))}),s}function dL(t,e,r,o,i,s){var a,l,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?l=t.stylize("[Getter/Setter]","special"):l=t.stylize("[Getter]","special"):c.set&&(l=t.stylize("[Setter]","special")),zW(o,i)||(a="["+i+"]"),l||(t.seen.indexOf(c.value)<0?(uL(r)?l=AE(t,c.value,null):l=AE(t,c.value,r-1),l.indexOf(`
`)>-1&&(s?l=l.split(`
`).map(function(d){return"  "+d}).join(`
`).substr(2):l=`
`+l.split(`
`).map(function(d){return"   "+d}).join(`
`))):l=t.stylize("[Circular]","special")),Hf(a)){if(s&&i.match(/^\d+$/))return l;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+l}function vme(t,e,r){var o=t.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function bme(t){return Array.isArray(t)}function LW(t){return typeof t=="boolean"}function uL(t){return t===null}function yme(t){return typeof t=="number"}function pL(t){return typeof t=="string"}function Hf(t){return t===void 0}function hL(t){return Nw(t)&&gL(t)==="[object RegExp]"}function Nw(t){return typeof t=="object"&&t!==null}function OW(t){return Nw(t)&&gL(t)==="[object Date]"}function fL(t){return Nw(t)&&(gL(t)==="[object Error]"||t instanceof Error)}function mL(t){return typeof t=="function"}function gL(t){return Object.prototype.toString.call(t)}function Cme(t,e){if(!e||!Nw(e))return t;for(var r=Object.keys(e),o=r.length;o--;)t[r[o]]=e[r[o]];return t}function zW(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bv(){this.head=null,this.tail=null,this.length=0}bv.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};bv.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};bv.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};bv.prototype.clear=function(){this.head=this.tail=null,this.length=0};bv.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r};bv.prototype.concat=function(t){if(this.length===0)return rt.alloc(0);if(this.length===1)return this.head.data;for(var e=rt.allocUnsafe(t>>>0),r=this.head,o=0;r;)r.data.copy(e,o),o+=r.data.length,r=r.next;return e};var Sme=rt.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function xme(t){if(t&&!Sme(t))throw new Error("Unknown encoding: "+t)}function Bw(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),xme(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Tme;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Dme;break;default:this.write=wme;return}this.charBuffer=new rt(6),this.charReceived=0,this.charLength=0}Bw.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var o=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,o),o-=this.charReceived),e+=t.toString(this.encoding,0,o);var o=e.length-1,i=e.charCodeAt(o);if(i>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,o)}return e};Bw.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(e==1&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e};Bw.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,o=this.charBuffer,i=this.encoding;e+=o.slice(0,r).toString(i)}return e};function wme(t){return t.toString(this.encoding)}function Tme(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function Dme(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Ti.ReadableState=UW;var vo=ume("stream");y0(Ti,Un);function kme(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Pme(t,e){return t.listeners(e).length}function UW(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Dc&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new bv,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new Bw(t.encoding),this.encoding=t.encoding)}function Ti(t){if(!(this instanceof Ti))return new Ti(t);this._readableState=new UW(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),Un.call(this)}Ti.prototype.push=function(t,e){var r=this._readableState;return!r.objectMode&&typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=rt.from(t,e),e="")),HW(this,r,t,e,!1)};Ti.prototype.unshift=function(t){var e=this._readableState;return HW(this,e,t,"",!0)};Ti.prototype.isPaused=function(){return this._readableState.flowing===!1};function HW(t,e,r,o,i){var s=Ame(e,r);if(s)t.emit("error",s);else if(r===null)e.reading=!1,Ime(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var l=new Error("stream.unshift() after end event");t.emit("error",l)}else{var c;e.decoder&&!i&&!o&&(r=e.decoder.write(r),c=!e.objectMode&&r.length===0),i||(e.reading=!1),c||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&IE(t))),Rme(t,e)}else i||(e.reading=!1);return Eme(e)}function Eme(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Ti.prototype.setEncoding=function(t){return this._readableState.decoder=new Bw(t),this._readableState.encoding=t,this};var GW=8388608;function _me(t){return t>=GW?t=GW:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function VW(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=_me(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ti.prototype.read=function(t){vo("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return vo("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?bL(this):IE(this),null;if(t=VW(t,e),t===0&&e.ended)return e.length===0&&bL(this),null;var o=e.needReadable;vo("need readable",o),(e.length===0||e.length-t<e.highWaterMark)&&(o=!0,vo("length less than watermark",o)),e.ended||e.reading?(o=!1,vo("reading or ended",o)):o&&(vo("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=VW(r,e)));var i;return t>0?i=WW(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&bL(this)),i!==null&&this.emit("data",i),i};function Ame(t,e){var r=null;return!uE(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Ime(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,IE(t)}}function IE(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(vo("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Nl($W,t):$W(t))}function $W(t){vo("emit readable"),t.emit("readable"),vL(t)}function Rme(t,e){e.readingMore||(e.readingMore=!0,Nl(Fme,t,e))}function Fme(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(vo("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}Ti.prototype._read=function(t){this.emit("error",new Error("not implemented"))};Ti.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t);break}o.pipesCount+=1,vo("pipe count=%d opts=%j",o.pipesCount,e);var i=!e||e.end!==!1,s=i?l:u;o.endEmitted?Nl(s):r.once("end",s),t.on("unpipe",a);function a(y){vo("onunpipe"),y===r&&u()}function l(){vo("onend"),t.end()}var c=Mme(r);t.on("drain",c);var d=!1;function u(){vo("cleanup"),t.removeListener("close",m),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",f),t.removeListener("unpipe",a),r.removeListener("end",l),r.removeListener("end",u),r.removeListener("data",h),d=!0,o.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}var p=!1;r.on("data",h);function h(y){vo("ondata"),p=!1;var S=t.write(y);S===!1&&!p&&((o.pipesCount===1&&o.pipes===t||o.pipesCount>1&&jW(o.pipes,t)!==-1)&&!d&&(vo("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function f(y){vo("onerror",y),v(),t.removeListener("error",f),Pme(t,"error")===0&&t.emit("error",y)}kme(t,"error",f);function m(){t.removeListener("finish",g),v()}t.once("close",m);function g(){vo("onfinish"),t.removeListener("close",m),v()}t.once("finish",g);function v(){vo("unpipe"),r.unpipe(t)}return t.emit("pipe",r),o.flowing||(vo("pipe resume"),r.resume()),t};function Mme(t){return function(){var e=t._readableState;vo("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,vL(t))}}Ti.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this);return this}var s=jW(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};Ti.prototype.on=function(t,e){var r=Un.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var o=this._readableState;!o.endEmitted&&!o.readableListening&&(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&IE(this,o):Nl(Nme,this))}return r};Ti.prototype.addListener=Ti.prototype.on;function Nme(t){vo("readable nexttick read 0"),t.read(0)}Ti.prototype.resume=function(){var t=this._readableState;return t.flowing||(vo("resume"),t.flowing=!0,Bme(this,t)),this};function Bme(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Nl(Lme,t,e))}function Lme(t,e){e.reading||(vo("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),vL(t),e.flowing&&!e.reading&&t.read(0)}Ti.prototype.pause=function(){return vo("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(vo("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function vL(t){var e=t._readableState;for(vo("flow",e.flowing);e.flowing&&t.read()!==null;);}Ti.prototype.wrap=function(t){var e=this._readableState,r=!1,o=this;t.on("end",function(){if(vo("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&o.push(a)}o.push(null)}),t.on("data",function(a){if(vo("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var l=o.push(a);l||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return Gme(s,function(a){t.on(a,o.emit.bind(o,a))}),o._read=function(a){vo("wrapped _read",a),r&&(r=!1,t.resume())},o};Ti._fromList=WW;function WW(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Ome(t,e.buffer,e.decoder),r}function Ome(t,e,r){var o;return t<e.head.data.length?(o=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?o=e.shift():o=r?zme(t,e):Ume(t,e),o}function zme(t,e){var r=e.head,o=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),t-=a,t===0){a===s.length?(++o,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++o}return e.length-=o,i}function Ume(t,e){var r=rt.allocUnsafe(t),o=e.head,i=1;for(o.data.copy(r),t-=o.data.length;o=o.next;){var s=o.data,a=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,a),t-=a,t===0){a===s.length?(++i,o.next?e.head=o.next:e.head=e.tail=null):(e.head=o,o.data=s.slice(a));break}++i}return e.length-=i,r}function bL(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Nl(Hme,e,t))}function Hme(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Gme(t,e){for(var r=0,o=t.length;r<o;r++)e(t[r],r)}function jW(t,e){for(var r=0,o=t.length;r<o;r++)if(t[r]===e)return r;return-1}ba.WritableState=yL;y0(ba,Un);function Vme(){}function $me(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function yL(t,e){Object.defineProperty(this,"buffer",{get:BW(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Dc&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){Qme(e,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new JW(this)}yL.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};function ba(t){if(!(this instanceof ba)&&!(this instanceof Dc))return new ba(t);this._writableState=new yL(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),Un.call(this)}ba.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Wme(t,e){var r=new Error("write after end");t.emit("error",r),Nl(e,r)}function jme(t,e,r,o){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):!rt.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Nl(o,s),i=!1),i}ba.prototype.write=function(t,e,r){var o=this._writableState,i=!1;return typeof e=="function"&&(r=e,e=null),rt.isBuffer(t)?e="buffer":e||(e=o.defaultEncoding),typeof r!="function"&&(r=Vme),o.ended?Wme(this,r):jme(this,o,t,r)&&(o.pendingcb++,i=qme(this,o,t,e,r)),i};ba.prototype.cork=function(){var t=this._writableState;t.corked++};ba.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&qW(this,t))};ba.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Kme(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=rt.from(e,r)),e}function qme(t,e,r,o,i){r=Kme(e,r,o),rt.isBuffer(r)&&(o="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest=new $me(r,o,i),l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else CL(t,e,!1,s,r,o,i);return a}function CL(t,e,r,o,i,s,a){e.writelen=o,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Yme(t,e,r,o,i){--e.pendingcb,r?Nl(i,o):i(o),t._writableState.errorEmitted=!0,t.emit("error",o)}function Xme(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Qme(t,e){var r=t._writableState,o=r.sync,i=r.writecb;if(Xme(r),e)Yme(t,r,o,e,i);else{var s=YW(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&qW(t,r),o?Nl(KW,t,r,s,i):KW(t,r,s,i)}}function KW(t,e,r,o){r||Jme(t,e),e.pendingcb--,o(),QW(t,e)}function Jme(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function qW(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var o=e.bufferedRequestCount,i=new Array(o),s=e.corkedRequestsFree;s.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;CL(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new JW(e)}else{for(;r;){var l=r.chunk,c=r.encoding,d=r.callback,u=e.objectMode?1:l.length;if(CL(t,e,!1,u,l,c,d),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}ba.prototype._write=function(t,e,r){r(new Error("not implemented"))};ba.prototype._writev=null;ba.prototype.end=function(t,e,r){var o=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),o.corked&&(o.corked=1,this.uncork()),!o.ending&&!o.finished&&Zme(this,o,r)};function YW(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function XW(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function QW(t,e){var r=YW(e);return r&&(e.pendingcb===0?(XW(t,e),e.finished=!0,t.emit("finish")):XW(t,e)),r}function Zme(t,e,r){e.ending=!0,QW(t,e),r&&(e.finished?Nl(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function JW(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var o=e.entry;for(e.entry=null;o;){var i=o.callback;t.pendingcb--,i(r),o=o.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}y0(Dc,Ti);var ZW=Object.keys(ba.prototype);for(RE=0;RE<ZW.length;RE++)FE=ZW[RE],Dc.prototype[FE]||(Dc.prototype[FE]=ba.prototype[FE]);var FE,RE;function Dc(t){if(!(this instanceof Dc))return new Dc(t);Ti.call(this,t),ba.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ege)}function ege(){this.allowHalfOpen||this._writableState.ended||Nl(tge,this)}function tge(t){t.end()}y0(kc,Dc);function rge(t){this.afterTransform=function(e,r){return nge(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function nge(t,e,r){var o=t._transformState;o.transforming=!1;var i=o.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));o.writechunk=null,o.writecb=null,r!=null&&t.push(r),i(e);var s=t._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&t._read(s.highWaterMark)}function kc(t){if(!(this instanceof kc))return new kc(t);Dc.call(this,t),this._transformState=new rge(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){ej(e,r)}):ej(e)})}kc.prototype.push=function(t,e){return this._transformState.needTransform=!1,Dc.prototype.push.call(this,t,e)};kc.prototype._transform=function(t,e,r){throw new Error("Not implemented")};kc.prototype._write=function(t,e,r){var o=this._transformState;if(o.writecb=r,o.writechunk=t,o.writeencoding=e,!o.transforming){var i=this._readableState;(o.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};kc.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function ej(t,e){if(e)return t.emit("error",e);var r=t._writableState,o=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}y0(Lw,kc);function Lw(t){if(!(this instanceof Lw))return new Lw(t);kc.call(this,t)}Lw.prototype._transform=function(t,e,r){r(null,t)};y0(Qp,Un);Qp.Readable=Ti;Qp.Writable=ba;Qp.Duplex=Dc;Qp.Transform=kc;Qp.PassThrough=Lw;Qp.Stream=Qp;function Qp(){Un.call(this)}Qp.prototype.pipe=function(t,e){var r=this;function o(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",o);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(u){if(d(),Un.listenerCount(this,"error")===0)throw u}r.on("error",c),t.on("error",c);function d(){r.removeListener("data",o),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",l),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",d),r.removeListener("close",d),t.removeListener("close",d)}return r.on("end",d),r.on("close",d),t.on("close",d),t.emit("pipe",r),t};var Vo=_B()("ebml:decoder"),ME=1,tj=2,rj=3,oge=function(t){A$(e,t);function e(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return NB(this,e),r=R$(this,pE(e).call(this,g0({},o,{readableObjectMode:!0}))),qp(Qs(Qs(r)),"mBuffer",null),qp(Qs(Qs(r)),"mTagStack",[]),qp(Qs(Qs(r)),"mState",ME),qp(Qs(Qs(r)),"mCursor",0),qp(Qs(Qs(r)),"mTotal",0),r}return BB(e,[{key:"_transform",value:function(o,i,s){for(this.buffer?this.buffer=Ff.concatenate(this.buffer,rt.from(o)):this.buffer=rt.from(o);this.cursor<this.buffer.length&&!(this.state===ME&&!this.readTag()||this.state===tj&&!this.readSize()||this.state===rj&&!this.readContent()););s()}},{key:"readTag",value:function(){if(Vo.enabled&&Vo("parsing tag"),this.cursor>=this.buffer.length)return Vo.enabled&&Vo("waiting for more data"),!1;var o=this.total,i=Ff.readVint(this.buffer,this.cursor);if(i==null)return Vo.enabled&&Vo("waiting for more data"),!1;var s=Ff.readHexString(this.buffer,this.cursor,this.cursor+i.length),a=Number.parseInt(s,16);this.cursor+=i.length,this.total+=i.length,this.state=tj;var l={tag:i.value,tagStr:s,type:e.getSchemaInfo(a).type,name:e.getSchemaInfo(a).name,start:o,end:o+i.length};return this.tagStack.push(l),Vo.enabled&&Vo("read tag: ".concat(s)),!0}},{key:"readSize",value:function(){var o=this.tagStack[this.tagStack.length-1];if(Vo.enabled&&Vo("parsing size for tag: ".concat(o.tagStr)),this.cursor>=this.buffer.length)return Vo.enabled&&Vo("waiting for more data"),!1;var i=Ff.readVint(this.buffer,this.cursor);return i==null?(Vo.enabled&&Vo("waiting for more data"),!1):(this.cursor+=i.length,this.total+=i.length,this.state=rj,o.dataSize=i.value,i.value===-1?o.end=-1:o.end+=i.value+i.length,Vo.enabled&&Vo("read size: ".concat(i.value)),!0)}},{key:"readContent",value:function(){var o=this.tagStack[this.tagStack.length-1],i=o.tagStr,s=o.type,a=o.dataSize,l=I$(o,["tagStr","type","dataSize"]);if(Vo.enabled&&Vo("parsing content for tag: ".concat(i)),s==="m")return Vo.enabled&&Vo("content should be tags"),this.push(["start",g0({tagStr:i,type:s,dataSize:a},l)]),this.state=ME,!0;if(this.buffer.length<this.cursor+a)return Vo.enabled&&(Vo("got: ".concat(this.buffer.length)),Vo("need: ".concat(this.cursor+a)),Vo("waiting for more data")),!1;var c=this.buffer.subarray(this.cursor,this.cursor+a);for(this.total+=a,this.state=ME,this.buffer=this.buffer.subarray(this.cursor+a),this.cursor=0,this.tagStack.pop(),this.push(["tag",Ff.readDataFromTag(g0({tagStr:i,type:s,dataSize:a},l),rt.from(c))]);this.tagStack.length>0;){var d=this.tagStack[this.tagStack.length-1];if(this.total<d.end)break;this.push(["end",d]),this.tagStack.pop()}return Vo.enabled&&Vo("read data: ".concat(c.toString("hex"))),!0}},{key:"buffer",get:function(){return this.mBuffer},set:function(o){this.mBuffer=o}},{key:"cursor",get:function(){return this.mCursor},set:function(o){this.mCursor=o}},{key:"state",get:function(){return this.mState},set:function(o){this.mState=o}},{key:"tagStack",get:function(){return this.mTagStack}},{key:"total",get:function(){return this.mTotal},set:function(o){this.mTotal=o}}],[{key:"getSchemaInfo",value:function(o){return Number.isInteger(o)&&Fw.has(o)?Fw.get(o):{type:null,name:"unknown",description:"",level:-1,minver:-1,multiple:!1,webm:!1}}}]),e}(kc),nj=Array.isArray||function(e){return fv(e)=="Array"},ige=Tc("species"),sge=function(t){var e;return nj(t)&&(e=t.constructor,typeof e=="function"&&(e===Array||nj(e.prototype))&&(e=void 0),va(e)&&(e=e[ige],e===null&&(e=void 0))),e===void 0?Array:e},age=function(t,e){return new(sge(t))(e)},lge=function(t,e){var r=t==1,o=t==2,i=t==3,s=t==4,a=t==6,l=t==5||a,c=e||age;return function(d,u,p){for(var h=QB(d),f=O$(h),m=hv(u,p,3),g=Dw(f.length),v=0,y=r?c(d,g):o?c(d,0):void 0,S,C;g>v;v++)if((l||v in f)&&(S=f[v],C=m(S,v,h),t)){if(r)y[v]=C;else if(C)switch(t){case 3:return!0;case 5:return S;case 6:return v;case 2:y.push(S)}else if(s)return!1}return a?-1:i||s?s:y}},cge=lge(5),SL="find",oj=!0;SL in[]&&Array(1)[SL](function(){oj=!1});Go(Go.P+Go.F*oj,"Array",{find:function(e){return cge(this,e,arguments.length>1?arguments[1]:void 0)}});wE(SL);var NE=Oa;function Oa(t){if(!(this instanceof Oa))return new Oa(t);this.buffers=t||[],this.length=this.buffers.reduce(function(e,r){return e+r.length},0)}Oa.prototype.push=function(){for(var t=0;t<arguments.length;t++)if(!uE(arguments[t]))throw new TypeError("Tried to push a non-buffer");for(var t=0;t<arguments.length;t++){var e=arguments[t];this.buffers.push(e),this.length+=e.length}return this.length};Oa.prototype.unshift=function(){for(var t=0;t<arguments.length;t++)if(!uE(arguments[t]))throw new TypeError("Tried to unshift a non-buffer");for(var t=0;t<arguments.length;t++){var e=arguments[t];this.buffers.unshift(e),this.length+=e.length}return this.length};Oa.prototype.copy=function(t,e,r,o){return this.slice(r,o).copy(t,e,0,o-r)};Oa.prototype.splice=function(t,e){var r=this.buffers,o=t>=0?t:this.length-t,i=[].slice.call(arguments,2);e===void 0?e=this.length-o:e>this.length-o&&(e=this.length-o);for(var t=0;t<i.length;t++)this.length+=i[t].length;for(var s=new Oa,a=0,l=0;l<r.length&&a+r[l].length<o;l++)a+=r[l].length;if(o-a>0){var c=o-a;if(c+e<r[l].length){s.push(r[l].slice(c,c+e));for(var d=r[l],u=new rt(c),t=0;t<c;t++)u[t]=d[t];for(var p=new rt(d.length-c-e),t=c+e;t<d.length;t++)p[t-e-c]=d[t];if(i.length>0){var h=i.slice();h.unshift(u),h.push(p),r.splice.apply(r,[l,1].concat(h)),l+=h.length,i=[]}else r.splice(l,1,u,p),l+=2}else s.push(r[l].slice(c)),r[l]=r[l].slice(0,c),l++}for(i.length>0&&(r.splice.apply(r,[l,0].concat(i)),l+=i.length);s.length<e;){var f=r[l],m=f.length,g=Math.min(m,e-s.length);g===m?(s.push(f),r.splice(l,1)):(s.push(f.slice(0,g)),r[l]=r[l].slice(g))}return this.length-=s.length,s};Oa.prototype.slice=function(t,e){var r=this.buffers;e===void 0&&(e=this.length),t===void 0&&(t=0),e>this.length&&(e=this.length);for(var o=0,i=0;i<r.length&&o+r[i].length<=t;i++)o+=r[i].length;for(var s=new rt(e-t),a=0,l=i;a<e-t&&l<r.length;l++){var c=r[l].length,d=a===0?t-o:0,u=a+c>=e-t?Math.min(d+(e-t)-a,c):c;r[l].copy(s,a,d,u),a+=u-d}return s};Oa.prototype.pos=function(t){if(t<0||t>=this.length)throw new Error("oob");for(var e=t,r=0,o=null;;){if(o=this.buffers[r],e<o.length)return{buf:r,offset:e};e-=o.length,r++}};Oa.prototype.get=function(e){var r=this.pos(e);return this.buffers[r.buf].get(r.offset)};Oa.prototype.set=function(e,r){var o=this.pos(e);return this.buffers[o.buf].set(o.offset,r)};Oa.prototype.indexOf=function(t,e){if(typeof t=="string")t=new rt(t);else if(!(t instanceof rt))throw new Error("Invalid type for a search string");if(!t.length)return 0;if(!this.length)return-1;var r=0,o=0,i=0,s,a=0;if(e){var l=this.pos(e);r=l.buf,o=l.offset,a=e}for(;;){for(;o>=this.buffers[r].length;)if(o=0,r++,r>=this.buffers.length)return-1;var c=this.buffers[r][o];if(c==t[i]){if(i==0&&(s={i:r,j:o,pos:a}),i++,i==t.length)return s.pos}else i!=0&&(r=s.i,o=s.j,a=s.pos,i=0);o++,a++}};Oa.prototype.toBuffer=function(){return this.slice()};Oa.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)};var C0=_B()("ebml:encoder");function ij(t,e,r){return NE(r===-1?[t,rt.from("01ffffffffffffff","hex"),e]:[t,Ff.writeVint(e.length),e])}var dge=function(t){A$(e,t);function e(){var r,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return NB(this,e),r=R$(this,pE(e).call(this,g0({},o,{writableObjectMode:!0}))),qp(Qs(Qs(r)),"mBuffer",null),qp(Qs(Qs(r)),"mCorked",!1),qp(Qs(Qs(r)),"mStack",[]),r}return BB(e,[{key:"_transform",value:function(o,i,s){var a=mhe(o,2),l=a[0],c=a[1],d=c.data,u=c.name,p=I$(c,["data","name"]);switch(C0.enabled&&C0("encode ".concat(l," ").concat(u)),l){case"start":this.startTag(u,g0({name:u,data:d},p));break;case"tag":this.writeTag(u,d);break;case"end":this.endTag();break;default:break}s()}},{key:"flush",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};if(!this.buffer||this.corked){C0.enabled&&C0("no buffer/nothing pending"),o();return}C0.enabled&&C0("writing ".concat(this.buffer.length," bytes"));var i=rt.from(this.buffer);this.buffer=null,this.push(i),o()}},{key:"bufferAndFlush",value:function(o){this.buffer?this.buffer=Ff.concatenate(this.buffer,o):this.buffer=NE(o),this.flush()}},{key:"_flush",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};this.flush(o)}},{key:"_bufferAndFlush",value:function(o){this.bufferAndFlush(o)}},{key:"cork",value:function(){this.corked=!0}},{key:"uncork",value:function(){this.corked=!1,this.flush()}},{key:"writeTag",value:function(o,i){var s=e.getSchemaInfo(o);if(!s)throw new Error("No schema entry found for ".concat(o));if(i){var a=ij(s,i);this.stack.length>0?this.stack[this.stack.length-1].children.push({data:a}):this.bufferAndFlush(a.buffer)}}},{key:"startTag",value:function(o,i){var s=i.end,a=e.getSchemaInfo(o);if(!a)throw new Error("No schema entry found for ".concat(o));var l={data:null,id:a,name:o,end:s,children:[]};this.stack.length>0&&this.stack[this.stack.length-1].children.push(l),this.stack.push(l)}},{key:"endTag",value:function(){var o=this.stack.pop(),i=o.children.map(function(s){return s.data});o.data=ij(o.id,NE(i),o.end),this.stack.length<1&&this.bufferAndFlush(o.data.buffer),this.end()}},{key:"buffer",get:function(){return this.mBuffer},set:function(o){this.mBuffer=o}},{key:"corked",get:function(){return this.mCorked},set:function(o){this.mCorked=o}},{key:"stack",get:function(){return this.mStack},set:function(o){this.mStack=o}}],[{key:"getSchemaInfo",value:function(o){var i=Array.from(Fw.keys()).find(function(s){return Fw.get(s).name===o});return i||null}}]),e}(kc);S0.tools=Ff;S0.schema=Fw;S0.Decoder=oge;S0.Encoder=dge});var lj=st(LE=>{"use strict";LE.byteLength=fge;LE.toByteArray=gge;LE.fromByteArray=yge;var Tu=[],Pc=[],hge=typeof Uint8Array!="undefined"?Uint8Array:Array,wL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(yv=0,sj=wL.length;yv<sj;++yv)Tu[yv]=wL[yv],Pc[wL.charCodeAt(yv)]=yv;var yv,sj;Pc["-".charCodeAt(0)]=62;Pc["_".charCodeAt(0)]=63;function aj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var o=r===e?0:4-r%4;return[r,o]}function fge(t){var e=aj(t),r=e[0],o=e[1];return(r+o)*3/4-o}function mge(t,e,r){return(e+r)*3/4-r}function gge(t){var e,r=aj(t),o=r[0],i=r[1],s=new hge(mge(t,o,i)),a=0,l=i>0?o-4:o,c;for(c=0;c<l;c+=4)e=Pc[t.charCodeAt(c)]<<18|Pc[t.charCodeAt(c+1)]<<12|Pc[t.charCodeAt(c+2)]<<6|Pc[t.charCodeAt(c+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Pc[t.charCodeAt(c)]<<2|Pc[t.charCodeAt(c+1)]>>4,s[a++]=e&255),i===1&&(e=Pc[t.charCodeAt(c)]<<10|Pc[t.charCodeAt(c+1)]<<4|Pc[t.charCodeAt(c+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function vge(t){return Tu[t>>18&63]+Tu[t>>12&63]+Tu[t>>6&63]+Tu[t&63]}function bge(t,e,r){for(var o,i=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(vge(o));return i.join("")}function yge(t){for(var e,r=t.length,o=r%3,i=[],s=16383,a=0,l=r-o;a<l;a+=s)i.push(bge(t,a,a+s>l?l:a+s));return o===1?(e=t[r-1],i.push(Tu[e>>2]+Tu[e<<4&63]+"==")):o===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Tu[e>>10]+Tu[e>>4&63]+Tu[e<<2&63]+"=")),i.join("")}});var cj=st(TL=>{TL.read=function(t,e,r,o,i){var s,a,l=i*8-o-1,c=(1<<l)-1,d=c>>1,u=-7,p=r?i-1:0,h=r?-1:1,f=t[e+p];for(p+=h,s=f&(1<<-u)-1,f>>=-u,u+=l;u>0;s=s*256+t[e+p],p+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=o;u>0;a=a*256+t[e+p],p+=h,u-=8);if(s===0)s=1-d;else{if(s===c)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,o),s=s-d}return(f?-1:1)*a*Math.pow(2,s-o)};TL.write=function(t,e,r,o,i,s){var a,l,c,d=s*8-i-1,u=(1<<d)-1,p=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:s-1,m=o?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+p>=1?e+=h/c:e+=h*Math.pow(2,1-p),e*c>=2&&(a++,c/=2),a+p>=u?(l=0,a=u):a+p>=1?(l=(e*c-1)*Math.pow(2,i),a=a+p):(l=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=l&255,f+=m,l/=256,i-=8);for(a=a<<i|l,d+=i;d>0;t[r+f]=a&255,f+=m,a/=256,d-=8);t[r+f-m]|=g*128}});var xj=st(w0=>{"use strict";var DL=lj(),x0=cj(),dj=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;w0.Buffer=at;w0.SlowBuffer=Dge;w0.INSPECT_MAX_BYTES=50;var OE=2147483647;w0.kMaxLength=OE;at.TYPED_ARRAY_SUPPORT=Cge();!at.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Cge(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(r){return!1}}Object.defineProperty(at.prototype,"parent",{enumerable:!0,get:function(){if(!!at.isBuffer(this))return this.buffer}});Object.defineProperty(at.prototype,"offset",{enumerable:!0,get:function(){if(!!at.isBuffer(this))return this.byteOffset}});function Jp(t){if(t>OE)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,at.prototype),e}function at(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return kL(t)}return uj(t,e,r)}at.poolSize=8192;function uj(t,e,r){if(typeof t=="string")return xge(t,e);if(ArrayBuffer.isView(t))return wge(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Du(t,ArrayBuffer)||t&&Du(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Du(t,SharedArrayBuffer)||t&&Du(t.buffer,SharedArrayBuffer)))return EL(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var o=t.valueOf&&t.valueOf();if(o!=null&&o!==t)return at.from(o,e,r);var i=Tge(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return at.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}at.from=function(t,e,r){return uj(t,e,r)};Object.setPrototypeOf(at.prototype,Uint8Array.prototype);Object.setPrototypeOf(at,Uint8Array);function pj(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Sge(t,e,r){return pj(t),t<=0?Jp(t):e!==void 0?typeof r=="string"?Jp(t).fill(e,r):Jp(t).fill(e):Jp(t)}at.alloc=function(t,e,r){return Sge(t,e,r)};function kL(t){return pj(t),Jp(t<0?0:_L(t)|0)}at.allocUnsafe=function(t){return kL(t)};at.allocUnsafeSlow=function(t){return kL(t)};function xge(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!at.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=hj(t,e)|0,o=Jp(r),i=o.write(t,e);return i!==r&&(o=o.slice(0,i)),o}function PL(t){for(var e=t.length<0?0:_L(t.length)|0,r=Jp(e),o=0;o<e;o+=1)r[o]=t[o]&255;return r}function wge(t){if(Du(t,Uint8Array)){var e=new Uint8Array(t);return EL(e.buffer,e.byteOffset,e.byteLength)}return PL(t)}function EL(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var o;return e===void 0&&r===void 0?o=new Uint8Array(t):r===void 0?o=new Uint8Array(t,e):o=new Uint8Array(t,e,r),Object.setPrototypeOf(o,at.prototype),o}function Tge(t){if(at.isBuffer(t)){var e=_L(t.length)|0,r=Jp(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||IL(t.length)?Jp(0):PL(t);if(t.type==="Buffer"&&Array.isArray(t.data))return PL(t.data)}function _L(t){if(t>=OE)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+OE.toString(16)+" bytes");return t|0}function Dge(t){return+t!=t&&(t=0),at.alloc(+t)}at.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==at.prototype};at.compare=function(e,r){if(Du(e,Uint8Array)&&(e=at.from(e,e.offset,e.byteLength)),Du(r,Uint8Array)&&(r=at.from(r,r.offset,r.byteLength)),!at.isBuffer(e)||!at.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var o=e.length,i=r.length,s=0,a=Math.min(o,i);s<a;++s)if(e[s]!==r[s]){o=e[s],i=r[s];break}return o<i?-1:i<o?1:0};at.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};at.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return at.alloc(0);var o;if(r===void 0)for(r=0,o=0;o<e.length;++o)r+=e[o].length;var i=at.allocUnsafe(r),s=0;for(o=0;o<e.length;++o){var a=e[o];if(Du(a,Uint8Array))s+a.length>i.length?at.from(a).copy(i,s):Uint8Array.prototype.set.call(i,a,s);else if(at.isBuffer(a))a.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return i};function hj(t,e){if(at.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Du(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&r===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return AL(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Sj(t).length;default:if(i)return o?-1:AL(t).length;e=(""+e).toLowerCase(),i=!0}}at.byteLength=hj;function kge(t,e,r){var o=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Bge(this,e,r);case"utf8":case"utf-8":return gj(this,e,r);case"ascii":return Mge(this,e,r);case"latin1":case"binary":return Nge(this,e,r);case"base64":return Rge(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lge(this,e,r);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}at.prototype._isBuffer=!0;function Cv(t,e,r){var o=t[e];t[e]=t[r],t[r]=o}at.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Cv(this,r,r+1);return this};at.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Cv(this,r,r+3),Cv(this,r+1,r+2);return this};at.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Cv(this,r,r+7),Cv(this,r+1,r+6),Cv(this,r+2,r+5),Cv(this,r+3,r+4);return this};at.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?gj(this,0,e):kge.apply(this,arguments)};at.prototype.toLocaleString=at.prototype.toString;at.prototype.equals=function(e){if(!at.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:at.compare(this,e)===0};at.prototype.inspect=function(){var e="",r=w0.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};dj&&(at.prototype[dj]=at.prototype.inspect);at.prototype.compare=function(e,r,o,i,s){if(Du(e,Uint8Array)&&(e=at.from(e,e.offset,e.byteLength)),!at.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),o===void 0&&(o=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||o>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=o)return 0;if(i>=s)return-1;if(r>=o)return 1;if(r>>>=0,o>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,l=o-r,c=Math.min(a,l),d=this.slice(i,s),u=e.slice(r,o),p=0;p<c;++p)if(d[p]!==u[p]){a=d[p],l=u[p];break}return a<l?-1:l<a?1:0};function fj(t,e,r,o,i){if(t.length===0)return-1;if(typeof r=="string"?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,IL(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=at.from(e,o)),at.isBuffer(e))return e.length===0?-1:mj(t,e,r,o,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):mj(t,[e],r,o,i);throw new TypeError("val must be string, number or Buffer")}function mj(t,e,r,o,i){var s=1,a=t.length,l=e.length;if(o!==void 0&&(o=String(o).toLowerCase(),o==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(f,m){return s===1?f[m]:f.readUInt16BE(m*s)}var d;if(i){var u=-1;for(d=r;d<a;d++)if(c(t,d)===c(e,u===-1?0:d-u)){if(u===-1&&(u=d),d-u+1===l)return u*s}else u!==-1&&(d-=d-u),u=-1}else for(r+l>a&&(r=a-l),d=r;d>=0;d--){for(var p=!0,h=0;h<l;h++)if(c(t,d+h)!==c(e,h)){p=!1;break}if(p)return d}return-1}at.prototype.includes=function(e,r,o){return this.indexOf(e,r,o)!==-1};at.prototype.indexOf=function(e,r,o){return fj(this,e,r,o,!0)};at.prototype.lastIndexOf=function(e,r,o){return fj(this,e,r,o,!1)};function Pge(t,e,r,o){r=Number(r)||0;var i=t.length-r;o?(o=Number(o),o>i&&(o=i)):o=i;var s=e.length;o>s/2&&(o=s/2);for(var a=0;a<o;++a){var l=parseInt(e.substr(a*2,2),16);if(IL(l))return a;t[r+a]=l}return a}function Ege(t,e,r,o){return zE(AL(e,t.length-r),t,r,o)}function _ge(t,e,r,o){return zE(Uge(e),t,r,o)}function Age(t,e,r,o){return zE(Sj(e),t,r,o)}function Ige(t,e,r,o){return zE(Hge(e,t.length-r),t,r,o)}at.prototype.write=function(e,r,o,i){if(r===void 0)i="utf8",o=this.length,r=0;else if(o===void 0&&typeof r=="string")i=r,o=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(o)?(o=o>>>0,i===void 0&&(i="utf8")):(i=o,o=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((o===void 0||o>s)&&(o=s),e.length>0&&(o<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Pge(this,e,r,o);case"utf8":case"utf-8":return Ege(this,e,r,o);case"ascii":case"latin1":case"binary":return _ge(this,e,r,o);case"base64":return Age(this,e,r,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ige(this,e,r,o);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};at.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Rge(t,e,r){return e===0&&r===t.length?DL.fromByteArray(t):DL.fromByteArray(t.slice(e,r))}function gj(t,e,r){r=Math.min(t.length,r);for(var o=[],i=e;i<r;){var s=t[i],a=null,l=s>239?4:s>223?3:s>191?2:1;if(i+l<=r){var c,d,u,p;switch(l){case 1:s<128&&(a=s);break;case 2:c=t[i+1],(c&192)==128&&(p=(s&31)<<6|c&63,p>127&&(a=p));break;case 3:c=t[i+1],d=t[i+2],(c&192)==128&&(d&192)==128&&(p=(s&15)<<12|(c&63)<<6|d&63,p>2047&&(p<55296||p>57343)&&(a=p));break;case 4:c=t[i+1],d=t[i+2],u=t[i+3],(c&192)==128&&(d&192)==128&&(u&192)==128&&(p=(s&15)<<18|(c&63)<<12|(d&63)<<6|u&63,p>65535&&p<1114112&&(a=p))}}a===null?(a=65533,l=1):a>65535&&(a-=65536,o.push(a>>>10&1023|55296),a=56320|a&1023),o.push(a),i+=l}return Fge(o)}var vj=4096;function Fge(t){var e=t.length;if(e<=vj)return String.fromCharCode.apply(String,t);for(var r="",o=0;o<e;)r+=String.fromCharCode.apply(String,t.slice(o,o+=vj));return r}function Mge(t,e,r){var o="";r=Math.min(t.length,r);for(var i=e;i<r;++i)o+=String.fromCharCode(t[i]&127);return o}function Nge(t,e,r){var o="";r=Math.min(t.length,r);for(var i=e;i<r;++i)o+=String.fromCharCode(t[i]);return o}function Bge(t,e,r){var o=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>o)&&(r=o);for(var i="",s=e;s<r;++s)i+=Gge[t[s]];return i}function Lge(t,e,r){for(var o=t.slice(e,r),i="",s=0;s<o.length-1;s+=2)i+=String.fromCharCode(o[s]+o[s+1]*256);return i}at.prototype.slice=function(e,r){var o=this.length;e=~~e,r=r===void 0?o:~~r,e<0?(e+=o,e<0&&(e=0)):e>o&&(e=o),r<0?(r+=o,r<0&&(r=0)):r>o&&(r=o),r<e&&(r=e);var i=this.subarray(e,r);return Object.setPrototypeOf(i,at.prototype),i};function Fs(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}at.prototype.readUintLE=at.prototype.readUIntLE=function(e,r,o){e=e>>>0,r=r>>>0,o||Fs(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return i};at.prototype.readUintBE=at.prototype.readUIntBE=function(e,r,o){e=e>>>0,r=r>>>0,o||Fs(e,r,this.length);for(var i=this[e+--r],s=1;r>0&&(s*=256);)i+=this[e+--r]*s;return i};at.prototype.readUint8=at.prototype.readUInt8=function(e,r){return e=e>>>0,r||Fs(e,1,this.length),this[e]};at.prototype.readUint16LE=at.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Fs(e,2,this.length),this[e]|this[e+1]<<8};at.prototype.readUint16BE=at.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Fs(e,2,this.length),this[e]<<8|this[e+1]};at.prototype.readUint32LE=at.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Fs(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};at.prototype.readUint32BE=at.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Fs(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};at.prototype.readIntLE=function(e,r,o){e=e>>>0,r=r>>>0,o||Fs(e,r,this.length);for(var i=this[e],s=1,a=0;++a<r&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};at.prototype.readIntBE=function(e,r,o){e=e>>>0,r=r>>>0,o||Fs(e,r,this.length);for(var i=r,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};at.prototype.readInt8=function(e,r){return e=e>>>0,r||Fs(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};at.prototype.readInt16LE=function(e,r){e=e>>>0,r||Fs(e,2,this.length);var o=this[e]|this[e+1]<<8;return o&32768?o|4294901760:o};at.prototype.readInt16BE=function(e,r){e=e>>>0,r||Fs(e,2,this.length);var o=this[e+1]|this[e]<<8;return o&32768?o|4294901760:o};at.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Fs(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};at.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Fs(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};at.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Fs(e,4,this.length),x0.read(this,e,!0,23,4)};at.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Fs(e,4,this.length),x0.read(this,e,!1,23,4)};at.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Fs(e,8,this.length),x0.read(this,e,!0,52,8)};at.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Fs(e,8,this.length),x0.read(this,e,!1,52,8)};function cl(t,e,r,o,i,s){if(!at.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+o>t.length)throw new RangeError("Index out of range")}at.prototype.writeUintLE=at.prototype.writeUIntLE=function(e,r,o,i){if(e=+e,r=r>>>0,o=o>>>0,!i){var s=Math.pow(2,8*o)-1;cl(this,e,r,o,s,0)}var a=1,l=0;for(this[r]=e&255;++l<o&&(a*=256);)this[r+l]=e/a&255;return r+o};at.prototype.writeUintBE=at.prototype.writeUIntBE=function(e,r,o,i){if(e=+e,r=r>>>0,o=o>>>0,!i){var s=Math.pow(2,8*o)-1;cl(this,e,r,o,s,0)}var a=o-1,l=1;for(this[r+a]=e&255;--a>=0&&(l*=256);)this[r+a]=e/l&255;return r+o};at.prototype.writeUint8=at.prototype.writeUInt8=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,1,255,0),this[r]=e&255,r+1};at.prototype.writeUint16LE=at.prototype.writeUInt16LE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};at.prototype.writeUint16BE=at.prototype.writeUInt16BE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};at.prototype.writeUint32LE=at.prototype.writeUInt32LE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};at.prototype.writeUint32BE=at.prototype.writeUInt32BE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};at.prototype.writeIntLE=function(e,r,o,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*o-1);cl(this,e,r,o,s-1,-s)}var a=0,l=1,c=0;for(this[r]=e&255;++a<o&&(l*=256);)e<0&&c===0&&this[r+a-1]!==0&&(c=1),this[r+a]=(e/l>>0)-c&255;return r+o};at.prototype.writeIntBE=function(e,r,o,i){if(e=+e,r=r>>>0,!i){var s=Math.pow(2,8*o-1);cl(this,e,r,o,s-1,-s)}var a=o-1,l=1,c=0;for(this[r+a]=e&255;--a>=0&&(l*=256);)e<0&&c===0&&this[r+a+1]!==0&&(c=1),this[r+a]=(e/l>>0)-c&255;return r+o};at.prototype.writeInt8=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};at.prototype.writeInt16LE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};at.prototype.writeInt16BE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};at.prototype.writeInt32LE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};at.prototype.writeInt32BE=function(e,r,o){return e=+e,r=r>>>0,o||cl(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function bj(t,e,r,o,i,s){if(r+o>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function yj(t,e,r,o,i){return e=+e,r=r>>>0,i||bj(t,e,r,4,34028234663852886e22,-34028234663852886e22),x0.write(t,e,r,o,23,4),r+4}at.prototype.writeFloatLE=function(e,r,o){return yj(this,e,r,!0,o)};at.prototype.writeFloatBE=function(e,r,o){return yj(this,e,r,!1,o)};function Cj(t,e,r,o,i){return e=+e,r=r>>>0,i||bj(t,e,r,8,17976931348623157e292,-17976931348623157e292),x0.write(t,e,r,o,52,8),r+8}at.prototype.writeDoubleLE=function(e,r,o){return Cj(this,e,r,!0,o)};at.prototype.writeDoubleBE=function(e,r,o){return Cj(this,e,r,!1,o)};at.prototype.copy=function(e,r,o,i){if(!at.isBuffer(e))throw new TypeError("argument should be a Buffer");if(o||(o=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<o&&(i=o),i===o||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-o&&(i=e.length-r+o);var s=i-o;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,o,i):Uint8Array.prototype.set.call(e,this.subarray(o,i),r),s};at.prototype.fill=function(e,r,o,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,o=this.length):typeof o=="string"&&(i=o,o=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!at.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<o)throw new RangeError("Out of range index");if(o<=r)return this;r=r>>>0,o=o===void 0?this.length:o>>>0,e||(e=0);var a;if(typeof e=="number")for(a=r;a<o;++a)this[a]=e;else{var l=at.isBuffer(e)?e:at.from(e,i),c=l.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<o-r;++a)this[a+r]=l[a%c]}return this};var Oge=/[^+/0-9A-Za-z-_]/g;function zge(t){if(t=t.split("=")[0],t=t.trim().replace(Oge,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function AL(t,e){e=e||1/0;for(var r,o=t.length,i=null,s=[],a=0;a<o;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===o){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Uge(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Hge(t,e){for(var r,o,i,s=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),o=r>>8,i=r%256,s.push(i),s.push(o);return s}function Sj(t){return DL.toByteArray(zge(t))}function zE(t,e,r,o){for(var i=0;i<o&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Du(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function IL(t){return t!==t}var Gge=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var o=r*16,i=0;i<16;++i)e[o+i]=t[r]+t[i];return e}()});var Tj=st((M4e,wj)=>{wj.exports=function(t,e,r){e=e||0;for(var o=1;o<=8&&!(t[e]>=Math.pow(2,8-o));o++);if(o>8)throw new Error("Unrepresentable length: "+o+" "+t.toString("hex",e,e+o));if(e+o>t.length)return null;var i,s=t[e]&(1<<8-o)-1;for(i=1;i<o;i++){if(i===7&&s>=Math.pow(2,53-8)&&t[e+7]>0)return{length:o,value:-1};s*=Math.pow(2,8),s+=t[e+i]}return r&&(s-=Math.pow(2,o*7-1)-1),{length:o,value:s}}});var Pj=st((N4e,kj)=>{var Dj=Tj();function Sv(t){this.buffer=t,this.offset=0}Sv.prototype.nextInt16BE=function(){var t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t};Sv.prototype.nextUInt8=function(){var t=this.buffer.readUInt8(this.offset);return this.offset+=1,t};Sv.prototype.nextUIntV=function(){var t=Dj(this.buffer,this.offset);return this.offset+=t.length,t.value};Sv.prototype.nextIntV=function(){var t=Dj(this.buffer,this.offset,!0);return this.offset+=t.length,t.value};Sv.prototype.nextBuffer=function(t){var e=t?this.buffer.slice(this.offset,this.offset+t):this.buffer.slice(this.offset);return this.offset+=t||this.length,e};Object.defineProperty(Sv.prototype,"length",{get:function(){return this.buffer.length-this.offset}});kj.exports=Sv});var _j=st((B4e,Ej)=>{var Vge=Pj(),$ge=1,Wge=3,jge=2;Ej.exports=function(t){var e={},r=new Vge(t);e.trackNumber=r.nextUIntV(),e.timecode=r.nextInt16BE();var o=r.nextUInt8();e.invisible=!!(o&8),e.keyframe=!!(o&128),e.discardable=!!(o&1);var i=(o&6)>>1;return e.frames=Kge(r,i),e};function Kge(t,e){if(!e)return[t.nextBuffer()];var r,o,i=[],s=t.nextUInt8()+1;if(e===jge){if(t.length%s!=0)throw new Error("Fixed-Size Lacing Error");for(o=t.length/s,r=0;r<s;r++)i.push(t.nextBuffer(o));return i}var a=[];if(e===$ge)for(r=0;r<s-1;r++){var l;o=0;do l=t.nextUInt8(),o+=l;while(l===255);a.push(o)}else if(e===Wge)for(o=t.nextUIntV(),a.push(o),r=1;r<s-1;r++)o+=t.nextIntV(),a.push(o);for(r=0;r<s-1;r++)i.push(t.nextBuffer(a[r]));return i.push(t.nextBuffer()),i}});var Oj=st((U4e,Lj)=>{function Ms(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}Lj.exports=Ms;Ms.EventEmitter=Ms;Ms.prototype._events=void 0;Ms.prototype._maxListeners=void 0;Ms.defaultMaxListeners=10;Ms.prototype.setMaxListeners=function(t){if(!Zge(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this};Ms.prototype.emit=function(t){var e,r,o,i,s,a;if(this._events||(this._events={}),t==="error"&&(!this._events.error||Hw(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r=this._events[t],Bj(r))return!1;if(Zp(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(Hw(r))for(i=Array.prototype.slice.call(arguments,1),a=r.slice(),o=a.length,s=0;s<o;s++)a[s].apply(this,i);return!0};Ms.prototype.addListener=function(t,e){var r;if(!Zp(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Zp(e.listener)?e.listener:e),this._events[t]?Hw(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Hw(this._events[t])&&!this._events[t].warned&&(Bj(this._maxListeners)?r=Ms.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this};Ms.prototype.on=Ms.prototype.addListener;Ms.prototype.once=function(t,e){if(!Zp(e))throw TypeError("listener must be a function");var r=!1;function o(){this.removeListener(t,o),r||(r=!0,e.apply(this,arguments))}return o.listener=e,this.on(t,o),this};Ms.prototype.removeListener=function(t,e){var r,o,i,s;if(!Zp(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],i=r.length,o=-1,r===e||Zp(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Hw(r)){for(s=i;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){o=s;break}if(o<0)return this;r.length===1?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this};Ms.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],Zp(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this};Ms.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:Zp(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e};Ms.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(Zp(e))return 1;if(e)return e.length}return 0};Ms.listenerCount=function(t,e){return t.listenerCount(e)};function Zp(t){return typeof t=="function"}function Zge(t){return typeof t=="number"}function Hw(t){return typeof t=="object"&&t!==null}function Bj(t){return t===void 0}});var OL=st((UE,Gw)=>{(function(){"use strict";var t={function:!0,object:!0},e=t[typeof window]&&window||this,r=e,o=t[typeof UE]&&UE,i=t[typeof Gw]&&Gw&&!Gw.nodeType&&Gw,s=o&&i&&typeof globalThis=="object"&&globalThis;s&&(s.global===s||s.window===s||s.self===s)&&(e=s);var a=Math.pow(2,53)-1,l=/\bOpera/,c=this,d=Object.prototype,u=d.hasOwnProperty,p=d.toString;function h(T){return T=String(T),T.charAt(0).toUpperCase()+T.slice(1)}function f(T,A,E){var F={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return A&&E&&/^Win/i.test(T)&&!/^Windows Phone /i.test(T)&&(F=F[/[\d.]+$/.exec(T)])&&(T="Windows "+F),T=String(T),A&&E&&(T=T.replace(RegExp(A,"i"),E)),T=g(T.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),T}function m(T,A){var E=-1,F=T?T.length:0;if(typeof F=="number"&&F>-1&&F<=a)for(;++E<F;)A(T[E],E,T);else v(T,A)}function g(T){return T=x(T),/^(?:webOS|i(?:OS|P))/.test(T)?T:h(T)}function v(T,A){for(var E in T)u.call(T,E)&&A(T[E],E,T)}function y(T){return T==null?h(T):p.call(T).slice(8,-1)}function S(T,A){var E=T!=null?typeof T[A]:"number";return!/^(?:boolean|number|string|undefined)$/.test(E)&&(E=="object"?!!T[A]:!0)}function C(T){return String(T).replace(/([ -])(?!$)/g,"$1?")}function b(T,A){var E=null;return m(T,function(F,z){E=A(E,F,z,T)}),E}function x(T){return String(T).replace(/^ +| +$/g,"")}function w(T){var A=e,E=T&&typeof T=="object"&&y(T)!="String";E&&(A=T,T=null);var F=A.navigator||{},z=F.userAgent||"";T||(T=z);var L=E||c==r,R=E?!!F.likeChrome:/\bChrome\b/.test(T)&&!/internal|\n/i.test(p.toString()),N="Object",V=E?N:"ScriptBridgingProxyObject",W=E?N:"Environment",me=E&&A.java?"JavaPackage":y(A.java),ie=E?N:"RuntimeObject",Z=/\bJava/.test(me)&&A.java,P=Z&&y(A.environment)==W,_=Z?"a":"\u03B1",I=Z?"b":"\u03B2",U=A.document||{},M=A.operamini||A.opera,$=l.test($=E&&M?M["[[Class]]"]:y(M))?$:M=null,H,Y=T,ae=[],le=null,xe=T==z,Se=xe&&M&&typeof M.version=="function"&&M.version(),je,ze=vt([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Le=Kt(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),dt=nr([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),mt=$t({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),ot=_t(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function vt(Wt){return b(Wt,function(Et,zt){return Et||RegExp("\\b"+(zt.pattern||C(zt))+"\\b","i").exec(T)&&(zt.label||zt)})}function $t(Wt){return b(Wt,function(Et,zt,Ar){return Et||(zt[dt]||zt[/^[a-z]+(?: +[a-z]+\b)*/i.exec(dt)]||RegExp("\\b"+C(Ar)+"(?:\\b|\\w*\\d)","i").exec(T))&&Ar})}function Kt(Wt){return b(Wt,function(Et,zt){return Et||RegExp("\\b"+(zt.pattern||C(zt))+"\\b","i").exec(T)&&(zt.label||zt)})}function _t(Wt){return b(Wt,function(Et,zt){var Ar=zt.pattern||C(zt);return!Et&&(Et=RegExp("\\b"+Ar+"(?:/[\\d.]+|[ \\w.]*)","i").exec(T))&&(Et=f(Et,Ar,zt.label||zt)),Et})}function nr(Wt){return b(Wt,function(Et,zt){var Ar=zt.pattern||C(zt);return!Et&&(Et=RegExp("\\b"+Ar+" *\\d+[.\\w_]*","i").exec(T)||RegExp("\\b"+Ar+" *\\w+-[\\w]*","i").exec(T)||RegExp("\\b"+Ar+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(T))&&((Et=String(zt.label&&!RegExp(Ar,"i").test(zt.label)?zt.label:Et).split("/"))[1]&&!/[\d.]+/.test(Et[0])&&(Et[0]+=" "+Et[1]),zt=zt.label||zt,Et=g(Et[0].replace(RegExp(Ar,"i"),zt).replace(RegExp("; *(?:"+zt+"[_-])?","i")," ").replace(RegExp("("+zt+")[-_.]?(\\w)","i"),"$1 $2"))),Et})}function vn(Wt){return b(Wt,function(Et,zt){return Et||(RegExp(zt+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(T)||0)[1]||null})}function Cr(){return this.description||""}if(ze&&(ze=[ze]),mt&&!dt&&(dt=nr([mt])),(H=/\bGoogle TV\b/.exec(dt))&&(dt=H[0]),/\bSimulator\b/i.test(T)&&(dt=(dt?dt+" ":"")+"Simulator"),Le=="Opera Mini"&&/\bOPiOS\b/.test(T)&&ae.push("running in Turbo/Uncompressed mode"),Le=="IE"&&/\blike iPhone OS\b/.test(T)?(H=w(T.replace(/like iPhone OS/,"")),mt=H.manufacturer,dt=H.product):/^iP/.test(dt)?(Le||(Le="Safari"),ot="iOS"+((H=/ OS ([\d_]+)/i.exec(T))?" "+H[1].replace(/_/g,"."):"")):Le=="Konqueror"&&!/buntu/i.test(ot)?ot="Kubuntu":mt&&mt!="Google"&&(/Chrome/.test(Le)&&!/\bMobile Safari\b/i.test(T)||/\bVita\b/.test(dt))||/\bAndroid\b/.test(ot)&&/^Chrome/.test(Le)&&/\bVersion\//i.test(T)?(Le="Android Browser",ot=/\bAndroid\b/.test(ot)?ot:"Android"):Le=="Silk"?(/\bMobi/i.test(T)||(ot="Android",ae.unshift("desktop mode")),/Accelerated *= *true/i.test(T)&&ae.unshift("accelerated")):Le=="PaleMoon"&&(H=/\bFirefox\/([\d.]+)\b/.exec(T))?ae.push("identifying as Firefox "+H[1]):Le=="Firefox"&&(H=/\b(Mobile|Tablet|TV)\b/i.exec(T))?(ot||(ot="Firefox OS"),dt||(dt=H[1])):!Le||(H=!/\bMinefield\b/i.test(T)&&/\b(?:Firefox|Safari)\b/.exec(Le))?(Le&&!dt&&/[\/,]|^[^(]+?\)/.test(T.slice(T.indexOf(H+"/")+8))&&(Le=null),(H=dt||mt||ot)&&(dt||mt||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ot))&&(Le=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ot)?ot:H)+" Browser")):Le=="Electron"&&(H=(/\bChrome\/([\d.]+)\b/.exec(T)||0)[1])&&ae.push("Chromium "+H),Se||(Se=vn(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",C(Le),"(?:Firefox|Minefield|NetFront)"])),(H=ze=="iCab"&&parseFloat(Se)>3&&"WebKit"||/\bOpera\b/.test(Le)&&(/\bOPR\b/.test(T)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(T)&&!/^(?:Trident|EdgeHTML)$/.test(ze)&&"WebKit"||!ze&&/\bMSIE\b/i.test(T)&&(ot=="Mac OS"?"Tasman":"Trident")||ze=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(Le)&&"NetFront")&&(ze=[H]),Le=="IE"&&(H=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(T)||0)[1])?(Le+=" Mobile",ot="Windows Phone "+(/\+$/.test(H)?H:H+".x"),ae.unshift("desktop mode")):/\bWPDesktop\b/i.test(T)?(Le="IE Mobile",ot="Windows Phone 8.x",ae.unshift("desktop mode"),Se||(Se=(/\brv:([\d.]+)/.exec(T)||0)[1])):Le!="IE"&&ze=="Trident"&&(H=/\brv:([\d.]+)/.exec(T))&&(Le&&ae.push("identifying as "+Le+(Se?" "+Se:"")),Le="IE",Se=H[1]),xe){if(S(A,"global"))if(Z&&(H=Z.lang.System,Y=H.getProperty("os.arch"),ot=ot||H.getProperty("os.name")+" "+H.getProperty("os.version")),P){try{Se=A.require("ringo/engine").version.join("."),Le="RingoJS"}catch(Wt){(H=A.system)&&H.global.system==A.system&&(Le="Narwhal",ot||(ot=H[0].os||null))}Le||(Le="Rhino")}else typeof A.process=="object"&&!A.process.browser&&(H=A.process)&&(typeof H.versions=="object"&&(typeof H.versions.electron=="string"?(ae.push("Node "+H.versions.node),Le="Electron",Se=H.versions.electron):typeof H.versions.nw=="string"&&(ae.push("Chromium "+Se,"Node "+H.versions.node),Le="NW.js",Se=H.versions.nw)),Le||(Le="Node.js",Y=H.arch,ot=H.platform,Se=/[\d.]+/.exec(H.version),Se=Se?Se[0]:null));else y(H=A.runtime)==V?(Le="Adobe AIR",ot=H.flash.system.Capabilities.os):y(H=A.phantom)==ie?(Le="PhantomJS",Se=(H=H.version||null)&&H.major+"."+H.minor+"."+H.patch):typeof U.documentMode=="number"&&(H=/\bTrident\/(\d+)/i.exec(T))?(Se=[Se,U.documentMode],(H=+H[1]+4)!=Se[1]&&(ae.push("IE "+Se[1]+" mode"),ze&&(ze[1]=""),Se[1]=H),Se=Le=="IE"?String(Se[1].toFixed(1)):Se[0]):typeof U.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(Le)&&(ae.push("masking as "+Le+" "+Se),Le="IE",Se="11.0",ze=["Trident"],ot="Windows");ot=ot&&g(ot)}if(Se&&(H=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Se)||/(?:alpha|beta)(?: ?\d)?/i.exec(T+";"+(xe&&F.appMinorVersion))||/\bMinefield\b/i.test(T)&&"a")&&(le=/b/i.test(H)?"beta":"alpha",Se=Se.replace(RegExp(H+"\\+?$"),"")+(le=="beta"?I:_)+(/\d+\+?/.exec(H)||"")),Le=="Fennec"||Le=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(ot))Le="Firefox Mobile";else if(Le=="Maxthon"&&Se)Se=Se.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(dt))dt=="Xbox 360"&&(ot=null),dt=="Xbox 360"&&/\bIEMobile\b/.test(T)&&ae.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(Le)||Le&&!dt&&!/Browser|Mobi/.test(Le))&&(ot=="Windows CE"||/Mobi/i.test(T)))Le+=" Mobile";else if(Le=="IE"&&xe)try{A.external===null&&ae.unshift("platform preview")}catch(Wt){ae.unshift("embedded")}else(/\bBlackBerry\b/.test(dt)||/\bBB10\b/.test(T))&&(H=(RegExp(dt.replace(/ +/g," *")+"/([.\\d]+)","i").exec(T)||0)[1]||Se)?(H=[H,/BB10/.test(T)],ot=(H[1]?(dt=null,mt="BlackBerry"):"Device Software")+" "+H[0],Se=null):this!=v&&dt!="Wii"&&(xe&&M||/Opera/.test(Le)&&/\b(?:MSIE|Firefox)\b/i.test(T)||Le=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(ot)||Le=="IE"&&(ot&&!/^Win/.test(ot)&&Se>5.5||/\bWindows XP\b/.test(ot)&&Se>8||Se==8&&!/\bTrident\b/.test(T)))&&!l.test(H=w.call(v,T.replace(l,"")+";"))&&H.name&&(H="ing as "+H.name+((H=H.version)?" "+H:""),l.test(Le)?(/\bIE\b/.test(H)&&ot=="Mac OS"&&(ot=null),H="identify"+H):(H="mask"+H,$?Le=g($.replace(/([a-z])([A-Z])/g,"$1 $2")):Le="Opera",/\bIE\b/.test(H)&&(ot=null),xe||(Se=null)),ze=["Presto"],ae.push(H));(H=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(T)||0)[1])&&(H=[parseFloat(H.replace(/\.(\d)$/,".0$1")),H],Le=="Safari"&&H[1].slice(-1)=="+"?(Le="WebKit Nightly",le="alpha",Se=H[1].slice(0,-1)):(Se==H[1]||Se==(H[2]=(/\bSafari\/([\d.]+\+?)/i.exec(T)||0)[1]))&&(Se=null),H[1]=(/\bChrome\/([\d.]+)/i.exec(T)||0)[1],H[0]==537.36&&H[2]==537.36&&parseFloat(H[1])>=28&&ze=="WebKit"&&(ze=["Blink"]),!xe||!R&&!H[1]?(ze&&(ze[1]="like Safari"),H=(H=H[0],H<400?1:H<500?2:H<526?3:H<533?4:H<534?"4+":H<535?5:H<537?6:H<538?7:H<601?8:"8")):(ze&&(ze[1]="like Chrome"),H=H[1]||(H=H[0],H<530?1:H<532?2:H<532.05?3:H<533?4:H<534.03?5:H<534.07?6:H<534.1?7:H<534.13?8:H<534.16?9:H<534.24?10:H<534.3?11:H<535.01?12:H<535.02?"13+":H<535.07?15:H<535.11?16:H<535.19?17:H<536.05?18:H<536.1?19:H<537.01?20:H<537.11?"21+":H<537.13?23:H<537.18?24:H<537.24?25:H<537.36?26:ze!="Blink"?"27":"28")),ze&&(ze[1]+=" "+(H+=typeof H=="number"?".x":/[.+]/.test(H)?"":"+")),Le=="Safari"&&(!Se||parseInt(Se)>45)&&(Se=H)),Le=="Opera"&&(H=/\bzbov|zvav$/.exec(ot))?(Le+=" ",ae.unshift("desktop mode"),H=="zvav"?(Le+="Mini",Se=null):Le+="Mobile",ot=ot.replace(RegExp(" *"+H+"$"),"")):Le=="Safari"&&/\bChrome\b/.exec(ze&&ze[1])&&(ae.unshift("desktop mode"),Le="Chrome Mobile",Se=null,/\bOS X\b/.test(ot)?(mt="Apple",ot="iOS 4.3+"):ot=null),Se&&Se.indexOf(H=/[\d.]+$/.exec(ot))==0&&T.indexOf("/"+H+"-")>-1&&(ot=x(ot.replace(H,""))),ze&&!/\b(?:Avant|Nook)\b/.test(Le)&&(/Browser|Lunascape|Maxthon/.test(Le)||Le!="Safari"&&/^iOS/.test(ot)&&/\bSafari\b/.test(ze[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(Le)&&ze[1])&&(H=ze[ze.length-1])&&ae.push(H),ae.length&&(ae=["("+ae.join("; ")+")"]),mt&&dt&&dt.indexOf(mt)<0&&ae.push("on "+mt),dt&&ae.push((/^on /.test(ae[ae.length-1])?"":"on ")+dt),ot&&(H=/ ([\d.+]+)$/.exec(ot),je=H&&ot.charAt(ot.length-H[0].length-1)=="/",ot={architecture:32,family:H&&!je?ot.replace(H[0],""):ot,version:H?H[1]:null,toString:function(){var Wt=this.version;return this.family+(Wt&&!je?" "+Wt:"")+(this.architecture==64?" 64-bit":"")}}),(H=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Y))&&!/\bi686\b/i.test(Y)?(ot&&(ot.architecture=64,ot.family=ot.family.replace(RegExp(" *"+H),"")),Le&&(/\bWOW64\b/i.test(T)||xe&&/\w(?:86|32)$/.test(F.cpuClass||F.platform)&&!/\bWin64; x64\b/i.test(T))&&ae.unshift("32-bit")):ot&&/^OS X/.test(ot.family)&&Le=="Chrome"&&parseFloat(Se)>=39&&(ot.architecture=64),T||(T=null);var Ot={};return Ot.description=T,Ot.layout=ze&&ze[0],Ot.manufacturer=mt,Ot.name=Le,Ot.prerelease=le,Ot.product=dt,Ot.ua=T,Ot.version=Le&&Se,Ot.os=ot||{architecture:null,family:null,version:null,toString:function(){return"null"}},Ot.parse=w,Ot.toString=Cr,Ot.version&&ae.unshift(Se),Ot.name&&ae.unshift(Le),ot&&Le&&!(ot==String(ot).split(" ")[0]&&(ot==Le.split(" ")[0]||dt))&&ae.push(dt?"("+ot+")":"on "+ot),ae.length&&(Ot.description=ae.join(" ")),Ot}var k=w();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e.platform=k,define(function(){return k})):o&&i?v(k,function(T,A){o[A]=T}):e.platform=k}).call(UE)});var Kj=st(($w,WE)=>{(function(){var t=!1,e=this,r=function(E){if(E instanceof r)return E;if(!(this instanceof r))return new r(E);this.EXIFwrapped=E};typeof $w!="undefined"?(typeof WE!="undefined"&&WE.exports&&($w=WE.exports=r),$w.EXIF=r):e.EXIF=r;var o=r.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},i=r.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},s=r.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},a=r.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},l=r.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function c(E,F,z){E.addEventListener?E.addEventListener(F,z,!1):E.attachEvent&&E.attachEvent("on"+F,z)}function d(E){return!!E.exifdata}function u(E,F){F=F||E.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",E=E.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var z=atob(E),L=z.length,R=new ArrayBuffer(L),N=new Uint8Array(R),V=0;V<L;V++)N[V]=z.charCodeAt(V);return R}function p(E,F){var z=new XMLHttpRequest;z.open("GET",E,!0),z.responseType="blob",z.onload=function(L){(this.status==200||this.status===0)&&F(this.response)},z.send()}function h(E,F){function z(V){var W=f(V);E.exifdata=W||{};var me=m(V);if(E.iptcdata=me||{},r.isXmpEnabled){var ie=k(V);E.xmpdata=ie||{}}F&&F.call(E)}if(E.src)if(/^data\:/i.test(E.src)){var L=u(E.src);z(L)}else if(/^blob\:/i.test(E.src)){var R=new FileReader;R.onload=function(V){z(V.target.result)},p(E.src,function(V){R.readAsArrayBuffer(V)})}else{var N=new XMLHttpRequest;N.onload=function(){if(this.status==200||this.status===0)z(N.response);else throw"Could not load image";N=null},N.open("GET",E.src,!0),N.responseType="arraybuffer",N.send(null)}else if(self.FileReader&&(E instanceof self.Blob||E instanceof self.File)){var R=new FileReader;R.onload=function(W){t&&console.log("Got file of length "+W.target.result.byteLength),z(W.target.result)},R.readAsArrayBuffer(E)}}function f(E){var F=new DataView(E);if(t&&console.log("Got file of length "+E.byteLength),F.getUint8(0)!=255||F.getUint8(1)!=216)return t&&console.log("Not a valid JPEG"),!1;for(var z=2,L=E.byteLength,R;z<L;){if(F.getUint8(z)!=255)return t&&console.log("Not a valid marker at offset "+z+", found: "+F.getUint8(z)),!1;if(R=F.getUint8(z+1),t&&console.log(R),R==225)return t&&console.log("Found 0xFFE1 marker"),w(F,z+4,F.getUint16(z+2)-2);z+=2+F.getUint16(z+2)}}function m(E){var F=new DataView(E);if(t&&console.log("Got file of length "+E.byteLength),F.getUint8(0)!=255||F.getUint8(1)!=216)return t&&console.log("Not a valid JPEG"),!1;for(var z=2,L=E.byteLength,R=function(me,ie){return me.getUint8(ie)===56&&me.getUint8(ie+1)===66&&me.getUint8(ie+2)===73&&me.getUint8(ie+3)===77&&me.getUint8(ie+4)===4&&me.getUint8(ie+5)===4};z<L;){if(R(F,z)){var N=F.getUint8(z+7);N%2!=0&&(N+=1),N===0&&(N=4);var V=z+8+N,W=F.getUint16(z+6+N);return v(E,V,W)}z++}}var g={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function v(E,F,z){for(var L=new DataView(E),R={},N,V,W,me,ie,Z=F;Z<F+z;)L.getUint8(Z)===28&&L.getUint8(Z+1)===2&&(me=L.getUint8(Z+2),me in g&&(W=L.getInt16(Z+3),ie=W+5,V=g[me],N=x(L,Z+5,W),R.hasOwnProperty(V)?R[V]instanceof Array?R[V].push(N):R[V]=[R[V],N]:R[V]=N)),Z++;return R}function y(E,F,z,L,R){var N=E.getUint16(z,!R),V={},W,me,ie;for(ie=0;ie<N;ie++)W=z+ie*12+2,me=L[E.getUint16(W,!R)],!me&&t&&console.log("Unknown tag: "+E.getUint16(W,!R)),V[me]=S(E,W,F,z,R);return V}function S(E,F,z,L,R){var N=E.getUint16(F+2,!R),V=E.getUint32(F+4,!R),W=E.getUint32(F+8,!R)+z,me,ie,Z,P,_,I;switch(N){case 1:case 7:if(V==1)return E.getUint8(F+8,!R);for(me=V>4?W:F+8,ie=[],P=0;P<V;P++)ie[P]=E.getUint8(me+P);return ie;case 2:return me=V>4?W:F+8,x(E,me,V-1);case 3:if(V==1)return E.getUint16(F+8,!R);for(me=V>2?W:F+8,ie=[],P=0;P<V;P++)ie[P]=E.getUint16(me+2*P,!R);return ie;case 4:if(V==1)return E.getUint32(F+8,!R);for(ie=[],P=0;P<V;P++)ie[P]=E.getUint32(W+4*P,!R);return ie;case 5:if(V==1)return _=E.getUint32(W,!R),I=E.getUint32(W+4,!R),Z=new Number(_/I),Z.numerator=_,Z.denominator=I,Z;for(ie=[],P=0;P<V;P++)_=E.getUint32(W+8*P,!R),I=E.getUint32(W+4+8*P,!R),ie[P]=new Number(_/I),ie[P].numerator=_,ie[P].denominator=I;return ie;case 9:if(V==1)return E.getInt32(F+8,!R);for(ie=[],P=0;P<V;P++)ie[P]=E.getInt32(W+4*P,!R);return ie;case 10:if(V==1)return E.getInt32(W,!R)/E.getInt32(W+4,!R);for(ie=[],P=0;P<V;P++)ie[P]=E.getInt32(W+8*P,!R)/E.getInt32(W+4+8*P,!R);return ie}}function C(E,F,z){var L=E.getUint16(F,!z);return E.getUint32(F+2+L*12,!z)}function b(E,F,z,L){var R=C(E,F+z,L);if(R){if(R>E.byteLength)return{}}else return{};var N=y(E,F,F+R,a,L);if(N.Compression)switch(N.Compression){case 6:if(N.JpegIFOffset&&N.JpegIFByteCount){var V=F+N.JpegIFOffset,W=N.JpegIFByteCount;N.blob=new Blob([new Uint8Array(E.buffer,V,W)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",N.Compression)}else N.PhotometricInterpretation==2&&console.log("Thumbnail image format is RGB, which is not implemented.");return N}function x(E,F,z){var L="";for(n=F;n<F+z;n++)L+=String.fromCharCode(E.getUint8(n));return L}function w(E,F){if(x(E,F,4)!="Exif")return t&&console.log("Not valid EXIF data! "+x(E,F,4)),!1;var z,L,R,N,V,W=F+6;if(E.getUint16(W)==18761)z=!1;else if(E.getUint16(W)==19789)z=!0;else return t&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;if(E.getUint16(W+2,!z)!=42)return t&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var me=E.getUint32(W+4,!z);if(me<8)return t&&console.log("Not valid TIFF data! (First offset less than 8)",E.getUint32(W+4,!z)),!1;if(L=y(E,W,W+me,i,z),L.ExifIFDPointer){N=y(E,W,W+L.ExifIFDPointer,o,z);for(R in N){switch(R){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":N[R]=l[R][N[R]];break;case"ExifVersion":case"FlashpixVersion":N[R]=String.fromCharCode(N[R][0],N[R][1],N[R][2],N[R][3]);break;case"ComponentsConfiguration":N[R]=l.Components[N[R][0]]+l.Components[N[R][1]]+l.Components[N[R][2]]+l.Components[N[R][3]];break}L[R]=N[R]}}if(L.GPSInfoIFDPointer){V=y(E,W,W+L.GPSInfoIFDPointer,s,z);for(R in V){switch(R){case"GPSVersionID":V[R]=V[R][0]+"."+V[R][1]+"."+V[R][2]+"."+V[R][3];break}L[R]=V[R]}}return L.thumbnail=b(E,W,me,z),L}function k(E){if("DOMParser"in self){var F=new DataView(E);if(t&&console.log("Got file of length "+E.byteLength),F.getUint8(0)!=255||F.getUint8(1)!=216)return t&&console.log("Not a valid JPEG"),!1;for(var z=2,L=E.byteLength,R=new DOMParser;z<L-4;)if(x(F,z,4)=="http"){var N=z-1,V=F.getUint16(z-2)-1,W=x(F,N,V),me=W.indexOf("xmpmeta>")+8;W=W.substring(W.indexOf("<x:xmpmeta"),me);var ie=W.indexOf("x:xmpmeta")+10;W=W.slice(0,ie)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+W.slice(ie);var Z=R.parseFromString(W,"text/xml");return A(Z)}else z++}}function T(E){var F={};if(E.nodeType==1){if(E.attributes.length>0){F["@attributes"]={};for(var z=0;z<E.attributes.length;z++){var L=E.attributes.item(z);F["@attributes"][L.nodeName]=L.nodeValue}}}else if(E.nodeType==3)return E.nodeValue;if(E.hasChildNodes())for(var R=0;R<E.childNodes.length;R++){var N=E.childNodes.item(R),V=N.nodeName;if(F[V]==null)F[V]=T(N);else{if(F[V].push==null){var W=F[V];F[V]=[],F[V].push(W)}F[V].push(T(N))}}return F}function A(E){try{var F={};if(E.children.length>0)for(var z=0;z<E.children.length;z++){var L=E.children.item(z),R=L.attributes;for(var N in R){var V=R[N],W=V.nodeName,me=V.nodeValue;W!==void 0&&(F[W]=me)}var ie=L.nodeName;if(typeof F[ie]=="undefined")F[ie]=T(L);else{if(typeof F[ie].push=="undefined"){var Z=F[ie];F[ie]=[],F[ie].push(Z)}F[ie].push(T(L))}}else F=E.textContent;return F}catch(P){console.log(P.message)}}r.enableXmp=function(){r.isXmpEnabled=!0},r.disableXmp=function(){r.isXmpEnabled=!1},r.getData=function(E,F){return(self.Image&&E instanceof self.Image||self.HTMLImageElement&&E instanceof self.HTMLImageElement)&&!E.complete?!1:(d(E)?F&&F.call(E):h(E,F),!0)},r.getTag=function(E,F){if(!!d(E))return E.exifdata[F]},r.getIptcTag=function(E,F){if(!!d(E))return E.iptcdata[F]},r.getAllTags=function(E){if(!d(E))return{};var F,z=E.exifdata,L={};for(F in z)z.hasOwnProperty(F)&&(L[F]=z[F]);return L},r.getAllIptcTags=function(E){if(!d(E))return{};var F,z=E.iptcdata,L={};for(F in z)z.hasOwnProperty(F)&&(L[F]=z[F]);return L},r.pretty=function(E){if(!d(E))return"";var F,z=E.exifdata,L="";for(F in z)z.hasOwnProperty(F)&&(typeof z[F]=="object"?z[F]instanceof Number?L+=F+" : "+z[F]+" ["+z[F].numerator+"/"+z[F].denominator+`]\r
`:L+=F+" : ["+z[F].length+` values]\r
`:L+=F+" : "+z[F]+`\r
`);return L},r.readFromBinaryFile=function(E){return f(E)},typeof define=="function"&&define.amd&&define("exif-js",[],function(){return r})}).call($w)});var Jj=st((Ww,qE)=>{(function(t,e){"use strict";var r="0.7.24",o="",i="?",s="function",a="undefined",l="object",c="string",d="major",u="model",p="name",h="type",f="vendor",m="version",g="architecture",v="console",y="mobile",S="tablet",C="smarttv",b="wearable",x="embedded",w={extend:function(L,R){var N={};for(var V in L)R[V]&&R[V].length%2==0?N[V]=R[V].concat(L[V]):N[V]=L[V];return N},has:function(L,R){return typeof L=="string"?R.toLowerCase().indexOf(L.toLowerCase())!==-1:!1},lowerize:function(L){return L.toLowerCase()},major:function(L){return typeof L===c?L.replace(/[^\d\.]/g,"").split(".")[0]:e},trim:function(L){return L.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},k={rgx:function(L,R){for(var N=0,V,W,me,ie,Z,P;N<R.length&&!Z;){var _=R[N],I=R[N+1];for(V=W=0;V<_.length&&!Z;)if(Z=_[V++].exec(L),Z)for(me=0;me<I.length;me++)P=Z[++W],ie=I[me],typeof ie===l&&ie.length>0?ie.length==2?typeof ie[1]==s?this[ie[0]]=ie[1].call(this,P):this[ie[0]]=ie[1]:ie.length==3?typeof ie[1]===s&&!(ie[1].exec&&ie[1].test)?this[ie[0]]=P?ie[1].call(this,P,ie[2]):e:this[ie[0]]=P?P.replace(ie[1],ie[2]):e:ie.length==4&&(this[ie[0]]=P?ie[3].call(this,P.replace(ie[1],ie[2])):e):this[ie]=P||e;N+=2}},str:function(L,R){for(var N in R)if(typeof R[N]===l&&R[N].length>0){for(var V=0;V<R[N].length;V++)if(w.has(R[N][V],L))return N===i?e:N}else if(w.has(R[N],L))return N===i?e:N;return L}},T={browser:{oldsafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"}}}},A={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,m],[/(opios)[\/\s]+([\w\.]+)/i],[[p,"Opera Mini"],m],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[p,m],[/(konqueror)\/([\w\.]+)/i],[[p,"Konqueror"],m],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[p,"IE"],m],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[p,"Edge"],m],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],m],[/(Avast)\/([\w\.]+)/i],[[p,"Avast Secure Browser"],m],[/(AVG)\/([\w\.]+)/i],[[p,"AVG Secure Browser"],m],[/(puffin)\/([\w\.]+)/i],[[p,"Puffin"],m],[/(focus)\/([\w\.]+)/i],[[p,"Firefox Focus"],m],[/(opt)\/([\w\.]+)/i],[[p,"Opera Touch"],m],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[p,"UCBrowser"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(windowswechat qbcore)\/([\w\.]+)/i],[[p,"WeChat(Win) Desktop"],m],[/(micromessenger)\/([\w\.]+)/i],[[p,"WeChat"],m],[/(brave)\/([\w\.]+)/i],[[p,"Brave"],m],[/(whale)\/([\w\.]+)/i],[[p,"Whale"],m],[/(qqbrowserlite)\/([\w\.]+)/i],[p,m],[/(QQ)\/([\d\.]+)/i],[p,m],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[p,m],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[p,m],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[p,m],[/(MetaSr)[\/\s]?([\w\.]+)/i],[p],[/(LBBROWSER)/i],[p],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[m,[p,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[m,[p,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[p,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[p,m],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[m,[p,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[p,/(.+)/,"$1 WebView"],m],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[p,/(.+(?:g|us))(.+)/,"$1 $2"],m],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[m,[p,"Android Browser"]],[/(coc_coc_browser)\/([\w\.]+)/i],[[p,"Coc Coc"],m],[/(sailfishbrowser)\/([\w\.]+)/i],[[p,"Sailfish Browser"],m],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[p,m],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],m],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[p,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],m],[/(coast)\/([\w\.]+)/i],[[p,"Opera Coast"],m],[/fxios\/([\w\.-]+)/i],[m,[p,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[m,p],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[p,"GSA"],m],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[m,k.str,T.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],m],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,m]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[g,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[g,w.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[u,f,[h,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[f,"Apple"],[h,S]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[f,"Apple"],[h,C]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,u,[h,S]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[u,[f,"Amazon"],[h,S]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[u,k.str,T.device.amazon.model],[f,"Amazon"],[h,y]],[/android.+aft([\w])(\sbuild\/|\))/i],[u,[f,"Amazon"],[h,C]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,f,[h,y]],[/\((ip[honed|\s\w*]+);/i],[u,[f,"Apple"],[h,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,u,[h,y]],[/\(bb10;\s(\w+)/i],[u,[f,"BlackBerry"],[h,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[u,[f,"Asus"],[h,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[f,"Sony"],[u,"Xperia Tablet"],[h,S]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,"Sony"],[h,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[f,u,[h,v]],[/android.+;\s(shield)\sbuild/i],[u,[f,"Nvidia"],[h,v]],[/(playstation\s[34portablevi]+)/i],[u,[f,"Sony"],[h,v]],[/(sprint\s(\w+))/i],[[f,k.str,T.device.sprint.vendor],[u,k.str,T.device.sprint.model],[h,y]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[u,/_/g," "],[h,y]],[/(nexus\s9)/i],[u,[f,"HTC"],[h,S]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[u,[f,"Huawei"],[h,y]],[/android.+(bah2?-a?[lw]\d{2})/i],[u,[f,"Huawei"],[h,S]],[/(microsoft);\s(lumia[\s\w]+)/i],[f,u,[h,y]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[u,[f,"Microsoft"],[h,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,"Microsoft"],[h,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[u,[f,"Motorola"],[h,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[f,"Motorola"],[h,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,w.trim],[u,w.trim],[h,C]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,"Samsung"],[h,C]],[/\(dtv[\);].+(aquos)/i],[u,[f,"Sharp"],[h,C]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|SM-P587|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[f,"Samsung"],u,[h,S]],[/smart-tv.+(samsung)/i],[f,[h,C],u],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[f,"Samsung"],u,[h,y]],[/sie-(\w*)/i],[u,[f,"Siemens"],[h,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[f,"Nokia"],u,[h,y]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[u,[f,"Acer"],[h,S]],[/android.+([vl]k\-?\d{3})\s+build/i],[u,[f,"LG"],[h,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],u,[h,S]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[f,"LG"],u,[h,C]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[u,[f,"LG"],[h,y]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[f,u,[h,S]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[u,[f,"Lenovo"],[h,S]],[/(lenovo)[_\s-]?([\w-]+)/i],[f,u,[h,y]],[/linux;.+((jolla));/i],[f,u,[h,y]],[/((pebble))app\/[\d\.]+\s/i],[f,u,[h,b]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,u,[h,y]],[/crkey/i],[[u,"Chromecast"],[f,"Google"],[h,C]],[/android.+;\s(glass)\s\d/i],[u,[f,"Google"],[h,b]],[/android.+;\s(pixel c)[\s)]/i],[u,[f,"Google"],[h,S]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[u,[f,"Google"],[h,y]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[u,/_/g," "],[f,"Xiaomi"],[h,y]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[u,/_/g," "],[f,"Xiaomi"],[h,S]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[u,[f,"Meizu"],[h,y]],[/(mz)-([\w-]{2,})/i],[[f,"Meizu"],u,[h,y]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[u,[f,"OnePlus"],[h,y]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[u,[f,"RCA"],[h,S]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[u,[f,"Dell"],[h,S]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[u,[f,"Verizon"],[h,S]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(\S(?:.*\S)?)\s+build/i],[[f,"Barnes & Noble"],u,[h,S]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[u,[f,"NuVision"],[h,S]],[/android.+;\s(k88)\sbuild/i],[u,[f,"ZTE"],[h,S]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[u,[f,"Swiss"],[h,y]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[u,[f,"Swiss"],[h,S]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[u,[f,"Zeki"],[h,S]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[f,"Dragon Touch"],u,[h,S]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[u,[f,"Insignia"],[h,S]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[u,[f,"NextBook"],[h,S]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[f,"Voice"],u,[h,y]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[f,"LvTel"],u,[h,y]],[/android.+;\s(PH-1)\s/i],[u,[f,"Essential"],[h,y]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[u,[f,"Envizen"],[h,S]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[f,u,[h,S]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[u,[f,"MachSpeed"],[h,S]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[f,u,[h,S]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[u,[f,"Rotor"],[h,S]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[f,u,[h,S]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[u,[h,y]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[u,[h,S]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,w.lowerize],f,u],[/[\s\/\(](smart-?tv)[;\)]/i],[[h,C]],[/(android[\w\.\s\-]{0,9});.+build/i],[u,[f,"Generic"]],[/(phone)/i],[[h,y]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,m],[/rv\:([\w\.]{1,9}).+(gecko)/i],[m,p]],os:[[/(xbox);\s+xbox\s([^\);]+)/i,/microsoft\s(windows)\s(vista|xp)/i],[p,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[m,k.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[m,k.str,T.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[p,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[p,"Symbian"],m],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],m],[/crkey\/([\d\.]+)/i],[m,[p,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[p,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],m],[/(sunos)\s?([\w\.\d]*)/i],[[p,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[p,m],[/(haiku)\s(\w+)/i],[p,m],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[m,/_/g,"."],[p,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[p,m]]},E=function(L,R){if(typeof L=="object"&&(R=L,L=e),!(this instanceof E))return new E(L,R).getResult();var N=L||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:o),V=R?w.extend(A,R):A;return this.getBrowser=function(){var W={name:e,version:e};return k.rgx.call(W,N,V.browser),W.major=w.major(W.version),W},this.getCPU=function(){var W={architecture:e};return k.rgx.call(W,N,V.cpu),W},this.getDevice=function(){var W={vendor:e,model:e,type:e};return k.rgx.call(W,N,V.device),W},this.getEngine=function(){var W={name:e,version:e};return k.rgx.call(W,N,V.engine),W},this.getOS=function(){var W={name:e,version:e};return k.rgx.call(W,N,V.os),W},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return N},this.setUA=function(W){return N=W,this},this};E.VERSION=r,E.BROWSER={NAME:p,MAJOR:d,VERSION:m},E.CPU={ARCHITECTURE:g},E.DEVICE={MODEL:u,VENDOR:f,TYPE:h,CONSOLE:v,MOBILE:y,SMARTTV:C,TABLET:S,WEARABLE:b,EMBEDDED:x},E.ENGINE={NAME:p,VERSION:m},E.OS={NAME:p,VERSION:m},typeof Ww!==a?(typeof qE!==a&&qE.exports&&(Ww=qE.exports=E),Ww.UAParser=E):typeof define=="function"&&define.amd?define(function(){return E}):t&&(t.UAParser=E);var F=t&&(t.jQuery||t.Zepto);if(F&&!F.ua){var z=new E;F.ua=z.getResult(),F.ua.get=function(){return z.getUA()},F.ua.set=function(L){z.setUA(L);var R=z.getResult();for(var N in R)F.ua[N]=R[N]}}})(typeof window=="object"?window:Ww)});var L0=st((pY,x3)=>{(function(t){typeof pY=="object"&&typeof x3!="undefined"?x3.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:this).JSZip=t()})(function(){return function t(e,r,o){function i(l,c){if(!r[l]){if(!e[l]){var d=typeof Za=="function"&&Za;if(!c&&d)return d(l,!0);if(s)return s(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[l]={exports:{}};e[l][0].call(p.exports,function(h){var f=e[l][1][h];return i(f||h)},p,p.exports,t,e,r,o)}return r[l].exports}for(var s=typeof Za=="function"&&Za,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,r){(function(o){(function(i){typeof r=="object"&&e!==void 0?e.exports=i():(typeof window!="undefined"?window:o!==void 0?o:typeof self!="undefined"?self:this).JSZip=i()})(function(){return function i(s,a,l){function c(p,h){if(!a[p]){if(!s[p]){var f=typeof t=="function"&&t;if(!h&&f)return f(p,!0);if(d)return d(p,!0);var m=new Error("Cannot find module '"+p+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[p]={exports:{}};s[p][0].call(g.exports,function(v){return c(s[p][1][v]||v)},g,g.exports,i,s,a,l)}return a[p].exports}for(var d=typeof t=="function"&&t,u=0;u<l.length;u++)c(l[u]);return c}({1:[function(i,s,a){(function(l){(function(c){typeof a=="object"&&s!==void 0?s.exports=c():(typeof window!="undefined"?window:l!==void 0?l:typeof self!="undefined"?self:this).JSZip=c()})(function(){return function c(d,u,p){function h(g,v){if(!u[g]){if(!d[g]){var y=typeof i=="function"&&i;if(!v&&y)return y(g,!0);if(f)return f(g,!0);var S=new Error("Cannot find module '"+g+"'");throw S.code="MODULE_NOT_FOUND",S}var C=u[g]={exports:{}};d[g][0].call(C.exports,function(b){return h(d[g][1][b]||b)},C,C.exports,c,d,u,p)}return u[g].exports}for(var f=typeof i=="function"&&i,m=0;m<p.length;m++)h(p[m]);return h}({1:[function(c,d,u){(function(p){(function(h){typeof u=="object"&&d!==void 0?d.exports=h():(typeof window!="undefined"?window:p!==void 0?p:typeof self!="undefined"?self:this).JSZip=h()})(function(){return function h(f,m,g){function v(C,b){if(!m[C]){if(!f[C]){var x=typeof c=="function"&&c;if(!b&&x)return x(C,!0);if(y)return y(C,!0);var w=new Error("Cannot find module '"+C+"'");throw w.code="MODULE_NOT_FOUND",w}var k=m[C]={exports:{}};f[C][0].call(k.exports,function(T){return v(f[C][1][T]||T)},k,k.exports,h,f,m,g)}return m[C].exports}for(var y=typeof c=="function"&&c,S=0;S<g.length;S++)v(g[S]);return v}({1:[function(h,f,m){(function(g){(function(v){typeof m=="object"&&f!==void 0?f.exports=v():(typeof window!="undefined"?window:g!==void 0?g:typeof self!="undefined"?self:this).JSZip=v()})(function(){return function v(y,S,C){function b(k,T){if(!S[k]){if(!y[k]){var A=typeof h=="function"&&h;if(!T&&A)return A(k,!0);if(x)return x(k,!0);var E=new Error("Cannot find module '"+k+"'");throw E.code="MODULE_NOT_FOUND",E}var F=S[k]={exports:{}};y[k][0].call(F.exports,function(z){return b(y[k][1][z]||z)},F,F.exports,v,y,S,C)}return S[k].exports}for(var x=typeof h=="function"&&h,w=0;w<C.length;w++)b(C[w]);return b}({1:[function(v,y,S){(function(C){(function(b){typeof S=="object"&&y!==void 0?y.exports=b():(typeof window!="undefined"?window:C!==void 0?C:typeof self!="undefined"?self:this).JSZip=b()})(function(){return function b(x,w,k){function T(F,z){if(!w[F]){if(!x[F]){var L=typeof v=="function"&&v;if(!z&&L)return L(F,!0);if(A)return A(F,!0);var R=new Error("Cannot find module '"+F+"'");throw R.code="MODULE_NOT_FOUND",R}var N=w[F]={exports:{}};x[F][0].call(N.exports,function(V){return T(x[F][1][V]||V)},N,N.exports,b,x,w,k)}return w[F].exports}for(var A=typeof v=="function"&&v,E=0;E<k.length;E++)T(k[E]);return T}({1:[function(b,x,w){(function(k){(function(T){typeof w=="object"&&x!==void 0?x.exports=T():(typeof window!="undefined"?window:k!==void 0?k:typeof self!="undefined"?self:this).JSZip=T()})(function(){return function T(A,E,F){function z(N,V){if(!E[N]){if(!A[N]){var W=typeof b=="function"&&b;if(!V&&W)return W(N,!0);if(L)return L(N,!0);var me=new Error("Cannot find module '"+N+"'");throw me.code="MODULE_NOT_FOUND",me}var ie=E[N]={exports:{}};A[N][0].call(ie.exports,function(Z){return z(A[N][1][Z]||Z)},ie,ie.exports,T,A,E,F)}return E[N].exports}for(var L=typeof b=="function"&&b,R=0;R<F.length;R++)z(F[R]);return z}({1:[function(T,A,E){(function(F){(function(z){typeof E=="object"&&A!==void 0?A.exports=z():(typeof window!="undefined"?window:F!==void 0?F:typeof self!="undefined"?self:this).JSZip=z()})(function(){return function z(L,R,N){function V(ie,Z){if(!R[ie]){if(!L[ie]){var P=typeof T=="function"&&T;if(!Z&&P)return P(ie,!0);if(W)return W(ie,!0);var _=new Error("Cannot find module '"+ie+"'");throw _.code="MODULE_NOT_FOUND",_}var I=R[ie]={exports:{}};L[ie][0].call(I.exports,function(U){return V(L[ie][1][U]||U)},I,I.exports,z,L,R,N)}return R[ie].exports}for(var W=typeof T=="function"&&T,me=0;me<N.length;me++)V(N[me]);return V}({1:[function(z,L,R){(function(N){(function(V){typeof R=="object"&&L!==void 0?L.exports=V():(typeof window!="undefined"?window:N!==void 0?N:typeof self!="undefined"?self:this).JSZip=V()})(function(){return function V(W,me,ie){function Z(I,U){if(!me[I]){if(!W[I]){var M=typeof z=="function"&&z;if(!U&&M)return M(I,!0);if(P)return P(I,!0);var $=new Error("Cannot find module '"+I+"'");throw $.code="MODULE_NOT_FOUND",$}var H=me[I]={exports:{}};W[I][0].call(H.exports,function(Y){return Z(W[I][1][Y]||Y)},H,H.exports,V,W,me,ie)}return me[I].exports}for(var P=typeof z=="function"&&z,_=0;_<ie.length;_++)Z(ie[_]);return Z}({1:[function(V,W,me){(function(ie){(function(Z){typeof me=="object"&&W!==void 0?W.exports=Z():(typeof window!="undefined"?window:ie!==void 0?ie:typeof self!="undefined"?self:this).JSZip=Z()})(function(){return function Z(P,_,I){function U(H,Y){if(!_[H]){if(!P[H]){var ae=typeof V=="function"&&V;if(!Y&&ae)return ae(H,!0);if(M)return M(H,!0);var le=new Error("Cannot find module '"+H+"'");throw le.code="MODULE_NOT_FOUND",le}var xe=_[H]={exports:{}};P[H][0].call(xe.exports,function(Se){return U(P[H][1][Se]||Se)},xe,xe.exports,Z,P,_,I)}return _[H].exports}for(var M=typeof V=="function"&&V,$=0;$<I.length;$++)U(I[$]);return U}({1:[function(Z,P,_){(function(I){(function(U){typeof _=="object"&&P!==void 0?P.exports=U():(typeof window!="undefined"?window:I!==void 0?I:typeof self!="undefined"?self:this).JSZip=U()})(function(){return function U(M,$,H){function Y(xe,Se){if(!$[xe]){if(!M[xe]){var je=typeof Z=="function"&&Z;if(!Se&&je)return je(xe,!0);if(ae)return ae(xe,!0);var ze=new Error("Cannot find module '"+xe+"'");throw ze.code="MODULE_NOT_FOUND",ze}var Le=$[xe]={exports:{}};M[xe][0].call(Le.exports,function(dt){return Y(M[xe][1][dt]||dt)},Le,Le.exports,U,M,$,H)}return $[xe].exports}for(var ae=typeof Z=="function"&&Z,le=0;le<H.length;le++)Y(H[le]);return Y}({1:[function(U,M,$){(function(H){(function(Y){typeof $=="object"&&M!==void 0?M.exports=Y():(typeof window!="undefined"?window:H!==void 0?H:typeof self!="undefined"?self:this).JSZip=Y()})(function(){return function Y(ae,le,xe){function Se(Le,dt){if(!le[Le]){if(!ae[Le]){var mt=typeof U=="function"&&U;if(!dt&&mt)return mt(Le,!0);if(je)return je(Le,!0);var ot=new Error("Cannot find module '"+Le+"'");throw ot.code="MODULE_NOT_FOUND",ot}var vt=le[Le]={exports:{}};ae[Le][0].call(vt.exports,function($t){return Se(ae[Le][1][$t]||$t)},vt,vt.exports,Y,ae,le,xe)}return le[Le].exports}for(var je=typeof U=="function"&&U,ze=0;ze<xe.length;ze++)Se(xe[ze]);return Se}({1:[function(Y,ae,le){(function(xe){(function(Se){typeof le=="object"&&ae!==void 0?ae.exports=Se():(typeof window!="undefined"?window:xe!==void 0?xe:typeof self!="undefined"?self:this).JSZip=Se()})(function(){return function Se(je,ze,Le){function dt(vt,$t){if(!ze[vt]){if(!je[vt]){var Kt=typeof Y=="function"&&Y;if(!$t&&Kt)return Kt(vt,!0);if(mt)return mt(vt,!0);var _t=new Error("Cannot find module '"+vt+"'");throw _t.code="MODULE_NOT_FOUND",_t}var nr=ze[vt]={exports:{}};je[vt][0].call(nr.exports,function(vn){return dt(je[vt][1][vn]||vn)},nr,nr.exports,Se,je,ze,Le)}return ze[vt].exports}for(var mt=typeof Y=="function"&&Y,ot=0;ot<Le.length;ot++)dt(Le[ot]);return dt}({1:[function(Se,je,ze){(function(Le){(function(dt){typeof ze=="object"&&je!==void 0?je.exports=dt():(typeof window!="undefined"?window:Le!==void 0?Le:typeof self!="undefined"?self:this).JSZip=dt()})(function(){return function dt(mt,ot,vt){function $t(nr,vn){if(!ot[nr]){if(!mt[nr]){var Cr=typeof Se=="function"&&Se;if(!vn&&Cr)return Cr(nr,!0);if(Kt)return Kt(nr,!0);var Ot=new Error("Cannot find module '"+nr+"'");throw Ot.code="MODULE_NOT_FOUND",Ot}var Wt=ot[nr]={exports:{}};mt[nr][0].call(Wt.exports,function(Et){return $t(mt[nr][1][Et]||Et)},Wt,Wt.exports,dt,mt,ot,vt)}return ot[nr].exports}for(var Kt=typeof Se=="function"&&Se,_t=0;_t<vt.length;_t++)$t(vt[_t]);return $t}({1:[function(dt,mt,ot){(function(vt){(function($t){typeof ot=="object"&&mt!==void 0?mt.exports=$t():(typeof window!="undefined"?window:vt!==void 0?vt:typeof self!="undefined"?self:this).JSZip=$t()})(function(){return function $t(Kt,_t,nr){function vn(Wt,Et){if(!_t[Wt]){if(!Kt[Wt]){var zt=typeof dt=="function"&&dt;if(!Et&&zt)return zt(Wt,!0);if(Cr)return Cr(Wt,!0);var Ar=new Error("Cannot find module '"+Wt+"'");throw Ar.code="MODULE_NOT_FOUND",Ar}var yn=_t[Wt]={exports:{}};Kt[Wt][0].call(yn.exports,function(we){return vn(Kt[Wt][1][we]||we)},yn,yn.exports,$t,Kt,_t,nr)}return _t[Wt].exports}for(var Cr=typeof dt=="function"&&dt,Ot=0;Ot<nr.length;Ot++)vn(nr[Ot]);return vn}({1:[function($t,Kt,_t){(function(nr){(function(vn){typeof _t=="object"&&Kt!==void 0?Kt.exports=vn():(typeof window!="undefined"?window:nr!==void 0?nr:typeof self!="undefined"?self:this).JSZip=vn()})(function(){return function vn(Cr,Ot,Wt){function Et(yn,we){if(!Ot[yn]){if(!Cr[yn]){var ve=typeof $t=="function"&&$t;if(!we&&ve)return ve(yn,!0);if(zt)return zt(yn,!0);var Me=new Error("Cannot find module '"+yn+"'");throw Me.code="MODULE_NOT_FOUND",Me}var re=Ot[yn]={exports:{}};Cr[yn][0].call(re.exports,function(fe){return Et(Cr[yn][1][fe]||fe)},re,re.exports,vn,Cr,Ot,Wt)}return Ot[yn].exports}for(var zt=typeof $t=="function"&&$t,Ar=0;Ar<Wt.length;Ar++)Et(Wt[Ar]);return Et}({1:[function(vn,Cr,Ot){(function(Wt){(function(Et){typeof Ot=="object"&&Cr!==void 0?Cr.exports=Et():(typeof window!="undefined"?window:Wt!==void 0?Wt:typeof self!="undefined"?self:this).JSZip=Et()})(function(){return function Et(zt,Ar,yn){function we(re,fe){if(!Ar[re]){if(!zt[re]){var Q=typeof vn=="function"&&vn;if(!fe&&Q)return Q(re,!0);if(ve)return ve(re,!0);var pe=new Error("Cannot find module '"+re+"'");throw pe.code="MODULE_NOT_FOUND",pe}var ke=Ar[re]={exports:{}};zt[re][0].call(ke.exports,function(Ie){return we(zt[re][1][Ie]||Ie)},ke,ke.exports,Et,zt,Ar,yn)}return Ar[re].exports}for(var ve=typeof vn=="function"&&vn,Me=0;Me<yn.length;Me++)we(yn[Me]);return we}({1:[function(Et,zt,Ar){(function(yn){(function(we){typeof Ar=="object"&&zt!==void 0?zt.exports=we():(typeof window!="undefined"?window:yn!==void 0?yn:typeof self!="undefined"?self:this).JSZip=we()})(function(){return function we(ve,Me,re){function fe(ke,Ie){if(!Me[ke]){if(!ve[ke]){var q=typeof Et=="function"&&Et;if(!Ie&&q)return q(ke,!0);if(Q)return Q(ke,!0);var K=new Error("Cannot find module '"+ke+"'");throw K.code="MODULE_NOT_FOUND",K}var G=Me[ke]={exports:{}};ve[ke][0].call(G.exports,function(se){return fe(ve[ke][1][se]||se)},G,G.exports,we,ve,Me,re)}return Me[ke].exports}for(var Q=typeof Et=="function"&&Et,pe=0;pe<re.length;pe++)fe(re[pe]);return fe}({1:[function(we,ve,Me){"use strict";var re=we("./utils"),fe=we("./support"),Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Me.encode=function(pe){for(var ke,Ie,q,K,G,se,be,J=[],ne=0,ye=pe.length,Be=ye,Ue=re.getTypeOf(pe)!=="string";ne<pe.length;)Be=ye-ne,q=Ue?(ke=pe[ne++],Ie=ne<ye?pe[ne++]:0,ne<ye?pe[ne++]:0):(ke=pe.charCodeAt(ne++),Ie=ne<ye?pe.charCodeAt(ne++):0,ne<ye?pe.charCodeAt(ne++):0),K=ke>>2,G=(3&ke)<<4|Ie>>4,se=1<Be?(15&Ie)<<2|q>>6:64,be=2<Be?63&q:64,J.push(Q.charAt(K)+Q.charAt(G)+Q.charAt(se)+Q.charAt(be));return J.join("")},Me.decode=function(pe){var ke,Ie,q,K,G,se,be=0,J=0;if(pe.substr(0,"data:".length)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var ne,ye=3*(pe=pe.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(pe.charAt(pe.length-1)===Q.charAt(64)&&ye--,pe.charAt(pe.length-2)===Q.charAt(64)&&ye--,ye%1!=0)throw new Error("Invalid base64 input, bad content length.");for(ne=fe.uint8array?new Uint8Array(0|ye):new Array(0|ye);be<pe.length;)ke=Q.indexOf(pe.charAt(be++))<<2|(K=Q.indexOf(pe.charAt(be++)))>>4,Ie=(15&K)<<4|(G=Q.indexOf(pe.charAt(be++)))>>2,q=(3&G)<<6|(se=Q.indexOf(pe.charAt(be++))),ne[J++]=ke,G!==64&&(ne[J++]=Ie),se!==64&&(ne[J++]=q);return ne}},{"./support":30,"./utils":32}],2:[function(we,ve,Me){"use strict";var re=we("./external"),fe=we("./stream/DataWorker"),Q=we("./stream/Crc32Probe"),pe=we("./stream/DataLengthProbe");function ke(Ie,q,K,G,se){this.compressedSize=Ie,this.uncompressedSize=q,this.crc32=K,this.compression=G,this.compressedContent=se}ke.prototype={getContentWorker:function(){var Ie=new fe(re.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new pe("data_length")),q=this;return Ie.on("end",function(){if(this.streamInfo.data_length!==q.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Ie},getCompressedWorker:function(){return new fe(re.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},ke.createWorkerFrom=function(Ie,q,K){return Ie.pipe(new Q).pipe(new pe("uncompressedSize")).pipe(q.compressWorker(K)).pipe(new pe("compressedSize")).withStreamInfo("compression",q)},ve.exports=ke},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(we,ve,Me){"use strict";var re=we("./stream/GenericWorker");Me.STORE={magic:"\0\0",compressWorker:function(fe){return new re("STORE compression")},uncompressWorker:function(){return new re("STORE decompression")}},Me.DEFLATE=we("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(we,ve,Me){"use strict";var re=we("./utils"),fe=function(){for(var Q,pe=[],ke=0;ke<256;ke++){Q=ke;for(var Ie=0;Ie<8;Ie++)Q=1&Q?3988292384^Q>>>1:Q>>>1;pe[ke]=Q}return pe}();ve.exports=function(Q,pe){return Q!==void 0&&Q.length?re.getTypeOf(Q)!=="string"?function(ke,Ie,q){var K=fe,G=0+q;ke^=-1;for(var se=0;se<G;se++)ke=ke>>>8^K[255&(ke^Ie[se])];return-1^ke}(0|pe,Q,Q.length):function(ke,Ie,q){var K=fe,G=0+q;ke^=-1;for(var se=0;se<G;se++)ke=ke>>>8^K[255&(ke^Ie.charCodeAt(se))];return-1^ke}(0|pe,Q,Q.length):0}},{"./utils":32}],5:[function(we,ve,Me){"use strict";Me.base64=!1,Me.binary=!1,Me.dir=!1,Me.createFolders=!0,Me.date=null,Me.compression=null,Me.compressionOptions=null,Me.comment=null,Me.unixPermissions=null,Me.dosPermissions=null},{}],6:[function(we,ve,Me){"use strict";var re;re=typeof Promise!="undefined"?Promise:we("lie"),ve.exports={Promise:re}},{lie:37}],7:[function(we,ve,Me){"use strict";var re=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",fe=we("pako"),Q=we("./utils"),pe=we("./stream/GenericWorker"),ke=re?"uint8array":"array";function Ie(q,K){pe.call(this,"FlateWorker/"+q),this._pako=null,this._pakoAction=q,this._pakoOptions=K,this.meta={}}Me.magic="\b\0",Q.inherits(Ie,pe),Ie.prototype.processChunk=function(q){this.meta=q.meta,this._pako===null&&this._createPako(),this._pako.push(Q.transformTo(ke,q.data),!1)},Ie.prototype.flush=function(){pe.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},Ie.prototype.cleanUp=function(){pe.prototype.cleanUp.call(this),this._pako=null},Ie.prototype._createPako=function(){this._pako=new fe[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var q=this;this._pako.onData=function(K){q.push({data:K,meta:q.meta})}},Me.compressWorker=function(q){return new Ie("Deflate",q)},Me.uncompressWorker=function(){return new Ie("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(we,ve,Me){"use strict";function re(G,se){var be,J="";for(be=0;be<se;be++)J+=String.fromCharCode(255&G),G>>>=8;return J}function fe(G,se,be,J,ne,ye){var Be,Ue,Oe=G.file,bt=G.compression,lt=ye!==ke.utf8encode,Lt=Q.transformTo("string",ye(Oe.name)),et=Q.transformTo("string",ke.utf8encode(Oe.name)),qt=Oe.comment,jr=Q.transformTo("string",ye(qt)),Ae=Q.transformTo("string",ke.utf8encode(qt)),tt=et.length!==Oe.name.length,j=Ae.length!==qt.length,Ye="",en="",St="",Kr=Oe.dir,Ct=Oe.date,Ir={crc32:0,compressedSize:0,uncompressedSize:0};se&&!be||(Ir.crc32=G.crc32,Ir.compressedSize=G.compressedSize,Ir.uncompressedSize=G.uncompressedSize);var Ke=0;se&&(Ke|=8),lt||!tt&&!j||(Ke|=2048);var Je,qi=0,Ce=0;Kr&&(qi|=16),ne==="UNIX"?(Ce=798,qi|=((Je=Oe.unixPermissions)||(Je=Kr?16893:33204),(65535&Je)<<16)):(Ce=20,qi|=63&(Oe.dosPermissions||0)),Be=Ct.getUTCHours(),Be<<=6,Be|=Ct.getUTCMinutes(),Be<<=5,Be|=Ct.getUTCSeconds()/2,Ue=Ct.getUTCFullYear()-1980,Ue<<=4,Ue|=Ct.getUTCMonth()+1,Ue<<=5,Ue|=Ct.getUTCDate(),tt&&(Ye+="up"+re((en=re(1,1)+re(Ie(Lt),4)+et).length,2)+en),j&&(Ye+="uc"+re((St=re(1,1)+re(Ie(jr),4)+Ae).length,2)+St);var Ne="";return Ne+=`
\0`,Ne+=re(Ke,2),Ne+=bt.magic,Ne+=re(Be,2),Ne+=re(Ue,2),Ne+=re(Ir.crc32,4),Ne+=re(Ir.compressedSize,4),Ne+=re(Ir.uncompressedSize,4),Ne+=re(Lt.length,2),Ne+=re(Ye.length,2),{fileRecord:q.LOCAL_FILE_HEADER+Ne+Lt+Ye,dirRecord:q.CENTRAL_FILE_HEADER+re(Ce,2)+Ne+re(jr.length,2)+"\0\0\0\0"+re(qi,4)+re(J,4)+Lt+Ye+jr}}var Q=we("../utils"),pe=we("../stream/GenericWorker"),ke=we("../utf8"),Ie=we("../crc32"),q=we("../signature");function K(G,se,be,J){pe.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=se,this.zipPlatform=be,this.encodeFileName=J,this.streamFiles=G,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}Q.inherits(K,pe),K.prototype.push=function(G){var se=G.meta.percent||0,be=this.entriesCount,J=this._sources.length;this.accumulate?this.contentBuffer.push(G):(this.bytesWritten+=G.data.length,pe.prototype.push.call(this,{data:G.data,meta:{currentFile:this.currentFile,percent:be?(se+100*(be-J-1))/be:100}}))},K.prototype.openedSource=function(G){this.currentSourceOffset=this.bytesWritten,this.currentFile=G.file.name;var se=this.streamFiles&&!G.file.dir;if(se){var be=fe(G,se,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:be.fileRecord,meta:{percent:0}})}else this.accumulate=!0},K.prototype.closedSource=function(G){this.accumulate=!1;var se,be=this.streamFiles&&!G.file.dir,J=fe(G,be,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(J.dirRecord),be)this.push({data:(se=G,q.DATA_DESCRIPTOR+re(se.crc32,4)+re(se.compressedSize,4)+re(se.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:J.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},K.prototype.flush=function(){for(var G=this.bytesWritten,se=0;se<this.dirRecords.length;se++)this.push({data:this.dirRecords[se],meta:{percent:100}});var be,J,ne,ye,Be,Ue,Oe=this.bytesWritten-G,bt=(be=this.dirRecords.length,J=Oe,ne=G,ye=this.zipComment,Be=this.encodeFileName,Ue=Q.transformTo("string",Be(ye)),q.CENTRAL_DIRECTORY_END+"\0\0\0\0"+re(be,2)+re(be,2)+re(J,4)+re(ne,4)+re(Ue.length,2)+Ue);this.push({data:bt,meta:{percent:100}})},K.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},K.prototype.registerPrevious=function(G){this._sources.push(G);var se=this;return G.on("data",function(be){se.processChunk(be)}),G.on("end",function(){se.closedSource(se.previous.streamInfo),se._sources.length?se.prepareNextSource():se.end()}),G.on("error",function(be){se.error(be)}),this},K.prototype.resume=function(){return!!pe.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},K.prototype.error=function(G){var se=this._sources;if(!pe.prototype.error.call(this,G))return!1;for(var be=0;be<se.length;be++)try{se[be].error(G)}catch(J){}return!0},K.prototype.lock=function(){pe.prototype.lock.call(this);for(var G=this._sources,se=0;se<G.length;se++)G[se].lock()},ve.exports=K},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(we,ve,Me){"use strict";var re=we("../compressions"),fe=we("./ZipFileWorker");Me.generateWorker=function(Q,pe,ke){var Ie=new fe(pe.streamFiles,ke,pe.platform,pe.encodeFileName),q=0;try{Q.forEach(function(K,G){q++;var se=function(ye,Be){var Ue=ye||Be,Oe=re[Ue];if(!Oe)throw new Error(Ue+" is not a valid compression method !");return Oe}(G.options.compression,pe.compression),be=G.options.compressionOptions||pe.compressionOptions||{},J=G.dir,ne=G.date;G._compressWorker(se,be).withStreamInfo("file",{name:K,dir:J,date:ne,comment:G.comment||"",unixPermissions:G.unixPermissions,dosPermissions:G.dosPermissions}).pipe(Ie)}),Ie.entriesCount=q}catch(K){Ie.error(K)}return Ie}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(we,ve,Me){"use strict";function re(){if(!(this instanceof re))return new re;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var fe=new re;for(var Q in this)typeof this[Q]!="function"&&(fe[Q]=this[Q]);return fe}}(re.prototype=we("./object")).loadAsync=we("./load"),re.support=we("./support"),re.defaults=we("./defaults"),re.version="3.5.0",re.loadAsync=function(fe,Q){return new re().loadAsync(fe,Q)},re.external=we("./external"),ve.exports=re},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(we,ve,Me){"use strict";var re=we("./utils"),fe=we("./external"),Q=we("./utf8"),pe=we("./zipEntries"),ke=we("./stream/Crc32Probe"),Ie=we("./nodejsUtils");function q(K){return new fe.Promise(function(G,se){var be=K.decompressed.getContentWorker().pipe(new ke);be.on("error",function(J){se(J)}).on("end",function(){be.streamInfo.crc32!==K.decompressed.crc32?se(new Error("Corrupted zip : CRC32 mismatch")):G()}).resume()})}ve.exports=function(K,G){var se=this;return G=re.extend(G||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:Q.utf8decode}),Ie.isNode&&Ie.isStream(K)?fe.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):re.prepareContent("the loaded zip file",K,!0,G.optimizedBinaryString,G.base64).then(function(be){var J=new pe(G);return J.load(be),J}).then(function(be){var J=[fe.Promise.resolve(be)],ne=be.files;if(G.checkCRC32)for(var ye=0;ye<ne.length;ye++)J.push(q(ne[ye]));return fe.Promise.all(J)}).then(function(be){for(var J=be.shift(),ne=J.files,ye=0;ye<ne.length;ye++){var Be=ne[ye];se.file(Be.fileNameStr,Be.decompressed,{binary:!0,optimizedBinaryString:!0,date:Be.date,dir:Be.dir,comment:Be.fileCommentStr.length?Be.fileCommentStr:null,unixPermissions:Be.unixPermissions,dosPermissions:Be.dosPermissions,createFolders:G.createFolders})}return J.zipComment.length&&(se.comment=J.zipComment),se})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(we,ve,Me){"use strict";var re=we("../utils"),fe=we("../stream/GenericWorker");function Q(pe,ke){fe.call(this,"Nodejs stream input adapter for "+pe),this._upstreamEnded=!1,this._bindStream(ke)}re.inherits(Q,fe),Q.prototype._bindStream=function(pe){var ke=this;(this._stream=pe).pause(),pe.on("data",function(Ie){ke.push({data:Ie,meta:{percent:0}})}).on("error",function(Ie){ke.isPaused?this.generatedError=Ie:ke.error(Ie)}).on("end",function(){ke.isPaused?ke._upstreamEnded=!0:ke.end()})},Q.prototype.pause=function(){return!!fe.prototype.pause.call(this)&&(this._stream.pause(),!0)},Q.prototype.resume=function(){return!!fe.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},ve.exports=Q},{"../stream/GenericWorker":28,"../utils":32}],13:[function(we,ve,Me){"use strict";var re=we("readable-stream").Readable;function fe(Q,pe,ke){re.call(this,pe),this._helper=Q;var Ie=this;Q.on("data",function(q,K){Ie.push(q)||Ie._helper.pause(),ke&&ke(K)}).on("error",function(q){Ie.emit("error",q)}).on("end",function(){Ie.push(null)})}we("../utils").inherits(fe,re),fe.prototype._read=function(){this._helper.resume()},ve.exports=fe},{"../utils":32,"readable-stream":16}],14:[function(we,ve,Me){"use strict";ve.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(re,fe){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(re,fe);if(typeof re=="number")throw new Error('The "data" argument must not be a number');return new Buffer(re,fe)},allocBuffer:function(re){if(Buffer.alloc)return Buffer.alloc(re);var fe=new Buffer(re);return fe.fill(0),fe},isBuffer:function(re){return Buffer.isBuffer(re)},isStream:function(re){return re&&typeof re.on=="function"&&typeof re.pause=="function"&&typeof re.resume=="function"}}},{}],15:[function(we,ve,Me){"use strict";function re(Ue,Oe,bt){var lt,Lt=pe.getTypeOf(Oe),et=pe.extend(bt||{},q);et.date=et.date||new Date,et.compression!==null&&(et.compression=et.compression.toUpperCase()),typeof et.unixPermissions=="string"&&(et.unixPermissions=parseInt(et.unixPermissions,8)),et.unixPermissions&&16384&et.unixPermissions&&(et.dir=!0),et.dosPermissions&&16&et.dosPermissions&&(et.dir=!0),et.dir&&(Ue=fe(Ue)),et.createFolders&&(lt=function(tt){tt.slice(-1)==="/"&&(tt=tt.substring(0,tt.length-1));var j=tt.lastIndexOf("/");return 0<j?tt.substring(0,j):""}(Ue))&&ne.call(this,lt,!0);var qt,jr=Lt==="string"&&et.binary===!1&&et.base64===!1;bt&&bt.binary!==void 0||(et.binary=!jr),(Oe instanceof K&&Oe.uncompressedSize===0||et.dir||!Oe||Oe.length===0)&&(et.base64=!1,et.binary=!0,Oe="",et.compression="STORE",Lt="string"),qt=Oe instanceof K||Oe instanceof ke?Oe:be.isNode&&be.isStream(Oe)?new J(Ue,Oe):pe.prepareContent(Ue,Oe,et.binary,et.optimizedBinaryString,et.base64);var Ae=new G(Ue,qt,et);this.files[Ue]=Ae}function fe(Ue){return Ue.slice(-1)!=="/"&&(Ue+="/"),Ue}var Q=we("./utf8"),pe=we("./utils"),ke=we("./stream/GenericWorker"),Ie=we("./stream/StreamHelper"),q=we("./defaults"),K=we("./compressedObject"),G=we("./zipObject"),se=we("./generate"),be=we("./nodejsUtils"),J=we("./nodejs/NodejsStreamInputAdapter"),ne=function(Ue,Oe){return Oe=Oe!==void 0?Oe:q.createFolders,Ue=fe(Ue),this.files[Ue]||re.call(this,Ue,null,{dir:!0,createFolders:Oe}),this.files[Ue]};function ye(Ue){return Object.prototype.toString.call(Ue)==="[object RegExp]"}var Be={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Ue){var Oe,bt,lt;for(Oe in this.files)this.files.hasOwnProperty(Oe)&&(lt=this.files[Oe],(bt=Oe.slice(this.root.length,Oe.length))&&Oe.slice(0,this.root.length)===this.root&&Ue(bt,lt))},filter:function(Ue){var Oe=[];return this.forEach(function(bt,lt){Ue(bt,lt)&&Oe.push(lt)}),Oe},file:function(Ue,Oe,bt){if(arguments.length!==1)return Ue=this.root+Ue,re.call(this,Ue,Oe,bt),this;if(ye(Ue)){var lt=Ue;return this.filter(function(et,qt){return!qt.dir&&lt.test(et)})}var Lt=this.files[this.root+Ue];return Lt&&!Lt.dir?Lt:null},folder:function(Ue){if(!Ue)return this;if(ye(Ue))return this.filter(function(Lt,et){return et.dir&&Ue.test(Lt)});var Oe=this.root+Ue,bt=ne.call(this,Oe),lt=this.clone();return lt.root=bt.name,lt},remove:function(Ue){Ue=this.root+Ue;var Oe=this.files[Ue];if(Oe||(Ue.slice(-1)!=="/"&&(Ue+="/"),Oe=this.files[Ue]),Oe&&!Oe.dir)delete this.files[Ue];else for(var bt=this.filter(function(Lt,et){return et.name.slice(0,Ue.length)===Ue}),lt=0;lt<bt.length;lt++)delete this.files[bt[lt].name];return this},generate:function(Ue){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Ue){var Oe,bt={};try{if((bt=pe.extend(Ue||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Q.utf8encode})).type=bt.type.toLowerCase(),bt.compression=bt.compression.toUpperCase(),bt.type==="binarystring"&&(bt.type="string"),!bt.type)throw new Error("No output type specified.");pe.checkSupport(bt.type),bt.platform!=="darwin"&&bt.platform!=="freebsd"&&bt.platform!=="linux"&&bt.platform!=="sunos"||(bt.platform="UNIX"),bt.platform==="win32"&&(bt.platform="DOS");var lt=bt.comment||this.comment||"";Oe=se.generateWorker(this,bt,lt)}catch(Lt){(Oe=new ke("error")).error(Lt)}return new Ie(Oe,bt.type||"string",bt.mimeType)},generateAsync:function(Ue,Oe){return this.generateInternalStream(Ue).accumulate(Oe)},generateNodeStream:function(Ue,Oe){return(Ue=Ue||{}).type||(Ue.type="nodebuffer"),this.generateInternalStream(Ue).toNodejsStream(Oe)}};ve.exports=Be},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(we,ve,Me){ve.exports=we("stream")},{stream:void 0}],17:[function(we,ve,Me){"use strict";var re=we("./DataReader");function fe(Q){re.call(this,Q);for(var pe=0;pe<this.data.length;pe++)Q[pe]=255&Q[pe]}we("../utils").inherits(fe,re),fe.prototype.byteAt=function(Q){return this.data[this.zero+Q]},fe.prototype.lastIndexOfSignature=function(Q){for(var pe=Q.charCodeAt(0),ke=Q.charCodeAt(1),Ie=Q.charCodeAt(2),q=Q.charCodeAt(3),K=this.length-4;0<=K;--K)if(this.data[K]===pe&&this.data[K+1]===ke&&this.data[K+2]===Ie&&this.data[K+3]===q)return K-this.zero;return-1},fe.prototype.readAndCheckSignature=function(Q){var pe=Q.charCodeAt(0),ke=Q.charCodeAt(1),Ie=Q.charCodeAt(2),q=Q.charCodeAt(3),K=this.readData(4);return pe===K[0]&&ke===K[1]&&Ie===K[2]&&q===K[3]},fe.prototype.readData=function(Q){if(this.checkOffset(Q),Q===0)return[];var pe=this.data.slice(this.zero+this.index,this.zero+this.index+Q);return this.index+=Q,pe},ve.exports=fe},{"../utils":32,"./DataReader":18}],18:[function(we,ve,Me){"use strict";var re=we("../utils");function fe(Q){this.data=Q,this.length=Q.length,this.index=0,this.zero=0}fe.prototype={checkOffset:function(Q){this.checkIndex(this.index+Q)},checkIndex:function(Q){if(this.length<this.zero+Q||Q<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+Q+"). Corrupted zip ?")},setIndex:function(Q){this.checkIndex(Q),this.index=Q},skip:function(Q){this.setIndex(this.index+Q)},byteAt:function(Q){},readInt:function(Q){var pe,ke=0;for(this.checkOffset(Q),pe=this.index+Q-1;pe>=this.index;pe--)ke=(ke<<8)+this.byteAt(pe);return this.index+=Q,ke},readString:function(Q){return re.transformTo("string",this.readData(Q))},readData:function(Q){},lastIndexOfSignature:function(Q){},readAndCheckSignature:function(Q){},readDate:function(){var Q=this.readInt(4);return new Date(Date.UTC(1980+(Q>>25&127),(Q>>21&15)-1,Q>>16&31,Q>>11&31,Q>>5&63,(31&Q)<<1))}},ve.exports=fe},{"../utils":32}],19:[function(we,ve,Me){"use strict";var re=we("./Uint8ArrayReader");function fe(Q){re.call(this,Q)}we("../utils").inherits(fe,re),fe.prototype.readData=function(Q){this.checkOffset(Q);var pe=this.data.slice(this.zero+this.index,this.zero+this.index+Q);return this.index+=Q,pe},ve.exports=fe},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(we,ve,Me){"use strict";var re=we("./DataReader");function fe(Q){re.call(this,Q)}we("../utils").inherits(fe,re),fe.prototype.byteAt=function(Q){return this.data.charCodeAt(this.zero+Q)},fe.prototype.lastIndexOfSignature=function(Q){return this.data.lastIndexOf(Q)-this.zero},fe.prototype.readAndCheckSignature=function(Q){return Q===this.readData(4)},fe.prototype.readData=function(Q){this.checkOffset(Q);var pe=this.data.slice(this.zero+this.index,this.zero+this.index+Q);return this.index+=Q,pe},ve.exports=fe},{"../utils":32,"./DataReader":18}],21:[function(we,ve,Me){"use strict";var re=we("./ArrayReader");function fe(Q){re.call(this,Q)}we("../utils").inherits(fe,re),fe.prototype.readData=function(Q){if(this.checkOffset(Q),Q===0)return new Uint8Array(0);var pe=this.data.subarray(this.zero+this.index,this.zero+this.index+Q);return this.index+=Q,pe},ve.exports=fe},{"../utils":32,"./ArrayReader":17}],22:[function(we,ve,Me){"use strict";var re=we("../utils"),fe=we("../support"),Q=we("./ArrayReader"),pe=we("./StringReader"),ke=we("./NodeBufferReader"),Ie=we("./Uint8ArrayReader");ve.exports=function(q){var K=re.getTypeOf(q);return re.checkSupport(K),K!=="string"||fe.uint8array?K==="nodebuffer"?new ke(q):fe.uint8array?new Ie(re.transformTo("uint8array",q)):new Q(re.transformTo("array",q)):new pe(q)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(we,ve,Me){"use strict";Me.LOCAL_FILE_HEADER="PK",Me.CENTRAL_FILE_HEADER="PK",Me.CENTRAL_DIRECTORY_END="PK",Me.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",Me.ZIP64_CENTRAL_DIRECTORY_END="PK",Me.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(we,ve,Me){"use strict";var re=we("./GenericWorker"),fe=we("../utils");function Q(pe){re.call(this,"ConvertWorker to "+pe),this.destType=pe}fe.inherits(Q,re),Q.prototype.processChunk=function(pe){this.push({data:fe.transformTo(this.destType,pe.data),meta:pe.meta})},ve.exports=Q},{"../utils":32,"./GenericWorker":28}],25:[function(we,ve,Me){"use strict";var re=we("./GenericWorker"),fe=we("../crc32");function Q(){re.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}we("../utils").inherits(Q,re),Q.prototype.processChunk=function(pe){this.streamInfo.crc32=fe(pe.data,this.streamInfo.crc32||0),this.push(pe)},ve.exports=Q},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(we,ve,Me){"use strict";var re=we("../utils"),fe=we("./GenericWorker");function Q(pe){fe.call(this,"DataLengthProbe for "+pe),this.propName=pe,this.withStreamInfo(pe,0)}re.inherits(Q,fe),Q.prototype.processChunk=function(pe){if(pe){var ke=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=ke+pe.data.length}fe.prototype.processChunk.call(this,pe)},ve.exports=Q},{"../utils":32,"./GenericWorker":28}],27:[function(we,ve,Me){"use strict";var re=we("../utils"),fe=we("./GenericWorker");function Q(pe){fe.call(this,"DataWorker");var ke=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,pe.then(function(Ie){ke.dataIsReady=!0,ke.data=Ie,ke.max=Ie&&Ie.length||0,ke.type=re.getTypeOf(Ie),ke.isPaused||ke._tickAndRepeat()},function(Ie){ke.error(Ie)})}re.inherits(Q,fe),Q.prototype.cleanUp=function(){fe.prototype.cleanUp.call(this),this.data=null},Q.prototype.resume=function(){return!!fe.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,re.delay(this._tickAndRepeat,[],this)),!0)},Q.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(re.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},Q.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var pe=null,ke=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":pe=this.data.substring(this.index,ke);break;case"uint8array":pe=this.data.subarray(this.index,ke);break;case"array":case"nodebuffer":pe=this.data.slice(this.index,ke)}return this.index=ke,this.push({data:pe,meta:{percent:this.max?this.index/this.max*100:0}})},ve.exports=Q},{"../utils":32,"./GenericWorker":28}],28:[function(we,ve,Me){"use strict";function re(fe){this.name=fe||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}re.prototype={push:function(fe){this.emit("data",fe)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(fe){this.emit("error",fe)}return!0},error:function(fe){return!this.isFinished&&(this.isPaused?this.generatedError=fe:(this.isFinished=!0,this.emit("error",fe),this.previous&&this.previous.error(fe),this.cleanUp()),!0)},on:function(fe,Q){return this._listeners[fe].push(Q),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(fe,Q){if(this._listeners[fe])for(var pe=0;pe<this._listeners[fe].length;pe++)this._listeners[fe][pe].call(this,Q)},pipe:function(fe){return fe.registerPrevious(this)},registerPrevious:function(fe){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=fe.streamInfo,this.mergeStreamInfo(),this.previous=fe;var Q=this;return fe.on("data",function(pe){Q.processChunk(pe)}),fe.on("end",function(){Q.end()}),fe.on("error",function(pe){Q.error(pe)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var fe=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),fe=!0),this.previous&&this.previous.resume(),!fe},flush:function(){},processChunk:function(fe){this.push(fe)},withStreamInfo:function(fe,Q){return this.extraStreamInfo[fe]=Q,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var fe in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(fe)&&(this.streamInfo[fe]=this.extraStreamInfo[fe])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var fe="Worker "+this.name;return this.previous?this.previous+" -> "+fe:fe}},ve.exports=re},{}],29:[function(we,ve,Me){"use strict";var re=we("../utils"),fe=we("./ConvertWorker"),Q=we("./GenericWorker"),pe=we("../base64"),ke=we("../support"),Ie=we("../external"),q=null;if(ke.nodestream)try{q=we("../nodejs/NodejsStreamOutputAdapter")}catch(G){}function K(G,se,be){var J=se;switch(se){case"blob":case"arraybuffer":J="uint8array";break;case"base64":J="string"}try{this._internalType=J,this._outputType=se,this._mimeType=be,re.checkSupport(J),this._worker=G.pipe(new fe(J)),G.lock()}catch(ne){this._worker=new Q("error"),this._worker.error(ne)}}K.prototype={accumulate:function(G){return se=this,be=G,new Ie.Promise(function(J,ne){var ye=[],Be=se._internalType,Ue=se._outputType,Oe=se._mimeType;se.on("data",function(bt,lt){ye.push(bt),be&&be(lt)}).on("error",function(bt){ye=[],ne(bt)}).on("end",function(){try{var bt=function(lt,Lt,et){switch(lt){case"blob":return re.newBlob(re.transformTo("arraybuffer",Lt),et);case"base64":return pe.encode(Lt);default:return re.transformTo(lt,Lt)}}(Ue,function(lt,Lt){var et,qt=0,jr=null,Ae=0;for(et=0;et<Lt.length;et++)Ae+=Lt[et].length;switch(lt){case"string":return Lt.join("");case"array":return Array.prototype.concat.apply([],Lt);case"uint8array":for(jr=new Uint8Array(Ae),et=0;et<Lt.length;et++)jr.set(Lt[et],qt),qt+=Lt[et].length;return jr;case"nodebuffer":return Buffer.concat(Lt);default:throw new Error("concat : unsupported type '"+lt+"'")}}(Be,ye),Oe);J(bt)}catch(lt){ne(lt)}ye=[]}).resume()});var se,be},on:function(G,se){var be=this;return G==="data"?this._worker.on(G,function(J){se.call(be,J.data,J.meta)}):this._worker.on(G,function(){re.delay(se,arguments,be)}),this},resume:function(){return re.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(G){if(re.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new q(this,{objectMode:this._outputType!=="nodebuffer"},G)}},ve.exports=K},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(we,ve,Me){"use strict";if(Me.base64=!0,Me.array=!0,Me.string=!0,Me.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",Me.nodebuffer=typeof Buffer!="undefined",Me.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")Me.blob=!1;else{var re=new ArrayBuffer(0);try{Me.blob=new Blob([re],{type:"application/zip"}).size===0}catch(Q){try{var fe=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);fe.append(re),Me.blob=fe.getBlob("application/zip").size===0}catch(pe){Me.blob=!1}}}try{Me.nodestream=!!we("readable-stream").Readable}catch(Q){Me.nodestream=!1}},{"readable-stream":16}],31:[function(we,ve,Me){"use strict";for(var re=we("./utils"),fe=we("./support"),Q=we("./nodejsUtils"),pe=we("./stream/GenericWorker"),ke=new Array(256),Ie=0;Ie<256;Ie++)ke[Ie]=252<=Ie?6:248<=Ie?5:240<=Ie?4:224<=Ie?3:192<=Ie?2:1;function q(){pe.call(this,"utf-8 decode"),this.leftOver=null}function K(){pe.call(this,"utf-8 encode")}ke[254]=ke[254]=1,Me.utf8encode=function(G){return fe.nodebuffer?Q.newBufferFrom(G,"utf-8"):function(se){var be,J,ne,ye,Be,Ue=se.length,Oe=0;for(ye=0;ye<Ue;ye++)(64512&(J=se.charCodeAt(ye)))==55296&&ye+1<Ue&&(64512&(ne=se.charCodeAt(ye+1)))==56320&&(J=65536+(J-55296<<10)+(ne-56320),ye++),Oe+=J<128?1:J<2048?2:J<65536?3:4;for(be=fe.uint8array?new Uint8Array(Oe):new Array(Oe),ye=Be=0;Be<Oe;ye++)(64512&(J=se.charCodeAt(ye)))==55296&&ye+1<Ue&&(64512&(ne=se.charCodeAt(ye+1)))==56320&&(J=65536+(J-55296<<10)+(ne-56320),ye++),J<128?be[Be++]=J:(J<2048?be[Be++]=192|J>>>6:(J<65536?be[Be++]=224|J>>>12:(be[Be++]=240|J>>>18,be[Be++]=128|J>>>12&63),be[Be++]=128|J>>>6&63),be[Be++]=128|63&J);return be}(G)},Me.utf8decode=function(G){return fe.nodebuffer?re.transformTo("nodebuffer",G).toString("utf-8"):function(se){var be,J,ne,ye,Be=se.length,Ue=new Array(2*Be);for(be=J=0;be<Be;)if((ne=se[be++])<128)Ue[J++]=ne;else if(4<(ye=ke[ne]))Ue[J++]=65533,be+=ye-1;else{for(ne&=ye===2?31:ye===3?15:7;1<ye&&be<Be;)ne=ne<<6|63&se[be++],ye--;1<ye?Ue[J++]=65533:ne<65536?Ue[J++]=ne:(ne-=65536,Ue[J++]=55296|ne>>10&1023,Ue[J++]=56320|1023&ne)}return Ue.length!==J&&(Ue.subarray?Ue=Ue.subarray(0,J):Ue.length=J),re.applyFromCharCode(Ue)}(G=re.transformTo(fe.uint8array?"uint8array":"array",G))},re.inherits(q,pe),q.prototype.processChunk=function(G){var se=re.transformTo(fe.uint8array?"uint8array":"array",G.data);if(this.leftOver&&this.leftOver.length){if(fe.uint8array){var be=se;(se=new Uint8Array(be.length+this.leftOver.length)).set(this.leftOver,0),se.set(be,this.leftOver.length)}else se=this.leftOver.concat(se);this.leftOver=null}var J=function(ye,Be){var Ue;for((Be=Be||ye.length)>ye.length&&(Be=ye.length),Ue=Be-1;0<=Ue&&(192&ye[Ue])==128;)Ue--;return Ue<0||Ue===0?Be:Ue+ke[ye[Ue]]>Be?Ue:Be}(se),ne=se;J!==se.length&&(fe.uint8array?(ne=se.subarray(0,J),this.leftOver=se.subarray(J,se.length)):(ne=se.slice(0,J),this.leftOver=se.slice(J,se.length))),this.push({data:Me.utf8decode(ne),meta:G.meta})},q.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:Me.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},Me.Utf8DecodeWorker=q,re.inherits(K,pe),K.prototype.processChunk=function(G){this.push({data:Me.utf8encode(G.data),meta:G.meta})},Me.Utf8EncodeWorker=K},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(we,ve,Me){"use strict";var re=we("./support"),fe=we("./base64"),Q=we("./nodejsUtils"),pe=we("set-immediate-shim"),ke=we("./external");function Ie(J){return J}function q(J,ne){for(var ye=0;ye<J.length;++ye)ne[ye]=255&J.charCodeAt(ye);return ne}Me.newBlob=function(J,ne){Me.checkSupport("blob");try{return new Blob([J],{type:ne})}catch(Be){try{var ye=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return ye.append(J),ye.getBlob(ne)}catch(Ue){throw new Error("Bug : can't construct the Blob.")}}};var K={stringifyByChunk:function(J,ne,ye){var Be=[],Ue=0,Oe=J.length;if(Oe<=ye)return String.fromCharCode.apply(null,J);for(;Ue<Oe;)ne==="array"||ne==="nodebuffer"?Be.push(String.fromCharCode.apply(null,J.slice(Ue,Math.min(Ue+ye,Oe)))):Be.push(String.fromCharCode.apply(null,J.subarray(Ue,Math.min(Ue+ye,Oe)))),Ue+=ye;return Be.join("")},stringifyByChar:function(J){for(var ne="",ye=0;ye<J.length;ye++)ne+=String.fromCharCode(J[ye]);return ne},applyCanBeUsed:{uint8array:function(){try{return re.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(J){return!1}}(),nodebuffer:function(){try{return re.nodebuffer&&String.fromCharCode.apply(null,Q.allocBuffer(1)).length===1}catch(J){return!1}}()}};function G(J){var ne=65536,ye=Me.getTypeOf(J),Be=!0;if(ye==="uint8array"?Be=K.applyCanBeUsed.uint8array:ye==="nodebuffer"&&(Be=K.applyCanBeUsed.nodebuffer),Be)for(;1<ne;)try{return K.stringifyByChunk(J,ye,ne)}catch(Ue){ne=Math.floor(ne/2)}return K.stringifyByChar(J)}function se(J,ne){for(var ye=0;ye<J.length;ye++)ne[ye]=J[ye];return ne}Me.applyFromCharCode=G;var be={};be.string={string:Ie,array:function(J){return q(J,new Array(J.length))},arraybuffer:function(J){return be.string.uint8array(J).buffer},uint8array:function(J){return q(J,new Uint8Array(J.length))},nodebuffer:function(J){return q(J,Q.allocBuffer(J.length))}},be.array={string:G,array:Ie,arraybuffer:function(J){return new Uint8Array(J).buffer},uint8array:function(J){return new Uint8Array(J)},nodebuffer:function(J){return Q.newBufferFrom(J)}},be.arraybuffer={string:function(J){return G(new Uint8Array(J))},array:function(J){return se(new Uint8Array(J),new Array(J.byteLength))},arraybuffer:Ie,uint8array:function(J){return new Uint8Array(J)},nodebuffer:function(J){return Q.newBufferFrom(new Uint8Array(J))}},be.uint8array={string:G,array:function(J){return se(J,new Array(J.length))},arraybuffer:function(J){return J.buffer},uint8array:Ie,nodebuffer:function(J){return Q.newBufferFrom(J)}},be.nodebuffer={string:G,array:function(J){return se(J,new Array(J.length))},arraybuffer:function(J){return be.nodebuffer.uint8array(J).buffer},uint8array:function(J){return se(J,new Uint8Array(J.length))},nodebuffer:Ie},Me.transformTo=function(J,ne){if(ne=ne||"",!J)return ne;Me.checkSupport(J);var ye=Me.getTypeOf(ne);return be[ye][J](ne)},Me.getTypeOf=function(J){return typeof J=="string"?"string":Object.prototype.toString.call(J)==="[object Array]"?"array":re.nodebuffer&&Q.isBuffer(J)?"nodebuffer":re.uint8array&&J instanceof Uint8Array?"uint8array":re.arraybuffer&&J instanceof ArrayBuffer?"arraybuffer":void 0},Me.checkSupport=function(J){if(!re[J.toLowerCase()])throw new Error(J+" is not supported by this platform")},Me.MAX_VALUE_16BITS=65535,Me.MAX_VALUE_32BITS=-1,Me.pretty=function(J){var ne,ye,Be="";for(ye=0;ye<(J||"").length;ye++)Be+="\\x"+((ne=J.charCodeAt(ye))<16?"0":"")+ne.toString(16).toUpperCase();return Be},Me.delay=function(J,ne,ye){pe(function(){J.apply(ye||null,ne||[])})},Me.inherits=function(J,ne){function ye(){}ye.prototype=ne.prototype,J.prototype=new ye},Me.extend=function(){var J,ne,ye={};for(J=0;J<arguments.length;J++)for(ne in arguments[J])arguments[J].hasOwnProperty(ne)&&ye[ne]===void 0&&(ye[ne]=arguments[J][ne]);return ye},Me.prepareContent=function(J,ne,ye,Be,Ue){return ke.Promise.resolve(ne).then(function(Oe){return re.blob&&(Oe instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Oe))!==-1)&&typeof FileReader!="undefined"?new ke.Promise(function(bt,lt){var Lt=new FileReader;Lt.onload=function(et){bt(et.target.result)},Lt.onerror=function(et){lt(et.target.error)},Lt.readAsArrayBuffer(Oe)}):Oe}).then(function(Oe){var bt,lt=Me.getTypeOf(Oe);return lt?(lt==="arraybuffer"?Oe=Me.transformTo("uint8array",Oe):lt==="string"&&(Ue?Oe=fe.decode(Oe):ye&&Be!==!0&&(Oe=q(bt=Oe,re.uint8array?new Uint8Array(bt.length):new Array(bt.length)))),Oe):ke.Promise.reject(new Error("Can't read the data of '"+J+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(we,ve,Me){"use strict";var re=we("./reader/readerFor"),fe=we("./utils"),Q=we("./signature"),pe=we("./zipEntry"),ke=(we("./utf8"),we("./support"));function Ie(q){this.files=[],this.loadOptions=q}Ie.prototype={checkSignature:function(q){if(!this.reader.readAndCheckSignature(q)){this.reader.index-=4;var K=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+fe.pretty(K)+", expected "+fe.pretty(q)+")")}},isSignature:function(q,K){var G=this.reader.index;this.reader.setIndex(q);var se=this.reader.readString(4)===K;return this.reader.setIndex(G),se},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var q=this.reader.readData(this.zipCommentLength),K=ke.uint8array?"uint8array":"array",G=fe.transformTo(K,q);this.zipComment=this.loadOptions.decodeFileName(G)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var q,K,G,se=this.zip64EndOfCentralSize-44;0<se;)q=this.reader.readInt(2),K=this.reader.readInt(4),G=this.reader.readData(K),this.zip64ExtensibleData[q]={id:q,length:K,value:G}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var q,K;for(q=0;q<this.files.length;q++)K=this.files[q],this.reader.setIndex(K.localHeaderOffset),this.checkSignature(Q.LOCAL_FILE_HEADER),K.readLocalPart(this.reader),K.handleUTF8(),K.processAttributes()},readCentralDir:function(){var q;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(Q.CENTRAL_FILE_HEADER);)(q=new pe({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(q);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var q=this.reader.lastIndexOfSignature(Q.CENTRAL_DIRECTORY_END);if(q<0)throw this.isSignature(0,Q.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(q);var K=q;if(this.checkSignature(Q.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===fe.MAX_VALUE_16BITS||this.diskWithCentralDirStart===fe.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===fe.MAX_VALUE_16BITS||this.centralDirRecords===fe.MAX_VALUE_16BITS||this.centralDirSize===fe.MAX_VALUE_32BITS||this.centralDirOffset===fe.MAX_VALUE_32BITS){if(this.zip64=!0,(q=this.reader.lastIndexOfSignature(Q.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(q),this.checkSignature(Q.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Q.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Q.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Q.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var G=this.centralDirOffset+this.centralDirSize;this.zip64&&(G+=20,G+=12+this.zip64EndOfCentralSize);var se=K-G;if(0<se)this.isSignature(K,Q.CENTRAL_FILE_HEADER)||(this.reader.zero=se);else if(se<0)throw new Error("Corrupted zip: missing "+Math.abs(se)+" bytes.")},prepareReader:function(q){this.reader=re(q)},load:function(q){this.prepareReader(q),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},ve.exports=Ie},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(we,ve,Me){"use strict";var re=we("./reader/readerFor"),fe=we("./utils"),Q=we("./compressedObject"),pe=we("./crc32"),ke=we("./utf8"),Ie=we("./compressions"),q=we("./support");function K(G,se){this.options=G,this.loadOptions=se}K.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(G){var se,be;if(G.skip(22),this.fileNameLength=G.readInt(2),be=G.readInt(2),this.fileName=G.readData(this.fileNameLength),G.skip(be),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((se=function(J){for(var ne in Ie)if(Ie.hasOwnProperty(ne)&&Ie[ne].magic===J)return Ie[ne];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+fe.pretty(this.compressionMethod)+" unknown (inner file : "+fe.transformTo("string",this.fileName)+")");this.decompressed=new Q(this.compressedSize,this.uncompressedSize,this.crc32,se,G.readData(this.compressedSize))},readCentralPart:function(G){this.versionMadeBy=G.readInt(2),G.skip(2),this.bitFlag=G.readInt(2),this.compressionMethod=G.readString(2),this.date=G.readDate(),this.crc32=G.readInt(4),this.compressedSize=G.readInt(4),this.uncompressedSize=G.readInt(4);var se=G.readInt(2);if(this.extraFieldsLength=G.readInt(2),this.fileCommentLength=G.readInt(2),this.diskNumberStart=G.readInt(2),this.internalFileAttributes=G.readInt(2),this.externalFileAttributes=G.readInt(4),this.localHeaderOffset=G.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");G.skip(se),this.readExtraFields(G),this.parseZIP64ExtraField(G),this.fileComment=G.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var G=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),G==0&&(this.dosPermissions=63&this.externalFileAttributes),G==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(G){if(this.extraFields[1]){var se=re(this.extraFields[1].value);this.uncompressedSize===fe.MAX_VALUE_32BITS&&(this.uncompressedSize=se.readInt(8)),this.compressedSize===fe.MAX_VALUE_32BITS&&(this.compressedSize=se.readInt(8)),this.localHeaderOffset===fe.MAX_VALUE_32BITS&&(this.localHeaderOffset=se.readInt(8)),this.diskNumberStart===fe.MAX_VALUE_32BITS&&(this.diskNumberStart=se.readInt(4))}},readExtraFields:function(G){var se,be,J,ne=G.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});G.index+4<ne;)se=G.readInt(2),be=G.readInt(2),J=G.readData(be),this.extraFields[se]={id:se,length:be,value:J};G.setIndex(ne)},handleUTF8:function(){var G=q.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=ke.utf8decode(this.fileName),this.fileCommentStr=ke.utf8decode(this.fileComment);else{var se=this.findExtraFieldUnicodePath();if(se!==null)this.fileNameStr=se;else{var be=fe.transformTo(G,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(be)}var J=this.findExtraFieldUnicodeComment();if(J!==null)this.fileCommentStr=J;else{var ne=fe.transformTo(G,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ne)}}},findExtraFieldUnicodePath:function(){var G=this.extraFields[28789];if(G){var se=re(G.value);return se.readInt(1)!==1||pe(this.fileName)!==se.readInt(4)?null:ke.utf8decode(se.readData(G.length-5))}return null},findExtraFieldUnicodeComment:function(){var G=this.extraFields[25461];if(G){var se=re(G.value);return se.readInt(1)!==1||pe(this.fileComment)!==se.readInt(4)?null:ke.utf8decode(se.readData(G.length-5))}return null}},ve.exports=K},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(we,ve,Me){"use strict";function re(se,be,J){this.name=se,this.dir=J.dir,this.date=J.date,this.comment=J.comment,this.unixPermissions=J.unixPermissions,this.dosPermissions=J.dosPermissions,this._data=be,this._dataBinary=J.binary,this.options={compression:J.compression,compressionOptions:J.compressionOptions}}var fe=we("./stream/StreamHelper"),Q=we("./stream/DataWorker"),pe=we("./utf8"),ke=we("./compressedObject"),Ie=we("./stream/GenericWorker");re.prototype={internalStream:function(se){var be=null,J="string";try{if(!se)throw new Error("No output type specified.");var ne=(J=se.toLowerCase())==="string"||J==="text";J!=="binarystring"&&J!=="text"||(J="string"),be=this._decompressWorker();var ye=!this._dataBinary;ye&&!ne&&(be=be.pipe(new pe.Utf8EncodeWorker)),!ye&&ne&&(be=be.pipe(new pe.Utf8DecodeWorker))}catch(Be){(be=new Ie("error")).error(Be)}return new fe(be,J,"")},async:function(se,be){return this.internalStream(se).accumulate(be)},nodeStream:function(se,be){return this.internalStream(se||"nodebuffer").toNodejsStream(be)},_compressWorker:function(se,be){if(this._data instanceof ke&&this._data.compression.magic===se.magic)return this._data.getCompressedWorker();var J=this._decompressWorker();return this._dataBinary||(J=J.pipe(new pe.Utf8EncodeWorker)),ke.createWorkerFrom(J,se,be)},_decompressWorker:function(){return this._data instanceof ke?this._data.getContentWorker():this._data instanceof Ie?this._data:new Q(this._data)}};for(var q=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],K=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},G=0;G<q.length;G++)re.prototype[q[G]]=K;ve.exports=re},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(we,ve,Me){(function(re){"use strict";var fe,Q,pe=re.MutationObserver||re.WebKitMutationObserver;if(pe){var ke=0,Ie=new pe(se),q=re.document.createTextNode("");Ie.observe(q,{characterData:!0}),fe=function(){q.data=ke=++ke%2}}else if(re.setImmediate||re.MessageChannel===void 0)fe="document"in re&&"onreadystatechange"in re.document.createElement("script")?function(){var be=re.document.createElement("script");be.onreadystatechange=function(){se(),be.onreadystatechange=null,be.parentNode.removeChild(be),be=null},re.document.documentElement.appendChild(be)}:function(){setTimeout(se,0)};else{var K=new re.MessageChannel;K.port1.onmessage=se,fe=function(){K.port2.postMessage(0)}}var G=[];function se(){var be,J;Q=!0;for(var ne=G.length;ne;){for(J=G,G=[],be=-1;++be<ne;)J[be]();ne=G.length}Q=!1}ve.exports=function(be){G.push(be)!==1||Q||fe()}}).call(this,yn!==void 0?yn:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(we,ve,Me){"use strict";var re=we("immediate");function fe(){}var Q={},pe=["REJECTED"],ke=["FULFILLED"],Ie=["PENDING"];function q(ne){if(typeof ne!="function")throw new TypeError("resolver must be a function");this.state=Ie,this.queue=[],this.outcome=void 0,ne!==fe&&be(this,ne)}function K(ne,ye,Be){this.promise=ne,typeof ye=="function"&&(this.onFulfilled=ye,this.callFulfilled=this.otherCallFulfilled),typeof Be=="function"&&(this.onRejected=Be,this.callRejected=this.otherCallRejected)}function G(ne,ye,Be){re(function(){var Ue;try{Ue=ye(Be)}catch(Oe){return Q.reject(ne,Oe)}Ue===ne?Q.reject(ne,new TypeError("Cannot resolve promise with itself")):Q.resolve(ne,Ue)})}function se(ne){var ye=ne&&ne.then;if(ne&&(typeof ne=="object"||typeof ne=="function")&&typeof ye=="function")return function(){ye.apply(ne,arguments)}}function be(ne,ye){var Be=!1;function Ue(lt){Be||(Be=!0,Q.reject(ne,lt))}function Oe(lt){Be||(Be=!0,Q.resolve(ne,lt))}var bt=J(function(){ye(Oe,Ue)});bt.status==="error"&&Ue(bt.value)}function J(ne,ye){var Be={};try{Be.value=ne(ye),Be.status="success"}catch(Ue){Be.status="error",Be.value=Ue}return Be}(ve.exports=q).prototype.finally=function(ne){if(typeof ne!="function")return this;var ye=this.constructor;return this.then(function(Be){return ye.resolve(ne()).then(function(){return Be})},function(Be){return ye.resolve(ne()).then(function(){throw Be})})},q.prototype.catch=function(ne){return this.then(null,ne)},q.prototype.then=function(ne,ye){if(typeof ne!="function"&&this.state===ke||typeof ye!="function"&&this.state===pe)return this;var Be=new this.constructor(fe);return this.state!==Ie?G(Be,this.state===ke?ne:ye,this.outcome):this.queue.push(new K(Be,ne,ye)),Be},K.prototype.callFulfilled=function(ne){Q.resolve(this.promise,ne)},K.prototype.otherCallFulfilled=function(ne){G(this.promise,this.onFulfilled,ne)},K.prototype.callRejected=function(ne){Q.reject(this.promise,ne)},K.prototype.otherCallRejected=function(ne){G(this.promise,this.onRejected,ne)},Q.resolve=function(ne,ye){var Be=J(se,ye);if(Be.status==="error")return Q.reject(ne,Be.value);var Ue=Be.value;if(Ue)be(ne,Ue);else{ne.state=ke,ne.outcome=ye;for(var Oe=-1,bt=ne.queue.length;++Oe<bt;)ne.queue[Oe].callFulfilled(ye)}return ne},Q.reject=function(ne,ye){ne.state=pe,ne.outcome=ye;for(var Be=-1,Ue=ne.queue.length;++Be<Ue;)ne.queue[Be].callRejected(ye);return ne},q.resolve=function(ne){return ne instanceof this?ne:Q.resolve(new this(fe),ne)},q.reject=function(ne){var ye=new this(fe);return Q.reject(ye,ne)},q.all=function(ne){var ye=this;if(Object.prototype.toString.call(ne)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Be=ne.length,Ue=!1;if(!Be)return this.resolve([]);for(var Oe=new Array(Be),bt=0,lt=-1,Lt=new this(fe);++lt<Be;)et(ne[lt],lt);return Lt;function et(qt,jr){ye.resolve(qt).then(function(Ae){Oe[jr]=Ae,++bt!==Be||Ue||(Ue=!0,Q.resolve(Lt,Oe))},function(Ae){Ue||(Ue=!0,Q.reject(Lt,Ae))})}},q.race=function(ne){if(Object.prototype.toString.call(ne)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ye=ne.length,Be=!1;if(!ye)return this.resolve([]);for(var Ue,Oe=-1,bt=new this(fe);++Oe<ye;)Ue=ne[Oe],this.resolve(Ue).then(function(lt){Be||(Be=!0,Q.resolve(bt,lt))},function(lt){Be||(Be=!0,Q.reject(bt,lt))});return bt}},{immediate:36}],38:[function(we,ve,Me){"use strict";var re={};(0,we("./lib/utils/common").assign)(re,we("./lib/deflate"),we("./lib/inflate"),we("./lib/zlib/constants")),ve.exports=re},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(we,ve,Me){"use strict";var re=we("./zlib/deflate"),fe=we("./utils/common"),Q=we("./utils/strings"),pe=we("./zlib/messages"),ke=we("./zlib/zstream"),Ie=Object.prototype.toString,q=0,K=-1,G=0,se=8;function be(ne){if(!(this instanceof be))return new be(ne);this.options=fe.assign({level:K,method:se,chunkSize:16384,windowBits:15,memLevel:8,strategy:G,to:""},ne||{});var ye=this.options;ye.raw&&0<ye.windowBits?ye.windowBits=-ye.windowBits:ye.gzip&&0<ye.windowBits&&ye.windowBits<16&&(ye.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0;var Be=re.deflateInit2(this.strm,ye.level,ye.method,ye.windowBits,ye.memLevel,ye.strategy);if(Be!==q)throw new Error(pe[Be]);if(ye.header&&re.deflateSetHeader(this.strm,ye.header),ye.dictionary){var Ue;if(Ue=typeof ye.dictionary=="string"?Q.string2buf(ye.dictionary):Ie.call(ye.dictionary)==="[object ArrayBuffer]"?new Uint8Array(ye.dictionary):ye.dictionary,(Be=re.deflateSetDictionary(this.strm,Ue))!==q)throw new Error(pe[Be]);this._dict_set=!0}}function J(ne,ye){var Be=new be(ye);if(Be.push(ne,!0),Be.err)throw Be.msg||pe[Be.err];return Be.result}be.prototype.push=function(ne,ye){var Be,Ue,Oe=this.strm,bt=this.options.chunkSize;if(this.ended)return!1;Ue=ye===~~ye?ye:ye===!0?4:0,typeof ne=="string"?Oe.input=Q.string2buf(ne):Ie.call(ne)==="[object ArrayBuffer]"?Oe.input=new Uint8Array(ne):Oe.input=ne,Oe.next_in=0,Oe.avail_in=Oe.input.length;do{if(Oe.avail_out===0&&(Oe.output=new fe.Buf8(bt),Oe.next_out=0,Oe.avail_out=bt),(Be=re.deflate(Oe,Ue))!==1&&Be!==q)return this.onEnd(Be),!(this.ended=!0);Oe.avail_out!==0&&(Oe.avail_in!==0||Ue!==4&&Ue!==2)||(this.options.to==="string"?this.onData(Q.buf2binstring(fe.shrinkBuf(Oe.output,Oe.next_out))):this.onData(fe.shrinkBuf(Oe.output,Oe.next_out)))}while((0<Oe.avail_in||Oe.avail_out===0)&&Be!==1);return Ue===4?(Be=re.deflateEnd(this.strm),this.onEnd(Be),this.ended=!0,Be===q):Ue!==2||(this.onEnd(q),!(Oe.avail_out=0))},be.prototype.onData=function(ne){this.chunks.push(ne)},be.prototype.onEnd=function(ne){ne===q&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fe.flattenChunks(this.chunks)),this.chunks=[],this.err=ne,this.msg=this.strm.msg},Me.Deflate=be,Me.deflate=J,Me.deflateRaw=function(ne,ye){return(ye=ye||{}).raw=!0,J(ne,ye)},Me.gzip=function(ne,ye){return(ye=ye||{}).gzip=!0,J(ne,ye)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(we,ve,Me){"use strict";var re=we("./zlib/inflate"),fe=we("./utils/common"),Q=we("./utils/strings"),pe=we("./zlib/constants"),ke=we("./zlib/messages"),Ie=we("./zlib/zstream"),q=we("./zlib/gzheader"),K=Object.prototype.toString;function G(be){if(!(this instanceof G))return new G(be);this.options=fe.assign({chunkSize:16384,windowBits:0,to:""},be||{});var J=this.options;J.raw&&0<=J.windowBits&&J.windowBits<16&&(J.windowBits=-J.windowBits,J.windowBits===0&&(J.windowBits=-15)),!(0<=J.windowBits&&J.windowBits<16)||be&&be.windowBits||(J.windowBits+=32),15<J.windowBits&&J.windowBits<48&&(15&J.windowBits)==0&&(J.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ie,this.strm.avail_out=0;var ne=re.inflateInit2(this.strm,J.windowBits);if(ne!==pe.Z_OK)throw new Error(ke[ne]);this.header=new q,re.inflateGetHeader(this.strm,this.header)}function se(be,J){var ne=new G(J);if(ne.push(be,!0),ne.err)throw ne.msg||ke[ne.err];return ne.result}G.prototype.push=function(be,J){var ne,ye,Be,Ue,Oe,bt,lt=this.strm,Lt=this.options.chunkSize,et=this.options.dictionary,qt=!1;if(this.ended)return!1;ye=J===~~J?J:J===!0?pe.Z_FINISH:pe.Z_NO_FLUSH,typeof be=="string"?lt.input=Q.binstring2buf(be):K.call(be)==="[object ArrayBuffer]"?lt.input=new Uint8Array(be):lt.input=be,lt.next_in=0,lt.avail_in=lt.input.length;do{if(lt.avail_out===0&&(lt.output=new fe.Buf8(Lt),lt.next_out=0,lt.avail_out=Lt),(ne=re.inflate(lt,pe.Z_NO_FLUSH))===pe.Z_NEED_DICT&&et&&(bt=typeof et=="string"?Q.string2buf(et):K.call(et)==="[object ArrayBuffer]"?new Uint8Array(et):et,ne=re.inflateSetDictionary(this.strm,bt)),ne===pe.Z_BUF_ERROR&&qt===!0&&(ne=pe.Z_OK,qt=!1),ne!==pe.Z_STREAM_END&&ne!==pe.Z_OK)return this.onEnd(ne),!(this.ended=!0);lt.next_out&&(lt.avail_out!==0&&ne!==pe.Z_STREAM_END&&(lt.avail_in!==0||ye!==pe.Z_FINISH&&ye!==pe.Z_SYNC_FLUSH)||(this.options.to==="string"?(Be=Q.utf8border(lt.output,lt.next_out),Ue=lt.next_out-Be,Oe=Q.buf2string(lt.output,Be),lt.next_out=Ue,lt.avail_out=Lt-Ue,Ue&&fe.arraySet(lt.output,lt.output,Be,Ue,0),this.onData(Oe)):this.onData(fe.shrinkBuf(lt.output,lt.next_out)))),lt.avail_in===0&&lt.avail_out===0&&(qt=!0)}while((0<lt.avail_in||lt.avail_out===0)&&ne!==pe.Z_STREAM_END);return ne===pe.Z_STREAM_END&&(ye=pe.Z_FINISH),ye===pe.Z_FINISH?(ne=re.inflateEnd(this.strm),this.onEnd(ne),this.ended=!0,ne===pe.Z_OK):ye!==pe.Z_SYNC_FLUSH||(this.onEnd(pe.Z_OK),!(lt.avail_out=0))},G.prototype.onData=function(be){this.chunks.push(be)},G.prototype.onEnd=function(be){be===pe.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fe.flattenChunks(this.chunks)),this.chunks=[],this.err=be,this.msg=this.strm.msg},Me.Inflate=G,Me.inflate=se,Me.inflateRaw=function(be,J){return(J=J||{}).raw=!0,se(be,J)},Me.ungzip=se},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(we,ve,Me){"use strict";var re=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";Me.assign=function(pe){for(var ke=Array.prototype.slice.call(arguments,1);ke.length;){var Ie=ke.shift();if(Ie){if(typeof Ie!="object")throw new TypeError(Ie+"must be non-object");for(var q in Ie)Ie.hasOwnProperty(q)&&(pe[q]=Ie[q])}}return pe},Me.shrinkBuf=function(pe,ke){return pe.length===ke?pe:pe.subarray?pe.subarray(0,ke):(pe.length=ke,pe)};var fe={arraySet:function(pe,ke,Ie,q,K){if(ke.subarray&&pe.subarray)pe.set(ke.subarray(Ie,Ie+q),K);else for(var G=0;G<q;G++)pe[K+G]=ke[Ie+G]},flattenChunks:function(pe){var ke,Ie,q,K,G,se;for(ke=q=0,Ie=pe.length;ke<Ie;ke++)q+=pe[ke].length;for(se=new Uint8Array(q),ke=K=0,Ie=pe.length;ke<Ie;ke++)G=pe[ke],se.set(G,K),K+=G.length;return se}},Q={arraySet:function(pe,ke,Ie,q,K){for(var G=0;G<q;G++)pe[K+G]=ke[Ie+G]},flattenChunks:function(pe){return[].concat.apply([],pe)}};Me.setTyped=function(pe){pe?(Me.Buf8=Uint8Array,Me.Buf16=Uint16Array,Me.Buf32=Int32Array,Me.assign(Me,fe)):(Me.Buf8=Array,Me.Buf16=Array,Me.Buf32=Array,Me.assign(Me,Q))},Me.setTyped(re)},{}],42:[function(we,ve,Me){"use strict";var re=we("./common"),fe=!0,Q=!0;try{String.fromCharCode.apply(null,[0])}catch(q){fe=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(q){Q=!1}for(var pe=new re.Buf8(256),ke=0;ke<256;ke++)pe[ke]=252<=ke?6:248<=ke?5:240<=ke?4:224<=ke?3:192<=ke?2:1;function Ie(q,K){if(K<65537&&(q.subarray&&Q||!q.subarray&&fe))return String.fromCharCode.apply(null,re.shrinkBuf(q,K));for(var G="",se=0;se<K;se++)G+=String.fromCharCode(q[se]);return G}pe[254]=pe[254]=1,Me.string2buf=function(q){var K,G,se,be,J,ne=q.length,ye=0;for(be=0;be<ne;be++)(64512&(G=q.charCodeAt(be)))==55296&&be+1<ne&&(64512&(se=q.charCodeAt(be+1)))==56320&&(G=65536+(G-55296<<10)+(se-56320),be++),ye+=G<128?1:G<2048?2:G<65536?3:4;for(K=new re.Buf8(ye),be=J=0;J<ye;be++)(64512&(G=q.charCodeAt(be)))==55296&&be+1<ne&&(64512&(se=q.charCodeAt(be+1)))==56320&&(G=65536+(G-55296<<10)+(se-56320),be++),G<128?K[J++]=G:(G<2048?K[J++]=192|G>>>6:(G<65536?K[J++]=224|G>>>12:(K[J++]=240|G>>>18,K[J++]=128|G>>>12&63),K[J++]=128|G>>>6&63),K[J++]=128|63&G);return K},Me.buf2binstring=function(q){return Ie(q,q.length)},Me.binstring2buf=function(q){for(var K=new re.Buf8(q.length),G=0,se=K.length;G<se;G++)K[G]=q.charCodeAt(G);return K},Me.buf2string=function(q,K){var G,se,be,J,ne=K||q.length,ye=new Array(2*ne);for(G=se=0;G<ne;)if((be=q[G++])<128)ye[se++]=be;else if(4<(J=pe[be]))ye[se++]=65533,G+=J-1;else{for(be&=J===2?31:J===3?15:7;1<J&&G<ne;)be=be<<6|63&q[G++],J--;1<J?ye[se++]=65533:be<65536?ye[se++]=be:(be-=65536,ye[se++]=55296|be>>10&1023,ye[se++]=56320|1023&be)}return Ie(ye,se)},Me.utf8border=function(q,K){var G;for((K=K||q.length)>q.length&&(K=q.length),G=K-1;0<=G&&(192&q[G])==128;)G--;return G<0||G===0?K:G+pe[q[G]]>K?G:K}},{"./common":41}],43:[function(we,ve,Me){"use strict";ve.exports=function(re,fe,Q,pe){for(var ke=65535&re|0,Ie=re>>>16&65535|0,q=0;Q!==0;){for(Q-=q=2e3<Q?2e3:Q;Ie=Ie+(ke=ke+fe[pe++]|0)|0,--q;);ke%=65521,Ie%=65521}return ke|Ie<<16|0}},{}],44:[function(we,ve,Me){"use strict";ve.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(we,ve,Me){"use strict";var re=function(){for(var fe,Q=[],pe=0;pe<256;pe++){fe=pe;for(var ke=0;ke<8;ke++)fe=1&fe?3988292384^fe>>>1:fe>>>1;Q[pe]=fe}return Q}();ve.exports=function(fe,Q,pe,ke){var Ie=re,q=ke+pe;fe^=-1;for(var K=ke;K<q;K++)fe=fe>>>8^Ie[255&(fe^Q[K])];return-1^fe}},{}],46:[function(we,ve,Me){"use strict";var re,fe=we("../utils/common"),Q=we("./trees"),pe=we("./adler32"),ke=we("./crc32"),Ie=we("./messages"),q=0,K=0,G=-2,se=2,be=8,J=286,ne=30,ye=19,Be=2*J+1,Ue=15,Oe=3,bt=258,lt=bt+Oe+1,Lt=42,et=113;function qt(B,He){return B.msg=Ie[He],He}function jr(B){return(B<<1)-(4<B?9:0)}function Ae(B){for(var He=B.length;0<=--He;)B[He]=0}function tt(B){var He=B.state,Ee=He.pending;Ee>B.avail_out&&(Ee=B.avail_out),Ee!==0&&(fe.arraySet(B.output,He.pending_buf,He.pending_out,Ee,B.next_out),B.next_out+=Ee,He.pending_out+=Ee,B.total_out+=Ee,B.avail_out-=Ee,He.pending-=Ee,He.pending===0&&(He.pending_out=0))}function j(B,He){Q._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,He),B.block_start=B.strstart,tt(B.strm)}function Ye(B,He){B.pending_buf[B.pending++]=He}function en(B,He){B.pending_buf[B.pending++]=He>>>8&255,B.pending_buf[B.pending++]=255&He}function St(B,He){var Ee,te,gt=B.max_chain_length,it=B.strstart,At=B.prev_length,It=B.nice_match,ut=B.strstart>B.w_size-lt?B.strstart-(B.w_size-lt):0,Yt=B.window,Hr=B.w_mask,Sr=B.prev,tn=B.strstart+bt,Tr=Yt[it+At-1],Bo=Yt[it+At];B.prev_length>=B.good_match&&(gt>>=2),It>B.lookahead&&(It=B.lookahead);do if(Yt[(Ee=He)+At]===Bo&&Yt[Ee+At-1]===Tr&&Yt[Ee]===Yt[it]&&Yt[++Ee]===Yt[it+1]){it+=2,Ee++;do;while(Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&Yt[++it]===Yt[++Ee]&&it<tn);if(te=bt-(tn-it),it=tn-bt,At<te){if(B.match_start=He,It<=(At=te))break;Tr=Yt[it+At-1],Bo=Yt[it+At]}}while((He=Sr[He&Hr])>ut&&--gt!=0);return At<=B.lookahead?At:B.lookahead}function Kr(B){var He,Ee,te,gt,it,At,It,ut,Yt,Hr,Sr=B.w_size;do{if(gt=B.window_size-B.lookahead-B.strstart,B.strstart>=Sr+(Sr-lt)){for(fe.arraySet(B.window,B.window,Sr,Sr,0),B.match_start-=Sr,B.strstart-=Sr,B.block_start-=Sr,He=Ee=B.hash_size;te=B.head[--He],B.head[He]=Sr<=te?te-Sr:0,--Ee;);for(He=Ee=Sr;te=B.prev[--He],B.prev[He]=Sr<=te?te-Sr:0,--Ee;);gt+=Sr}if(B.strm.avail_in===0)break;if(At=B.strm,It=B.window,ut=B.strstart+B.lookahead,Hr=void 0,(Yt=gt)<(Hr=At.avail_in)&&(Hr=Yt),Ee=Hr===0?0:(At.avail_in-=Hr,fe.arraySet(It,At.input,At.next_in,Hr,ut),At.state.wrap===1?At.adler=pe(At.adler,It,Hr,ut):At.state.wrap===2&&(At.adler=ke(At.adler,It,Hr,ut)),At.next_in+=Hr,At.total_in+=Hr,Hr),B.lookahead+=Ee,B.lookahead+B.insert>=Oe)for(it=B.strstart-B.insert,B.ins_h=B.window[it],B.ins_h=(B.ins_h<<B.hash_shift^B.window[it+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[it+Oe-1])&B.hash_mask,B.prev[it&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=it,it++,B.insert--,!(B.lookahead+B.insert<Oe)););}while(B.lookahead<lt&&B.strm.avail_in!==0)}function Ct(B,He){for(var Ee,te;;){if(B.lookahead<lt){if(Kr(B),B.lookahead<lt&&He===q)return 1;if(B.lookahead===0)break}if(Ee=0,B.lookahead>=Oe&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+Oe-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),Ee!==0&&B.strstart-Ee<=B.w_size-lt&&(B.match_length=St(B,Ee)),B.match_length>=Oe)if(te=Q._tr_tally(B,B.strstart-B.match_start,B.match_length-Oe),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=Oe){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+Oe-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else te=Q._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(te&&(j(B,!1),B.strm.avail_out===0))return 1}return B.insert=B.strstart<Oe-1?B.strstart:Oe-1,He===4?(j(B,!0),B.strm.avail_out===0?3:4):B.last_lit&&(j(B,!1),B.strm.avail_out===0)?1:2}function Ir(B,He){for(var Ee,te,gt;;){if(B.lookahead<lt){if(Kr(B),B.lookahead<lt&&He===q)return 1;if(B.lookahead===0)break}if(Ee=0,B.lookahead>=Oe&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+Oe-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=Oe-1,Ee!==0&&B.prev_length<B.max_lazy_match&&B.strstart-Ee<=B.w_size-lt&&(B.match_length=St(B,Ee),B.match_length<=5&&(B.strategy===1||B.match_length===Oe&&4096<B.strstart-B.match_start)&&(B.match_length=Oe-1)),B.prev_length>=Oe&&B.match_length<=B.prev_length){for(gt=B.strstart+B.lookahead-Oe,te=Q._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-Oe),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=gt&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+Oe-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=Oe-1,B.strstart++,te&&(j(B,!1),B.strm.avail_out===0))return 1}else if(B.match_available){if((te=Q._tr_tally(B,0,B.window[B.strstart-1]))&&j(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return 1}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(te=Q._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<Oe-1?B.strstart:Oe-1,He===4?(j(B,!0),B.strm.avail_out===0?3:4):B.last_lit&&(j(B,!1),B.strm.avail_out===0)?1:2}function Ke(B,He,Ee,te,gt){this.good_length=B,this.max_lazy=He,this.nice_length=Ee,this.max_chain=te,this.func=gt}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=be,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new fe.Buf16(2*Be),this.dyn_dtree=new fe.Buf16(2*(2*ne+1)),this.bl_tree=new fe.Buf16(2*(2*ye+1)),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new fe.Buf16(Ue+1),this.heap=new fe.Buf16(2*J+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new fe.Buf16(2*J+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qi(B){var He;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=se,(He=B.state).pending=0,He.pending_out=0,He.wrap<0&&(He.wrap=-He.wrap),He.status=He.wrap?Lt:et,B.adler=He.wrap===2?0:1,He.last_flush=q,Q._tr_init(He),K):qt(B,G)}function Ce(B){var He,Ee=qi(B);return Ee===K&&((He=B.state).window_size=2*He.w_size,Ae(He.head),He.max_lazy_match=re[He.level].max_lazy,He.good_match=re[He.level].good_length,He.nice_match=re[He.level].nice_length,He.max_chain_length=re[He.level].max_chain,He.strstart=0,He.block_start=0,He.lookahead=0,He.insert=0,He.match_length=He.prev_length=Oe-1,He.match_available=0,He.ins_h=0),Ee}function Ne(B,He,Ee,te,gt,it){if(!B)return G;var At=1;if(He===-1&&(He=6),te<0?(At=0,te=-te):15<te&&(At=2,te-=16),gt<1||9<gt||Ee!==be||te<8||15<te||He<0||9<He||it<0||4<it)return qt(B,G);te===8&&(te=9);var It=new Je;return(B.state=It).strm=B,It.wrap=At,It.gzhead=null,It.w_bits=te,It.w_size=1<<It.w_bits,It.w_mask=It.w_size-1,It.hash_bits=gt+7,It.hash_size=1<<It.hash_bits,It.hash_mask=It.hash_size-1,It.hash_shift=~~((It.hash_bits+Oe-1)/Oe),It.window=new fe.Buf8(2*It.w_size),It.head=new fe.Buf16(It.hash_size),It.prev=new fe.Buf16(It.w_size),It.lit_bufsize=1<<gt+6,It.pending_buf_size=4*It.lit_bufsize,It.pending_buf=new fe.Buf8(It.pending_buf_size),It.d_buf=1*It.lit_bufsize,It.l_buf=3*It.lit_bufsize,It.level=He,It.strategy=it,It.method=Ee,Ce(B)}re=[new Ke(0,0,0,0,function(B,He){var Ee=65535;for(Ee>B.pending_buf_size-5&&(Ee=B.pending_buf_size-5);;){if(B.lookahead<=1){if(Kr(B),B.lookahead===0&&He===q)return 1;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var te=B.block_start+Ee;if((B.strstart===0||B.strstart>=te)&&(B.lookahead=B.strstart-te,B.strstart=te,j(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-lt&&(j(B,!1),B.strm.avail_out===0))return 1}return B.insert=0,He===4?(j(B,!0),B.strm.avail_out===0?3:4):(B.strstart>B.block_start&&(j(B,!1),B.strm.avail_out),1)}),new Ke(4,4,8,4,Ct),new Ke(4,5,16,8,Ct),new Ke(4,6,32,32,Ct),new Ke(4,4,16,16,Ir),new Ke(8,16,32,32,Ir),new Ke(8,16,128,128,Ir),new Ke(8,32,128,256,Ir),new Ke(32,128,258,1024,Ir),new Ke(32,258,258,4096,Ir)],Me.deflateInit=function(B,He){return Ne(B,He,be,15,8,0)},Me.deflateInit2=Ne,Me.deflateReset=Ce,Me.deflateResetKeep=qi,Me.deflateSetHeader=function(B,He){return B&&B.state?B.state.wrap!==2?G:(B.state.gzhead=He,K):G},Me.deflate=function(B,He){var Ee,te,gt,it;if(!B||!B.state||5<He||He<0)return B?qt(B,G):G;if(te=B.state,!B.output||!B.input&&B.avail_in!==0||te.status===666&&He!==4)return qt(B,B.avail_out===0?-5:G);if(te.strm=B,Ee=te.last_flush,te.last_flush=He,te.status===Lt)if(te.wrap===2)B.adler=0,Ye(te,31),Ye(te,139),Ye(te,8),te.gzhead?(Ye(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),Ye(te,255&te.gzhead.time),Ye(te,te.gzhead.time>>8&255),Ye(te,te.gzhead.time>>16&255),Ye(te,te.gzhead.time>>24&255),Ye(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),Ye(te,255&te.gzhead.os),te.gzhead.extra&&te.gzhead.extra.length&&(Ye(te,255&te.gzhead.extra.length),Ye(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(B.adler=ke(B.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=69):(Ye(te,0),Ye(te,0),Ye(te,0),Ye(te,0),Ye(te,0),Ye(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),Ye(te,3),te.status=et);else{var At=be+(te.w_bits-8<<4)<<8;At|=(2<=te.strategy||te.level<2?0:te.level<6?1:te.level===6?2:3)<<6,te.strstart!==0&&(At|=32),At+=31-At%31,te.status=et,en(te,At),te.strstart!==0&&(en(te,B.adler>>>16),en(te,65535&B.adler)),B.adler=1}if(te.status===69)if(te.gzhead.extra){for(gt=te.pending;te.gzindex<(65535&te.gzhead.extra.length)&&(te.pending!==te.pending_buf_size||(te.gzhead.hcrc&&te.pending>gt&&(B.adler=ke(B.adler,te.pending_buf,te.pending-gt,gt)),tt(B),gt=te.pending,te.pending!==te.pending_buf_size));)Ye(te,255&te.gzhead.extra[te.gzindex]),te.gzindex++;te.gzhead.hcrc&&te.pending>gt&&(B.adler=ke(B.adler,te.pending_buf,te.pending-gt,gt)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=73)}else te.status=73;if(te.status===73)if(te.gzhead.name){gt=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>gt&&(B.adler=ke(B.adler,te.pending_buf,te.pending-gt,gt)),tt(B),gt=te.pending,te.pending===te.pending_buf_size)){it=1;break}it=te.gzindex<te.gzhead.name.length?255&te.gzhead.name.charCodeAt(te.gzindex++):0,Ye(te,it)}while(it!==0);te.gzhead.hcrc&&te.pending>gt&&(B.adler=ke(B.adler,te.pending_buf,te.pending-gt,gt)),it===0&&(te.gzindex=0,te.status=91)}else te.status=91;if(te.status===91)if(te.gzhead.comment){gt=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>gt&&(B.adler=ke(B.adler,te.pending_buf,te.pending-gt,gt)),tt(B),gt=te.pending,te.pending===te.pending_buf_size)){it=1;break}it=te.gzindex<te.gzhead.comment.length?255&te.gzhead.comment.charCodeAt(te.gzindex++):0,Ye(te,it)}while(it!==0);te.gzhead.hcrc&&te.pending>gt&&(B.adler=ke(B.adler,te.pending_buf,te.pending-gt,gt)),it===0&&(te.status=103)}else te.status=103;if(te.status===103&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&tt(B),te.pending+2<=te.pending_buf_size&&(Ye(te,255&B.adler),Ye(te,B.adler>>8&255),B.adler=0,te.status=et)):te.status=et),te.pending!==0){if(tt(B),B.avail_out===0)return te.last_flush=-1,K}else if(B.avail_in===0&&jr(He)<=jr(Ee)&&He!==4)return qt(B,-5);if(te.status===666&&B.avail_in!==0)return qt(B,-5);if(B.avail_in!==0||te.lookahead!==0||He!==q&&te.status!==666){var It=te.strategy===2?function(ut,Yt){for(var Hr;;){if(ut.lookahead===0&&(Kr(ut),ut.lookahead===0)){if(Yt===q)return 1;break}if(ut.match_length=0,Hr=Q._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++,Hr&&(j(ut,!1),ut.strm.avail_out===0))return 1}return ut.insert=0,Yt===4?(j(ut,!0),ut.strm.avail_out===0?3:4):ut.last_lit&&(j(ut,!1),ut.strm.avail_out===0)?1:2}(te,He):te.strategy===3?function(ut,Yt){for(var Hr,Sr,tn,Tr,Bo=ut.window;;){if(ut.lookahead<=bt){if(Kr(ut),ut.lookahead<=bt&&Yt===q)return 1;if(ut.lookahead===0)break}if(ut.match_length=0,ut.lookahead>=Oe&&0<ut.strstart&&(Sr=Bo[tn=ut.strstart-1])===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]){Tr=ut.strstart+bt;do;while(Sr===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]&&Sr===Bo[++tn]&&tn<Tr);ut.match_length=bt-(Tr-tn),ut.match_length>ut.lookahead&&(ut.match_length=ut.lookahead)}if(ut.match_length>=Oe?(Hr=Q._tr_tally(ut,1,ut.match_length-Oe),ut.lookahead-=ut.match_length,ut.strstart+=ut.match_length,ut.match_length=0):(Hr=Q._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++),Hr&&(j(ut,!1),ut.strm.avail_out===0))return 1}return ut.insert=0,Yt===4?(j(ut,!0),ut.strm.avail_out===0?3:4):ut.last_lit&&(j(ut,!1),ut.strm.avail_out===0)?1:2}(te,He):re[te.level].func(te,He);if(It!==3&&It!==4||(te.status=666),It===1||It===3)return B.avail_out===0&&(te.last_flush=-1),K;if(It===2&&(He===1?Q._tr_align(te):He!==5&&(Q._tr_stored_block(te,0,0,!1),He===3&&(Ae(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),tt(B),B.avail_out===0))return te.last_flush=-1,K}return He!==4?K:te.wrap<=0?1:(te.wrap===2?(Ye(te,255&B.adler),Ye(te,B.adler>>8&255),Ye(te,B.adler>>16&255),Ye(te,B.adler>>24&255),Ye(te,255&B.total_in),Ye(te,B.total_in>>8&255),Ye(te,B.total_in>>16&255),Ye(te,B.total_in>>24&255)):(en(te,B.adler>>>16),en(te,65535&B.adler)),tt(B),0<te.wrap&&(te.wrap=-te.wrap),te.pending!==0?K:1)},Me.deflateEnd=function(B){var He;return B&&B.state?(He=B.state.status)!==Lt&&He!==69&&He!==73&&He!==91&&He!==103&&He!==et&&He!==666?qt(B,G):(B.state=null,He===et?qt(B,-3):K):G},Me.deflateSetDictionary=function(B,He){var Ee,te,gt,it,At,It,ut,Yt,Hr=He.length;if(!B||!B.state||(it=(Ee=B.state).wrap)===2||it===1&&Ee.status!==Lt||Ee.lookahead)return G;for(it===1&&(B.adler=pe(B.adler,He,Hr,0)),Ee.wrap=0,Hr>=Ee.w_size&&(it===0&&(Ae(Ee.head),Ee.strstart=0,Ee.block_start=0,Ee.insert=0),Yt=new fe.Buf8(Ee.w_size),fe.arraySet(Yt,He,Hr-Ee.w_size,Ee.w_size,0),He=Yt,Hr=Ee.w_size),At=B.avail_in,It=B.next_in,ut=B.input,B.avail_in=Hr,B.next_in=0,B.input=He,Kr(Ee);Ee.lookahead>=Oe;){for(te=Ee.strstart,gt=Ee.lookahead-(Oe-1);Ee.ins_h=(Ee.ins_h<<Ee.hash_shift^Ee.window[te+Oe-1])&Ee.hash_mask,Ee.prev[te&Ee.w_mask]=Ee.head[Ee.ins_h],Ee.head[Ee.ins_h]=te,te++,--gt;);Ee.strstart=te,Ee.lookahead=Oe-1,Kr(Ee)}return Ee.strstart+=Ee.lookahead,Ee.block_start=Ee.strstart,Ee.insert=Ee.lookahead,Ee.lookahead=0,Ee.match_length=Ee.prev_length=Oe-1,Ee.match_available=0,B.next_in=It,B.input=ut,B.avail_in=At,Ee.wrap=it,K},Me.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(we,ve,Me){"use strict";ve.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(we,ve,Me){"use strict";ve.exports=function(re,fe){var Q,pe,ke,Ie,q,K,G,se,be,J,ne,ye,Be,Ue,Oe,bt,lt,Lt,et,qt,jr,Ae,tt,j,Ye;Q=re.state,pe=re.next_in,j=re.input,ke=pe+(re.avail_in-5),Ie=re.next_out,Ye=re.output,q=Ie-(fe-re.avail_out),K=Ie+(re.avail_out-257),G=Q.dmax,se=Q.wsize,be=Q.whave,J=Q.wnext,ne=Q.window,ye=Q.hold,Be=Q.bits,Ue=Q.lencode,Oe=Q.distcode,bt=(1<<Q.lenbits)-1,lt=(1<<Q.distbits)-1;e:do{Be<15&&(ye+=j[pe++]<<Be,Be+=8,ye+=j[pe++]<<Be,Be+=8),Lt=Ue[ye&bt];t:for(;;){if(ye>>>=et=Lt>>>24,Be-=et,(et=Lt>>>16&255)==0)Ye[Ie++]=65535&Lt;else{if(!(16&et)){if((64&et)==0){Lt=Ue[(65535&Lt)+(ye&(1<<et)-1)];continue t}if(32&et){Q.mode=12;break e}re.msg="invalid literal/length code",Q.mode=30;break e}qt=65535&Lt,(et&=15)&&(Be<et&&(ye+=j[pe++]<<Be,Be+=8),qt+=ye&(1<<et)-1,ye>>>=et,Be-=et),Be<15&&(ye+=j[pe++]<<Be,Be+=8,ye+=j[pe++]<<Be,Be+=8),Lt=Oe[ye&lt];r:for(;;){if(ye>>>=et=Lt>>>24,Be-=et,!(16&(et=Lt>>>16&255))){if((64&et)==0){Lt=Oe[(65535&Lt)+(ye&(1<<et)-1)];continue r}re.msg="invalid distance code",Q.mode=30;break e}if(jr=65535&Lt,Be<(et&=15)&&(ye+=j[pe++]<<Be,(Be+=8)<et&&(ye+=j[pe++]<<Be,Be+=8)),G<(jr+=ye&(1<<et)-1)){re.msg="invalid distance too far back",Q.mode=30;break e}if(ye>>>=et,Be-=et,(et=Ie-q)<jr){if(be<(et=jr-et)&&Q.sane){re.msg="invalid distance too far back",Q.mode=30;break e}if(tt=ne,(Ae=0)===J){if(Ae+=se-et,et<qt){for(qt-=et;Ye[Ie++]=ne[Ae++],--et;);Ae=Ie-jr,tt=Ye}}else if(J<et){if(Ae+=se+J-et,(et-=J)<qt){for(qt-=et;Ye[Ie++]=ne[Ae++],--et;);if(Ae=0,J<qt){for(qt-=et=J;Ye[Ie++]=ne[Ae++],--et;);Ae=Ie-jr,tt=Ye}}}else if(Ae+=J-et,et<qt){for(qt-=et;Ye[Ie++]=ne[Ae++],--et;);Ae=Ie-jr,tt=Ye}for(;2<qt;)Ye[Ie++]=tt[Ae++],Ye[Ie++]=tt[Ae++],Ye[Ie++]=tt[Ae++],qt-=3;qt&&(Ye[Ie++]=tt[Ae++],1<qt&&(Ye[Ie++]=tt[Ae++]))}else{for(Ae=Ie-jr;Ye[Ie++]=Ye[Ae++],Ye[Ie++]=Ye[Ae++],Ye[Ie++]=Ye[Ae++],2<(qt-=3););qt&&(Ye[Ie++]=Ye[Ae++],1<qt&&(Ye[Ie++]=Ye[Ae++]))}break}}break}}while(pe<ke&&Ie<K);pe-=qt=Be>>3,ye&=(1<<(Be-=qt<<3))-1,re.next_in=pe,re.next_out=Ie,re.avail_in=pe<ke?ke-pe+5:5-(pe-ke),re.avail_out=Ie<K?K-Ie+257:257-(Ie-K),Q.hold=ye,Q.bits=Be}},{}],49:[function(we,ve,Me){"use strict";var re=we("../utils/common"),fe=we("./adler32"),Q=we("./crc32"),pe=we("./inffast"),ke=we("./inftrees"),Ie=1,q=2,K=0,G=-2,se=1,be=852,J=592;function ne(Ae){return(Ae>>>24&255)+(Ae>>>8&65280)+((65280&Ae)<<8)+((255&Ae)<<24)}function ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new re.Buf16(320),this.work=new re.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Be(Ae){var tt;return Ae&&Ae.state?(tt=Ae.state,Ae.total_in=Ae.total_out=tt.total=0,Ae.msg="",tt.wrap&&(Ae.adler=1&tt.wrap),tt.mode=se,tt.last=0,tt.havedict=0,tt.dmax=32768,tt.head=null,tt.hold=0,tt.bits=0,tt.lencode=tt.lendyn=new re.Buf32(be),tt.distcode=tt.distdyn=new re.Buf32(J),tt.sane=1,tt.back=-1,K):G}function Ue(Ae){var tt;return Ae&&Ae.state?((tt=Ae.state).wsize=0,tt.whave=0,tt.wnext=0,Be(Ae)):G}function Oe(Ae,tt){var j,Ye;return Ae&&Ae.state?(Ye=Ae.state,tt<0?(j=0,tt=-tt):(j=1+(tt>>4),tt<48&&(tt&=15)),tt&&(tt<8||15<tt)?G:(Ye.window!==null&&Ye.wbits!==tt&&(Ye.window=null),Ye.wrap=j,Ye.wbits=tt,Ue(Ae))):G}function bt(Ae,tt){var j,Ye;return Ae?(Ye=new ye,(Ae.state=Ye).window=null,(j=Oe(Ae,tt))!==K&&(Ae.state=null),j):G}var lt,Lt,et=!0;function qt(Ae){if(et){var tt;for(lt=new re.Buf32(512),Lt=new re.Buf32(32),tt=0;tt<144;)Ae.lens[tt++]=8;for(;tt<256;)Ae.lens[tt++]=9;for(;tt<280;)Ae.lens[tt++]=7;for(;tt<288;)Ae.lens[tt++]=8;for(ke(Ie,Ae.lens,0,288,lt,0,Ae.work,{bits:9}),tt=0;tt<32;)Ae.lens[tt++]=5;ke(q,Ae.lens,0,32,Lt,0,Ae.work,{bits:5}),et=!1}Ae.lencode=lt,Ae.lenbits=9,Ae.distcode=Lt,Ae.distbits=5}function jr(Ae,tt,j,Ye){var en,St=Ae.state;return St.window===null&&(St.wsize=1<<St.wbits,St.wnext=0,St.whave=0,St.window=new re.Buf8(St.wsize)),Ye>=St.wsize?(re.arraySet(St.window,tt,j-St.wsize,St.wsize,0),St.wnext=0,St.whave=St.wsize):(Ye<(en=St.wsize-St.wnext)&&(en=Ye),re.arraySet(St.window,tt,j-Ye,en,St.wnext),(Ye-=en)?(re.arraySet(St.window,tt,j-Ye,Ye,0),St.wnext=Ye,St.whave=St.wsize):(St.wnext+=en,St.wnext===St.wsize&&(St.wnext=0),St.whave<St.wsize&&(St.whave+=en))),0}Me.inflateReset=Ue,Me.inflateReset2=Oe,Me.inflateResetKeep=Be,Me.inflateInit=function(Ae){return bt(Ae,15)},Me.inflateInit2=bt,Me.inflate=function(Ae,tt){var j,Ye,en,St,Kr,Ct,Ir,Ke,Je,qi,Ce,Ne,B,He,Ee,te,gt,it,At,It,ut,Yt,Hr,Sr,tn=0,Tr=new re.Buf8(4),Bo=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ae||!Ae.state||!Ae.output||!Ae.input&&Ae.avail_in!==0)return G;(j=Ae.state).mode===12&&(j.mode=13),Kr=Ae.next_out,en=Ae.output,Ir=Ae.avail_out,St=Ae.next_in,Ye=Ae.input,Ct=Ae.avail_in,Ke=j.hold,Je=j.bits,qi=Ct,Ce=Ir,Yt=K;e:for(;;)switch(j.mode){case se:if(j.wrap===0){j.mode=13;break}for(;Je<16;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(2&j.wrap&&Ke===35615){Tr[j.check=0]=255&Ke,Tr[1]=Ke>>>8&255,j.check=Q(j.check,Tr,2,0),Je=Ke=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&Ke)<<8)+(Ke>>8))%31){Ae.msg="incorrect header check",j.mode=30;break}if((15&Ke)!=8){Ae.msg="unknown compression method",j.mode=30;break}if(Je-=4,ut=8+(15&(Ke>>>=4)),j.wbits===0)j.wbits=ut;else if(ut>j.wbits){Ae.msg="invalid window size",j.mode=30;break}j.dmax=1<<ut,Ae.adler=j.check=1,j.mode=512&Ke?10:12,Je=Ke=0;break;case 2:for(;Je<16;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(j.flags=Ke,(255&j.flags)!=8){Ae.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){Ae.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=Ke>>8&1),512&j.flags&&(Tr[0]=255&Ke,Tr[1]=Ke>>>8&255,j.check=Q(j.check,Tr,2,0)),Je=Ke=0,j.mode=3;case 3:for(;Je<32;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}j.head&&(j.head.time=Ke),512&j.flags&&(Tr[0]=255&Ke,Tr[1]=Ke>>>8&255,Tr[2]=Ke>>>16&255,Tr[3]=Ke>>>24&255,j.check=Q(j.check,Tr,4,0)),Je=Ke=0,j.mode=4;case 4:for(;Je<16;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}j.head&&(j.head.xflags=255&Ke,j.head.os=Ke>>8),512&j.flags&&(Tr[0]=255&Ke,Tr[1]=Ke>>>8&255,j.check=Q(j.check,Tr,2,0)),Je=Ke=0,j.mode=5;case 5:if(1024&j.flags){for(;Je<16;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}j.length=Ke,j.head&&(j.head.extra_len=Ke),512&j.flags&&(Tr[0]=255&Ke,Tr[1]=Ke>>>8&255,j.check=Q(j.check,Tr,2,0)),Je=Ke=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(Ct<(Ne=j.length)&&(Ne=Ct),Ne&&(j.head&&(ut=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),re.arraySet(j.head.extra,Ye,St,Ne,ut)),512&j.flags&&(j.check=Q(j.check,Ye,Ne,St)),Ct-=Ne,St+=Ne,j.length-=Ne),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(Ct===0)break e;for(Ne=0;ut=Ye[St+Ne++],j.head&&ut&&j.length<65536&&(j.head.name+=String.fromCharCode(ut)),ut&&Ne<Ct;);if(512&j.flags&&(j.check=Q(j.check,Ye,Ne,St)),Ct-=Ne,St+=Ne,ut)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(Ct===0)break e;for(Ne=0;ut=Ye[St+Ne++],j.head&&ut&&j.length<65536&&(j.head.comment+=String.fromCharCode(ut)),ut&&Ne<Ct;);if(512&j.flags&&(j.check=Q(j.check,Ye,Ne,St)),Ct-=Ne,St+=Ne,ut)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;Je<16;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(Ke!==(65535&j.check)){Ae.msg="header crc mismatch",j.mode=30;break}Je=Ke=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),Ae.adler=j.check=0,j.mode=12;break;case 10:for(;Je<32;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}Ae.adler=j.check=ne(Ke),Je=Ke=0,j.mode=11;case 11:if(j.havedict===0)return Ae.next_out=Kr,Ae.avail_out=Ir,Ae.next_in=St,Ae.avail_in=Ct,j.hold=Ke,j.bits=Je,2;Ae.adler=j.check=1,j.mode=12;case 12:if(tt===5||tt===6)break e;case 13:if(j.last){Ke>>>=7&Je,Je-=7&Je,j.mode=27;break}for(;Je<3;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}switch(j.last=1&Ke,Je-=1,3&(Ke>>>=1)){case 0:j.mode=14;break;case 1:if(qt(j),j.mode=20,tt!==6)break;Ke>>>=2,Je-=2;break e;case 2:j.mode=17;break;case 3:Ae.msg="invalid block type",j.mode=30}Ke>>>=2,Je-=2;break;case 14:for(Ke>>>=7&Je,Je-=7&Je;Je<32;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if((65535&Ke)!=(Ke>>>16^65535)){Ae.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&Ke,Je=Ke=0,j.mode=15,tt===6)break e;case 15:j.mode=16;case 16:if(Ne=j.length){if(Ct<Ne&&(Ne=Ct),Ir<Ne&&(Ne=Ir),Ne===0)break e;re.arraySet(en,Ye,St,Ne,Kr),Ct-=Ne,St+=Ne,Ir-=Ne,Kr+=Ne,j.length-=Ne;break}j.mode=12;break;case 17:for(;Je<14;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(j.nlen=257+(31&Ke),Ke>>>=5,Je-=5,j.ndist=1+(31&Ke),Ke>>>=5,Je-=5,j.ncode=4+(15&Ke),Ke>>>=4,Je-=4,286<j.nlen||30<j.ndist){Ae.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;Je<3;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}j.lens[Bo[j.have++]]=7&Ke,Ke>>>=3,Je-=3}for(;j.have<19;)j.lens[Bo[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,Hr={bits:j.lenbits},Yt=ke(0,j.lens,0,19,j.lencode,0,j.work,Hr),j.lenbits=Hr.bits,Yt){Ae.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;te=(tn=j.lencode[Ke&(1<<j.lenbits)-1])>>>16&255,gt=65535&tn,!((Ee=tn>>>24)<=Je);){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(gt<16)Ke>>>=Ee,Je-=Ee,j.lens[j.have++]=gt;else{if(gt===16){for(Sr=Ee+2;Je<Sr;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(Ke>>>=Ee,Je-=Ee,j.have===0){Ae.msg="invalid bit length repeat",j.mode=30;break}ut=j.lens[j.have-1],Ne=3+(3&Ke),Ke>>>=2,Je-=2}else if(gt===17){for(Sr=Ee+3;Je<Sr;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}Je-=Ee,ut=0,Ne=3+(7&(Ke>>>=Ee)),Ke>>>=3,Je-=3}else{for(Sr=Ee+7;Je<Sr;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}Je-=Ee,ut=0,Ne=11+(127&(Ke>>>=Ee)),Ke>>>=7,Je-=7}if(j.have+Ne>j.nlen+j.ndist){Ae.msg="invalid bit length repeat",j.mode=30;break}for(;Ne--;)j.lens[j.have++]=ut}}if(j.mode===30)break;if(j.lens[256]===0){Ae.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,Hr={bits:j.lenbits},Yt=ke(Ie,j.lens,0,j.nlen,j.lencode,0,j.work,Hr),j.lenbits=Hr.bits,Yt){Ae.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,Hr={bits:j.distbits},Yt=ke(q,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,Hr),j.distbits=Hr.bits,Yt){Ae.msg="invalid distances set",j.mode=30;break}if(j.mode=20,tt===6)break e;case 20:j.mode=21;case 21:if(6<=Ct&&258<=Ir){Ae.next_out=Kr,Ae.avail_out=Ir,Ae.next_in=St,Ae.avail_in=Ct,j.hold=Ke,j.bits=Je,pe(Ae,Ce),Kr=Ae.next_out,en=Ae.output,Ir=Ae.avail_out,St=Ae.next_in,Ye=Ae.input,Ct=Ae.avail_in,Ke=j.hold,Je=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;te=(tn=j.lencode[Ke&(1<<j.lenbits)-1])>>>16&255,gt=65535&tn,!((Ee=tn>>>24)<=Je);){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(te&&(240&te)==0){for(it=Ee,At=te,It=gt;te=(tn=j.lencode[It+((Ke&(1<<it+At)-1)>>it)])>>>16&255,gt=65535&tn,!(it+(Ee=tn>>>24)<=Je);){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}Ke>>>=it,Je-=it,j.back+=it}if(Ke>>>=Ee,Je-=Ee,j.back+=Ee,j.length=gt,te===0){j.mode=26;break}if(32&te){j.back=-1,j.mode=12;break}if(64&te){Ae.msg="invalid literal/length code",j.mode=30;break}j.extra=15&te,j.mode=22;case 22:if(j.extra){for(Sr=j.extra;Je<Sr;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}j.length+=Ke&(1<<j.extra)-1,Ke>>>=j.extra,Je-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;te=(tn=j.distcode[Ke&(1<<j.distbits)-1])>>>16&255,gt=65535&tn,!((Ee=tn>>>24)<=Je);){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if((240&te)==0){for(it=Ee,At=te,It=gt;te=(tn=j.distcode[It+((Ke&(1<<it+At)-1)>>it)])>>>16&255,gt=65535&tn,!(it+(Ee=tn>>>24)<=Je);){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}Ke>>>=it,Je-=it,j.back+=it}if(Ke>>>=Ee,Je-=Ee,j.back+=Ee,64&te){Ae.msg="invalid distance code",j.mode=30;break}j.offset=gt,j.extra=15&te,j.mode=24;case 24:if(j.extra){for(Sr=j.extra;Je<Sr;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}j.offset+=Ke&(1<<j.extra)-1,Ke>>>=j.extra,Je-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){Ae.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(Ir===0)break e;if(Ne=Ce-Ir,j.offset>Ne){if((Ne=j.offset-Ne)>j.whave&&j.sane){Ae.msg="invalid distance too far back",j.mode=30;break}B=Ne>j.wnext?(Ne-=j.wnext,j.wsize-Ne):j.wnext-Ne,Ne>j.length&&(Ne=j.length),He=j.window}else He=en,B=Kr-j.offset,Ne=j.length;for(Ir<Ne&&(Ne=Ir),Ir-=Ne,j.length-=Ne;en[Kr++]=He[B++],--Ne;);j.length===0&&(j.mode=21);break;case 26:if(Ir===0)break e;en[Kr++]=j.length,Ir--,j.mode=21;break;case 27:if(j.wrap){for(;Je<32;){if(Ct===0)break e;Ct--,Ke|=Ye[St++]<<Je,Je+=8}if(Ce-=Ir,Ae.total_out+=Ce,j.total+=Ce,Ce&&(Ae.adler=j.check=j.flags?Q(j.check,en,Ce,Kr-Ce):fe(j.check,en,Ce,Kr-Ce)),Ce=Ir,(j.flags?Ke:ne(Ke))!==j.check){Ae.msg="incorrect data check",j.mode=30;break}Je=Ke=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;Je<32;){if(Ct===0)break e;Ct--,Ke+=Ye[St++]<<Je,Je+=8}if(Ke!==(4294967295&j.total)){Ae.msg="incorrect length check",j.mode=30;break}Je=Ke=0}j.mode=29;case 29:Yt=1;break e;case 30:Yt=-3;break e;case 31:return-4;case 32:default:return G}return Ae.next_out=Kr,Ae.avail_out=Ir,Ae.next_in=St,Ae.avail_in=Ct,j.hold=Ke,j.bits=Je,(j.wsize||Ce!==Ae.avail_out&&j.mode<30&&(j.mode<27||tt!==4))&&jr(Ae,Ae.output,Ae.next_out,Ce-Ae.avail_out)?(j.mode=31,-4):(qi-=Ae.avail_in,Ce-=Ae.avail_out,Ae.total_in+=qi,Ae.total_out+=Ce,j.total+=Ce,j.wrap&&Ce&&(Ae.adler=j.check=j.flags?Q(j.check,en,Ce,Ae.next_out-Ce):fe(j.check,en,Ce,Ae.next_out-Ce)),Ae.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(qi==0&&Ce===0||tt===4)&&Yt===K&&(Yt=-5),Yt)},Me.inflateEnd=function(Ae){if(!Ae||!Ae.state)return G;var tt=Ae.state;return tt.window&&(tt.window=null),Ae.state=null,K},Me.inflateGetHeader=function(Ae,tt){var j;return Ae&&Ae.state?(2&(j=Ae.state).wrap)==0?G:((j.head=tt).done=!1,K):G},Me.inflateSetDictionary=function(Ae,tt){var j,Ye=tt.length;return Ae&&Ae.state?(j=Ae.state).wrap!==0&&j.mode!==11?G:j.mode===11&&fe(1,tt,Ye,0)!==j.check?-3:jr(Ae,tt,Ye,Ye)?(j.mode=31,-4):(j.havedict=1,K):G},Me.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(we,ve,Me){"use strict";var re=we("../utils/common"),fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Q=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ke=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ve.exports=function(Ie,q,K,G,se,be,J,ne){var ye,Be,Ue,Oe,bt,lt,Lt,et,qt,jr=ne.bits,Ae=0,tt=0,j=0,Ye=0,en=0,St=0,Kr=0,Ct=0,Ir=0,Ke=0,Je=null,qi=0,Ce=new re.Buf16(16),Ne=new re.Buf16(16),B=null,He=0;for(Ae=0;Ae<=15;Ae++)Ce[Ae]=0;for(tt=0;tt<G;tt++)Ce[q[K+tt]]++;for(en=jr,Ye=15;1<=Ye&&Ce[Ye]===0;Ye--);if(Ye<en&&(en=Ye),Ye===0)return se[be++]=20971520,se[be++]=20971520,ne.bits=1,0;for(j=1;j<Ye&&Ce[j]===0;j++);for(en<j&&(en=j),Ae=Ct=1;Ae<=15;Ae++)if(Ct<<=1,(Ct-=Ce[Ae])<0)return-1;if(0<Ct&&(Ie===0||Ye!==1))return-1;for(Ne[1]=0,Ae=1;Ae<15;Ae++)Ne[Ae+1]=Ne[Ae]+Ce[Ae];for(tt=0;tt<G;tt++)q[K+tt]!==0&&(J[Ne[q[K+tt]]++]=tt);if(lt=Ie===0?(Je=B=J,19):Ie===1?(Je=fe,qi-=257,B=Q,He-=257,256):(Je=pe,B=ke,-1),Ae=j,bt=be,Kr=tt=Ke=0,Ue=-1,Oe=(Ir=1<<(St=en))-1,Ie===1&&852<Ir||Ie===2&&592<Ir)return 1;for(;;){for(Lt=Ae-Kr,qt=J[tt]<lt?(et=0,J[tt]):J[tt]>lt?(et=B[He+J[tt]],Je[qi+J[tt]]):(et=96,0),ye=1<<Ae-Kr,j=Be=1<<St;se[bt+(Ke>>Kr)+(Be-=ye)]=Lt<<24|et<<16|qt|0,Be!==0;);for(ye=1<<Ae-1;Ke&ye;)ye>>=1;if(ye!==0?(Ke&=ye-1,Ke+=ye):Ke=0,tt++,--Ce[Ae]==0){if(Ae===Ye)break;Ae=q[K+J[tt]]}if(en<Ae&&(Ke&Oe)!==Ue){for(Kr===0&&(Kr=en),bt+=j,Ct=1<<(St=Ae-Kr);St+Kr<Ye&&!((Ct-=Ce[St+Kr])<=0);)St++,Ct<<=1;if(Ir+=1<<St,Ie===1&&852<Ir||Ie===2&&592<Ir)return 1;se[Ue=Ke&Oe]=en<<24|St<<16|bt-be|0}}return Ke!==0&&(se[bt+Ke]=Ae-Kr<<24|64<<16|0),ne.bits=en,0}},{"../utils/common":41}],51:[function(we,ve,Me){"use strict";ve.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(we,ve,Me){"use strict";var re=we("../utils/common");function fe(Ce){for(var Ne=Ce.length;0<=--Ne;)Ce[Ne]=0}var Q=15,pe=16,ke=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(576);fe(G);var se=new Array(60);fe(se);var be=new Array(512);fe(be);var J=new Array(256);fe(J);var ne=new Array(29);fe(ne);var ye,Be,Ue,Oe=new Array(30);function bt(Ce,Ne,B,He,Ee){this.static_tree=Ce,this.extra_bits=Ne,this.extra_base=B,this.elems=He,this.max_length=Ee,this.has_stree=Ce&&Ce.length}function lt(Ce,Ne){this.dyn_tree=Ce,this.max_code=0,this.stat_desc=Ne}function Lt(Ce){return Ce<256?be[Ce]:be[256+(Ce>>>7)]}function et(Ce,Ne){Ce.pending_buf[Ce.pending++]=255&Ne,Ce.pending_buf[Ce.pending++]=Ne>>>8&255}function qt(Ce,Ne,B){Ce.bi_valid>pe-B?(Ce.bi_buf|=Ne<<Ce.bi_valid&65535,et(Ce,Ce.bi_buf),Ce.bi_buf=Ne>>pe-Ce.bi_valid,Ce.bi_valid+=B-pe):(Ce.bi_buf|=Ne<<Ce.bi_valid&65535,Ce.bi_valid+=B)}function jr(Ce,Ne,B){qt(Ce,B[2*Ne],B[2*Ne+1])}function Ae(Ce,Ne){for(var B=0;B|=1&Ce,Ce>>>=1,B<<=1,0<--Ne;);return B>>>1}function tt(Ce,Ne,B){var He,Ee,te=new Array(Q+1),gt=0;for(He=1;He<=Q;He++)te[He]=gt=gt+B[He-1]<<1;for(Ee=0;Ee<=Ne;Ee++){var it=Ce[2*Ee+1];it!==0&&(Ce[2*Ee]=Ae(te[it]++,it))}}function j(Ce){var Ne;for(Ne=0;Ne<286;Ne++)Ce.dyn_ltree[2*Ne]=0;for(Ne=0;Ne<30;Ne++)Ce.dyn_dtree[2*Ne]=0;for(Ne=0;Ne<19;Ne++)Ce.bl_tree[2*Ne]=0;Ce.dyn_ltree[512]=1,Ce.opt_len=Ce.static_len=0,Ce.last_lit=Ce.matches=0}function Ye(Ce){8<Ce.bi_valid?et(Ce,Ce.bi_buf):0<Ce.bi_valid&&(Ce.pending_buf[Ce.pending++]=Ce.bi_buf),Ce.bi_buf=0,Ce.bi_valid=0}function en(Ce,Ne,B,He){var Ee=2*Ne,te=2*B;return Ce[Ee]<Ce[te]||Ce[Ee]===Ce[te]&&He[Ne]<=He[B]}function St(Ce,Ne,B){for(var He=Ce.heap[B],Ee=B<<1;Ee<=Ce.heap_len&&(Ee<Ce.heap_len&&en(Ne,Ce.heap[Ee+1],Ce.heap[Ee],Ce.depth)&&Ee++,!en(Ne,He,Ce.heap[Ee],Ce.depth));)Ce.heap[B]=Ce.heap[Ee],B=Ee,Ee<<=1;Ce.heap[B]=He}function Kr(Ce,Ne,B){var He,Ee,te,gt,it=0;if(Ce.last_lit!==0)for(;He=Ce.pending_buf[Ce.d_buf+2*it]<<8|Ce.pending_buf[Ce.d_buf+2*it+1],Ee=Ce.pending_buf[Ce.l_buf+it],it++,He===0?jr(Ce,Ee,Ne):(jr(Ce,(te=J[Ee])+256+1,Ne),(gt=ke[te])!==0&&qt(Ce,Ee-=ne[te],gt),jr(Ce,te=Lt(--He),B),(gt=Ie[te])!==0&&qt(Ce,He-=Oe[te],gt)),it<Ce.last_lit;);jr(Ce,256,Ne)}function Ct(Ce,Ne){var B,He,Ee,te=Ne.dyn_tree,gt=Ne.stat_desc.static_tree,it=Ne.stat_desc.has_stree,At=Ne.stat_desc.elems,It=-1;for(Ce.heap_len=0,Ce.heap_max=573,B=0;B<At;B++)te[2*B]!==0?(Ce.heap[++Ce.heap_len]=It=B,Ce.depth[B]=0):te[2*B+1]=0;for(;Ce.heap_len<2;)te[2*(Ee=Ce.heap[++Ce.heap_len]=It<2?++It:0)]=1,Ce.depth[Ee]=0,Ce.opt_len--,it&&(Ce.static_len-=gt[2*Ee+1]);for(Ne.max_code=It,B=Ce.heap_len>>1;1<=B;B--)St(Ce,te,B);for(Ee=At;B=Ce.heap[1],Ce.heap[1]=Ce.heap[Ce.heap_len--],St(Ce,te,1),He=Ce.heap[1],Ce.heap[--Ce.heap_max]=B,Ce.heap[--Ce.heap_max]=He,te[2*Ee]=te[2*B]+te[2*He],Ce.depth[Ee]=(Ce.depth[B]>=Ce.depth[He]?Ce.depth[B]:Ce.depth[He])+1,te[2*B+1]=te[2*He+1]=Ee,Ce.heap[1]=Ee++,St(Ce,te,1),2<=Ce.heap_len;);Ce.heap[--Ce.heap_max]=Ce.heap[1],function(ut,Yt){var Hr,Sr,tn,Tr,Bo,_S,id=Yt.dyn_tree,AS=Yt.max_code,HR=Yt.stat_desc.static_tree,bD=Yt.stat_desc.has_stree,Fb=Yt.stat_desc.extra_bits,yD=Yt.stat_desc.extra_base,Vh=Yt.stat_desc.max_length,ug=0;for(Tr=0;Tr<=Q;Tr++)ut.bl_count[Tr]=0;for(id[2*ut.heap[ut.heap_max]+1]=0,Hr=ut.heap_max+1;Hr<573;Hr++)Vh<(Tr=id[2*id[2*(Sr=ut.heap[Hr])+1]+1]+1)&&(Tr=Vh,ug++),id[2*Sr+1]=Tr,AS<Sr||(ut.bl_count[Tr]++,Bo=0,yD<=Sr&&(Bo=Fb[Sr-yD]),_S=id[2*Sr],ut.opt_len+=_S*(Tr+Bo),bD&&(ut.static_len+=_S*(HR[2*Sr+1]+Bo)));if(ug!==0){do{for(Tr=Vh-1;ut.bl_count[Tr]===0;)Tr--;ut.bl_count[Tr]--,ut.bl_count[Tr+1]+=2,ut.bl_count[Vh]--,ug-=2}while(0<ug);for(Tr=Vh;Tr!==0;Tr--)for(Sr=ut.bl_count[Tr];Sr!==0;)AS<(tn=ut.heap[--Hr])||(id[2*tn+1]!==Tr&&(ut.opt_len+=(Tr-id[2*tn+1])*id[2*tn],id[2*tn+1]=Tr),Sr--)}}(Ce,Ne),tt(te,It,Ce.bl_count)}function Ir(Ce,Ne,B){var He,Ee,te=-1,gt=Ne[1],it=0,At=7,It=4;for(gt===0&&(At=138,It=3),Ne[2*(B+1)+1]=65535,He=0;He<=B;He++)Ee=gt,gt=Ne[2*(He+1)+1],++it<At&&Ee===gt||(it<It?Ce.bl_tree[2*Ee]+=it:Ee!==0?(Ee!==te&&Ce.bl_tree[2*Ee]++,Ce.bl_tree[32]++):it<=10?Ce.bl_tree[34]++:Ce.bl_tree[36]++,te=Ee,It=(it=0)===gt?(At=138,3):Ee===gt?(At=6,3):(At=7,4))}function Ke(Ce,Ne,B){var He,Ee,te=-1,gt=Ne[1],it=0,At=7,It=4;for(gt===0&&(At=138,It=3),He=0;He<=B;He++)if(Ee=gt,gt=Ne[2*(He+1)+1],!(++it<At&&Ee===gt)){if(it<It)for(;jr(Ce,Ee,Ce.bl_tree),--it!=0;);else Ee!==0?(Ee!==te&&(jr(Ce,Ee,Ce.bl_tree),it--),jr(Ce,16,Ce.bl_tree),qt(Ce,it-3,2)):it<=10?(jr(Ce,17,Ce.bl_tree),qt(Ce,it-3,3)):(jr(Ce,18,Ce.bl_tree),qt(Ce,it-11,7));te=Ee,It=(it=0)===gt?(At=138,3):Ee===gt?(At=6,3):(At=7,4)}}fe(Oe);var Je=!1;function qi(Ce,Ne,B,He){var Ee,te,gt;qt(Ce,0+(He?1:0),3),te=Ne,gt=B,Ye(Ee=Ce),et(Ee,gt),et(Ee,~gt),re.arraySet(Ee.pending_buf,Ee.window,te,gt,Ee.pending),Ee.pending+=gt}Me._tr_init=function(Ce){Je||(function(){var Ne,B,He,Ee,te,gt=new Array(Q+1);for(Ee=He=0;Ee<28;Ee++)for(ne[Ee]=He,Ne=0;Ne<1<<ke[Ee];Ne++)J[He++]=Ee;for(J[He-1]=Ee,Ee=te=0;Ee<16;Ee++)for(Oe[Ee]=te,Ne=0;Ne<1<<Ie[Ee];Ne++)be[te++]=Ee;for(te>>=7;Ee<30;Ee++)for(Oe[Ee]=te<<7,Ne=0;Ne<1<<Ie[Ee]-7;Ne++)be[256+te++]=Ee;for(B=0;B<=Q;B++)gt[B]=0;for(Ne=0;Ne<=143;)G[2*Ne+1]=8,Ne++,gt[8]++;for(;Ne<=255;)G[2*Ne+1]=9,Ne++,gt[9]++;for(;Ne<=279;)G[2*Ne+1]=7,Ne++,gt[7]++;for(;Ne<=287;)G[2*Ne+1]=8,Ne++,gt[8]++;for(tt(G,287,gt),Ne=0;Ne<30;Ne++)se[2*Ne+1]=5,se[2*Ne]=Ae(Ne,5);ye=new bt(G,ke,257,286,Q),Be=new bt(se,Ie,0,30,Q),Ue=new bt(new Array(0),q,0,19,7)}(),Je=!0),Ce.l_desc=new lt(Ce.dyn_ltree,ye),Ce.d_desc=new lt(Ce.dyn_dtree,Be),Ce.bl_desc=new lt(Ce.bl_tree,Ue),Ce.bi_buf=0,Ce.bi_valid=0,j(Ce)},Me._tr_stored_block=qi,Me._tr_flush_block=function(Ce,Ne,B,He){var Ee,te,gt=0;0<Ce.level?(Ce.strm.data_type===2&&(Ce.strm.data_type=function(it){var At,It=4093624447;for(At=0;At<=31;At++,It>>>=1)if(1&It&&it.dyn_ltree[2*At]!==0)return 0;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return 1;for(At=32;At<256;At++)if(it.dyn_ltree[2*At]!==0)return 1;return 0}(Ce)),Ct(Ce,Ce.l_desc),Ct(Ce,Ce.d_desc),gt=function(it){var At;for(Ir(it,it.dyn_ltree,it.l_desc.max_code),Ir(it,it.dyn_dtree,it.d_desc.max_code),Ct(it,it.bl_desc),At=18;3<=At&&it.bl_tree[2*K[At]+1]===0;At--);return it.opt_len+=3*(At+1)+5+5+4,At}(Ce),Ee=Ce.opt_len+3+7>>>3,(te=Ce.static_len+3+7>>>3)<=Ee&&(Ee=te)):Ee=te=B+5,B+4<=Ee&&Ne!==-1?qi(Ce,Ne,B,He):Ce.strategy===4||te===Ee?(qt(Ce,2+(He?1:0),3),Kr(Ce,G,se)):(qt(Ce,4+(He?1:0),3),function(it,At,It,ut){var Yt;for(qt(it,At-257,5),qt(it,It-1,5),qt(it,ut-4,4),Yt=0;Yt<ut;Yt++)qt(it,it.bl_tree[2*K[Yt]+1],3);Ke(it,it.dyn_ltree,At-1),Ke(it,it.dyn_dtree,It-1)}(Ce,Ce.l_desc.max_code+1,Ce.d_desc.max_code+1,gt+1),Kr(Ce,Ce.dyn_ltree,Ce.dyn_dtree)),j(Ce),He&&Ye(Ce)},Me._tr_tally=function(Ce,Ne,B){return Ce.pending_buf[Ce.d_buf+2*Ce.last_lit]=Ne>>>8&255,Ce.pending_buf[Ce.d_buf+2*Ce.last_lit+1]=255&Ne,Ce.pending_buf[Ce.l_buf+Ce.last_lit]=255&B,Ce.last_lit++,Ne===0?Ce.dyn_ltree[2*B]++:(Ce.matches++,Ne--,Ce.dyn_ltree[2*(J[B]+256+1)]++,Ce.dyn_dtree[2*Lt(Ne)]++),Ce.last_lit===Ce.lit_bufsize-1},Me._tr_align=function(Ce){var Ne;qt(Ce,2,3),jr(Ce,256,G),(Ne=Ce).bi_valid===16?(et(Ne,Ne.bi_buf),Ne.bi_buf=0,Ne.bi_valid=0):8<=Ne.bi_valid&&(Ne.pending_buf[Ne.pending++]=255&Ne.bi_buf,Ne.bi_buf>>=8,Ne.bi_valid-=8)}},{"../utils/common":41}],53:[function(we,ve,Me){"use strict";ve.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(we,ve,Me){"use strict";ve.exports=typeof setImmediate=="function"?setImmediate:function(){var re=[].slice.apply(arguments);re.splice(1,0,0),setTimeout.apply(null,re)}},{}]},{},[10])(10)})}).call(this,Wt!==void 0?Wt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,nr!==void 0?nr:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,vt!==void 0?vt:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,Le!==void 0?Le:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,xe!==void 0?xe:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,H!==void 0?H:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,I!==void 0?I:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,ie!==void 0?ie:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,N!==void 0?N:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,F!==void 0?F:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,k!==void 0?k:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,C!==void 0?C:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,g!==void 0?g:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,p!==void 0?p:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,l!==void 0?l:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,o!==void 0?o:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})}).call(this,typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])(1)})});var yY=st(z_=>{"use strict";Object.defineProperty(z_,"__esModule",{value:!0});z_.bengali=void 0;var bY="[\\u{0980}-\\u{09FF}]",FCe="[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]",MCe="\\u{09CD}",NCe="".concat(bY,"(").concat(MCe).concat(bY,"|").concat(FCe,")*");z_.bengali=NCe});var SY=st(U_=>{"use strict";Object.defineProperty(U_,"__esModule",{value:!0});U_.devanagari=void 0;var CY="[\\u{0900}-\\u{097F}]",BCe="[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]",LCe="\\u{094D}",OCe="".concat(CY,"(").concat(LCe).concat(CY,"|").concat(BCe,")*");U_.devanagari=OCe});var wY=st(H_=>{"use strict";Object.defineProperty(H_,"__esModule",{value:!0});H_.gujarati=void 0;var xY="[\\u{0A80}-\\u{0AFF}]",zCe="[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]",UCe="\\u{0ACD}",HCe="".concat(xY,"(").concat(UCe).concat(xY,"|").concat(zCe,")*");H_.gujarati=HCe});var DY=st(G_=>{"use strict";Object.defineProperty(G_,"__esModule",{value:!0});G_.kannada=void 0;var TY="[\\u{0C80}-\\u{0CFF}]",GCe="[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]",VCe="\\u{0CCD}",$Ce="".concat(TY,"(").concat(VCe).concat(TY,"|").concat(GCe,")*");G_.kannada=$Ce});var PY=st(V_=>{"use strict";Object.defineProperty(V_,"__esModule",{value:!0});V_.khmer=void 0;var kY="[\\u{1780}-\\u{17FF}]",WCe="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]",jCe="\\u{17D2}",KCe="".concat(kY,"(").concat(jCe).concat(kY,"|").concat(WCe,")*");V_.khmer=KCe});var EY=st($_=>{"use strict";Object.defineProperty($_,"__esModule",{value:!0});$_.lao=void 0;var qCe="[\\u{0E80}-\\u{0EFF}]",YCe="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]",XCe="".concat(qCe).concat(YCe,"*");$_.lao=XCe});var AY=st(W_=>{"use strict";Object.defineProperty(W_,"__esModule",{value:!0});W_.malayalam=void 0;var _Y="[\\u{0D00}-\\u{0D7F}]",QCe="[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]",JCe="\\u{0D4D}",ZCe="".concat(_Y,"(").concat(JCe).concat(_Y,"|").concat(QCe,")*");W_.malayalam=ZCe});var RY=st(j_=>{"use strict";Object.defineProperty(j_,"__esModule",{value:!0});j_.myanmar=void 0;var IY="[\\u{1000}-\\u{109F}]",eSe=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"],tSe="[".concat(eSe.join(""),"]"),rSe="\\u{1039}",nSe="".concat(IY,"(").concat(rSe).concat(IY,"|").concat(tSe,")*");j_.myanmar=nSe});var FY=st(K_=>{"use strict";Object.defineProperty(K_,"__esModule",{value:!0});K_.tamil=void 0;var oSe="[\\u{0B80}-\\u{0BFF}]",iSe="[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]",sSe="".concat(oSe).concat(iSe,"*");K_.tamil=sSe});var NY=st(q_=>{"use strict";Object.defineProperty(q_,"__esModule",{value:!0});q_.telugu=void 0;var MY="[\\u{0C00}-\\u{0C7F}]",aSe="[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]",lSe="\\u{0C4D}",cSe="".concat(MY,"(").concat(lSe).concat(MY,"|").concat(aSe,")*");q_.telugu=cSe});var BY=st(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0});Y_.thai=void 0;var dSe="[\\u0E00-\\u0E7F]",uSe="[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]",pSe="".concat(dSe).concat(uSe,"*");Y_.thai=pSe});var LY=st(X_=>{"use strict";Object.defineProperty(X_,"__esModule",{value:!0});X_.tibetan=void 0;var hSe="[\\u{0F00}-\\u{0FFF}]",fSe="[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]",mSe="".concat(hSe).concat(fSe,"*");X_.tibetan=mSe});var zY=st(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.emojiVariation=im.keyCap=im.countryFlag=void 0;var gSe="[\\u{1F1E6}-\\u{1F1FF}]{2}";im.countryFlag=gSe;var vSe="[0-9#\\*][\\u{FE0F}]?\\u{20E3}";im.keyCap=vSe;var bSe=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"],OY="(".concat(bSe.join("|"),")"),ySe="\\u{200D}",CSe="[\\u{FE0E}\\u{FE0F}]",SSe="[\\u{1F3FB}-\\u{1F3FF}]",xSe="".concat(OY,"(").concat(ySe).concat(OY,"|").concat(SSe,"|").concat(CSe,")*");im.emojiVariation=xSe});var HY=st((gHe,UY)=>{"use strict";var wSe=yY(),TSe=SY(),DSe=wY(),kSe=DY(),PSe=PY(),ESe=EY(),_Se=AY(),ASe=RY(),ISe=FY(),RSe=NY(),FSe=BY(),MSe=LY(),E3=zY(),NSe=[E3.countryFlag,E3.keyCap,E3.emojiVariation,wSe.bengali,TSe.devanagari,DSe.gujarati,kSe.kannada,PSe.khmer,ESe.lao,_Se.malayalam,ASe.myanmar,ISe.tamil,RSe.telugu,FSe.thai,MSe.tibetan,"."],BSe=new RegExp("(".concat(NSe.join("|"),")"),"gu");function LSe(t){return t.match(BSe)||[]}UY.exports={splitGraphemes:LSe}});var $Y=st(VY=>{function zSe(t){for(var e=new String(t).toString(),r=e.length,o=0,i=[];o<r;){var s=e.charCodeAt(o);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=3583)i.push(65533);else if(55296<=s&&s<=56319){if(o===r-1)i.push(65533);else if(o<r-1){var a=e.charCodeAt(o+1);if(56320<=a&&a<=57343){var l=s&1023,c=a&1023;i.push(65536+1024*l+c),o=o+1}else(a<56320||a>57343)&&i.push(65533)}}o=o+1}return i}String.fromCodePoint||function(){var t=function(){try{var i={},s=Object.defineProperty,a=s(i,i,i)&&s}catch(l){}return a}(),e=String.fromCharCode,r=Math.floor,o=function(){var i=16384,s=[],a,l,c=-1,d=arguments.length;if(!d)return"";for(var u="";++c<d;){var p=Number(arguments[c]);if(!isFinite(p)||p<0||p>1114111||r(p)!=p)throw RangeError("Invalid code point: "+p);p<=65535?s.push(p):(p-=65536,a=(p>>10)+55296,l=p%1024+56320,s.push(a,l)),(c+1==d||s.length>i)&&(u+=e.apply(null,s),s.length=0)}return u};t?t(String,"fromCodePoint",{value:o,configurable:!0,writable:!0}):String.fromCodePoint=o}();VY.obtainUnicode=zSe});var QY=st(U3=>{"use strict";U3.__esModule=!0;U3.default=new Uint8Array([0,14,8,0,0,0,0,0,0,2,26,160,229,85,123,52,155,89,191,62,223,76,47,51,83,151,94,166,85,37,50,180,40,90,169,170,106,16,249,74,141,26,138,150,22,173,72,85,21,37,65,67,93,34,73,59,84,181,110,167,40,53,69,234,78,221,239,151,144,124,69,27,21,196,61,42,33,82,247,75,80,18,137,92,63,109,231,172,179,230,59,231,172,175,255,159,223,218,235,253,173,189,222,223,222,239,243,252,158,103,239,151,61,14,233,27,235,4,144,3,181,176,77,104,63,60,32,226,147,58,99,171,10,168,110,247,49,59,239,75,220,214,144,85,255,18,249,119,24,246,87,182,99,224,81,146,162,97,74,74,208,150,54,85,123,132,109,85,105,182,95,103,82,218,29,177,107,71,12,243,46,60,207,162,45,84,28,57,229,87,249,86,110,24,8,32,155,203,6,159,233,187,176,7,17,212,103,33,143,145,57,213,241,131,135,205,164,199,83,197,89,231,155,79,14,142,140,222,140,5,108,6,172,42,207,201,29,116,100,101,71,27,29,241,206,121,116,214,104,62,231,177,233,174,195,183,162,244,52,214,244,222,202,160,78,84,118,252,228,251,121,59,116,99,69,167,165,69,241,46,202,121,72,192,13,115,128,236,153,126,51,37,64,80,191,57,240,123,25,189,182,195,7,248,47,110,69,131,15,57,223,122,100,112,118,244,214,99,8,131,54,157,243,187,182,201,144,189,229,247,151,106,251,126,221,13,227,244,145,39,185,14,233,143,25,9,167,174,81,14,32,49,54,122,237,202,123,78,12,111,148,208,236,62,3,129,117,152,182,97,54,166,229,14,230,223,237,52,151,229,198,236,250,195,123,166,40,62,97,224,43,236,139,138,30,223,1,29,122,100,80,158,15,213,175,57,91,126,129,243,86,252,164,249,252,206,171,111,255,74,17,27,126,55,89,90,119,148,103,121,88,243,197,113,236,46,135,238,83,228,239,172,75,43,223,237,186,177,92,249,88,152,122,47,251,47,160,242,183,169,234,69,31,214,242,176,57,99,90,208,245,23,178,171,199,53,181,139,218,254,123,243,75,197,95,218,114,219,59,206,234,55,211,130,125,250,221,207,119,166,58,187,199,247,16,10,177,53,24,47,228,54,99,104,141,238,159,43,228,188,115,242,107,251,247,153,101,88,56,45,252,168,26,181,215,236,135,103,102,192,200,253,71,110,69,125,218,247,103,163,186,246,151,28,253,83,0,157,8,149,95,119,94,13,45,202,78,216,38,157,29,47,215,60,159,93,161,120,51,230,242,239,255,83,129,85,45,224,95,64,253,159,162,226,52,128,223,166,41,78,245,27,11,129,157,150,255,2,50,241,111,209,135,221,227,126,140,248,170,100,85,219,17,37,191,170,118,149,21,208,116,238,191,10,255,31,230,113,167,222,237,48,45,120,225,158,240,165,105,178,245,163,238,242,188,138,111,45,244,255,198,194,134,223,76,191,177,59,234,223,72,154,244,44,241,167,215,107,246,255,222,237,137,255,59,68,9,95,28,65,56,153,156,120,255,195,4,86,181,171,91,250,162,231,103,253,238,170,115,253,251,117,74,13,190,118,11,226,153,80,244,234,39,121,131,161,254,191,31,56,89,187,202,94,197,17,49,216,245,213,221,228,173,167,254,161,28,231,119,78,17,237,83,76,151,47,9,250,117,118,148,194,223,126,37,210,252,154,20,190,166,182,211,68,108,88,243,59,230,85,218,98,228,210,167,55,6,188,73,225,223,96,193,227,38,141,26,43,197,190,239,137,205,43,74,174,131,227,12,192,200,85,154,179,84,234,60,77,44,44,143,23,44,10,242,11,203,79,10,22,141,220,2,196,101,37,166,180,29,248,75,38,92,197,118,39,252,78,19,131,66,222,48,131,225,128,242,131,247,60,135,24,204,113,135,25,195,14,40,123,120,143,58,196,64,147,51,204,232,117,64,157,129,247,212,153,24,120,173,15,51,200,14,168,195,240,30,139,237,53,107,195,140,127,56,144,67,225,128,18,72,112,55,247,42,80,86,0,87,48,61,123,30,39,234,56,45,178,35,47,93,254,65,181,124,68,83,136,82,166,27,241,222,255,62,245,171,188,120,71,164,16,74,100,174,73,222,255,48,117,51,225,192,62,229,200,207,122,90,196,169,95,123,198,131,49,241,150,1,126,140,119,163,238,184,7,74,28,85,71,251,225,29,228,177,35,139,222,25,231,55,162,36,140,91,153,103,141,238,186,245,253,151,26,6,94,127,158,41,157,30,193,224,32,127,236,179,34,212,93,158,31,13,14,58,30,112,91,250,20,42,27,204,141,136,164,107,92,191,219,212,131,216,13,75,46,221,209,74,181,19,28,142,169,81,188,227,93,227,16,111,58,231,241,217,197,7,186,79,41,152,109,67,236,252,142,66,101,38,150,232,172,84,84,189,57,100,188,124,242,30,240,184,130,182,60,9,42,113,2,246,26,210,246,226,166,33,34,55,89,174,126,189,213,212,27,215,109,201,250,251,131,250,9,191,108,27,205,230,84,243,127,6,234,97,47,158,213,27,221,37,85,253,240,89,232,127,236,47,233,68,151,55,145,172,124,182,93,183,187,81,101,245,171,155,32,57,15,53,174,255,182,109,167,163,225,243,248,155,147,31,252,105,40,197,240,237,79,127,190,40,254,221,163,210,103,219,166,154,235,16,33,9,254,75,245,22,85,126,69,138,9,200,200,213,230,27,155,106,101,189,49,42,144,60,74,11,141,54,108,108,215,9,134,134,158,224,11,29,166,193,79,87,69,46,227,146,7,180,104,172,227,196,133,150,161,212,216,217,34,4,127,80,81,159,43,122,117,18,86,39,122,243,140,4,50,212,69,218,72,142,178,62,169,153,56,177,247,198,109,17,98,94,225,38,116,88,226,0,224,229,64,34,111,33,160,117,173,110,181,46,56,55,203,135,146,224,176,28,74,0,241,197,148,44,208,54,26,215,156,0,211,125,153,250,81,148,126,154,50,58,177,104,222,104,53,177,20,45,55,247,199,28,44,119,78,179,60,121,58,229,116,198,216,138,192,203,93,181,3,161,115,11,122,52,170,209,245,13,184,237,102,185,125,32,17,175,47,131,39,160,146,168,170,169,176,183,91,68,184,112,47,74,154,223,12,185,47,225,20,238,215,122,45,223,242,180,175,34,55,175,120,195,59,147,24,212,139,19,171,151,168,9,178,23,184,37,78,207,132,225,233,126,180,88,190,238,242,160,6,74,107,112,110,202,77,137,248,174,86,250,115,83,207,89,225,36,56,81,81,240,201,46,37,23,198,60,87,8,151,158,104,231,191,175,177,229,4,255,238,81,23,63,229,231,218,100,67,241,175,158,80,143,127,107,125,50,228,186,5,6,200,202,240,163,177,192,130,87,196,140,58,226,122,17,117,141,123,112,38,67,232,137,137,24,67,150,168,93,32,59,169,176,129,24,170,185,135,11,110,217,89,41,35,220,85,14,138,127,215,26,194,231,103,162,34,240,168,61,108,120,148,185,120,210,57,189,186,155,242,113,83,223,165,161,253,254,141,131,227,18,151,165,227,99,19,97,207,65,20,190,221,17,90,97,55,56,79,28,59,14,250,185,95,162,65,71,12,236,246,107,232,7,143,65,43,166,254,94,11,25,84,150,34,34,116,229,73,118,126,235,97,83,215,201,164,21,87,15,40,34,108,160,94,90,133,189,125,90,23,153,45,70,44,75,7,107,173,83,55,105,13,151,19,164,179,83,108,71,13,46,162,90,74,29,147,144,5,232,95,22,80,217,166,186,200,98,241,165,105,48,252,34,33,241,34,65,106,55,8,10,78,52,52,99,174,16,226,86,121,26,22,198,143,230,184,200,38,73,172,55,165,118,234,88,185,44,211,55,39,17,146,200,168,40,154,73,211,203,42,225,114,124,47,245,7,42,106,174,110,180,8,120,225,109,244,73,106,60,67,69,199,41,29,32,148,241,120,125,107,45,212,85,2,158,77,176,160,90,183,139,47,95,1,188,220,140,159,31,189,40,224,41,83,159,159,94,17,14,172,144,184,136,26,24,150,110,179,4,242,193,208,133,73,175,61,73,169,12,127,167,222,251,210,154,64,198,16,148,172,98,36,23,51,184,244,161,163,140,38,6,55,64,249,168,58,65,67,171,216,103,105,113,180,165,231,80,50,234,72,97,6,222,84,93,218,231,197,206,217,24,204,66,191,63,122,3,138,11,161,204,97,219,234,113,251,92,228,200,182,156,8,106,241,156,252,211,69,40,43,44,170,82,180,90,71,230,154,74,90,110,207,128,194,153,183,8,50,180,162,206,141,177,130,57,2,211,155,226,142,163,10,154,214,199,110,183,218,218,143,80,153,22,70,67,210,54,218,40,210,233,37,70,171,72,126,80,146,124,117,98,35,177,116,14,75,233,222,108,124,143,238,158,105,18,23,174,72,115,240,47,181,123,125,240,249,235,119,9,121,190,10,105,67,119,88,205,97,112,146,118,108,203,172,97,218,89,102,47,26,94,128,95,26,200,188,39,138,73,229,93,17,226,23,136,115,206,184,1,242,52,56,193,210,42,113,161,194,16,12,114,39,0,158,26,69,207,5,150,18,174,177,154,226,243,48,102,243,77,245,162,180,23,130,65,56,175,102,67,200,60,18,49,27,33,5,112,189,244,182,15,193,174,9,139,29,171,10,146,89,180,43,125,103,83,69,66,76,170,106,103,88,246,177,225,158,196,215,126,200,233,186,199,110,248,233,62,87,205,102,145,117,119,179,207,236,112,127,48,241,220,29,82,147,50,18,206,225,253,194,101,198,156,113,145,14,137,45,131,164,168,144,7,146,151,12,159,142,178,151,51,226,164,209,9,28,96,172,161,16,34,5,36,40,180,202,43,11,36,119,29,131,90,141,219,131,115,196,160,30,97,218,112,54,226,137,112,124,164,145,249,4,122,76,11,196,14,47,244,115,56,84,79,159,81,102,99,181,48,103,138,25,225,31,184,228,143,89,242,254,92,169,161,170,150,102,57,84,125,152,149,77,12,242,142,75,143,75,171,229,38,215,70,44,7,38,243,12,203,94,154,83,194,56,145,45,19,204,218,94,27,26,168,75,61,110,120,18,36,104,101,57,52,204,148,37,229,203,212,47,229,196,77,220,245,75,43,188,232,50,155,110,181,254,226,134,235,107,67,245,227,237,90,158,9,213,48,149,228,211,42,73,78,35,197,158,167,216,123,124,38,52,145,91,67,180,133,138,158,230,214,2,246,205,102,219,17,70,163,152,151,205,54,189,230,207,18,70,81,73,151,58,193,115,159,62,218,79,180,222,71,35,173,196,80,87,236,203,181,63,76,186,252,54,66,51,105,141,239,199,128,54,243,30,250,229,118,76,205,22,83,164,201,60,213,130,12,187,2,121,251,252,232,10,230,99,215,1,167,104,115,155,197,174,107,164,166,99,225,104,83,235,189,38,105,28,52,227,13,30,221,198,86,239,134,116,105,151,182,159,78,97,141,150,177,155,171,171,122,124,252,17,254,78,233,139,181,39,102,170,96,9,106,176,37,236,229,144,121,163,82,73,230,93,241,145,53,107,242,178,80,211,211,75,176,26,145,68,52,246,32,136,206,62,103,9,107,172,80,213,30,114,24,255,99,2,200,246,223,22,3,77,236,221,202,161,188,97,102,123,188,144,72,88,174,122,43,232,131,129,193,226,154,36,14,76,134,172,53,43,154,213,243,129,198,194,140,48,66,157,215,152,241,78,95,183,11,43,198,9,31,148,201,28,46,72,141,151,187,4,72,62,131,77,114,83,226,133,242,97,106,173,166,42,67,98,143,6,11,99,167,222,170,136,100,182,233,38,35,114,131,188,234,77,236,139,66,168,113,225,54,226,165,196,199,193,0,67,185,46,53,182,68,168,122,148,78,71,119,87,109,0,234,41,105,207,217,224,87,108,54,200,204,133,124,255,186,15,9,26,102,213,37,48,62,84,224,73,93,218,216,200,151,8,159,159,142,17,234,10,242,69,132,88,95,176,116,111,25,181,145,202,74,171,150,14,208,213,202,17,79,145,21,106,130,226,133,144,185,10,11,62,58,133,197,53,73,70,61,160,157,146,147,231,102,171,73,32,150,169,56,146,162,147,212,37,125,36,49,11,62,50,181,90,197,134,144,69,197,243,184,61,63,223,30,229,247,244,152,139,169,155,252,58,189,205,228,9,234,180,225,126,91,128,148,37,112,193,81,142,81,86,153,41,62,146,203,23,8,5,98,145,247,128,148,203,179,165,75,194,73,213,226,27,231,92,232,170,200,136,188,113,133,177,21,184,167,251,189,110,202,152,52,8,247,150,217,123,113,253,152,221,255,239,177,122,125,157,152,199,241,125,200,41,101,150,63,32,94,146,214,46,151,121,250,255,116,136,230,133,107,219,29,236,251,241,210,83,90,214,141,126,110,72,153,235,220,2,136,45,177,245,66,27,235,246,232,4,43,141,48,31,199,97,29,17,11,175,133,15,211,158,230,170,224,66,94,137,109,123,100,105,137,244,194,71,77,133,19,139,171,40,111,233,194,175,200,200,245,22,251,54,163,115,142,42,131,24,78,230,198,16,210,223,99,145,122,31,215,124,193,125,92,156,131,108,191,63,176,100,84,46,223,56,86,86,92,9,191,0,68,167,175,67,170,239,217,158,64,95,222,114,31,111,30,19,43,188,206,84,145,249,176,98,87,248,131,48,146,125,111,84,25,247,240,102,233,78,15,91,38,115,28,76,230,249,23,160,162,230,3,167,244,87,50,233,12,220,187,225,75,234,102,9,39,231,246,101,146,70,117,173,85,170,187,153,208,148,87,34,218,124,95,70,147,140,135,9,131,55,90,94,88,90,238,174,228,87,135,155,172,203,46,157,251,17,201,22,189,169,139,171,200,17,192,210,23,53,41,91,10,116,79,168,35,73,99,46,100,128,200,204,222,242,85,166,115,159,229,67,95,44,151,36,213,11,251,192,13,55,62,72,211,57,251,232,51,181,48,75,207,137,180,105,85,10,113,248,14,16,76,110,41,90,38,39,181,208,13,155,179,136,192,227,27,162,79,246,216,17,236,149,217,77,234,61,68,103,173,91,245,230,247,244,224,60,154,83,128,112,2,60,225,175,155,45,166,14,111,95,151,79,86,120,201,189,177,5,0,92,253,210,187,107,128,165,224,176,37,84,249,137,96,151,14,9,156,185,59,5,129,79,77,155,175,207,186,194,115,73,176,208,32,199,229,232,131,88,252,224,4,189,148,77,231,128,82,73,117,2,148,206,117,138,110,150,159,213,97,85,169,138,38,108,206,104,82,68,174,2,92,179,71,173,21,158,52,44,129,119,16,249,35,21,56,198,152,8,108,119,94,248,54,115,176,37,111,19,116,157,67,141,175,132,233,102,186,21,84,182,216,118,163,212,48,192,227,190,4,122,202,12,63,153,219,178,144,15,36,181,137,242,182,28,63,80,240,10,201,97,158,127,160,76,89,190,177,47,112,99,229,58,74,136,0,107,219,98,194,154,49,185,161,94,170,109,142,43,235,168,205,30,146,126,34,194,56,252,247,232,184,131,151,53,235,233,69,157,236,26,88,234,105,107,52,3,100,76,231,166,123,145,32,158,112,36,65,20,198,163,212,250,137,140,91,80,167,198,37,194,61,7,235,155,216,247,50,80,232,41,193,118,206,127,118,199,21,107,114,128,62,197,97,180,97,111,235,228,206,47,59,116,29,9,121,121,127,188,26,65,83,63,119,86,218,153,139,176,11,236,45,85,163,4,197,250,209,166,202,234,240,236,48,92,146,215,62,80,198,52,19,93,9,195,133,17,162,55,252,53,214,141,164,222,132,214,174,62,59,63,184,97,227,237,48,188,188,20,244,79])});var lX=st(f1=>{"use strict";f1.__esModule=!0;var H3=0,JY=-3,H0=function(){function t(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}return t}();f1.Tree=H0;var ZY=function(){function t(e,r){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new H0,this.dtree=new H0}return t}();f1.Data=ZY;var eX=new H0,tX=new H0,G3=new Uint8Array(30),V3=new Uint16Array(30),rX=new Uint8Array(30),nX=new Uint16Array(30),VSe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oX=new H0,Nu=new Uint8Array(288+32);function iX(t,e,r,o){var i,s;for(i=0;i<r;++i)t[i]=0;for(i=0;i<30-r;++i)t[i+r]=i/r|0;for(s=o,i=0;i<30;++i)e[i]=s,s+=1<<t[i]}function $Se(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[24+144+r]=280+r;for(r=0;r<112;++r)t.trans[24+144+8+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}var sX=new Uint16Array(16);function $3(t,e,r,o){var i,s;for(i=0;i<16;++i)t.table[i]=0;for(i=0;i<o;++i)t.table[e[r+i]]++;for(t.table[0]=0,s=0,i=0;i<16;++i)sX[i]=s,s+=t.table[i];for(i=0;i<o;++i)e[r+i]&&(t.trans[sX[e[r+i]]++]=i)}function WSe(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=t.tag&1;return t.tag>>>=1,e}function Bu(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var o=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,o+r}function W3(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,o=0,i=0,s=t.tag;do o=2*o+(s&1),s>>>=1,++i,r+=e.table[i],o-=e.table[i];while(o>=0);return t.tag=s,t.bitcount-=i,e.trans[r+o]}function jSe(t,e,r){var o,i,s,a,l,c;for(o=Bu(t,5,257),i=Bu(t,5,1),s=Bu(t,4,4),a=0;a<19;++a)Nu[a]=0;for(a=0;a<s;++a){var d=Bu(t,3,0);Nu[VSe[a]]=d}for($3(oX,Nu,0,19),l=0;l<o+i;){var u=W3(t,oX);switch(u){case 16:var p=Nu[l-1];for(c=Bu(t,2,3);c;--c)Nu[l++]=p;break;case 17:for(c=Bu(t,3,3);c;--c)Nu[l++]=0;break;case 18:for(c=Bu(t,7,11);c;--c)Nu[l++]=0;break;default:Nu[l++]=u;break}}$3(e,Nu,0,o),$3(r,Nu,o,i)}function aX(t,e,r){for(;;){var o=W3(t,e);if(o===256)return H3;if(o<256)t.dest[t.destLen++]=o;else{var i=void 0,s=void 0,a=void 0,l=void 0;for(o-=257,i=Bu(t,G3[o],V3[o]),s=W3(t,r),a=t.destLen-Bu(t,rX[s],nX[s]),l=a;l<a+i;++l)t.dest[t.destLen++]=t.dest[l]}}}function KSe(t){for(var e,r,o;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],r=t.source[t.sourceIndex+3],r=256*r+t.source[t.sourceIndex+2],e!==(~r&65535))return JY;for(t.sourceIndex+=4,o=e;o;--o)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,H3}function qSe(t,e){var r=new ZY(t,e),o,i,s;do{switch(o=WSe(r),i=Bu(r,2,0),i){case 0:s=KSe(r);break;case 1:s=aX(r,eX,tX);break;case 2:jSe(r,r.ltree,r.dtree),s=aX(r,r.ltree,r.dtree);break;default:s=JY}if(s!==H3)throw new Error("Data error")}while(!o);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}f1.default=qSe;$Se(eX,tX);iX(G3,V3,4,3);iX(rX,nX,2,1);G3[28]=0;V3[28]=258});var uX=st(q3=>{"use strict";q3.__esModule=!0;var cX=lX(),j3=6+5,Iv=5,YSe=j3-Iv,XSe=65536>>j3,QSe=1<<YSe,JSe=QSe-1,sA=2,ZSe=1<<Iv,K3=ZSe-1,dX=65536>>Iv,exe=1024>>Iv,txe=dX+exe,rxe=txe,nxe=2048>>6,oxe=rxe+nxe,ixe=1<<sA,sxe=function(){function t(e){var r=new DataView(e.buffer);this.highStart=r.getUint32(0),this.errorValue=r.getUint32(4);var o=r.getUint32(8);e=e.subarray(12),e=cX.default(e,new Uint8Array(o)),e=cX.default(e,new Uint8Array(o)),this.data=new Uint32Array(e.buffer)}return t.prototype.get=function(e){var r;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(r=(this.data[e>>Iv]<<sA)+(e&K3),this.data[r]):e<=65535?(r=(this.data[dX+(e-55296>>Iv)]<<sA)+(e&K3),this.data[r]):e<this.highStart?(r=this.data[oxe-XSe+(e>>j3)],r=this.data[r+(e>>Iv&JSe)],r=(r<<sA)+(e&K3),this.data[r]):this.data[this.data.length-ixe]},t}();q3.default=sxe});var pX=st(ln=>{"use strict";ln.__esModule=!0;ln.OP=0;ln.CL=1;ln.CP=2;ln.QU=3;ln.GL=4;ln.NS=5;ln.EX=6;ln.SY=7;ln.IS=8;ln.PR=9;ln.PO=10;ln.NU=11;ln.AL=12;ln.HL=13;ln.ID=14;ln.IN=15;ln.HY=16;ln.BA=17;ln.BB=18;ln.B2=19;ln.ZW=20;ln.CM=21;ln.WJ=22;ln.H2=23;ln.H3=24;ln.JL=25;ln.JV=26;ln.JT=27;ln.RI=28;ln.AI=29;ln.BK=30;ln.CB=31;ln.CJ=32;ln.CR=33;ln.LF=34;ln.NL=35;ln.SA=36;ln.SG=37;ln.SP=38;ln.XX=39});var hX=st(D=>{"use strict";D.__esModule=!0;D.DI_BRK=0;D.IN_BRK=1;D.CI_BRK=2;D.CP_BRK=3;D.PR_BRK=4;D.pairTable=[[D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.CP_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.PR_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK],[D.IN_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.DI_BRK],[D.DI_BRK,D.PR_BRK,D.PR_BRK,D.IN_BRK,D.IN_BRK,D.IN_BRK,D.PR_BRK,D.PR_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK,D.IN_BRK,D.DI_BRK,D.DI_BRK,D.PR_BRK,D.CI_BRK,D.PR_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.DI_BRK,D.IN_BRK]]});var gX=st(aA=>{"use strict";aA.__esModule=!0;var axe=QY(),lxe=uX(),Gn=pX(),m1=hX(),cxe=new lxe.default(axe.default);function fX(t){switch(t){case Gn.AI:return Gn.AL;case Gn.SA:case Gn.SG:case Gn.XX:return Gn.AL;case Gn.CJ:return Gn.NS;default:return t}}function mX(t){switch(t){case Gn.LF:case Gn.NL:return Gn.BK;case Gn.CB:return Gn.BA;case Gn.SP:return Gn.WJ;default:return t}}var g1=function(){function t(e,r,o){o===void 0&&(o=!1),this.position=e,this.spacePos=r,this.required=o}return t}();aA.Break=g1;var dxe=function(){function t(e){this.node=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null}return t.prototype.nextCodePoint=function(){var e=this.node.charCodeAt(this.pos++),r=this.node.charCodeAt(this.pos);return 55296<=e&&e<=56319&&56320<=r&&r<=57343?(this.pos++,(e-55296)*1024+(r-56320)+65536):e},t.prototype.nextCharClass=function(e){return e===void 0&&(e=null),e==null&&(e=!1),fX(cxe.get(this.nextCodePoint()))},t.prototype.nextBreak=function(){var e=null,r=null,o=!1;for(this.curClass===null&&(this.curClass=mX(this.nextCharClass()));this.pos<this.node.length;){if(this.lastPos=this.pos,r=this.nextClass,this.nextClass=this.nextCharClass(),this.curClass===Gn.BK||this.curClass===Gn.CR&&this.nextClass!==Gn.LF)return this.curClass=mX(fX(this.nextClass)),new g1(this.lastPos,this.lastPos,!0);var i=null;switch(this.nextClass){case Gn.SP:i=this.curClass;break;case Gn.BK:case Gn.LF:case Gn.NL:i=Gn.BK;break;case Gn.CR:i=Gn.CR;break;case Gn.CB:i=Gn.BA;break;default:i=null;break}if(this.nextClass===Gn.SP&&r!==Gn.SP&&(e=this.lastPos),i!==null){if(this.curClass=i,this.nextClass===Gn.CB)return new g1(this.lastPos,e!==null?e:this.lastPos);continue}switch(m1.pairTable[this.curClass][this.nextClass]){case m1.DI_BRK:o=!0;break;case m1.IN_BRK:o=r===Gn.SP;break;case m1.CI_BRK:if(o=r===Gn.SP,!o)continue;break;case m1.CP_BRK:if(r!==Gn.SP)continue;break;default:break}if(!o&&this.nextClass!==Gn.SP&&(e=null),this.curClass=this.nextClass,o)return new g1(this.lastPos,e!==null?e:this.lastPos)}if(this.pos>=this.node.length)return this.lastPos<this.node.length?(this.lastPos=this.node.length,new g1(this.node.length,e!==null?e:this.node.length)):null},t}();aA.LineBreaker=dxe});var bX=st(lA=>{"use strict";lA.__esModule=!0;var vX=gX();lA.Break=vX.Break;lA.LineBreaker=vX.LineBreaker});var CX=st((ZHe,yX)=>{yX.exports=()=>/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?|\u200D(?:\uD83D\uDC8B\u200D)?)\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDEF1\uD83C\uDFFF\u200D\uD83E\uDEF2)(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?|\u200D(?:\uD83D\uDC8B\u200D)?)\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDEF1\uD83C\uDFFE\u200D\uD83E\uDEF2)(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?|\u200D(?:\uD83D\uDC8B\u200D)?)\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDEF1\uD83C\uDFFD\u200D\uD83E\uDEF2)(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?|\u200D(?:\uD83D\uDC8B\u200D)?)\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDEF1\uD83C\uDFFC\u200D\uD83E\uDEF2)(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?|\u200D(?:\uD83D\uDC8B\u200D)?)\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDEF1\uD83C\uDFFB\u200D\uD83E\uDEF2)(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|[\u2695\u2696\u2708]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])))|\u200D(?:\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?|\u200D(?:\uD83D\uDC8B\u200D)?)\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\u200D[\u2695\u2696\u2708])?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764(?:\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F?\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F?\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83D\uDC41\uFE0F?\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F?\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F?\u200D\u26A7|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDEF1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764(?:\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\u200D(?:\uD83D\uDD25|\uD83E\uDE79))|\uD83D\uDC41\uFE0F?|\uD83C\uDFF3\uFE0F?|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F?\u20E3|\uD83E\uDD3C(?:\uD83C[\uDFFB-\uDFFF])|\u2764\uFE0F?|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD3C\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDDDE\uDDDF]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B50]|\uD83C[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]/g});var PJ=st((WXe,kJ)=>{function ZA(){var t={"[\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341\u767E\u5343\u4E07\u5104\u5146]":"M","[\u4E00-\u9FA0\u3005\u3006\u30F5\u30F6]":"H","[\u3041-\u3093]":"I","[\u30A1-\u30F4\u30FC\uFF71-\uFF9D\uFF9E\uFF70]":"K","[a-zA-Z\uFF41-\uFF5A\uFF21-\uFF3A]":"A","[0-9\uFF10-\uFF19]":"N"};this.chartype_=[];for(var e in t){var r=new RegExp;r.compile(e),this.chartype_.push([r,t[e]])}return this.BIAS__=-332,this.BC1__={HH:6,II:2461,KH:406,OH:-1378},this.BC2__={AA:-3267,AI:2744,AN:-878,HH:-4070,HM:-1711,HN:4012,HO:3761,IA:1327,IH:-1184,II:-1332,IK:1721,IO:5492,KI:3831,KK:-8741,MH:-3132,MK:3334,OO:-2920},this.BC3__={HH:996,HI:626,HK:-721,HN:-1307,HO:-836,IH:-301,KK:2762,MK:1079,MM:4034,OA:-1652,OH:266},this.BP1__={BB:295,OB:304,OO:-125,UB:352},this.BP2__={BO:60,OO:-1762},this.BQ1__={BHH:1150,BHM:1521,BII:-1158,BIM:886,BMH:1208,BNH:449,BOH:-91,BOO:-2597,OHI:451,OIH:-296,OKA:1851,OKH:-1020,OKK:904,OOO:2965},this.BQ2__={BHH:118,BHI:-1159,BHM:466,BIH:-919,BKK:-1720,BKO:864,OHH:-1139,OHM:-181,OIH:153,UHI:-1146},this.BQ3__={BHH:-792,BHI:2664,BII:-299,BKI:419,BMH:937,BMM:8335,BNN:998,BOH:775,OHH:2174,OHM:439,OII:280,OKH:1798,OKI:-793,OKO:-2242,OMH:-2402,OOO:11699},this.BQ4__={BHH:-3895,BIH:3761,BII:-4654,BIK:1348,BKK:-1806,BMI:-3385,BOO:-12396,OAH:926,OHH:266,OHK:-2036,ONN:-973},this.BW1__={",\u3068":660,",\u540C":727,B1\u3042:1404,B1\u540C:542,"\u3001\u3068":660,"\u3001\u540C":727,"\u300D\u3068":1682,\u3042\u3063:1505,\u3044\u3046:1743,\u3044\u3063:-2055,\u3044\u308B:672,\u3046\u3057:-4817,\u3046\u3093:665,\u304B\u3089:3472,\u304C\u3089:600,\u3053\u3046:-790,\u3053\u3068:2083,\u3053\u3093:-1262,\u3055\u3089:-4143,\u3055\u3093:4573,\u3057\u305F:2641,\u3057\u3066:1104,\u3059\u3067:-3399,\u305D\u3053:1977,\u305D\u308C:-871,\u305F\u3061:1122,\u305F\u3081:601,\u3063\u305F:3463,\u3064\u3044:-802,\u3066\u3044:805,\u3066\u304D:1249,\u3067\u304D:1127,\u3067\u3059:3445,\u3067\u306F:844,\u3068\u3044:-4915,\u3068\u307F:1922,\u3069\u3053:3887,\u306A\u3044:5713,\u306A\u3063:3015,\u306A\u3069:7379,\u306A\u3093:-1113,\u306B\u3057:2468,\u306B\u306F:1498,\u306B\u3082:1671,\u306B\u5BFE:-912,\u306E\u4E00:-501,\u306E\u4E2D:741,\u307E\u305B:2448,\u307E\u3067:1711,\u307E\u307E:2600,\u307E\u308B:-2155,\u3084\u3080:-1947,\u3088\u3063:-2565,\u308C\u305F:2369,\u308C\u3067:-913,\u3092\u3057:1860,\u3092\u898B:731,\u4EA1\u304F:-1886,\u4EAC\u90FD:2558,\u53D6\u308A:-2784,\u5927\u304D:-2604,\u5927\u962A:1497,\u5E73\u65B9:-2314,\u5F15\u304D:-1336,\u65E5\u672C:-195,\u672C\u5F53:-2423,\u6BCE\u65E5:-2113,\u76EE\u6307:-724,\uFF22\uFF11\u3042:1404,\uFF22\uFF11\u540C:542,"\uFF63\u3068":1682},this.BW2__={"..":-11822,"11":-669,"\u2015\u2015":-5730,"\u2212\u2212":-13175,\u3044\u3046:-1609,\u3046\u304B:2490,\u304B\u3057:-1350,\u304B\u3082:-602,\u304B\u3089:-7194,\u304B\u308C:4612,\u304C\u3044:853,\u304C\u3089:-3198,\u304D\u305F:1941,\u304F\u306A:-1597,\u3053\u3068:-8392,\u3053\u306E:-4193,\u3055\u305B:4533,\u3055\u308C:13168,\u3055\u3093:-3977,\u3057\u3044:-1819,\u3057\u304B:-545,\u3057\u305F:5078,\u3057\u3066:972,\u3057\u306A:939,\u305D\u306E:-3744,\u305F\u3044:-1253,\u305F\u305F:-662,\u305F\u3060:-3857,\u305F\u3061:-786,\u305F\u3068:1224,\u305F\u306F:-939,\u3063\u305F:4589,\u3063\u3066:1647,\u3063\u3068:-2094,\u3066\u3044:6144,\u3066\u304D:3640,\u3066\u304F:2551,\u3066\u306F:-3110,\u3066\u3082:-3065,\u3067\u3044:2666,\u3067\u304D:-1528,\u3067\u3057:-3828,\u3067\u3059:-4761,\u3067\u3082:-4203,\u3068\u3044:1890,\u3068\u3053:-1746,\u3068\u3068:-2279,\u3068\u306E:720,\u3068\u307F:5168,\u3068\u3082:-3941,\u306A\u3044:-2488,\u306A\u304C:-1313,\u306A\u3069:-6509,\u306A\u306E:2614,\u306A\u3093:3099,\u306B\u304A:-1615,\u306B\u3057:2748,\u306B\u306A:2454,\u306B\u3088:-7236,\u306B\u5BFE:-14943,\u306B\u5F93:-4688,\u306B\u95A2:-11388,\u306E\u304B:2093,\u306E\u3067:-7059,\u306E\u306B:-6041,\u306E\u306E:-6125,\u306F\u3044:1073,\u306F\u304C:-1033,\u306F\u305A:-2532,\u3070\u308C:1813,\u307E\u3057:-1316,\u307E\u3067:-6621,\u307E\u308C:5409,\u3081\u3066:-3153,\u3082\u3044:2230,\u3082\u306E:-10713,\u3089\u304B:-944,\u3089\u3057:-1611,\u3089\u306B:-1897,\u308A\u3057:651,\u308A\u307E:1620,\u308C\u305F:4270,\u308C\u3066:849,\u308C\u3070:4114,\u308D\u3046:6067,\u308F\u308C:7901,\u3092\u901A:-11877,\u3093\u3060:728,\u3093\u306A:-4115,\u4E00\u4EBA:602,\u4E00\u65B9:-1375,\u4E00\u65E5:970,\u4E00\u90E8:-1051,\u4E0A\u304C:-4479,\u4F1A\u793E:-1116,\u51FA\u3066:2163,\u5206\u306E:-7758,\u540C\u515A:970,\u540C\u65E5:-913,\u5927\u962A:-2471,\u59D4\u54E1:-1250,\u5C11\u306A:-1050,\u5E74\u5EA6:-8669,\u5E74\u9593:-1626,\u5E9C\u770C:-2363,\u624B\u6A29:-1982,\u65B0\u805E:-4066,\u65E5\u65B0:-722,\u65E5\u672C:-7068,\u65E5\u7C73:3372,\u66DC\u65E5:-601,\u671D\u9BAE:-2355,\u672C\u4EBA:-2697,\u6771\u4EAC:-1543,\u7136\u3068:-1384,\u793E\u4F1A:-1276,\u7ACB\u3066:-990,\u7B2C\u306B:-1612,\u7C73\u56FD:-4268,"\uFF11\uFF11":-669},this.BW3__={\u3042\u305F:-2194,\u3042\u308A:719,\u3042\u308B:3846,"\u3044.":-1185,"\u3044\u3002":-1185,\u3044\u3044:5308,\u3044\u3048:2079,\u3044\u304F:3029,\u3044\u305F:2056,\u3044\u3063:1883,\u3044\u308B:5600,\u3044\u308F:1527,\u3046\u3061:1117,\u3046\u3068:4798,\u3048\u3068:1454,"\u304B.":2857,"\u304B\u3002":2857,\u304B\u3051:-743,\u304B\u3063:-4098,\u304B\u306B:-669,\u304B\u3089:6520,\u304B\u308A:-2670,"\u304C,":1816,"\u304C\u3001":1816,\u304C\u304D:-4855,\u304C\u3051:-1127,\u304C\u3063:-913,\u304C\u3089:-4977,\u304C\u308A:-2064,\u304D\u305F:1645,\u3051\u3069:1374,\u3053\u3068:7397,\u3053\u306E:1542,\u3053\u308D:-2757,\u3055\u3044:-714,\u3055\u3092:976,"\u3057,":1557,"\u3057\u3001":1557,\u3057\u3044:-3714,\u3057\u305F:3562,\u3057\u3066:1449,\u3057\u306A:2608,\u3057\u307E:1200,"\u3059.":-1310,"\u3059\u3002":-1310,\u3059\u308B:6521,"\u305A,":3426,"\u305A\u3001":3426,\u305A\u306B:841,\u305D\u3046:428,"\u305F.":8875,"\u305F\u3002":8875,\u305F\u3044:-594,\u305F\u306E:812,\u305F\u308A:-1183,\u305F\u308B:-853,"\u3060.":4098,"\u3060\u3002":4098,\u3060\u3063:1004,\u3063\u305F:-4748,\u3063\u3066:300,\u3066\u3044:6240,\u3066\u304A:855,\u3066\u3082:302,\u3067\u3059:1437,\u3067\u306B:-1482,\u3067\u306F:2295,\u3068\u3046:-1387,\u3068\u3057:2266,\u3068\u306E:541,\u3068\u3082:-3543,\u3069\u3046:4664,\u306A\u3044:1796,\u306A\u304F:-903,\u306A\u3069:2135,"\u306B,":-1021,"\u306B\u3001":-1021,\u306B\u3057:1771,\u306B\u306A:1906,\u306B\u306F:2644,"\u306E,":-724,"\u306E\u3001":-724,\u306E\u5B50:-1e3,"\u306F,":1337,"\u306F\u3001":1337,\u3079\u304D:2181,\u307E\u3057:1113,\u307E\u3059:6943,\u307E\u3063:-1549,\u307E\u3067:6154,\u307E\u308C:-793,\u3089\u3057:1479,\u3089\u308C:6820,\u308B\u308B:3818,"\u308C,":854,"\u308C\u3001":854,\u308C\u305F:1850,\u308C\u3066:1375,\u308C\u3070:-3246,\u308C\u308B:1091,\u308F\u308C:-605,\u3093\u3060:606,\u3093\u3067:798,\u30AB\u6708:990,\u4F1A\u8B70:860,\u5165\u308A:1232,\u5927\u4F1A:2217,\u59CB\u3081:1681,\u5E02:965,\u65B0\u805E:-5055,"\u65E5,":974,"\u65E5\u3001":974,\u793E\u4F1A:2024,\uFF76\u6708:990},this.TC1__={AAA:1093,HHH:1029,HHM:580,HII:998,HOH:-390,HOM:-331,IHI:1169,IOH:-142,IOI:-1015,IOM:467,MMH:187,OOI:-1832},this.TC2__={HHO:2088,HII:-1023,HMM:-1154,IHI:-1965,KKH:703,OII:-2649},this.TC3__={AAA:-294,HHH:346,HHI:-341,HII:-1088,HIK:731,HOH:-1486,IHH:128,IHI:-3041,IHO:-1935,IIH:-825,IIM:-1035,IOI:-542,KHH:-1216,KKA:491,KKH:-1217,KOK:-1009,MHH:-2694,MHM:-457,MHO:123,MMH:-471,NNH:-1689,NNO:662,OHO:-3393},this.TC4__={HHH:-203,HHI:1344,HHK:365,HHM:-122,HHN:182,HHO:669,HIH:804,HII:679,HOH:446,IHH:695,IHO:-2324,IIH:321,III:1497,IIO:656,IOO:54,KAK:4845,KKA:3386,KKK:3065,MHH:-405,MHI:201,MMH:-241,MMM:661,MOM:841},this.TQ1__={BHHH:-227,BHHI:316,BHIH:-132,BIHH:60,BIII:1595,BNHH:-744,BOHH:225,BOOO:-908,OAKK:482,OHHH:281,OHIH:249,OIHI:200,OIIH:-68},this.TQ2__={BIHH:-1401,BIII:-1033,BKAK:-543,BOOO:-5591},this.TQ3__={BHHH:478,BHHM:-1073,BHIH:222,BHII:-504,BIIH:-116,BIII:-105,BMHI:-863,BMHM:-464,BOMH:620,OHHH:346,OHHI:1729,OHII:997,OHMH:481,OIHH:623,OIIH:1344,OKAK:2792,OKHH:587,OKKA:679,OOHH:110,OOII:-685},this.TQ4__={BHHH:-721,BHHM:-3604,BHII:-966,BIIH:-607,BIII:-2181,OAAA:-2763,OAKK:180,OHHH:-294,OHHI:2446,OHHO:480,OHIH:-1573,OIHH:1935,OIHI:-493,OIIH:626,OIII:-4007,OKAK:-8156},this.TW1__={\u306B\u3064\u3044:-4681,\u6771\u4EAC\u90FD:2026},this.TW2__={\u3042\u308B\u7A0B:-2049,\u3044\u3063\u305F:-1256,\u3053\u308D\u304C:-2434,\u3057\u3087\u3046:3873,\u305D\u306E\u5F8C:-4430,\u3060\u3063\u3066:-1049,\u3066\u3044\u305F:1833,\u3068\u3057\u3066:-4657,\u3068\u3082\u306B:-4517,\u3082\u306E\u3067:1882,\u4E00\u6C17\u306B:-792,\u521D\u3081\u3066:-1512,\u540C\u6642\u306B:-8097,\u5927\u304D\u306A:-1255,\u5BFE\u3057\u3066:-2721,\u793E\u4F1A\u515A:-3216},this.TW3__={\u3044\u305F\u3060:-1734,\u3057\u3066\u3044:1314,\u3068\u3057\u3066:-4314,\u306B\u3064\u3044:-5483,\u306B\u3068\u3063:-5989,\u306B\u5F53\u305F:-6247,"\u306E\u3067,":-727,"\u306E\u3067\u3001":-727,\u306E\u3082\u306E:-600,\u308C\u304B\u3089:-3752,\u5341\u4E8C\u6708:-2287},this.TW4__={"\u3044\u3046.":8576,"\u3044\u3046\u3002":8576,\u304B\u3089\u306A:-2348,\u3057\u3066\u3044:2958,"\u305F\u304C,":1516,"\u305F\u304C\u3001":1516,\u3066\u3044\u308B:1538,\u3068\u3044\u3046:1349,\u307E\u3057\u305F:5543,\u307E\u305B\u3093:1097,\u3088\u3046\u3068:-4258,\u3088\u308B\u3068:5865},this.UC1__={A:484,K:93,M:645,O:-505},this.UC2__={A:819,H:1059,I:409,M:3987,N:5775,O:646},this.UC3__={A:-1370,I:2311},this.UC4__={A:-2643,H:1809,I:-1032,K:-3450,M:3565,N:3876,O:6646},this.UC5__={H:313,I:-1238,K:-799,M:539,O:-831},this.UC6__={H:-506,I:-253,K:87,M:247,O:-387},this.UP1__={O:-214},this.UP2__={B:69,O:935},this.UP3__={B:189},this.UQ1__={BH:21,BI:-12,BK:-99,BN:142,BO:-56,OH:-95,OI:477,OK:410,OO:-2422},this.UQ2__={BH:216,BI:113,OK:1759},this.UQ3__={BA:-479,BH:42,BI:1913,BK:-7198,BM:3160,BN:6427,BO:14761,OI:-827,ON:-3212},this.UW1__={",":156,"\u3001":156,"\u300C":-463,\u3042:-941,\u3046:-127,\u304C:-553,\u304D:121,\u3053:505,\u3067:-201,\u3068:-547,\u3069:-123,\u306B:-789,\u306E:-185,\u306F:-847,\u3082:-466,\u3084:-470,\u3088:182,\u3089:-292,\u308A:208,\u308C:169,\u3092:-446,\u3093:-137,"\u30FB":-135,\u4E3B:-402,\u4EAC:-268,\u533A:-912,\u5348:871,\u56FD:-460,\u5927:561,\u59D4:729,\u5E02:-411,\u65E5:-141,\u7406:361,\u751F:-408,\u770C:-386,\u90FD:-718,"\uFF62":-463,"\uFF65":-135},this.UW2__={",":-829,"\u3001":-829,"\u3007":892,"\u300C":-645,"\u300D":3145,\u3042:-538,\u3044:505,\u3046:134,\u304A:-502,\u304B:1454,\u304C:-856,\u304F:-412,\u3053:1141,\u3055:878,\u3056:540,\u3057:1529,\u3059:-675,\u305B:300,\u305D:-1011,\u305F:188,\u3060:1837,\u3064:-949,\u3066:-291,\u3067:-268,\u3068:-981,\u3069:1273,\u306A:1063,\u306B:-1764,\u306E:130,\u306F:-409,\u3072:-1273,\u3079:1261,\u307E:600,\u3082:-1263,\u3084:-402,\u3088:1639,\u308A:-579,\u308B:-694,\u308C:571,\u3092:-2516,\u3093:2095,\u30A2:-587,\u30AB:306,\u30AD:568,\u30C3:831,\u4E09:-758,\u4E0D:-2150,\u4E16:-302,\u4E2D:-968,\u4E3B:-861,\u4E8B:492,\u4EBA:-123,\u4F1A:978,\u4FDD:362,\u5165:548,\u521D:-3025,\u526F:-1566,\u5317:-3414,\u533A:-422,\u5927:-1769,\u5929:-865,\u592A:-483,\u5B50:-1519,\u5B66:760,\u5B9F:1023,\u5C0F:-2009,\u5E02:-813,\u5E74:-1060,\u5F37:1067,\u624B:-1519,\u63FA:-1033,\u653F:1522,\u6587:-1355,\u65B0:-1682,\u65E5:-1815,\u660E:-1462,\u6700:-630,\u671D:-1843,\u672C:-1650,\u6771:-931,\u679C:-665,\u6B21:-2378,\u6C11:-180,\u6C17:-1740,\u7406:752,\u767A:529,\u76EE:-1584,\u76F8:-242,\u770C:-1165,\u7ACB:-763,\u7B2C:810,\u7C73:509,\u81EA:-1353,\u884C:838,\u897F:-744,\u898B:-3874,\u8ABF:1010,\u8B70:1198,\u8FBC:3041,\u958B:1758,\u9593:-1257,"\uFF62":-645,"\uFF63":3145,\uFF6F:831,\uFF71:-587,\uFF76:306,\uFF77:568},this.UW3__={",":4889,"1":-800,"\u2212":-1723,"\u3001":4889,\u3005:-2311,"\u3007":5827,"\u300D":2670,"\u3013":-3573,\u3042:-2696,\u3044:1006,\u3046:2342,\u3048:1983,\u304A:-4864,\u304B:-1163,\u304C:3271,\u304F:1004,\u3051:388,\u3052:401,\u3053:-3552,\u3054:-3116,\u3055:-1058,\u3057:-395,\u3059:584,\u305B:3685,\u305D:-5228,\u305F:842,\u3061:-521,\u3063:-1444,\u3064:-1081,\u3066:6167,\u3067:2318,\u3068:1691,\u3069:-899,\u306A:-2788,\u306B:2745,\u306E:4056,\u306F:4555,\u3072:-2171,\u3075:-1798,\u3078:1199,\u307B:-5516,\u307E:-4384,\u307F:-120,\u3081:1205,\u3082:2323,\u3084:-788,\u3088:-202,\u3089:727,\u308A:649,\u308B:5905,\u308C:2773,\u308F:-1207,\u3092:6620,\u3093:-518,\u30A2:551,\u30B0:1319,\u30B9:874,\u30C3:-1350,\u30C8:521,\u30E0:1109,\u30EB:1591,\u30ED:2201,\u30F3:278,"\u30FB":-3794,\u4E00:-1619,\u4E0B:-1759,\u4E16:-2087,\u4E21:3815,\u4E2D:653,\u4E3B:-758,\u4E88:-1193,\u4E8C:974,\u4EBA:2742,\u4ECA:792,\u4ED6:1889,\u4EE5:-1368,\u4F4E:811,\u4F55:4265,\u4F5C:-361,\u4FDD:-2439,\u5143:4858,\u515A:3593,\u5168:1574,\u516C:-3030,\u516D:755,\u5171:-1880,\u5186:5807,\u518D:3095,\u5206:457,\u521D:2475,\u5225:1129,\u524D:2286,\u526F:4437,\u529B:365,\u52D5:-949,\u52D9:-1872,\u5316:1327,\u5317:-1038,\u533A:4646,\u5343:-2309,\u5348:-783,\u5354:-1006,\u53E3:483,\u53F3:1233,\u5404:3588,\u5408:-241,\u540C:3906,\u548C:-837,\u54E1:4513,\u56FD:642,\u578B:1389,\u5834:1219,\u5916:-241,\u59BB:2016,\u5B66:-1356,\u5B89:-423,\u5B9F:-1008,\u5BB6:1078,\u5C0F:-513,\u5C11:-3102,\u5DDE:1155,\u5E02:3197,\u5E73:-1804,\u5E74:2416,\u5E83:-1030,\u5E9C:1605,\u5EA6:1452,\u5EFA:-2352,\u5F53:-3885,\u5F97:1905,\u601D:-1291,\u6027:1822,\u6238:-488,\u6307:-3973,\u653F:-2013,\u6559:-1479,\u6570:3222,\u6587:-1489,\u65B0:1764,\u65E5:2099,\u65E7:5792,\u6628:-661,\u6642:-1248,\u66DC:-951,\u6700:-937,\u6708:4125,\u671F:360,\u674E:3094,\u6751:364,\u6771:-805,\u6838:5156,\u68EE:2438,\u696D:484,\u6C0F:2613,\u6C11:-1694,\u6C7A:-1073,\u6CD5:1868,\u6D77:-495,\u7121:979,\u7269:461,\u7279:-3850,\u751F:-273,\u7528:914,\u753A:1215,\u7684:7313,\u76F4:-1835,\u7701:792,\u770C:6293,\u77E5:-1528,\u79C1:4231,\u7A0E:401,\u7ACB:-960,\u7B2C:1201,\u7C73:7767,\u7CFB:3066,\u7D04:3663,\u7D1A:1384,\u7D71:-4229,\u7DCF:1163,\u7DDA:1255,\u8005:6457,\u80FD:725,\u81EA:-2869,\u82F1:785,\u898B:1044,\u8ABF:-562,\u8CA1:-733,\u8CBB:1777,\u8ECA:1835,\u8ECD:1375,\u8FBC:-1504,\u901A:-1136,\u9078:-681,\u90CE:1026,\u90E1:4404,\u90E8:1200,\u91D1:2163,\u9577:421,\u958B:-1432,\u9593:1302,\u95A2:-1282,\u96E8:2009,\u96FB:-1045,\u975E:2066,\u99C5:1620,"\uFF11":-800,"\uFF63":2670,"\uFF65":-3794,\uFF6F:-1350,\uFF71:551,\uFF78\uFF9E:1319,\uFF7D:874,\uFF84:521,\uFF91:1109,\uFF99:1591,\uFF9B:2201,\uFF9D:278},this.UW4__={",":3930,".":3508,"\u2015":-4841,"\u3001":3930,"\u3002":3508,"\u3007":4999,"\u300C":1895,"\u300D":3798,"\u3013":-5156,\u3042:4752,\u3044:-3435,\u3046:-640,\u3048:-2514,\u304A:2405,\u304B:530,\u304C:6006,\u304D:-4482,\u304E:-3821,\u304F:-3788,\u3051:-4376,\u3052:-4734,\u3053:2255,\u3054:1979,\u3055:2864,\u3057:-843,\u3058:-2506,\u3059:-731,\u305A:1251,\u305B:181,\u305D:4091,\u305F:5034,\u3060:5408,\u3061:-3654,\u3063:-5882,\u3064:-1659,\u3066:3994,\u3067:7410,\u3068:4547,\u306A:5433,\u306B:6499,\u306C:1853,\u306D:1413,\u306E:7396,\u306F:8578,\u3070:1940,\u3072:4249,\u3073:-4134,\u3075:1345,\u3078:6665,\u3079:-744,\u307B:1464,\u307E:1051,\u307F:-2082,\u3080:-882,\u3081:-5046,\u3082:4169,\u3083:-2666,\u3084:2795,\u3087:-1544,\u3088:3351,\u3089:-2922,\u308A:-9726,\u308B:-14896,\u308C:-2613,\u308D:-4570,\u308F:-1783,\u3092:13150,\u3093:-2352,\u30AB:2145,\u30B3:1789,\u30BB:1287,\u30C3:-724,\u30C8:-403,\u30E1:-1635,\u30E9:-881,\u30EA:-541,\u30EB:-856,\u30F3:-3637,"\u30FB":-4371,\u30FC:-11870,\u4E00:-2069,\u4E2D:2210,\u4E88:782,\u4E8B:-190,\u4E95:-1768,\u4EBA:1036,\u4EE5:544,\u4F1A:950,\u4F53:-1286,\u4F5C:530,\u5074:4292,\u5148:601,\u515A:-2006,\u5171:-1212,\u5185:584,\u5186:788,\u521D:1347,\u524D:1623,\u526F:3879,\u529B:-302,\u52D5:-740,\u52D9:-2715,\u5316:776,\u533A:4517,\u5354:1013,\u53C2:1555,\u5408:-1834,\u548C:-681,\u54E1:-910,\u5668:-851,\u56DE:1500,\u56FD:-619,\u5712:-1200,\u5730:866,\u5834:-1410,\u5841:-2094,\u58EB:-1413,\u591A:1067,\u5927:571,\u5B50:-4802,\u5B66:-1397,\u5B9A:-1057,\u5BFA:-809,\u5C0F:1910,\u5C4B:-1328,\u5C71:-1500,\u5CF6:-2056,\u5DDD:-2667,\u5E02:2771,\u5E74:374,\u5E81:-4556,\u5F8C:456,\u6027:553,\u611F:916,\u6240:-1566,\u652F:856,\u6539:787,\u653F:2182,\u6559:704,\u6587:522,\u65B9:-856,\u65E5:1798,\u6642:1829,\u6700:845,\u6708:-9066,\u6728:-485,\u6765:-442,\u6821:-360,\u696D:-1043,\u6C0F:5388,\u6C11:-2716,\u6C17:-910,\u6CA2:-939,\u6E08:-543,\u7269:-735,\u7387:672,\u7403:-1267,\u751F:-1286,\u7523:-1101,\u7530:-2900,\u753A:1826,\u7684:2586,\u76EE:922,\u7701:-3485,\u770C:2997,\u7A7A:-867,\u7ACB:-2112,\u7B2C:788,\u7C73:2937,\u7CFB:786,\u7D04:2171,\u7D4C:1146,\u7D71:-1169,\u7DCF:940,\u7DDA:-994,\u7F72:749,\u8005:2145,\u80FD:-730,\u822C:-852,\u884C:-792,\u898F:792,\u8B66:-1184,\u8B70:-244,\u8C37:-1e3,\u8CDE:730,\u8ECA:-1481,\u8ECD:1158,\u8F2A:-1433,\u8FBC:-3370,\u8FD1:929,\u9053:-1291,\u9078:2596,\u90CE:-4866,\u90FD:1192,\u91CE:-1100,\u9280:-2213,\u9577:357,\u9593:-2344,\u9662:-2297,\u969B:-2604,\u96FB:-878,\u9818:-1659,\u984C:-792,\u9928:-1984,\u9996:1749,\u9AD8:2120,"\uFF62":1895,"\uFF63":3798,"\uFF65":-4371,\uFF6F:-724,\uFF70:-11870,\uFF76:2145,\uFF7A:1789,\uFF7E:1287,\uFF84:-403,\uFF92:-1635,\uFF97:-881,\uFF98:-541,\uFF99:-856,\uFF9D:-3637},this.UW5__={",":465,".":-299,"1":-514,E2:-32768,"]":-2762,"\u3001":465,"\u3002":-299,"\u300C":363,\u3042:1655,\u3044:331,\u3046:-503,\u3048:1199,\u304A:527,\u304B:647,\u304C:-421,\u304D:1624,\u304E:1971,\u304F:312,\u3052:-983,\u3055:-1537,\u3057:-1371,\u3059:-852,\u3060:-1186,\u3061:1093,\u3063:52,\u3064:921,\u3066:-18,\u3067:-850,\u3068:-127,\u3069:1682,\u306A:-787,\u306B:-1224,\u306E:-635,\u306F:-578,\u3079:1001,\u307F:502,\u3081:865,\u3083:3350,\u3087:854,\u308A:-208,\u308B:429,\u308C:504,\u308F:419,\u3092:-1264,\u3093:327,\u30A4:241,\u30EB:451,\u30F3:-343,\u4E2D:-871,\u4EAC:722,\u4F1A:-1153,\u515A:-654,\u52D9:3519,\u533A:-901,\u544A:848,\u54E1:2104,\u5927:-1296,\u5B66:-548,\u5B9A:1785,\u5D50:-1304,\u5E02:-2991,\u5E2D:921,\u5E74:1763,\u601D:872,\u6240:-814,\u6319:1618,\u65B0:-1682,\u65E5:218,\u6708:-4353,\u67FB:932,\u683C:1356,\u6A5F:-1508,\u6C0F:-1347,\u7530:240,\u753A:-3912,\u7684:-3149,\u76F8:1319,\u7701:-1052,\u770C:-4003,\u7814:-997,\u793E:-278,\u7A7A:-813,\u7D71:1955,\u8005:-2233,\u8868:663,\u8A9E:-1073,\u8B70:1219,\u9078:-1018,\u90CE:-368,\u9577:786,\u9593:1191,\u984C:2368,\u9928:-689,"\uFF11":-514,\uFF25\uFF12:-32768,"\uFF62":363,\uFF72:241,\uFF99:451,\uFF9D:-343},this.UW6__={",":227,".":808,"1":-270,E1:306,"\u3001":227,"\u3002":808,\u3042:-307,\u3046:189,\u304B:241,\u304C:-73,\u304F:-121,\u3053:-200,\u3058:1782,\u3059:383,\u305F:-428,\u3063:573,\u3066:-1014,\u3067:101,\u3068:-105,\u306A:-253,\u306B:-149,\u306E:-417,\u306F:-236,\u3082:-206,\u308A:187,\u308B:-135,\u3092:195,\u30EB:-673,\u30F3:-496,\u4E00:-277,\u4E2D:201,\u4EF6:-800,\u4F1A:624,\u524D:302,\u533A:1792,\u54E1:-1212,\u59D4:798,\u5B66:-960,\u5E02:887,\u5E83:-695,\u5F8C:535,\u696D:-697,\u76F8:753,\u793E:-507,\u798F:974,\u7A7A:-822,\u8005:1811,\u9023:463,\u90CE:1082,"\uFF11":-270,\uFF25\uFF11:306,\uFF99:-673,\uFF9D:-496},this}ZA.prototype.ctype_=function(t){for(var e in this.chartype_)if(t.match(this.chartype_[e][0]))return this.chartype_[e][1];return"O"};ZA.prototype.ts_=function(t){return t||0};ZA.prototype.segment=function(t){if(t==null||t==null||t=="")return[];var e=[],r=["B3","B2","B1"],o=["O","O","O"],i=t.split("");for(d=0;d<i.length;++d)r.push(i[d]),o.push(this.ctype_(i[d]));r.push("E1"),r.push("E2"),r.push("E3"),o.push("O"),o.push("O"),o.push("O");for(var s=r[3],a="U",l="U",c="U",d=4;d<r.length-3;++d){var u=this.BIAS__,p=r[d-3],h=r[d-2],f=r[d-1],m=r[d],g=r[d+1],v=r[d+2],y=o[d-3],S=o[d-2],C=o[d-1],b=o[d],x=o[d+1],w=o[d+2];u+=this.ts_(this.UP1__[a]),u+=this.ts_(this.UP2__[l]),u+=this.ts_(this.UP3__[c]),u+=this.ts_(this.BP1__[a+l]),u+=this.ts_(this.BP2__[l+c]),u+=this.ts_(this.UW1__[p]),u+=this.ts_(this.UW2__[h]),u+=this.ts_(this.UW3__[f]),u+=this.ts_(this.UW4__[m]),u+=this.ts_(this.UW5__[g]),u+=this.ts_(this.UW6__[v]),u+=this.ts_(this.BW1__[h+f]),u+=this.ts_(this.BW2__[f+m]),u+=this.ts_(this.BW3__[m+g]),u+=this.ts_(this.TW1__[p+h+f]),u+=this.ts_(this.TW2__[h+f+m]),u+=this.ts_(this.TW3__[f+m+g]),u+=this.ts_(this.TW4__[m+g+v]),u+=this.ts_(this.UC1__[y]),u+=this.ts_(this.UC2__[S]),u+=this.ts_(this.UC3__[C]),u+=this.ts_(this.UC4__[b]),u+=this.ts_(this.UC5__[x]),u+=this.ts_(this.UC6__[w]),u+=this.ts_(this.BC1__[S+C]),u+=this.ts_(this.BC2__[C+b]),u+=this.ts_(this.BC3__[b+x]),u+=this.ts_(this.TC1__[y+S+C]),u+=this.ts_(this.TC2__[S+C+b]),u+=this.ts_(this.TC3__[C+b+x]),u+=this.ts_(this.TC4__[b+x+w]),u+=this.ts_(this.UQ1__[a+y]),u+=this.ts_(this.UQ2__[l+S]),u+=this.ts_(this.UQ3__[c+C]),u+=this.ts_(this.BQ1__[l+S+C]),u+=this.ts_(this.BQ2__[l+C+b]),u+=this.ts_(this.BQ3__[c+S+C]),u+=this.ts_(this.BQ4__[c+C+b]),u+=this.ts_(this.TQ1__[l+y+S+C]),u+=this.ts_(this.TQ2__[l+S+C+b]),u+=this.ts_(this.TQ3__[c+y+S+C]),u+=this.ts_(this.TQ4__[c+S+C+b]);var k="O";u>0&&(e.push(s),s="",k="B"),a=l,l=c,c=k,s+=r[d]}return e.push(s),e};kJ.exports=ZA});var Dm=st(($O,WO)=>{(function(t,e){typeof $O=="object"&&typeof WO!="undefined"?WO.exports=e():typeof define=="function"&&define.amd?define(e):t.dayjs=e()})($O,function(){"use strict";var t="millisecond",e="second",r="minute",o="hour",i="day",s="week",a="month",l="quarter",c="year",d=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,u=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p=function(x,w,k){var T=String(x);return!T||T.length>=w?x:""+Array(w+1-T.length).join(k)+x},h={s:p,z:function(x){var w=-x.utcOffset(),k=Math.abs(w),T=Math.floor(k/60),A=k%60;return(w<=0?"+":"-")+p(T,2,"0")+":"+p(A,2,"0")},m:function(x,w){var k=12*(w.year()-x.year())+(w.month()-x.month()),T=x.clone().add(k,a),A=w-T<0,E=x.clone().add(k+(A?-1:1),a);return Number(-(k+(w-T)/(A?T-E:E-T))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return{M:a,y:c,w:s,d:i,D:"date",h:o,m:r,s:e,ms:t,Q:l}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",g={};g[m]=f;var v=function(x){return x instanceof b},y=function(x,w,k){var T;if(!x)return m;if(typeof x=="string")g[x]&&(T=x),w&&(g[x]=w,T=x);else{var A=x.name;g[A]=x,T=A}return!k&&T&&(m=T),T||!k&&m},S=function(x,w){if(v(x))return x.clone();var k=typeof w=="object"?w:{};return k.date=x,k.args=arguments,new b(k)},C=h;C.l=y,C.i=v,C.w=function(x,w){return S(x,{locale:w.$L,utc:w.$u,$offset:w.$offset})};var b=function(){function x(k){this.$L=this.$L||y(k.locale,null,!0),this.parse(k)}var w=x.prototype;return w.parse=function(k){this.$d=function(T){var A=T.date,E=T.utc;if(A===null)return new Date(NaN);if(C.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var F=A.match(d);if(F)return E?new Date(Date.UTC(F[1],F[2]-1,F[3]||1,F[4]||0,F[5]||0,F[6]||0,F[7]||0)):new Date(F[1],F[2]-1,F[3]||1,F[4]||0,F[5]||0,F[6]||0,F[7]||0)}return new Date(A)}(k),this.init()},w.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},w.$utils=function(){return C},w.isValid=function(){return this.$d.toString()!=="Invalid Date"},w.isSame=function(k,T){var A=S(k);return this.startOf(T)<=A&&A<=this.endOf(T)},w.isAfter=function(k,T){return S(k)<this.startOf(T)},w.isBefore=function(k,T){return this.endOf(T)<S(k)},w.$g=function(k,T,A){return C.u(k)?this[T]:this.set(A,k)},w.year=function(k){return this.$g(k,"$y",c)},w.month=function(k){return this.$g(k,"$M",a)},w.day=function(k){return this.$g(k,"$W",i)},w.date=function(k){return this.$g(k,"$D","date")},w.hour=function(k){return this.$g(k,"$H",o)},w.minute=function(k){return this.$g(k,"$m",r)},w.second=function(k){return this.$g(k,"$s",e)},w.millisecond=function(k){return this.$g(k,"$ms",t)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(k,T){var A=this,E=!!C.u(T)||T,F=C.p(k),z=function(Z,P){var _=C.w(A.$u?Date.UTC(A.$y,P,Z):new Date(A.$y,P,Z),A);return E?_:_.endOf(i)},L=function(Z,P){return C.w(A.toDate()[Z].apply(A.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(P)),A)},R=this.$W,N=this.$M,V=this.$D,W="set"+(this.$u?"UTC":"");switch(F){case c:return E?z(1,0):z(31,11);case a:return E?z(1,N):z(0,N+1);case s:var me=this.$locale().weekStart||0,ie=(R<me?R+7:R)-me;return z(E?V-ie:V+(6-ie),N);case i:case"date":return L(W+"Hours",0);case o:return L(W+"Minutes",1);case r:return L(W+"Seconds",2);case e:return L(W+"Milliseconds",3);default:return this.clone()}},w.endOf=function(k){return this.startOf(k,!1)},w.$set=function(k,T){var A,E=C.p(k),F="set"+(this.$u?"UTC":""),z=(A={},A[i]=F+"Date",A.date=F+"Date",A[a]=F+"Month",A[c]=F+"FullYear",A[o]=F+"Hours",A[r]=F+"Minutes",A[e]=F+"Seconds",A[t]=F+"Milliseconds",A)[E],L=E===i?this.$D+(T-this.$W):T;if(E===a||E===c){var R=this.clone().set("date",1);R.$d[z](L),R.init(),this.$d=R.set("date",Math.min(this.$D,R.daysInMonth())).toDate()}else z&&this.$d[z](L);return this.init(),this},w.set=function(k,T){return this.clone().$set(k,T)},w.get=function(k){return this[C.p(k)]()},w.add=function(k,T){var A,E=this;k=Number(k);var F=C.p(T),z=function(N){var V=S(E);return C.w(V.date(V.date()+Math.round(N*k)),E)};if(F===a)return this.set(a,this.$M+k);if(F===c)return this.set(c,this.$y+k);if(F===i)return z(1);if(F===s)return z(7);var L=(A={},A[r]=6e4,A[o]=36e5,A[e]=1e3,A)[F]||1,R=this.$d.getTime()+k*L;return C.w(R,this)},w.subtract=function(k,T){return this.add(-1*k,T)},w.format=function(k){var T=this;if(!this.isValid())return"Invalid Date";var A=k||"YYYY-MM-DDTHH:mm:ssZ",E=C.z(this),F=this.$locale(),z=this.$H,L=this.$m,R=this.$M,N=F.weekdays,V=F.months,W=function(P,_,I,U){return P&&(P[_]||P(T,A))||I[_].substr(0,U)},me=function(P){return C.s(z%12||12,P,"0")},ie=F.meridiem||function(P,_,I){var U=P<12?"AM":"PM";return I?U.toLowerCase():U},Z={YY:String(this.$y).slice(-2),YYYY:this.$y,M:R+1,MM:C.s(R+1,2,"0"),MMM:W(F.monthsShort,R,V,3),MMMM:W(V,R),D:this.$D,DD:C.s(this.$D,2,"0"),d:String(this.$W),dd:W(F.weekdaysMin,this.$W,N,2),ddd:W(F.weekdaysShort,this.$W,N,3),dddd:N[this.$W],H:String(z),HH:C.s(z,2,"0"),h:me(1),hh:me(2),a:ie(z,L,!0),A:ie(z,L,!1),m:String(L),mm:C.s(L,2,"0"),s:String(this.$s),ss:C.s(this.$s,2,"0"),SSS:C.s(this.$ms,3,"0"),Z:E};return A.replace(u,function(P,_){return _||Z[P]||E.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(k,T,A){var E,F=C.p(T),z=S(k),L=6e4*(z.utcOffset()-this.utcOffset()),R=this-z,N=C.m(this,z);return N=(E={},E[c]=N/12,E[a]=N,E[l]=N/3,E[s]=(R-L)/6048e5,E[i]=(R-L)/864e5,E[o]=R/36e5,E[r]=R/6e4,E[e]=R/1e3,E)[F]||R,A?N:C.a(N)},w.daysInMonth=function(){return this.endOf(a).$D},w.$locale=function(){return g[this.$L]},w.locale=function(k,T){if(!k)return this.$L;var A=this.clone(),E=y(k,T,!0);return E&&(A.$L=E),A},w.clone=function(){return C.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},x}();return S.prototype=b.prototype,S.extend=function(x,w){return x(w,b,S),S},S.locale=y,S.isDayjs=v,S.unix=function(x){return S(1e3*x)},S.en=g[m],S.Ls=g,S})});var r4=st((sI,ZJ)=>{(function(t,e){typeof sI=="object"&&typeof ZJ!="undefined"?e(sI):typeof define=="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.idb={}))})(sI,function(t){"use strict";function e(y){return Array.prototype.slice.call(y)}function r(y){return new Promise(function(S,C){y.onsuccess=function(){S(y.result)},y.onerror=function(){C(y.error)}})}function o(y,S,C){var b,x=new Promise(function(w,k){b=y[S].apply(y,C),r(b).then(w,k)});return x.request=b,x}function i(y,S,C){var b=o(y,S,C);return b.then(function(x){if(!!x)return new u(x,b.request)})}function s(y,S,C){C.forEach(function(b){Object.defineProperty(y.prototype,b,{get:function(){return this[S][b]},set:function(x){this[S][b]=x}})})}function a(y,S,C,b){b.forEach(function(x){x in C.prototype&&(y.prototype[x]=function(){return o(this[S],x,arguments)})})}function l(y,S,C,b){b.forEach(function(x){x in C.prototype&&(y.prototype[x]=function(){return this[S][x].apply(this[S],arguments)})})}function c(y,S,C,b){b.forEach(function(x){x in C.prototype&&(y.prototype[x]=function(){return i(this[S],x,arguments)})})}function d(y){this._index=y}s(d,"_index",["name","keyPath","multiEntry","unique"]),a(d,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(d,"_index",IDBIndex,["openCursor","openKeyCursor"]);function u(y,S){this._cursor=y,this._request=S}s(u,"_cursor",["direction","key","primaryKey","value"]),a(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(y){y in IDBCursor.prototype&&(u.prototype[y]=function(){var S=this,C=arguments;return Promise.resolve().then(function(){return S._cursor[y].apply(S._cursor,C),r(S._request).then(function(b){if(!!b)return new u(b,S._request)})})})});function p(y){this._store=y}p.prototype.createIndex=function(){return new d(this._store.createIndex.apply(this._store,arguments))},p.prototype.index=function(){return new d(this._store.index.apply(this._store,arguments))},s(p,"_store",["name","keyPath","indexNames","autoIncrement"]),a(p,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(p,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),l(p,"_store",IDBObjectStore,["deleteIndex"]);function h(y){this._tx=y,this.complete=new Promise(function(S,C){y.oncomplete=function(){S()},y.onerror=function(){C(y.error)},y.onabort=function(){C(y.error)}})}h.prototype.objectStore=function(){return new p(this._tx.objectStore.apply(this._tx,arguments))},s(h,"_tx",["objectStoreNames","mode"]),l(h,"_tx",IDBTransaction,["abort"]);function f(y,S,C){this._db=y,this.oldVersion=S,this.transaction=new h(C)}f.prototype.createObjectStore=function(){return new p(this._db.createObjectStore.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),l(f,"_db",IDBDatabase,["deleteObjectStore","close"]);function m(y){this._db=y}m.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},s(m,"_db",["name","version","objectStoreNames"]),l(m,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(y){[p,d].forEach(function(S){y in S.prototype&&(S.prototype[y.replace("open","iterate")]=function(){var C=e(arguments),b=C[C.length-1],x=this._store||this._index,w=x[y].apply(x,C.slice(0,-1));w.onsuccess=function(){b(w.result)}})})}),[d,p].forEach(function(y){y.prototype.getAll||(y.prototype.getAll=function(S,C){var b=this,x=[];return new Promise(function(w){b.iterateCursor(S,function(k){if(!k){w(x);return}if(x.push(k.value),C!==void 0&&x.length==C){w(x);return}k.continue()})})})});function g(y,S,C){var b=o(indexedDB,"open",[y,S]),x=b.request;return x&&(x.onupgradeneeded=function(w){C&&C(new f(x.result,w.oldVersion,x.transaction))}),b.then(function(w){return new m(w)})}function v(y){return o(indexedDB,"deleteDatabase",[y])}t.openDb=g,t.deleteDb=v,Object.defineProperty(t,"__esModule",{value:!0})})});var Oee=st((aet,_4)=>{"use strict";_4.exports=mI;_4.exports.default=mI;function mI(t,e,r){r=r||2;var o=e&&e.length,i=o?e[0]*r:t.length,s=Mee(t,0,i,r,!0),a=[];if(!s||s.next===s.prev)return a;var l,c,d,u,p,h,f;if(o&&(s=EEe(t,e,s,r)),t.length>80*r){l=d=t[0],c=u=t[1];for(var m=r;m<i;m+=r)p=t[m],h=t[m+1],p<l&&(l=p),h<c&&(c=h),p>d&&(d=p),h>u&&(u=h);f=Math.max(d-l,u-c),f=f!==0?1/f:0}return X1(s,a,r,l,c,f),a}function Mee(t,e,r,o,i){var s,a;if(i===E4(t,e,r,o)>0)for(s=e;s<r;s+=o)a=Lee(s,t[s],t[s+1],a);else for(s=r-o;s>=e;s-=o)a=Lee(s,t[s],t[s+1],a);return a&&gI(a,a.next)&&(J1(a),a=a.next),a}function Rm(t,e){if(!t)return t;e||(e=t);var r=t,o;do if(o=!1,!r.steiner&&(gI(r,r.next)||mi(r.prev,r,r.next)===0)){if(J1(r),r=e=r.prev,r===r.next)break;o=!0}else r=r.next;while(o||r!==e);return e}function X1(t,e,r,o,i,s,a){if(!!t){!a&&s&&FEe(t,o,i,s);for(var l=t,c,d;t.prev!==t.next;){if(c=t.prev,d=t.next,s?DEe(t,o,i,s):TEe(t)){e.push(c.i/r),e.push(t.i/r),e.push(d.i/r),J1(t),t=d.next,l=d.next;continue}if(t=d,t===l){a?a===1?(t=kEe(Rm(t),e,r),X1(t,e,r,o,i,s,2)):a===2&&PEe(t,e,r,o,i,s):X1(Rm(t),e,r,o,i,s,1);break}}}}function TEe(t){var e=t.prev,r=t,o=t.next;if(mi(e,r,o)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(vC(e.x,e.y,r.x,r.y,o.x,o.y,i.x,i.y)&&mi(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function DEe(t,e,r,o){var i=t.prev,s=t,a=t.next;if(mi(i,s,a)>=0)return!1;for(var l=i.x<s.x?i.x<a.x?i.x:a.x:s.x<a.x?s.x:a.x,c=i.y<s.y?i.y<a.y?i.y:a.y:s.y<a.y?s.y:a.y,d=i.x>s.x?i.x>a.x?i.x:a.x:s.x>a.x?s.x:a.x,u=i.y>s.y?i.y>a.y?i.y:a.y:s.y>a.y?s.y:a.y,p=k4(l,c,e,r,o),h=k4(d,u,e,r,o),f=t.prevZ,m=t.nextZ;f&&f.z>=p&&m&&m.z<=h;){if(f!==t.prev&&f!==t.next&&vC(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&mi(f.prev,f,f.next)>=0||(f=f.prevZ,m!==t.prev&&m!==t.next&&vC(i.x,i.y,s.x,s.y,a.x,a.y,m.x,m.y)&&mi(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=p;){if(f!==t.prev&&f!==t.next&&vC(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&mi(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=h;){if(m!==t.prev&&m!==t.next&&vC(i.x,i.y,s.x,s.y,a.x,a.y,m.x,m.y)&&mi(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function kEe(t,e,r){var o=t;do{var i=o.prev,s=o.next.next;!gI(i,s)&&Nee(i,o,o.next,s)&&Q1(i,s)&&Q1(s,i)&&(e.push(i.i/r),e.push(o.i/r),e.push(s.i/r),J1(o),J1(o.next),o=t=s),o=o.next}while(o!==t);return Rm(o)}function PEe(t,e,r,o,i,s){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&BEe(a,l)){var c=Bee(a,l);a=Rm(a,a.next),c=Rm(c,c.next),X1(a,e,r,o,i,s),X1(c,e,r,o,i,s);return}l=l.next}a=a.next}while(a!==t)}function EEe(t,e,r,o){var i=[],s,a,l,c,d;for(s=0,a=e.length;s<a;s++)l=e[s]*o,c=s<a-1?e[s+1]*o:t.length,d=Mee(t,l,c,o,!1),d===d.next&&(d.steiner=!0),i.push(NEe(d));for(i.sort(_Ee),s=0;s<i.length;s++)r=AEe(i[s],r),r=Rm(r,r.next);return r}function _Ee(t,e){return t.x-e.x}function AEe(t,e){var r=IEe(t,e);if(!r)return e;var o=Bee(r,t),i=Rm(r,r.next);return Rm(o,o.next),e===r?i:e}function IEe(t,e){var r=e,o=t.x,i=t.y,s=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var l=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=o&&l>s){if(s=l,l===o){if(i===r.y)return r;if(i===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!a)return null;if(o===s)return a;var c=a,d=a.x,u=a.y,p=1/0,h;r=a;do o>=r.x&&r.x>=d&&o!==r.x&&vC(i<u?o:s,i,d,u,i<u?s:o,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(o-r.x),Q1(r,t)&&(h<p||h===p&&(r.x>a.x||r.x===a.x&&REe(a,r)))&&(a=r,p=h)),r=r.next;while(r!==c);return a}function REe(t,e){return mi(t.prev,t,e.prev)<0&&mi(e.next,t,t.next)<0}function FEe(t,e,r,o){var i=t;do i.z===null&&(i.z=k4(i.x,i.y,e,r,o)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,MEe(i)}function MEe(t){var e,r,o,i,s,a,l,c,d=1;do{for(r=t,t=null,s=null,a=0;r;){for(a++,o=r,l=0,e=0;e<d&&(l++,o=o.nextZ,!!o);e++);for(c=d;l>0||c>0&&o;)l!==0&&(c===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,l--):(i=o,o=o.nextZ,c--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=o}s.nextZ=null,d*=2}while(a>1);return t}function k4(t,e,r,o,i){return t=32767*(t-r)*i,e=32767*(e-o)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function NEe(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function vC(t,e,r,o,i,s,a,l){return(i-a)*(e-l)-(t-a)*(s-l)>=0&&(t-a)*(o-l)-(r-a)*(e-l)>=0&&(r-a)*(s-l)-(i-a)*(o-l)>=0}function BEe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!LEe(t,e)&&(Q1(t,e)&&Q1(e,t)&&OEe(t,e)&&(mi(t.prev,t,e.prev)||mi(t,e.prev,e))||gI(t,e)&&mi(t.prev,t,t.next)>0&&mi(e.prev,e,e.next)>0)}function mi(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function gI(t,e){return t.x===e.x&&t.y===e.y}function Nee(t,e,r,o){var i=bI(mi(t,e,r)),s=bI(mi(t,e,o)),a=bI(mi(r,o,t)),l=bI(mi(r,o,e));return!!(i!==s&&a!==l||i===0&&vI(t,r,e)||s===0&&vI(t,o,e)||a===0&&vI(r,t,o)||l===0&&vI(r,e,o))}function vI(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function bI(t){return t>0?1:t<0?-1:0}function LEe(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Nee(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Q1(t,e){return mi(t.prev,t,t.next)<0?mi(t,e,t.next)>=0&&mi(t,t.prev,e)>=0:mi(t,e,t.prev)<0||mi(t,t.next,e)<0}function OEe(t,e){var r=t,o=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next;while(r!==t);return o}function Bee(t,e){var r=new P4(t.i,t.x,t.y),o=new P4(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,o.next=r,r.prev=o,s.next=o,o.prev=s,o}function Lee(t,e,r,o){var i=new P4(t,e,r);return o?(i.next=o.next,i.prev=o,o.next.prev=i,o.next=i):(i.prev=i,i.next=i),i}function J1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P4(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}mI.deviation=function(t,e,r,o){var i=e&&e.length,s=i?e[0]*r:t.length,a=Math.abs(E4(t,0,s,r));if(i)for(var l=0,c=e.length;l<c;l++){var d=e[l]*r,u=l<c-1?e[l+1]*r:t.length;a-=Math.abs(E4(t,d,u,r))}var p=0;for(l=0;l<o.length;l+=3){var h=o[l]*r,f=o[l+1]*r,m=o[l+2]*r;p+=Math.abs((t[h]-t[m])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[m+1]-t[h+1]))}return a===0&&p===0?0:Math.abs((p-a)/a)};function E4(t,e,r,o){for(var i=0,s=e,a=r-o;s<r;s+=o)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}mI.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},o=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var a=0;a<e;a++)r.vertices.push(t[i][s][a]);i>0&&(o+=t[i-1].length,r.holes.push(o))}return r}});var az=st((ilt,mte)=>{var n_e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o_e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];mte.exports=function(e){var r=e,o=e.indexOf("["),i=e.indexOf("]");o!=-1&&i!=-1&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=n_e.exec(e||""),a={},l=14;l--;)a[o_e[l]]=s[l]||"";return o!=-1&&i!=-1&&(a.source=r,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=i_e(a,a.path),a.queryKey=s_e(a,a.query),a};function i_e(t,e){var r=/\/{2,9}/g,o=e.replace(r,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&o.splice(0,1),e.substr(e.length-1,1)=="/"&&o.splice(o.length-1,1),o}function s_e(t,e){var r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(o,i,s){i&&(r[i]=s)}),r}});var vte=st((slt,gte)=>{var wC=1e3,TC=wC*60,DC=TC*60,cb=DC*24,a_e=cb*7,l_e=cb*365.25;gte.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return c_e(t);if(r==="number"&&isFinite(t))return e.long?u_e(t):d_e(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function c_e(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),o=(e[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return r*l_e;case"weeks":case"week":case"w":return r*a_e;case"days":case"day":case"d":return r*cb;case"hours":case"hour":case"hrs":case"hr":case"h":return r*DC;case"minutes":case"minute":case"mins":case"min":case"m":return r*TC;case"seconds":case"second":case"secs":case"sec":case"s":return r*wC;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function d_e(t){var e=Math.abs(t);return e>=cb?Math.round(t/cb)+"d":e>=DC?Math.round(t/DC)+"h":e>=TC?Math.round(t/TC)+"m":e>=wC?Math.round(t/wC)+"s":t+"ms"}function u_e(t){var e=Math.abs(t);return e>=cb?AI(t,e,cb,"day"):e>=DC?AI(t,e,DC,"hour"):e>=TC?AI(t,e,TC,"minute"):e>=wC?AI(t,e,wC,"second"):t+" ms"}function AI(t,e,r,o){var i=e>=r*1.5;return Math.round(t/r)+" "+o+(i?"s":"")}});var yte=st((alt,bte)=>{function p_e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=a,r.humanize=vte(),r.destroy=d,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let p=0;for(let h=0;h<u.length;h++)p=(p<<5)-p+u.charCodeAt(h),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(u){let p,h=null;function f(...m){if(!f.enabled)return;let g=f,v=Number(new Date),y=v-(p||v);g.diff=y,g.prev=p,g.curr=v,p=v,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let S=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(b,x)=>{if(b==="%%")return"%";S++;let w=r.formatters[x];if(typeof w=="function"){let k=m[S];b=w.call(g,k),m.splice(S,1),S--}return b}),r.formatArgs.call(g,m),(g.log||r.log).apply(g,m)}return f.namespace=u,f.useColors=r.useColors(),f.color=r.selectColor(u),f.extend=o,f.destroy=r.destroy,Object.defineProperty(f,"enabled",{enumerable:!0,configurable:!1,get:()=>h===null?r.enabled(u):h,set:m=>{h=m}}),typeof r.init=="function"&&r.init(f),f}function o(u,p){let h=r(this.namespace+(typeof p=="undefined"?":":p)+u);return h.log=this.log,h}function i(u){r.save(u),r.names=[],r.skips=[];let p,h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(p=0;p<f;p++)!h[p]||(u=h[p].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(l),...r.skips.map(l).map(p=>"-"+p)].join(",");return r.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let p,h;for(p=0,h=r.skips.length;p<h;p++)if(r.skips[p].test(u))return!1;for(p=0,h=r.names.length;p<h;p++)if(r.names[p].test(u))return!0;return!1}function l(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}bte.exports=p_e});var Ud=st((ql,II)=>{ql.formatArgs=f_e;ql.save=m_e;ql.load=g_e;ql.useColors=h_e;ql.storage=v_e();ql.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ql.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h_e(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function f_e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+II.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(o=r))}),t.splice(o,0,e)}ql.log=console.debug||console.log||(()=>{});function m_e(t){try{t?ql.storage.setItem("debug",t):ql.storage.removeItem("debug")}catch(e){}}function g_e(){let t;try{t=ql.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function v_e(){try{return localStorage}catch(t){}}II.exports=yte()(ql);var{formatters:b_e}=II.exports;b_e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ste=st(RI=>{"use strict";Object.defineProperty(RI,"__esModule",{value:!0});RI.url=void 0;var y_e=az(),Cte=Ud()("socket.io-client:url");function C_e(t,e="",r){let o=t;r=r||typeof location!="undefined"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(Cte("protocol-less url %s",t),typeof r!="undefined"?t=r.protocol+"//"+t:t="https://"+t),Cte("parse %s",t),o=y_e(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";let s=o.host.indexOf(":")!==-1?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port+e,o.href=o.protocol+"://"+s+(r&&r.port===o.port?"":":"+o.port),o}RI.url=C_e});var xte=st((clt,lz)=>{try{lz.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){lz.exports=!1}});var pT=st((dlt,wte)=>{wte.exports=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())()});var cz=st((ult,Tte)=>{var S_e=xte(),x_e=pT();Tte.exports=function(t){let e=t.xdomain,r=t.xscheme,o=t.enablesXDR;try{if(typeof XMLHttpRequest!="undefined"&&(!e||S_e))return new XMLHttpRequest}catch(i){}try{if(typeof XDomainRequest!="undefined"&&!r&&o)return new XDomainRequest}catch(i){}if(!e)try{return new x_e[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(i){}}});var dz=st((plt,kte)=>{var Qu=Object.create(null);Qu.open="0";Qu.close="1";Qu.ping="2";Qu.pong="3";Qu.message="4";Qu.upgrade="5";Qu.noop="6";var Dte=Object.create(null);Object.keys(Qu).forEach(t=>{Dte[Qu[t]]=t});var w_e={type:"error",data:"parser error"};kte.exports={PACKET_TYPES:Qu,PACKET_TYPES_REVERSE:Dte,ERROR_PACKET:w_e}});var _te=st((hlt,Ete)=>{var{PACKET_TYPES:T_e}=dz(),D_e=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",k_e=typeof ArrayBuffer=="function",P_e=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,E_e=({type:t,data:e},r,o)=>D_e&&e instanceof Blob?r?o(e):Pte(e,o):k_e&&(e instanceof ArrayBuffer||P_e(e))?r?o(e instanceof ArrayBuffer?e:e.buffer):Pte(new Blob([e]),o):o(T_e[t]+(e||"")),Pte=(t,e)=>{let r=new FileReader;return r.onload=function(){let o=r.result.split(",")[1];e("b"+o)},r.readAsDataURL(t)};Ete.exports=E_e});var Ate=st(uz=>{(function(t){"use strict";uz.encode=function(e){var r=new Uint8Array(e),o,i=r.length,s="";for(o=0;o<i;o+=3)s+=t[r[o]>>2],s+=t[(r[o]&3)<<4|r[o+1]>>4],s+=t[(r[o+1]&15)<<2|r[o+2]>>6],s+=t[r[o+2]&63];return i%3==2?s=s.substring(0,s.length-1)+"=":i%3==1&&(s=s.substring(0,s.length-2)+"=="),s},uz.decode=function(e){var r=e.length*.75,o=e.length,i,s=0,a,l,c,d;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var u=new ArrayBuffer(r),p=new Uint8Array(u);for(i=0;i<o;i+=4)a=t.indexOf(e[i]),l=t.indexOf(e[i+1]),c=t.indexOf(e[i+2]),d=t.indexOf(e[i+3]),p[s++]=a<<2|l>>4,p[s++]=(l&15)<<4|c>>2,p[s++]=(c&3)<<6|d&63;return u}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")});var Fte=st((mlt,Rte)=>{var{PACKET_TYPES_REVERSE:pz,ERROR_PACKET:A_e}=dz(),I_e=typeof ArrayBuffer=="function",hz;I_e&&(hz=Ate());var R_e=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ite(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:F_e(t.substring(1),e)}:pz[r]?t.length>1?{type:pz[r],data:t.substring(1)}:{type:pz[r]}:A_e},F_e=(t,e)=>{if(hz){let r=hz.decode(t);return Ite(r,e)}else return{base64:!0,data:t}},Ite=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};Rte.exports=R_e});var kC=st((glt,Lte)=>{var Mte=_te(),Nte=Fte(),Bte=String.fromCharCode(30),M_e=(t,e)=>{let r=t.length,o=new Array(r),i=0;t.forEach((s,a)=>{Mte(s,!1,l=>{o[a]=l,++i===r&&e(o.join(Bte))})})},N_e=(t,e)=>{let r=t.split(Bte),o=[];for(let i=0;i<r.length;i++){let s=Nte(r[i],e);if(o.push(s),s.type==="error")break}return o};Lte.exports={protocol:4,encodePacket:Mte,encodePayload:M_e,decodePacket:Nte,decodePayload:N_e}});var PC=st((vlt,fz)=>{typeof fz!="undefined"&&(fz.exports=Yl);function Yl(t){if(t)return B_e(t)}function B_e(t){for(var e in Yl.prototype)t[e]=Yl.prototype[e];return t}Yl.prototype.on=Yl.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Yl.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Yl.prototype.off=Yl.prototype.removeListener=Yl.prototype.removeAllListeners=Yl.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var o,i=0;i<r.length;i++)if(o=r[i],o===e||o.fn===e){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Yl.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(r){r=r.slice(0);for(var o=0,i=r.length;o<i;++o)r[o].apply(this,e)}return this};Yl.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Yl.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var FI=st((blt,zte)=>{var L_e=kC(),O_e=PC(),z_e=Ud()("engine.io-client:transport"),Ote=class extends O_e{constructor(e){super();this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r){let o=new Error(e);return o.type="TransportError",o.description=r,this.emit("error",o),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):z_e("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(e){let r=L_e.decodePacket(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){this.emit("packet",e)}onClose(){this.readyState="closed",this.emit("close")}};zte.exports=Ote});var MI=st(mz=>{mz.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e};mz.decode=function(t){for(var e={},r=t.split("&"),o=0,i=r.length;o<i;o++){var s=r[o].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}});var bz=st((Clt,$te)=>{"use strict";var Ute="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),NI=64,Hte={},Gte=0,zm=0,Vte;function gz(t){var e="";do e=Ute[t%NI]+e,t=Math.floor(t/NI);while(t>0);return e}function U_e(t){var e=0;for(zm=0;zm<t.length;zm++)e=e*NI+Hte[t.charAt(zm)];return e}function vz(){var t=gz(+new Date);return t!==Vte?(Gte=0,Vte=t):t+"."+gz(Gte++)}for(;zm<NI;zm++)Hte[Ute[zm]]=zm;vz.encode=gz;vz.decode=U_e;$te.exports=vz});var yz=st((Slt,Kte)=>{var H_e=FI(),G_e=MI(),Wte=kC(),V_e=bz(),Hd=Ud()("engine.io-client:polling"),jte=class extends H_e{get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{Hd("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let o=0;this.polling&&(Hd("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){Hd("pre-pause polling complete"),--o||r()})),this.writable||(Hd("we are currently writing - waiting to pause"),o++,this.once("drain",function(){Hd("pre-pause writing complete"),--o||r()}))}else r()}poll(){Hd("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){Hd("polling got data %s",e);let r=o=>{if(this.readyState==="opening"&&o.type==="open"&&this.onOpen(),o.type==="close")return this.onClose(),!1;this.onPacket(o)};Wte.decodePayload(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():Hd('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{Hd("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Hd("transport open - closing"),e()):(Hd("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,Wte.encodePayload(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{},r=this.opts.secure?"https":"http",o="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=V_e()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=G_e.encode(e),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(o=":"+this.opts.port),e.length&&(e="?"+e);let i=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+o+this.opts.path+e}};Kte.exports=jte});var Cz=st((xlt,qte)=>{qte.exports.pick=(t,...e)=>e.reduce((r,o)=>(t.hasOwnProperty(o)&&(r[o]=t[o]),r),{})});var Zte=st((wlt,xz)=>{var Yte=cz(),$_e=yz(),W_e=PC(),{pick:j_e}=Cz(),K_e=pT(),Sz=Ud()("engine.io-client:polling-xhr");function Xte(){}var q_e=function(){return new Yte({xdomain:!1}).responseType!=null}(),Qte=class extends $_e{constructor(e){super(e);if(typeof location!="undefined"){let o=location.protocol==="https:",i=location.port;i||(i=o?443:80),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||i!==e.port,this.xs=e.secure!==o}let r=e&&e.forceBase64;this.supportsBinary=q_e&&!r}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Uc(this.uri(),e)}doWrite(e,r){let o=this.request({method:"POST",data:e});o.on("success",r),o.on("error",i=>{this.onError("xhr post error",i)})}doPoll(){Sz("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",r=>{this.onError("xhr poll error",r)}),this.pollXhr=e}},Uc=class extends W_e{constructor(e,r){super();this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){let e=j_e(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;let r=this.xhr=new Yte(e);try{Sz("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.opts.extraHeaders[o])}}catch(o){}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{r.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),this.hasXDR()?(r.onload=()=>{this.onLoad()},r.onerror=()=>{this.onError(r.responseText)}):r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():setTimeout(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},Sz("xhr data %s",this.data),r.send(this.data)}catch(o){setTimeout(()=>{this.onError(o)},0);return}typeof document!="undefined"&&(this.index=Uc.requestsCount++,Uc.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Xte:this.xhr.onreadystatechange=Xte,e)try{this.xhr.abort()}catch(r){}typeof document!="undefined"&&delete Uc.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&this.onData(e)}hasXDR(){return typeof XDomainRequest!="undefined"&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}};Uc.requestsCount=0;Uc.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Jte);else if(typeof addEventListener=="function"){let t="onpagehide"in K_e?"pagehide":"unload";addEventListener(t,Jte,!1)}}function Jte(){for(let t in Uc.requests)Uc.requests.hasOwnProperty(t)&&Uc.requests[t].abort()}xz.exports=Qte;xz.exports.Request=Uc});var nre=st((Tlt,rre)=>{var Y_e=yz(),ere=pT(),X_e=/\n/g,Q_e=/\\n/g,BI,tre=class extends Y_e{constructor(e){super(e);this.query=this.query||{},BI||(BI=ere.___eio=ere.___eio||[]),this.index=BI.length,BI.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){let e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=i=>{this.onError("jsonp poll error",i)};let r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e,typeof navigator!="undefined"&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){let i=document.createElement("iframe");document.body.appendChild(i),document.body.removeChild(i)},100)}doWrite(e,r){let o;if(!this.form){let a=document.createElement("form"),l=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=c,a.method="POST",a.setAttribute("accept-charset","utf-8"),l.name="d",a.appendChild(l),document.body.appendChild(a),this.form=a,this.area=l}this.form.action=this.uri();function i(){s(),r()}let s=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(a){this.onError("jsonp polling iframe removal error",a)}try{let a='<iframe src="javascript:0" name="'+this.iframeId+'">';o=document.createElement(a)}catch(a){o=document.createElement("iframe"),o.name=this.iframeId,o.src="javascript:0"}o.id=this.iframeId,this.form.appendChild(o),this.iframe=o};s(),e=e.replace(Q_e,`\\
`),this.area.value=e.replace(X_e,"\\n");try{this.form.submit()}catch(a){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{this.iframe.readyState==="complete"&&i()}:this.iframe.onload=i}};rre.exports=tre});var sre=st((Dlt,ire)=>{var ore=pT(),J_e=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):e=>setTimeout(e,0))();ire.exports={WebSocket:ore.WebSocket||ore.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:J_e}});var dre=st((klt,cre)=>{var are=FI(),Z_e=kC(),eAe=MI(),tAe=bz(),{pick:rAe}=Cz(),{WebSocket:hT,usingBrowserWebSocket:wz,defaultBinaryType:nAe,nextTick:oAe}=sre(),iAe=Ud()("engine.io-client:websocket"),lre=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",LI=class extends are{constructor(e){super(e);this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,o=lre?{}:rAe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(o.headers=this.opts.extraHeaders);try{this.ws=wz&&!lre?r?new hT(e,r):new hT(e):new hT(e,r,o)}catch(i){return this.emit("error",i)}this.ws.binaryType=this.socket.binaryType||nAe,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let o=e[r],i=r===e.length-1;Z_e.encodePacket(o,this.supportsBinary,s=>{let a={};wz||(o.options&&(a.compress=o.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?Buffer.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(a.compress=!1));try{wz?this.ws.send(s):this.ws.send(s,a)}catch(l){iAe("websocket closed before onclose event")}i&&oAe(()=>{this.writable=!0,this.emit("drain")})})}}onClose(){are.prototype.onClose.call(this)}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{},r=this.opts.secure?"wss":"ws",o="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(o=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=tAe()),this.supportsBinary||(e.b64=1),e=eAe.encode(e),e.length&&(e="?"+e);let i=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+o+this.opts.path+e}check(){return!!hT&&!("__initialize"in hT&&this.name===LI.prototype.name)}};cre.exports=LI});var Dz=st(Tz=>{var sAe=cz(),aAe=Zte(),lAe=nre(),cAe=dre();Tz.polling=dAe;Tz.websocket=cAe;function dAe(t){let e,r=!1,o=!1,i=t.jsonp!==!1;if(typeof location!="undefined"){let s=location.protocol==="https:",a=location.port;a||(a=s?443:80),r=t.hostname!==location.hostname||a!==t.port,o=t.secure!==s}if(t.xdomain=r,t.xscheme=o,e=new sAe(t),"open"in e&&!t.forceJSONP)return new aAe(t);if(!i)throw new Error("JSONP disabled");return new lAe(t)}});var fre=st((Elt,hre)=>{var uAe=Dz(),pAe=PC(),Hi=Ud()("engine.io-client:socket"),ure=kC(),pre=az(),hAe=MI(),Ju=class extends pAe{constructor(e,r={}){super();e&&typeof e=="object"&&(r=e,e=null),e?(e=pre(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=pre(r.host).host),this.secure=r.secure!=null?r.secure:typeof location!="undefined"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=r.port||(typeof location!="undefined"&&location.port?location.port:this.secure?443:80),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=hAe.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){Hi('creating transport "%s"',e);let r=fAe(this.opts.query);r.EIO=ure.protocol,r.transport=e,this.id&&(r.sid=this.id);let o=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return Hi("options: %j",o),new uAe[e](o)}open(){let e;if(this.opts.rememberUpgrade&&Ju.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){setTimeout(()=>{this.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(r){Hi("error while creating transport: %s",r),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){Hi("setting transport %s",e.name),this.transport&&(Hi("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){Hi('probing transport "%s"',e);let r=this.createTransport(e,{probe:1}),o=!1;Ju.priorWebsocketSuccess=!1;let i=()=>{o||(Hi('probe transport "%s" opened',e),r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{if(!o)if(p.type==="pong"&&p.data==="probe"){if(Hi('probe transport "%s" pong',e),this.upgrading=!0,this.emit("upgrading",r),!r)return;Ju.priorWebsocketSuccess=r.name==="websocket",Hi('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{o||this.readyState!=="closed"&&(Hi("changing transport and sending upgrade packet"),u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emit("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{Hi('probe transport "%s" failed',e);let h=new Error("probe error");h.transport=r.name,this.emit("upgradeError",h)}}))};function s(){o||(o=!0,u(),r.close(),r=null)}let a=p=>{let h=new Error("probe error: "+p);h.transport=r.name,s(),Hi('probe transport "%s" failed because of error: %s',e,p),this.emit("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function d(p){r&&p.name!==r.name&&(Hi('"%s" works - aborting "%s"',p.name,r.name),s())}let u=()=>{r.removeListener("open",i),r.removeListener("error",a),r.removeListener("close",l),this.removeListener("close",c),this.removeListener("upgrading",d)};r.once("open",i),r.once("error",a),r.once("close",l),this.once("close",c),this.once("upgrading",d),r.open()}onOpen(){if(Hi("socket open"),this.readyState="open",Ju.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){Hi("starting upgrade probes");let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Hi('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else Hi('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Hi("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(e,r,o){return this.sendPacket("message",e,r,o),this}send(e,r,o){return this.sendPacket("message",e,r,o),this}sendPacket(e,r,o,i){if(typeof r=="function"&&(i=r,r=void 0),typeof o=="function"&&(i=o,o=null),this.readyState==="closing"||this.readyState==="closed")return;o=o||{},o.compress=o.compress!==!1;let s={type:e,data:r,options:o};this.emit("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){let e=()=>{this.onClose("forced close"),Hi("socket closing - telling transport to close"),this.transport.close()},r=()=>{this.removeListener("upgrade",r),this.removeListener("upgradeError",r),e()},o=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?o():e()}):this.upgrading?o():e()),this}onError(e){Hi("socket error %j",e),Ju.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(Hi('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],o=0,i=e.length;for(;o<i;o++)~this.transports.indexOf(e[o])&&r.push(e[o]);return r}};Ju.priorWebsocketSuccess=!1;Ju.protocol=ure.protocol;function fAe(t){let e={};for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}hre.exports=Ju});var mre=st((_lt,db)=>{var kz=fre();db.exports=(t,e)=>new kz(t,e);db.exports.Socket=kz;db.exports.protocol=kz.protocol;db.exports.Transport=FI();db.exports.transports=Dz();db.exports.parser=kC()});var Pz=st(EC=>{"use strict";Object.defineProperty(EC,"__esModule",{value:!0});EC.hasBinary=EC.isBinary=void 0;var mAe=typeof ArrayBuffer=="function",gAe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,gre=Object.prototype.toString,vAe=typeof Blob=="function"||typeof Blob!="undefined"&&gre.call(Blob)==="[object BlobConstructor]",bAe=typeof File=="function"||typeof File!="undefined"&&gre.call(File)==="[object FileConstructor]";function vre(t){return mAe&&(t instanceof ArrayBuffer||gAe(t))||vAe&&t instanceof Blob||bAe&&t instanceof File}EC.isBinary=vre;function OI(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,o=t.length;r<o;r++)if(OI(t[r]))return!0;return!1}if(vre(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return OI(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&OI(t[r]))return!0;return!1}EC.hasBinary=OI});var bre=st(_C=>{"use strict";Object.defineProperty(_C,"__esModule",{value:!0});_C.reconstructPacket=_C.deconstructPacket=void 0;var yAe=Pz();function CAe(t){let e=[],r=t.data,o=t;return o.data=Ez(r,e),o.attachments=e.length,{packet:o,buffers:e}}_C.deconstructPacket=CAe;function Ez(t,e){if(!t)return t;if(yAe.isBinary(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let o=0;o<t.length;o++)r[o]=Ez(t[o],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let o in t)t.hasOwnProperty(o)&&(r[o]=Ez(t[o],e));return r}return t}function SAe(t,e){return t.data=_z(t.data,e),t.attachments=void 0,t}_C.reconstructPacket=SAe;function _z(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=_z(t[r],e);else if(typeof t=="object")for(let r in t)t.hasOwnProperty(r)&&(t[r]=_z(t[r],e));return t}});var UI=st(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.Decoder=Gd.Encoder=Gd.PacketType=Gd.protocol=void 0;var xAe=PC(),yre=bre(),Cre=Pz(),Az=Ud()("socket.io-parser");Gd.protocol=5;var ns;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ns=Gd.PacketType||(Gd.PacketType={}));var Sre=class{encode(e){return Az("encoding packet %j",e),(e.type===ns.EVENT||e.type===ns.ACK)&&Cre.hasBinary(e)?(e.type=e.type===ns.EVENT?ns.BINARY_EVENT:ns.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===ns.BINARY_EVENT||e.type===ns.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data)),Az("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=yre.deconstructPacket(e),o=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(o),i}};Gd.Encoder=Sre;var zI=class extends xAe{constructor(){super()}add(e){let r;if(typeof e=="string")r=this.decodeString(e),r.type===ns.BINARY_EVENT||r.type===ns.BINARY_ACK?(this.reconstructor=new xre(r),r.attachments===0&&super.emit("decoded",r)):super.emit("decoded",r);else if(Cre.isBinary(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emit("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,o={type:Number(e.charAt(0))};if(ns[o.type]===void 0)throw new Error("unknown packet type "+o.type);if(o.type===ns.BINARY_EVENT||o.type===ns.BINARY_ACK){let s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let a=e.substring(s,r);if(a!=Number(a)||e.charAt(r)!=="-")throw new Error("Illegal attachments");o.attachments=Number(a)}if(e.charAt(r+1)==="/"){let s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););o.nsp=e.substring(s,r)}else o.nsp="/";let i=e.charAt(r+1);if(i!==""&&Number(i)==i){let s=r+1;for(;++r;){let a=e.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===e.length)break}o.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){let s=wAe(e.substr(r));if(zI.isPayloadValid(o.type,s))o.data=s;else throw new Error("invalid payload")}return Az("decoded %s as %j",e,o),o}static isPayloadValid(e,r){switch(e){case ns.CONNECT:return typeof r=="object";case ns.DISCONNECT:return r===void 0;case ns.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case ns.EVENT:case ns.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case ns.ACK:case ns.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}};Gd.Decoder=zI;function wAe(t){try{return JSON.parse(t)}catch(e){return!1}}var xre=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=yre.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}});var Iz=st(HI=>{"use strict";Object.defineProperty(HI,"__esModule",{value:!0});HI.on=void 0;function TAe(t,e,r){return t.on(e,r),function(){t.off(e,r)}}HI.on=TAe});var Rz=st(GI=>{"use strict";Object.defineProperty(GI,"__esModule",{value:!0});GI.StrictEventEmitter=void 0;var DAe=PC(),wre=class extends DAe{on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}emit(e,...r){return super.emit(e,...r),this}emitReserved(e,...r){return super.emit(e,...r),this}listeners(e){return super.listeners(e)}};GI.StrictEventEmitter=wre});var Fz=st($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.Socket=void 0;var Hc=UI(),VI=Iz(),kAe=Rz(),Gc=Ud()("socket.io-client:socket"),PAe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Tre=class extends kAe.StrictEventEmitter{constructor(e,r,o){super();this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},o&&o.auth&&(this.auth=o.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;let e=this.io;this.subs=[VI.on(e,"open",this.onopen.bind(this)),VI.on(e,"packet",this.onpacket.bind(this)),VI.on(e,"error",this.onerror.bind(this)),VI.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(PAe.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');r.unshift(e);let o={type:Hc.PacketType.EVENT,data:r};o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"&&(Gc("emitting packet with ack id %d",this.ids),this.acks[this.ids]=r.pop(),o.id=this.ids++);let i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)?Gc("discard packet as the transport is not currently writable"):this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Gc("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this.packet({type:Hc.PacketType.CONNECT,data:e})}):this.packet({type:Hc.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){Gc("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Hc.PacketType.CONNECT:if(e.data&&e.data.sid){let i=e.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Hc.PacketType.EVENT:this.onevent(e);break;case Hc.PacketType.BINARY_EVENT:this.onevent(e);break;case Hc.PacketType.ACK:this.onack(e);break;case Hc.PacketType.BINARY_ACK:this.onack(e);break;case Hc.PacketType.DISCONNECT:this.ondisconnect();break;case Hc.PacketType.CONNECT_ERROR:let o=new Error(e.data.message);o.data=e.data.data,this.emitReserved("connect_error",o);break}}onevent(e){let r=e.data||[];Gc("emitting event %j",r),e.id!=null&&(Gc("attaching ack callback to event"),r.push(this.ack(e.id))),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let o of r)o.apply(this,e)}super.emit.apply(this,e)}ack(e){let r=this,o=!1;return function(...i){o||(o=!0,Gc("sending ack %j",i),r.packet({type:Hc.PacketType.ACK,id:e,data:i}))}}onack(e){let r=this.acks[e.id];typeof r=="function"?(Gc("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),delete this.acks[e.id]):Gc("bad ack %s",e.id)}onconnect(e){Gc("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){Gc("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Gc("performing disconnect (%s)",this.nsp),this.packet({type:Hc.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let o=0;o<r.length;o++)if(e===r[o])return r.splice(o,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}};$I.Socket=Tre});var kre=st((Blt,Dre)=>{Dre.exports=AC;function AC(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}AC.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};AC.prototype.reset=function(){this.attempts=0};AC.prototype.setMin=function(t){this.ms=t};AC.prototype.setMax=function(t){this.max=t};AC.prototype.setJitter=function(t){this.jitter=t}});var Mz=st(WI=>{"use strict";Object.defineProperty(WI,"__esModule",{value:!0});WI.Manager=void 0;var EAe=mre(),_Ae=Fz(),AAe=UI(),ub=Iz(),IAe=kre(),RAe=Rz(),oa=Ud()("socket.io-client:manager"),Pre=class extends RAe.StrictEventEmitter{constructor(e,r){super();this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor(r.randomizationFactor||.5),this.backoff=new IAe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let o=r.parser||AAe;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(oa("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;oa("opening %s",this.uri),this.engine=EAe(this.uri,this.opts);let r=this.engine,o=this;this._readyState="opening",this.skipReconnect=!1;let i=ub.on(r,"open",function(){o.onopen(),e&&e()}),s=ub.on(r,"error",a=>{oa("error"),o.cleanup(),o._readyState="closed",this.emitReserved("error",a),e?e(a):o.maybeReconnectOnOpen()});if(this._timeout!==!1){let a=this._timeout;oa("connect attempt will timeout after %d",a),a===0&&i();let l=setTimeout(()=>{oa("connect attempt timed out after %d",a),i(),r.close(),r.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){oa("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(ub.on(e,"ping",this.onping.bind(this)),ub.on(e,"data",this.ondata.bind(this)),ub.on(e,"error",this.onerror.bind(this)),ub.on(e,"close",this.onclose.bind(this)),ub.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){oa("error",e),this.emitReserved("error",e)}socket(e,r){let o=this.nsps[e];return o||(o=new _Ae.Socket(this,e,r),this.nsps[e]=o),o}_destroy(e){let r=Object.keys(this.nsps);for(let o of r)if(this.nsps[o].active){oa("socket %s is still active, skipping close",o);return}this._close()}_packet(e){oa("writing packet %j",e);let r=this.encoder.encode(e);for(let o=0;o<r.length;o++)this.engine.write(r[o],e.options)}cleanup(){oa("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){oa("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this._readyState==="opening"&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){oa("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)oa("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();oa("will wait %dms before reconnect attempt",r),this._reconnecting=!0;let o=setTimeout(()=>{e.skipReconnect||(oa("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(oa("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):(oa("reconnect success"),e.onreconnect())}))},r);this.opts.autoUnref&&o.unref(),this.subs.push(function(){clearTimeout(o)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};WI.Manager=Pre});var Ire=st((hl,Are)=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.io=hl.Socket=hl.Manager=hl.protocol=void 0;var FAe=Ste(),Ere=Mz(),_re=Ud()("socket.io-client");Are.exports=hl=jI;var fT=hl.managers={};function jI(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=FAe.url(t,e.path||"/socket.io"),o=r.source,i=r.id,s=r.path,a=fT[i]&&s in fT[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a,c;return l?(_re("ignoring socket cache for %s",o),c=new Ere.Manager(o,e)):(fT[i]||(_re("new io instance for %s",o),fT[i]=new Ere.Manager(o,e)),c=fT[i]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}hl.io=jI;var MAe=UI();Object.defineProperty(hl,"protocol",{enumerable:!0,get:function(){return MAe.protocol}});hl.connect=jI;var NAe=Mz();Object.defineProperty(hl,"Manager",{enumerable:!0,get:function(){return NAe.Manager}});var BAe=Fz();Object.defineProperty(hl,"Socket",{enumerable:!0,get:function(){return BAe.Socket}});hl.default=jI});var Jre=st((cdt,Qre)=>{"use strict";var zAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Qre.exports=zAe});var rne=st((ddt,tne)=>{"use strict";var UAe=Jre();function Zre(){}function ene(){}ene.resetWarningCache=Zre;tne.exports=function(){function t(o,i,s,a,l,c){if(c!==UAe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ene,resetWarningCache:Zre};return r.PropTypes=r,r}});var Lz=st((hdt,nne)=>{nne.exports=rne()();var udt,pdt});var f2=st((IT,cU)=>{"use strict";Object.defineProperty(IT,"__esModule",{value:!0});IT.default=lIe;function h2(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h2=function(r){return typeof r}:h2=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},h2(t)}function lIe(t){var e=typeof t=="string"||t instanceof String;if(!e){var r=h2(t);throw t===null?r="null":r==="object"&&(r=t.constructor.name),new TypeError("Expected a string but received a ".concat(r))}}cU.exports=IT.default;cU.exports.default=IT.default});var uU=st((RT,dU)=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});RT.default=cIe;function cIe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var r in e)typeof t[r]=="undefined"&&(t[r]=e[r]);return t}dU.exports=RT.default;dU.exports.default=RT.default});var Rne=st((FT,pU)=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0});FT.default=hIe;var dIe=Ine(f2()),uIe=Ine(uU());function Ine(t){return t&&t.__esModule?t:{default:t}}var pIe={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};function hIe(t,e){(0,dIe.default)(t),e=(0,uIe.default)(e,pIe),e.allow_trailing_dot&&t[t.length-1]==="."&&(t=t.substring(0,t.length-1)),e.allow_wildcard===!0&&t.indexOf("*.")===0&&(t=t.substring(2));var r=t.split("."),o=r[r.length-1];return e.require_tld&&(r.length<2||!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(o)||/\s/.test(o))||!e.allow_numeric_tld&&/^\d+$/.test(o)?!1:r.every(function(i){return!(i.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!e.allow_underscores&&/_/.test(i))})}pU.exports=FT.default;pU.exports.default=FT.default});var Mne=st((MT,fU)=>{"use strict";Object.defineProperty(MT,"__esModule",{value:!0});MT.default=hU;var fIe=mIe(f2());function mIe(t){return t&&t.__esModule?t:{default:t}}var Fne="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",Gm="(".concat(Fne,"[.]){3}").concat(Fne),gIe=new RegExp("^".concat(Gm,"$")),is="(?:[0-9a-fA-F]{1,4})",vIe=new RegExp("^("+"(?:".concat(is,":){7}(?:").concat(is,"|:)|")+"(?:".concat(is,":){6}(?:").concat(Gm,"|:").concat(is,"|:)|")+"(?:".concat(is,":){5}(?::").concat(Gm,"|(:").concat(is,"){1,2}|:)|")+"(?:".concat(is,":){4}(?:(:").concat(is,"){0,1}:").concat(Gm,"|(:").concat(is,"){1,3}|:)|")+"(?:".concat(is,":){3}(?:(:").concat(is,"){0,2}:").concat(Gm,"|(:").concat(is,"){1,4}|:)|")+"(?:".concat(is,":){2}(?:(:").concat(is,"){0,3}:").concat(Gm,"|(:").concat(is,"){1,5}|:)|")+"(?:".concat(is,":){1}(?:(:").concat(is,"){0,4}:").concat(Gm,"|(:").concat(is,"){1,6}|:)|")+"(?::((?::".concat(is,"){0,5}:").concat(Gm,"|(?::").concat(is,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function hU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if((0,fIe.default)(t),e=String(e),!e)return hU(t,4)||hU(t,6);if(e==="4"){if(!gIe.test(t))return!1;var r=t.split(".").sort(function(o,i){return o-i});return r[3]<=255}return e==="6"?!!vIe.test(t):!1}fU.exports=MT.default;fU.exports.default=MT.default});var gU=st((NT,mU)=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});NT.default=_Ie;var bIe=m2(f2()),yIe=m2(Rne()),Nne=m2(Mne()),CIe=m2(uU());function m2(t){return t&&t.__esModule?t:{default:t}}function SIe(t,e){return DIe(t)||TIe(t,e)||wIe(t,e)||xIe()}function xIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wIe(t,e){if(!!t){if(typeof t=="string")return Bne(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bne(t,e)}}function Bne(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function TIe(t,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var r=[],o=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),l;!(o=(l=a.next()).done)&&(r.push(l.value),!(e&&r.length===e));o=!0);}catch(c){i=!0,s=c}finally{try{!o&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}}function DIe(t){if(Array.isArray(t))return t}var kIe={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},PIe=/^\[([^\]]+)\](?::([0-9]+))?$/;function EIe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Lne(t,e){for(var r=0;r<e.length;r++){var o=e[r];if(t===o||EIe(o)&&o.test(t))return!0}return!1}function _Ie(t,e){if((0,bIe.default)(t),!t||/[\s<>]/.test(t)||t.indexOf("mailto:")===0||(e=(0,CIe.default)(e,kIe),e.validate_length&&t.length>=2083)||!e.allow_fragments&&t.includes("#")||!e.allow_query_components&&(t.includes("?")||t.includes("&")))return!1;var r,o,i,s,a,l,c,d;if(c=t.split("#"),t=c.shift(),c=t.split("?"),t=c.shift(),c=t.split("://"),c.length>1){if(r=c.shift().toLowerCase(),e.require_valid_protocol&&e.protocols.indexOf(r)===-1)return!1}else{if(e.require_protocol)return!1;if(t.substr(0,2)==="//"){if(!e.allow_protocol_relative_urls)return!1;c[0]=t.substr(2)}}if(t=c.join("://"),t==="")return!1;if(c=t.split("/"),t=c.shift(),t===""&&!e.require_host)return!0;if(c=t.split("@"),c.length>1){if(e.disallow_auth||c[0]===""||(o=c.shift(),o.indexOf(":")>=0&&o.split(":").length>2))return!1;var u=o.split(":"),p=SIe(u,2),h=p[0],f=p[1];if(h===""&&f==="")return!1}s=c.join("@"),l=null,d=null;var m=s.match(PIe);if(m?(i="",d=m[1],l=m[2]||null):(c=s.split(":"),i=c.shift(),c.length&&(l=c.join(":"))),l!==null&&l.length>0){if(a=parseInt(l,10),!/^[0-9]+$/.test(l)||a<=0||a>65535)return!1}else if(e.require_port)return!1;return e.host_whitelist?Lne(i,e.host_whitelist):!(!(0,Nne.default)(i)&&!(0,yIe.default)(i,e)&&(!d||!(0,Nne.default)(d,6))||(i=i||d,e.host_blacklist&&Lne(i,e.host_blacklist)))}mU.exports=NT.default;mU.exports.default=NT.default});var jne=st((Rbt,Wne)=>{"use strict";function UIe(t){return t>=55296&&t<=56319}function HIe(t){return t>=56320&&t<=57343}Wne.exports=function(e,r,o){if(typeof r!="string")throw new Error("Input must be string");for(var i=r.length,s=0,a,l,c=0;c<i;c+=1){if(a=r.charCodeAt(c),l=r[c],UIe(a)&&HIe(r.charCodeAt(c+1))&&(c+=1,l+=r[c]),s+=e(l),s===o)return r.slice(0,c+1);if(s>o)return r.slice(0,c-l.length+1)}return r}});var qne=st((Fbt,Kne)=>{"use strict";function GIe(t){return t>=55296&&t<=56319}function VIe(t){return t>=56320&&t<=57343}Kne.exports=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var r=e.length,o=0,i=null,s=null,a=0;a<r;a++)i=e.charCodeAt(a),VIe(i)?s!=null&&GIe(s)?o+=1:o+=3:i<=127?o+=1:i>=128&&i<=2047?o+=2:i>=2048&&i<=65535&&(o+=3),s=i;return o}});var Xne=st((Mbt,Yne)=>{"use strict";var $Ie=jne(),WIe=qne();Yne.exports=$Ie.bind(null,WIe)});var Zne=st((Nbt,Jne)=>{"use strict";var jIe=Xne(),KIe=/[\/\?<>\\:\*\|"]/g,qIe=/[\x00-\x1f\x80-\x9f]/g,YIe=/^\.+$/,XIe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,QIe=/[\. ]+$/;function Qne(t,e){if(typeof t!="string")throw new Error("Input must be string");var r=t.replace(KIe,e).replace(qIe,e).replace(YIe,e).replace(XIe,e).replace(QIe,e);return jIe(r,255)}Jne.exports=function(t,e){var r=e&&e.replacement||"",o=Qne(t,r);return r===""?o:Qne(o,"")}});var lS=st((g8,gse)=>{(function(t){"use strict";var e=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g;return function(d,u,p,h){if(arguments.length===1&&s(d)==="string"&&!/\d/.test(d)&&(u=d,d=void 0),d=d||new Date,d instanceof Date||(d=new Date(d)),isNaN(d))throw TypeError("Invalid date");u=String(e.masks[u]||u||e.masks.default);var f=u.slice(0,4);(f==="UTC:"||f==="GMT:")&&(u=u.slice(4),p=!0,f==="GMT:"&&(h=!0));var m=p?"getUTC":"get",g=d[m+"Date"](),v=d[m+"Day"](),y=d[m+"Month"](),S=d[m+"FullYear"](),C=d[m+"Hours"](),b=d[m+"Minutes"](),x=d[m+"Seconds"](),w=d[m+"Milliseconds"](),k=p?0:d.getTimezoneOffset(),T=o(d),A=i(d),E={d:g,dd:r(g),ddd:e.i18n.dayNames[v],dddd:e.i18n.dayNames[v+7],m:y+1,mm:r(y+1),mmm:e.i18n.monthNames[y],mmmm:e.i18n.monthNames[y+12],yy:String(S).slice(2),yyyy:S,h:C%12||12,hh:r(C%12||12),H:C,HH:r(C),M:b,MM:r(b),s:x,ss:r(x),l:r(w,3),L:r(Math.round(w/10)),t:C<12?e.i18n.timeNames[0]:e.i18n.timeNames[1],tt:C<12?e.i18n.timeNames[2]:e.i18n.timeNames[3],T:C<12?e.i18n.timeNames[4]:e.i18n.timeNames[5],TT:C<12?e.i18n.timeNames[6]:e.i18n.timeNames[7],Z:h?"GMT":p?"UTC":(String(d).match(l)||[""]).pop().replace(c,""),o:(k>0?"-":"+")+r(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),S:["th","st","nd","rd"][g%10>3?0:(g%100-g%10!=10)*g%10],W:T,N:A};return u.replace(a,function(F){return F in E?E[F]:F.slice(1,F.length-1)})}}();e.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},e.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};function r(a,l){for(a=String(a),l=l||2;a.length<l;)a="0"+a;return a}function o(a){var l=new Date(a.getFullYear(),a.getMonth(),a.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);var c=new Date(l.getFullYear(),0,4);c.setDate(c.getDate()-(c.getDay()+6)%7+3);var d=l.getTimezoneOffset()-c.getTimezoneOffset();l.setHours(l.getHours()-d);var u=(l-c)/(864e5*7);return 1+Math.floor(u)}function i(a){var l=a.getDay();return l===0&&(l=7),l}function s(a){return a===null?"null":a===void 0?"undefined":typeof a!="object"?typeof a:Array.isArray(a)?"array":{}.toString.call(a).slice(8,-1).toLowerCase()}typeof define=="function"&&define.amd?define(function(){return e}):typeof g8=="object"?gse.exports=e:t.dateFormat=e})(g8)});var Ele=st((o5,i5)=>{(function(t,e){typeof o5=="object"&&typeof i5!="undefined"?i5.exports=e(Dm()):typeof define=="function"&&define.amd?define(["dayjs"],e):t.dayjs_locale_ja=e(t.dayjs)})(o5,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={name:"ja",weekdays:"\u65E5\u66DC\u65E5_\u6708\u66DC\u65E5_\u706B\u66DC\u65E5_\u6C34\u66DC\u65E5_\u6728\u66DC\u65E5_\u91D1\u66DC\u65E5_\u571F\u66DC\u65E5".split("_"),weekdaysShort:"\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F".split("_"),weekdaysMin:"\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F".split("_"),months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(r){return r+"\u65E5"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5 HH:mm",LLLL:"YYYY\u5E74M\u6708D\u65E5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5(ddd) HH:mm"},meridiem:function(r){return r<12?"\u5348\u524D":"\u5348\u5F8C"},relativeTime:{future:"%s\u5F8C",past:"%s\u524D",s:"\u6570\u79D2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65E5",dd:"%d\u65E5",M:"1\u30F6\u6708",MM:"%d\u30F6\u6708",y:"1\u5E74",yy:"%d\u5E74"}};return t.locale(e,null,!0),e})});var _le=st((s5,a5)=>{(function(t,e){typeof s5=="object"&&typeof a5!="undefined"?a5.exports=e():typeof define=="function"&&define.amd?define(e):t.dayjs_locale_en=e()})(s5,function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")}})});var Ale=st((l5,c5)=>{(function(t,e){typeof l5=="object"&&typeof c5!="undefined"?c5.exports=e(Dm()):typeof define=="function"&&define.amd?define(["dayjs"],e):t.dayjs_locale_zh_tw=e(t.dayjs)})(l5,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={name:"zh-tw",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u9031\u65E5_\u9031\u4E00_\u9031\u4E8C_\u9031\u4E09_\u9031\u56DB_\u9031\u4E94_\u9031\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(r){return r+"\u65E5"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5 HH:mm",LLLL:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5167",past:"%s\u524D",s:"\u5E7E\u79D2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5C0F\u6642",hh:"%d \u5C0F\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500B\u6708",MM:"%d \u500B\u6708",y:"1 \u5E74",yy:"%d \u5E74"}};return t.locale(e,null,!0),e})});var Vle=st((w5,T5)=>{(function(t,e){typeof w5=="object"&&typeof T5!="undefined"?T5.exports=e():typeof define=="function"&&define.amd?define(e):t.dayjs_plugin_localizedFormat=e()})(w5,function(){"use strict";return function(t,e,r){var o=e.prototype,i=o.format,s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};r.en.formats=s,o.format=function(a){a===void 0&&(a="YYYY-MM-DDTHH:mm:ssZ");var l=this.$locale().formats,c=l===void 0?{}:l,d=a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(u,p,h){var f=h&&h.toUpperCase();return p||c[h]||s[h]||c[f].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,g,v){return g||v.slice(1)})});return i.call(this,d)}}})});var $le=st((D5,k5)=>{(function(t,e){typeof D5=="object"&&typeof k5!="undefined"?k5.exports=e():typeof define=="function"&&define.amd?define(e):t.dayjs_plugin_relativeTime=e()})(D5,function(){"use strict";return function(t,e,r){t=t||{};var o=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};r.en.relativeTime=i;var s=function(l,c,d,u){for(var p,h,f,m=d.$locale().relativeTime||i,g=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=g.length,y=0;y<v;y+=1){var S=g[y];S.d&&(p=u?r(l).diff(d,S.d,!0):d.diff(l,S.d,!0));var C=(t.rounding||Math.round)(Math.abs(p));if(f=p>0,C<=S.r||!S.r){C<=1&&y>0&&(S=g[y-1]);var b=m[S.l];h=typeof b=="string"?b.replace("%d",C):b(C,c,S.l,f);break}}return c?h:(f?m.future:m.past).replace("%s",h)};o.to=function(l,c){return s(l,c,this,!0)},o.from=function(l,c){return s(l,c,this)};var a=function(l){return l.$u?r.utc():r()};o.toNow=function(l){return this.to(a(this),l)},o.fromNow=function(l){return this.from(a(this),l)}}})});var Wle=st((P5,E5)=>{(function(t,e){typeof P5=="object"&&typeof E5!="undefined"?E5.exports=e():typeof define=="function"&&define.amd?define(e):t.dayjs_plugin_updateLocale=e()})(P5,function(){"use strict";return function(t,e,r){r.updateLocale=function(o,i){var s=r.Ls[o];if(s)return(i?Object.keys(i):[]).forEach(function(a){s[a]=i[a]}),s}}})});function F5(t){return Promise.all(Array.from(t).map(e=>e instanceof Promise?e.then(r=>({status:"fulfilled",value:r})).catch(r=>({status:"rejected",reason:r})):Promise.resolve({status:"fulfilled",value:e})))}"allSettled"in Promise||(Promise.allSettled=F5.bind(Promise));typeof Path2D=="undefined"&&(globalThis.Path2D=class{addPath(e,r){}arc(e,r,o,i,s,a){}arcTo(e,r,o,i,s){}bezierCurveTo(e,r,o,i,s,a){}closePath(){}ellipse(e,r,o,i,s,a,l,c){}lineTo(e,r){}moveTo(e,r){}quadraticCurveTo(e,r,o,i){}rect(e,r,o,i){}});var B5=X(N5());function pce(){let t=new B5.DI,e={};t.set("devtool",e);function r(){t.reset()}return{reset:r,set apiClient(o){t.set("apiClient",o)},get apiClient(){return t.get("apiClient")},set lnsClient(o){t.set("lnsClient",o)},get lnsClient(){return t.get("lnsClient")},set shareClient(o){t.set("shareClient",o)},get shareClient(){return t.get("shareClient")},set initialState(o){t.set("initialState",o)},get initialState(){return t.get("initialState")},set res(o){t.set("res",o)},get res(){return t.get("res")},set pushClient(o){t.set("pushClient",o)},get pushClient(){return t.get("pushClient")},set fcmPushClient(o){t.set("fcmPushClient",o)},get fcmPushClient(){return t.get("fcmPushClient")},set pdf(o){t.set("pdf",o)},get pdf(){return t.get("pdf")},devtool:e,set idb(o){t.set("idb",o)},get idb(){return t.get("idb")},set fileManager(o){t.set("fileManager",o)},get fileManager(){return t.get("fileManager")},set localStorage(o){t.set("localStorage",o)},get localStorage(){return t.get("localStorage")}}}var ue=pce();var hce=()=>{},L5=["log","error","warn","groupCollapsed","table","groupEnd"],$h=new Map;for(let t of L5)$h.set(t,console[t].bind(console));var ge={setEnabled:O5,error:$h.get("error"),log:$h.get("log"),warn:$h.get("warn"),groupCollapsed:$h.get("groupCollapsed"),groupEnd:$h.get("groupEnd"),table:$h.get("table")};function O5(t){for(let e of L5)ge[e]=t?$h.get(e):hce}O5(!("process"in globalThis));var zR=X(he()),jle=X(Lk()),_5=X(Ok()),Kle=X(o7());var E7=X(he());var zn=X(he()),Yk=X(he());var i7=X(he()),s7=X(he()),qr=({className:t,role:e,disabled:r,disableAfterSubmit:o,onClick:i,children:s,...a})=>{let[l,c]=(0,s7.useState)(!1),d=r||o&&l,u;return!d&&i&&(u=p=>{i(p),o&&c(!0)}),i7.createElement("div",{className:"internalButton "+(t||""),role:e||"button","aria-disabled":d,"data-disabled":d,onClick:u,...a},s)};var qk=X(he());function ht(t,e,r){return Math.min(Math.max(t,e),r)}function uN(t,e){let r=Math.trunc(t/e);return t-e*r}function Tl(t,e){return Math.abs(t-e)<Number.EPSILON}function vp(t,e){return t>e&&!Tl(t,e)}function pc(t,e,r){let o=t/e;return Number.isFinite(o*t*e)?o:r}function bp(t){return isFinite(t)&&t>0}var hc=t=>typeof t=="string"&&t.length>0;function zk(...t){return function(r){return t.indexOf(r)>=0}}function ol(t){return typeof t=="string"}function Rx(t){return typeof t=="boolean"}function un(t){return typeof t=="number"}function pN(t){return typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t)}function nu(t){return e=>{if(!Array.isArray(e))return!1;if(typeof t=="function"){for(let r of e)if(!t(r))return!1}else for(let r of e)if(!fa(r,t))return!1;return!0}}var ci=class extends Error{constructor(e){super(e)}};var hN=(...t)=>{let e=[];if(t==null)throw new ci(`argument itself is ${t}`);for(let r=0;r<t.length;r++){let o=t[r];o==null&&e.push(r)}if(e.length>0)throw new ci(`arguments(${t.length}) contain null or undefined: [${e.toString()}]`);return e};function yue(...t){return function(...e){for(let r of t)if(!r(...e))return!1;return!0}}var hf=(t,e,r=o=>new ci(o))=>{let o=[];if(!fa(t,e,o)){let i=`invalid type definition:
`;for(let s of o)i+=`	${s}
`;throw r(i)}},fa=(t,e,r=[])=>t==null?!1:(a7("$",t,e,r),r.length===0);function a7(t,e,r,o){hN(e);let i=o||[];for(let s in r){let a=r[s],l=`${t}.${s}`;if(!e.hasOwnProperty(s))i.push(`property missing: "${l}"`);else{let c,d;if(Array.isArray(a))c=yue(...a),d=a.map(u=>u.name).join(" && ");else if(typeof a=="function")c=a,d=a.name;else if(typeof a=="number"||typeof a=="string"||typeof a=="boolean")c=u=>u===a,d=`${a}`;else if(a instanceof RegExp)c=u=>typeof u=="string"&&a.test(u),d="isStringAndMatchToRegExp";else{a7(l,e[s],r[s],o);continue}c(e[s])||i.push(`property mismatch: "${l}" != ${d}, value: ${JSON.stringify(e[s])}`)}}}function xn(t,e=""){if(typeof t!="number")throw new ci(e||`is not number: ${t}`);return t}function Uk(t,e=""){if(typeof t!="string")throw new ci(e||`is not string: ${t}`);return t}function $e(t,e=""){if(!t)throw new ci(e)}function Dl(t){return typeof t=="object"&&typeof(t==null?void 0:t.width)=="number"&&typeof(t==null?void 0:t.height)=="number"}function Ze(t,e=0){if(t==null)return{width:0,height:0};if(un(t)&&un(e))return{width:t,height:e};if(Dl(t))return{width:t.width,height:t.height};throw new Error("invalid size input")}function fc(t){return Math.sqrt(t.width*t.height)}function il(t,e){return Tl(t.width,e.width)&&Tl(t.height,e.height)}function Rr(t){return t.width*t.height}function Xt(t,e){let r=Ze(t);return r.width*=e,r.height*=e,r}function fN(t,e){return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)}}function l7(t,e){return{width:Math.min(t.width,e.width),height:Math.min(t.height,e.height)}}function Fx(t,e,r){return t.width=e,t.height=r,t}function Eg(t){let{width:e,height:r}=t;return{width:r,height:e}}function mN(t,e){return{width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}var Gt=Ze(160,120),Yi=Ze(1024,768),di=Ze(1440,1080),SNe=Ze(1024,768),c7=Ze(1024,768),Hk=Ze(16,16),gN=Ze(2e4,2e4),Gk=Ze(24,12),d7=Ze(120,90),vN=Ze(32,32),Oo=25,Vk=Oo-15,Xi=20,yp=20,Ia=10,$k=40,bN=16,yN=20,CN=5,fy=5,Mx=350,my=10,Wk=[{backgroundColor:"#ffccdcFF",subColor:"#ED7DA1FF",textColor:"#000000FF"},{backgroundColor:"#c73532ff",subColor:"#5F1E1CFF",textColor:"#FFFFFFFF"},{backgroundColor:"#fff7a8ff",subColor:"#EBDA64FF",textColor:"#000000FF"},{backgroundColor:"#f6c607ff",subColor:"#987927FF",textColor:"#000000FF"},{backgroundColor:"#caefd1ff",subColor:"#87D089FF",textColor:"#000000FF"},{backgroundColor:"#02855dff",subColor:"#123927FF",textColor:"#FFFFFFFF"},{backgroundColor:"#b3ddfcff",subColor:"#37B2F3FF",textColor:"#000000FF"},{backgroundColor:"#0a3b8fff",subColor:"#002663FF",textColor:"#FFFFFFFF"},{backgroundColor:"#FFFFFFFF",subColor:"#CED7E0FF",textColor:"#000000FF"},{backgroundColor:"#000000FF",subColor:"#2A2A2AFF",textColor:"#FFFFFFFF"}],Nx={url:"#FF8c8c8c",title:"#FF1C3391",description:"#FF333333",descriptionBackground:"#FFF2F3F9"},Cp=Ze(640,480),ff=Rr(Cp),Bx=Ze(100,75),ou=Rr(Bx),jk="android-app://tv.loilo.loilonote_web/",iu="https://n.loilo.tv",u7="https://stg.n.loilo.tv",p7="https://dev.n.loilo.tv";var h7={back:"\u623B\u308B",close:"\u9589\u3058\u308B",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",okay:"OK",reload:"\u518D\u8AAD\u307F\u8FBC\u307F\u3059\u308B",logout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3059\u308B",selfStudy:"\u81EA\u4E3B\u5B66\u7FD2",errorOccurred:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",unexpectedErrorOccurred:"\u60F3\u5B9A\u3057\u3066\u3044\u306A\u3044\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",unknownError:"\u4E0D\u660E\u306A\u30A8\u30E9\u30FC",closeThisScreen:"\u3053\u306E\u753B\u9762\u3092\u9589\u3058\u308B",useFormally:"\u4F7F\u7528\u3059\u308B",delete:"\u524A\u9664",move:"\u79FB\u52D5",copy:"\u30B3\u30D4\u30FC",duplicate:"\u8907\u88FD",rename:"\u540D\u524D\u3092\u5909\u66F4",teacher:"\u5148\u751F",student:"\u751F\u5F92",expand:"\u5927\u304D\u304F",shrink:"\u5C0F\u3055\u304F",release:"\u89E3\u9664",arrange:"\u6574\u5217",rotate:"\u56DE\u8EE2",materialsStorage:"\u8CC7\u6599\u7BB1",submit:"\u63D0\u51FA",send:"\u9001\u308B",insertingPhoto:"\u5199\u771F\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertPhoto:"\u5199\u771F\u304C\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\uFF01",couldntInsertPhoto:"\u5199\u771F\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",insertingVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertVideo:"\u30D3\u30C7\u30AA\u304C\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\uFF01",couldntInsertVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",insertingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertFile:"\u30D5\u30A1\u30A4\u30EB\u304C\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\uFF01",couldntInsertFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",insertingMaterials:"\u8CC7\u6599\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertMaterials:"\u8CC7\u6599\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u307E\u3057\u305F\uFF01",couldntInsertItemTitle:"%1$s\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",goBackToDesktop:"\u30CE\u30FC\u30C8\u306B\u623B\u308B",seeNextError:"\u6B21\u306E\u30A8\u30E9\u30FC\u3092\u898B\u308B",status403AccessDenied:"\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",status404ItemNotFound:"\u5B58\u5728\u3057\u306A\u3044\u3082\u3057\u304F\u306F\u524A\u9664\u3055\u308C\u3066\u3044\u307E\u3059",couldntGetCourses:"\u6388\u696D\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetCoursesAttributes:"\u6388\u696D\u306E\u60C5\u5831\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPreviousYearsCourses:"\u5E74\u5EA6\u4E00\u89A7\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetOtherTeachersCourses:"\u4ED6\u306E\u5148\u751F\u306E\u6388\u696D\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",willDeleteGroupFromSubject:"%1$s\u304B\u3089%2$s\u3092\u524A\u9664\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsMaterialsExist:"\u3053\u306E\u6388\u696D\u306E\u8CC7\u6599\u7BB1\u306B\u30D5\u30A1\u30A4\u30EB\u304C\u4FDD\u5B58\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",couldntDeleteAsNotesExist:"\u3053\u306E\u6388\u696D\u3067\u4FDD\u5B58\u3055\u308C\u305F\u30CE\u30FC\u30C8\u304C\u5B58\u5728\u3059\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",courseAccessDenied:"\u6388\u696D\u306E\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",courseDoesntExist:"\u6388\u696D\u304C\u5B58\u5728\u3057\u307E\u305B\u3093",couldntDeleteCourse:"\u6388\u696D\u304C\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetNote:"\u30CE\u30FC\u30C8\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntUploadNotes:"\u30CE\u30FC\u30C8\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F",savingNoteWithOtherName:"\u30CE\u30FC\u30C8\u3092\u5225\u540D\u3067\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",overwritingNote:"\u30CE\u30FC\u30C8\u3092\u4E0A\u66F8\u304D\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",couldntSaveNote:"\u30CE\u30FC\u30C8\u304C\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didBackupUnsavedChanges:"\u672A\u4FDD\u5B58\u306E\u5909\u66F4\u306E\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F\u3002\u73FE\u5728\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3055\u308C\u305F\u30CE\u30FC\u30C8\u304C%1$d\u500B\u5B58\u5728\u3057\u307E\u3059\u3002",closeNote:"\u30CE\u30FC\u30C8\u3092\u9589\u3058\u308B",couldntShareScreen:"\u753B\u9762\u914D\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F",uploadingAsset:"\u30A2\u30BB\u30C3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D\u3067\u3059...",cardHasUnsavedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059",cardHasUploadFailedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059",uploadingDocument:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",preparingScreenSharing:"\u753B\u9762\u914D\u4FE1\u306E\u6E96\u5099\u3092\u3057\u3066\u3044\u307E\u3059...",preparingStudentPresentation:"\u751F\u5F92\u767A\u8868\u306E\u6E96\u5099\u3092\u3057\u3066\u3044\u307E\u3059...",stoppingScreenSharing:"\u753B\u9762\u914D\u4FE1\u3092\u505C\u6B62\u3057\u3066\u3044\u307E\u3059...",stoppingStudentPresentation:"\u751F\u5F92\u767A\u8868\u3092\u7D42\u4E86\u3057\u3066\u3044\u307E\u3059...",screenSharingErrorOccurred:"\u753B\u9762\u914D\u4FE1\u306E\u51E6\u7406\u3067\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",lockingScreens:"\u64CD\u4F5C\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingScreens:"\u64CD\u4F5C\u30ED\u30C3\u30AF\u3092\u89E3\u9664\u3057\u3066\u3044\u307E\u3059...",couldntChangeScreenLock:"\u64CD\u4F5C\u30ED\u30C3\u30AF\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",lockingStudentSharing:"\u751F\u5F92\u9593\u901A\u4FE1\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingStudentSharing:"\u751F\u5F92\u9593\u901A\u4FE1\u306E\u30ED\u30C3\u30AF\u3092\u89E3\u9664\u3057\u3066\u3044\u307E\u3059...",couldntChangeStudentSharingLock:"\u751F\u5F92\u9593\u901A\u4FE1\u306E\u30ED\u30C3\u30AF\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingNote:"\u300C%1$s\u300D\u3092\u4F5C\u6210\u4E2D...",couldntCreateNote:"\u30CE\u30FC\u30C8\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F",renamingNote:"\u300C%1$s\u300D\u306E\u540D\u524D\u3092\u300C%2$s\u300D\u306B\u5909\u66F4\u4E2D...",couldntRenameNote:"\u30CE\u30FC\u30C8\u306E\u540D\u524D\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingNote:"%1$s\u3092\u524A\u9664\u4E2D...",couldntDeleteNote:"\u300C%1$s\u300D\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",openingNote:"\u30CE\u30FC\u30C8\u3092\u958B\u3044\u3066\u3044\u307E\u3059...",goBackToNoteList:"\u30CE\u30FC\u30C8\u4E00\u89A7\u306B\u623B\u308B",copyingNote:"\u30CE\u30FC\u30C8\u3092\u30B3\u30D4\u30FC\u4E2D...",couldntCopyNote:"\u30CE\u30FC\u30C8\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",creatingGroup:"\u30AF\u30E9\u30B9\u300C%1$s\u300D\u3092\u4F5C\u6210\u4E2D...",couldntCreateGroup:"\u30AF\u30E9\u30B9\u304C\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingGroup:"%1$s\u3092\u524A\u9664\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsUsersExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u767B\u9332\u3055\u308C\u305F\u30E6\u30FC\u30B6\u30FC\u304C\u5B58\u5728\u3059\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",groupAlreadyDeleted:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u524A\u9664\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002",couldntDeleteArchivedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u30A2\u30FC\u30AB\u30A4\u30D6\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",groupUnavailable:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u73FE\u5728\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002",couldntDeleteAsSubjectsExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u6388\u696D\u304C\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002\u307E\u305A\u6388\u696D\u4E00\u89A7\u3067\u6388\u696D\u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntDeleteClosedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u9589\u8B1B\u3057\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",groupDeletionDenied:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u5BFE\u3059\u308B\u64CD\u4F5C\u6A29\u9650\u304C\u8DB3\u308A\u3066\u3044\u306A\u3044\u3088\u3046\u3067\u3059\u3002",groupDoesntExist:"\u30AF\u30E9\u30B9\u304C\u5B58\u5728\u3057\u306A\u3044\u3088\u3046\u3067\u3059\u3002",couldntDeleteGroup:"\u30AF\u30E9\u30B9\u304C\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingSubjectForGroup:"\u6388\u696D\u300C%1$s\u300D\u3092\u30AF\u30E9\u30B9\u300C%2$s\u300D\u306B\u4F5C\u6210\u4E2D...",couldntCreateSubject:"\u6388\u696D\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",joiningSubject:"%1$s\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059...",couldntJoinSubject:"\u6388\u696D\u306B\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",enterGroupCode:"\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",invalidGroupCode:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u306B\u8AA4\u308A\u304C\u3042\u308A\u307E\u3059",joiningGroup:"\u30AF\u30E9\u30B9\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059...",confirmGroupJoin:"%1$s\u306B\u53C2\u52A0\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendToAll:"\u5168\u54E1\u306B\u9001\u4FE1\u3057\u307E\u3059\u304B\uFF1F",didJoinGroup:"%1$s\u306B\u53C2\u52A0\u3057\u307E\u3057\u305F\uFF01",invalidRequest:"\u4E0D\u6B63\u306A\u30EA\u30AF\u30A8\u30B9\u30C8\u3067\u3059",alreadyJoinedGroup:"\u3059\u3067\u306B\u53C2\u52A0\u6E08\u307F\u3067\u3059",groupNoLongerExists:"\u30AF\u30E9\u30B9\u304C\u5B58\u5728\u3057\u306A\u3044\u304B\u3001\u524A\u9664\u3055\u308C\u305F\u3088\u3046\u3067\u3059",couldntJoinGroup:"\u30AF\u30E9\u30B9\u306B\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093",duplicatedUserGroup:"\u65E2\u306B\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u30AF\u30E9\u30B9\u540D\u3067\u3059",duplicatedSubjectError:"\u65E2\u306B\u30AF\u30E9\u30B9\u306B\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u6388\u696D\u540D\u306E\u305F\u3081\u3001\u4F5C\u6210\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093",updatingSubmission:"\u63D0\u51FA\u3092\u66F4\u65B0\u3057\u3066\u3044\u307E\u3059",couldntUpdateSubmission:"\u63D0\u51FA\u3092\u66F4\u65B0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingTask:"\u63D0\u51FA\u7BB1\u3092\u4F5C\u6210\u4E2D...",couldntCreateTask:"\u63D0\u51FA\u7BB1\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingTask:"\u63D0\u51FA\u7BB1\u300C%1$s\u300D\u3092\u524A\u9664\u4E2D...",requestContainsInvalidID:"\u6388\u696DID\u307E\u305F\u306F\u63D0\u51FA\u7BB1ID\u304C\u4E0D\u6B63\u3067\u3059",subjectOrTaskDoesntExist:"\u6388\u696D\u307E\u305F\u306F\u63D0\u51FA\u7BB1\u304C\u5B58\u5728\u3057\u307E\u305B\u3093",couldntDeleteTask:"\u63D0\u51FA\u7BB1\u304C\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",describeTask:"\u63D0\u51FA\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",didSubmitCards:"\u8CC7\u6599\u3092\u63D0\u51FA\u3057\u307E\u3057\u305F\uFF01",couldntSubmitCards:"\u63D0\u51FA\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendCards:"\u8CC7\u6599\u3092\u9001\u4FE1\u3057\u307E\u3057\u305F\uFF01",couldntSendCards:"\u8CC7\u6599\u3092\u9001\u4FE1\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",checkServiceStatus:"\u30B5\u30FC\u30D0\u30FC\u306E\u7A3C\u50CD\u72B6\u6CC1\u3092\u78BA\u8A8D\u3057\u3066\u4E0B\u3055\u3044",couldntUploadDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F",copyingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3057\u3066\u3044\u307E\u3059...",invalidDocumentCopyDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u30B3\u30D4\u30FC\u5148\u304C\u4E0D\u6B63\u3067\u3059",documentCopyDenied:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",couldntCopyDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",movingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u79FB\u52D5\u3057\u3066\u3044\u307E\u3059...",invalidDocumentMoveDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u79FB\u52D5\u5148\u304C\u4E0D\u6B63\u3067\u3059",documentMoveDenied:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",couldntMoveDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u79FB\u52D5\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSaveToMaterialsStorage:"\u8CC7\u6599\u7BB1\u306B\u4FDD\u5B58\u3057\u307E\u3057\u305F\uFF01",invalidDocumentName:"\u30D5\u30A1\u30A4\u30EB\u306E\u540D\u524D\u304C\u4E0D\u6B63\u3067\u3059",couldntSaveToMaterials:"\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210\u4E2D...",invalidFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u540D\u524D\u304C\u4E0D\u6B63\u3067\u3059",folderCreationDenied:"\u30D5\u30A9\u30EB\u30C0\u306E\u4F5C\u6210\u5148\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",folderNotFound:"\u30D5\u30A9\u30EB\u30C0\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",folderLocationNotFound:"\u30D5\u30A9\u30EB\u30C0\u306E\u4F5C\u6210\u5148\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",couldntCreateFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folder:"\u30D5\u30A9\u30EB\u30C0",file:"\u30D5\u30A1\u30A4\u30EB",renamingItem:"%1$s\u306E\u540D\u524D\u3092\u5909\u66F4\u4E2D...",itemNameInvalid:"%1$s\u306E\u540D\u524D\u304C\u4E0D\u6B63\u3067\u3059",itemRenameDenied:"%1$s\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",itemNotFound:"%1$s\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",couldntRenameItem:"%1$s\u306E\u540D\u524D\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u4E2D...",fileOrFolderInvalid:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u304C\u4E0D\u6B63\u3067\u3059",fileOrFolderDeletionDenied:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",couldntDeleteDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntSendBackDocument:"\u8FD4\u5374\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendBackDocument:"\u8FD4\u5374\u3057\u307E\u3057\u305F\uFF01",sendingBackDocument:"\u8FD4\u5374\u4E2D...",sendingThumbnails:"\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u9001\u4FE1\u3057\u3066\u3044\u307E\u3059...",sendBackErrorOccurred:"\u8FD4\u5374\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",sendBackIncomplete:"%1$d\u4E2D%2$d\u500B\u306E\u8FD4\u5374\u51E6\u7406\u304C\u5B8C\u4E86\u3057\u307E\u305B\u3093\u3067\u3057\u305F",didCompleteSendBack:"\u8FD4\u5374\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\uFF01",noteListTitle:"\u30CE\u30FC\u30C8\u4E00\u89A7",courseListTitle:"\u6388\u696D\u4E00\u89A7",sessionExpiredTitle:"\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044",sessionExpiredMsg:"\u30BB\u30C3\u30B7\u30E7\u30F3\u306E\u6709\u52B9\u671F\u9650\u304C\u904E\u304E\u307E\u3057\u305F\u3002\u7D99\u7D9A\u3057\u3066\u5229\u7528\u3059\u308B\u305F\u3081\u306B\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",badCsrfTokenTitle:"CSRF\u30C8\u30FC\u30AF\u30F3\u304C\u4E0D\u6B63\u3067\u3059",badCsrfTokenMsg:"\u30AF\u30ED\u30B9\u30B5\u30A4\u30C8\u30FB\u30EA\u30AF\u30A8\u30B9\u30C8\u30D5\u30A9\u30FC\u30B8\u30A7\u30EA\u8A8D\u8A3C\u60C5\u5831\u304C\u4E0D\u6B63\u306E\u305F\u3081\u3001\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u307E\u3059\u3002",timelineTitle:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",ttSheet:"\u30B7\u30FC\u30C8",ttVenn2:"\u30D9\u30F3\u56F3",ttVenn3:"\u30D9\u30F3\u56F3",ttYChart:"Y\u30C1\u30E3\u30FC\u30C8",ttXChart:"X\u30C1\u30E3\u30FC\u30C8",ttWChart:"W\u30C1\u30E3\u30FC\u30C8",ttButterfly:"\u30D0\u30BF\u30D5\u30E9\u30A4\u30C1\u30E3\u30FC\u30C8",ttPyramid:"\u30D4\u30E9\u30DF\u30C3\u30C9\u30C1\u30E3\u30FC\u30C8",ttPMI:"PMI/KWL",ttFishbone:"\u30D5\u30A3\u30C3\u30B7\u30E5\u30DC\u30FC\u30F3\u56F3",ttPlotLeft:"\u30D7\u30ED\u30C3\u30C8\u56F3(\u5DE6)",ttPlotRight:"\u30D7\u30ED\u30C3\u30C8\u56F3(\u53F3)",ttCandy:"\u30AD\u30E3\u30F3\u30C7\u30A3\u30C1\u30E3\u30FC\u30C8",ttWebbing:"\u30A6\u30A7\u30D3\u30F3\u30B0",ttRake:"\u304F\u307E\u3067\u30C1\u30E3\u30FC\u30C8",ttDataChart:"\u30C7\u30FC\u30BF\u30C1\u30E3\u30FC\u30C8",ttJellyfish:"\u304F\u3089\u3052\u30C1\u30E3\u30FC\u30C8",ttOneAxis:"\u5EA7\u6A19\u8EF8",ttTwoAxes:"\u5EA7\u6A19\u8EF8",ttCircles:"\u540C\u5FC3\u5186\u30C1\u30E3\u30FC\u30C8",ttAnalysis:"\u60C5\u5831\u5206\u6790\u30C1\u30E3\u30FC\u30C8",ttDiamond:"\u30C0\u30A4\u30A2\u30E2\u30F3\u30C9\u30E9\u30F3\u30AD\u30F3\u30B0",submittingDocument:"\u63D0\u51FA\u4E2D\u3067\u3059",couldntSubmitWhileSubmittingOthers:"\u4ED6\u306E\u63D0\u51FA\u7269\u3092\u63D0\u51FA\u4E2D\u306E\u305F\u3081\u3001\u63D0\u51FA\u3067\u304D\u307E\u305B\u3093",confirmReloadWhileUnsavedChangesExist:"\u30CE\u30FC\u30C8\u306B\u672A\u4FDD\u5B58\u306E\u5909\u66F4\u304C\u3042\u308A\u307E\u3059\u3002\u30DA\u30FC\u30B8\u3092\u66F4\u65B0\u3059\u308B\u3068\u305D\u308C\u3089\u304C\u6D88\u3048\u3066\u3057\u307E\u3046\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",uncaughtErrorOccurred:"\u60F3\u5B9A\u3057\u3066\u3044\u306A\u3044\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u3001\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306F\u52D5\u4F5C\u3092\u505C\u6B62\u3057\u307E\u3057\u305F\u3002\u30A8\u30E9\u30FC\u8A73\u7D30\u3092\u8868\u793A\u3057\u3066\u30B5\u30DD\u30FC\u30C8\u306B\u9023\u7D61\u3059\u308B\u304B\u3001\u30A2\u30D7\u30EA\u3092\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",viewErrorDetail:"\u8A73\u7D30\u3092\u8868\u793A\u3059\u308B",cannotInsertWhileStillLoadingDocument:"\u8CC7\u6599\u306E\u8AAD\u307F\u8FBC\u307F\u304C\u7D42\u4E86\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u30AB\u30FC\u30C9\u3092\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093",unsupportedContentType:"\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u306A\u3044\u7A2E\u985E\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3059",insertCardFromDocument:"\u30CE\u30FC\u30C8\u306B\u3053\u306E\u8CC7\u6599\u306E\u30AB\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u307E\u3059",note:"\u30CE\u30FC\u30C8",material:"\u8CC7\u6599",couldntOpenItem:"%1$s\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F",couldntGet_CheckInternetConnection:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u9001\u4FE1\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u3078\u306E\u63A5\u7D9A\u72B6\u6CC1\u3092\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",brokenNoteErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u4E0A\u306B\u4FDD\u5B58\u3055\u308C\u305F%1$s\u304C\u7834\u640D\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\u304A\u624B\u6570\u3092\u304A\u304B\u3051\u3057\u3066\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u5F0A\u793E\u30B5\u30DD\u30FC\u30C8\u307E\u3067\u3054\u9023\u7D61\u3092\u304A\u9858\u3044\u3057\u307E\u3059\u3002\uFF08\u30A8\u30E9\u30FC\u30B3\u30FC\u30C9: %2$d, \u6388\u696DID: %3$d, \u30CE\u30FC\u30C8ID: %4$s\uFF09",unsupportedNoteVerErrorMsg:"%1$s\u306E\u5F62\u5F0F\u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u3053\u306E%1$s\u306F\u65B0\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3067\u4F5C\u6210\u3055\u308C\u305F\u53EF\u80FD\u6027\u304C\u3042\u308A\u3001\u958B\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s\uFF09",unsupportedNoteFeatErrorMsg:"%1$s\u306B\u65B0\u3057\u3044\u6A5F\u80FD\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30CE\u30FC\u30C8\u306F\u958B\u767A\u4E2D\u306E\u30A2\u30D7\u30EA\u3067\u4F5C\u6210\u3055\u308C\u305F\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s, \u6A5F\u80FD\u30B3\u30FC\u30C9: %3$s\uFF09",api202ErrorMsg:"%1$s\u306B\u542B\u307E\u308C\u3066\u3044\u308B\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u51E6\u7406\u304C\u5B8C\u4E86\u3057\u3066\u3044\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u3053\u308C\u306F\u901A\u5E38\u3057\u3070\u3089\u304F\u3059\u308B\u3068\u8AAD\u307F\u8FBC\u307F\u304C\u3067\u304D\u308B\u3088\u3046\u306B\u306A\u308A\u307E\u3059\u3002",api403ErrorMsg:"%1$s\u306B\u5BFE\u3059\u308B\u95B2\u89A7\u6A29\u9650\u304C\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u5B66\u6821\u306E\u7BA1\u7406\u8005\u306B\u3054\u78BA\u8A8D\u3092\u304A\u9858\u3044\u3057\u307E\u3059\u3002",api404ErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u4E0A\u306B\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F%1$s\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u3053\u306E%1$s\u306F\u4F5C\u6210\u304C\u3067\u304D\u3066\u3044\u306A\u304B\u3063\u305F\u304B\u3001\u3059\u3067\u306B\u524A\u9664\u3055\u308C\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",unknownApiErrorMsg:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u30B5\u30FC\u30D0\u30FC\u3067\u60F3\u5B9A\u3067\u304D\u3066\u3044\u306A\u3044\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3044\u305F\u3057\u307E\u3057\u305F\u3002",noteChangedFromOtherDevice:"\u5225\u306E\u7AEF\u672B\u304B\u3089\u3082\u30CE\u30FC\u30C8\u304C\u5909\u66F4\u3055\u308C\u305F\u306E\u3067\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u307E\u3059",save:"\u4FDD\u5B58",unsaved:"\u672A\u4FDD\u5B58",saving:"\u4FDD\u5B58\u4E2D...",enterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u540D\u524D\u3092\u5165\u529B",enterFileName:"\u30D5\u30A1\u30A4\u30EB\u306E\u540D\u524D\u3092\u5165\u529B",chooseFileToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseFileToDelete:"\u524A\u9664\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseFileToMove:"\u79FB\u52D5\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseFileToRename:"\u540D\u524D\u3092\u5909\u66F4\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",thisIsAnEmptyFolder:"\u3053\u308C\u306F\u7A7A\u306E\u30D5\u30A9\u30EB\u30C0\u3067\u3059",fileUpdatedAtDateTimeFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",confirmSingleFileDelete:"1\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmMultiFileDelete:"%1$d\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",createFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210",pleaseEnterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",moveToThisFolder:"\u3053\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u79FB\u52D5\u3059\u308B",copyToThisFolder:"\u3053\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30B3\u30D4\u30FC\u3059\u308B",photoDefaultFileName:"\u5199\u771F",videoDefaultFileName:"\u52D5\u753B",drawingDefaultFileName:"\u304A\u7D75\u304B\u304D",webDefaultFileName:"Web\u691C\u7D22",mapDefaultFileName:"\u5730\u56F3",textDefaultFileName:"\u30C6\u30AD\u30B9\u30C8",pdfDefaultFileName:"PDF",audioDefaultFileName:"\u97F3\u58F0",enterDocumentName:"\u6559\u6750\u306E\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",saveToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u4FDD\u5B58",camera:"\u30AB\u30E1\u30E9",text:"\u30C6\u30AD\u30B9\u30C8",textCardMenuBtnImgPath:"/svg/text_ja_60x60_margin_less.svg",thinkingTool:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB",web:"web",quiz:"\u30C6\u30B9\u30C8",quizPresetTest:"\u30C6\u30B9\u30C8",quizPresetSurvey:"\u30A2\u30F3\u30B1\u30FC\u30C8",author:"\u51FA\u984C\u8005",questionCount:"\u8CEA\u554F\u6570 %1$d",result:"\u7D50\u679C",answer:"\u56DE\u7B54",confirmAnswers:"\u56DE\u7B54\u78BA\u8A8D",answerTestTogether:"\u5168\u54E1\u3067\u89E3\u7B54",answerQuestionnaireTogether:"\u5168\u54E1\u3067\u56DE\u7B54",creatingTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u3066\u3044\u307E\u3059...",createdTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F",failedCreateTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u30C6\u30B9\u30C8\u3092\u6E96\u5099\u3057\u3066\u3044\u307E\u3059",preparingQuestionnaire:"\u30A2\u30F3\u30B1\u30FC\u30C8\u3092\u6E96\u5099\u3057\u3066\u3044\u307E\u3059",unnamedNote:"\u540D\u79F0\u672A\u8A2D\u5B9A\u30CE\u30FC\u30C8",copyOf:"%1$s\u306E\u30B3\u30D4\u30FC",noteConflictDialogTitle:"\u30CE\u30FC\u30C8\u306E\u7AF6\u5408\u304C\u767A\u751F\u3057\u307E\u3057\u305F",saveNoteUnderOtherNameTitle:"\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u5225\u540D\u3067\u4FDD\u5B58\u3059\u308B",saveNoteUnderOtherNameDesc:"\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3067\u4E0A\u66F8\u304D\u3055\u308C\u3001\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u306F\u65B0\u3057\u3044\u30CE\u30FC\u30C8\u3068\u3057\u3066\u5225\u540D\u4FDD\u5B58\u3055\u308C\u307E\u3059\u3002",prioritizeThisVersionTitle:"\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u512A\u5148\u3059\u308B",prioritizeThisVersionDesc:"\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u7834\u68C4\u3057\u3001\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3067\u4E0A\u66F8\u304D\u3057\u307E\u3059\u3002",deferToOtherDeviceVersionTitle:"\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u512A\u5148\u3059\u308B",deferToOtherDeviceVersionDesc:"\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u306F\u7834\u68C4\u3055\u308C\u3001\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3067\u4E0A\u66F8\u304D\u3055\u308C\u307E\u3059\u3002",resolve:"\u89E3\u6C7A\u3059\u308B",preferences:"\u74B0\u5883\u8A2D\u5B9A",zoomTitle:"\u62E1\u5927\u30FB\u7E2E\u5C0F",invertMouseWheel:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u306E\u65B9\u5411\u3092\u53CD\u8EE2\u3059\u308B",mouseWheelSensitivity:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u611F\u5EA6",trackpadPinchZoomSensitivity:"\u30C8\u30E9\u30C3\u30AF\u30D1\u30C3\u30C9\u306E\u30D4\u30F3\u30C1\u30BA\u30FC\u30E0\u611F\u5EA6",aboutThisApp:"\u30A2\u30D7\u30EA\u306B\u3064\u3044\u3066",version:"\u30D0\u30FC\u30B8\u30E7\u30F3",teacherLockedScreens:"\u5148\u751F\u304C\u753B\u9762\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059",screensAreLocked:"\u64CD\u4F5C\u30ED\u30C3\u30AF\u4E2D",focusOnTheTeacher:"\u4F5C\u696D\u3092\u4E2D\u65AD\u3057\u3066\u3001\u5148\u751F\u306E\u307B\u3046\u3092\u898B\u307E\u3057\u3087\u3046\u3002",checking:"\u78BA\u8A8D\u4E2D...",checkScreenLock:"\u30ED\u30C3\u30AF\u3092\u78BA\u8A8D\u3059\u308B",search:"\u691C\u7D22",submissions:"\u63D0\u51FA\u7269",sendToDialogTitle:"\u30AB\u30FC\u30C9\u306E\u9001\u308A\u5148\u3092\u9078\u629E",allMembers:"\u5168\u54E1",sendToIndividuals:"\u500B\u4EBA",selectAll:"\u3059\u3079\u3066\u9078\u629E",releaseAll:"\u3059\u3079\u3066\u89E3\u9664",sendToMultiple:"\u9001\u308B\uFF08%1$d\u4EBA\uFF09",openTaskCount:"\u3001\u4ED6%1$d\u3064",others:"\u3001\u4ED6%1$d",yearTimeUnit:"\u5E74",dayTimeUnit:"\u65E5",hourTimeUnit:"\u6642\u9593",minuteTimeUnit:"\u5206",secondTimeUnit:"\u79D2",taskListTitle:"\u63D0\u51FA\u7BB1",createNewTask:"\u65B0\u3057\u3044\u63D0\u51FA\u7BB1\u3092\u4F5C\u308B",confirmDelete:"\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",taskExpiryFmt:"yyyy\u5E74m\u6708d\u65E5",deadlineDate:"\u7DE0\u5207\u65E5\u6642",openForSubmissions:"\u52DF\u96C6\u4E2D",noOpenTasks:"\u52DF\u96C6\u4E2D\u306E\u63D0\u51FA\u7BB1\u306F\u3042\u308A\u307E\u305B\u3093",confirmResubmit:"\u300C%1$s\u300D\u306B\u518D\u63D0\u51FA\u3057\u307E\u3059\u304B\uFF1F",submissionName:"%1$s\u306E\u56DE\u7B54",complete:"\u5B8C\u4E86",start:"\u958B\u59CB",end:"\u7D42\u4E86",edit:"\u7DE8\u96C6",useAll:"\u3059\u3079\u3066\u4F7F\u3046",shareScreen:"\u753B\u9762\u914D\u4FE1",sharing:"\u914D\u4FE1\u4E2D",nameOrder:"\u540D\u524D\u9806",updateOrder:"\u66F4\u65B0\u9806",submitOrder:"\u63D0\u51FA\u9806",anonymous:"\u7121\u8A18\u540D",confirmRevealSubmitterNames:"\u4E26\u3073\u9806\u3092\u300C%1$s\u300D\u306B\u5909\u66F4\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u56DE\u7B54\u8005\u306E\u540D\u524D\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterTaskName:"\u63D0\u51FA\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",confirmAnswerShare:"\u751F\u5F92\u3068\u56DE\u7B54\u3092\u5171\u6709\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendBackAll:"\u6DFB\u524A\u6E08\u307F\u306E%1$d\u4EBA\u3078\u4E00\u62EC\u8FD4\u5374\u3057\u307E\u3059\u304B\uFF1F",startComparing:"\u6BD4\u8F03\u958B\u59CB",comparison:"\u6BD4\u8F03",startAnswerSharing:"\u56DE\u7B54\u5171\u6709\u3059\u308B",sharingAnswers:"\u56DE\u7B54\u5171\u6709\u4E2D",sendBackAll:"\u4E00\u62EC\u8FD4\u5374",endAnswerSharing:"\u56DE\u7B54\u5171\u6709\u3092\u3084\u3081\u308B",compare:"\u6BD4\u8F03\u3059\u308B",noExpiry:"\u6307\u5B9A\u306A\u3057",expiryDialogTitle:"\u7DE0\u5207\u65E5\u6642",expiry:"\u7DE0\u5207",hasExpired:"\u7DE0\u5207\u6E08",closeNow:"\u4ECA\u3059\u3050",closeAfterTen:"10\u5206\u5F8C",closeToday:"\u4ECA\u65E5\u4E2D",dateLabel:"\u65E5\u4ED8",timeLabel:"\u6642\u523B",answersNotVisibleWarnTitle:"\u56DE\u7B54\u304C\u5171\u6709\u3055\u308C\u3066\u3044\u307E\u305B\u3093",answersNotVisibleWarnMsg:"\u73FE\u5728\u3001\u56DE\u7B54\u306F\u5171\u6709\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u4ED6\u306E\u4EBA\u306E\u56DE\u7B54\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",backToAnswerList:"\u56DE\u7B54\u4E00\u89A7\u306B\u623B\u308B",sendBack:"\u8FD4\u5374",use:"\u4F7F\u3046",confirmSendBack:"\u8FD4\u5374\u3057\u307E\u3059\u304B?",studentSharing:"\u751F\u5F92\u9593\u901A\u4FE1",screenLock:"\u753B\u9762\u30ED\u30C3\u30AF",checkAttendance:"\u53C2\u52A0\u8005\u78BA\u8A8D",learnAboutThinkingTools:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB\u3092\u5B66\u3076",sharedBy:"%1$s\u304B\u3089\u306E\u5171\u6709",submittedBy:"%1$s\u306E\u63D0\u51FA",sentBackBy:"%1$s\u304B\u3089\u306E\u8FD4\u5374",closedTaskLabel:"\u7DE0\u5207",unknownUser:"\u4E0D\u660E\u306A\u30E6\u30FC\u30B6",andOtherMembers:"\u4ED6%1$d\u4EBA",nowSharingIndicator:"%1$s\u306B\u9001\u4FE1\u4E2D%2$s",pendingFileAndThumbUploadCount:"%1$d\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3068%2$d\u500B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",pendingFileUploadCount:"%1$d\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",pendingThumbUploadCount:"%1$d\u500B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",groupName:"\u30AF\u30E9\u30B9\u540D",groupJoinInstructions:"\u751F\u5F92\u306E\u307F\u306A\u3055\u3093\u306F\u3001\u3053\u306E\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",membersJoinedCount:"\u53C2\u52A0\u4EBA\u6570",confirmLogout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",support:"\u30B5\u30DD\u30FC\u30C8",serviceStatus:"\u30B5\u30FC\u30D3\u30B9\u72B6\u6CC1",adminPage:"\u7BA1\u7406\u30DA\u30FC\u30B8",logoutOption:"\u30ED\u30B0\u30A2\u30A6\u30C8",groupCode:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9",update:"\u66F4\u65B0",statusFetchErrorOccurred:"\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u8D77\u304D\u307E\u3057\u305F",notAttending:"\u53D7\u8B1B\u3057\u3066\u3044\u307E\u305B\u3093",choosingCourse:"\u6388\u696D\u9078\u629E\u4E2D",attendingOtherCourse:"\u4ED6\u306E\u6388\u696D\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059",browsingWeb:"Web ",attending:"\u53D7\u8B1B\u4E2D",create:"\u4F5C\u6210",invalidUrlHelp:"https://\u3082\u3057\u304F\u306Fhttp://\u304B\u3089\u59CB\u307E\u308B\u6B63\u3057\u3044URL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",invalidOpenUrl:"URL\u306B\u7121\u52B9\u306A\u6587\u5B57\u5217\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306EWeb\u30AB\u30FC\u30C9\u306F\u958B\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002",photo:"\u5199\u771F",video:"\u30D3\u30C7\u30AA",closeCamera:"\u30AB\u30E1\u30E9\u3092\u9589\u3058\u308B",retake:"\u64AE\u308A\u76F4\u3059",generalCameraPrepError:"\u30AB\u30E1\u30E9\u306E\u6E96\u5099\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",browserDoesntSupportMediaCapture:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u30FC\u306F\u30AB\u30E1\u30E9\u6A5F\u80FD\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093",cameraMicPermissionDeniedErrorMsg:"\u30AB\u30E1\u30E9\u3068\u30DE\u30A4\u30AF\u306E\u5229\u7528\u3092\u8A31\u53EF\u3057\u3066\u304F\u3060\u3055\u3044",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/loilo-teacher-support/Web%E7%89%88%E3%81%A7%E9%8C%B2%E9%9F%B3%E3%82%84%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/loilo-teacher-support/Android%E3%81%A7%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%A8%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AE%E5%88%A9%E7%94%A8%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95",getHelp:"\u65B9\u6CD5\u306F\u3053\u3061\u3089",cantFindUsableDevice:"\u4F7F\u7528\u53EF\u80FD\u306A\u30C7\u30D0\u30A4\u30B9\u306E\u60C5\u5831\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPhotoData:"\u5199\u771F\u30C7\u30FC\u30BF\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetVideoData:"\u30D3\u30C7\u30AA\u30C7\u30FC\u30BF\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",resetCamera:"\u30AB\u30E1\u30E9\u3092\u30EA\u30BB\u30C3\u30C8",confirmResetVideoCamera:"\u64AE\u5F71\u3092\u3084\u308A\u76F4\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterNewGroupName:"\u65B0\u3057\u3044\u30AF\u30E9\u30B9\u306E\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",userGroupNamePlaceholder:"(\u4F8B)1\u5E741\u7D44",addCourseLabel:"\u6388\u696D\u306E\u8FFD\u52A0",addCourseDesc:"\u300C\u6388\u696D\u306E\u8FFD\u52A0\u300D\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044",chooseGroupToAddTo:"\u3042\u306A\u305F\u304C\u6388\u696D\u3092\u884C\u3046\u30AF\u30E9\u30B9\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",noGroups:"\u4ECA\u5E74\u5EA6\u306E\u30AF\u30E9\u30B9\u304C\u307E\u30601\u3064\u3082\u767B\u9332\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002",createNewGroupDesc:"\u2193\u304B\u3089\u300C\u65B0\u3057\u3044\u30AF\u30E9\u30B9\u3092\u4F5C\u6210\u300D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",groupDesc:"\u540C\u3058\u6642\u9593\u306B\u6388\u696D\u3092\u53D7\u3051\u308B\u751F\u5F92\u306E\u96C6\u307E\u308A\u3092\u300C\u30AF\u30E9\u30B9\u300D\u3068\u547C\u3093\u3067\u3044\u307E\u3059\u3002",chooseGroupToDelete:"\u524A\u9664\u3059\u308B\u30AF\u30E9\u30B9\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",createNewGroupBtnLabel:"\u65B0\u3057\u3044\u30AF\u30E9\u30B9\u3092\u4F5C\u6210",createNewSubjectBtnLabel:"\u65B0\u3057\u3044\u6388\u696D\u3092\u4F5C\u6210",createdSubjectsListTitle:"\u4F5C\u6210\u6E08\u307F\u306E\u6388\u696D",thisGroupHasNoSubjects:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u306F\u6388\u696D\u304C\u3042\u308A\u307E\u305B\u3093",courseJoinedMark:"\u8FFD\u52A0\u6E08\u307F",addCourseDialogJoinCourseBtnLabel:"\u8FFD\u52A0",confirmCreateSubject:"\u300C%1$s\u300D\u3092\u4F5C\u6210\u3057\u307E\u3059\u304B\uFF1F",subjectNameInputPlaceholder:"\u6388\u696D\u306E\u540D\u524D\u3092\u5165\u529B...",endedCoursesTitle:"\u9589\u8B1B\u3057\u305F\u6388\u696D",endedCoursesDesc:"\u203B\u6628\u5E74\u5EA6\u306E\u6388\u696D\u306F\u300C\u9589\u8B1B\u3057\u305F\u6388\u696D\u300D\u306E\u4E2D\u306B\u3042\u308A\u307E\u3059",year:"%1$d\u5E74",subjectTitle:"\u6388\u696D",otherTeachersCoursesTitle:"\u4ED6\u306E\u5148\u751F\u306E\u6388\u696D",courseFetchErrorOccurred:"\u6388\u696D\u306E\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",groupFetchErrorOccurred:"\u30AF\u30E9\u30B9\u306E\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",teacherNoJoinedCourseTitle1:"\u73FE\u5728\u3042\u306A\u305F\u304C\u62C5\u5F53\u3057\u3066\u3044\u308B",noJoinedCourseTitle2:"\u6388\u696D\u306F\u3042\u308A\u307E\u305B\u3093",enterClassCodeToJoinClass:"\u2193\u5148\u751F\u306B\u6559\u3048\u3066\u3082\u3089\u3063\u305F\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",joinCourseBtnLabel:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B",newNoteDefaultNameFmt:"%1$d\u5E74%2$d\u6708%3$d\u65E5\u306E\u30CE\u30FC\u30C8",chooseNoteToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToRename:"\u540D\u524D\u3092\u5909\u66F4\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",createNewNote:"\u30CE\u30FC\u30C8\u3092\u65B0\u898F\u4F5C\u6210",renameNoteDialogMsg:"\u30CE\u30FC\u30C8\u306E\u540D\u524D\u3092\u5909\u66F4",noteFetchErrorOccurred:"\u30CE\u30FC\u30C8\u306E\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",noNotesFound:"\u30CE\u30FC\u30C8\u3092\u65B0\u898F\u4F5C\u6210\u3057\u307E\u3057\u3087\u3046\uFF01",duplicateNoteNameSuffix:"\u306E\u30B3\u30D4\u30FC",otherTeachersCourseNotFound:"\u4ED6\u306E\u5148\u751F\u306E\u6388\u696D\u306F\u7121\u3044\u3088\u3046\u3067\u3059",loadingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",couldntLoadFileTitle:"\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u3081\u307E\u305B\u3093\u3067\u3057\u305F",addCardDialogTitle:"\u8FFD\u52A0\u5148",inThisCard:"\u30AB\u30FC\u30C9\u5185\u306B",asNextCard:"\u6B21\u306B",pasteCopiedUrl:"\u3053\u3053\u306B\u30B3\u30D4\u30FC\u3057\u305FURL\u3092\u8CBC\u308A\u4ED8\u3051\u307E\u3057\u3087\u3046",confirmDuplicateAllConnectedCards:"\u9023\u7D50\u3055\u308C\u305F\u5168\u30AB\u30FC\u30C9\u3092\u8907\u88FD\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3066\u3099\u3059\u304B\uFF1F",duplicateThisCard:"\u3053\u306E\u30AB\u30FC\u30C9\u3092\u8907\u88FD",duplicateAllConnectedCards:"\u9023\u7D50\u3055\u308C\u305F\u5168\u30AB\u30FC\u30C9\u3092\u8907\u88FD",couldntReuseCard:"\u30AB\u30FC\u30C9\u306E\u518D\u5229\u7528\u306B\u5931\u6557\u3057\u307E\u3057\u305F",changeTools:"\u30C4\u30FC\u30EB\u3092\u5207\u308A\u66FF\u3048",exportCard:"\u66F8\u304D\u51FA\u3057",pdfFile:"PDF\u30D5\u30A1\u30A4\u30EB",print:"\u5370\u5237",confirmAudioRecordingOverwrite:"\u9332\u97F3\u6E08\u307F\u306E\u30C7\u30FC\u30BF\u3092\u4E0A\u66F8\u304D\u3057\u3066\u9332\u97F3\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",couldntStartAudioRecording:"\u9332\u97F3\u3092\u958B\u59CB\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",confirmDeleteAudioRecording:"\u9332\u97F3\u30C7\u30FC\u30BF\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",automatic:"\u81EA\u52D5",audioRecordBtnLabel:"\u9332\u97F3",volume:"\u97F3\u91CF",browserDoesntSupportAudioRecording:"\u3054\u4F7F\u7528\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u9332\u97F3\u6A5F\u80FD\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093",micPermissionDeniedErrorMsg:"\u30DE\u30A4\u30AF\u306E\u5229\u7528\u3092\u8A31\u53EF\u3057\u3066\u304F\u3060\u3055\u3044",noMicFoundErrorMsg:"\u4F7F\u7528\u53EF\u80FD\u306A\u30DE\u30A4\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F",verticalWritingBtnLabel:"\u7E26",select:"\u9078\u629E",cut:"\u30AB\u30C3\u30C8",paste:"\u30DA\u30FC\u30B9\u30C8",pasteImage:"\u753B\u50CF\u3092\u30DA\u30FC\u30B9\u30C8",pasteText:"\u30C6\u30AD\u30B9\u30C8\u3092\u30DA\u30FC\u30B9\u30C8",pasteWeb:"Web\u3092\u30DA\u30FC\u30B9\u30C8",nothingToPaste:"\u30DA\u30FC\u30B9\u30C8\u3059\u308B\u3082\u306E\u304C\u3042\u308A\u307E\u305B\u3093",couldntDownloadFileErrorMsg:"%1$d: \u30B5\u30FC\u30D0\u30FC\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",corruptFileErrorMsg:"\u30D5\u30A1\u30A4\u30EB\u306E\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u30D5\u30A1\u30A4\u30EB\u304C\u7834\u640D\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",stopScreenSharing:"\u914D\u4FE1\u505C\u6B62",couldntReceiveScreenShare:"\u753B\u9762\u914D\u4FE1\u306E\u53D7\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",screenSharingTimedOutErrorMsg:"%1$d: \u914D\u4FE1\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u304C\u9577\u6642\u9593\u306B\u308F\u305F\u308A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",endScreenShareReceiving:"\u753B\u9762\u914D\u4FE1\u3092\u306E\u53D7\u4FE1\u3092\u7D42\u4E86\u3059\u308B",endPresentationLine1:"\u767A\u8868",endPresentationLine2:"\u7D42\u4E86",requestPresentationLine1:"\u751F\u5F92",requestPresentationLine2:"\u767A\u8868",endSharingLine1:"\u914D\u4FE1",endSharingLine2:"\u505C\u6B62",startSharingLine1:"\u753B\u9762",startSharingLine2:"\u914D\u4FE1",confirmStartPresentation:"\u751F\u5F92\u767A\u8868\u3092\u958B\u59CB\u3057\u307E\u3059\u304B\uFF1F",confirmStartScreenSharing:"\u914D\u4FE1\u3092\u958B\u59CB\u3057\u307E\u3059\u304B\uFF1F",yourTurnToPresent:"\u3042\u306A\u305F\u304C\u767A\u8868\u3059\u308B\u756A\u3067\u3059\uFF01",unsupportedFileErrorMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093\u3002\u30D5\u30A1\u30A4\u30EB\u5F62\u5F0F: %1$s \u62E1\u5F35\u5B50: %2$s",unsupportedFileErrorWithoutOptMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093",confirmMultiCardGroupDelete:"%1$d\u679A\u306E\u30AB\u30FC\u30C9\u3068\u5B50\u30AB\u30FC\u30C9\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",confirmMultiChildCardDelete:"\u30AB\u30FC\u30C9\u3068%1$d\u679A\u306E\u5B50\u30AB\u30FC\u30C9\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",confirmCardDelete:"\u30AB\u30FC\u30C9\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",inputCannotContainSpacesWarning:"\u7A7A\u767D\u6587\u5B57\u3092\u5165\u529B\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",inputTooLongWarning:"%1$d\u6587\u5B57\u4EE5\u4E0B\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",taskNameDefaultPrefix:"\u63D0\u51FA\u7269",timelineDateFmtPrevYear:"%d\u5E74%d\u6708%d\u65E5",timelineDateFmtThisYear:"%d\u6708%d\u65E5 %02d:%02d",timelineDateFmtToday:"%02d:%02d",daysRemaining:"\u3042\u3068%d\u65E5",hoursRemaining:"\u3042\u3068%d\u6642\u9593",minRemaining:"\u3042\u3068%1$s\u5206",secRemaining:"\u3042\u3068%1$s\u79D2",textButtonIconClass:"textButtonIconJa",submitted:"\u63D0\u51FA\u6E08",drawn:"\u304A\u7D75\u304B\u304D",annotation:"\u6DFB\u524A",couldntSave:"%1$s\u304C\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",annotationThumbnail:"\u6DFB\u524A\u30B5\u30E0\u30CD\u30A4\u30EB",documentThumbnail:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u30B5\u30E0\u30CD\u30A4\u30EB",languageSettingTitle:"\u8A00\u8A9E\u8A2D\u5B9A",english:"\u82F1\u8A9E",japanese:"\u65E5\u672C\u8A9E",japaneseHira:"\u3072\u3089\u304C\u306A",traditionalChinese:"\u7E41\u4F53\u5B57\u4E2D\u56FD\u8A9E",simplifiedChinese:"\u7C21\u4F53\u5B57\u4E2D\u56FD\u8A9E",inButtonIconClass:"inButtonIconJa",outButtonIconClass:"outButtonIconJa",thinkingToolHelpPageUrl:"https://n.loilo.tv/ja/thinkingtool",couldntGetSubmissions:"\u63D0\u51FA\u7BB1\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",tasksFeatureIsUnavailable:"%1$d\u4EBA\u4EE5\u4E0A\u304C\u53C2\u52A0\u3059\u308B\u6388\u696D\u3067\u306F\u3001\u63D0\u51FA\u7BB1\u3092\u3054\u5229\u7528\u3044\u305F\u3060\u3051\u307E\u305B\u3093",regularWtFontName:"loilo-NotoSansCJKjp-Regular",boldWtFontName:"loilo-NotoSansCJKjp-Black",uiFontName:"Noto Sans JP",couldntGetSubmissionMessage:"\u63D0\u51FA\u7269\u306E\u63D0\u51FA\u72B6\u6CC1\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093",appName:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB",loiloNote:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8",submissionBox:"\u63D0\u51FA\u7BB1",error:"\u30A8\u30E9\u30FC",timeline:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",status400Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u5F62\u5F0F\u304C\u9593\u9055\u3063\u3066\u3044\u308B\u3088\u3046\u3067\u3059",status403Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30EA\u30BD\u30FC\u30B9\u306B\u5BFE\u3059\u308B\u6A29\u9650\u304C\u306A\u3044\u3088\u3046\u3067\u3059",status404Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30EA\u30BD\u30FC\u30B9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",status500Msg:"\u30B5\u30FC\u30D0\u30FC\u3067\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u30B5\u30FC\u30D3\u30B9\u5168\u4F53\u3067\u969C\u5BB3\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u3082\u3042\u308A\u307E\u3059\u3002",defaultErrorMsg:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u60F3\u5B9A\u5916\u306E\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",goToTopPage:"\u30C8\u30C3\u30D7\u30DA\u30FC\u30B8\u306B\u623B\u308B",viewStatusPage:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30DA\u30FC\u30B8\u3067\u969C\u5BB3\u60C5\u5831\u3092\u78BA\u8A8D\u3059\u308B",login:"\u30ED\u30B0\u30A4\u30F3",masterUserLoginUnsupported:"\u304B\u3093\u305F\u3093\u30ED\u30B0\u30A4\u30F3\u306E\u30DE\u30B9\u30BF\u30FC\u30E6\u30FC\u30B6\u3067\u306F\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",invalidCredentials:"\u5B66\u6821ID\u3001\u30E6\u30FC\u30B6\u30FCID\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u7D44\u307F\u5408\u308F\u305B\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093\u3002",invalidIPAddress:"\u63A5\u7D9A\u5143\u306EIP\u30A2\u30C9\u30EC\u30B9\u304C\u5236\u9650\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002\u5B66\u6821\u306E\u7BA1\u7406\u8005\u306B\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",accountLocked:"\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u30ED\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u5B66\u6821\u306E\u7BA1\u7406\u8005\u306B\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",forbiddenIsAdmin:"\u7BA1\u7406\u8005\u30E6\u30FC\u30B6\u306F\u30A2\u30D7\u30EA\u306B\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",forbiddenIsSSOUser:"Google\u30A2\u30AB\u30A6\u30F3\u30C8\u9023\u643A\u3092\u3057\u3066\u3044\u308B\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",couldntLogIn:"\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",endpoint:"\u63A5\u7D9A\u5148",schoolIDLabel:"\u5B66\u6821",schoolIDPlaceholder:"\u5B66\u6821ID",schoolIDTitle:"\u534A\u89D2\u82F1\u6570\u5B57\u3001- (\u30CF\u30A4\u30D5\u30F3)\u3001_ (\u30A2\u30F3\u30C0\u30FC\u30D0\u30FC)\u3067\u5165\u529B\u3057\u3066\u4E0B\u3055\u3044\u3002",userIDLabel:"\u30E6\u30FC\u30B6\u30FC",userIDPlaceholder:"\u30E6\u30FC\u30B6\u30FCID",userIDTitle:"\u534A\u89D2\u82F1\u6570\u5B57\u3068\u8A18\u53F7\u3067\u5165\u529B\u3057\u3066\u4E0B\u3055\u3044\u3002",passwordPlaceholder:"\u30D1\u30B9\u30EF\u30FC\u30C9",passwordTitle:"\u534A\u89D2\u82F1\u6570\u5B57\u3068\u8A18\u53F7\u3067\u5165\u529B\u3057\u3066\u4E0B\u3055\u3044\u3002",forgotPasswordLinkText:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u308F\u304B\u3089\u306A\u3044\u5834\u5408",forgotPasswordPageUrl:"https://help.loilonote.app/--5cef979a6da3ae0017645681",trialAccountLinkText:"\u7121\u6599\u4F53\u9A13\u306F\u3053\u3061\u3089",adminSignInLinkText:"\u7BA1\u7406\u8005\u30ED\u30B0\u30A4\u30F3",recommendUpdateTitle:"\u30D6\u30E9\u30A6\u30B6\u3092\u6700\u65B0\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",recommendUpdateMsg:"\u6B63\u5E38\u306B\u52D5\u4F5C\u3057\u306A\u3044\u3053\u3068\u304C\u3042\u308A\u307E\u3059",loginContinueBtnText:"\u4F7F\u7528\u3092\u7D9A\u3051\u308B",recommendNativeAppTitle:"\u30A2\u30D7\u30EA\u3092\u3054\u5229\u7528\u304F\u3060\u3055\u3044",recommendNativeAppMsg:"\u3054\u4F7F\u7528\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u6A5F\u80FD\u304C\u5236\u9650\u3055\u308C\u307E\u3059\u3001\u5168\u3066\u306E\u6A5F\u80FD\u3092\u4F7F\u7528\u3059\u308B\u306B\u306F\u30A2\u30D7\u30EA\u3092\u3054\u5229\u7528\u304F\u3060\u3055\u3044",unsupportedBrowserTitle:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093",unsupportedBrowserMsg:"\u6700\u65B0\u30D0\u30FC\u30B8\u30E7\u30F3\u306EGoogle Chrome\u3092\u3054\u5229\u7528\u304F\u3060\u3055\u3044",needBrowserUpdateMsg:"\u30D6\u30E9\u30A6\u30B6\u3092\u6700\u65B0\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",unknownBrowser:"\u4E0D\u660E\u306A\u30D6\u30E9\u30A6\u30B6",yourBrowser:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6",supportedVersionsLabel:"\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u308B\u30D6\u30E9\u30A6\u30B6\u306E\u30D0\u30FC\u30B8\u30E7\u30F3",otherIOSBrowsers:"\u305D\u306E\u4ED6iOS\u306E\u30D6\u30E9\u30A6\u30B6\u30FC: iOS 13\u4EE5\u4E0A",localeCode:"ja-JP",signUpPageUrl:`${iu}/users/sign_up?lang=ja`,iosAppStorePageUrl:"https://apps.apple.com/jp/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_ja.svg",installBrowser:"\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B",getApp:"\u30A2\u30D7\u30EA\u3092\u5165\u624B\u3059\u308B",chromeDownloadPageUrl:"https://www.google.com/intl/ja/chrome/",appStatusPageUrl:"https://status.loilonote.app/ja",couldntEncodeDrawnData:"\u624B\u66F8\u304D\u30C7\u30FC\u30BF\u306E\u30A8\u30F3\u30B3\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F",accessNotPermitted:"\u30A2\u30AF\u30BB\u30B9\u304C\u8A31\u53EF\u3055\u308C\u3066\u3044\u307E\u305B\u3093",giveClipboardAccess:"\u30DA\u30FC\u30B9\u30C8\u6A5F\u80FD\u3092\u3054\u5229\u7528\u3044\u305F\u3060\u304F\u306B\u306F\u3001\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u3078\u306E\u30A2\u30AF\u30BB\u30B9\u8A31\u53EF\u304C\u5FC5\u8981\u3067\u3059\u3002",couldntLoadFontFileMsg:"\u5FC5\u8981\u306A\u30D5\u30A9\u30F3\u30C8\u30D5\u30A1\u30A4\u30EB\u304C\u8AAD\u307F\u8FBC\u307F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",noMemoryErrorTitle:"\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u3066\u3044\u307E\u3059",noMemoryErrorMsg:"\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u3066\u3044\u308B\u305F\u3081\u3001\u51E6\u7406\u3092\u5B8C\u4E86\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A2\u30D7\u30EA\u3092\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntChangeTool:"\u30C4\u30FC\u30EB\u306E\u5207\u308A\u66FF\u3048\u306B\u5931\u6557\u3057\u307E\u3057\u305F",couldntFetchData:"\u30C7\u30FC\u30BF\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntSetupPdfWorker:"PDF\u30EF\u30FC\u30AB\u30FC\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F",couldntDeleteAsOtherInCharge:`\u3053\u306E\u6388\u696D\u306F\u4ED6\u306E\u5148\u751F\u304C\u4F7F\u7528\u3057\u3066\u3044\u308B\u305F\u3081\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002
\u3053\u306E\u6388\u696D\u306E\u62C5\u5F53\u304B\u3089\u5916\u308C\u307E\u3059\u304B\uFF1F`,relatedSubjectsMsg:"\u203B\u3053\u306E\u6388\u696D\u306E\u62C5\u5F53\u304B\u3089\u5916\u308C\u308B\u5834\u5408\u3001\u8CC7\u6599\u7BB1\u3092\u5171\u6709\u3057\u3066\u3044\u308B\u4E0B\u8A18\u306E\u6388\u696D\u306E\u62C5\u5F53\u3082\u5916\u308C\u307E\u3059",stopBeginInCharge:"\u62C5\u5F53\u304B\u3089\u5916\u308C\u308B",fileTooBigTitle:"\u3068\u3066\u3082\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3067\u3059",fileTooBigMessage:"1GB\u3092\u8D85\u3048\u308B\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",exceedVideoQuality:`\u5927\u5BB9\u91CF\u306E\u52D5\u753B\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059\u3002
\u753B\u9762\u914D\u4FE1\u6642\u306B\u30B9\u30E0\u30FC\u30BA\u306A\u8996\u8074\u304C\u3067\u304D\u307E\u305B\u3093\u3002
\u3053\u306E\u307E\u307E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3092\u7D9A\u3051\u307E\u3059\u304B\uFF1F`,confirmDeleteTarget:"\u300C%1$s\u300D\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",signInWithXXX:"%1$s\u3067\u30ED\u30B0\u30A4\u30F3",confirmDisplayAnswers:"\u56DE\u7B54\u3092\u8868\u793A\u3057\u307E\u3059\u304B\uFF1F",submissionListDateShortFmt:"m\u6708d\u65E5 HH:MM",submissionListDateFullFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",couldntExportCard:"\u30AB\u30FC\u30C9\u306E\u66F8\u304D\u51FA\u3057\u306B\u5931\u6557\u3057\u307E\u3057\u305F",pdf:"PDF",exportingCardAsPdf:"\u30AB\u30FC\u30C9\u3092PDF\u306B\u66F8\u304D\u51FA\u3057\u3066\u3044\u307E\u3059...",open:"\u958B\u304F",cache:"\u30AD\u30E3\u30C3\u30B7\u30E5",submittersAnswer:"%1$s\u306E\u7B54\u3048",previousSomeonesAnswer:"\u524D\u306E\u4EBA\u306E\u7B54\u3048",nextSomeonesAnswer:"\u6B21\u306E\u4EBA\u306E\u7B54\u3048",newerDataExistsOnServer:"\u30B5\u30FC\u30D0\u30FC\u306B\u65B0\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30C7\u30FC\u30BF\u304C\u5B58\u5728\u3057\u307E\u3059",qrCodePreviewDialogTitle:"QR\u30B3\u30FC\u30C9\u3092\u691C\u51FA\u3057\u307E\u3057\u305F",createCard:"\u30AB\u30FC\u30C9\u4F5C\u6210",updateCard:"\u30AB\u30FC\u30C9\u66F4\u65B0",webCard:"Web\u30AB\u30FC\u30C9",createWebCard:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u6210",createTextCard:"\u30C6\u30AD\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210",creatingWebCard:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u4E2D...",failedCreateWebCardFromExtension:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u305F\u3044\u30CE\u30FC\u30C8\u3092\u958B\u3044\u305F\u5F8C\u306B\u3001\u3082\u3046\u4E00\u5EA6\u62E1\u5F35\u6A5F\u80FD\u304B\u3089\u30AB\u30FC\u30C9\u4F5C\u6210\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002",failedCreateWebCardFromExtensionTitle:"\u30CE\u30FC\u30C8\u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044",qrCodeScannerPrepError:"QR\u30B3\u30FC\u30C9\u8AAD\u307F\u53D6\u308A\u6A5F\u80FD\u306E\u6E96\u5099\u304C\u51FA\u6765\u307E\u305B\u3093\u3067\u3057\u305F",textCardPlaceholderImgPath:"/svg/text_ja_100x75_margin.svg",qrModeGuidance:"QR\u30B3\u30FC\u30C9\u3092\u67A0\u5185\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044",selectAnswers:"\u56DE\u7B54\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",selectAnswersCompare:"\u6BD4\u8F03\u3059\u308B\u56DE\u7B54\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",selectNoteForAddingMaterials:"\u3069\u306E\u30CE\u30FC\u30C8\u306B\u8CC7\u6599\u3092\u8FFD\u52A0\u3057\u307E\u3059\u304B\uFF1F",videoRecordingTimeLimitReached:"\u9332\u753B\u6642\u9593\u306E\u9650\u754C\u306B\u9054\u3057\u307E\u3057\u305F\u3002\u9332\u753B\u3092\u505C\u6B62\u3057\u307E\u3059\u3002",creatingAttendanceCard:"\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u3066\u3044\u307E\u3059...",createdAttendanceCard:"\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F",failedCreateAttendanceCard:"\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",attendance:"\u51FA\u6B20",attendanceReport:"\u51FA\u6B20\u9023\u7D61",attendanceCardCreator:"\u4F5C\u6210\u8005",preparingAttendance:"\u51FA\u6B20\u9023\u7D61\u3092\u6E96\u5099\u3057\u3066\u3044\u307E\u3059",clickHereForHelp:"\u4F7F\u3044\u65B9\u306F\u3053\u3061\u3089",helpPageLinkForQuizCardTest:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForQuizCardSurvey:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForAttendanceCardTeacher:"https://help.loilonote.app/--5f8567143f41ab0022fa9651",helpPageLinkForAttendanceCardStudent:"https://help.loilonote.app/--60c18ef576a1050044286d87",loginPageTitle:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u30ED\u30B0\u30A4\u30F3",loginPageDesc:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D\u3002\u697D\u3057\u3044\u6388\u696D\u306B\u53C2\u52A0\u3057\u3088\u3046\uFF01",penType:"\u30DA\u30F3\u306E\u7A2E\u985E",penColor:"\u30DA\u30F3\u306E\u8272",highlighterColor:"\u86CD\u5149\u30DA\u30F3\u306E\u8272",clearAll:"\u5168\u6D88\u3057",penThickness:"\u7DDA\u306E\u592A\u3055",eraserSize:"\u6D88\u3057\u30B4\u30E0\u306E\u592A\u3055",myFolder:"\u30DE\u30A4\u30D5\u30A9\u30EB\u30C0",schoolWideFolder:"\u5B66\u5185",districtShared:"%1$s\u5171\u6709",schoolShared:"\u5B66\u5185\u5171\u6709",classShared:"\u6388\u696D\u5185\u5171\u6709",teachersOnlyFolder:"\u5148\u751F\u306E\u307F",classFolder:"%1$s \u5C02\u7528",sortUpdateDateOrder:"\u66F4\u65B0\u65E5\u9806",sortCreateDateOrder:"\u4F5C\u6210\u65E5\u9806",materialNameOrder:"\u540D\u524D\u9806",materialFileUpdateDateFolderNameOrder:"\u30D5\u30A9\u30EB\u30C0\u540D\u9806",couldntFetchSharedNoteMembers:"\u30E1\u30F3\u30D0\u30FC\u306E\u53D6\u5F97\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",manageSharedNoteMember:"\u30E1\u30F3\u30D0\u30FC\u306E\u7BA1\u7406",chooseNoteToManageMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u7BA1\u7406\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToImport:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",pushTokenRegistration:"\u901A\u77E5\u30C8\u30FC\u30AF\u30F3\u306E\u767B\u9332",registered:"\u767B\u9332\u6E08\u307F",unregistered:"\u672A\u767B\u9332",schoolLoiloTVUrl:"https://school.loilo.tv/jp/web.html",citationNotePrefix:"\u5F15\u7528",markAllAsRead:"\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3059\u308B",confirmMarkAllSubmitsAsRead:"\u65B0\u3057\u3044\u63D0\u51FA\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",markedAllSubmitsAsRead:"\u65B0\u3057\u3044\u63D0\u51FA\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3057\u305F",confirmMarkAllRevealAnswersAsRead:"\u65B0\u3057\u3044\u56DE\u7B54\u5171\u6709\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",markedAllRevealAnswersAsRead:"\u65B0\u3057\u3044\u56DE\u7B54\u5171\u6709\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3057\u305F",xIsDeleted:"%1$s\u304C\u524A\u9664\u3055\u308C\u3066\u3044\u307E\u3059",copied:"\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",enableSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u3092\u6709\u52B9\u306B\u3059\u308B",selectSchool:"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u5B66\u6821\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",showAnnotation:"\u6DFB\u524A\u3092\u8868\u793A",hideAnnotation:"\u6DFB\u524A\u3092\u975E\u8868\u793A",submissionDeadlineFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM \u7DE0\u5207",submissionBoxDeletedOrNotExisted:"\u63D0\u51FA\u7BB1\u306F\u524A\u9664\u3055\u308C\u305F\u304B\u3001\u5B58\u5728\u3057\u3066\u3044\u307E\u305B\u3093",getToWork:"\u4ECA\u3059\u3050\u53D6\u308A\u7D44\u3080\uFF01",chooseNoteToWorkIn:"\u3069\u306E\u30CE\u30FC\u30C8\u3067\u8AB2\u984C\u306B\u53D6\u308A\u7D44\u307F\u307E\u3059\u304B\uFF1F",newTaskCreated:"\u65B0\u3057\u3044\u8AB2\u984C\u304C\u3042\u308A\u307E\u3059",standardNote:"\u901A\u5E38\u30CE\u30FC\u30C8",sharedNote:"\u5171\u6709\u30CE\u30FC\u30C8",couldntAddMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",removedFromSharedNoteMembers:"\u5171\u6709\u30CE\u30FC\u30C8\u306E\u30E1\u30F3\u30D0\u30FC\u304B\u3089\u5916\u308C\u307E\u3057\u305F",couldntGetDeviceInfo:"\u30C7\u30D0\u30A4\u30B9\u60C5\u5831\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",changePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u5909\u66F4",submitPassword:"\u5909\u66F4\u3059\u308B",currentPasswordIncorrect:"\u73FE\u5728\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u9593\u9055\u3063\u3066\u3044\u307E\u3059",currentPassword:"\u73FE\u5728\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",newPassword:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",newPasswordConfirm:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\uFF08\u78BA\u8A8D\uFF09",couldntChangePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",passwordUpdated:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u5909\u66F4\u3055\u308C\u307E\u3057\u305F",ipAddressRestricted:"\u63A5\u7D9A\u5143IP\u30A2\u30C9\u30EC\u30B9\u304C\u5236\u9650\u3055\u308C\u3066\u3044\u307E\u3059",hiUser:"%1$s\u3055\u3093",setNewPassword:"\u6B21\u56DE\u304B\u3089\u306E\u30ED\u30B0\u30A4\u30F3\u306B\u4F7F\u7528\u3059\u308B\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044",welcomeToLns:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D",connectionStatus:"\u63A5\u7D9A\u72B6\u6CC1",connectedToPushServer:"\u901A\u77E5\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u6E08\u307F",couldntConnectToPushServer:"\u901A\u77E5\u30B5\u30FC\u30D0\u30FC\u672A\u63A5\u7D9A\u306E\u305F\u3081\u4E00\u90E8\u306E\u6A5F\u80FD\u304C\u3054\u5229\u7528\u3044\u305F\u3060\u3051\u307E\u305B\u3093",reconnectingToPushServer:"\u901A\u77E5\u30B5\u30FC\u30D0\u30FC\u3068\u518D\u63A5\u7D9A\u4E2D...",pleaseConnectToInternet:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u306B\u63A5\u7D9A\u3057\u3066\u304F\u3060\u3055\u3044",pleaseConnectToInternetDesc:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u63A5\u7D9A\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002\u63A5\u7D9A\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",default:"\u65E2\u5B9A",confirmCloseNoteForOtherSubmissionBox:`\u4ED6\u306E\u6388\u696D\u306E\u63D0\u51FA\u7BB1\u3092\u958B\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u9589\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,confirmCloseNoteForOtherTimeline:`\u4ED6\u306E\u6388\u696D\u306E\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u3092\u958B\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u9589\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,selectItemsToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",retry:"\u518D\u8A66\u884C\u3059\u308B",exceedNumberOfExportableItemsMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3067\u304D\u308B\u30D5\u30A1\u30A4\u30EB\u30FB\u30D5\u30A9\u30EB\u30C0\u306E\u500B\u6570\u306E\u4E0A\u9650\u3092\u8D85\u3048\u305F\u305F\u3081\u4E2D\u6B62\u3057\u307E\u3057\u305F",exceedNumberOfExportableHierarchyMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3067\u304D\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u968E\u5C64\u6570\u306E\u4E0A\u9650\u3092\u8D85\u3048\u305F\u305F\u3081\u4E2D\u6B62\u3057\u307E\u3057\u305F",analyzingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059",exportingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u66F8\u304D\u51FA\u3057\u3066\u3044\u307E\u3059",couldntExportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F",import:"\u30A4\u30F3\u30DD\u30FC\u30C8",imported:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",underMaintenace:"\u305F\u3060\u3044\u307E\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E2D\u3067\u3059",endSchedule:"\u7D42\u4E86\u4E88\u5B9A",maintenanceNotification:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E88\u5B9A\u306E\u304A\u77E5\u3089\u305B",maintenanceScheduled:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E88\u5B9A\u304C\u3042\u308A\u307E\u3059",watchTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u898B\u308B",seeDetail:"\u8A73\u7D30\u306F\u3053\u3061\u3089",closeTutorialTitle:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u7D42\u4E86\u3057\u307E\u3059\u304B\uFF1F",closeTutorialMsg:"\u3053\u306E\u52D5\u753B\u306F\u3044\u3064\u3067\u3082\u898B\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059",closeTutorialCheckLabel:"\u6B21\u56DE\u304B\u3089\u8868\u793A\u3057\u306A\u3044",understood:"\u308F\u304B\u3063\u305F\uFF01",failedPlayTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u306E\u518D\u751F\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",importingNotes:"\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",exportingNotes:"\u30CE\u30FC\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",accessIsNotAllowed:"\u3054\u5229\u7528\u306EIP\u30A2\u30C9\u30EC\u30B9\u304B\u3089\u306E\u30A2\u30AF\u30BB\u30B9\u306F\u7981\u6B62\u3055\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToJoin:"\u53C2\u52A0\u3059\u308B\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",classHasEnded:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u9589\u8B1B\u3057\u307E\u3057\u305F",onlyStudentsAllowedToJoin:"\u751F\u5F92\u4EE5\u5916\u306F\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093",graduatesNotAllowedToJoinClass:"\u5352\u696D\u3057\u305F\u5B66\u6821\u306E\u30AF\u30E9\u30B9\u306B\u306F\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093",ssoLogin422Msg:"\u5B66\u6821\u5185\u306B\u540C\u3058%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u91CD\u8907\u3057\u3066\u767B\u9332\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u30ED\u30B0\u30A4\u30F3\u3057\u305F\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u4EE5\u5916\u306E\u9023\u643A\u3092\u89E3\u9664\u3057\u3066\u91CD\u8907\u3092\u89E3\u6D88\u3057\u3066\u304F\u3060\u3055\u3044\u3002",ssoLogin422Url:"https://help.loilonote.app/--608bbb836138540022b80af3",ssoLogin404Msg:"\u3053\u306E%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u767B\u9332\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3054\u5229\u7528\u3044\u305F\u3060\u3051\u307E\u305B\u3093\u3002\u7BA1\u7406\u8005\u306B\u304A\u554F\u3044\u5408\u308F\u305B\u304F\u3060\u3055\u3044\u3002",webCardExtensionLeadingText:`\u30D6\u30E9\u30A6\u30B6\u306E\u62E1\u5F35\u6A5F\u80FD\u3092\u4F7F\u3046\u3068
Web\u30AB\u30FC\u30C9\u3092\u304B\u3093\u305F\u3093\u306B\u3064\u304F\u308C\u307E\u3059`,learnMore:"\u8A73\u3057\u304F\u306F\u3053\u3061\u3089",helpWebCardExtensionUrl:"https://help.loilonote.app/--605840aeedaca400222dbd58",importNotes:"%1$d\u500B\u306E\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3059",createCourseAfterUserGroupCreation:"\u7D9A\u3051\u3066\u6388\u696D\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044",createCourseAfterUserGroupCreationDesc:"\u30AF\u30E9\u30B9\u306E\u4E2D\u306B\u3001\u56FD\u8A9E\u3001\u6570\u5B66\u3001\u82F1\u8A9E\u306A\u3069\u3001\u79D1\u76EE\u3054\u3068\u306B\u6388\u696D\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",insufficientPermission:"\u5B9F\u884C\u3059\u308B\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",accessDenied:"\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",actionCannotBeCarriedOutOnClosedCourse:"\u9589\u8B1B\u3057\u305F\u6388\u696D\u3067\u306F\u5B9F\u884C\u3067\u304D\u307E\u305B\u3093",couldNotGetSubmissionAnswers:"\u56DE\u7B54\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folderWithThisNameAlreadyExists:"\u540C\u3058\u540D\u524D\u306E\u30D5\u30A9\u30EB\u30C0\u304C\u5B58\u5728\u3057\u307E\u3059",importDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059",couldntImportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A4\u30F3\u30DD\u30FC\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F",folderForImportedItemsWillBeCreated:"\u30A4\u30F3\u30DD\u30FC\u30C8\u5148\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210\u3057\u307E\u3059",searchExampleLessonPlans:"\u6388\u696D\u6848\u3092\u691C\u7D22\u3059\u308B",searchExampleLessonPlansPageUrl:"https://help.loilonote.app/--602630326cb271001c1f19d7",administrator:"\u7BA1\u7406\u8005",reuse:"\u518D\u5229\u7528",reuseThisTestCard:"\u3053\u306E\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u518D\u5229\u7528",reuseThisAttendanceCard:"\u3053\u306E\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u518D\u5229\u7528",webPageSharedText:"Web\u30DA\u30FC\u30B8\u304C\u5171\u6709\u3055\u308C\u307E\u3057\u305F",webPageSharedTextBy:"%1$s \u3055\u3093\u304B\u3089\u3001Web\u30DA\u30FC\u30B8\u304C\u5171\u6709\u3055\u308C\u307E\u3057\u305F",openWebPage:"Web\u30DA\u30FC\u30B8\u3092\u958B\u304F",changeLayout:"\u30EC\u30A4\u30A2\u30A6\u30C8\u5909\u66F4",changeLayoutDescription:"\u63D0\u51FA\u7269\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u5909\u66F4\u3067\u304D\u307E\u3059",resetLayout:"\u6700\u521D\u306E\u8A2D\u5B9A\u306B\u623B\u3059",pleaseWaitForMaintenanceEnd:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u7D42\u4E86\u307E\u3067\u3057\u3070\u3089\u304F\u304A\u5F85\u3061\u4E0B\u3055\u3044",uploadingXXX:"%1$s\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",experimentalFeatures:"\u8A66\u9A13\u4E2D\u306E\u6A5F\u80FD",folderCannotBeUploaded:"\u30D5\u30A9\u30EB\u30C0\u30FC\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",filesNoExtCannotBeUploaded:"\u62E1\u5F35\u5B50\u306E\u306A\u3044\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",fileWithInvalidNameContained:"\u4E0D\u6B63\u306A\u540D\u524D\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToDocumentGroup:"\u30D5\u30A9\u30EB\u30C0\u3078\u306E\u66F8\u304D\u8FBC\u307F\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",convertToSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u306B\u3059\u308B",chooseNoteToShare:"\u5171\u6709\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseUsersToBeShared:"\u5171\u6709\u3059\u308B\u30E6\u30FC\u30B6\u30FC\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",shareXXX:" %1$s\u3092\u5171\u6709",confirmShareNote:"\u5171\u6709\u3057\u305F\u30CE\u30FC\u30C8\u306F\u901A\u5E38\u306E\u30CE\u30FC\u30C8\u306B\u306F\u623B\u305B\u307E\u305B\u3093\u3002\u5171\u6709\u30CE\u30FC\u30C8\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u306A\u3044\u30A2\u30D7\u30EA\u3067\u306F\u4E00\u89A7\u306B\u8868\u793A\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",failedGoogleLoginHelpText:"Google\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u306A\u3044\u5834\u5408\u306F\u3053\u3061\u3089",failedGoogleLoginHelpLink:"https://help.loilonote.app/--613570bde97042001dfbd713",teacherNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u62C5\u5F53\u3057\u3066\u3044\u305F\u6388\u696D\u306F\u3042\u308A\u307E\u305B\u3093",studentNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u53C2\u52A0\u3057\u3066\u3044\u305F\u6388\u696D\u306F\u3042\u308A\u307E\u305B\u3093",pasteTips:"\u30C6\u30AD\u30B9\u30C8\u3084Web\u4E0A\u3067\u30B3\u30D4\u30FC\u3057\u305F\u753B\u50CF\u3092\u30DA\u30FC\u30B9\u30C8\u3067\u304D\u307E\u3059",noMembersInGroup:"\u30AF\u30E9\u30B9\u306B\u751F\u5F92\u304C\u53C2\u52A0\u3057\u3066\u3044\u307E\u305B\u3093",showCodeToInviteStudents:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u8868\u793A\u3057\u3066\u3001\u751F\u5F92\u306B\u5165\u529B\u3057\u3066\u3082\u3089\u3063\u3066\u304F\u3060\u3055\u3044",members:"\u4EBA",saved:"\u4FDD\u5B58\u6E08\u307F",displayByStudent:"\u751F\u5F92\u3054\u3068\u306B\u8868\u793A\u3059\u308B"};var f7={back:"\u3082\u3069\u308B",close:"\u3068\u3058\u308B",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",okay:"OK",reload:"\u3082\u3046\u3044\u3061\u3069\u3088\u307F\u3053\u3080",logout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3059\u308B",selfStudy:"\u3058\u3057\u3085\u304C\u304F\u3057\u3085\u3046",errorOccurred:"\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",unexpectedErrorOccurred:"\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",unknownError:"\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC",closeThisScreen:"\u3053\u306E\u304C\u3081\u3093\u3092\u3068\u3058\u308B",useFormally:"\u3064\u304B\u3046",delete:"\u3051\u3059",move:"\u3044\u3069\u3046",copy:"\u30B3\u30D4\u30FC",duplicate:"\u3075\u304F\u305B\u3044",rename:"\u306A\u307E\u3048\u3092\u304B\u3048\u308B",teacher:"\u305B\u3093\u305B\u3044",student:"\u305B\u3044\u3068",expand:"\u304A\u304A\u304D\u304F",shrink:"\u3061\u3044\u3055\u304F",release:"\u3082\u3069\u3059",arrange:"\u305B\u3044\u308C\u3064",rotate:"\u307E\u308F\u3059",materialsStorage:"\u3057\u308A\u3087\u3046\u3070\u3053",submit:"\u3066\u3044\u3057\u3085\u3064",send:"\u304A\u304F\u308B",insertingPhoto:"\u3057\u3083\u3057\u3093\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3044\u307E\u3059...",didInsertPhoto:"\u3057\u3083\u3057\u3093\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertPhoto:"\u3057\u3083\u3057\u3093\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",insertingVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3066\u3044\u307E\u3059...",didInsertVideo:"\u30D3\u30C7\u30AA\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",insertingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3044\u307E\u3059...",didInsertFile:"\u30D5\u30A1\u30A4\u30EB\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",insertingMaterials:"\u3057\u308A\u3087\u3046\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3044\u307E\u3059...",didInsertMaterials:"\u3057\u308A\u3087\u3046\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertItemTitle:"%1$s\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",goBackToDesktop:"\u30CE\u30FC\u30C8\u306B\u3082\u3069\u308B",seeNextError:"\u3064\u304E\u306E\u30A8\u30E9\u30FC\u3092\u307F\u308B",status403AccessDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u305D\u3046\u3055\u306F\u3067\u304D\u307E\u305B\u3093",status404ItemNotFound:"\u306A\u3044\u304B\u3001\u3051\u3055\u308C\u3066\u3044\u307E\u3059",couldntGetCourses:"\u3058\u3085\u304E\u3087\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetCoursesAttributes:"\u3058\u3085\u304E\u3087\u3046\u306E\u3058\u3087\u3046\u307B\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPreviousYearsCourses:"\u306D\u3093\u3069\u3044\u3061\u3089\u3093\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetOtherTeachersCourses:"\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u306E\u3058\u3085\u304E\u3087\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",willDeleteGroupFromSubject:"%1$s\u304B\u3089%2$s\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsMaterialsExist:"\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u3057\u308A\u3087\u3046\u3070\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",couldntDeleteAsNotesExist:"\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u30CE\u30FC\u30C8\u304C\u3042\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",courseAccessDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u3092\u307F\u3089\u308C\u307E\u305B\u3093",courseDoesntExist:"\u3058\u3085\u304E\u3087\u3046\u304C\u3042\u308A\u307E\u305B\u3093",couldntDeleteCourse:"\u3058\u3085\u304E\u3087\u3046\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetNote:"\u30CE\u30FC\u30C8\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntUploadNotes:"\u30CE\u30FC\u30C8\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",savingNoteWithOtherName:"\u30CE\u30FC\u30C8\u3092\u3061\u304C\u3046\u306A\u307E\u3048\u3067\u307B\u305E\u3093\u3057\u3066\u3044\u307E\u3059...",overwritingNote:"\u30CE\u30FC\u30C8\u3092\u3046\u308F\u304C\u304D\u307B\u305E\u3093\u3057\u3066\u3044\u307E\u3059...",couldntSaveNote:"\u30CE\u30FC\u30C8\u304C\u307B\u305E\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didBackupUnsavedChanges:"\u307F\u307B\u305E\u3093\u306E\u30CE\u30FC\u30C8\u306E\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3092\u307B\u305E\u3093\u3057\u307E\u3057\u305F\u3002\u3052\u3093\u3056\u3044\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3055\u308C\u305F\u30CE\u30FC\u30C8\u304C%1$d\u3053\u3042\u308A\u307E\u3059\u3002",closeNote:"\u30CE\u30FC\u30C8\u3092\u3068\u3058\u308B",couldntShareScreen:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",uploadingAsset:"\u30A2\u30BB\u30C3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",cardHasUnsavedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059",cardHasUploadFailedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u306A\u304B\u3063\u305F\u30D5\u30A1\u30A4\u30EB\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059",uploadingDocument:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",preparingScreenSharing:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3058\u3085\u3093\u3073\u3092\u3057\u3066\u3044\u307E\u3059...",preparingStudentPresentation:"\u305B\u3044\u3068\u306F\u3063\u3074\u3087\u3046\u306E\u3058\u3085\u3093\u3073\u3092\u3057\u3066\u3044\u307E\u3059...",stoppingScreenSharing:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3092\u3068\u3081\u3066\u3044\u307E\u3059...",stoppingStudentPresentation:"\u305B\u3044\u3068\u306F\u3063\u3074\u3087\u3046\u3092\u3057\u3085\u3046\u308A\u3087\u3046\u3057\u3066\u3044\u307E\u3059...",screenSharingErrorOccurred:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3057\u3087\u308A\u3067\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002",lockingScreens:"\u305D\u3046\u3055\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingScreens:"\u305D\u3046\u3055\u30ED\u30C3\u30AF\u3092\u304B\u3044\u3058\u3087\u3057\u3066\u3044\u307E\u3059...",couldntChangeScreenLock:"\u305D\u3046\u3055\u30ED\u30C3\u30AF\u3092\u304B\u3044\u3058\u3087\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",lockingStudentSharing:"\u305B\u3044\u3068\u3069\u3046\u3057\u3067\u306E\u3064\u3046\u3057\u3093\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingStudentSharing:"\u305B\u3044\u3068\u3069\u3046\u3057\u3067\u306E\u3064\u3046\u3057\u3093\u306E\u30ED\u30C3\u30AF\u3092\u304B\u3044\u3058\u3087\u3057\u3066\u3044\u307E\u3059...",couldntChangeStudentSharingLock:"\u305B\u3044\u3068\u3069\u3046\u3057\u3067\u306E\u3064\u3046\u3057\u3093\u30ED\u30C3\u30AF\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",creatingNote:"\u300C%1$s\u300D\u3092\u3055\u304F\u305B\u3044\u3057\u3066\u3044\u307E\u3059...",couldntCreateNote:"\u30CE\u30FC\u30C8\u306E\u3055\u304F\u305B\u3044\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",renamingNote:"\u300C%1$s\u300D\u306E\u306A\u307E\u3048\u3092\u300C%2$s\u300D\u306B\u304B\u3048\u3066\u3044\u307E\u3059...",couldntRenameNote:"\u30CE\u30FC\u30C8\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",deletingNote:"%1$s\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",couldntDeleteNote:"\u300C%1$s\u300D\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",openingNote:"\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3044\u3066\u3044\u307E\u3059...",goBackToNoteList:"\u30CE\u30FC\u30C8\u3044\u3061\u3089\u3093\u306B\u3082\u3069\u308B",copyingNote:"\u30CE\u30FC\u30C8\u3092\u30B3\u30D4\u30FC\u3061\u3085\u3046...",couldntCopyNote:"\u30CE\u30FC\u30C8\u306E\u30B3\u30D4\u30FC\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingGroup:"\u30AF\u30E9\u30B9\u300C%1$s\u300D\u3092\u3055\u304F\u305B\u3044\u3061\u3085\u3046...",couldntCreateGroup:"\u30AF\u30E9\u30B9\u304C\u3055\u304F\u305B\u3044\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingGroup:"%1$s\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsUsersExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u305F\u30E6\u30FC\u30B6\u30FC\u304C\u3044\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",groupAlreadyDeleted:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u3051\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002",couldntDeleteArchivedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u30A2\u30FC\u30AB\u30A4\u30D6\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",groupUnavailable:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3052\u3093\u3056\u3044\u308A\u3088\u3046\u3067\u304D\u307E\u305B\u3093\u3002",couldntDeleteAsSubjectsExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u3058\u3085\u304E\u3087\u3046\u304C\u3042\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002\u307E\u305A\u3001\u3058\u3085\u304E\u3087\u3046\u3044\u3061\u3089\u3093\u3067\u3058\u3085\u304E\u3087\u3046\u3092\u3051\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntDeleteClosedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u3068\u3058\u3089\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",groupDeletionDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u30AF\u30E9\u30B9\u3092\u3051\u305B\u307E\u305B\u3093\u3002",groupDoesntExist:"\u30AF\u30E9\u30B9\u304C\u306A\u3044\u3088\u3046\u3067\u3059\u3002",couldntDeleteGroup:"\u30AF\u30E9\u30B9\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",creatingSubjectForGroup:"\u3058\u3085\u304E\u3087\u3046\u300C%1$s\u300D\u3092\u30AF\u30E9\u30B9\u300C%2$s\u300D\u306B\u3055\u304F\u305B\u3044\u3061\u3085\u3046...",couldntCreateSubject:"\u3058\u3085\u304E\u3087\u3046\u3092\u3055\u304F\u305B\u3044\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",joiningSubject:"%1$s\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u3059...",couldntJoinSubject:"\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",enterGroupCode:"\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",invalidGroupCode:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u306B\u307E\u3061\u304C\u3044\u304C\u3042\u308A\u307E\u3059",joiningGroup:"\u30AF\u30E9\u30B9\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u3059...",confirmGroupJoin:"%1$s\u306B\u3055\u3093\u304B\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendToAll:"\u305C\u3093\u3044\u3093\u306B\u304A\u304F\u308A\u307E\u3059\u304B\uFF1F",didJoinGroup:"%1$s\u306B\u3055\u3093\u304B\u3057\u307E\u3057\u305F\uFF01",invalidRequest:"\u305F\u3060\u3057\u304F\u306A\u3044\u30EA\u30AF\u30A8\u30B9\u30C8\u3067\u3059",alreadyJoinedGroup:"\u3059\u3067\u306B\u3055\u3093\u304B\u305A\u307F\u3067\u3059",groupNoLongerExists:"\u30AF\u30E9\u30B9\u304C\u306A\u3044\u304B\u3001\u3051\u3055\u308C\u305F\u3088\u3046\u3067\u3059",couldntJoinGroup:"\u30AF\u30E9\u30B9\u306B\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",duplicatedUserGroup:"\u3059\u3067\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u308B\u30AF\u30E9\u30B9\u3081\u3044\u3067\u3059",duplicatedSubjectError:"\u3059\u3067\u306B\u30AF\u30E9\u30B9\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u308B\u3058\u3085\u304E\u3087\u3046\u3081\u3044\u306E\u305F\u3081\u3001\u3055\u304F\u305B\u3044\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093",updatingSubmission:"\u3066\u3044\u3057\u3085\u3064\u3092\u3053\u3046\u3057\u3093\u3057\u3066\u3044\u307E\u3059",couldntUpdateSubmission:"\u3066\u3044\u3057\u3085\u3064\u3092\u3053\u3046\u3057\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3055\u304F\u305B\u3044\u3061\u3085\u3046..",couldntCreateTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3055\u304F\u305B\u3044\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u300C%1$s\u300D\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",requestContainsInvalidID:"\u3058\u3085\u304E\u3087\u3046ID\u307E\u305F\u306F\u3066\u3044\u3057\u3085\u3064\u3070\u3053ID\u304C\u3078\u3093\u3067\u3059",subjectOrTaskDoesntExist:"\u3058\u3085\u304E\u3087\u3046\u307E\u305F\u306F\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u304C\u3042\u308A\u307E\u305B\u3093",couldntDeleteTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",describeTask:"\u3066\u3044\u3057\u3085\u3064\u306A\u3044\u3088\u3046\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",didSubmitCards:"\u3057\u308A\u3087\u3046\u3092\u3066\u3044\u3057\u3085\u3064\u3057\u307E\u3057\u305F\uFF01",couldntSubmitCards:"\u3066\u3044\u3057\u3085\u3064\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendCards:"\u3057\u308A\u3087\u3046\u3092\u304A\u304F\u308A\u307E\u3057\u305F\uFF01",couldntSendCards:"\u3057\u308A\u3087\u3046\u3092\u304A\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",checkServiceStatus:"\u30B5\u30FC\u30D0\u30FC\u306E\u304B\u3069\u3046\u3058\u3087\u3046\u304D\u3087\u3046\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u304F\u3060\u3055\u3044",couldntUploadDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",copyingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3057\u3066\u3044\u307E\u3059...",invalidDocumentCopyDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u30B3\u30D4\u30FC\u3055\u304D\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",documentCopyDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u3092\u305D\u3046\u3055\u3067\u304D\u307E\u305B\u3093",couldntCopyDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",movingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3044\u3069\u3046\u3057\u3066\u3044\u307E\u3059...",invalidDocumentMoveDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u3001\u3044\u3069\u3046\u3055\u304D\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",documentMoveDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u3092\u305D\u3046\u3055\u3067\u304D\u307E\u305B\u3093",couldntMoveDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3044\u3069\u3046\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSaveToMaterialsStorage:"\u3057\u308A\u3087\u3046\u3070\u3053\u306B\u307B\u305E\u3093\u3057\u307E\u3057\u305F\uFF01",invalidDocumentName:"\u30D5\u30A1\u30A4\u30EB\u306E\u306A\u307E\u3048\u304C\u3078\u3093\u3067\u3059",couldntSaveToMaterials:"\u30D5\u30A1\u30A4\u30EB\u3092\u307B\u305E\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u3055\u304F\u305B\u3044\u3061\u3085\u3046...",invalidFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u304C\u3078\u3093\u3067\u3059",folderCreationDenied:"\u3042\u306A\u305F\u306F\u3053\u3053\u306B\u306F\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u308C\u307E\u305B\u3093",folderNotFound:"\u30D5\u30A9\u30EB\u30C0\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",folderLocationNotFound:"\u30D5\u30A9\u30EB\u30C0\u306E\u3055\u304F\u305B\u3044\u3055\u304D\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",couldntCreateFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u3055\u304F\u305B\u3044\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folder:"\u30D5\u30A9\u30EB\u30C0",file:"\u30D5\u30A1\u30A4\u30EB",renamingItem:"%1$s\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3066\u3044\u307E\u3059...",itemNameInvalid:"%1$s\u306E\u306A\u307E\u3048\u304C\u3078\u3093\u3067\u3059",itemRenameDenied:"\u3042\u306A\u305F\u306F%1$s\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093",itemNotFound:"%1$s\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",couldntRenameItem:"%1$s\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",deletingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",fileOrFolderInvalid:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",fileOrFolderDeletionDenied:"\u3042\u305F\u306A\u305F\u306F\u3053\u308C\u3092\u3051\u3059\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",couldntDeleteDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",couldntSendBackDocument:"\u3078\u3093\u304D\u3083\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendBackDocument:"\u3078\u3093\u304D\u3083\u304F\u3057\u307E\u3057\u305F\uFF01",sendingBackDocument:"\u3078\u3093\u304D\u3083\u304F\u3061\u3085\u3046...",sendingThumbnails:"\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u305D\u3046\u3057\u3093\u3057\u3066\u3044\u307E\u3059...",sendBackErrorOccurred:"\u3078\u3093\u304D\u3083\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",sendBackIncomplete:"%1$d\u3061\u3085\u3046%2$d\u3053\u306E\u3078\u3093\u304D\u3083\u304F\u3057\u3087\u308A\u304C\u304B\u3093\u308A\u3087\u3046\u3057\u307E\u305B\u3093\u3067\u3057\u305F",didCompleteSendBack:"\u3078\u3093\u304D\u3083\u304F\u304C\u304B\u3093\u308A\u3087\u3046\u3057\u307E\u3057\u305F\uFF01",noteListTitle:"\u30CE\u30FC\u30C8\u3044\u3061\u3089\u3093",courseListTitle:"\u3058\u3085\u304E\u3087\u3046\u3044\u3061\u3089\u3093",sessionExpiredTitle:"\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044",sessionExpiredMsg:"\u3072\u3089\u3044\u3066\u304A\u3051\u308B\u3058\u304B\u3093\u304C\u3059\u304E\u307E\u3057\u305F\u3002\u3064\u304B\u3044\u3064\u3065\u3051\u308B\u305F\u3081\u3001\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",badCsrfTokenTitle:"CSRF\u30C8\u30FC\u30AF\u30F3\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",badCsrfTokenMsg:"\u30AF\u30ED\u30B9\u30B5\u30A4\u30C8\u30FB\u30EA\u30AF\u30A8\u30B9\u30C8\u30D5\u30A9\u30FC\u30B8\u30A7\u30EA\u306B\u3093\u3057\u3087\u3046\u3058\u3087\u3046\u307B\u3046\u304C\u305F\u3060\u3057\u304F\u306A\u3044\u305F\u3081\u3001\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u307E\u3059\u3002",timelineTitle:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",ttSheet:"\u30B7\u30FC\u30C8",ttVenn2:"\u30D9\u30F3\u305A",ttVenn3:"\u30D9\u30F3\u305A",ttYChart:"Y\u30C1\u30E3\u30FC\u30C8",ttXChart:"X\u30C1\u30E3\u30FC\u30C8",ttWChart:"W\u30C1\u30E3\u30FC\u30C8",ttButterfly:"\u30D0\u30BF\u30D5\u30E9\u30A4\u30C1\u30E3\u30FC\u30C8",ttPyramid:"\u30D4\u30E9\u30DF\u30C3\u30C9\u30C1\u30E3\u30FC\u30C8",ttPMI:"PMI/KWL",ttFishbone:"\u30D5\u30A3\u30C3\u30B7\u30E5\u30DC\u30FC\u30F3\u305A",ttPlotLeft:"\u30D7\u30ED\u30C3\u30C8\u305A(\u3072\u3060\u308A)",ttPlotRight:"\u30D7\u30ED\u30C3\u30C8\u305A(\u307F\u304E)",ttCandy:"\u30AD\u30E3\u30F3\u30C7\u30A3\u30C1\u30E3\u30FC\u30C8",ttWebbing:"\u30A6\u30A7\u30D3\u30F3\u30B0",ttRake:"\u304F\u307E\u3067\u30C1\u30E3\u30FC\u30C8",ttDataChart:"\u30C7\u30FC\u30BF\u30C1\u30E3\u30FC\u30C8",ttJellyfish:"\u304F\u3089\u3052\u30C1\u30E3\u30FC\u30C8",ttOneAxis:"\u3056\u3072\u3087\u3046\u3058\u304F",ttTwoAxes:"\u3056\u3072\u3087\u3046\u3058\u304F",ttCircles:"\u3069\u3046\u3057\u3093\u3048\u3093\u30C1\u30E3\u30FC\u30C8",ttAnalysis:"\u3058\u3087\u3046\u307B\u3046\u3076\u3093\u305B\u304D\u30C1\u30E3\u30FC\u30C8",ttDiamond:"\u30C0\u30A4\u30A2\u30E2\u30F3\u30C9\u30E9\u30F3\u30AD\u30F3\u30B0",submittingDocument:"\u3066\u3044\u3057\u3085\u3064\u3057\u3066\u3044\u307E\u3059",couldntSubmitWhileSubmittingOthers:"\u307B\u304B\u306E\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u3092\u3066\u3044\u3057\u3085\u3064\u3061\u3085\u3046\u306E\u305F\u3081\u3001\u3066\u3044\u3057\u3085\u3064\u3067\u304D\u307E\u305B\u3093",confirmReloadWhileUnsavedChangesExist:"\u30CE\u30FC\u30C8\u306B\u307B\u305E\u3093\u3057\u3066\u3044\u306A\u3044\u3078\u3093\u3053\u3046\u304C\u3042\u308A\u307E\u3059\u3002\u30DA\u30FC\u30B8\u3092\u3053\u3046\u3057\u3093\u3059\u308B\u3068\u305D\u308C\u3089\u304C\u304D\u3048\u3066\u3057\u307E\u3046\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u304C\u3001\u3044\u3044\u3067\u3059\u304B\uFF1F",uncaughtErrorOccurred:"\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u305F\u306E\u3067\u30A2\u30D7\u30EA\u306F\u3068\u307E\u3063\u3066\u3057\u307E\u3044\u307E\u3057\u305F\u3002\u30A8\u30E9\u30FC\u3057\u3087\u3046\u3055\u3044\u3092\u3072\u3087\u3046\u3058\u3057\u3066\u30B5\u30DD\u30FC\u30C8\u306B\u308C\u3093\u3089\u304F\u3059\u308B\u304B\u3001\u30A2\u30D7\u30EA\u3092\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",viewErrorDetail:"\u3057\u3087\u3046\u3055\u3044\u3092\u3072\u3087\u3046\u3058\u3059\u308B",cannotInsertWhileStillLoadingDocument:"\u3057\u308A\u3087\u3046\u306E\u3088\u307F\u3053\u307F\u304C\u304A\u308F\u3063\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u30AB\u30FC\u30C9\u3092\u3044\u308C\u3089\u308C\u307E\u305B\u3093",unsupportedContentType:"\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u306A\u3044\u3057\u3085\u308B\u3044\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3059",insertCardFromDocument:"\u30CE\u30FC\u30C8\u306B\u3053\u306E\u30AB\u30FC\u30C9\u3092\u3044\u308C\u307E\u3059",note:"\u30CE\u30FC\u30C8",material:"\u3057\u308A\u3087\u3046",couldntOpenItem:"%1$s\u3092\u3072\u3089\u3051\u307E\u305B\u3093\u3067\u3057\u305F",couldntGet_CheckInternetConnection:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u305D\u3046\u3057\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u3078\u306E\u305B\u3064\u305E\u304F\u3058\u3087\u3046\u304D\u3087\u3046\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",brokenNoteErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u306B\u307B\u305E\u3093\u3055\u308C\u305F%1$s\u304C\u3053\u308F\u308C\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002\u3082\u3046\u3057\u308F\u3051\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u30B5\u30DD\u30FC\u30C8\u307E\u3067\u308C\u3093\u3089\u304F\u3057\u3066\u304F\u3060\u3055\u3044\u3002\uFF08\u30A8\u30E9\u30FC\u30B3\u30FC\u30C9: %2$d, \u3058\u3085\u304E\u3087\u3046ID: %3$d, \u30CE\u30FC\u30C8ID: %4$s\uFF09",unsupportedNoteVerErrorMsg:"%1$s\u306E\u3051\u3044\u3057\u304D\u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u3053\u306E%1$s\u306F\u3042\u305F\u3089\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3067\u3055\u304F\u305B\u3044\u3055\u308C\u305F\u304B\u3082\u3057\u308C\u306A\u3044\u306E\u3067\u3001\u3072\u3089\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s\uFF09",unsupportedNoteFeatErrorMsg:"%1$s\u306B\u3042\u305F\u3089\u3057\u3044\u304D\u306E\u3046\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30CE\u30FC\u30C8\u306F\u304B\u3044\u306F\u3064\u3061\u3085\u3046\u306E\u30A2\u30D7\u30EA\u3067\u3055\u304F\u305B\u3044\u3055\u308C\u305F\u304B\u306E\u3046\u305B\u3044\u304C\u3042\u308A\u307E\u3059\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s, \u304D\u306E\u3046\u30B3\u30FC\u30C9: %3$s\uFF09",api202ErrorMsg:"%1$s\u306B\u3075\u304F\u307E\u308C\u3066\u3044\u308B\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3087\u308A\u304C\u304B\u3093\u308A\u3087\u3046\u3057\u3066\u3044\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u3075\u3064\u3046\u306F\u3001\u3057\u3070\u3089\u304F\u3059\u308B\u3068\u3088\u307F\u3053\u307F\u304C\u3067\u304D\u308B\u3088\u3046\u306B\u306A\u308A\u307E\u3059\u3002",api403ErrorMsg:"\u3042\u306A\u305F\u306F%1$s\u3092\u307F\u308B\u3053\u3068\u306F\u3067\u304D\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u304F\u308F\u3057\u304F\u306F\u304C\u3063\u3053\u3046\u306E\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u304F\u3060\u3055\u3044\u3002",api404ErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u3058\u3087\u3046\u306B\u3053\u306E%1$s\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u3053\u306E%1$s\u306F\u3055\u304F\u305B\u3044\u304C\u3067\u304D\u3066\u3044\u306A\u304B\u3063\u305F\u304B\u3001\u3059\u3067\u306B\u3051\u3055\u308C\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",unknownApiErrorMsg:"\u3054\u3081\u3093\u306A\u3055\u3044\u3001\u30B5\u30FC\u30D0\u30FC\u3067\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002",noteChangedFromOtherDevice:"\u3079\u3064\u306E\u305F\u3093\u307E\u3064\u304B\u3089\u3082\u30CE\u30FC\u30C8\u304C\u3078\u3093\u3053\u3046\u3055\u308C\u305F\u306E\u3067\u3001\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u307E\u3059",save:"\u307B\u305E\u3093",unsaved:"\u307B\u305E\u3093\u3057\u3066\u306A\u3044",saving:"\u307B\u305E\u3093\u3061\u3085\u3046...",enterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F",enterFileName:"\u30D5\u30A1\u30A4\u30EB\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F",chooseFileToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseFileToDelete:"\u3051\u3059\u30D5\u30A1\u30A4\u30EB\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseFileToMove:"\u3044\u3069\u3046\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseFileToRename:"\u306A\u307E\u3048\u3092\u304B\u3048\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",thisIsAnEmptyFolder:"\u3053\u308C\u306F\u304B\u3089\u306E\u30D5\u30A9\u30EB\u30C0\u3067\u3059",fileUpdatedAtDateTimeFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061 HH:MM",confirmSingleFileDelete:"1\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmMultiFileDelete:"%1$d\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",createFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u3055\u304F\u305B\u3044",pleaseEnterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",moveToThisFolder:"\u3053\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u3044\u3069\u3046\u3059\u308B",copyToThisFolder:"\u3053\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30B3\u30D4\u30FC\u3059\u308B",photoDefaultFileName:"\u3057\u3083\u3057\u3093",videoDefaultFileName:"\u3069\u3046\u304C",drawingDefaultFileName:"\u304A\u3048\u304B\u304D",webDefaultFileName:"Web\u3051\u3093\u3055\u304F",mapDefaultFileName:"\u3061\u305A",textDefaultFileName:"\u30C6\u30AD\u30B9\u30C8",pdfDefaultFileName:"PDF",audioDefaultFileName:"\u304A\u3093\u305B\u3044",enterDocumentName:"\u3057\u308A\u3087\u3046\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",saveToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u307B\u305E\u3093",camera:"\u30AB\u30E1\u30E9",text:"\u30C6\u30AD\u30B9\u30C8",textCardMenuBtnImgPath:"/svg/text_ja_60x60_margin_less.svg",thinkingTool:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB",web:"web",quiz:"\u30C6\u30B9\u30C8",quizPresetTest:"\u30C6\u30B9\u30C8",quizPresetSurvey:"\u30A2\u30F3\u30B1\u30FC\u30C8",author:"\u3057\u3085\u3064\u3060\u3044\u3057\u3083",questionCount:"\u3057\u3064\u3082\u3093\u3059\u3046 %1$d",result:"\u3051\u3063\u304B",answer:"\u304B\u3044\u3068\u3046",confirmAnswers:"\u304B\u3044\u3068\u3046\u304B\u304F\u306B\u3093",answerTestTogether:"\u305C\u3093\u3044\u3093\u3067\u304B\u3044\u3068\u3046",answerQuestionnaireTogether:"\u305C\u3093\u3044\u3093\u3067\u304B\u3044\u3068\u3046",creatingTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3057\u3066\u3044\u307E\u3059...",createdTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3057\u307E\u3057\u305F",failedCreateTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u30C6\u30B9\u30C8\u3092\u3058\u3085\u3093\u3073\u3057\u3066\u3044\u307E\u3059",preparingQuestionnaire:"\u30A2\u30F3\u30B1\u30FC\u30C8\u3092\u3058\u3085\u3093\u3073\u3057\u3066\u3044\u307E\u3059",unnamedNote:"\u306A\u307E\u3048\u304C\u306A\u3044\u30CE\u30FC\u30C8",copyOf:"%1$s\u306E\u30B3\u30D4\u30FC",noteConflictDialogTitle:"\u30CE\u30FC\u30C8\u3078\u3093\u3053\u3046\u306E\u3057\u3087\u3046\u3068\u3064\u304C\u304A\u304D\u307E\u3057\u305F",saveNoteUnderOtherNameTitle:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3092\u3079\u3064\u306E\u306A\u307E\u3048\u3067\u307B\u305E\u3093\u3059\u308B",saveNoteUnderOtherNameDesc:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u306F\u3042\u305F\u3057\u3044\u30CE\u30FC\u30C8\u3068\u3057\u3066\u307B\u305E\u3093\u3055\u308C\u307E\u3059\u3002\u3069\u3061\u3089\u306E\u3078\u3093\u3053\u3046\u3082\u306E\u3053\u308A\u307E\u3059\u3002",prioritizeThisVersionTitle:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3092\u3064\u304B\u3046",prioritizeThisVersionDesc:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3067\u3046\u308F\u304C\u304D\u3057\u307E\u3059\u3002\u307B\u304B\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u306F\u304D\u3048\u3066\u3057\u307E\u3044\u307E\u3059\u3002",deferToOtherDeviceVersionTitle:"\u307B\u304B\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3092\u3064\u304B\u3046",deferToOtherDeviceVersionDesc:"\u307B\u304B\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3067\u3046\u308F\u304C\u304D\u3057\u307E\u3059\u3002\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u306F\u304D\u3048\u3066\u3057\u307E\u3044\u307E\u3059\u3002",resolve:"\u304B\u3044\u3051\u3064\u3059\u308B",preferences:"\u30A2\u30D7\u30EA\u306E\u305B\u3063\u3066\u3044",zoomTitle:"\u304B\u304F\u3060\u3044\u30FB\u3057\u3085\u304F\u3057\u3087\u3046",invertMouseWheel:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u306E\u307B\u3046\u3053\u3046\u3092\u304E\u3083\u304F\u306B\u3059\u308B",mouseWheelSensitivity:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u304B\u3093\u3069",trackpadPinchZoomSensitivity:"\u30C8\u30E9\u30C3\u30AF\u30D1\u30C3\u30C9\u306E\u30D4\u30F3\u30C1\u30BA\u30FC\u30E0\u304B\u3093\u3069",aboutThisApp:"\u30A2\u30D7\u30EA\u306B\u3064\u3044\u3066",version:"\u30D0\u30FC\u30B8\u30E7\u30F3",teacherLockedScreens:"\u305B\u3093\u305B\u3044\u304C\u304C\u3081\u3093\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059",screensAreLocked:"\u30ED\u30C3\u30AF\u3061\u3085\u3046",focusOnTheTeacher:"\u3066\u3092\u3068\u3081\u3066\u3001\u305B\u3093\u305B\u3044\u306E\u307B\u3046\u3092\u307F\u307E\u3057\u3087\u3046",checking:"\u304B\u304F\u306B\u3093\u3061\u3085\u3046...",checkScreenLock:"\u30ED\u30C3\u30AF\u3092\u304B\u304F\u306B\u3093\u3059\u308B",search:"\u3051\u3093\u3055\u304F",submissions:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064",sendToDialogTitle:"\u30AB\u30FC\u30C9\u3092\u304A\u304F\u308B\u3072\u3068\u3092\u3048\u3089\u3076",allMembers:"\u305C\u3093\u3044\u3093",sendToIndividuals:"\u3060\u308C\u304B",selectAll:"\u3059\u3079\u3066\u3048\u3089\u3076",releaseAll:"\u3059\u3079\u3066\u3084\u3081\u308B",sendToMultiple:"\u304A\u304F\u308B\uFF08%1$d\u306B\u3093\uFF09",openTaskCount:"\u3001\u307B\u304B%1$d\u3064",others:"\u3001\u307B\u304B%1$d",yearTimeUnit:"\u306D\u3093",dayTimeUnit:"\u306B\u3061",hourTimeUnit:"\u3058\u304B\u3093",minuteTimeUnit:"\u3075\u3093",secondTimeUnit:"\u3073\u3087\u3046",taskListTitle:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053",createNewTask:"\u3042\u305F\u3089\u3057\u3044\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3064\u304F\u308B",confirmDelete:"\u3051\u3057\u307E\u3059\u304B\uFF1F",taskExpiryFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061",deadlineDate:"\u3057\u3081\u304D\u308A\u306B\u3061\u3058",openForSubmissions:"\u307C\u3057\u3085\u3046\u3061\u3085\u3046",noOpenTasks:"\u307C\u3057\u3085\u3046\u3061\u3085\u3046\u306E\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u306F\u3042\u308A\u307E\u305B\u3093",confirmResubmit:"\u300C%1$s\u300D\u306B\u3082\u3046\u3044\u3061\u3069\u3066\u3044\u3057\u3085\u3064\u3057\u307E\u3059\u304B\uFF1F",submissionName:"%1$s\u306E\u304B\u3044\u3068\u3046",complete:"\u304B\u3093\u308A\u3087\u3046",start:"\u306F\u3058\u3081\u308B",end:"\u304A\u308F\u308B",edit:"\u3078\u3093\u3057\u3085\u3046",useAll:"\u3059\u3079\u3066\u3064\u304B\u3046",shareScreen:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093",sharing:"\u306F\u3044\u3057\u3093\u3061\u3085\u3046",nameOrder:"\u306A\u307E\u3048\u3058\u3085\u3093",updateOrder:"\u3053\u3046\u3057\u3093\u3058\u3085\u3093",submitOrder:"\u3066\u3044\u3057\u3085\u3064\u3058\u3085\u3093",anonymous:"\u306A\u307E\u3048\u306A\u3057",confirmRevealSubmitterNames:"\u306A\u3089\u3073\u3058\u3085\u3093\u3092\u300C%1$s\u300D\u306B\u304B\u3048\u3088\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u304B\u3044\u3068\u3046\u3057\u3083\u306E\u306A\u307E\u3048\u304C\u3072\u3087\u3046\u3058\u3055\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterTaskName:"\u3066\u3044\u3057\u3085\u3064\u306A\u3044\u3088\u3046\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",confirmAnswerShare:"\u305B\u3044\u3068\u3068\u304B\u3044\u3068\u3046\u3092\u304D\u3087\u3046\u3086\u3046\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendBackAll:"\u3066\u3093\u3055\u304F\u305A\u307F\u306E%1$d\u306B\u3093\u3078\u3044\u3063\u304B\u3064\u3078\u3093\u304D\u3083\u304F\u3057\u307E\u3059\u304B\uFF1F",startComparing:"\u3072\u304B\u304F\u3092\u306F\u3058\u3081\u308B",comparison:"\u3072\u304B\u304F",startAnswerSharing:"\u304B\u3044\u3068\u3046\u3092\u304D\u3087\u3046\u3086\u3046\u3059\u308B",sharingAnswers:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3061\u3085\u3046",sendBackAll:"\u3044\u3063\u304B\u3064\u3078\u3093\u304D\u3083\u304F",endAnswerSharing:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3092\u3084\u3081\u308B",compare:"\u3072\u304B\u304F\u3059\u308B",noExpiry:"\u3057\u3066\u3044\u306A\u3057",expiryDialogTitle:"\u3057\u3081\u304D\u308A\u306B\u3061\u3058",expiry:"\u3057\u3081\u304D\u308A",hasExpired:"\u3057\u3081\u304D\u308A\u305A\u307F",closeNow:"\u3044\u307E\u3059\u3050",closeAfterTen:"10\u3075\u3093\u3054",closeToday:"\u304D\u3087\u3046\u3058\u3085\u3046",dateLabel:"\u3072\u3065\u3051",timeLabel:"\u3058\u3053\u304F",answersNotVisibleWarnTitle:"\u304B\u3044\u3068\u3046\u304C\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u3066\u3044\u307E\u305B\u3093",answersNotVisibleWarnMsg:"\u3052\u3093\u3056\u3044\u3001\u304B\u3044\u3068\u3046\u306F\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u307B\u304B\u306E\u3072\u3068\u306E\u304B\u3044\u3068\u3046\u3092\u307F\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",backToAnswerList:"\u304B\u3044\u3068\u3046\u3044\u3061\u3089\u3093\u306B\u3082\u3069\u308B",sendBack:"\u3078\u3093\u304D\u3083\u304F",use:"\u3064\u304B\u3046",confirmSendBack:"\u3078\u3093\u304D\u3083\u304F\u3057\u307E\u3059\u304B?",studentSharing:"\u305B\u3044\u3068\u3069\u3046\u3057\u306E\u3064\u3046\u3057\u3093",screenLock:"\u305D\u3046\u3055\u30ED\u30C3\u30AF",checkAttendance:"\u3055\u3093\u304B\u3057\u3083",learnAboutThinkingTools:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB\u3092\u307E\u306A\u3076",sharedBy:"%1$s\u304B\u3089\u306E\u304D\u3087\u3046\u3086\u3046",submittedBy:"%1$s\u306E\u3066\u3044\u3057\u3085\u3064",sentBackBy:"%1$s\u304B\u3089\u306E\u3078\u3093\u304D\u3083\u304F",closedTaskLabel:"\u3057\u3081\u304D\u308A",unknownUser:"\u3075\u3081\u3044\u306A\u30E6\u30FC\u30B6",andOtherMembers:"\u307B\u304B%1$d\u306B\u3093",nowSharingIndicator:"%1$s\u306B\u305D\u3046\u3057\u3093\u3061\u3085\u3046%2$s",pendingFileAndThumbUploadCount:"%1$d\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3068%2$d\u3053\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046...",pendingFileUploadCount:"%1$d\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046...",pendingThumbUploadCount:"%1$d\u3053\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046...",groupName:"\u30AF\u30E9\u30B9\u306E\u306A\u307E\u3048",groupJoinInstructions:"\u305B\u3044\u3068\u306E\u307F\u306A\u3055\u3093\u306F\u3001\u3053\u306E\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",membersJoinedCount:"\u3055\u3093\u304B\u306B\u3093\u305A\u3046",confirmLogout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",support:"\u30B5\u30DD\u30FC\u30C8",serviceStatus:"\u30B5\u30FC\u30D3\u30B9\u3058\u3087\u3046\u304D\u3087\u3046",adminPage:"\u304B\u3093\u308A\u30DA\u30FC\u30B8",logoutOption:"\u30ED\u30B0\u30A2\u30A6\u30C8",groupCode:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9",update:"\u3053\u3046\u3057\u3093",statusFetchErrorOccurred:"\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",notAttending:"\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u305B\u3093",choosingCourse:"\u3058\u3085\u304E\u3087\u3046\u305B\u3093\u305F\u304F\u3061\u3085\u3046",attendingOtherCourse:"\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u3059",browsingWeb:"Web ",attending:"\u3058\u3085\u3053\u3046\u3061\u3085\u3046",create:"\u3055\u304F\u305B\u3044",invalidUrlHelp:"https://\u3082\u3057\u304F\u306Fhttp://\u304B\u3089\u306F\u3058\u307E\u308B\u3001\u305F\u3060\u3057\u3044URL\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",invalidOpenUrl:"URL\u306B\u3078\u3093\u306A\u3082\u3058\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306EWeb\u30AB\u30FC\u30C9\u306F\u3072\u3089\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002",photo:"\u3057\u3083\u3057\u3093",video:"\u30D3\u30C7\u30AA",closeCamera:"\u30AB\u30E1\u30E9\u3092\u3068\u3058\u308B",retake:"\u3068\u308A\u306A\u304A\u3059",generalCameraPrepError:"\u30AB\u30E1\u30E9\u306E\u3058\u3085\u3093\u3073\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",browserDoesntSupportMediaCapture:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u30FC\u3067\u306F\u30AB\u30E1\u30E9\u304D\u306E\u3046\u306F\u3064\u304B\u3048\u307E\u305B\u3093",cameraMicPermissionDeniedErrorMsg:"\u30AB\u30E1\u30E9\u3068\u30DE\u30A4\u30AF\u306E\u308A\u3088\u3046\u3092\u304D\u3087\u304B\u3057\u3066\u304F\u3060\u3055\u3044",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/loilo-teacher-support/Web%E7%89%88%E3%81%A7%E9%8C%B2%E9%9F%B3%E3%82%84%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/loilo-teacher-support/Android%E3%81%A7%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%A8%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AE%E5%88%A9%E7%94%A8%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95",getHelp:"\u3084\u308A\u304B\u305F\u306F\u3053\u3061\u3089",cantFindUsableDevice:"\u3064\u304B\u3048\u308B\u30C7\u30D0\u30A4\u30B9\u306E\u3058\u3087\u3046\u307B\u3046\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPhotoData:"\u3057\u3083\u3057\u3093\u30C7\u30FC\u30BF\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetVideoData:"\u30D3\u30C7\u30AA\u30C7\u30FC\u30BF\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",resetCamera:"\u30AB\u30E1\u30E9\u3092\u30EA\u30BB\u30C3\u30C8",confirmResetVideoCamera:"\u3055\u3064\u3048\u3044\u3092\u3084\u308A\u306A\u304A\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterNewGroupName:"\u3042\u305F\u3089\u3057\u3044\u30AF\u30E9\u30B9\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",userGroupNamePlaceholder:"(\u308C\u3044)1\u306D\u30931\u304F\u307F",addCourseLabel:"\u3058\u3085\u304E\u3087\u3046\u306E\u3064\u3044\u304B",addCourseDesc:"\u300C\u3058\u3085\u304E\u3087\u3046\u306E\u3064\u3044\u304B\u300D\u3092\u304A\u3053\u306A\u3063\u3066\u304F\u3060\u3055\u3044",chooseGroupToAddTo:"\u3042\u306A\u305F\u304C\u3058\u3085\u304E\u3087\u3046\u3092\u304A\u3053\u306A\u3046\u30AF\u30E9\u30B9\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044\u3002",noGroups:"\u3053\u3093\u306D\u3093\u3069\u306E\u30AF\u30E9\u30B9\u304C\u307E\u30601\u3064\u3082\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002",createNewGroupDesc:"\u2193\u304B\u3089\u300C\u3042\u305F\u3089\u3057\u3044\u30AF\u30E9\u30B9\u3092\u3055\u304F\u305B\u3044\u300D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",groupDesc:"\u304A\u306A\u3058\u3058\u304B\u3093\u306B\u3058\u3085\u304E\u3087\u3046\u3092\u3046\u3051\u308B\u305B\u3044\u3068\u306E\u3042\u3064\u307E\u308A\u3092\u300C\u30AF\u30E9\u30B9\u300D\u3068\u3088\u3093\u3067\u3044\u307E\u3059\u3002",chooseGroupToDelete:"\u3051\u3059\u30AF\u30E9\u30B9\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",createNewGroupBtnLabel:"\u3042\u305F\u3089\u3057\u3044\u30AF\u30E9\u30B9\u3092\u3055\u304F\u305B\u3044",createNewSubjectBtnLabel:"\u3042\u305F\u3089\u3057\u3044\u3058\u3085\u304E\u3087\u3046\u3092\u3055\u304F\u305B\u3044",createdSubjectsListTitle:"\u3055\u304F\u305B\u3044\u305A\u307F\u306E\u3058\u3085\u304E\u3087\u3046",thisGroupHasNoSubjects:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u306F\u3058\u3085\u304E\u3087\u3046\u304C\u3042\u308A\u307E\u305B\u3093",courseJoinedMark:"\u3064\u3044\u304B\u305A\u307F",addCourseDialogJoinCourseBtnLabel:"\u3064\u3044\u304B",confirmCreateSubject:"\u300C%1$s\u300D\u3092\u3055\u304F\u305B\u3044\u3057\u307E\u3059\u304B\uFF1F",subjectNameInputPlaceholder:"\u3058\u3085\u304E\u3087\u3046\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F...",endedCoursesTitle:"\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046",endedCoursesDesc:"\u203B\u3055\u304F\u306D\u3093\u3069\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u300C\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046\u300D\u306E\u306A\u304B\u306B\u3042\u308A\u307E\u3059",year:"%1$d\u306D\u3093",subjectTitle:"\u3058\u3085\u304E\u3087\u3046",otherTeachersCoursesTitle:"\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u306E\u3058\u3085\u304E\u3087\u3046",courseFetchErrorOccurred:"\u3058\u3085\u304E\u3087\u3046\u306E\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",groupFetchErrorOccurred:"\u30AF\u30E9\u30B9\u306E\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",teacherNoJoinedCourseTitle1:"\u3052\u3093\u3056\u3044\u3042\u306A\u305F\u304C\u305F\u3093\u3068\u3046\u3057\u3066\u3044\u308B",noJoinedCourseTitle2:"\u3058\u3085\u304E\u3087\u3046\u306F\u3042\u308A\u307E\u305B\u3093",enterClassCodeToJoinClass:"\u2193\u305B\u3093\u305B\u3044\u306B\u304A\u3057\u3048\u3066\u3082\u3089\u3063\u305F\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",joinCourseBtnLabel:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F",newNoteDefaultNameFmt:"%1$d\u306D\u3093%2$d\u304C\u3064%3$d\u306B\u3061\u306E\u30CE\u30FC\u30C8",chooseNoteToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToRename:"\u306A\u307E\u3048\u3092\u304B\u3048\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",createNewNote:"\u3042\u305F\u3089\u3057\u3044\u30CE\u30FC\u30C8\u3092\u3055\u304F\u305B\u3044",renameNoteDialogMsg:"\u30CE\u30FC\u30C8\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u308B",noteFetchErrorOccurred:"\u30CE\u30FC\u30C8\u306E\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",noNotesFound:"\u3042\u305F\u3089\u3057\u3044\u30CE\u30FC\u30C8\u3092\u3055\u304F\u305B\u3044\u3057\u307E\u3057\u3087\u3046\uFF01",duplicateNoteNameSuffix:"\u306E\u30B3\u30D4\u30FC",otherTeachersCourseNotFound:"\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u306A\u3044\u3088\u3046\u3067\u3059",loadingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u3088\u307F\u3053\u3093\u3067\u3044\u307E\u3059...",couldntLoadFileTitle:"\u30D5\u30A1\u30A4\u30EB\u3092\u3088\u307F\u3053\u3081\u307E\u305B\u3093\u3067\u3057\u305F",addCardDialogTitle:"\u3064\u3044\u304B\u3055\u304D",inThisCard:"\u30AB\u30FC\u30C9\u306E\u306A\u304B\u306B",asNextCard:"\u3064\u304E\u306B",pasteCopiedUrl:"\u3053\u3053\u306B\u30B3\u30D4\u30FC\u3057\u305FURL\u3092\u306F\u308A\u3064\u3051\u307E\u3057\u3087\u3046",confirmDuplicateAllConnectedCards:"\u3064\u306A\u304C\u3063\u305F\u3059\u3079\u3066\u306E\u30AB\u30FC\u30C9\u3092\u3075\u304F\u305B\u3044\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3066\u3099\u3059\u304B\uFF1F",duplicateThisCard:"\u3053\u306E\u30AB\u30FC\u30C9\u3092\u3075\u304F\u305B\u3044",duplicateAllConnectedCards:"\u3064\u306A\u304C\u3063\u305F\u30AB\u30FC\u30C9\u3092\u3075\u304F\u305B\u3044",couldntReuseCard:"\u30AB\u30FC\u30C9\u306E\u3055\u3044\u308A\u3088\u3046\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",changeTools:"\u30C4\u30FC\u30EB\u3092\u304D\u308A\u304B\u3048",exportCard:"\u304B\u304D\u3060\u3057",pdfFile:"PDF\u30D5\u30A1\u30A4\u30EB",print:"\u3044\u3093\u3055\u3064",confirmAudioRecordingOverwrite:"\u308D\u304F\u304A\u3093\u305A\u307F\u306E\u30C7\u30FC\u30BF\u3092\u3051\u3057\u3066\u308D\u304F\u304A\u3093\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",couldntStartAudioRecording:"\u308D\u304F\u304A\u3093\u3092\u306F\u3058\u3081\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",confirmDeleteAudioRecording:"\u308D\u304F\u304A\u3093\u30C7\u30FC\u30BF\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",automatic:"\u3058\u3069\u3046",audioRecordBtnLabel:"\u3068\u308B",volume:"\u304A\u3068\u306E\u304A\u304A\u304D\u3055",browserDoesntSupportAudioRecording:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u3067\u306F\u308D\u304F\u304A\u3093\u304D\u306E\u3046\u306F\u3064\u304B\u3048\u307E\u305B\u3093",micPermissionDeniedErrorMsg:"\u30DE\u30A4\u30AF\u306E\u308A\u3088\u3046\u3092\u304D\u3087\u304B\u3057\u3066\u304F\u3060\u3055\u3044",noMicFoundErrorMsg:"\u3064\u304B\u3048\u308B\u30DE\u30A4\u30AF\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F",verticalWritingBtnLabel:`\u305F
\u3066`,select:"\u3048\u3089\u3076",cut:"\u30AB\u30C3\u30C8",paste:"\u306F\u308A\u3064\u3051",pasteImage:"\u304C\u305E\u3046\u3092\u306F\u308A\u3064\u3051",pasteText:"\u3082\u3058\u3092\u306F\u308A\u3064\u3051",pasteWeb:"Web\u3092\u306F\u308A\u3064\u3051",nothingToPaste:"\u306F\u308A\u3064\u3051\u308B\u3082\u306E\u304C\u3042\u308A\u307E\u305B\u3093",couldntDownloadFileErrorMsg:"%1$d: \u30B5\u30FC\u30D0\u30FC\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u3082\u3046\u3044\u3061\u3069\u3084\u3063\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",corruptFileErrorMsg:"\u30D5\u30A1\u30A4\u30EB\u306E\u30ED\u30FC\u30C9\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002\u30D5\u30A1\u30A4\u30EB\u304C\u3053\u308F\u308C\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",stopScreenSharing:"\u306F\u3044\u3057\u3093\u3066\u3044\u3057",couldntReceiveScreenShare:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3058\u3085\u3057\u3093\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002",screenSharingTimedOutErrorMsg:"%1$d: \u306F\u3044\u3057\u3093\u30C7\u30FC\u30BF\u306E\u3057\u3085\u3068\u304F\u304C\u306A\u304C\u3044\u3058\u304B\u3093\u306B\u308F\u305F\u308A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",endScreenShareReceiving:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3092\u306E\u3058\u3085\u3057\u3093\u3092\u3057\u3085\u3046\u308A\u3087\u3046\u3059\u308B",endPresentationLine1:"\u306F\u3063\u3074\u3087\u3046",endPresentationLine2:"\u3057\u3085\u3046\u308A\u3087\u3046",requestPresentationLine1:"\u305B\u3044\u3068",requestPresentationLine2:"\u306F\u3063\u3074\u3087\u3046",endSharingLine1:"\u306F\u3044\u3057\u3093",endSharingLine2:"\u3066\u3044\u3057",startSharingLine1:"\u306F\u3044",startSharingLine2:"\u3057\u3093",confirmStartPresentation:"\u305B\u3044\u3068\u306F\u3063\u3074\u3087\u3046\u3092\u306F\u3058\u3081\u307E\u3059\u304B\uFF1F",confirmStartScreenSharing:"\u306F\u3044\u3057\u3093\u3092\u306F\u3058\u3081\u307E\u3059\u304B\uFF1F",yourTurnToPresent:"\u3042\u306A\u305F\u304C\u306F\u3063\u3074\u3087\u3046\u3059\u308B\u3070\u3093\u3067\u3059\uFF01",unsupportedFileErrorMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u305F\u3044\u304A\u3046\u3057\u3066\u3044\u307E\u305B\u3093\u3002\u30D5\u30A1\u30A4\u30EB\u3051\u3044\u3057\u304D: %1$s \u304B\u304F\u3061\u3087\u3046\u3057: %2$s",unsupportedFileErrorWithoutOptMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u305F\u3044\u304A\u3046\u3057\u3066\u3044\u307E\u305B\u3093",confirmMultiCardGroupDelete:"%1$d\u307E\u3044\u306E\u30AB\u30FC\u30C9\u3068\u3053\u30AB\u30FC\u30C9\u3092\u3051\u3057\u307E\u3059\u304B\uFF1F",confirmMultiChildCardDelete:"\u30AB\u30FC\u30C9\u3068%1$d\u307E\u3044\u306E\u3053\u30AB\u30FC\u30C9\u3092\u3051\u3057\u307E\u3059\u304B\uFF1F",confirmCardDelete:"\u30AB\u30FC\u30C9\u3092\u3051\u3057\u307E\u3059\u304B\uFF1F",inputCannotContainSpacesWarning:"\u304B\u3089\u306E\u3082\u3058\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",inputTooLongWarning:"%1$d\u3082\u3058\u3088\u308A\u3059\u304F\u306A\u304F\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",taskNameDefaultPrefix:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064",timelineDateFmtPrevYear:"%d\u306D\u3093%d\u304C\u3064%d\u306B\u3061",timelineDateFmtThisYear:"%d\u304C\u3064%d\u306B\u3061 %02d:%02d",timelineDateFmtToday:"%02d:%02d",daysRemaining:"\u3042\u3068%d\u306B\u3061",hoursRemaining:"\u3042\u3068%d\u3058\u304B\u3093",minRemaining:"\u3042\u3068%1$s\u3075\u3093",secRemaining:"\u3042\u3068%1$s\u3073\u3087\u3046",textButtonIconClass:"textButtonIconJa",submitted:"\u3066\u3044\u3057\u3085\u3064\u305A\u307F",drawn:"\u304A\u3048\u304B\u304D",annotation:"\u3066\u3093\u3055\u304F",couldntSave:"%1$s\u304C\u307B\u305E\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",annotationThumbnail:"\u3066\u3093\u3055\u304F\u30B5\u30E0\u30CD\u30A4\u30EB",documentThumbnail:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u30B5\u30E0\u30CD\u30A4\u30EB",languageSettingTitle:"\u3052\u3093\u3054\u305B\u3063\u3066\u3044",english:"\u3048\u3044\u3054",japanese:"\u306B\u307B\u3093\u3054\uFF08\u304B\u3093\u3058\uFF09",japaneseHira:"\u306B\u307B\u3093\u3054\uFF08\u3072\u3089\u304C\u306A\uFF09",traditionalChinese:"\u306F\u3093\u305F\u3044\u3061\u3085\u3046\u3054\u304F\u3054",simplifiedChinese:"\u304B\u3093\u305F\u3044\u3061\u3085\u3046\u3054\u304F\u3054",inButtonIconClass:"inButtonIconJaHira",outButtonIconClass:"outButtonIconJaHira",thinkingToolHelpPageUrl:"https://n.loilo.tv/ja/thinkingtool",couldntGetSubmissions:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",tasksFeatureIsUnavailable:"%1$d\u306B\u3093\u3088\u308A\u304A\u304A\u3044\u3072\u3068\u304C\u3055\u3093\u304B\u3059\u308B\u3058\u3085\u304E\u3087\u3046\u3067\u306F\u3001\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3064\u304B\u3046\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",regularWtFontName:"loilo-NotoSansCJKjp-Regular",boldWtFontName:"loilo-NotoSansCJKjp-Black",uiFontName:"Noto Sans JP",couldntGetSubmissionMessage:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u306E\u3066\u3044\u3057\u3085\u3064\u3058\u3087\u3046\u304D\u3087\u3046\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093",appName:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB",loiloNote:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8",submissionBox:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053",error:"\u30A8\u30E9\u30FC",timeline:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",status400Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u3051\u3044\u3057\u304D\u304C\u307E\u3061\u304C\u3063\u3066\u3044\u308B\u3088\u3046\u3067\u3059",status403Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30C7\u30FC\u30BF\u306B\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u306F\u3044\u3051\u307E\u305B\u3093",status404Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30C7\u30FC\u30BF\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",status500Msg:"\u30B5\u30FC\u30D0\u30FC\u3067\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002\u30B5\u30FC\u30D0\u30FC\u306E\u3061\u3087\u3046\u3057\u304C\u308F\u308B\u3044\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",defaultErrorMsg:"\u3054\u3081\u3093\u306A\u3055\u3044\u3001\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002",goToTopPage:"\u30C8\u30C3\u30D7\u30DA\u30FC\u30B8\u306B\u3082\u3069\u308B",viewStatusPage:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30DA\u30FC\u30B8\u3067\u30B5\u30FC\u30D0\u30FC\u3058\u3087\u3046\u307B\u3046\u3092\u304B\u304F\u306B\u3093\u3059\u308B",login:"\u30ED\u30B0\u30A4\u30F3",masterUserLoginUnsupported:"\u304B\u3093\u305F\u3093\u30ED\u30B0\u30A4\u30F3\u306E\u30DE\u30B9\u30BF\u30FC\u30E6\u30FC\u30B6\u3067\u306F\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",invalidCredentials:"\u304C\u3063\u3053\u3046ID\u3001\u30E6\u30FC\u30B6\u30FCID\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u304F\u307F\u3042\u308F\u305B\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093\u3002",invalidIPAddress:"\u305B\u3064\u305E\u304F\u3082\u3068\u306EIP\u30A2\u30C9\u30EC\u30B9\u304C\u305B\u3044\u3052\u3093\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002\u304C\u3063\u3053\u3046\u306E\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",accountLocked:"\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u30ED\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u304C\u3063\u3053\u3046\u306E\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",forbiddenIsAdmin:"\u304B\u3093\u308A\u3057\u3083\u30E6\u30FC\u30B6\u306F\u30A2\u30D7\u30EA\u306B\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",forbiddenIsSSOUser:"Google\u30A2\u30AB\u30A6\u30F3\u30C8\u308C\u3093\u3051\u3044\u3092\u3057\u3066\u3044\u308B\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",couldntLogIn:"\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",endpoint:"\u305B\u3064\u305E\u304F\u3055\u304D",schoolIDLabel:"\u304C\u3063\u3053\u3046",schoolIDPlaceholder:"\u304C\u3063\u3053\u3046ID",schoolIDTitle:"\u306F\u3093\u304B\u304F\u3048\u3044\u3059\u3046\u3058\u3001- (\u30CF\u30A4\u30D5\u30F3)\u3001_ (\u30A2\u30F3\u30C0\u30FC\u30D0\u30FC)\u3067\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u4E0B\u3055\u3044\u3002",userIDLabel:"\u30E6\u30FC\u30B6\u30FC",userIDPlaceholder:"\u30E6\u30FC\u30B6\u30FCID",userIDTitle:"\u306F\u3093\u304B\u304F\u3048\u3044\u3059\u3046\u3058\u3068\u304D\u3054\u3046\u3067\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u4E0B\u3055\u3044\u3002",passwordPlaceholder:"\u30D1\u30B9\u30EF\u30FC\u30C9",passwordTitle:"\u306F\u3093\u304B\u304F\u3048\u3044\u3059\u3046\u3058\u3068\u304D\u3054\u3046\u3067\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u4E0B\u3055\u3044\u3002",forgotPasswordLinkText:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u308F\u304B\u3089\u306A\u3044\u3070\u3042\u3044",forgotPasswordPageUrl:"https://help.loilonote.app/--5cef979a6da3ae0017645681",trialAccountLinkText:"\u3080\u308A\u3087\u3046\u305F\u3044\u3051\u3093\u306F\u3053\u3061\u3089",adminSignInLinkText:"\u304B\u3093\u308A\u3057\u3083\u30ED\u30B0\u30A4\u30F3",recommendUpdateTitle:"\u30D6\u30E9\u30A6\u30B6\u3092\u3055\u3044\u3057\u3093\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",recommendUpdateMsg:"\u305F\u3060\u3057\u304F\u3046\u3054\u304B\u306A\u3044\u3053\u3068\u304C\u3042\u308A\u307E\u3059",loginContinueBtnText:"\u3053\u306E\u307E\u307E\u3064\u304B\u3046",recommendNativeAppTitle:"\u30A2\u30D7\u30EA\u3092\u3064\u304B\u3063\u3066\u304F\u3060\u3055\u3044",recommendNativeAppMsg:"\u3042\u306A\u305F\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u304D\u306E\u3046\u304C\u305B\u3044\u3052\u3093\u3055\u308C\u307E\u3059\u3001\u3059\u3079\u3066\u306E\u304D\u306E\u3046\u3092\u3064\u304B\u3046\u306B\u306F\u30A2\u30D7\u30EA\u3092\u3064\u304B\u3063\u3066\u304F\u3060\u3055\u3044",unsupportedBrowserTitle:"\u3042\u306A\u305F\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093",unsupportedBrowserMsg:"\u3055\u3044\u3057\u3093\u30D0\u30FC\u30B8\u30E7\u30F3\u306EGoogle Chrome\u3092\u3064\u304B\u3063\u3066\u304F\u3060\u3055\u3044",needBrowserUpdateMsg:"\u30D6\u30E9\u30A6\u30B6\u3092\u3055\u3044\u3057\u3093\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",unknownBrowser:"\u3057\u3089\u306A\u3044\u30D6\u30E9\u30A6\u30B6",yourBrowser:"\u3042\u306A\u305F\u306E\u30D6\u30E9\u30A6\u30B6",supportedVersionsLabel:"\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u308B\u30D6\u30E9\u30A6\u30B6\u306E\u30D0\u30FC\u30B8\u30E7\u30F3",otherIOSBrowsers:"\u305D\u306E\u305FiOS\u306E\u30D6\u30E9\u30A6\u30B6\u30FC: iOS 13\u3044\u3058\u3087\u3046",localeCode:"ja-JP",signUpPageUrl:"https://n.loilo.tv/users/sign_up?lang=ja",iosAppStorePageUrl:"https://apps.apple.com/jp/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_ja.svg",installBrowser:"\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B",getApp:"\u30A2\u30D7\u30EA\u3092\u3066\u306B\u3044\u308C\u308B",chromeDownloadPageUrl:"https://www.google.com/intl/ja/chrome/",appStatusPageUrl:"https://status.loilonote.app/ja",couldntEncodeDrawnData:"\u3066\u304C\u304D\u30C7\u30FC\u30BF\u306E\u30A8\u30F3\u30B3\u30FC\u30C9\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",accessNotPermitted:"\u30A2\u30AF\u30BB\u30B9\u304C\u304D\u3087\u304B\u3055\u308C\u3066\u3044\u307E\u305B\u3093",giveClipboardAccess:"\u306F\u308A\u3064\u3051\u304D\u306E\u3046\u3092\u3064\u304B\u3046\u306B\u306F\u3001\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u3078\u306E\u30A2\u30AF\u30BB\u30B9\u3092\u304D\u3087\u304B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntLoadFontFileMsg:"\u3072\u3064\u3088\u3046\u306A\u30D5\u30A9\u30F3\u30C8\u30D5\u30A1\u30A4\u30EB\u304C\u3088\u307F\u3053\u307F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",noMemoryErrorTitle:"\u30E1\u30E2\u30EA\u304C\u305F\u308A\u307E\u305B\u3093",noMemoryErrorMsg:"\u30E1\u30E2\u30EA\u304C\u305F\u308A\u306A\u3044\u305F\u3081\u3001\u3057\u3087\u308A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A2\u30D7\u30EA\u3092\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntChangeTool:"\u30C4\u30FC\u30EB\u306E\u304D\u308A\u304B\u3048\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",couldntFetchData:"\u30C7\u30FC\u30BF\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntSetupPdfWorker:"PDF\u30EF\u30FC\u30AB\u30FC\u306E\u3055\u304F\u305B\u3044\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",couldntDeleteAsOtherInCharge:`\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u304C\u3064\u304B\u3063\u3066\u3044\u308B\u305F\u3081\u3051\u305B\u307E\u305B\u3093\u3002
\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u305F\u3093\u3068\u3046\u3092\u3084\u3081\u307E\u3059\u304B\uFF1F`,relatedSubjectsMsg:"\u203B\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u305F\u3093\u3068\u3046\u304B\u3089\u3070\u305A\u308C\u308B\u3070\u3042\u3044\u3001\u3057\u308A\u3087\u3046\u3070\u3053\u3092\u304D\u3087\u3046\u3086\u3046\u3057\u3066\u3044\u308B\u3053\u308C\u3089\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u305F\u3093\u3068\u3046\u3082\u306F\u305A\u308C\u307E\u3059",stopBeginInCharge:"\u305F\u3093\u3068\u3046\u304B\u3089\u5916\u308C\u308B",fileTooBigTitle:"\u3068\u3066\u3082\u304A\u304A\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3067\u3059",fileTooBigMessage:"1GB\u3092\u3053\u3048\u308B\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",exceedVideoQuality:`\u304A\u304A\u304D\u3044\u30B5\u30A4\u30BA\u306E\u3069\u3046\u304C\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059\u3002
\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3058\u306B\u30B9\u30E0\u30FC\u30BA\u306A\u3057\u3061\u3087\u3046\u304C\u3067\u304D\u307E\u305B\u3093\u3002
\u3053\u306E\u307E\u307E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3092\u3064\u3065\u3051\u307E\u3059\u304B\uFF1F`,confirmDeleteTarget:"\u300C%1$s\u300D\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",signInWithXXX:"%1$s\u3067\u30ED\u30B0\u30A4\u30F3",confirmDisplayAnswers:"\u304B\u3044\u3068\u3046\u3092\u3072\u3087\u3046\u3058\u3057\u307E\u3059\u304B\uFF1F",submissionListDateShortFmt:"m\u304C\u3064d\u306B\u3061 HH:MM",submissionListDateFullFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061 HH:MM",couldntExportCard:"\u30AB\u30FC\u30C9\u306E\u304B\u304D\u3060\u3057\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",pdf:"PDF",exportingCardAsPdf:"\u30AB\u30FC\u30C9\u3092PDF\u306B\u304B\u304D\u3060\u3057\u3066\u3044\u307E\u3059...",open:"\u3072\u3089\u304F",cache:"\u30AD\u30E3\u30C3\u30B7\u30E5",submittersAnswer:"%1$s\u306E\u3053\u305F\u3048",previousSomeonesAnswer:"\u307E\u3048\u306E\u3072\u3068\u306E\u3053\u305F\u3048",nextSomeonesAnswer:"\u3064\u304E\u306E\u3072\u3068\u306E\u3053\u305F\u3048",newerDataExistsOnServer:"\u30B5\u30FC\u30D0\u30FC\u306B\u3042\u305F\u3089\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30C7\u30FC\u30BF\u304C\u3042\u308A\u307E\u3059",qrCodePreviewDialogTitle:"QR\u30B3\u30FC\u30C9\u3092\u307F\u3064\u3051\u307E\u3057\u305F",createCard:"\u30AB\u30FC\u30C9\u3055\u304F\u305B\u3044",updateCard:"\u30AB\u30FC\u30C9\u3053\u3046\u3057\u3093",webCard:"Web\u30AB\u30FC\u30C9",createWebCard:"Web\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044",createTextCard:"\u30C6\u30AD\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044",creatingWebCard:"Web\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3061\u3085\u3046...",failedCreateWebCardFromExtension:"Web\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3057\u305F\u3044\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3044\u305F\u3042\u3068\u306B\u3001\u3082\u3046\u3044\u3061\u3069\u304B\u304F\u3061\u3087\u3046\u304D\u306E\u3046\u304B\u3089\u30AB\u30FC\u30C9\u3055\u304F\u305B\u3044\u3057\u3066\u304F\u3060\u3055\u3044\u3002",failedCreateWebCardFromExtensionTitle:"\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3044\u3066\u304F\u3060\u3055\u3044",qrCodeScannerPrepError:"QR\u30B3\u30FC\u30C9\u3088\u307F\u3068\u308A\u306E\u3058\u3085\u3093\u3073\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",textCardPlaceholderImgPath:"/svg/text_ja_100x75_margin.svg",qrModeGuidance:"QR\u30B3\u30FC\u30C9\u3092\u3057\u304B\u304F\u306E\u306A\u304B\u306B\u3044\u308C\u3066\u304F\u3060\u3055\u3044",selectAnswers:"\u304B\u3044\u3068\u3046\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectAnswersCompare:"\u3072\u304B\u304F\u3059\u308B\u304B\u3044\u3068\u3046\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectNoteForAddingMaterials:"\u3069\u306E\u30CE\u30FC\u30C8\u306B\u3057\u308A\u3087\u3046\u3092\u3064\u3044\u304B\u3057\u307E\u3059\u304B\uFF1F",videoRecordingTimeLimitReached:"\u308D\u304F\u304C\u3067\u304D\u308B\u3058\u304B\u3093\u304C\u304A\u308F\u308A\u307E\u3057\u305F\u3002\u308D\u304F\u304C\u3092\u3066\u3044\u3057\u3057\u307E\u3059\u3002",creatingAttendanceCard:"\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3057\u3066\u3044\u307E\u3059...",createdAttendanceCard:"\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3057\u307E\u3057\u305F",failedCreateAttendanceCard:"\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3055\u304F\u305B\u3044\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",attendance:"\u3057\u3085\u3063\u3051\u3064",attendanceReport:"\u3057\u3085\u3063\u3051\u3064\u308C\u3093\u3089\u304F",attendanceCardCreator:"\u3055\u304F\u305B\u3044\u3057\u3083",preparingAttendance:"\u3057\u3085\u3063\u3051\u3064\u308C\u3093\u3089\u304F\u3092\u3058\u3085\u3093\u3073\u3057\u3066\u3044\u307E\u3059",clickHereForHelp:"\u3064\u304B\u3044\u304B\u305F\u306F\u3053\u3061\u3089",helpPageLinkForQuizCardTest:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForQuizCardSurvey:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForAttendanceCardTeacher:"https://help.loilonote.app/--5f8567143f41ab0022fa9651",helpPageLinkForAttendanceCardStudent:"https://help.loilonote.app/--60c18ef576a1050044286d87",loginPageTitle:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u30ED\u30B0\u30A4\u30F3",loginPageDesc:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D\u3002\u305F\u306E\u3057\u3044\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3057\u3088\u3046\uFF01",penType:"\u30DA\u30F3\u306E\u3057\u3085\u308B\u3044",penColor:"\u30DA\u30F3\u306E\u3044\u308D",highlighterColor:"\u3051\u3044\u3053\u3046\u307A\u3093\u306E\u3044\u308D",clearAll:"\u305C\u3093\u3076\u3051\u3059",penThickness:"\u305B\u3093\u306E\u3075\u3068\u3055",eraserSize:"\u3051\u3057\u30B4\u30E0\u306E\u3075\u3068\u3055",myFolder:"\u30DE\u30A4\u30D5\u30A9\u30EB\u30C0",schoolWideFolder:"\u304C\u3063\u3053\u3046\u306A\u3044",districtShared:"%1$s\u304D\u3087\u3046\u3086\u3046",schoolShared:"\u304C\u3063\u3053\u3046\u306A\u3044\u304D\u3087\u3046\u3086\u3046",classShared:"\u3058\u3085\u304E\u3087\u3046\u306A\u3044\u304D\u3087\u3046\u3086\u3046",teachersOnlyFolder:"\u305B\u3093\u305B\u3044\u306E\u307F",classFolder:"%1$s \u305B\u3093\u3088\u3046",sortUpdateDateOrder:"\u3053\u3046\u3057\u3093\u3073\u3058\u3085\u3093",sortCreateDateOrder:"\u3055\u304F\u305B\u3044\u3073\u3058\u3085\u3093",materialNameOrder:"\u306A\u307E\u3048\u3058\u3085\u3093",materialFileUpdateDateFolderNameOrder:"\u30D5\u30A9\u30EB\u30C0\u3081\u3044\u3058\u3085\u3093",couldntFetchSharedNoteMembers:"\u30E1\u30F3\u30D0\u30FC\u306E\u3057\u3085\u3068\u304F\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",manageSharedNoteMember:"\u30E1\u30F3\u30D0\u30FC\u306E\u304B\u3093\u308A",chooseNoteToManageMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u304B\u3093\u308A\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToImport:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",pushTokenRegistration:"\u3064\u3046\u3061\u30C8\u30FC\u30AF\u30F3\u306E\u3068\u3046\u308D\u304F",registered:"\u3068\u3046\u308D\u304F\u305A\u307F",unregistered:"\u307F\u3068\u3046\u308D\u304F",schoolLoiloTVUrl:"https://school.loilo.tv/jp/web.html",citationNotePrefix:"\u3044\u3093\u3088\u3046",markAllAsRead:"\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3059\u308B",confirmMarkAllSubmitsAsRead:"\u3066\u3044\u3057\u3085\u3064\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3059\u304B\uFF1F",markedAllSubmitsAsRead:"\u3066\u3044\u3057\u3085\u3064\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3057\u305F",confirmMarkAllRevealAnswersAsRead:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3059\u304B\uFF1F",markedAllRevealAnswersAsRead:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3057\u305F",xIsDeleted:"%1$s\u304C\u3055\u304F\u3058\u3087\u3055\u308C\u3066\u3044\u307E\u3059",copied:"\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",enableSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u3092\u3086\u3046\u3053\u3046\u306B\u3059\u308B",selectSchool:"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u304C\u3063\u3053\u3046\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",showAnnotation:"\u3066\u3093\u3055\u304F\u3092\u3072\u3087\u3046\u3058",hideAnnotation:"\u3066\u3093\u3055\u304F\u3092\u3072\u3087\u3046\u3058\u3057\u306A\u3044",submissionDeadlineFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061 HH:MM \u3057\u3081\u304D\u308A",submissionBoxDeletedOrNotExisted:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u306F\u3051\u3055\u308C\u305F\u304B\u3001\u3082\u3068\u3082\u3068\u306A\u3044\u3088\u3046\u3067\u3059",getToWork:"\u3044\u307E\u3059\u3050\u3084\u308B\uFF01",chooseNoteToWorkIn:"\u3069\u306E\u30CE\u30FC\u30C8\u3067\u304B\u3060\u3044\u3092\u3084\u308A\u307E\u3059\u304B\uFF1F",newTaskCreated:"\u3042\u305F\u3089\u3057\u3044\u304B\u3060\u3044\u304C\u3042\u308A\u307E\u3059",standardNote:"\u3075\u3064\u3046\u306E\u30CE\u30FC\u30C8",sharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8",couldntAddMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u3064\u3044\u304B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",removedFromSharedNoteMembers:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306E\u30E1\u30F3\u30D0\u30FC\u3067\u306A\u304F\u306A\u308A\u307E\u3057\u305F",couldntGetDeviceInfo:"\u30C7\u30D0\u30A4\u30B9\u3058\u3087\u3046\u307B\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",changePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u304B\u3048\u308B",submitPassword:"\u304B\u3048\u308B",currentPasswordIncorrect:"\u3044\u307E\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u307E\u3061\u304C\u3063\u3066\u3044\u307E\u3059",currentPassword:"\u3044\u307E\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",newPassword:"\u3042\u305F\u3089\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",newPasswordConfirm:"\u3042\u305F\u3089\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\uFF08\u3082\u3046\u3044\u3061\u3069\uFF09",couldntChangePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",passwordUpdated:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u304B\u308F\u308A\u307E\u3057\u305F",ipAddressRestricted:"\u305B\u3064\u305E\u304F\u3082\u3068IP\u30A2\u30C9\u30EC\u30B9\u304C\u305B\u3044\u3052\u3093\u3055\u308C\u3066\u3044\u307E\u3059",hiUser:"%1$s\u3055\u3093",setNewPassword:"\u3064\u304E\u304B\u3089\u306E\u30ED\u30B0\u30A4\u30F3\u306B\u3064\u304B\u3046\u3042\u305F\u3089\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u305B\u3063\u3066\u3044\u3057\u3066\u304F\u3060\u3055\u3044",welcomeToLns:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D",connectionStatus:"\u305B\u3064\u305E\u304F\u3058\u3087\u3046\u304D\u3087\u3046",connectedToPushServer:"\u3064\u3046\u3061\u30B5\u30FC\u30D0\u30FC\u306B\u305B\u3064\u305E\u304F\u305A\u307F",couldntConnectToPushServer:"\u3064\u3046\u3061\u30B5\u30FC\u30D0\u30FC\u306B\u3064\u306A\u304C\u3063\u3066\u3044\u306A\u3044\u305F\u3081\u3044\u3061\u3076\u306E\u304D\u306E\u3046\u304C\u3064\u304B\u3048\u307E\u305B\u3093",reconnectingToPushServer:"\u3064\u3046\u3061\u30B5\u30FC\u30D0\u30FC\u3068\u3055\u3044\u305B\u3064\u305E\u304F\u3061\u3085\u3046...",pleaseConnectToInternet:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u306B\u305B\u3064\u305E\u304F\u3057\u3066\u304F\u3060\u3055\u3044",pleaseConnectToInternetDesc:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u305B\u3064\u305E\u304F\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002\u305B\u3064\u305E\u304F\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u304F\u3060\u3055\u3044\u3002",default:"\u304D\u3066\u3044",confirmCloseNoteForOtherSubmissionBox:`\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3072\u3089\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u3053\u306E\u30CE\u30FC\u30C8\u306F\u3068\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,confirmCloseNoteForOtherTimeline:`\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u3092\u3072\u3089\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u3053\u306E\u30CE\u30FC\u30C8\u306F\u3068\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,selectItemsToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",retry:"\u3082\u3046\u3044\u3061\u3069\u3084\u3063\u3066\u307F\u308B",exceedNumberOfExportableItemsMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u30FB\u30D5\u30A9\u30EB\u30C0\u304C\u304A\u304A\u3059\u304E\u308B\u305F\u3081\u3061\u3085\u3046\u3057\u3057\u307E\u3057\u305F",exceedNumberOfExportableHierarchyMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u304C\u304A\u304A\u3059\u304E\u308B\u305F\u3081\u3061\u3085\u3046\u3057\u3057\u307E\u3057\u305F",analyzingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3088\u307F\u3053\u3093\u3067\u3044\u307E\u3059",exportingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u304B\u304D\u3060\u3057\u3066\u3044\u307E\u3059",couldntExportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",import:"\u30A4\u30F3\u30DD\u30FC\u30C8",imported:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",underMaintenace:"\u305F\u3060\u3044\u307E\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E2D\u3067\u3059",endSchedule:"\u3057\u3085\u3046\u308A\u3087\u3046\u3088\u3066\u3044",maintenanceNotification:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u3088\u3066\u3044\u306E\u304A\u3057\u3089\u305B",maintenanceScheduled:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u3088\u3066\u3044\u304C\u3042\u308A\u307E\u3059",watchTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u307F\u308B",seeDetail:"\u304F\u308F\u3057\u304F\u306F\u3053\u3061\u3089",closeTutorialTitle:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u304A\u308F\u308A\u307E\u3059\u304B\uFF1F",closeTutorialMsg:"\u3053\u306E\u3069\u3046\u304C\u306F\u3044\u3064\u3067\u3082\u307F\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059",closeTutorialCheckLabel:"\u3064\u304E\u304B\u3089\u3072\u3087\u3046\u3058\u3057\u306A\u3044",understood:"\u308F\u304B\u3063\u305F\uFF01",failedPlayTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u306E\u3055\u3044\u305B\u3044\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002",importingNotes:"\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",exportingNotes:"\u30CE\u30FC\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",accessIsNotAllowed:"\u3042\u306A\u305F\u306EIP\u30A2\u30C9\u30EC\u30B9\u304B\u3089\u306E\u30A2\u30AF\u30BB\u30B9\u306F\u304D\u3093\u3057\u3055\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToJoin:"\u3042\u306A\u305F\u306F\u3053\u306E\u30AF\u30E9\u30B9\u306B\u306F\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",classHasEnded:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3078\u3044\u3053\u3046\u3055\u308C\u307E\u3057\u305F",onlyStudentsAllowedToJoin:"\u305B\u3044\u3068\u3044\u304C\u3044\u306F\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",graduatesNotAllowedToJoinClass:"\u305D\u3064\u304E\u3087\u3046\u3057\u305F\u304C\u3063\u3053\u3046\u306E\u30AF\u30E9\u30B9\u306B\u306F\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",ssoLogin422Msg:"\u304C\u3063\u3053\u3046\u306A\u3044\u306B\u304A\u306A\u3058%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u3075\u305F\u3064\u3044\u3058\u3087\u3046\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u30ED\u30B0\u30A4\u30F3\u3057\u305F\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u3044\u304C\u3044\u306E\u308C\u3093\u3051\u3044\u3092\u304B\u3044\u3058\u3087\u3057\u3066\u304F\u3060\u3055\u3044\u3002",ssoLogin422Url:"https://help.loilonote.app/--608bbb836138540022b80af3",ssoLogin404Msg:"\u3053\u306E%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3064\u304B\u3048\u307E\u305B\u3093\u3002\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",webCardExtensionLeadingText:`\u30D6\u30E9\u30A6\u30B6\u306E\u304B\u304F\u3061\u3087\u3046\u304D\u306E\u3046\u3092\u3064\u304B\u3046\u3068
Web\u30AB\u30FC\u30C9\u3092\u304B\u3093\u305F\u3093\u306B\u3064\u304F\u308C\u307E\u3059`,learnMore:"\u304F\u308F\u3057\u304F\u306F\u3053\u3061\u3089",helpWebCardExtensionUrl:"https://help.loilonote.app/--605840aeedaca400222dbd58",importNotes:"%1$d\u3053\u306E\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3059",createCourseAfterUserGroupCreation:"\u3064\u3065\u3051\u3066\u3058\u3085\u304E\u3087\u3046\u3092\u3055\u304F\u305B\u3044\u3057\u3066\u304F\u3060\u3055\u3044",createCourseAfterUserGroupCreationDesc:"\u30AF\u30E9\u30B9\u306E\u306A\u304B\u306B\u3001\u3053\u304F\u3054\u3001\u3059\u3046\u304C\u304F\u3001\u3048\u3044\u3054\u306A\u3069\u3001\u304B\u3082\u304F\u3054\u3068\u306B\u3058\u3085\u304E\u3087\u3046\u3092\u3055\u304F\u305B\u3044\u3057\u307E\u3059\u3002",insufficientPermission:"\u3042\u306A\u305F\u306F\u3053\u308C\u3092\u3058\u3063\u3053\u3046\u3067\u304D\u307E\u305B\u3093",accessDenied:"\u3042\u306A\u305F\u306F\u3053\u308C\u306B\u30A2\u30AF\u30BB\u30B9\u3067\u304D\u307E\u305B\u3093",actionCannotBeCarriedOutOnClosedCourse:"\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046\u3067\u306F\u3058\u3063\u3053\u3046\u3067\u304D\u307E\u305B\u3093",couldNotGetSubmissionAnswers:"\u304B\u3044\u3068\u3046\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folderWithThisNameAlreadyExists:"\u304A\u306A\u3058\u306A\u307E\u3048\u306E\u30D5\u30A9\u30EB\u30C0\u304C\u3042\u308A\u307E\u3059",importDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059",couldntImportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A4\u30F3\u30DD\u30FC\u30C8\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",folderForImportedItemsWillBeCreated:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3055\u304D\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u3055\u304F\u305B\u3044\u3057\u307E\u3059",searchExampleLessonPlans:"\u3058\u3085\u304E\u3087\u3046\u3042\u3093\u3092\u3055\u304C\u3059",searchExampleLessonPlansPageUrl:"https://help.loilonote.app/--602630326cb271001c1f19d7",administrator:"\u304B\u3093\u308A\u3057\u3083",reuse:"\u3055\u3044\u308A\u3088\u3046",reuseThisTestCard:"\u3053\u306E\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3055\u3044\u308A\u3088\u3046",reuseThisAttendanceCard:"\u3053\u306E\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3055\u3044\u308A\u3088\u3046",webPageSharedText:"Web\u30DA\u30FC\u30B8\u304C\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u307E\u3057\u305F",webPageSharedTextBy:"%1$s \u3055\u3093\u304B\u3089\u3001Web\u30DA\u30FC\u30B8\u304C\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u307E\u3057\u305F",openWebPage:"Web\u30DA\u30FC\u30B8\u3092\u3072\u3089\u304F",changeLayout:"\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u304B\u3048\u308B",changeLayoutDescription:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u304B\u3048\u3089\u308C\u307E\u3059",resetLayout:"\u306F\u3058\u3081\u306E\u305B\u3063\u3066\u3044\u306B\u3082\u3069\u3059",pleaseWaitForMaintenanceEnd:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u3057\u3085\u3046\u308A\u3087\u3046\u307E\u3067\u3057\u3070\u3089\u304F\u304A\u307E\u3061\u304F\u3060\u3055\u3044",uploadingXXX:"%1$s\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",experimentalFeatures:"\u304A\u305F\u3081\u3057\u3061\u3085\u3046\u306E\u304D\u306E\u3046",folderCannotBeUploaded:"\u30D5\u30A9\u30EB\u30C0\u30FC\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",filesNoExtCannotBeUploaded:"\u304B\u304F\u3061\u3087\u3046\u3057\u306E\u306A\u3044\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",fileWithInvalidNameContained:"\u3078\u3093\u306A\u306A\u307E\u3048\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToDocumentGroup:"\u3042\u306A\u305F\u306F\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u304B\u304D\u3053\u3081\u307E\u305B\u3093",convertToSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306B\u3059\u308B",chooseNoteToShare:"\u304D\u3087\u3046\u3086\u3046\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseUsersToBeShared:"\u304D\u3087\u3046\u3086\u3046\u3059\u308B\u30E6\u30FC\u30B6\u30FC\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",shareXXX:" %1$s\u3092\u304D\u3087\u3046\u3086\u3046",confirmShareNote:"\u304D\u3087\u3046\u3086\u3046\u3057\u305F\u30CE\u30FC\u30C8\u306F\u3075\u3064\u3046\u306E\u30CE\u30FC\u30C8\u306B\u306F\u3082\u3069\u305B\u307E\u305B\u3093\u3002\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u304C\u3064\u304B\u3048\u306A\u3044\u30A2\u30D7\u30EA\u3067\u306F\u3053\u3053\u306B\u3072\u3087\u3046\u3058\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",failedGoogleLoginHelpText:"Google\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u306A\u3044\u3068\u304D\u306F\u3053\u3061\u3089",failedGoogleLoginHelpLink:"https://help.loilonote.app/--613570bde97042001dfbd713",teacherNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u305F\u3093\u3068\u3046\u3057\u3066\u3044\u305F\u3058\u3085\u304E\u3087\u3046\u306F\u3042\u308A\u307E\u305B\u3093",studentNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u3055\u3093\u304B\u3057\u3066\u3044\u305F\u3058\u3085\u304E\u3087\u3046\u306F\u3042\u308A\u307E\u305B\u3093",pasteTips:"\u30C6\u30AD\u30B9\u30C8\u3084\u30D6\u30E9\u30A6\u30B6\u3067\u30B3\u30D4\u30FC\u3057\u305F\u304C\u305E\u3046\u3092\u306F\u308A\u3064\u3051\u3067\u304D\u307E\u3059",noMembersInGroup:"\u30AF\u30E9\u30B9\u306B\u305B\u3044\u3068\u304C\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u305B\u3093",showCodeToInviteStudents:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u3072\u3087\u3046\u3058\u3057\u3066\u3001\u305B\u3044\u3068\u306B\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u3082\u3089\u3063\u3066\u304F\u3060\u3055\u3044",members:"\u306B\u3093",saved:"\u307B\u305E\u3093\u305A\u307F",displayByStudent:"\u305B\u3044\u3068\u3054\u3068\u306B\u3072\u3087\u3046\u3058\u3059\u308B"};var m7={start:"\u958B\u59CB",status404ItemNotFound:"\u9805\u76EE\u4E0D\u5B58\u5728",aboutThisApp:"\u95DC\u65BC\u9019\u500BApp",addCardDialogTitle:"\u65B0\u589E\u5361\u7247",addCourseDialogJoinCourseBtnLabel:"\u65B0\u589E",addCourseLabel:"\u65B0\u589E\u8AB2\u7A0B",addCourseDesc:"\u8ACB\u300C\u65B0\u589E\u8AB2\u7A0B\u300D",adminPage:"\u7BA1\u7406\u9801\u9762",allMembers:"\u6240\u6709\u4EBA",alreadyJoinedGroup:"\u5DF2\u53C3\u52A0",andOtherMembers:"\u5176\u4ED6%1$d",anonymous:"\u4E0D\u8A18\u540D",answersNotVisibleWarnMsg:"\u8001\u5E2B\u672B\u958B\u5553\u5171\u4EAB\u529F\u80FD\uFF0C\u76EE\u524D\u7121\u6CD5\u53C3\u95B1\u5176\u4ED6\u4EBA\u7684\u56DE\u7B54",answersNotVisibleWarnTitle:"\u672A\u5206\u4EAB\u4E4B\u56DE\u7B54",api202ErrorMsg:"202:\u5305\u542B %1$s\u4E4B\u6A94\u6848\u672A\u5B8C\u6210\u4E0A\u50B3\u8655\u7406\u3002\u7A0D\u5F85\u7247\u523B\u5F8C\u5373\u53EF\u8B80\u53D6\u3002",api403ErrorMsg:"\u6C92\u6709%1$s\u4E4B\u95B1\u89BD\u6B0A\u9650\u3002\u8A73\u7D30\u60C5\u5F62\u8ACB\u6D3D\u6821\u65B9\u7BA1\u7406\u4EBA\u54E1\u3002",api404ErrorMsg:"\u7121\u6CD5\u627E\u5230\u4F3A\u670D\u5668\u6240\u8981\u6C42\u4E4B%1$s\u3002\u7121\u6CD5\u5EFA\u7ACB\u6B64%1$s\uFF0C\u5C07\u6709\u53EF\u80FD\u88AB\u522A\u9664\u3002",arrange:"\u6392\u5217",asNextCard:"\u4E0B\u4E00\u5F35\u5361\u7247",attending:"\u4E0A\u8AB2\u4E2D",attendingOtherCourse:"\u53C3\u52A0\u5176\u4ED6\u8AB2\u7A0B",audioDefaultFileName:"\u97F3\u983B",audioRecordBtnLabel:"\u9304\u97F3",automatic:"\u81EA\u52D5",back:"\u8FD4\u56DE",backToAnswerList:"\u8FD4\u56DE\u56DE\u7B54\u4E00\u89BD\u8868",brokenNoteErrorMsg:"\u5132\u5B58\u65BC\u4F3A\u670D\u5668\u4E0A\u4E4B%1$s\u53EF\u80FD\u767C\u751F\u6BC0\u640D\u3002\u656C\u8ACB\u806F\u7D61\u672C\u516C\u53F8\u5BA2\u670D\u90E8\u9580\u8655\u7406\u3002\uFF08\u932F\u8AA4\u4EE3\u78BC: %2$d,\u8AB2\u7A0BID: %3$d,\u7B46\u8A18ID: %4$s\uFF09",browserDoesntSupportAudioRecording:"\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668\u4E0D\u652F\u63F4\u9304\u97F3\u529F\u80FD",browserDoesntSupportMediaCapture:"\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668\u4E0D\u652F\u63F4\u7167\u76F8\u529F\u80FD",browsingWeb:"Web",camera:"\u7167\u76F8\u6A5F",cancel:"\u53D6\u6D88",cannotInsertWhileStillLoadingDocument:"\u8CC7\u6599\u8B80\u53D6\u4F5C\u696D\u5C1A\u672A\u5B8C\u6210\uFF0C\u7121\u6CD5\u65B0\u589E\u5361\u7247",cantFindUsableDevice:"\u7121\u6CD5\u53D6\u5F97\u53EF\u4EE5\u4F7F\u7528\u4E4B\u8F09\u5177\u8CC7\u8A0A",cardHasUnsavedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u6B63\u5728\u4E0A\u50B3\u7684\u6A94\u6848",cardHasUploadFailedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u4E0A\u50B3\u5931\u6557\u7684\u6A94\u6848",changeLayout:"\u8B8A\u66F4\u7248\u9762",changeLayoutDescription:"\u53EF\u4EE5\u8B8A\u66F4\u63D0\u51FA\u8CC7\u6599\u7684\u7248\u9762",changeTools:"\u5207\u63DB\u601D\u7DAD\u5DE5\u5177",renamingNote:"\u6B63\u5728\u5C07\u300C%1$s\u300D\u4E4B\u540D\u7A31\u8B8A\u66F4\u70BA\u300C%2$s\u300D...",checkAttendance:"\u78BA\u8A8D\u53C3\u52A0\u8005",checking:"\u78BA\u8A8D\u4E2D...",checkScreenLock:"\u78BA\u8A8D\u87A2\u5E55\u9396\u5B9A",checkServiceStatus:"\u8ACB\u78BA\u8A8D\u4F3A\u670D\u5668\u4E4B\u670D\u52D9\u72C0\u6CC1",chooseFileToCopy:"\u8ACB\u9078\u64C7\u8981\u8907\u88FD\u4E4B\u6A94\u6848",chooseFileToDelete:"\u8ACB\u9078\u64C7\u8981\u522A\u9664\u4E4B\u6A94\u6848",chooseFileToMove:"\u8ACB\u9078\u64C7\u8981\u79FB\u52D5\u4E4B\u6A94\u6848",chooseFileToRename:"\u8ACB\u9078\u64C7\u8981\u8B8A\u66F4\u540D\u7A31\u4E4B\u6A94\u6848",chooseGroupToAddTo:"\u8ACB\u9078\u64C7\u60A8\u8981\u6388\u8AB2\u4E4B\u73ED\u7D1A",noGroups:"\u672C\u5E74\u5EA6\u5C1A\u672A\u6709\u73ED\u7D1A\u767B\u8A18",createNewGroupDesc:"\u8ACB\u7531\u2193 \u300C\u5EFA\u7ACB\u65B0\u73ED\u7D1A\u300D",groupDesc:"\u4E00\u7FA4\u540C\u6642\u4E0A\u8AB2\u4E4B\u5B78\u751F\u7A31\u4E4B\u70BA\u300C\u73ED\u7D1A\u300D",chooseGroupToDelete:"\u8ACB\u9078\u64C7\u8981\u522A\u9664\u4E4B\u73ED\u7D1A",chooseNoteToCopy:"\u8ACB\u9078\u64C7\u8981\u8907\u88FD\u4E4B\u7B46\u8A18",chooseNoteToRename:"\u8ACB\u9078\u64C7\u8981\u8B8A\u66F4\u540D\u7A31\u4E4B\u7B46\u8A18",choosingCourse:"\u9078\u8AB2\u4E2D",close:"\u95DC\u9589",closeAfterTen:"10\u5206\u9418\u5F8C",closeCamera:"\u95DC\u9589\u7167\u76F8\u6A5F",closedTaskLabel:"\u622A\u6B62",closeNote:"\u95DC\u9589\u7B46\u8A18",closeNow:"\u7ACB\u523B\u95DC\u9589",closeThisScreen:"\u95DC\u9589\u6B64\u756B\u9762",closeToday:"\u4ECA\u65E5\u5167",compare:"\u9032\u884C\u6BD4\u8F03",comparison:"\u6BD4\u8F03",complete:"\u5B8C\u6210",confirmAnswerShare:"\u5206\u4EAB\u5B78\u751F\u7B54\u6848\u3002\u662F\u5426\u57F7\u884C?",confirmAudioRecordingOverwrite:"\u91CD\u65B0\u9304\u97F3\u5C07\u8986\u84CB\u539F\u6709\u97F3\u6A94\u3002\u662F\u5426\u57F7\u884C?",confirmCardDelete:"\u662F\u5426\u522A\u9664\u5361\u7247?",confirmDuplicateAllConnectedCards:"\u8907\u88FD\u6240\u6709\u4E32\u806F\u4E4B\u5361\u7247\u3002\u662F\u5426\u78BA\u5B9A\uFF1F",confirmCreateSubject:"\u662F\u5426\u5EFA\u7ACB\u300C%1$s\u300D\uFF1F",confirmDelete:"\u662F\u5426\u522A\u9664?",confirmDeleteAudioRecording:"\u522A\u9664\u97F3\u6A94\u3002\u662F\u5426\u57F7\u884C?",confirmGroupJoin:"\u53C3\u52A0%1$s\u3002\u662F\u5426\u57F7\u884C?",confirmLogout:"\u662F\u5426\u767B\u51FA?",confirmMultiChildCardDelete:"\u662F\u5426\u522A\u9664\u5361\u7247\u8207%1$d\u4E4B\u5B50\u5361\u7247\uFF1F",confirmMultiCardGroupDelete:"\u662F\u5426\u522A\u9664%1$d\u4E4B\u5361\u7247\u8207\u5B50\u5361\u7247\uFF1F",confirmMultiFileDelete:"\u522A\u9664%1$d\u6A94\u6848\u3002\u662F\u5426\u57F7\u884C\uFF1F",confirmReloadWhileUnsavedChangesExist:"\u7B46\u8A18\u6709\u672A\u4FDD\u5B58\u4E4B\u8B8A\u66F4\u5167\u5BB9\uFF0C\u57F7\u884C\u66F4\u65B0\u6709\u53EF\u80FD\u6703\u6D88\u5931\uFF0C\u662F\u5426\u7E7C\u7E8C\u57F7\u884C?",confirmResetVideoCamera:"\u91CD\u65B0\u9304\u5F71\u3002\u662F\u5426\u57F7\u884C?",confirmResubmit:"\u662F\u5426\u518D\u6B21\u7E73\u4EA4\u81F3\u300C%1$s\u300D?",confirmRevealSubmitterNames:"\u5C07\u6392\u5217\u9806\u5E8F\u8B8A\u66F4\u70BA\u300C%1$s\u300D\u3002\u986F\u793A\u6240\u6709\u56DE\u7B54\u8005\u4E4B\u59D3\u540D\uFF0C\u662F\u5426\u57F7\u884C\uFF1F",confirmSendBack:"\u662F\u5426\u56DE\u8986?",confirmSendToAll:"\u662F\u5426\u50B3\u9001\u7D66\u6240\u6709\u4EBA\uFF1F",confirmSendBackAll:"\u662F\u5426\u5C07\u5DF2\u6279\u6539\u4E4B\u4F5C\u696D\u56DE\u8986\u7D66%1$d\uFF1F",confirmSingleFileDelete:"\u522A\u9664\u4E00\u500B\u6A94\u6848\u3002\u662F\u5426\u57F7\u884C?",confirmStartPresentation:"\u8B93\u5B78\u751F\u958B\u59CB\u767C\u8868\u55CE?",confirmStartScreenSharing:"\u662F\u5426\u767C\u5E03\u756B\u9762?",copy:"\u8907\u88FD",duplicate:"\u8907\u88FD",duplicateAllConnectedCards:"\u8907\u88FD\u6240\u6709\u4E32\u806F\u4E4B\u5361\u7247",couldntReuseCard:"\u518D\u6B21\u4F7F\u7528\u5361\u7247\u5931\u6557",copyingDocument:"\u6B63\u5728\u8907\u88FD\u6A94\u6848...",copyingNote:"\u6B63\u5728\u8907\u88FD\u7B46\u8A18...",copyOf:"%1$s\u4E4B\u526F\u672C",duplicateThisCard:"\u8907\u88FD\u9019\u5F35\u5361\u7247",copyToThisFolder:"\u8907\u88FD\u5230\u6B64\u8CC7\u6599\u593E",corruptFileErrorMsg:"\u6A94\u6848\u7121\u6CD5\u8F09\u5165\u3002\u8A72\u6A94\u6848\u53EF\u80FD\u767C\u751F\u6BC0\u640D\u3002",couldntRenameNote:"\u7121\u6CD5\u8B8A\u66F4\u7B46\u8A18\u540D\u7A31",couldntChangeScreenLock:"\u7121\u6CD5\u8B8A\u66F4\u64CD\u4F5C\u9396\u5B9A",couldntChangeStudentSharingLock:"\u7121\u6CD5\u8B8A\u66F4\u5B78\u751F\u9593\u901A\u8A0A\u9396\u5B9A",couldntCopyDocument:"\u7121\u6CD5\u8907\u88FD\u6A94\u6848",couldntCopyNote:"\u8907\u88FD\u7B46\u8A18\u5931\u6557",couldntCreateFolder:"\u7121\u6CD5\u5EFA\u7ACB\u6A94\u6848\u593E",couldntCreateGroup:"\u7121\u6CD5\u5EFA\u7ACB\u73ED\u7D1A",couldntCreateNote:"\u7121\u6CD5\u5EFA\u7ACB\u7B46\u8A18",couldntCreateSubject:"\u7121\u6CD5\u5EFA\u7ACB\u8AB2\u7A0B",couldntCreateTask:"\u7121\u6CD5\u5EFA\u7ACB\u7E73\u4EA4\u76D2",couldntDeleteArchivedGroup:"\u6B64\u73ED\u7D1A\u5DF2\u8F49\u5165\u904E\u53BB\u7684\u8AB2\u7A0B\uFF0C\u7121\u6CD5\u522A\u9664",couldntDeleteAsMaterialsExist:"\u6A94\u6848\u5DF2\u5132\u5B58\u65BC\u6B64\u8AB2\u7A0B\u4E4B\u8CC7\u6599\u76D2\u4E2D\uFF0C\u7121\u6CD5\u522A\u9664",couldntDeleteAsNotesExist:"\u6B64\u8AB2\u7A0B\u542B\u6709\u5DF2\u5132\u5B58\u4E4B\u7B46\u8A18\uFF0C\u7121\u6CD5\u522A\u9664",couldntDeleteAsSubjectsExist:"\u6B64\u73ED\u7D1A\u6709\u5DF2\u767B\u9304\u4E4B\u8AB2\u7A0B\uFF0C\u7121\u6CD5\u522A\u9664\u3002",couldntDeleteAsUsersExist:"\u6B64\u73ED\u7D1A\u6709\u5DF2\u767B\u9304\u4E4B\u4F7F\u7528\u8005\uFF0C\u7121\u6CD5\u522A\u9664\u3002",couldntDeleteClosedGroup:"\u6B64\u73ED\u7D1A\u5DF2\u95DC\u9589\uFF0C\u7121\u6CD5\u522A\u9664\u3002",couldntDeleteCourse:"\u7121\u6CD5\u522A\u9664\u8AB2\u7A0B",couldntDeleteDocument:"\u7121\u6CD5\u522A\u9664\u6A94\u6848",couldntDeleteGroup:"\u7121\u6CD5\u522A\u9664\u73ED\u7D1A",couldntDeleteNote:"\u522A\u9664\u300C%1$s\u300D\u5931\u6557",couldntDeleteTask:"\u7121\u6CD5\u522A\u9664\u7E73\u4EA4\u76D2",describeTask:"\u8ACB\u8F38\u5165\u7E73\u4EA4\u5167\u5BB9",couldntDownloadFileErrorMsg:"%1$d: \u7121\u6CD5\u7531\u4F3A\u670D\u5668\u4E0B\u8F09\u6A94\u6848\u3002\u8ACB\u91CD\u8A66\u3002",couldntGet_CheckInternetConnection:"\u7121\u6CD5\u50B3\u9001\u8ACB\u6C42\u3002\u8ACB\u78BA\u8A8D\u7DB2\u8DEF\u72C0\u614B\u3002",couldntGetCourses:"\u7121\u6CD5\u53D6\u5F97\u8AB2\u7A0B",couldntGetNote:"\u7121\u6CD5\u53D6\u5F97\u7B46\u8A18",couldntGetOtherTeachersCourses:"\u7121\u6CD5\u53D6\u5F97\u5176\u4ED6\u6559\u5E2B\u4E4B\u8AB2\u7A0B",couldntGetPhotoData:"\u7121\u6CD5\u53D6\u5F97\u7167\u7247\u6578\u64DA\u8CC7\u6599",couldntGetPreviousYearsCourses:"\u7121\u6CD5\u53D6\u5F97\u5E74\u5EA6\u4E00\u89BD\u8868",couldntGetVideoData:"\u7121\u6CD5\u53D6\u5F97\u5F71\u7247\u6578\u64DA\u8CC7\u6599",couldntInsertFile:"\u6A94\u6848\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntInsertItemTitle:"%1$s\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntInsertPhoto:"\u7167\u7247\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntInsertVideo:"\u5F71\u7247\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntJoinGroup:"\u7121\u6CD5\u53C3\u52A0\u6B64\u73ED\u7D1A",couldntJoinSubject:"\u7121\u6CD5\u53C3\u52A0\u8AB2\u7A0B",couldntLoadFileTitle:"\u7121\u6CD5\u8B80\u53D6\u6A94\u6848",couldntMoveDocument:"\u7121\u6CD5\u79FB\u52D5\u6A94\u6848",couldntOpenItem:"\u7121\u6CD5\u6253\u958B%1$s\u7B46\u8A18\u8CC7\u6599",couldntReceiveScreenShare:"\u7121\u6CD5\u63A5\u6536\u767C\u5E03\u4E4B\u756B\u9762",couldntRenameItem:"\u7121\u6CD5\u8B8A\u66F4%1$s\u4E4B\u540D\u7A31",couldntSaveNote:"\u7121\u6CD5\u5132\u5B58\u7B46\u8A18",couldntSaveToMaterials:"\u7121\u6CD5\u5132\u5B58\u6A94\u6848",couldntSendBackDocument:"\u7121\u6CD5\u56DE\u8986",couldntSendCards:"\u7121\u6CD5\u50B3\u9001\u8CC7\u6599",couldntShareScreen:"\u7121\u6CD5\u767C\u5E03\u756B\u9762",couldntStartAudioRecording:"\u7121\u6CD5\u958B\u59CB\u9304\u97F3",couldntSubmitCards:"\u7121\u6CD5\u7E73\u4EA4",couldntSubmitWhileSubmittingOthers:"\u6B63\u5728\u6536\u96C6\u5176\u4ED6\u7E73\u4EA4\u8CC7\u6599\uFF0C\u76EE\u524D\u7121\u6CD5\u7E73\u4EA4",couldntUpdateSubmission:"\u7121\u6CD5\u66F4\u65B0\u7E73\u4EA4\u72C0\u614B",couldntUploadDocument:"\u6A94\u6848\u7121\u6CD5\u4E0A\u50B3",couldntUploadNotes:"\u7B46\u8A18\u7121\u6CD5\u4E0A\u50B3",courseAccessDenied:"\u5B58\u53D6\u6B64\u8AB2\u7A0B\u4E4B\u6B0A\u9650\u4E0D\u8DB3",courseDoesntExist:"\u8A72\u8AB2\u7A0B\u4E0D\u5B58\u5728",courseFetchErrorOccurred:"\u53D6\u5F97\u8AB2\u7A0B\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",groupFetchErrorOccurred:"\u53D6\u5F97\u73ED\u7D1A\u5217\u8868\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",courseJoinedMark:"\u5DF2\u65B0\u589E",courseListTitle:"\u8AB2\u7A0B\u4E00\u89BD",create:"\u5EFA\u7ACB",createCard:"\u88FD\u4F5C\u5361\u7247",createdSubjectsListTitle:"\u5DF2\u5EFA\u7ACB\u4E4B\u8AB2\u7A0B",createFolder:"\u5EFA\u7ACB\u8CC7\u6599\u593E",createNewGroupBtnLabel:"\u5EFA\u7ACB\u65B0\u73ED\u7D1A",createNewNote:"\u5EFA\u7ACB\u65B0\u7B46\u8A18",createNewSubjectBtnLabel:"\u5EFA\u7ACB\u65B0\u8AB2\u7A0B",createNewTask:"\u5EFA\u7ACB\u65B0\u7E73\u4EA4\u76D2",creatingFolder:"\u8CC7\u6599\u593E\u5EFA\u7ACB\u4E2D...",creatingGroup:"\u73ED\u7D1A\u300C%1$s\u300D\u5EFA\u7ACB\u4E2D...",creatingNote:"\u300C%1$s\u300D\u5EFA\u7ACB\u4E2D...",creatingSubjectForGroup:"\u5C07\u8AB2\u7A0B\u300C%1$s\u300D\u5EFA\u7ACB\u5230\u73ED\u7D1A\u300C%2$s\u300D\uFF0C\u4F5C\u696D\u4E2D...",creatingTask:"\u7E73\u4EA4\u76D2\u5EFA\u7ACB\u4E2D...",webCard:"Web\u5361",creatingWebCard:"Web\u5361\u6E96\u5099\u4E2D...",cut:"\u526A\u4E0B",dateLabel:"\u65E5\u671F",daysRemaining:"\u5269\u9918%d\u65E5",yearTimeUnit:"\u5E74",dayTimeUnit:"\u65E5",deferToOtherDeviceVersionDesc:"\u6368\u68C4\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\uFF0C\u7531\u5176\u4ED6\u8F09\u5177\u4E4B\u8B8A\u66F4\u5167\u5BB9\u8986\u84CB\u904E\u4F86",deferToOtherDeviceVersionTitle:"\u512A\u5148\u8655\u7406\u5176\u4ED6\u8F09\u5177\u4E4B\u8B8A\u66F4",delete:"\u522A\u9664",deletingDocument:"\u6B63\u5728\u522A\u9664\u6A94\u6848...",deletingGroup:"\u6B63\u5728\u522A\u9664%1$s...",deletingNote:"%1$s\u3092\u522A\u9664\u4E2D...",deletingTask:"\u7E73\u4EA4\u76D2\u300C%1$s\u300D\u522A\u9664\u4E2D...",didInsertFile:"\u5DF2\u5C07\u6A94\u6848\u52A0\u5165\u7B46\u8A18!",didInsertMaterials:"\u5DF2\u5C07\u8CC7\u6599\u52A0\u5165\u7B46\u8A18!",didInsertPhoto:"\u5DF2\u5C07\u7167\u7247\u52A0\u5165\u7B46\u8A18!",didInsertVideo:"\u5DF2\u5C07\u5F71\u7247\u52A0\u5165\u7B46\u8A18!",didJoinGroup:"\u5DF2\u53C3\u52A0%1$s\uFF01",didSaveToMaterialsStorage:"\u5DF2\u5132\u5B58\u65BC\u8CC7\u6599\u76D2!",didSendBackDocument:"\u5DF2\u56DE\u8986!",didCompleteSendBack:"\u5DF2\u5B8C\u6210\u6240\u6709\u56DE\u8986!",didSendCards:"\u8CC7\u6599\u5DF2\u50B3\u9001!",didSubmitCards:"\u5DF2\u8CC7\u6599\u63D0\u51FA!",displayByStudent:"\u986F\u793A\u7D66\u6BCF\u4E00\u4F4D\u5B78\u751F",documentCopyDenied:"\u6C92\u6709\u8907\u88FD\u6A94\u6848\u6216\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",documentMoveDenied:"\u6C92\u6709\u79FB\u52D5\u6A94\u6848\u6216\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",duplicatedSubjectError:"\u8A72\u8AB2\u7A0B\u540D\u7A31\u5DF2\u7D93\u88AB\u767B\u8A18\u65BC\u73ED\u7D1A\u4E4B\u4E0B\uFF0C\u6545\u7121\u6CD5\u5EFA\u7ACB",duplicatedUserGroup:"\u73ED\u7D1A\u540D\u7A31\u5DF2\u7D93\u88AB\u4F7F\u7528",itemNameInvalid:"%1$s\u4E4B\u540D\u7A31\u4E0D\u6B63\u78BA",itemNotFound:"\u7121\u6CD5\u627E\u5230%1$s",itemRenameDenied:"\u6C92\u6709%1$s\u4E4B\u64CD\u4F5C\u6B0A\u9650",drawingDefaultFileName:"\u7E6A\u5716",duplicateNoteNameSuffix:"\u526F\u672C",edit:"\u7DE8\u8F2F",end:"\u7D50\u675F",endAnswerSharing:"\u7D50\u675F\u5206\u4EAB\u7B54\u6848",endPresentationLine1:"\u767C\u8868",endPresentationLine2:"\u7D50\u675F",endScreenShareReceiving:"\u505C\u6B62\u63A5\u6536\u767C\u5E03\u756B\u9762",endSharingLine1:"\u767C\u5E03\u756B\u9762",endSharingLine2:"\u505C\u6B62",enterDocumentName:"\u8ACB\u8F38\u5165\u6559\u6750\u540D\u7A31",enterFileName:"\u8F38\u5165\u6A94\u6848\u540D\u7A31",enterFolderName:"\u8F38\u5165\u8CC7\u6599\u593E\u540D\u7A31",enterGroupCode:"\u8ACB\u8F38\u5165\u53C3\u52A0\u4EE3\u78BC",enterNewGroupName:"\u8ACB\u8F38\u5165\u65B0\u7684\u73ED\u7D1A\u540D\u7A31",enterTaskName:"\u8ACB\u8F38\u5165\u7E73\u4EA4\u5167\u5BB9",userGroupNamePlaceholder:"(\u4F8B)1\u5E741\u73ED",errorOccurred:"\u767C\u751F\u932F\u8AA4",expand:"\u653E\u5927",expiry:"\u622A\u6B62",expiryDialogTitle:"\u622A\u6B62\u65E5\u671F\u8207\u6642\u9593",exportCard:"\u8F49\u51FA",pdfFile:"PDF\u6A94\u6848",file:"\u6A94\u6848",fileOrFolderDeletionDenied:"\u6C92\u6709\u522A\u9664\u6A94\u6848\u6216\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",fileOrFolderInvalid:"\u6A94\u6848\u6216\u8CC7\u6599\u593E\u6709\u554F\u984C",fileUpdatedAtDateTimeFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",focusOnTheTeacher:"\u5148\u505C\u6B62\u624B\u908A\u5DE5\u4F5C\uFF0C\u62AC\u982D\u770B\u8001\u5E2B",forgotPasswordLinkText:"\u4E0D\u77E5\u9053\u5BC6\u78BC\u6642",forgotPasswordPageUrl:"https://scrapbox.io/hkloilomanual/%E5%BF%98%E8%A8%98%E7%99%BB%E5%85%A5ID%E3%80%81%E5%AF%86%E7%A2%BC",folder:"\u8CC7\u6599\u593E",folderCreationDenied:"\u7121\u5EFA\u7ACB\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",folderLocationNotFound:"\u7121\u6CD5\u627E\u5230\u539F\u59CB\u8CC7\u6599\u593E",folderNotFound:"\u7121\u6CD5\u627E\u5230\u8CC7\u6599\u593E",generalCameraPrepError:"\u7167\u76F8\u529F\u80FD\u5C1A\u672A\u5B8C\u5099",cameraMicPermissionDeniedErrorMsg:"\u5141\u8A31\u4F7F\u7528\u7167\u76F8\u6A5F\u4EE5\u53CA\u9EA5\u514B\u98A8",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",getHelp:"\u53C3\u95B1\u8AAA\u660E",goBackToDesktop:"\u56DE\u5230\u7B46\u8A18",goBackToNoteList:"\u56DE\u5230\u7B46\u8A18\u4E00\u89BD\u8868",groupAlreadyDeleted:"\u6B64\u73ED\u7D1A\u5DF2\u7D93\u88AB\u522A\u9664",groupCode:"\u53C3\u52A0\u4EE3\u78BC",groupDeletionDenied:"\u7121\u522A\u9664\u6B64\u73ED\u7D1A\u4E4B\u64CD\u4F5C\u6B0A\u9650",groupDoesntExist:"\u6B64\u73ED\u7D1A\u4E0D\u5B58\u5728",groupJoinInstructions:"\u5404\u4F4D\u540C\u5B78\uFF0C\u8ACB\u8F38\u5165\u6B64\u53C3\u52A0\u4EE3\u78BC",groupName:"\u73ED\u7D1A\u540D\u7A31",groupNoLongerExists:"\u73ED\u7D1A\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u522A\u9664",groupUnavailable:"\u76EE\u524D\u7121\u6CD5\u4F7F\u7528\u6B64\u73ED\u7D1A",hasExpired:"\u5DF2\u622A\u6B62",helpWebCardExtensionUrl:"https://scrapbox.io/hkloilomanual/LoiLo_Web%E5%8D%A1%E6%93%B4%E5%85%85%E5%8A%9F%E8%83%BD",hoursRemaining:"\u5269\u9918%d\u6642\u9593",hourTimeUnit:"\u6642\u9593",inputCannotContainSpacesWarning:"\u6A19\u984C\u4E0D\u5F97\u5305\u542B\u7A7A\u683C",inputTooLongWarning:"\u8F38\u5165\u5B57\u6578\u4E0D\u5F97\u8D85\u904E%1$d\u5B57",insertCardFromDocument:"\u5C07\u6B64\u8CC7\u6599\u5361\u52A0\u5165\u7B46\u8A18",insertingFile:"\u5C07\u6A94\u6848\u52A0\u5165\u7B46\u8A18...",insertingMaterials:"\u5C07\u8CC7\u6599\u52A0\u5165\u7B46\u8A18...",insertingPhoto:"\u5C07\u7167\u7247\u52A0\u5165\u7B46\u8A18...",insertingVideo:"\u5C07\u5F71\u7247\u52A0\u5165\u7B46\u8A18...",inThisCard:"\u5361\u7247\u5167",invalidDocumentCopyDetails:"\u6A94\u6848\u3001\u8CC7\u6599\u593E\u3001\u6216\u662F\u8907\u88FD\u4F4D\u7F6E\u4E0D\u6B63\u78BA",invalidDocumentMoveDetails:"\u6A94\u6848\u3001\u8CC7\u6599\u593E\u3001\u6216\u662F\u79FB\u52D5\u4F4D\u7F6E\u4E0D\u6B63\u78BA",invalidDocumentName:"\u6A94\u6848\u540D\u7A31\u4E0D\u6B63\u78BA",invalidFolderName:"\u8CC7\u6599\u593E\u540D\u7A31\u4E0D\u6B63\u78BA",invalidGroupCode:"\u73ED\u7D1A\u53C3\u52A0\u4EE3\u78BC\u6709\u8AA4",invalidOpenUrl:"URL\u542B\u6709\u7121\u52B9\u4E4B\u6587\u5B57\uFF0C\u7121\u6CD5\u958B\u555F\u6B64Web\u5361\u3002",invalidRequest:"\u932F\u8AA4\u4E4B\u8ACB\u6C42",invalidUrlHelp:"\u8ACB\u8F38\u5165\u4EE5https://\u6216\u662Fhttp://\u70BA\u958B\u982D\u4E4B\u6B63\u78BAURL",invertMouseWheel:"\u53CD\u8F49\u6ED1\u9F20\u6EFE\u8F2A\u65B9\u5411",joinCourseBtnLabel:"\u8F38\u5165\u73ED\u7D1A\u53C3\u52A0\u4EE3\u78BC",joiningGroup:"\u52A0\u5165\u73ED\u7D1A\u4E2D...",joiningSubject:"\u5DF2\u52A0\u5165%1$s...",learnAboutThinkingTools:"\u8A8D\u8B58\u601D\u7DAD\u5DE5\u5177",learnMore:"\u8A73\u8ACB\u8ACB\u53C3\u95B1\u6B64\u8655",loadingFile:"\u6A94\u6848\u8B80\u53D6\u4E2D...",lockingScreens:"\u64CD\u4F5C\u9396\u5B9A\u4E2D...",lockingStudentSharing:"\u5B78\u751F\u9593\u901A\u8A0A\u9396\u5B9A\u4E2D...",logout:"\u767B\u51FA",logoutOption:"\u767B\u51FA",mapDefaultFileName:"\u5730\u5716",material:"\u8CC7\u6599",materialsStorage:"\u8CC7\u6599\u76D2",membersJoinedCount:"\u53C3\u52A0\u4EBA\u6578",micPermissionDeniedErrorMsg:"\u5141\u8A31\u4F7F\u7528\u9EA5\u514B\u98A8",minRemaining:"\u5269\u9918%1$s\u5206",minuteTimeUnit:"\u5206",mouseWheelSensitivity:"\u6ED1\u9F20\u654F\u611F\u5EA6",move:"\u79FB\u52D5",moveToThisFolder:"\u79FB\u81F3\u9019\u500B\u8CC7\u6599\u593E",movingDocument:"\u6A94\u6848\u79FB\u52D5\u4E2D...",nameOrder:"\u540D\u7A31\u6392\u5E8F",newNoteDefaultNameFmt:"%1$d\u5E74%2$d\u6708%3$d\u4E4B\u7B46\u8A18",noExpiry:"\u7121\u6307\u5B9A",noJoinedCourseTitle2:"\u7121\u8AB2\u7A0B",noMicFoundErrorMsg:"\u7121\u6CD5\u627E\u5230\u53EF\u4EE5\u4F7F\u7528\u4E4B\u9EA5\u514B\u98A8",noNotesFound:"\u5148\u5EFA\u7ACB\u65B0\u7B46\u8A18\u5427!",noOpenTasks:"\u6C92\u6709\u6B63\u5728\u6536\u96C6\u7684\u7E73\u4EA4\u76D2",notAttending:"\u6C92\u6709\u52A0\u5165\u8AB2\u5802",note:"\u7B46\u8A18",noteChangedFromOtherDevice:"\u5176\u4ED6\u8F09\u5177\u4E0A\u4E4B\u7B46\u8A18\u5DF2\u7D93\u8B8A\u66F4\uFF0C\u5C07\u518D\u6B21\u8B80\u53D6",noteConflictDialogTitle:"\u7B46\u8A18\u767C\u751F\u885D\u7A81\u72C0\u6CC1",noteFetchErrorOccurred:"\u53D6\u5F97\u7B46\u8A18\u6642\u767C\u751F\u932F\u8AA4",noteListTitle:"\u7B46\u8A18\u4E00\u89BD\u8868",nowSharingIndicator:"\u6B63\u5728\u50B3\u9001\u7D66%1$s %2$s",okay:"OK",deadlineDate:"\u622A\u6B62\u6642\u9593",openForSubmissions:"\u6536\u96C6\u4E2D",openingNote:"\u958B\u555F\u7B46\u8A18",openTaskCount:"\u3001\u5176\u4ED6%1$d\u500B",openWebPage:"\u958B\u5553\u7DB2\u9801",others:"\u3001\u5176\u4ED6%1$d",otherTeachersCourseNotFound:"\u627E\u4E0D\u5230\u5176\u4ED6\u8001\u5E2B\u4E4B\u8AB2\u7A0B",otherTeachersCoursesTitle:"\u5176\u4ED6\u8001\u5E2B\u4E4B\u8AB2\u7A0B",overwritingNote:"\u7B46\u8A18\u8986\u84CB\u5F8C\u5132\u5B58...",paste:"\u8CBC\u4E0A",pasteImage:"\u8CBC\u4E0A\u5716\u7247",pasteText:"\u8CBC\u4E0A\u6587\u672C",pasteWeb:"\u8CBC\u4E0AWeb",nothingToPaste:"\u6C92\u6709\u4EC0\u9EBC\u53EF\u7C98\u8CBC\u7684",pasteCopiedUrl:"\u5728\u6B64\u8CBC\u4E0A\u8907\u88FD\u4E4BURL",pdfDefaultFileName:"PDF",pendingFileAndThumbUploadCount:"%1$d\u4E4B\u6A94\u6848\u8207%2$d\u4E4B\u7E2E\u5716\u6B63\u5728\u4E0A\u50B3...",pendingFileUploadCount:"%1$d\u4E4B\u6A94\u6848\u6B63\u5728\u4E0A\u50B3...",pendingThumbUploadCount:"%1$d\u4E4B\u7E2E\u5716\u6B63\u5728\u4E0A\u50B3...",photo:"\u7167\u7247",photoDefaultFileName:"\u7167\u7247",pleaseEnterFolderName:"\u8ACB\u8F38\u5165\u8CC7\u6599\u593E\u540D\u7A31",preferences:"\u74B0\u5883\u8A2D\u5B9A",preparingScreenSharing:"\u6B63\u5728\u6E96\u5099\u767C\u5E03\u756B\u9762...",preparingStudentPresentation:"\u6B63\u5728\u6E96\u5099\u5B78\u751F\u767C\u8868...",endedCoursesTitle:"\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B",endedCoursesDesc:"\u203B\u53BB\u5E74\u4E4B\u8AB2\u7A0B\u5DF2\u5217\u5165\u300C\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B\u300D",print:"\u5217\u5370",prioritizeThisVersionDesc:"\u6368\u68C4\u5176\u4ED6\u8F09\u5177\u4E0A\u4E4B\u8B8A\u66F4\uFF0C\u5C07\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\u5167\u5BB9\u8986\u84CB\u904E\u53BB",prioritizeThisVersionTitle:"\u4EE5\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\u70BA\u512A\u5148",release:"\u89E3\u9664",releaseAll:"\u5168\u90E8\u89E3\u9664",reload:"\u518D\u6B21\u8B80\u53D6",rename:"\u8B8A\u66F4\u540D\u7A31",renamingItem:"%1$s\u4E4B\u540D\u7A31\u8B8A\u66F4\u4E2D...",renameNoteDialogMsg:"\u8B8A\u66F4\u7B46\u8A18\u540D\u7A31",requestPresentationLine1:"\u5B78\u751F",requestPresentationLine2:"\u767C\u8868",resetCamera:"\u91CD\u7F6E\u7167\u76F8\u6A5F",resetLayout:"\u56DE\u5FA9\u521D\u671F\u8A2D\u5B9A",resolve:"\u89E3\u6C7A",retake:"\u91CD\u65B0\u62CD\u651D",rotate:"\u8FF4\u8F49",saveNoteUnderOtherNameDesc:"\u76EE\u524D\u4E4B\u7B46\u8A18\u5DF2\u88AB\u5176\u4ED6\u8F09\u5177\u4E4B\u8B8A\u66F4\u8986\u84CB\uFF0C\u5728\u6B64\u8F09\u5177\u4E0A\u4E4B\u8B8A\u66F4\u5167\u5BB9\u5C07\u4EE5\u65B0\u7B46\u8A18\u5F62\u5F0F\u5132\u5B58",saveNoteUnderOtherNameTitle:"\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\u5C07\u4EE5\u5176\u4ED6\u540D\u7A31\u5132\u5B58",saveToThisFolder:"\u5132\u5B58\u65BC\u6B64\u8CC7\u6599\u593E",saving:"\u6B63\u5728\u5132\u5B58...",savingNoteWithOtherName:"\u7B46\u8A18\u5C07\u4EE5\u5176\u4ED6\u540D\u7A31\u5132\u5B58...",schoolLoiloTVUrl:"https://school.loilo.tv/tw/web.html",screenLock:"\u756B\u9762\u9396\u5B9A",screensAreLocked:"\u64CD\u4F5C\u9396\u5B9A\u4E2D",screenSharingErrorOccurred:"\u767C\u5E03\u756B\u9762\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",screenSharingTimedOutErrorMsg:"%1$d: \u767C\u5E03\u6578\u64DA\u4E4B\u53D6\u5F97\u903E\u6642\u7121\u6CD5\u57F7\u884C",search:"\u6AA2\u7D22",secondTimeUnit:"\u79D2",secRemaining:"\u5269\u9918%1$s\u79D2",seeNextError:"\u67E5\u770B\u4E0B\u500B\u932F\u8AA4",select:"\u9078\u64C7",selectAll:"\u9078\u64C7\u5168\u90E8",selfStudy:"\u81EA\u4E3B\u5B78\u7FD2",send:"\u50B3\u9001",sendBack:"\u56DE\u8986",sendBackAll:"\u4E00\u6B21\u56DE\u8986",sendBackErrorOccurred:"\u56DE\u8986\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",sendBackIncomplete:"%1$d\u4E2D%2$d\u500B\u56DE\u8986\u5C1A\u672A\u8655\u7406\u5B8C\u7562",sendingBackDocument:"\u56DE\u8986\u4E2D...",sendingThumbnails:"\u4EE5\u7E2E\u5716\u65B9\u5F0F\u50B3\u9001",sendToDialogTitle:"\u9078\u64C7\u5361\u7247\u50B3\u9001\u4E4B\u5C0D\u8C61",sendToIndividuals:"\u500B\u4EBA",sendToMultiple:"\u9001\u51FA\uFF08%1$d\u4EBA\uFF09",sentBackBy:"\u7531%1$s\u4E4B\u56DE\u8986",serviceStatus:"\u670D\u52D9\u72C0\u6CC1",sessionExpiredMsg:"\u5DF2\u8D85\u904E\u6709\u6548\u671F\u9650\u3002\u8981\u7E7C\u7E8C\u4F7F\u7528\u8ACB\u518D\u6B21\u8B80\u53D6",sessionExpiredTitle:"\u8ACB\u518D\u6B21\u8B80\u53D6",badCsrfTokenTitle:"CSRF\u8A8D\u8B49\u6709\u554F\u984C",badCsrfTokenMsg:"\u8DE8\u7DB2\u7AD9\u507D\u9020\u8981\u6C42(CSRF)\u4E4B\u8A8D\u8B49\u6709\u554F\u984C\uFF0C\u8ACB\u91CD\u65B0\u767B\u5165",sharedBy:"%1$s\u91CB\u51FA\u5171\u4EAB",shareScreen:"\u767C\u5E03\u756B\u9762",sharing:"\u767C\u5E03\u4E2D",sharingAnswers:"\u5206\u4EAB\u7B54\u6848\u4E2D",shrink:"\u7E2E\u5C0F",startAnswerSharing:"\u5206\u4EAB\u7B54\u6848",startComparing:"\u958B\u59CB\u6BD4\u8F03",startSharingLine1:"\u756B\u9762",startSharingLine2:"\u767C\u5E03",status403AccessDenied:"\u7121\u5B58\u53D6\u6B0A\u9650",statusFetchErrorOccurred:"\u8CC7\u6599\u53D6\u5F97\u4E2D\u9014\u767C\u751F\u932F\u8AA4",stoppingScreenSharing:"\u505C\u6B62\u767C\u5E03\u756B\u9762...",stoppingStudentPresentation:"\u7D50\u675F\u5B78\u751F\u767C\u8868...",stopScreenSharing:"\u505C\u6B62\u767C\u5E03",student:"\u5B78\u751F",enterClassCodeToJoinClass:"\u2193 \u8ACB\u8F38\u5165\u6559\u5E2B\u6240\u63D0\u793A\u4E4B\u73ED\u7D1A\u53C3\u52A0\u4EE3\u78BC",studentSharing:"\u5B78\u751F\u9593\u901A\u8A0A",subjectNameInputPlaceholder:"\u8ACB\u8F38\u5165\u8AB2\u7A0B\u540D\u7A31...",subjectOrTaskDoesntExist:"\u8AB2\u7A0B\u6216\u7E73\u4EA4\u76D2\u4E0D\u5B58\u5728",subjectTitle:"\u8AB2\u7A0B",requestContainsInvalidID:"\u8AB2\u7A0BID\u6216\u7E73\u4EA4\u76D2\u4E4BID\u4E0D\u6B63\u78BA",submissionName:"%1$s\u4E4B\u56DE\u7B54",submissions:"\u7E73\u4EA4\u8CC7\u6599",submit:"\u7E73\u4EA4",submitOrder:"\u7E73\u4EA4\u9806\u5E8F",submitted:"\u5DF2\u63D0\u51FA",submittedBy:"%1$s\u4E4B\u7E73\u4EA4",submittingDocument:"\u7E73\u4EA4\u4E2D",support:"\u652F\u63F4",taskExpiryFmt:"yyyy\u5E74m\u6708d\u65E5",taskListTitle:"\u7E73\u4EA4\u76D2",taskNameDefaultPrefix:"\u7E73\u4EA4\u8CC7\u6599",teacher:"\u8001\u5E2B",teacherLockedScreens:"\u64CD\u4F5C\u9396\u5B9A",teacherNoJoinedCourseTitle1:"\u9084\u6C92\u6709\u4F60\u8CA0\u8CAC\u7684\u8AB2\u7A0B",text:"\u6587\u5B57",textButtonIconClass:"textButtonIconZhHant",textCardMenuBtnImgPath:"/svg/text_tc_60x60_margin_less.svg",textDefaultFileName:"\u6559\u6750",thinkingTool:"\u601D\u7DAD\u5DE5\u5177",thisGroupHasNoSubjects:"\u6B64\u73ED\u7D1A\u7121\u4EFB\u4F55\u8AB2\u7A0B",thisIsAnEmptyFolder:"\u7A7A\u8CC7\u6599\u593E",trackpadPinchZoomSensitivity:"\u89F8\u63A7\u756B\u9762\u7E2E\u653E\u8ABF\u7BC0\u9748\u654F\u5EA6",timelineDateFmtPrevYear:"%d\u5E74%d\u6708%d\u65E5",timelineDateFmtThisYear:"%d\u6708%d\u65E5 %02d:%02d",timelineDateFmtToday:"%02d:%02d",timeLabel:"\u6642\u9593",timelineTitle:"\u6642\u9593\u8EF8",ttAnalysis:"\u6D41\u7A0B\u5206\u6790\u5716",ttButterfly:"\u8774\u8776\u5716",ttCandy:"\u7CD6\u679C\u5716",ttCircles:"\u540C\u5FC3\u5713\u5716",ttDataChart:"\u6578\u64DA\u5716",ttDiamond:"\u947D\u77F3\u5716",ttFishbone:"\u9B5A\u9AA8\u5716",ttJellyfish:"\u6C34\u6BCD\u5716",ttOneAxis:"\u5EA7\u6A19\u6A6B\u8EF8\u5716",ttPlotLeft:"\u60C5\u7BC0\u69CB\u6210\u5716(\u5DE6)",ttPlotRight:"\u60C5\u7BC0\u69CB\u6210\u5716(\u53F3)",ttPMI:"PMI/KWL\u5716",ttPyramid:"\u91D1\u5B57\u5854\u5716",ttRake:"\u91D8\u8019\u5716",ttSheet:"\u7A7A\u767D\u5E95\u5716",ttTwoAxes:"\u5EA7\u6A19\u8EF8\u5716",ttVenn2:"\u97CB\u6069\u5716",ttVenn3:"\u97CB\u6069\u4E09\u5713\u5716",ttWChart:"W\u5716",ttWebbing:"\u4E2D\u5FC3\u5713\u5716",ttXChart:"X\u5716",ttYChart:"Y\u5716",uncaughtErrorOccurred:"\u767C\u751F\u7121\u9810\u671F\u4E4B\u932F\u8AA4\uFF0CApp\u5DF2\u505C\u6B62\u52D5\u4F5C\u3002\u8ACB\u5C07\u8A73\u7D30\u4E4B\u932F\u8AA4\u5167\u5BB9\u56DE\u5831\u7D66\u5BA2\u670D\u4EBA\u54E1\uFF0C\u6216\u662F\u91CD\u65B0\u5553\u52D5\u61C9\u7528\u7A0B\u5F0F\u3002",viewErrorDetail:"\u8A73\u7D30\u5167\u5BB9",unexpectedErrorOccurred:"\u767C\u751F\u7121\u9810\u671F\u4E4B\u932F\u8AA4",unknownApiErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u4F3A\u670D\u5668\u767C\u751F\u7121\u9810\u671F\u4E4B\u932F\u8AA4",unknownError:"\u4E0D\u660E\u539F\u56E0\u932F\u8AA4",unknownUser:"\u672A\u77E5\u4E4B\u4F7F\u7528\u8005",unlockingScreens:"\u89E3\u9664\u64CD\u4F5C\u9396\u5B9A...",unlockingStudentSharing:"\u89E3\u9664\u5B78\u751F\u9593\u901A\u8A0A\u9396\u5B9A...",unnamedNote:"\u672A\u547D\u540D\u4E4B\u7B46\u8A18",unsaved:"\u672A\u5132\u5B58",unsupportedContentType:"\u6B64\u985E\u6A94\u6848\u7121\u6CD5\u65B0\u589E\u7B46\u8A18",unsupportedFileErrorMsg:"\u4E0D\u5C0D\u61C9\u6B64\u6A94\u6848\u3002\u6A94\u6848\u683C\u5F0F: \u300C%1$s\u300D\u3001\u526F\u6A94\u540D: \u300C%2$s\u300D",unsupportedFileErrorWithoutOptMsg:"\u4E0D\u5C0D\u61C9\u6B64\u6A94\u6848",unsupportedNoteFeatErrorMsg:"%1$s\u5305\u542B\u65B0\u529F\u80FD\u3002\u6B64\u7B46\u8A18\u53EF\u80FD\u4EE5\u958B\u767C\u4E2D\u4E4BApp\u6240\u88FD\u4F5C\u3002\uFF08\u7248\u672C: %2$s, \u529F\u80FD\u4EE3\u78BC: %3$s\uFF09",unsupportedNoteVerErrorMsg:"\u4E0D\u652F\u63F4%1$s\u4E4B\u683C\u5F0F\u3002\u6B64%1$s\u53EF\u80FD\u4EE5\u65B0\u7248\u672CApp\u4F86\u88FD\u4F5C\u6545\u7121\u6CD5\u958B\u555F\u3002\uFF08\u7248\u672C: %2$s\uFF09",update:"\u66F4\u65B0",updateCard:"\u66F4\u65B0\u5361\u7247",updateOrder:"\u66F4\u65B0\u9806\u5E8F",updatingSubmission:"\u6B63\u5728\u66F4\u65B0\u7E73\u4EA4\u8CC7\u6599",uploadingAsset:"\u6B63\u5728\u4E0A\u50B3\u8CC7\u6599...",uploadingDocument:"\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6...",use:"\u4F7F\u7528",useAll:"\u4F7F\u7528\u5168\u90E8",useFormally:"\u4F7F\u7528",version:"\u7248\u672C",verticalWritingBtnLabel:"\u76F4",video:"\u651D\u5F71\u6A5F",videoDefaultFileName:"\u5F71\u7247",volume:"\u97F3\u91CF",web:"\u7DB2\u9801",webCardExtensionLeadingText:`\u4F7F\u7528\u700F\u89BD\u5668\u64F4\u5145\u529F\u80FD
\u53EF\u4EE5\u8F15\u9B06\u5730\u88FD\u4F5C Web\u5361`,webPageSharedText:"\u5DF2\u5206\u4EAB\u7DB2\u9801",webPageSharedTextBy:"%1$s \u5DF2\u5C07\u7DB2\u9801\u5206\u4EAB",quiz:"\u554F\u7B54",quizPresetTest:"\u6E2C\u9A57",quizPresetSurvey:"\u554F\u5377",author:"\u51FA\u984C\u8005",questionCount:"\u554F\u984C\u6578 %1$d",result:"\u7D50\u679C",answer:"\u56DE\u7B54",confirmAnswers:"\u78BA\u8A8D\u56DE\u7B54",answerTestTogether:"\u5168\u9AD4\u56DE\u7B54",answerQuestionnaireTogether:"\u5168\u9AD4\u56DE\u7B54",creatingTestCard:"\u6B63\u5728\u88FD\u4F5C\u6E2C\u9A57\u5361",createdTestCard:"\u6E2C\u9A57\u5361\u88FD\u4F5C\u5B8C\u6210",failedCreateTestCard:"\u7121\u6CD5\u88FD\u4F5C\u6E2C\u9A57\u5361",failedGoogleLoginHelpText:"",failedGoogleLoginHelpLink:"",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u6B63\u5728\u6E96\u5099\u6E2C\u9A57\u554F\u984C",preparingQuestionnaire:"\u6B63\u5728\u6E96\u5099\u554F\u5377\u5167\u5BB9",webDefaultFileName:"\u7DB2\u9801\u641C\u5C0B",didBackupUnsavedChanges:"\u5DF2\u5132\u5B58\u5148\u524D\u8B8A\u66F4\u5099\u4EFD\u3002\u76EE\u524D\u5DF2\u5099\u4EFD\u4E4B\u7B46\u8A18\u6709%1$d\u500B\u3002",willDeleteGroupFromSubject:"\u7531%1$s\u522A\u9664%2$s...",year:"%1$d\u5E74",yourTurnToPresent:"\u8F2A\u5230\u4F60\u767C\u8868!",zoomTitle:"\u653E\u5927\u30FB\u7E2E\u5C0F",languageSettingTitle:"\u8A00\u8A9E\u8A2D\u5B9A",english:"\u82F1\u8A9E",japanese:"\u65E5\u6587",japaneseHira:"\u65E5\u6587\uFF08Hiragana\uFF09",traditionalChinese:"\u7E41\u9AD4\u4E2D\u6587",simplifiedChinese:"\u7C21\u9AD4\u4E2D\u6587",drawn:"\u7E6A\u5716",annotation:"\u6279\u6539",couldntSave:"\u7121\u6CD5\u4FDD\u5B58%1$s",annotationThumbnail:"\u5DF2\u6279\u6539\u8CC7\u6599\u4E4B\u7E2E\u5716",documentThumbnail:"\u6587\u6A94\u7E2E\u5716",couldntGetCoursesAttributes:"\u7121\u6CD5\u53D6\u5F97\u8AB2\u7A0B\u8CC7\u8A0A",inButtonIconClass:"inButtonIconZhHant",outButtonIconClass:"outButtonIconZhHant",thinkingToolHelpPageUrl:"https://n.loilo.tv/tw/thinkingtool",couldntGetSubmissions:"\u7121\u6CD5\u53D6\u5F97\u7E73\u4EA4\u8CC7\u6599",tasksFeatureIsUnavailable:"%1$d\u4EBA\u4EE5\u4E0A\u4E4B\u8AB2\u7A0B\u7121\u6CD5\u4F7F\u7528\u7E73\u4EA4\u76D2",regularWtFontName:"loilo-NotoSansCJKtc-Regular",boldWtFontName:"loilo-NotoSansCJKtc-Black",uiFontName:"Noto Sans TC",couldntGetSubmissionMessage:"\u7121\u6CD5\u53D6\u5F97\u7E73\u4EA4\u8CC7\u6599\u4E4B\u7E73\u4EA4\u72C0\u6CC1",appName:"LoiLoNote School",loiloNote:"LoiLoNote",sharedNote:"\u5171\u4EAB\u4E4B\u7B46\u8A18",submissionBox:"\u7E73\u4EA4\u76D2",error:"\u932F\u8AA4",timeline:"\u6642\u9593\u8EF8",status400Msg:"\u8981\u6C42\u683C\u5F0F\u932F\u8AA4\u3002\u4E00\u822C\u4E0D\u6703\u767C\u751F\u6B64\u932F\u8AA4\uFF0C\u53EF\u80FD\u7531\u65BC\u767C\u751F\u6545\u969C\u6240\u9020\u6210\u3002",status403Msg:"\u6C92\u6709\u8ACB\u6C42\u8CC7\u6E90\u4E4B\u6B0A\u9650",status404Msg:"\u627E\u4E0D\u5230\u6240\u8981\u6C42\u4E4B\u8CC7\u6E90",status500Msg:"\u4F3A\u670D\u5668\u767C\u751F\u932F\u8AA4\u3002\u7CFB\u7D71\u53EF\u80FD\u6703\u767C\u751F\u5168\u9762\u6027\u4E4B\u969C\u7919",defaultErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u767C\u751F\u9810\u671F\u5916\u4E4B\u932F\u8AA4",goToTopPage:"\u8FD4\u56DE\u9996\u9801",viewStatusPage:"\u78BA\u8A8D\u4F3A\u670D\u5668\u670D\u52D9\u72C0\u6CC1",login:"\u767B\u5165",masterUserLoginUnsupported:"\u6B64\u5E33\u865F\u7121\u6CD5\u4F7F\u7528\u65BC\u7C21\u6613\u767B\u5165",invalidCredentials:"\u5B78\u6821ID\u3001\u4F7F\u7528\u8005ID\u3001\u5BC6\u78BC\u4E4B\u7D44\u5408\u4E0D\u6B63\u78BA",invalidIPAddress:"\u5B58\u53D6\u9EDE\u4E4BIP\u4F4D\u7F6E\u53D7\u5230\u9650\u5236\u3002\u8ACB\u5411\u5B78\u6821\u7BA1\u7406\u8005\u78BA\u8A8D\u3002",accountLocked:"\u5E33\u865F\u5DF2\u88AB\u9396\u5B9A\u3002\u8ACB\u6D3D\u5B78\u6821\u7BA1\u7406\u4EBA\u54E1\u3002",forbiddenIsAdmin:"\u7BA1\u7406\u8005\u5E33\u865F\u7121\u6CD5\u4F7F\u7528\u65BC\u8EDF\u9AD4\u767B\u5165\u3002",forbiddenIsSSOUser:"\u8207Google\u5E33\u6236\u9023\u52D5\u4E4B\u7528\u6236\u7121\u6CD5\u767B\u5165\u3002",couldntLogIn:"\u7121\u6CD5\u767B\u5165",endpoint:"\u5B58\u53D6\u9EDE",schoolIDLabel:"\u5B78\u6821",schoolIDPlaceholder:"\u5B78\u6821\u5E33\u865F",schoolIDTitle:"\u8ACB\u8F38\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6578\u5B57\u3001- (\u9023\u5B57\u865F)\u3001_ (\u5E95\u7DDA)",userIDLabel:"\u4F7F\u7528\u8005",userIDPlaceholder:"\u4F7F\u7528\u8005\u5E33\u865F",userIDTitle:"\u8ACB\u8F38\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6578\u5B57\u6216\u7B26\u865F",passwordPlaceholder:"\u5BC6\u78BC",passwordTitle:"\u8ACB\u8F38\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6578\u5B57\u6216\u7B26\u865F",trialAccountLinkText:"\u7531\u6B64\u7533\u8FA6\u514D\u8CBB\u5E33\u865F",adminSignInLinkText:"\u7BA1\u7406\u8005\u767B\u5165",recommendUpdateTitle:"\u5EFA\u8B70\u66F4\u65B0\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668",recommendUpdateMsg:"\u6B64App\u4E4B\u67D0\u4E9B\u529F\u80FD\u53EF\u80FD\u7121\u6CD5\u6B63\u5E38\u904B\u4F5C",loginContinueBtnText:"\u7E7C\u7E8C\u4F7F\u7528",recommendNativeAppTitle:"\u5EFA\u8B70\u4F7F\u7528iOS App",recommendNativeAppMsg:"\u60A8\u6240\u4F7F\u7528\u7684\u700F\u89BD\u5668\u9650\u5236\u4E86\u9019\u500BApp\u6240\u63D0\u4F9B\u7684\u4E00\u4E9B\u529F\u80FD\u3002\u70BA\u4E86\u5F97\u5230\u6700\u4F73\u4F7F\u7528\u6548\u679C\uFF0C\u5EFA\u8B70\u4F7F\u7528\u6211\u5011\u5728iOS\u5546\u5E97\u4E2D\u63D0\u4F9B\u4E4BApp\u3002",unsupportedBrowserTitle:"\u4E0D\u652F\u63F4\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668",unsupportedBrowserMsg:"\u8ACB\u4F7F\u7528\u6700\u65B0\u7248\u4E4BChrome\u700F\u89BD\u5668",unknownBrowser:"\u672A\u77E5\u4E4B\u700F\u89BD\u5668",yourBrowser:"\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668",supportedVersionsLabel:"\u652F\u63F4\u4E4B\u700F\u89BD\u5668\u7248\u672C",otherIOSBrowsers:"\u5176\u4ED6iOS\u700F\u89BD\u5668\uFF1AiOS 13\u4EE5\u4E0A",localeCode:"zh-Hant",signUpPageUrl:`${iu}/users/sign_up?lang=tw`,iosAppStorePageUrl:"https://apps.apple.com/tw/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_en.svg",chromeDownloadPageUrl:"https://www.google.com/intl/zh-TW/chrome/",needBrowserUpdateMsg:"\u8ACB\u5C07\u60A8\u7684\u700F\u89BD\u5668\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C",installBrowser:"\u4E0B\u8F09\u700F\u89BD\u5668\u6700\u65B0\u7248\u672C",getApp:"\u7531\u5546\u5E97\u53D6\u5F97App",appStatusPageUrl:"https://status.loilonote.app/zh-Hant",couldntEncodeDrawnData:"\u7121\u6CD5\u5B8C\u6210\u624B\u5BEB\u6578\u64DA\u7DE8\u78BC",accessNotPermitted:"\u6C92\u6709\u5B58\u53D6\u6B0A\u9650",giveClipboardAccess:"\u5982\u6B32\u4F7F\u7528\u526A\u8CBC\u529F\u80FD\uFF0C\u5FC5\u9808\u958B\u555F\u526A\u8CBC\u7C3F\u5B58\u53D6\u6B0A\u9650\u3002",couldntLoadFontFileMsg:"\u7121\u6CD5\u8B80\u53D6\u6240\u9700\u4E4B\u5B57\u578B",noMemoryErrorTitle:"\u8A18\u61B6\u9AD4\u4E0D\u8DB3",noMemoryErrorMsg:"\u7531\u65BC\u8A18\u61B6\u9AD4\u4E0D\u8DB3\u7121\u6CD5\u5B8C\u6210\u8655\u7406\u3002\u8ACB\u91CD\u65B0\u958B\u555F\u61C9\u7528\u7A0B\u5F0F\u3002",couldntChangeTool:"\u7121\u6CD5\u5207\u63DB\u601D\u7DAD\u5DE5\u5177\u5716",couldntFetchData:"\u7121\u6CD5\u53D6\u5F97\u6578\u64DA\u8CC7\u6599",couldntSetupPdfWorker:"\u7121\u6CD5\u88FD\u4F5CPDF worker",couldntDeleteAsOtherInCharge:`\u9019\u500B\u8AB2\u7A0B\u5DF2\u6709\u5176\u4ED6\u8001\u5E2B\u4F7F\u7528\uFF0C\u6545\u7121\u6CD5\u522A\u9664\u3002
\u60A8\u8981\u89E3\u9664\u672C\u8AB2\u7A0B\u7684\u8CA0\u8CAC\u4EBA\u8EAB\u4EFD\u55CE\uFF1F`,relatedSubjectsMsg:"\u203B\u82E5\u60A8\u8981\u89E3\u9664\u6B64\u8AB2\u7A0B\u8CA0\u8CAC\u4EBA\u8EAB\u4EFD\uFF0C\u4E0B\u5217\u5171\u7528\u8CC7\u6599\u76D2\u7684\u8AB2\u7A0B\u8CA0\u8CAC\u4EBA\u4E5F\u6703\u4E00\u4F75\u89E3\u9664",stopBeginInCharge:"\u89E3\u9664\u8CA0\u8CAC\u4EBA\u8EAB\u4EFD",fileTooBigTitle:"\u6A94\u6848\u904E\u65BC\u9F90\u5927",fileTooBigMessage:"\u7121\u6CD5\u4E0A\u50B31GB\u4EE5\u4E0A\u4E4B\u6A94\u6848",exceedVideoQuality:`\u542B\u6709\u8F03\u5927\u4E4B\u5F71\u7247\u6A94\u6848\uFF0C\u767C\u5E03\u756B\u9762\u6642\u6050\u6703\u6709\u64AD\u653E\u4E0D\u9806\u66A2\u4E4B\u60C5\u6CC1\u3002
\u662F\u5426\u7E7C\u7E8C\u4E0A\u50B3?`,confirmDeleteTarget:"\u662F\u5426\u522A\u9664\u300C%1$s\u300D\uFF1F",signInWithXXX:"\u4EE5%1$s\u767B\u5165",confirmDisplayAnswers:"\u8981\u986F\u793A\u7B54\u6848\u55CE\uFF1F",submissionListDateShortFmt:"m\u6708d\u65E5 HH:MM",submissionListDateFullFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",couldntExportCard:"\u5361\u7247\u8F49\u5B58\u5931\u6557",pdf:"PDF",exportingCardAsPdf:"\u5361\u7247\u6B63\u5728\u8F49\u5B58\u6210PDF\u6A94...",open:"\u958B\u5553",cache:"\u5FEB\u53D6",submittersAnswer:"%1$s\u7684\u7B54\u6848",previousSomeonesAnswer:"\u4E0A\u4E00\u4F4D\u7684\u7B54\u6848",nextSomeonesAnswer:"\u4E0B\u4E00\u4F4D\u7684\u7B54\u6848",newerDataExistsOnServer:"\u4F3A\u670D\u5668\u6709\u65B0\u7248\u672C\u8CC7\u6599\u5B58\u5728",qrCodePreviewDialogTitle:"\u5DF2\u8B80\u53D6QR Code",createWebCard:"\u88FD\u4F5CWeb\u5361",createTextCard:"\u88FD\u4F5C\u6587\u5B57\u5361",qrCodeScannerPrepError:"QR Code\u8B80\u53D6\u529F\u80FD\u5C1A\u672A\u5C31\u7DD2",textCardPlaceholderImgPath:"/svg/text_tc_100x75_margin.svg",qrModeGuidance:"\u8ACB\u5C07QR Code\u7F6E\u4E2D\u65BC\u6383\u7784\u7BC4\u570D\u5185",selectAnswers:"\u8ACB\u9078\u64C7\u56DE\u7B54",selectAnswersCompare:"\u8ACB\u9078\u64C7\u8981\u6BD4\u8F03\u7684\u7B54\u6848",selectNoteForAddingMaterials:"\u8981\u5C07\u8CC7\u6599\u6DFB\u52A0\u81F3\u54EA\u4E00\u4EFD\u7B46\u8A18\uFF1F",videoRecordingTimeLimitReached:"\u9304\u5F71\u6642\u9593\u5DF2\u9054\u4E0A\u9650\uFF0C\u5C07\u505C\u6B62\u9304\u5F71\u3002",creatingAttendanceCard:"\u6B63\u5728\u88FD\u4F5C\u51FA\u7F3A\u52E4\u5361",createdAttendanceCard:"\u51FA\u7F3A\u52E4\u5361\u88FD\u4F5C\u5B8C\u6210",failedCreateAttendanceCard:"\u7121\u6CD5\u88FD\u4F5C\u51FA\u7F3A\u52E4\u5361",attendance:"\u51FA\u7F3A\u52E4\u5361",attendanceReport:"\u51FA\u7F3A\u52E4\u806F\u7D61",attendanceCardCreator:"\u7DE8\u8005",preparingAttendance:"\u6B63\u5728\u6E96\u5099\u51FA\u7F3A\u52E4\u806F\u7D61",clickHereForHelp:"\u4F7F\u7528\u65B9\u6CD5\u8ACB\u53C3\u95B1\u6B64\u8655",helpPageLinkForQuizCardTest:"https://scrapbox.io/hkloilots/%E6%B8%AC%E9%A9%97%E5%8D%A1",helpPageLinkForQuizCardSurvey:"https://scrapbox.io/hkloilots/%E5%95%8F%E5%8D%B7%E5%8D%A1",helpPageLinkForAttendanceCardTeacher:"https://scrapbox.io/hkloilots/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",helpPageLinkForAttendanceCardStudent:"https://scrapbox.io/hkloilots/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",loginPageTitle:"\u767B\u5165LoiLoNote School",loginPageDesc:"\u6B61\u8FCE\u4F86\u5230LoiLoNote School\uFF0C\u8B93\u6211\u5011\u52A0\u5165\u6709\u8DA3\u7684\u8AB2\u7A0B\u5427!",penType:"\u7B46\u7684\u7A2E\u985E",penColor:"\u7B46\u7684\u984F\u8272",highlighterColor:"\u87A2\u5149\u7B46\u984F\u8272",clearAll:"\u5168\u90E8\u6E05\u9664",penThickness:"\u7DDA\u689D\u7C97\u7D30",eraserSize:"\u6A61\u76AE\u64E6\u6E05\u9664\u7BC4\u570D\u5927\u5C0F",myFolder:"\u6211\u7684\u8CC7\u6599\u593E",schoolWideFolder:"\u6821\u5167",districtShared:"%1$s\u5171\u7528",schoolShared:"\u6821\u5167\u5171\u7528",classShared:"\u6B64\u8AB2\u7A0B\u5171\u7528",teachersOnlyFolder:"\u50C5\u9650\u8001\u5E2B",classFolder:"%1$s \u5C02\u7528",sortCreateDateOrder:"\u88FD\u4F5C\u65E5\u671F\u9806\u5E8F",sortUpdateDateOrder:"\u66F4\u65B0\u65E5\u671F\u9806\u5E8F",materialNameOrder:"\u540D\u7A31\u9806\u5E8F",materialFileUpdateDateFolderNameOrder:"\u6A94\u6848\u593E\u540D\u7A31\u9806\u5E8F",pushTokenRegistration:"\u767B\u9304\u901A\u77E5\u901A\u8B49",registered:"\u5DF2\u767B\u9304",unregistered:"\u672A\u767B\u9304",citationNotePrefix:"\u5F15\u7528",markAllAsRead:"\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80",confirmMarkAllSubmitsAsRead:"\u5C07\u6700\u65B0\u7684\u7E73\u4EA4\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80\u3002\u662F\u5426\u57F7\u884C\uFF1F",markedAllSubmitsAsRead:"\u6700\u65B0\u7684\u7E73\u4EA4\u5DF2\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80",confirmMarkAllRevealAnswersAsRead:"\u5C07\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80\u3002\u662F\u5426\u57F7\u884C\uFF1F",markedAllRevealAnswersAsRead:"\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80",copied:"\u5DF2\u62F7\u8C9D",failedCreateWebCardFromExtension:"\u958B\u555F\u5305\u542BWeb\u5361\u7684\u7B46\u8A18\u5F8C\uFF0C\u8ACB\u4F7F\u7528\u64F4\u5145\u529F\u80FD\u4F86\u88FD\u4F5C\u5361\u7247\u3002",failedCreateWebCardFromExtensionTitle:"\u8ACB\u958B\u555F\u7B46\u8A18",enableSharedNote:"\u958B\u555F\u7B46\u8A18\u5171\u4EAB\u529F\u80FD",selectSchool:"\u8ACB\u9078\u64C7\u8981\u767B\u5165\u4E4B\u5B78\u6821",showAnnotation:"\u986F\u793A\u4FEE\u6B63\u8655",hideAnnotation:"\u4E0D\u986F\u793A\u4FEE\u6B63\u8655",submissionDeadlineFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM \u622A\u6B62",submissionBoxDeletedOrNotExisted:"\u7E73\u4EA4\u76D2\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u522A\u9664",getToWork:"\u99AC\u4E0A\u524D\u5F80\u8A2D\u5B9A\uFF01",chooseNoteToWorkIn:"\u8981\u4F7F\u7528\u54EA\u4E00\u4EFD\u7B46\u8A18\u4F86\u8A2D\u5B9A\u4E3B\u984C\uFF1F",newTaskCreated:"\u6709\u65B0\u589E\u4E4B\u7E73\u4EA4\u8CC7\u6599",standardNote:"\u500B\u4EBA\u7B46\u8A18",xIsDeleted:"\u5C07\u522A\u9664 %1$s",couldntFetchSharedNoteMembers:"\u7121\u6CD5\u53D6\u5F97\u6210\u54E1",manageSharedNoteMember:"\u6210\u54E1\u4E4B\u7BA1\u7406",chooseNoteToManageMember:"\u8ACB\u9078\u64C7\u7BA1\u7406\u7B46\u8A18\u4E4B\u6210\u54E1",chooseNoteToExport:"\u8ACB\u9078\u64C7\u532F\u51FA\u4E4B\u7B46\u8A18",chooseNoteToImport:"\u8ACB\u9078\u64C7\u532F\u5165\u4E4B\u7B46\u8A18",couldntAddMember:"\u7121\u6CD5\u8FFD\u52A0\u6210\u54E1",removedFromSharedNoteMembers:"\u5DF2\u89E3\u9664\u5171\u6709\u7B46\u8A18\u6210\u54E1\u8EAB\u5206",couldntGetDeviceInfo:"\u7121\u6CD5\u53D6\u5F97\u8A2D\u5099\u8CC7\u8A0A",changePassword:"\u66F4\u65B0\u5BC6\u78BC",submitPassword:"\u66F4\u65B0",currentPasswordIncorrect:"\u76EE\u524D\u4E4B\u5BC6\u78BC\u4E0D\u6B63\u78BA",currentPassword:"\u76EE\u524D\u4E4B\u5BC6\u78BC",newPassword:"\u65B0\u5BC6\u78BC",newPasswordConfirm:"\u65B0\u5BC6\u78BC\uFF08\u78BA\u8A8D\uFF09",couldntChangePassword:"\u7121\u6CD5\u66F4\u65B0\u5BC6\u78BC",passwordUpdated:"\u5BC6\u78BC\u5DF2\u66F4\u65B0",ipAddressRestricted:"\u7121\u7DDA\u5B58\u53D6\u9EDEIP\u5730\u5740\u53D7\u5230\u9650\u5236",hiUser:"%1$s\u60A8\u597D",setNewPassword:"\u8ACB\u8A2D\u5B9A\u4E0B\u6B21\u767B\u5165\u6642\u4F7F\u7528\u7684\u65B0\u5BC6\u78BC",welcomeToLns:"\u6B61\u8FCE\u4F86\u5230LoiLoNote School",connectionStatus:"\u9023\u7DDA\u72C0\u6CC1",connectedToPushServer:"\u5DF2\u9023\u63A5\u901A\u77E5\u4F3A\u670D\u5668",couldntConnectToPushServer:"\u672A\u9023\u63A5\u901A\u77E5\u4F3A\u670D\u5668\uFF0C\u90E8\u5206\u529F\u80FD\u7121\u6CD5\u4F7F\u7528",reconnectingToPushServer:"\u8207\u901A\u77E5\u4F3A\u670D\u5668\u91CD\u65B0\u9023\u63A5\u4E2D...",pleaseConnectToInternet:"\u8ACB\u9023\u63A5\u7DB2\u8DEF",pleaseConnectToInternetDesc:"\u76EE\u524D\u70BA\u96E2\u7DDA\u72C0\u614B\u3002\u8ACB\u78BA\u8A8D\u7DB2\u8DEF\u9023\u7DDA\u3002",default:"\u9810\u8A2D",confirmCloseNoteForOtherSubmissionBox:`\u6B63\u524D\u5F80\u5176\u4ED6\u8AB2\u7A0B\u4E4B\u7E73\u4EA4\u76D2\u3002
\u5C07\u95DC\u9589\u76EE\u524D\u7B46\u8A18\uFF0C\u662F\u5426\u57F7\u884C?`,confirmCloseNoteForOtherTimeline:`\u6B63\u524D\u5F80\u5176\u4ED6\u8AB2\u7A0B\u4E4B\u6642\u9593\u8EF8\u3002
\u5C07\u95DC\u9589\u76EE\u524D\u7B46\u8A18\uFF0C\u662F\u5426\u57F7\u884C?`,selectItemsToExport:"\u8ACB\u9078\u64C7\u532F\u51FA\u4E4B\u6A94\u6848",retry:"\u518D\u6B21\u57F7\u884C",exceedNumberOfExportableItemsMsg:"\u53EF\u532F\u51FA\u4E4B\u6A94\u6848\u30FB\u6587\u4EF6\u593E\u6578\u91CF\u8D85\u904E\u4E0A\u9650\u505C\u6B62\u532F\u51FA",exceedNumberOfExportableHierarchyMsg:"\u53EF\u532F\u51FA\u4E4B\u6A94\u6848\u30FB\u6587\u4EF6\u593E\u968E\u5C64\u8D85\u904E\u4E0A\u9650\u505C\u6B62\u532F\u51FA",analyzingDocument:"\u6B63\u5728\u8B80\u53D6\u6A94\u6848",exportingDocument:"\u6B63\u5728\u532F\u51FA\u6A94\u6848",couldntExportDocument:"\u7121\u6CD5\u532F\u51FA\u6A94\u6848",import:"\u532F\u5165",imported:"\u5DF2\u532F\u5165",export:"\u532F\u51FA",underMaintenace:"\u76EE\u524D\u6B63\u5728\u9032\u884C\u7DAD\u8B77",maintenanceNotification:"\u4F3A\u670D\u5668\u7DAD\u8B77\u901A\u77E5",maintenanceScheduled:"\u5DF2\u9810\u5B9A\u8981\u57F7\u884C\u7DAD\u8B77",seeDetail:"\u8A73\u60C5\u8ACB\u53C3\u95B1\u6B64\u8655",endSchedule:"\u7D50\u675F\u9810\u5B9A\u6642\u9593",watchTutorial:"\u89C0\u770B\u793A\u7BC4\u5F71\u7247",closeTutorialTitle:"\u662F\u5426\u7D50\u675F\u793A\u7BC4\u5F71\u7247\uFF1F",closeTutorialMsg:"\u6B64\u5F71\u7247\u53EF\u96A8\u6642\u89C0\u770B",closeTutorialCheckLabel:"\u4EE5\u5F8C\u4E0D\u518D\u986F\u793A",understood:"\u77E5\u9053\u4E86",failedPlayTutorial:"\u7121\u6CD5\u64AD\u653E\u793A\u7BC4\u5F71\u7247",importingNotes:"\u6B63\u5728\u532F\u5165\u7B46\u8A18...",exportingNotes:"\u6B63\u5728\u532F\u51FA\u7B46\u8A18...",accessIsNotAllowed:"\u7981\u6B62\u5F9E\u9019\u500BIP\u4F4D\u5740\u5B58\u53D6",insufficientPermissionToJoin:"\u6C92\u6709\u53C3\u52A0\u6B0A\u9650",classHasEnded:"\u6B64\u73ED\u7D1A\u5DF2\u95DC\u9589",onlyStudentsAllowedToJoin:"\u9664\u5B78\u751F\u5916\u7121\u6CD5\u53C3\u52A0",graduatesNotAllowedToJoinClass:"\u7121\u6CD5\u53C3\u52A0\u5DF2\u7562\u696D\u6821\u4E4B\u73ED\u7D1A",ssoLogin422Msg:"\u5B78\u6821\u5167\u6709\u76F8\u540C\u4E4B%1$s\u5E33\u865F\u91CD\u8907\u767B\u9304\uFF61 \u9664\u4E86\u60F3\u4F7F\u7528\u65BC\u767B\u5165\u4E4B\u5E33\u865F\u5916, \u8ACB\u89E3\u9664\u5E33\u865F\u4E4B\u91CD\u8907\u7D81\u5B9A\uFF61",ssoLogin422Url:"https://scrapbox.io/hkloilomanual/%E4%BB%A5SSO%E7%99%BB%E5%85%A5%E6%99%82%E6%89%80%E5%87%BA%E7%8F%BE%E9%87%8D%E8%A4%87%E7%99%BB%E9%8C%B2%E4%B9%8B%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AF",ssoLogin404Msg:"\u6B64%1$s\u5E33\u865F\u5C1A\u672A\u767B\u9304\u81F3LoiLoNote\u30FBSchool\u6545\u7121\u6CD5\u4F7F\u7528\u3002\u8ACB\u6D3D\u8A62\u7BA1\u7406\u8005\u3002",importNotes:"\u532F\u5165%1$d\u500B\u7B46\u8A18",createCourseAfterUserGroupCreation:"\u8ACB\u7E7C\u7E8C\u5EFA\u7ACB\u8AB2\u7A0B",createCourseAfterUserGroupCreationDesc:"\u5C07\u5EFA\u7ACB\u73ED\u7D1A\u6240\u9700\u4E4B\u570B\u8A9E.\u6578\u5B78.\u82F1\u6587\u7B49\u8AB2\u7A0B",insufficientPermission:"\u7121\u57F7\u884C\u6B0A\u9650",accessDenied:"\u7121\u5B58\u53D6\u6B0A\u9650",actionCannotBeCarriedOutOnClosedCourse:"\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B\u7121\u6CD5\u4F7F\u7528",couldNotGetSubmissionAnswers:"\u7121\u6CD5\u958B\u555F\u7E73\u4EA4\u76D2\u6AA2\u8996\u5167\u5BB9",folderWithThisNameAlreadyExists:"\u5DF2\u6709\u76F8\u540C\u540D\u7A31\u7684\u6587\u4EF6\u593E\u5B58\u5728",importDocument:"\u6B63\u5728\u532F\u5165\u6A94\u6848",couldntImportDocument:"\u7121\u6CD5\u532F\u5165\u6A94\u6848",folderForImportedItemsWillBeCreated:"\u88FD\u4F5C\u532F\u51FA\u8655\u6A94\u6848",searchExampleLessonPlans:"\u67E5\u95B1\u6559\u5B78\u6848\u4F8B",searchExampleLessonPlansPageUrl:"https://help.loilonote.app/--602630326cb271001c1f19d7",save:"\u4FDD\u5B58",administrator:"\u7BA1\u7406\u8005",reuse:"\u518D\u6B21\u4F7F\u7528",reuseThisTestCard:"\u518D\u6B21\u4F7F\u7528\u9019\u5F35\u6E2C\u9A57\u5361",reuseThisAttendanceCard:"\u518D\u6B21\u4F7F\u7528\u9019\u5F35\u51FA\u7F3A\u52E4\u5361",pleaseWaitForMaintenanceEnd:"\u8ACB\u7A0D\u5F85\u7247\u523B\u76F4\u5230\u7DAD\u8B77\u5DE5\u4F5C\u7D50\u675F",uploadingXXX:"\u6B63\u5728\u4E0A\u50B3%1$s...",upload:"\u4E0A\u50B3",experimentalFeatures:"Experimental Features",folderCannotBeUploaded:"\u7121\u6CD5\u4E0A\u50B3\u6587\u4EF6\u593E",filesNoExtCannotBeUploaded:"\u7121\u6CD5\u4E0A\u50B3\u7121\u526F\u6A94\u540D\u4E4B\u6A94\u6848",fileWithInvalidNameContained:"\u542B\u6709\u540D\u7A31\u7121\u6548\u4E4B\u6587\u4EF6",insufficientPermissionToDocumentGroup:"\u4E0D\u5177\u5BEB\u5165\u6587\u4EF6\u593E\u4E4B\u6B0A\u9650",convertToSharedNote:"\u5C07\u5171\u4EAB\u7B46\u8A18",chooseNoteToShare:"\u8ACB\u9078\u64C7\u8981\u5171\u4EAB\u7684\u7B46\u8A18",chooseUsersToBeShared:"\u8ACB\u9078\u64C7\u5171\u4EAB\u7B46\u8A18\u7684\u6210\u54E1",shareXXX:" \u5171\u4EAB%1$s",confirmShareNote:"\u8A2D\u5B9A\u70BA\u5171\u4EAB\u4E4B\u7B46\u8A18\u7121\u6CD5\u518D\u56DE\u5FA9\u5230\u4E00\u822C\u7B46\u8A18\u3002\u7121\u6CD5\u5C0D\u61C9\u5171\u4EAB\u7B46\u8A18\u7684\u61C9\u7528\u8EDF\u9AD4\u5C07\u4E0D\u6703\u986F\u793A\u5728\u4E00\u89BD\u8868\u4E2D\uFF0C\u662F\u5426\u63A5\u53D7? ",teacherNoClosedCourseTitle:"\u4F60\u4E0D\u8CA0\u8CAC\u4EFB\u4F55\u904E\u53BB\u7684\u79D1\u76EE",studentNoClosedCourseTitle:"\u4F60\u6C92\u6709\u52A0\u5165\u4EFB\u4F55\u904E\u53BB\u7684\u79D1\u76EE",pasteTips:"\u8CBC\u4E0A\u6587\u672C\u6216\u662F\u7531\u7DB2\u8DEF\u8907\u88FD\u904E\u4F86\u7684\u5716\u7247",noMembersInGroup:"\u73ED\u7D1A\u672A\u6709\u5B78\u751F\u52A0\u5165",showCodeToInviteStudents:"\u516C\u5E03\u8AB2\u7A0B\u53C3\u52A0\u4EE3\u78BC\uFF0C\u8ACB\u5B78\u751F\u8F38\u5165",members:"\u4EBA",saved:"Saved"};var g7={start:"\u5F00\u59CB",status404ItemNotFound:"\u9879\u76EE\u4E0D\u5B58\u5728",aboutThisApp:"\u5173\u4E8E\u8FD9\u4E2AApp",addCardDialogTitle:"\u65B0\u589E\u5361\u7247",addCourseDialogJoinCourseBtnLabel:"\u65B0\u589E",addCourseLabel:"\u65B0\u589E\u8BFE\u7A0B",addCourseDesc:"\u8BF7\u201C\u65B0\u589E\u8BFE\u7A0B\u201D",adminPage:"\u7BA1\u7406\u9875\u9762",allMembers:"\u6240\u6709\u4EBA",alreadyJoinedGroup:"\u5DF2\u53C2\u52A0",andOtherMembers:"\u5176\u4ED6%1$d",anonymous:"\u4E0D\u8BB0\u540D",answersNotVisibleWarnMsg:"\u8001\u5E08\u672B\u5F00\u542F\u5171\u4EAB\u529F\u80FD\uFF0C\u76EE\u524D\u65E0\u6CD5\u53C2\u9605\u5176\u4ED6\u4EBA\u7684\u56DE\u7B54",answersNotVisibleWarnTitle:"\u672A\u5206\u4EAB\u4E4B\u56DE\u7B54",api202ErrorMsg:"202:\u5305\u542B %1$s\u4E4B\u6863\u6848\u672A\u5B8C\u6210\u4E0A\u4F20\u5904\u7406\u3002\u7A0D\u5F85\u7247\u523B\u540E\u5373\u53EF\u8BFB\u53D6\u3002",api403ErrorMsg:"\u6CA1\u6709%1$s\u4E4B\u9605\u89C8\u6743\u9650\u3002\u8BE6\u7EC6\u60C5\u5F62\u8BF7\u6D3D\u6821\u65B9\u7BA1\u7406\u4EBA\u5458\u3002",api404ErrorMsg:"\u65E0\u6CD5\u627E\u5230\u4F3A\u670D\u5668\u6240\u8981\u6C42\u4E4B%1$s\u3002\u65E0\u6CD5\u5EFA\u7ACB\u6B64%1$s\uFF0C\u5C06\u6709\u53EF\u80FD\u88AB\u5220\u9664\u3002",arrange:"\u6392\u5217",asNextCard:"\u4E0B\u4E00\u5F20\u5361\u7247",attending:"\u4E0A\u8BFE\u4E2D",attendingOtherCourse:"\u53C2\u52A0\u5176\u4ED6\u8BFE\u7A0B",audioDefaultFileName:"\u97F3\u9891",audioRecordBtnLabel:"\u5F55\u97F3",automatic:"\u81EA\u52A8",back:"\u8FD4\u56DE",backToAnswerList:"\u8FD4\u56DE\u56DE\u7B54\u4E00\u89C8\u8868",brokenNoteErrorMsg:"\u50A8\u5B58\u4E8E\u4F3A\u670D\u5668\u4E0A\u4E4B%1$s\u53EF\u80FD\u53D1\u751F\u6BC1\u635F\u3002\u656C\u8BF7\u8054\u7EDC\u672C\u516C\u53F8\u5BA2\u670D\u90E8\u95E8\u5904\u7406\u3002\uFF08\u9519\u8BEF\u4EE3\u7801: %2$d,\u8BFE\u7A0BID: %3$d,\u7B14\u8BB0ID: %4$s\uFF09",browserDoesntSupportAudioRecording:"\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668\u4E0D\u652F\u63F4\u5F55\u97F3\u529F\u80FD",browserDoesntSupportMediaCapture:"\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668\u4E0D\u652F\u63F4\u7167\u76F8\u529F\u80FD",browsingWeb:"Web",camera:"\u7167\u76F8\u673A",cancel:"\u53D6\u6D88",cannotInsertWhileStillLoadingDocument:"\u8D44\u6599\u8BFB\u53D6\u4F5C\u4E1A\u5C1A\u672A\u5B8C\u6210\uFF0C\u65E0\u6CD5\u65B0\u589E\u5361\u7247",cantFindUsableDevice:"\u65E0\u6CD5\u53D6\u5F97\u53EF\u4EE5\u4F7F\u7528\u4E4B\u8F7D\u5177\u8D44\u8BAF",cardHasUnsavedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u6B63\u5728\u4E0A\u4F20\u7684\u6863\u6848",cardHasUploadFailedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u4E0A\u4F20\u5931\u8D25\u7684\u6863\u6848",changeLayout:"\u53D8\u66F4\u7248\u9762",changeLayoutDescription:"\u53EF\u4EE5\u53D8\u66F4\u63D0\u51FA\u8D44\u6599\u7684\u7248\u9762",changeTools:"\u5207\u6362\u601D\u7EF4\u5DE5\u5177",renamingNote:"\u6B63\u5728\u5C06\u201C%1$s\u201D\u4E4B\u540D\u79F0\u53D8\u66F4\u4E3A\u201C%2$s\u201D...",checkAttendance:"\u786E\u8BA4\u53C2\u52A0\u8005",checking:"\u786E\u8BA4\u4E2D...",checkScreenLock:"\u786E\u8BA4\u8367\u5E55\u9501\u5B9A",checkServiceStatus:"\u8BF7\u786E\u8BA4\u4F3A\u670D\u5668\u4E4B\u670D\u52A1\u72B6\u51B5",chooseFileToCopy:"\u8BF7\u9009\u62E9\u8981\u590D\u5236\u4E4B\u6863\u6848",chooseFileToDelete:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u4E4B\u6863\u6848",chooseFileToMove:"\u8BF7\u9009\u62E9\u8981\u79FB\u52A8\u4E4B\u6863\u6848",chooseFileToRename:"\u8BF7\u9009\u62E9\u8981\u53D8\u66F4\u540D\u79F0\u4E4B\u6863\u6848",chooseGroupToAddTo:"\u8BF7\u9009\u62E9\u60A8\u8981\u6388\u8BFE\u4E4B\u73ED\u7EA7",noGroups:"\u672C\u5E74\u5EA6\u5C1A\u672A\u6709\u73ED\u7EA7\u767B\u8BB0",createNewGroupDesc:"\u8BF7\u7531\u2193 \u201C\u5EFA\u7ACB\u65B0\u73ED\u7EA7\u201D",groupDesc:"\u4E00\u7FA4\u540C\u65F6\u4E0A\u8BFE\u4E4B\u5B66\u751F\u79F0\u4E4B\u4E3A\u201C\u73ED\u7EA7\u201D",chooseGroupToDelete:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u4E4B\u73ED\u7EA7",chooseNoteToCopy:"\u8BF7\u9009\u62E9\u8981\u590D\u5236\u4E4B\u7B14\u8BB0",chooseNoteToRename:"\u8BF7\u9009\u62E9\u8981\u53D8\u66F4\u540D\u79F0\u4E4B\u7B14\u8BB0",choosingCourse:"\u9009\u8BFE\u4E2D",close:"\u5173\u95ED",closeAfterTen:"10\u5206\u949F\u540E",closeCamera:"\u5173\u95ED\u7167\u76F8\u673A",closedTaskLabel:"\u622A\u6B62",closeNote:"\u5173\u95ED\u7B14\u8BB0",closeNow:"\u7ACB\u523B\u5173\u95ED",closeThisScreen:"\u5173\u95ED\u6B64\u753B\u9762",closeToday:"\u4ECA\u65E5\u5185",compare:"\u8FDB\u884C\u6BD4\u8F83",comparison:"\u6BD4\u8F83",complete:"\u5B8C\u6210",confirmAnswerShare:"\u5206\u4EAB\u5B66\u751F\u7B54\u6848\u3002\u662F\u5426\u6267\u884C?",confirmAudioRecordingOverwrite:"\u91CD\u65B0\u5F55\u97F3\u5C06\u8986\u76D6\u539F\u6709\u97F3\u6863\u3002\u662F\u5426\u6267\u884C?",confirmCardDelete:"\u662F\u5426\u5220\u9664\u5361\u7247?",confirmDuplicateAllConnectedCards:"\u590D\u5236\u6240\u6709\u4E32\u8054\u4E4B\u5361\u7247\u3002\u662F\u5426\u786E\u5B9A\uFF1F",confirmCreateSubject:"\u662F\u5426\u5EFA\u7ACB\u201C%1$s\u201D\uFF1F",confirmDelete:"\u662F\u5426\u5220\u9664?",confirmDeleteAudioRecording:"\u5220\u9664\u97F3\u6863\u3002\u662F\u5426\u6267\u884C?",confirmGroupJoin:"\u53C2\u52A0%1$s\u3002\u662F\u5426\u6267\u884C?",confirmLogout:"\u662F\u5426\u767B\u51FA?",confirmMultiChildCardDelete:"\u662F\u5426\u5220\u9664\u5361\u7247\u4E0E%1$d\u4E4B\u5B50\u5361\u7247\uFF1F",confirmMultiCardGroupDelete:"\u662F\u5426\u5220\u9664%1$d\u4E4B\u5361\u7247\u4E0E\u5B50\u5361\u7247\uFF1F",confirmMultiFileDelete:"\u5220\u9664%1$d\u6863\u6848\u3002\u662F\u5426\u6267\u884C\uFF1F",confirmReloadWhileUnsavedChangesExist:"\u7B14\u8BB0\u6709\u672A\u4FDD\u5B58\u4E4B\u53D8\u66F4\u5185\u5BB9\uFF0C\u6267\u884C\u66F4\u65B0\u6709\u53EF\u80FD\u4F1A\u6D88\u5931\uFF0C\u662F\u5426\u7EE7\u7EED\u6267\u884C?",confirmResetVideoCamera:"\u91CD\u65B0\u5F55\u5F71\u3002\u662F\u5426\u6267\u884C?",confirmResubmit:"\u662F\u5426\u518D\u6B21\u7F34\u4EA4\u81F3\u201C%1$s\u201D?",confirmRevealSubmitterNames:"\u5C06\u6392\u5217\u987A\u5E8F\u53D8\u66F4\u4E3A\u201C%1$s\u201D\u3002\u663E\u793A\u6240\u6709\u56DE\u7B54\u8005\u4E4B\u59D3\u540D\uFF0C\u662F\u5426\u6267\u884C\uFF1F",confirmSendBack:"\u662F\u5426\u56DE\u8986?",confirmSendToAll:"\u662F\u5426\u4F20\u9001\u7ED9\u6240\u6709\u4EBA\uFF1F",confirmSendBackAll:"\u662F\u5426\u5C06\u5DF2\u6279\u6539\u4E4B\u4F5C\u4E1A\u56DE\u8986\u7ED9%1$d\uFF1F",confirmSingleFileDelete:"\u5220\u9664\u4E00\u4E2A\u6863\u6848\u3002\u662F\u5426\u6267\u884C?",confirmStartPresentation:"\u8BA9\u5B66\u751F\u5F00\u59CB\u53D1\u8868\u5417?",confirmStartScreenSharing:"\u662F\u5426\u53D1\u5E03\u753B\u9762?",copy:"\u590D\u5236",duplicate:"\u590D\u5236",duplicateAllConnectedCards:"\u590D\u5236\u6240\u6709\u4E32\u8054\u4E4B\u5361\u7247",couldntReuseCard:"\u518D\u6B21\u4F7F\u7528\u5361\u7247\u5931\u8D25",copyingDocument:"\u6B63\u5728\u590D\u5236\u6863\u6848...",copyingNote:"\u6B63\u5728\u590D\u5236\u7B14\u8BB0...",copyOf:"%1$s\u4E4B\u526F\u672C",duplicateThisCard:"\u590D\u5236\u8FD9\u5F20\u5361\u7247",copyToThisFolder:"\u590D\u5236\u5230\u6B64\u8D44\u6599\u5939",corruptFileErrorMsg:"\u6863\u6848\u65E0\u6CD5\u8F7D\u5165\u3002\u8BE5\u6863\u6848\u53EF\u80FD\u53D1\u751F\u6BC1\u635F\u3002",couldntRenameNote:"\u65E0\u6CD5\u53D8\u66F4\u7B14\u8BB0\u540D\u79F0",couldntChangeScreenLock:"\u65E0\u6CD5\u53D8\u66F4\u64CD\u4F5C\u9501\u5B9A",couldntChangeStudentSharingLock:"\u65E0\u6CD5\u53D8\u66F4\u5B66\u751F\u95F4\u901A\u8BAF\u9501\u5B9A",couldntCopyDocument:"\u65E0\u6CD5\u590D\u5236\u6863\u6848",couldntCopyNote:"\u590D\u5236\u7B14\u8BB0\u5931\u8D25",couldntCreateFolder:"\u65E0\u6CD5\u5EFA\u7ACB\u6863\u6848\u5939",couldntCreateGroup:"\u65E0\u6CD5\u5EFA\u7ACB\u73ED\u7EA7",couldntCreateNote:"\u65E0\u6CD5\u5EFA\u7ACB\u7B14\u8BB0",couldntCreateSubject:"\u65E0\u6CD5\u5EFA\u7ACB\u8BFE\u7A0B",couldntCreateTask:"\u65E0\u6CD5\u5EFA\u7ACB\u7F34\u4EA4\u76D2",couldntDeleteArchivedGroup:"\u6B64\u73ED\u7EA7\u5DF2\u8F6C\u5165\u8FC7\u53BB\u7684\u8BFE\u7A0B\uFF0C\u65E0\u6CD5\u5220\u9664",couldntDeleteAsMaterialsExist:"\u6863\u6848\u5DF2\u50A8\u5B58\u4E8E\u6B64\u8BFE\u7A0B\u4E4B\u8D44\u6599\u76D2\u4E2D\uFF0C\u65E0\u6CD5\u5220\u9664",couldntDeleteAsNotesExist:"\u6B64\u8BFE\u7A0B\u542B\u6709\u5DF2\u50A8\u5B58\u4E4B\u7B14\u8BB0\uFF0C\u65E0\u6CD5\u5220\u9664",couldntDeleteAsSubjectsExist:"\u6B64\u73ED\u7EA7\u6709\u5DF2\u767B\u5F55\u4E4B\u8BFE\u7A0B\uFF0C\u65E0\u6CD5\u5220\u9664\u3002",couldntDeleteAsUsersExist:"\u6B64\u73ED\u7EA7\u6709\u5DF2\u767B\u5F55\u4E4B\u4F7F\u7528\u8005\uFF0C\u65E0\u6CD5\u5220\u9664\u3002",couldntDeleteClosedGroup:"\u6B64\u73ED\u7EA7\u5DF2\u5173\u95ED\uFF0C\u65E0\u6CD5\u5220\u9664\u3002",couldntDeleteCourse:"\u65E0\u6CD5\u5220\u9664\u8BFE\u7A0B",couldntDeleteDocument:"\u65E0\u6CD5\u5220\u9664\u6863\u6848",couldntDeleteGroup:"\u65E0\u6CD5\u5220\u9664\u73ED\u7EA7",couldntDeleteNote:"\u5220\u9664\u201C%1$s\u201D\u5931\u8D25",couldntDeleteTask:"\u65E0\u6CD5\u5220\u9664\u7F34\u4EA4\u76D2",describeTask:"\u8BF7\u8F93\u5165\u7F34\u4EA4\u5185\u5BB9",couldntDownloadFileErrorMsg:"%1$d: \u65E0\u6CD5\u7531\u4F3A\u670D\u5668\u4E0B\u8F7D\u6863\u6848\u3002\u8BF7\u91CD\u8BD5\u3002",couldntGet_CheckInternetConnection:"\u65E0\u6CD5\u4F20\u9001\u8BF7\u6C42\u3002\u8BF7\u786E\u8BA4\u7F51\u8DEF\u72B6\u6001\u3002",couldntGetCourses:"\u65E0\u6CD5\u53D6\u5F97\u8BFE\u7A0B",couldntGetNote:"\u65E0\u6CD5\u53D6\u5F97\u7B14\u8BB0",couldntGetOtherTeachersCourses:"\u65E0\u6CD5\u53D6\u5F97\u5176\u4ED6\u6559\u5E08\u4E4B\u8BFE\u7A0B",couldntGetPhotoData:"\u65E0\u6CD5\u53D6\u5F97\u7167\u7247\u6570\u636E\u8D44\u6599",couldntGetPreviousYearsCourses:"\u65E0\u6CD5\u53D6\u5F97\u5E74\u5EA6\u4E00\u89C8\u8868",couldntGetVideoData:"\u65E0\u6CD5\u53D6\u5F97\u5F71\u7247\u6570\u636E\u8D44\u6599",couldntInsertFile:"\u6863\u6848\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntInsertItemTitle:"%1$s\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntInsertPhoto:"\u7167\u7247\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntInsertVideo:"\u5F71\u7247\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntJoinGroup:"\u65E0\u6CD5\u53C2\u52A0\u6B64\u73ED\u7EA7",couldntJoinSubject:"\u65E0\u6CD5\u53C2\u52A0\u8BFE\u7A0B",couldntLoadFileTitle:"\u65E0\u6CD5\u8BFB\u53D6\u6863\u6848",couldntMoveDocument:"\u65E0\u6CD5\u79FB\u52A8\u6863\u6848",couldntOpenItem:"\u65E0\u6CD5\u6253\u5F00%1$s\u7B14\u8BB0\u8D44\u6599",couldntReceiveScreenShare:"\u65E0\u6CD5\u63A5\u6536\u53D1\u5E03\u4E4B\u753B\u9762",couldntRenameItem:"\u65E0\u6CD5\u53D8\u66F4%1$s\u4E4B\u540D\u79F0",couldntSaveNote:"\u65E0\u6CD5\u50A8\u5B58\u7B14\u8BB0",couldntSaveToMaterials:"\u65E0\u6CD5\u50A8\u5B58\u6863\u6848",couldntSendBackDocument:"\u65E0\u6CD5\u56DE\u8986",couldntSendCards:"\u65E0\u6CD5\u4F20\u9001\u8D44\u6599",couldntShareScreen:"\u65E0\u6CD5\u53D1\u5E03\u753B\u9762",couldntStartAudioRecording:"\u65E0\u6CD5\u5F00\u59CB\u5F55\u97F3",couldntSubmitCards:"\u65E0\u6CD5\u7F34\u4EA4",couldntSubmitWhileSubmittingOthers:"\u6B63\u5728\u6536\u96C6\u5176\u4ED6\u7F34\u4EA4\u8D44\u6599\uFF0C\u76EE\u524D\u65E0\u6CD5\u7F34\u4EA4",couldntUpdateSubmission:"\u65E0\u6CD5\u66F4\u65B0\u7F34\u4EA4\u72B6\u6001",couldntUploadDocument:"\u6863\u6848\u65E0\u6CD5\u4E0A\u4F20",couldntUploadNotes:"\u7B14\u8BB0\u65E0\u6CD5\u4E0A\u4F20",courseAccessDenied:"\u5B58\u53D6\u6B64\u8BFE\u7A0B\u4E4B\u6743\u9650\u4E0D\u8DB3",courseDoesntExist:"\u8BE5\u8BFE\u7A0B\u4E0D\u5B58\u5728",courseFetchErrorOccurred:"\u53D6\u5F97\u8BFE\u7A0B\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",groupFetchErrorOccurred:"\u53D6\u5F97\u73ED\u7EA7\u5217\u8868\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",courseJoinedMark:"\u5DF2\u65B0\u589E",courseListTitle:"\u8BFE\u7A0B\u4E00\u89C8",create:"\u5EFA\u7ACB",createCard:"\u5236\u4F5C\u5361\u7247",createdSubjectsListTitle:"\u5DF2\u5EFA\u7ACB\u4E4B\u8BFE\u7A0B",createFolder:"\u5EFA\u7ACB\u8D44\u6599\u5939",createNewGroupBtnLabel:"\u5EFA\u7ACB\u65B0\u73ED\u7EA7",createNewNote:"\u5EFA\u7ACB\u65B0\u7B14\u8BB0",createNewSubjectBtnLabel:"\u5EFA\u7ACB\u65B0\u8BFE\u7A0B",createNewTask:"\u5EFA\u7ACB\u65B0\u7F34\u4EA4\u76D2",creatingFolder:"\u8D44\u6599\u5939\u5EFA\u7ACB\u4E2D...",creatingGroup:"\u73ED\u7EA7\u201C%1$s\u201D\u5EFA\u7ACB\u4E2D...",creatingNote:"\u201C%1$s\u201D\u5EFA\u7ACB\u4E2D...",creatingSubjectForGroup:"\u5C06\u8BFE\u7A0B\u201C%1$s\u201D\u5EFA\u7ACB\u5230\u73ED\u7EA7\u201C%2$s\u201D\uFF0C\u4F5C\u4E1A\u4E2D...",creatingTask:"\u7F34\u4EA4\u76D2\u5EFA\u7ACB\u4E2D...",webCard:"Web\u5361",creatingWebCard:"Web\u5361\u51C6\u5907\u4E2D...",cut:"\u526A\u4E0B",dateLabel:"\u65E5\u671F",daysRemaining:"\u5269\u4F59%d\u65E5",yearTimeUnit:"\u5E74",dayTimeUnit:"\u65E5",deferToOtherDeviceVersionDesc:"\u820D\u5F03\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\uFF0C\u7531\u5176\u4ED6\u8F7D\u5177\u4E4B\u53D8\u66F4\u5185\u5BB9\u8986\u76D6\u8FC7\u6765",deferToOtherDeviceVersionTitle:"\u4F18\u5148\u5904\u7406\u5176\u4ED6\u8F7D\u5177\u4E4B\u53D8\u66F4",delete:"\u5220\u9664",deletingDocument:"\u6B63\u5728\u5220\u9664\u6863\u6848...",deletingGroup:"\u6B63\u5728\u5220\u9664%1$s...",deletingNote:"%1$s\u3092\u5220\u9664\u4E2D...",deletingTask:"\u7F34\u4EA4\u76D2\u201C%1$s\u201D\u5220\u9664\u4E2D...",didInsertFile:"\u5DF2\u5C06\u6863\u6848\u52A0\u5165\u7B14\u8BB0!",didInsertMaterials:"\u5DF2\u5C06\u8D44\u6599\u52A0\u5165\u7B14\u8BB0!",didInsertPhoto:"\u5DF2\u5C06\u7167\u7247\u52A0\u5165\u7B14\u8BB0!",didInsertVideo:"\u5DF2\u5C06\u5F71\u7247\u52A0\u5165\u7B14\u8BB0!",didJoinGroup:"\u5DF2\u53C2\u52A0%1$s\uFF01",didSaveToMaterialsStorage:"\u5DF2\u50A8\u5B58\u4E8E\u8D44\u6599\u76D2!",didSendBackDocument:"\u5DF2\u56DE\u8986!",didCompleteSendBack:"\u5DF2\u5B8C\u6210\u6240\u6709\u56DE\u8986!",didSendCards:"\u8D44\u6599\u5DF2\u4F20\u9001!",didSubmitCards:"\u5DF2\u8D44\u6599\u63D0\u51FA!",displayByStudent:"\u663E\u793A\u7ED9\u6BCF\u4E00\u4F4D\u5B66\u751F",documentCopyDenied:"\u6CA1\u6709\u590D\u5236\u6863\u6848\u6216\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",documentMoveDenied:"\u6CA1\u6709\u79FB\u52A8\u6863\u6848\u6216\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",duplicatedSubjectError:"\u8BE5\u8BFE\u7A0B\u540D\u79F0\u5DF2\u7ECF\u88AB\u767B\u8BB0\u4E8E\u73ED\u7EA7\u4E4B\u4E0B\uFF0C\u6545\u65E0\u6CD5\u5EFA\u7ACB",duplicatedUserGroup:"\u73ED\u7EA7\u540D\u79F0\u5DF2\u7ECF\u88AB\u4F7F\u7528",itemNameInvalid:"%1$s\u4E4B\u540D\u79F0\u4E0D\u6B63\u786E",itemNotFound:"\u65E0\u6CD5\u627E\u5230%1$s",itemRenameDenied:"\u6CA1\u6709%1$s\u4E4B\u64CD\u4F5C\u6743\u9650",drawingDefaultFileName:"\u7ED8\u56FE",duplicateNoteNameSuffix:"\u526F\u672C",edit:"\u7F16\u8F91",end:"\u7ED3\u675F",endAnswerSharing:"\u7ED3\u675F\u5206\u4EAB\u7B54\u6848",endPresentationLine1:"\u53D1\u8868",endPresentationLine2:"\u7ED3\u675F",endScreenShareReceiving:"\u505C\u6B62\u63A5\u6536\u53D1\u5E03\u753B\u9762",endSharingLine1:"\u53D1\u5E03\u753B\u9762",endSharingLine2:"\u505C\u6B62",enterDocumentName:"\u8BF7\u8F93\u5165\u6559\u6750\u540D\u79F0",enterFileName:"\u8F93\u5165\u6863\u6848\u540D\u79F0",enterFolderName:"\u8F93\u5165\u8D44\u6599\u5939\u540D\u79F0",enterGroupCode:"\u8BF7\u8F93\u5165\u53C2\u52A0\u4EE3\u7801",enterNewGroupName:"\u8BF7\u8F93\u5165\u65B0\u7684\u73ED\u7EA7\u540D\u79F0",enterTaskName:"\u8BF7\u8F93\u5165\u7F34\u4EA4\u5185\u5BB9",userGroupNamePlaceholder:"(\u4F8B)1\u5E741\u73ED",errorOccurred:"\u53D1\u751F\u9519\u8BEF",expand:"\u653E\u5927",expiry:"\u622A\u6B62",expiryDialogTitle:"\u622A\u6B62\u65E5\u671F\u4E0E\u65F6\u95F4",exportCard:"\u8F6C\u51FA",pdfFile:"PDF\u6863\u6848",file:"\u6863\u6848",fileOrFolderDeletionDenied:"\u6CA1\u6709\u5220\u9664\u6863\u6848\u6216\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",fileOrFolderInvalid:"\u6863\u6848\u6216\u8D44\u6599\u5939\u6709\u95EE\u9898",fileUpdatedAtDateTimeFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",focusOnTheTeacher:"\u5148\u505C\u6B62\u624B\u8FB9\u5DE5\u4F5C\uFF0C\u62AC\u5934\u770B\u8001\u5E08",forgotPasswordLinkText:"\u4E0D\u77E5\u9053\u5BC6\u7801\u65F6",forgotPasswordPageUrl:"https://scrapbox.io/hkloilomanual/%E5%BF%98%E8%A8%98%E7%99%BB%E5%85%A5ID%E3%80%81%E5%AF%86%E7%A2%BC",folder:"\u8D44\u6599\u5939",folderCreationDenied:"\u65E0\u5EFA\u7ACB\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",folderLocationNotFound:"\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u8D44\u6599\u5939",folderNotFound:"\u65E0\u6CD5\u627E\u5230\u8D44\u6599\u5939",generalCameraPrepError:"\u7167\u76F8\u529F\u80FD\u5C1A\u672A\u5B8C\u5907",cameraMicPermissionDeniedErrorMsg:"\u5141\u8BB8\u4F7F\u7528\u7167\u76F8\u673A\u4EE5\u53CA\u9EA6\u514B\u98CE",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",getHelp:"\u53C2\u9605\u8BF4\u660E",goBackToDesktop:"\u56DE\u5230\u7B14\u8BB0",goBackToNoteList:"\u56DE\u5230\u7B14\u8BB0\u4E00\u89C8\u8868",groupAlreadyDeleted:"\u6B64\u73ED\u7EA7\u5DF2\u7ECF\u88AB\u5220\u9664",groupCode:"\u53C2\u52A0\u4EE3\u7801",groupDeletionDenied:"\u65E0\u5220\u9664\u6B64\u73ED\u7EA7\u4E4B\u64CD\u4F5C\u6743\u9650",groupDoesntExist:"\u6B64\u73ED\u7EA7\u4E0D\u5B58\u5728",groupJoinInstructions:"\u5404\u4F4D\u540C\u5B66\uFF0C\u8BF7\u8F93\u5165\u6B64\u53C2\u52A0\u4EE3\u7801",groupName:"\u73ED\u7EA7\u540D\u79F0",groupNoLongerExists:"\u73ED\u7EA7\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u5220\u9664",groupUnavailable:"\u76EE\u524D\u65E0\u6CD5\u4F7F\u7528\u6B64\u73ED\u7EA7",hasExpired:"\u5DF2\u622A\u6B62",helpWebCardExtensionUrl:"https://scrapbox.io/hkloilomanual/LoiLo_Web%E5%8D%A1%E6%93%B4%E5%85%85%E5%8A%9F%E8%83%BD",hoursRemaining:"\u5269\u4F59%d\u65F6\u95F4",hourTimeUnit:"\u65F6\u95F4",inputCannotContainSpacesWarning:"\u6807\u9898\u4E0D\u5F97\u5305\u542B\u7A7A\u683C",inputTooLongWarning:"\u8F93\u5165\u5B57\u6570\u4E0D\u5F97\u8D85\u8FC7%1$d\u5B57",insertCardFromDocument:"\u5C06\u6B64\u8D44\u6599\u5361\u52A0\u5165\u7B14\u8BB0",insertingFile:"\u5C06\u6863\u6848\u52A0\u5165\u7B14\u8BB0...",insertingMaterials:"\u5C06\u8D44\u6599\u52A0\u5165\u7B14\u8BB0...",insertingPhoto:"\u5C06\u7167\u7247\u52A0\u5165\u7B14\u8BB0...",insertingVideo:"\u5C06\u5F71\u7247\u52A0\u5165\u7B14\u8BB0...",inThisCard:"\u5361\u7247\u5185",invalidDocumentCopyDetails:"\u6863\u6848\u3001\u8D44\u6599\u5939\u3001\u6216\u662F\u590D\u5236\u4F4D\u7F6E\u4E0D\u6B63\u786E",invalidDocumentMoveDetails:"\u6863\u6848\u3001\u8D44\u6599\u5939\u3001\u6216\u662F\u79FB\u52A8\u4F4D\u7F6E\u4E0D\u6B63\u786E",invalidDocumentName:"\u6863\u6848\u540D\u79F0\u4E0D\u6B63\u786E",invalidFolderName:"\u8D44\u6599\u5939\u540D\u79F0\u4E0D\u6B63\u786E",invalidGroupCode:"\u73ED\u7EA7\u53C2\u52A0\u4EE3\u7801\u6709\u8BEF",invalidOpenUrl:"URL\u542B\u6709\u65E0\u52B9\u4E4B\u6587\u5B57\uFF0C\u65E0\u6CD5\u5F00\u542F\u6B64Web\u5361\u3002",invalidRequest:"\u9519\u8BEF\u4E4B\u8BF7\u6C42",invalidUrlHelp:"\u8BF7\u8F93\u5165\u4EE5https://\u6216\u662Fhttp://\u4E3A\u5F00\u5934\u4E4B\u6B63\u786EURL",invertMouseWheel:"\u53CD\u8F6C\u6ED1\u9F20\u6EDA\u8F6E\u65B9\u5411",joinCourseBtnLabel:"\u8F93\u5165\u73ED\u7EA7\u53C2\u52A0\u4EE3\u7801",joiningGroup:"\u52A0\u5165\u73ED\u7EA7\u4E2D...",joiningSubject:"\u5DF2\u52A0\u5165%1$s...",learnAboutThinkingTools:"\u8BA4\u8BC6\u601D\u7EF4\u5DE5\u5177",learnMore:"\u8BE6\u8BF7\u8BF7\u53C2\u9605\u6B64\u5904",loadingFile:"\u6863\u6848\u8BFB\u53D6\u4E2D...",lockingScreens:"\u64CD\u4F5C\u9501\u5B9A\u4E2D...",lockingStudentSharing:"\u5B66\u751F\u95F4\u901A\u8BAF\u9501\u5B9A\u4E2D...",logout:"\u767B\u51FA",logoutOption:"\u767B\u51FA",mapDefaultFileName:"\u5730\u56FE",material:"\u8D44\u6599",materialsStorage:"\u8D44\u6599\u76D2",membersJoinedCount:"\u53C2\u52A0\u4EBA\u6570",micPermissionDeniedErrorMsg:"\u5141\u8BB8\u4F7F\u7528\u9EA6\u514B\u98CE",minRemaining:"\u5269\u4F59%1$s\u5206",minuteTimeUnit:"\u5206",mouseWheelSensitivity:"\u6ED1\u9F20\u654F\u611F\u5EA6",move:"\u79FB\u52A8",moveToThisFolder:"\u79FB\u81F3\u8FD9\u4E2A\u8D44\u6599\u5939",movingDocument:"\u6863\u6848\u79FB\u52A8\u4E2D...",nameOrder:"\u540D\u79F0\u6392\u5E8F",newNoteDefaultNameFmt:"%1$d\u5E74%2$d\u6708%3$d\u4E4B\u7B14\u8BB0",noExpiry:"\u65E0\u6307\u5B9A",noJoinedCourseTitle2:"\u65E0\u8BFE\u7A0B",noMicFoundErrorMsg:"\u65E0\u6CD5\u627E\u5230\u53EF\u4EE5\u4F7F\u7528\u4E4B\u9EA6\u514B\u98CE",noNotesFound:"\u5148\u5EFA\u7ACB\u65B0\u7B14\u8BB0\u5427!",noOpenTasks:"\u6CA1\u6709\u6B63\u5728\u6536\u96C6\u7684\u7F34\u4EA4\u76D2",notAttending:"\u6CA1\u6709\u52A0\u5165\u8BFE\u5802",note:"\u7B14\u8BB0",noteChangedFromOtherDevice:"\u5176\u4ED6\u8F7D\u5177\u4E0A\u4E4B\u7B14\u8BB0\u5DF2\u7ECF\u53D8\u66F4\uFF0C\u5C06\u518D\u6B21\u8BFB\u53D6",noteConflictDialogTitle:"\u7B14\u8BB0\u53D1\u751F\u51B2\u7A81\u72B6\u51B5",noteFetchErrorOccurred:"\u53D6\u5F97\u7B14\u8BB0\u65F6\u53D1\u751F\u9519\u8BEF",noteListTitle:"\u7B14\u8BB0\u4E00\u89C8\u8868",nowSharingIndicator:"\u6B63\u5728\u4F20\u9001\u7ED9%1$s %2$s",okay:"OK",deadlineDate:"\u622A\u6B62\u65F6\u95F4",openForSubmissions:"\u6536\u96C6\u4E2D",openingNote:"\u5F00\u542F\u7B14\u8BB0",openTaskCount:"\u3001\u5176\u4ED6%1$d\u4E2A",openWebPage:"\u5F00\u542F\u7F51\u9875",others:"\u3001\u5176\u4ED6%1$d",otherTeachersCourseNotFound:"\u627E\u4E0D\u5230\u5176\u4ED6\u8001\u5E08\u4E4B\u8BFE\u7A0B",otherTeachersCoursesTitle:"\u5176\u4ED6\u8001\u5E08\u4E4B\u8BFE\u7A0B",overwritingNote:"\u7B14\u8BB0\u8986\u76D6\u540E\u50A8\u5B58...",paste:"\u8D34\u4E0A",pasteImage:"\u8D34\u4E0A\u56FE\u7247",pasteText:"\u8D34\u4E0A\u6587\u672C",pasteWeb:"\u8D34\u4E0AWeb",nothingToPaste:"\u6CA1\u6709\u4EC0\u4E48\u53EF\u7C98\u8D34\u7684",pasteCopiedUrl:"\u5728\u6B64\u8D34\u4E0A\u590D\u5236\u4E4BURL",pdfDefaultFileName:"PDF",pendingFileAndThumbUploadCount:"%1$d\u4E4B\u6863\u6848\u4E0E%2$d\u4E4B\u7F29\u56FE\u6B63\u5728\u4E0A\u4F20...",pendingFileUploadCount:"%1$d\u4E4B\u6863\u6848\u6B63\u5728\u4E0A\u4F20...",pendingThumbUploadCount:"%1$d\u4E4B\u7F29\u56FE\u6B63\u5728\u4E0A\u4F20...",photo:"\u7167\u7247",photoDefaultFileName:"\u7167\u7247",pleaseEnterFolderName:"\u8BF7\u8F93\u5165\u8D44\u6599\u5939\u540D\u79F0",preferences:"\u73AF\u5883\u8BBE\u5B9A",preparingScreenSharing:"\u6B63\u5728\u51C6\u5907\u53D1\u5E03\u753B\u9762...",preparingStudentPresentation:"\u6B63\u5728\u51C6\u5907\u5B66\u751F\u53D1\u8868...",endedCoursesTitle:"\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B",endedCoursesDesc:"\u203B\u53BB\u5E74\u4E4B\u8BFE\u7A0B\u5DF2\u5217\u5165\u201C\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B\u201D",print:"\u5217\u5370",prioritizeThisVersionDesc:"\u820D\u5F03\u5176\u4ED6\u8F7D\u5177\u4E0A\u4E4B\u53D8\u66F4\uFF0C\u5C06\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\u5185\u5BB9\u8986\u76D6\u8FC7\u53BB",prioritizeThisVersionTitle:"\u4EE5\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\u4E3A\u4F18\u5148",release:"\u89E3\u9664",releaseAll:"\u5168\u90E8\u89E3\u9664",reload:"\u518D\u6B21\u8BFB\u53D6",rename:"\u53D8\u66F4\u540D\u79F0",renamingItem:"%1$s\u4E4B\u540D\u79F0\u53D8\u66F4\u4E2D...",renameNoteDialogMsg:"\u53D8\u66F4\u7B14\u8BB0\u540D\u79F0",requestPresentationLine1:"\u5B66\u751F",requestPresentationLine2:"\u53D1\u8868",resetCamera:"\u91CD\u7F6E\u7167\u76F8\u673A",resetLayout:"\u56DE\u590D\u521D\u671F\u8BBE\u5B9A",resolve:"\u89E3\u51B3",retake:"\u91CD\u65B0\u62CD\u6444",rotate:"\u56DE\u8F6C",saveNoteUnderOtherNameDesc:"\u76EE\u524D\u4E4B\u7B14\u8BB0\u5DF2\u88AB\u5176\u4ED6\u8F7D\u5177\u4E4B\u53D8\u66F4\u8986\u76D6\uFF0C\u5728\u6B64\u8F7D\u5177\u4E0A\u4E4B\u53D8\u66F4\u5185\u5BB9\u5C06\u4EE5\u65B0\u7B14\u8BB0\u5F62\u5F0F\u50A8\u5B58",saveNoteUnderOtherNameTitle:"\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\u5C06\u4EE5\u5176\u4ED6\u540D\u79F0\u50A8\u5B58",saveToThisFolder:"\u50A8\u5B58\u4E8E\u6B64\u8D44\u6599\u5939",saving:"\u6B63\u5728\u50A8\u5B58...",savingNoteWithOtherName:"\u7B14\u8BB0\u5C06\u4EE5\u5176\u4ED6\u540D\u79F0\u50A8\u5B58...",schoolLoiloTVUrl:"https://school.loilo.tv/tw/web.html",screenLock:"\u753B\u9762\u9501\u5B9A",screensAreLocked:"\u64CD\u4F5C\u9501\u5B9A\u4E2D",screenSharingErrorOccurred:"\u53D1\u5E03\u753B\u9762\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",screenSharingTimedOutErrorMsg:"%1$d: \u53D1\u5E03\u6570\u636E\u4E4B\u53D6\u5F97\u903E\u65F6\u65E0\u6CD5\u6267\u884C",search:"\u68C0\u7D22",secondTimeUnit:"\u79D2",secRemaining:"\u5269\u4F59%1$s\u79D2",seeNextError:"\u67E5\u770B\u4E0B\u4E2A\u9519\u8BEF",select:"\u9009\u62E9",selectAll:"\u9009\u62E9\u5168\u90E8",selfStudy:"\u81EA\u4E3B\u5B66\u4E60",send:"\u4F20\u9001",sendBack:"\u56DE\u8986",sendBackAll:"\u4E00\u6B21\u56DE\u8986",sendBackErrorOccurred:"\u56DE\u8986\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",sendBackIncomplete:"%1$d\u4E2D%2$d\u4E2A\u56DE\u8986\u5C1A\u672A\u5904\u7406\u5B8C\u6BD5",sendingBackDocument:"\u56DE\u8986\u4E2D...",sendingThumbnails:"\u4EE5\u7F29\u56FE\u65B9\u5F0F\u4F20\u9001",sendToDialogTitle:"\u9009\u62E9\u5361\u7247\u4F20\u9001\u4E4B\u5BF9\u8C61",sendToIndividuals:"\u4E2A\u4EBA",sendToMultiple:"\u9001\u51FA\uFF08%1$d\u4EBA\uFF09",sentBackBy:"\u7531%1$s\u4E4B\u56DE\u8986",serviceStatus:"\u670D\u52A1\u72B6\u51B5",sessionExpiredMsg:"\u5DF2\u8D85\u8FC7\u6709\u6548\u671F\u9650\u3002\u8981\u7EE7\u7EED\u4F7F\u7528\u8BF7\u518D\u6B21\u8BFB\u53D6",sessionExpiredTitle:"\u8BF7\u518D\u6B21\u8BFB\u53D6",badCsrfTokenTitle:"CSRF\u8BA4\u8BC1\u6709\u95EE\u9898",badCsrfTokenMsg:"\u8DE8\u7F51\u7AD9\u4F2A\u9020\u8981\u6C42(CSRF)\u4E4B\u8BA4\u8BC1\u6709\u95EE\u9898\uFF0C\u8BF7\u91CD\u65B0\u767B\u5165",sharedBy:"%1$s\u91CA\u51FA\u5171\u4EAB",shareScreen:"\u53D1\u5E03\u753B\u9762",sharing:"\u53D1\u5E03\u4E2D",sharingAnswers:"\u5206\u4EAB\u7B54\u6848\u4E2D",shrink:"\u7F29\u5C0F",startAnswerSharing:"\u5206\u4EAB\u7B54\u6848",startComparing:"\u5F00\u59CB\u6BD4\u8F83",startSharingLine1:"\u753B\u9762",startSharingLine2:"\u53D1\u5E03",status403AccessDenied:"\u65E0\u5B58\u53D6\u6743\u9650",statusFetchErrorOccurred:"\u8D44\u6599\u53D6\u5F97\u4E2D\u9014\u53D1\u751F\u9519\u8BEF",stoppingScreenSharing:"\u505C\u6B62\u53D1\u5E03\u753B\u9762...",stoppingStudentPresentation:"\u7ED3\u675F\u5B66\u751F\u53D1\u8868...",stopScreenSharing:"\u505C\u6B62\u53D1\u5E03",student:"\u5B66\u751F",enterClassCodeToJoinClass:"\u2193 \u8BF7\u8F93\u5165\u6559\u5E08\u6240\u63D0\u793A\u4E4B\u73ED\u7EA7\u53C2\u52A0\u4EE3\u7801",studentSharing:"\u5B66\u751F\u95F4\u901A\u8BAF",subjectNameInputPlaceholder:"\u8BF7\u8F93\u5165\u8BFE\u7A0B\u540D\u79F0...",subjectOrTaskDoesntExist:"\u8BFE\u7A0B\u6216\u7F34\u4EA4\u76D2\u4E0D\u5B58\u5728",subjectTitle:"\u8BFE\u7A0B",requestContainsInvalidID:"\u8BFE\u7A0BID\u6216\u7F34\u4EA4\u76D2\u4E4BID\u4E0D\u6B63\u786E",submissionName:"%1$s\u4E4B\u56DE\u7B54",submissions:"\u7F34\u4EA4\u8D44\u6599",submit:"\u7F34\u4EA4",submitOrder:"\u7F34\u4EA4\u987A\u5E8F",submitted:"\u5DF2\u63D0\u51FA",submittedBy:"%1$s\u4E4B\u7F34\u4EA4",submittingDocument:"\u7F34\u4EA4\u4E2D",support:"\u652F\u63F4",taskExpiryFmt:"yyyy\u5E74m\u6708d\u65E5",taskListTitle:"\u7F34\u4EA4\u76D2",taskNameDefaultPrefix:"\u7F34\u4EA4\u8D44\u6599",teacher:"\u8001\u5E08",teacherLockedScreens:"\u64CD\u4F5C\u9501\u5B9A",teacherNoJoinedCourseTitle1:"\u8FD8\u6CA1\u6709\u4F60\u8D1F\u8D23\u7684\u8BFE\u7A0B",text:"\u6587\u5B57",textButtonIconClass:"textButtonIconZhHans",textCardMenuBtnImgPath:"/svg/text_sc_60x60_margin_less.svg",textDefaultFileName:"\u6559\u6750",thinkingTool:"\u601D\u7EF4\u5DE5\u5177",thisGroupHasNoSubjects:"\u6B64\u73ED\u7EA7\u65E0\u4EFB\u4F55\u8BFE\u7A0B",thisIsAnEmptyFolder:"\u7A7A\u8D44\u6599\u5939",trackpadPinchZoomSensitivity:"\u89E6\u63A7\u753B\u9762\u7F29\u653E\u8C03\u8282\u7075\u654F\u5EA6",timelineDateFmtPrevYear:"%d\u5E74%d\u6708%d\u65E5",timelineDateFmtThisYear:"%d\u6708%d\u65E5 %02d:%02d",timelineDateFmtToday:"%02d:%02d",timeLabel:"\u65F6\u95F4",timelineTitle:"\u65F6\u95F4\u8F74",ttAnalysis:"\u6D41\u7A0B\u5206\u6790\u56FE",ttButterfly:"\u8774\u8776\u56FE",ttCandy:"\u7CD6\u679C\u56FE",ttCircles:"\u540C\u5FC3\u5706\u56FE",ttDataChart:"\u6570\u636E\u56FE",ttDiamond:"\u94BB\u77F3\u56FE",ttFishbone:"\u9C7C\u9AA8\u56FE",ttJellyfish:"\u6C34\u6BCD\u56FE",ttOneAxis:"\u5EA7\u6807\u6A2A\u8F74\u56FE",ttPlotLeft:"\u60C5\u8282\u6784\u6210\u56FE(\u5DE6)",ttPlotRight:"\u60C5\u8282\u6784\u6210\u56FE(\u53F3)",ttPMI:"PMI/KWL\u56FE",ttPyramid:"\u91D1\u5B57\u5854\u56FE",ttRake:"\u9489\u8019\u56FE",ttSheet:"\u7A7A\u767D\u5E95\u56FE",ttTwoAxes:"\u5EA7\u6807\u8F74\u56FE",ttVenn2:"\u97E6\u6069\u56FE",ttVenn3:"\u97E6\u6069\u4E09\u5706\u56FE",ttWChart:"W\u56FE",ttWebbing:"\u4E2D\u5FC3\u5706\u56FE",ttXChart:"X\u56FE",ttYChart:"Y\u56FE",uncaughtErrorOccurred:"\u53D1\u751F\u65E0\u9884\u671F\u4E4B\u9519\u8BEF\uFF0CApp\u5DF2\u505C\u6B62\u52A8\u4F5C\u3002\u8BF7\u5C06\u8BE6\u7EC6\u4E4B\u9519\u8BEF\u5185\u5BB9\u56DE\u62A5\u7ED9\u5BA2\u670D\u4EBA\u5458\uFF0C\u6216\u662F\u91CD\u65B0\u542F\u52A8\u5E94\u7528\u7A0B\u5F0F\u3002",viewErrorDetail:"\u8BE6\u7EC6\u5185\u5BB9",unexpectedErrorOccurred:"\u53D1\u751F\u65E0\u9884\u671F\u4E4B\u9519\u8BEF",unknownApiErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u4F3A\u670D\u5668\u53D1\u751F\u65E0\u9884\u671F\u4E4B\u9519\u8BEF",unknownError:"\u4E0D\u660E\u539F\u56E0\u9519\u8BEF",unknownUser:"\u672A\u77E5\u4E4B\u4F7F\u7528\u8005",unlockingScreens:"\u89E3\u9664\u64CD\u4F5C\u9501\u5B9A...",unlockingStudentSharing:"\u89E3\u9664\u5B66\u751F\u95F4\u901A\u8BAF\u9501\u5B9A...",unnamedNote:"\u672A\u547D\u540D\u4E4B\u7B14\u8BB0",unsaved:"\u672A\u50A8\u5B58",unsupportedContentType:"\u6B64\u7C7B\u6863\u6848\u65E0\u6CD5\u65B0\u589E\u7B14\u8BB0",unsupportedFileErrorMsg:"\u4E0D\u5BF9\u5E94\u6B64\u6863\u6848\u3002\u6863\u6848\u683C\u5F0F: \u201C%1$s\u201D\u3001\u526F\u6863\u540D: \u201C%2$s\u201D",unsupportedFileErrorWithoutOptMsg:"\u4E0D\u5BF9\u5E94\u6B64\u6863\u6848",unsupportedNoteFeatErrorMsg:"%1$s\u5305\u542B\u65B0\u529F\u80FD\u3002\u6B64\u7B14\u8BB0\u53EF\u80FD\u4EE5\u5F00\u53D1\u4E2D\u4E4BApp\u6240\u5236\u4F5C\u3002\uFF08\u7248\u672C: %2$s, \u529F\u80FD\u4EE3\u7801: %3$s\uFF09",unsupportedNoteVerErrorMsg:"\u4E0D\u652F\u63F4%1$s\u4E4B\u683C\u5F0F\u3002\u6B64%1$s\u53EF\u80FD\u4EE5\u65B0\u7248\u672CApp\u6765\u5236\u4F5C\u6545\u65E0\u6CD5\u5F00\u542F\u3002\uFF08\u7248\u672C: %2$s\uFF09",update:"\u66F4\u65B0",updateCard:"\u66F4\u65B0\u5361\u7247",updateOrder:"\u66F4\u65B0\u987A\u5E8F",updatingSubmission:"\u6B63\u5728\u66F4\u65B0\u7F34\u4EA4\u8D44\u6599",uploadingAsset:"\u6B63\u5728\u4E0A\u4F20\u8D44\u6599...",uploadingDocument:"\u6B63\u5728\u4E0A\u4F20\u6587\u4EF6...",use:"\u4F7F\u7528",useAll:"\u4F7F\u7528\u5168\u90E8",useFormally:"\u4F7F\u7528",version:"\u7248\u672C",verticalWritingBtnLabel:"\u76F4",video:"\u6444\u5F71\u673A",videoDefaultFileName:"\u5F71\u7247",volume:"\u97F3\u91CF",web:"\u7F51\u9875",webCardExtensionLeadingText:`\u4F7F\u7528\u6D4F\u89C8\u5668\u6269\u5145\u529F\u80FD
\u53EF\u4EE5\u8F7B\u677E\u5730\u5236\u4F5C Web\u5361`,webPageSharedText:"\u5DF2\u5206\u4EAB\u7F51\u9875",webPageSharedTextBy:"%1$s \u5DF2\u5C06\u7F51\u9875\u5206\u4EAB",quiz:"\u95EE\u7B54",quizPresetTest:"\u6D4B\u9A8C",quizPresetSurvey:"\u95EE\u5377",author:"\u51FA\u9898\u8005",questionCount:"\u95EE\u9898\u6570 %1$d",result:"\u7ED3\u679C",answer:"\u56DE\u7B54",confirmAnswers:"\u786E\u8BA4\u56DE\u7B54",answerTestTogether:"\u5168\u4F53\u56DE\u7B54",answerQuestionnaireTogether:"\u5168\u4F53\u56DE\u7B54",creatingTestCard:"\u6B63\u5728\u5236\u4F5C\u6D4B\u9A8C\u5361",createdTestCard:"\u6D4B\u9A8C\u5361\u5236\u4F5C\u5B8C\u6210",failedCreateTestCard:"\u65E0\u6CD5\u5236\u4F5C\u6D4B\u9A8C\u5361",failedGoogleLoginHelpText:"failedGoogleLoginHelpText",failedGoogleLoginHelpLink:"failedGoogleLoginHelpLink",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u6B63\u5728\u51C6\u5907\u6D4B\u9A8C\u95EE\u9898",preparingQuestionnaire:"\u6B63\u5728\u51C6\u5907\u95EE\u5377\u5185\u5BB9",webDefaultFileName:"\u7F51\u9875\u641C\u5BFB",didBackupUnsavedChanges:"\u5DF2\u50A8\u5B58\u5148\u524D\u53D8\u66F4\u5907\u4EFD\u3002\u76EE\u524D\u5DF2\u5907\u4EFD\u4E4B\u7B14\u8BB0\u6709%1$d\u4E2A\u3002",willDeleteGroupFromSubject:"\u7531%1$s\u5220\u9664%2$s...",year:"%1$d\u5E74",yourTurnToPresent:"\u8F6E\u5230\u4F60\u53D1\u8868!",zoomTitle:"\u653E\u5927\u30FB\u7F29\u5C0F",languageSettingTitle:"\u8A00\u8BED\u8BBE\u5B9A",english:"\u82F1\u8BED",japanese:"\u65E5\u6587",japaneseHira:"\u65E5\u6587\uFF08Hiragana\uFF09",traditionalChinese:"\u7E41\u4F53\u4E2D\u6587",simplifiedChinese:"\u7B80\u4F53\u4E2D\u6587",drawn:"\u7ED8\u56FE",annotation:"\u6279\u6539",couldntSave:"\u65E0\u6CD5\u4FDD\u5B58%1$s",annotationThumbnail:"\u5DF2\u6279\u6539\u8D44\u6599\u4E4B\u7F29\u56FE",documentThumbnail:"\u6587\u6863\u7F29\u56FE",couldntGetCoursesAttributes:"\u65E0\u6CD5\u53D6\u5F97\u8BFE\u7A0B\u8D44\u8BAF",inButtonIconClass:"inButtonIconZhHans",outButtonIconClass:"outButtonIconZhHans",thinkingToolHelpPageUrl:"https://n.loilo.tv/cn/thinkingtool",couldntGetSubmissions:"\u65E0\u6CD5\u53D6\u5F97\u7F34\u4EA4\u8D44\u6599",tasksFeatureIsUnavailable:"%1$d\u4EBA\u4EE5\u4E0A\u4E4B\u8BFE\u7A0B\u65E0\u6CD5\u4F7F\u7528\u7F34\u4EA4\u76D2",regularWtFontName:"loilo-NotoSansCJKsc-Regular",boldWtFontName:"loilo-NotoSansCJKsc-Black",uiFontName:"Noto Sans SC",couldntGetSubmissionMessage:"\u65E0\u6CD5\u53D6\u5F97\u7F34\u4EA4\u8D44\u6599\u4E4B\u7F34\u4EA4\u72B6\u51B5",appName:"LoiLoNote School",loiloNote:"LoiLoNote",sharedNote:"\u5171\u4EAB\u4E4B\u7B14\u8BB0",submissionBox:"\u7F34\u4EA4\u76D2",error:"\u9519\u8BEF",timeline:"\u65F6\u95F4\u8F74",status400Msg:"\u8981\u6C42\u683C\u5F0F\u9519\u8BEF\u3002\u4E00\u822C\u4E0D\u4F1A\u53D1\u751F\u6B64\u9519\u8BEF\uFF0C\u53EF\u80FD\u7531\u4E8E\u53D1\u751F\u6545\u969C\u6240\u9020\u6210\u3002",status403Msg:"\u6CA1\u6709\u8BF7\u6C42\u8D44\u6E90\u4E4B\u6743\u9650",status404Msg:"\u627E\u4E0D\u5230\u6240\u8981\u6C42\u4E4B\u8D44\u6E90",status500Msg:"\u4F3A\u670D\u5668\u53D1\u751F\u9519\u8BEF\u3002\u7CFB\u7EDF\u53EF\u80FD\u4F1A\u53D1\u751F\u5168\u9762\u6027\u4E4B\u969C\u788D",defaultErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u53D1\u751F\u9884\u671F\u5916\u4E4B\u9519\u8BEF",goToTopPage:"\u8FD4\u56DE\u9996\u9875",viewStatusPage:"\u786E\u8BA4\u4F3A\u670D\u5668\u670D\u52A1\u72B6\u51B5",login:"\u767B\u5165",masterUserLoginUnsupported:"\u6B64\u5E10\u53F7\u65E0\u6CD5\u4F7F\u7528\u4E8E\u7B80\u6613\u767B\u5165",invalidCredentials:"\u5B66\u6821ID\u3001\u4F7F\u7528\u8005ID\u3001\u5BC6\u7801\u4E4B\u7EC4\u5408\u4E0D\u6B63\u786E",invalidIPAddress:"\u5B58\u53D6\u70B9\u4E4BIP\u4F4D\u7F6E\u53D7\u5230\u9650\u5236\u3002\u8BF7\u5411\u5B66\u6821\u7BA1\u7406\u8005\u786E\u8BA4\u3002",accountLocked:"\u5E10\u53F7\u5DF2\u88AB\u9501\u5B9A\u3002\u8BF7\u6D3D\u5B66\u6821\u7BA1\u7406\u4EBA\u5458\u3002",forbiddenIsAdmin:"\u7BA1\u7406\u8005\u5E10\u53F7\u65E0\u6CD5\u4F7F\u7528\u4E8E\u8F6F\u4F53\u767B\u5165\u3002",forbiddenIsSSOUser:"\u4E0EGoogle\u5E10\u6237\u8FDE\u52A8\u4E4B\u7528\u6237\u65E0\u6CD5\u767B\u5165\u3002",couldntLogIn:"\u65E0\u6CD5\u767B\u5165",endpoint:"\u5B58\u53D6\u70B9",schoolIDLabel:"\u5B66\u6821",schoolIDPlaceholder:"\u5B66\u6821\u5E10\u53F7",schoolIDTitle:"\u8BF7\u8F93\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6570\u5B57\u3001- (\u8FDE\u5B57\u53F7)\u3001_ (\u5E95\u7EBF)",userIDLabel:"\u4F7F\u7528\u8005",userIDPlaceholder:"\u4F7F\u7528\u8005\u5E10\u53F7",userIDTitle:"\u8BF7\u8F93\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6570\u5B57\u6216\u7B26\u53F7",passwordPlaceholder:"\u5BC6\u7801",passwordTitle:"\u8BF7\u8F93\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6570\u5B57\u6216\u7B26\u53F7",trialAccountLinkText:"\u7531\u6B64\u7533\u529E\u514D\u8D39\u5E10\u53F7",adminSignInLinkText:"\u7BA1\u7406\u8005\u767B\u5165",recommendUpdateTitle:"\u5EFA\u8BAE\u66F4\u65B0\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668",recommendUpdateMsg:"\u6B64App\u4E4B\u67D0\u4E9B\u529F\u80FD\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u8FD0\u4F5C",loginContinueBtnText:"\u7EE7\u7EED\u4F7F\u7528",recommendNativeAppTitle:"\u5EFA\u8BAE\u4F7F\u7528iOS App",recommendNativeAppMsg:"\u60A8\u6240\u4F7F\u7528\u7684\u6D4F\u89C8\u5668\u9650\u5236\u4E86\u8FD9\u4E2AApp\u6240\u63D0\u4F9B\u7684\u4E00\u4E9B\u529F\u80FD\u3002\u4E3A\u4E86\u5F97\u5230\u6700\u4F73\u4F7F\u7528\u6548\u679C\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u6211\u4EEC\u5728iOS\u5546\u5E97\u4E2D\u63D0\u4F9B\u4E4BApp\u3002",unsupportedBrowserTitle:"\u4E0D\u652F\u63F4\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668",unsupportedBrowserMsg:"\u8BF7\u4F7F\u7528\u6700\u65B0\u7248\u4E4BChrome\u6D4F\u89C8\u5668",unknownBrowser:"\u672A\u77E5\u4E4B\u6D4F\u89C8\u5668",yourBrowser:"\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668",supportedVersionsLabel:"\u652F\u63F4\u4E4B\u6D4F\u89C8\u5668\u7248\u672C",otherIOSBrowsers:"\u5176\u4ED6iOS\u6D4F\u89C8\u5668\uFF1AiOS 13\u4EE5\u4E0A",localeCode:"zh-Hans",signUpPageUrl:`${iu}/users/sign_up?lang=en`,iosAppStorePageUrl:"https://apps.apple.com/cn/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_en.svg",chromeDownloadPageUrl:"https://www.google.com/intl/zh-CN/chrome/",needBrowserUpdateMsg:"\u8BF7\u5C06\u60A8\u7684\u6D4F\u89C8\u5668\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C",installBrowser:"\u4E0B\u8F7D\u6D4F\u89C8\u5668\u6700\u65B0\u7248\u672C",getApp:"\u7531\u5546\u5E97\u53D6\u5F97App",appStatusPageUrl:"https://status.loilonote.app/zh-Hans",couldntEncodeDrawnData:"\u65E0\u6CD5\u5B8C\u6210\u624B\u5199\u6570\u636E\u7F16\u7801",accessNotPermitted:"\u6CA1\u6709\u5B58\u53D6\u6743\u9650",giveClipboardAccess:"\u5982\u6B32\u4F7F\u7528\u526A\u8D34\u529F\u80FD\uFF0C\u5FC5\u987B\u5F00\u542F\u526A\u8D34\u7C3F\u5B58\u53D6\u6743\u9650\u3002",couldntLoadFontFileMsg:"\u65E0\u6CD5\u8BFB\u53D6\u6240\u9700\u4E4B\u5B57\u578B",noMemoryErrorTitle:"\u8BB0\u5FC6\u4F53\u4E0D\u8DB3",noMemoryErrorMsg:"\u7531\u4E8E\u8BB0\u5FC6\u4F53\u4E0D\u8DB3\u65E0\u6CD5\u5B8C\u6210\u5904\u7406\u3002\u8BF7\u91CD\u65B0\u5F00\u542F\u5E94\u7528\u7A0B\u5F0F\u3002",couldntChangeTool:"\u65E0\u6CD5\u5207\u6362\u601D\u7EF4\u5DE5\u5177\u56FE",couldntFetchData:"\u65E0\u6CD5\u53D6\u5F97\u6570\u636E\u8D44\u6599",couldntSetupPdfWorker:"\u65E0\u6CD5\u5236\u4F5CPDF worker",couldntDeleteAsOtherInCharge:`\u8FD9\u4E2A\u8BFE\u7A0B\u5DF2\u6709\u5176\u4ED6\u8001\u5E08\u4F7F\u7528\uFF0C\u6545\u65E0\u6CD5\u5220\u9664\u3002
\u60A8\u8981\u89E3\u9664\u672C\u8BFE\u7A0B\u7684\u8D1F\u8D23\u4EBA\u8EAB\u4EFD\u5417\uFF1F`,relatedSubjectsMsg:"\u203B\u82E5\u60A8\u8981\u89E3\u9664\u6B64\u8BFE\u7A0B\u8D1F\u8D23\u4EBA\u8EAB\u4EFD\uFF0C\u4E0B\u5217\u5171\u7528\u8D44\u6599\u76D2\u7684\u8BFE\u7A0B\u8D1F\u8D23\u4EBA\u4E5F\u4F1A\u4E00\u5E76\u89E3\u9664",stopBeginInCharge:"\u89E3\u9664\u8D1F\u8D23\u4EBA\u8EAB\u4EFD",fileTooBigTitle:"\u6863\u6848\u8FC7\u4E8E\u5E9E\u5927",fileTooBigMessage:"\u65E0\u6CD5\u4E0A\u4F201GB\u4EE5\u4E0A\u4E4B\u6863\u6848",exceedVideoQuality:`\u542B\u6709\u8F83\u5927\u4E4B\u5F71\u7247\u6863\u6848\uFF0C\u53D1\u5E03\u753B\u9762\u65F6\u6050\u4F1A\u6709\u64AD\u653E\u4E0D\u987A\u7545\u4E4B\u60C5\u51B5\u3002
\u662F\u5426\u7EE7\u7EED\u4E0A\u4F20?`,confirmDeleteTarget:"\u662F\u5426\u5220\u9664\u201C%1$s\u201D\uFF1F",signInWithXXX:"\u4EE5%1$s\u767B\u5165",confirmDisplayAnswers:"\u8981\u663E\u793A\u7B54\u6848\u5417\uFF1F",submissionListDateShortFmt:"m\u6708d\u65E5 HH:MM",submissionListDateFullFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",couldntExportCard:"\u5361\u7247\u8F6C\u5B58\u5931\u8D25",pdf:"PDF",exportingCardAsPdf:"\u5361\u7247\u6B63\u5728\u8F6C\u5B58\u6210PDF\u6863...",open:"\u5F00\u542F",cache:"\u5FEB\u53D6",submittersAnswer:"%1$s\u7684\u7B54\u6848",previousSomeonesAnswer:"\u4E0A\u4E00\u4F4D\u7684\u7B54\u6848",nextSomeonesAnswer:"\u4E0B\u4E00\u4F4D\u7684\u7B54\u6848",newerDataExistsOnServer:"\u4F3A\u670D\u5668\u6709\u65B0\u7248\u672C\u8D44\u6599\u5B58\u5728",qrCodePreviewDialogTitle:"\u5DF2\u8BFB\u53D6QR Code",createWebCard:"\u5236\u4F5CWeb\u5361",createTextCard:"\u5236\u4F5C\u6587\u5B57\u5361",qrCodeScannerPrepError:"QR Code\u8BFB\u53D6\u529F\u80FD\u5C1A\u672A\u5C31\u7EEA",textCardPlaceholderImgPath:"/svg/text_sc_100x75_margin.svg",qrModeGuidance:"\u8BF7\u5C06QR Code\u7F6E\u4E2D\u4E8E\u626B\u7784\u8303\u56F4\u5185",selectAnswers:"\u8BF7\u9009\u62E9\u56DE\u7B54",selectAnswersCompare:"\u8BF7\u9009\u62E9\u8981\u6BD4\u8F83\u7684\u7B54\u6848",selectNoteForAddingMaterials:"\u8981\u5C06\u8D44\u6599\u6DFB\u52A0\u81F3\u54EA\u4E00\u4EFD\u7B14\u8BB0\uFF1F",videoRecordingTimeLimitReached:"\u5F55\u5F71\u65F6\u95F4\u5DF2\u8FBE\u4E0A\u9650\uFF0C\u5C06\u505C\u6B62\u5F55\u5F71\u3002",creatingAttendanceCard:"\u6B63\u5728\u5236\u4F5C\u51FA\u7F3A\u52E4\u5361",createdAttendanceCard:"\u51FA\u7F3A\u52E4\u5361\u5236\u4F5C\u5B8C\u6210",failedCreateAttendanceCard:"\u65E0\u6CD5\u5236\u4F5C\u51FA\u7F3A\u52E4\u5361",attendance:"\u51FA\u7F3A\u52E4\u5361",attendanceReport:"\u51FA\u7F3A\u52E4\u8054\u7EDC",attendanceCardCreator:"\u7F16\u8005",preparingAttendance:"\u6B63\u5728\u51C6\u5907\u51FA\u7F3A\u52E4\u8054\u7EDC",clickHereForHelp:"\u4F7F\u7528\u65B9\u6CD5\u8BF7\u53C2\u9605\u6B64\u5904",helpPageLinkForQuizCardTest:"https://scrapbox.io/hkloilots/%E6%B8%AC%E9%A9%97%E5%8D%A1",helpPageLinkForQuizCardSurvey:"https://scrapbox.io/hkloilots/%E5%95%8F%E5%8D%B7%E5%8D%A1",helpPageLinkForAttendanceCardTeacher:"https://scrapbox.io/hkloilots/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",helpPageLinkForAttendanceCardStudent:"https://scrapbox.io/hkloilots/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",loginPageTitle:"\u767B\u5165LoiLoNote School",loginPageDesc:"\u6B22\u8FCE\u6765\u5230LoiLoNote School\uFF0C\u8BA9\u6211\u4EEC\u52A0\u5165\u6709\u8DA3\u7684\u8BFE\u7A0B\u5427!",penType:"\u7B14\u7684\u79CD\u7C7B",penColor:"\u7B14\u7684\u989C\u8272",highlighterColor:"\u8367\u5149\u7B14\u989C\u8272",clearAll:"\u5168\u90E8\u6E05\u9664",penThickness:"\u7EBF\u6761\u7C97\u7EC6",eraserSize:"\u6A61\u76AE\u64E6\u6E05\u9664\u8303\u56F4\u5927\u5C0F",myFolder:"\u6211\u7684\u8D44\u6599\u5939",schoolWideFolder:"\u6821\u5185",districtShared:"%1$s\u5171\u7528",schoolShared:"\u6821\u5185\u5171\u7528",classShared:"\u6B64\u8BFE\u7A0B\u5171\u7528",teachersOnlyFolder:"\u4EC5\u9650\u8001\u5E08",classFolder:"%1$s \u5C02\u7528",sortCreateDateOrder:"\u5236\u4F5C\u65E5\u671F\u987A\u5E8F",sortUpdateDateOrder:"\u66F4\u65B0\u65E5\u671F\u987A\u5E8F",materialNameOrder:"\u540D\u79F0\u987A\u5E8F",materialFileUpdateDateFolderNameOrder:"\u6863\u6848\u5939\u540D\u79F0\u987A\u5E8F",pushTokenRegistration:"\u767B\u5F55\u901A\u77E5\u901A\u8BC1",registered:"\u5DF2\u767B\u5F55",unregistered:"\u672A\u767B\u5F55",citationNotePrefix:"\u5F15\u7528",markAllAsRead:"\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB",confirmMarkAllSubmitsAsRead:"\u5C06\u6700\u65B0\u7684\u7F34\u4EA4\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB\u3002\u662F\u5426\u6267\u884C\uFF1F",markedAllSubmitsAsRead:"\u6700\u65B0\u7684\u7F34\u4EA4\u5DF2\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB",confirmMarkAllRevealAnswersAsRead:"\u5C06\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB\u3002\u662F\u5426\u6267\u884C\uFF1F",markedAllRevealAnswersAsRead:"\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB",copied:"\u5DF2\u62F7\u8D1D",failedCreateWebCardFromExtension:"\u5F00\u542F\u5305\u542BWeb\u5361\u7684\u7B14\u8BB0\u540E\uFF0C\u8BF7\u4F7F\u7528\u6269\u5145\u529F\u80FD\u6765\u5236\u4F5C\u5361\u7247\u3002",failedCreateWebCardFromExtensionTitle:"\u8BF7\u5F00\u542F\u7B14\u8BB0",enableSharedNote:"\u5F00\u542F\u7B14\u8BB0\u5171\u4EAB\u529F\u80FD",selectSchool:"\u8BF7\u9009\u62E9\u8981\u767B\u5165\u4E4B\u5B66\u6821",showAnnotation:"\u663E\u793A\u4FEE\u6B63\u5904",hideAnnotation:"\u4E0D\u663E\u793A\u4FEE\u6B63\u5904",submissionDeadlineFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM \u622A\u6B62",submissionBoxDeletedOrNotExisted:"\u7F34\u4EA4\u76D2\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u5220\u9664",getToWork:"\u9A6C\u4E0A\u524D\u5F80\u8BBE\u5B9A\uFF01",chooseNoteToWorkIn:"\u8981\u4F7F\u7528\u54EA\u4E00\u4EFD\u7B14\u8BB0\u6765\u8BBE\u5B9A\u4E3B\u9898\uFF1F",newTaskCreated:"\u6709\u65B0\u589E\u4E4B\u7F34\u4EA4\u8D44\u6599",standardNote:"\u4E2A\u4EBA\u7B14\u8BB0",xIsDeleted:"\u5C06\u5220\u9664 %1$s",couldntFetchSharedNoteMembers:"\u65E0\u6CD5\u53D6\u5F97\u6210\u5458",manageSharedNoteMember:"\u6210\u5458\u4E4B\u7BA1\u7406",chooseNoteToManageMember:"\u8BF7\u9009\u62E9\u7BA1\u7406\u7B14\u8BB0\u4E4B\u6210\u5458",chooseNoteToExport:"\u8BF7\u9009\u62E9\u6C47\u51FA\u4E4B\u7B14\u8BB0",chooseNoteToImport:"\u8BF7\u9009\u62E9\u6C47\u5165\u4E4B\u7B14\u8BB0",couldntAddMember:"\u65E0\u6CD5\u8FFD\u52A0\u6210\u5458",removedFromSharedNoteMembers:"\u5DF2\u89E3\u9664\u5171\u6709\u7B14\u8BB0\u6210\u5458\u8EAB\u5206",couldntGetDeviceInfo:"\u65E0\u6CD5\u53D6\u5F97\u8BBE\u5907\u8D44\u8BAF",changePassword:"\u66F4\u65B0\u5BC6\u7801",submitPassword:"\u66F4\u65B0",currentPasswordIncorrect:"\u76EE\u524D\u4E4B\u5BC6\u7801\u4E0D\u6B63\u786E",currentPassword:"\u76EE\u524D\u4E4B\u5BC6\u7801",newPassword:"\u65B0\u5BC6\u7801",newPasswordConfirm:"\u65B0\u5BC6\u7801\uFF08\u786E\u8BA4\uFF09",couldntChangePassword:"\u65E0\u6CD5\u66F4\u65B0\u5BC6\u7801",passwordUpdated:"\u5BC6\u7801\u5DF2\u66F4\u65B0",ipAddressRestricted:"\u65E0\u7EBF\u5B58\u53D6\u70B9IP\u5730\u5740\u53D7\u5230\u9650\u5236",hiUser:"%1$s\u60A8\u597D",setNewPassword:"\u8BF7\u8BBE\u5B9A\u4E0B\u6B21\u767B\u5165\u65F6\u4F7F\u7528\u7684\u65B0\u5BC6\u7801",welcomeToLns:"\u6B22\u8FCE\u6765\u5230LoiLoNote School",connectionStatus:"\u8FDE\u7EBF\u72B6\u51B5",connectedToPushServer:"\u5DF2\u8FDE\u63A5\u901A\u77E5\u4F3A\u670D\u5668",couldntConnectToPushServer:"\u672A\u8FDE\u63A5\u901A\u77E5\u4F3A\u670D\u5668\uFF0C\u90E8\u5206\u529F\u80FD\u65E0\u6CD5\u4F7F\u7528",reconnectingToPushServer:"\u4E0E\u901A\u77E5\u4F3A\u670D\u5668\u91CD\u65B0\u8FDE\u63A5\u4E2D...",pleaseConnectToInternet:"\u8BF7\u8FDE\u63A5\u7F51\u8DEF",pleaseConnectToInternetDesc:"\u76EE\u524D\u4E3A\u79BB\u7EBF\u72B6\u6001\u3002\u8BF7\u786E\u8BA4\u7F51\u8DEF\u8FDE\u7EBF\u3002",default:"\u9884\u8BBE",confirmCloseNoteForOtherSubmissionBox:`\u6B63\u524D\u5F80\u5176\u4ED6\u8BFE\u7A0B\u4E4B\u7F34\u4EA4\u76D2\u3002
\u5C06\u5173\u95ED\u76EE\u524D\u7B14\u8BB0\uFF0C\u662F\u5426\u6267\u884C?`,confirmCloseNoteForOtherTimeline:`\u6B63\u524D\u5F80\u5176\u4ED6\u8BFE\u7A0B\u4E4B\u65F6\u95F4\u8F74\u3002
\u5C06\u5173\u95ED\u76EE\u524D\u7B14\u8BB0\uFF0C\u662F\u5426\u6267\u884C?`,selectItemsToExport:"\u8BF7\u9009\u62E9\u6C47\u51FA\u4E4B\u6863\u6848",retry:"\u518D\u6B21\u6267\u884C",exceedNumberOfExportableItemsMsg:"\u53EF\u6C47\u51FA\u4E4B\u6863\u6848\u30FB\u6587\u4EF6\u5939\u6570\u91CF\u8D85\u8FC7\u4E0A\u9650\u505C\u6B62\u6C47\u51FA",exceedNumberOfExportableHierarchyMsg:"\u53EF\u6C47\u51FA\u4E4B\u6863\u6848\u30FB\u6587\u4EF6\u5939\u9636\u5C42\u8D85\u8FC7\u4E0A\u9650\u505C\u6B62\u6C47\u51FA",analyzingDocument:"\u6B63\u5728\u8BFB\u53D6\u6863\u6848",exportingDocument:"\u6B63\u5728\u6C47\u51FA\u6863\u6848",couldntExportDocument:"\u65E0\u6CD5\u6C47\u51FA\u6863\u6848",import:"\u6C47\u5165",imported:"\u5DF2\u6C47\u5165",export:"\u6C47\u51FA",underMaintenace:"\u76EE\u524D\u6B63\u5728\u8FDB\u884C\u7EF4\u62A4",maintenanceNotification:"\u4F3A\u670D\u5668\u7EF4\u62A4\u901A\u77E5",maintenanceScheduled:"\u5DF2\u9884\u5B9A\u8981\u6267\u884C\u7EF4\u62A4",seeDetail:"\u8BE6\u60C5\u8BF7\u53C2\u9605\u6B64\u5904",endSchedule:"\u7ED3\u675F\u9884\u5B9A\u65F6\u95F4",watchTutorial:"\u89C2\u770B\u793A\u8303\u5F71\u7247",closeTutorialTitle:"\u662F\u5426\u7ED3\u675F\u793A\u8303\u5F71\u7247\uFF1F",closeTutorialMsg:"\u6B64\u5F71\u7247\u53EF\u968F\u65F6\u89C2\u770B",closeTutorialCheckLabel:"\u4EE5\u540E\u4E0D\u518D\u663E\u793A",understood:"\u77E5\u9053\u4E86",failedPlayTutorial:"\u65E0\u6CD5\u64AD\u653E\u793A\u8303\u5F71\u7247",importingNotes:"\u6B63\u5728\u6C47\u5165\u7B14\u8BB0...",exportingNotes:"\u6B63\u5728\u6C47\u51FA\u7B14\u8BB0...",accessIsNotAllowed:"\u7981\u6B62\u4ECE\u8FD9\u4E2AIP\u4F4D\u5740\u5B58\u53D6",insufficientPermissionToJoin:"\u6CA1\u6709\u53C2\u52A0\u6743\u9650",classHasEnded:"\u6B64\u73ED\u7EA7\u5DF2\u5173\u95ED",onlyStudentsAllowedToJoin:"\u9664\u5B66\u751F\u5916\u65E0\u6CD5\u53C2\u52A0",graduatesNotAllowedToJoinClass:"\u65E0\u6CD5\u53C2\u52A0\u5DF2\u6BD5\u4E1A\u6821\u4E4B\u73ED\u7EA7",ssoLogin422Msg:"\u5B66\u6821\u5185\u6709\u76F8\u540C\u4E4B%1$s\u5E10\u53F7\u91CD\u590D\u767B\u5F55\uFF61 \u9664\u4E86\u60F3\u4F7F\u7528\u4E8E\u767B\u5165\u4E4B\u5E10\u53F7\u5916, \u8BF7\u89E3\u9664\u5E10\u53F7\u4E4B\u91CD\u590D\u7ED1\u5B9A\uFF61",ssoLogin422Url:"https://scrapbox.io/enloilomanual/Duplicate_registration_error_is_displayed_when_logging_in_with_SSO.",ssoLogin404Msg:"\u6B64%1$s\u5E10\u53F7\u5C1A\u672A\u767B\u5F55\u81F3LoiLoNote\u30FBSchool\u6545\u65E0\u6CD5\u4F7F\u7528\u3002\u8BF7\u6D3D\u8BE2\u7BA1\u7406\u8005\u3002",importNotes:"\u6C47\u5165%1$d\u4E2A\u7B14\u8BB0",createCourseAfterUserGroupCreation:"\u8BF7\u7EE7\u7EED\u5EFA\u7ACB\u8BFE\u7A0B",createCourseAfterUserGroupCreationDesc:"\u5C06\u5EFA\u7ACB\u73ED\u7EA7\u6240\u9700\u4E4B\u56FD\u8BED.\u6570\u5B66.\u82F1\u6587\u7B49\u8BFE\u7A0B",insufficientPermission:"\u65E0\u6267\u884C\u6743\u9650",accessDenied:"\u65E0\u5B58\u53D6\u6743\u9650",actionCannotBeCarriedOutOnClosedCourse:"\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B\u65E0\u6CD5\u4F7F\u7528",couldNotGetSubmissionAnswers:"\u65E0\u6CD5\u5F00\u542F\u7F34\u4EA4\u76D2\u68C0\u89C6\u5185\u5BB9",folderWithThisNameAlreadyExists:"\u5DF2\u6709\u76F8\u540C\u540D\u79F0\u7684\u6587\u4EF6\u5939\u5B58\u5728",importDocument:"\u6B63\u5728\u6C47\u5165\u6863\u6848",couldntImportDocument:"\u65E0\u6CD5\u6C47\u5165\u6863\u6848",folderForImportedItemsWillBeCreated:"\u5236\u4F5C\u6C47\u51FA\u5904\u6863\u6848",searchExampleLessonPlans:"\u67E5\u9605\u6559\u5B66\u6848\u4F8B",searchExampleLessonPlansPageUrl:"https://help.loilonote.app/--602630326cb271001c1f19d7",save:"\u4FDD\u5B58",administrator:"\u7BA1\u7406\u8005",reuse:"\u518D\u6B21\u4F7F\u7528",reuseThisTestCard:"\u518D\u6B21\u4F7F\u7528\u8FD9\u5F20\u6D4B\u9A8C\u5361",reuseThisAttendanceCard:"\u518D\u6B21\u4F7F\u7528\u8FD9\u5F20\u51FA\u7F3A\u52E4\u5361",pleaseWaitForMaintenanceEnd:"\u8BF7\u7A0D\u5F85\u7247\u523B\u76F4\u5230\u7EF4\u62A4\u5DE5\u4F5C\u7ED3\u675F",uploadingXXX:"\u6B63\u5728\u4E0A\u4F20%1$s...",upload:"\u4E0A\u4F20",experimentalFeatures:"Experimental Features",folderCannotBeUploaded:"\u65E0\u6CD5\u4E0A\u4F20\u6587\u4EF6\u5939",filesNoExtCannotBeUploaded:"\u65E0\u6CD5\u4E0A\u4F20\u65E0\u526F\u6863\u540D\u4E4B\u6863\u6848",fileWithInvalidNameContained:"\u542B\u6709\u540D\u79F0\u65E0\u6548\u4E4B\u6587\u4EF6",insufficientPermissionToDocumentGroup:"\u4E0D\u5177\u5199\u5165\u6587\u4EF6\u5939\u4E4B\u6743\u9650",convertToSharedNote:"\u5C06\u5171\u4EAB\u7B14\u8BB0",chooseNoteToShare:"\u8BF7\u9009\u62E9\u8981\u5171\u4EAB\u7684\u7B14\u8BB0",chooseUsersToBeShared:"\u8BF7\u9009\u62E9\u5171\u4EAB\u7B14\u8BB0\u7684\u6210\u5458",shareXXX:" \u5171\u4EAB%1$s",confirmShareNote:"\u8BBE\u5B9A\u4E3A\u5171\u4EAB\u4E4B\u7B14\u8BB0\u65E0\u6CD5\u518D\u56DE\u590D\u5230\u4E00\u822C\u7B14\u8BB0\u3002\u65E0\u6CD5\u5BF9\u5E94\u5171\u4EAB\u7B14\u8BB0\u7684\u5E94\u7528\u8F6F\u4F53\u5C06\u4E0D\u4F1A\u663E\u793A\u5728\u4E00\u89C8\u8868\u4E2D\uFF0C\u662F\u5426\u63A5\u53D7?",teacherNoClosedCourseTitle:"\u4F60\u4E0D\u8D1F\u8D23\u4EFB\u4F55\u8FC7\u53BB\u7684\u79D1\u76EE",studentNoClosedCourseTitle:"\u4F60\u6CA1\u6709\u52A0\u5165\u4EFB\u4F55\u8FC7\u53BB\u7684\u79D1\u76EE",pasteTips:"\u8D34\u4E0A\u6587\u672C\u6216\u662F\u7531\u7F51\u8DEF\u590D\u5236\u8FC7\u6765\u7684\u56FE\u7247",noMembersInGroup:"\u73ED\u7EA7\u672A\u6709\u5B66\u751F\u52A0\u5165",showCodeToInviteStudents:"\u516C\u5E03\u8BFE\u7A0B\u53C2\u52A0\u4EE3\u7801\uFF0C\u8BF7\u5B66\u751F\u8F93\u5165",members:"\u4EBA",saved:"Saved"};var v7={aboutThisApp:"About this App",addCardDialogTitle:"Add Card",addCourseDialogJoinCourseBtnLabel:"Add",addCourseLabel:"Add Subject",addCourseDesc:'Please go to "Add Subject"',adminPage:"Admin Page",allMembers:"All",alreadyJoinedGroup:"Already joined",andOtherMembers:"and %1$d other%2$s",anonymous:"Name Display Off",answersNotVisibleWarnTitle:"Answer not Viewable",answersNotVisibleWarnMsg:"Other answers cannot be viewed, as Answer Sharing is turned off.",api202ErrorMsg:"The server has not yet finished processing this item. It should become available after a short delay. Please wait a few minutes, then try again.",api403ErrorMsg:"No permission to view %1$s. Please check with your school's administrator for LoiLoNote School.",api404ErrorMsg:"Could not find %1$s. It is possible this %1$s was never created, or was previously deleted.",arrange:"Arrange",asNextCard:"as next card",attending:"Attending",attendingOtherCourse:"Attending other Subject",audioDefaultFileName:"audio",audioRecordBtnLabel:"REC",automatic:"Auto",back:"Back",backToAnswerList:"Back to Answer List",brokenNoteErrorMsg:"The version of %1$s saved on the server may be corrupted. Please contact our support staff. (Error Code: %2$d, Subject ID: %3$d, Note ID: %4$s) We apologize for the inconvenience caused.",browserDoesntSupportAudioRecording:"Your browser does not support audio recording",browserDoesntSupportMediaCapture:"Your browser does not image recording",browsingWeb:"Web",camera:"Camera",cancel:"Cancel",cannotInsertWhileStillLoadingDocument:"Cards cannot be displayed, as they are still loading",cantFindUsableDevice:"No available camera device found",cardHasUnsavedAttachments:"Included files have not finished uploading",cardHasUploadFailedAttachments:"Could not upload included files",changeLayout:"Change layout",changeLayoutDescription:"You can change the layout of the submissions",changeTools:"Change Tools",renamingNote:'Renaming "%1$s" to "%2$s"...',checkAttendance:"Student List",checking:"Checking...",checkScreenLock:"Confirm Screen Lock",checkServiceStatus:"Please check status of services",chooseFileToCopy:"Select items to copy",chooseFileToDelete:"Select items to delete",chooseFileToMove:"Select items to move",chooseFileToRename:"Select items to rename",chooseGroupToAddTo:"Select the class you will be teaching",noGroups:"None of this year's classes have been registered yet",createNewGroupDesc:'"Create a New Class" from \u2193',groupDesc:'A group of students taking a class at the same time is called a "class"',chooseGroupToDelete:"Select group to delete",chooseNoteToCopy:"Select note to copy",chooseNoteToRename:"Select note to rename",choosingCourse:"Choosing Subject",close:"Close",closeAfterTen:"In 10 min",closeCamera:"Close Camera",closedTaskLabel:"Closed",closeNote:"Close Note",closeNow:"Now",closeThisScreen:"Close this Dialog",closeToday:"Today",compare:"Compare",comparison:"Compare",complete:"Done",confirmAnswerShare:"Share answers with students?",confirmAudioRecordingOverwrite:"Overwrite audio recording?",confirmCardDelete:"Delete cards?",confirmDuplicateAllConnectedCards:"Duplicate all connected cards?",confirmCreateSubject:'Create "%1$s"',confirmDelete:"Delete?",confirmDeleteAudioRecording:"Delete audio recording?",confirmGroupJoin:'Join "%1$s"?',confirmLogout:"Log out?",confirmMultiChildCardDelete:"Delete this card and its %1$d children?",confirmMultiCardGroupDelete:"Delete %1$d cards and child cards?",confirmMultiFileDelete:"Delete %1$d file%2$s?",confirmReloadWhileUnsavedChangesExist:"This note contains unsaved changes. Reloading the page may cause the loss of these changes. Reload?",confirmResetVideoCamera:"Retake video?",confirmResubmit:'Submit you work to "%1$s"?',confirmRevealSubmitterNames:"Students' names will be displayed. Continue?",confirmSendToAll:"Send to all members?",confirmSendBack:"Send marks back to student?",confirmSendBackAll:"Send back %1$d marked submission%2$s?",confirmSingleFileDelete:"Delete 1 file?",confirmStartPresentation:"Ask student to present?",confirmStartScreenSharing:"Start screen sharing?",copy:"Copy",duplicate:"Duplicate",duplicateAllConnectedCards:"Duplicate All Connected Cards",couldntReuseCard:"Could not reuse card",copyingDocument:"Copying file...",copyingNote:"Copying note...",copyOf:"%1$sCopy",duplicateThisCard:"Duplicate This Card",copyToThisFolder:"Copy to This Folder",corruptFileErrorMsg:"Could not load file. Its data may be invalid.",couldntRenameNote:"Could not rename note",couldntChangeScreenLock:"Could not change screen lock",couldntChangeStudentSharingLock:"Could not change student sharing lock",couldntCopyDocument:"Could not copy file",couldntCopyNote:"Could not copy note",couldntCreateFolder:"Could not create folder",couldntCreateGroup:"Could not create group",couldntCreateNote:"Could not create note",couldntCreateSubject:"Could not create subject",couldntCreateTask:"Could not create task",couldntDeleteArchivedGroup:"Could not delete group, as it is archived",couldntDeleteAsMaterialsExist:"Could not delete subject, as it contains materials saved to storage",couldntDeleteAsNotesExist:"Could not delete subject, as it contains saved notes",couldntDeleteAsSubjectsExist:"Could not delete group, as registered subjects remain",couldntDeleteAsUsersExist:"Could not delete group, as it contains member users",couldntDeleteClosedGroup:"Could not delete group, as it is already closed",couldntDeleteCourse:"Could not delete subject",couldntDeleteDocument:"Could not delete file",couldntDeleteGroup:"Could not delete group",couldntDeleteNote:'Could not delete "%1$s"',couldntDeleteTask:"Could not delete task",describeTask:"Describe the task",couldntDownloadFileErrorMsg:"%1$d: Could not download file from server. Please try again.",couldntGet_CheckInternetConnection:"Could not send requests. Please check your Internet connection.",couldntGetCourses:"Could not get subject data",couldntGetNote:"Could not get note data",couldntGetOtherTeachersCourses:"Could not get data for other teacher's subjects",couldntGetPhotoData:"Could not get photo data",couldntGetPreviousYearsCourses:"Could not get data for previous years' subjects",couldntGetVideoData:"Could not get video data",couldntInsertFile:"Could not add file to note",couldntInsertItemTitle:"Could not add %1$s to note",couldntInsertPhoto:"Could not add photo to note",couldntInsertVideo:"Could not add video to note",couldntJoinGroup:"Cannot Join Class",couldntJoinSubject:"Could not join subject",couldntLoadFileTitle:"Could not read file",couldntMoveDocument:"Could note move title",couldntOpenItem:"Could not open %1$s",couldntReceiveScreenShare:"Could not receive shared screen",couldntRenameItem:"Could not change name of %1$s",couldntSaveNote:"Could not save note",couldntSaveToMaterials:"Could not save file",couldntSendBackDocument:"Could not send back marks",couldntSendCards:"Could not send cards",couldntShareScreen:"Could not share screen",couldntStartAudioRecording:"Could not start audio recording",couldntSubmitCards:"Could not submit cards",couldntSubmitWhileSubmittingOthers:"Could not submit, as other submission is pending",couldntUpdateSubmission:"Could not update submission",couldntUploadDocument:"Could not upload files",couldntUploadNotes:"Could not upload notes",courseAccessDenied:"Insufficient access permission for this subject",courseDoesntExist:"Subject does not exist",courseFetchErrorOccurred:"Error occurred while fetching data for subject",groupFetchErrorOccurred:"Error occurred while fetching data for class",courseJoinedMark:"Added",courseListTitle:"Subject List",create:"Create",createCard:"Create Card",createdSubjectsListTitle:"Existing subjects",createFolder:"Create Folder",createNewGroupBtnLabel:"Create New Group",createNewNote:"Create New Note",createNewSubjectBtnLabel:"Create new subject",createNewTask:"Create New Task",creatingFolder:"Creating folder...",creatingGroup:'Creating group "%1$s"...',creatingNote:'Creating "%1$s"...',creatingSubjectForGroup:'Creating subject "%1$s" for group "%2$s"...',creatingTask:"Creating task...",webCard:"Web Card",creatingWebCard:"Creating Web Card...",cut:"Cut",timelineDateFmtPrevYear:"%2$d/%3$d/%1$d",timelineDateFmtThisYear:"%d-%d, %02d:%02d",timelineDateFmtToday:"%02d:%02d",dateLabel:"Date",daysRemaining:"%d days left",yearTimeUnit:"years",dayTimeUnit:"days",deferToOtherDeviceVersionDesc:"Undo changes made on this device, and apply the changes made from the other device.",deferToOtherDeviceVersionTitle:"Apply other device's changes",delete:"Delete",deletingDocument:"Deleting file...",deletingGroup:"Deleting %1$s...",deletingNote:"Deleting %1$s...",deletingTask:'Deleting Task "%1$s"...',didInsertFile:"File added to note",didInsertMaterials:"Cards added to note",didInsertPhoto:"Photo added to note",didInsertVideo:"Video added to note",didJoinGroup:"Joined %1$s",didSaveToMaterialsStorage:"Saved to Materials Storage",didSendBackDocument:"Marks sent back",didCompleteSendBack:"All marks sent back",didSendCards:"Cards sent",didSubmitCards:"Cards submitted",displayByStudent:"Display by student",documentCopyDenied:"Insufficient permission to copy file or folder",documentMoveDenied:"Insufficient permission to move file or folder",duplicatedSubjectError:"Could not create subject, as it is already registered in the group",duplicatedUserGroup:"This group name already exists",itemNameInvalid:"Invalid %1$s name",itemNotFound:"Could not find %1$s",itemRenameDenied:"Insufficient permission to rename %1$s",drawingDefaultFileName:"Drawing",duplicateNoteNameSuffix:" Copy",edit:"Edit",end:"End",endAnswerSharing:"End Answer Sharing",endPresentationLine1:"End",endPresentationLine2:"Presentation",endScreenShareReceiving:"End reception of screen sharing",endSharingLine1:"End",endSharingLine2:"Sharing",enterDocumentName:"Enter name for item",enterFileName:"Enter file name",enterFolderName:"Enter folder name",enterGroupCode:"Please enter class code",enterNewGroupName:"Please enter new group name",enterTaskName:"Please describe task",userGroupNamePlaceholder:"e.g. Mr.LoiLo's class",errorOccurred:"Error occurred",expand:"Expand",expiry:"Expiry",expiryDialogTitle:"Expiry",exportCard:"Export",pdfFile:"PDF File",file:"File",fileOrFolderDeletionDenied:"Insufficient permission to delete file or folder",fileOrFolderInvalid:"File or folder is invalid",fileUpdatedAtDateTimeFmt:"yyyy/mm/dd hh:MM TT",focusOnTheTeacher:"Please pause your work and focus on your teacher.",forgotPasswordLinkText:"Forgot your password?",forgotPasswordPageUrl:"https://scrapbox.io/enloilomanual/Forgot_login_ID_and_password",folder:"Folder",folderCreationDenied:"Insufficient permission to create folder at given location",folderLocationNotFound:"Could not find specified parent folder",folderNotFound:"Could not find specified folder",generalCameraPrepError:"Could not prepare camera device",cameraMicPermissionDeniedErrorMsg:"Please give this app permission to use cameras and microphones",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/enloilomanual/Give_the_Android_App_Camera_and_Microphone_Permission",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/enloilomanual/Give_the_Android_App_Camera_and_Microphone_Permission",getHelp:"Get Help",goBackToDesktop:"Back to Note",goBackToNoteList:"Back to Note List",groupAlreadyDeleted:"This group was already deleted",groupCode:"Class Code",groupDeletionDenied:"Insufficient permission to delete group",groupDoesntExist:"Group does not exist",groupJoinInstructions:"Students, please enter this Class Code",groupName:"Group Name",groupNoLongerExists:"Group no longer exists",groupUnavailable:"This group cannot be used",hasExpired:"Expired",helpWebCardExtensionUrl:"https://scrapbox.io/enloilomanual/LoiLo_Web_Card_Extensions",hoursRemaining:"%d hours left",hourTimeUnit:"hours",inputCannotContainSpacesWarning:"Input cannot contain blank spaces",inputTooLongWarning:"Please use %1$d characters or less",insertCardFromDocument:"Add materials to note",insertingFile:"Adding file to note...",insertingMaterials:"Adding materials to note...",insertingPhoto:"Adding photo to note...",insertingVideo:"Adding video to note...",inThisCard:"in this card",invalidDocumentCopyDetails:"File, folder, or copy location invalid",invalidDocumentMoveDetails:"File folder, or move location invalid",invalidDocumentName:"File name invalid",invalidFolderName:"Folder name invalid",invalidGroupCode:"The Class Code is invalid",invalidOpenUrl:"This card's URL cannot be opened, as it contains one or more invalid characters.",invalidRequest:"Invalid request",invalidUrlHelp:'Please enter an address starting with "http://" or "https://"',invertMouseWheel:"Invert mouse wheel direction",joinCourseBtnLabel:"Enter Class Code",joiningGroup:"Joining group...",joiningSubject:"Joining %1$s...",learnAboutThinkingTools:"Learn about Thinking Tools",learnMore:"Learn more",loadingFile:"Loading file...",lockingScreens:"Locking screens...",lockingStudentSharing:"Locking student sharing...",logout:"Log Out",logoutOption:"Log Out",mapDefaultFileName:"Map",material:"Material",materialsStorage:"Materials",membersJoinedCount:"Number of members",micPermissionDeniedErrorMsg:"Please give this app permission to use microphones",minRemaining:"%1$s min left",minuteTimeUnit:"min",mouseWheelSensitivity:"Mouse wheel sensitivity",move:"Move",moveToThisFolder:"Move to This Folder",movingDocument:"Moving file...",nameOrder:"Name Order",newNoteDefaultNameFmt:"%2$d/%3$d/%1$d's Note",noExpiry:"None",noJoinedCourseTitle2:"any subjects",noMicFoundErrorMsg:"Could not find a usable mic",noNotesFound:"To get started, create a new note!",noOpenTasks:"No open tasks",notAttending:"Not attending",note:"Note",noteChangedFromOtherDevice:"New changes to this note where made on a different device. Reload to update.",noteConflictDialogTitle:"Note data conflict occurred",noteFetchErrorOccurred:"Error occurred while fetching note data",noteListTitle:"Note List",nowSharingIndicator:"Sending to %1$s%2$s",okay:"OK",deadlineDate:"Deadline",openForSubmissions:"Waiting for answers",openingNote:"Opening note...",openTaskCount:", %1$d other%2$s",openWebPage:"Open Web Page",others:", %1$d others",otherTeachersCourseNotFound:"Other teachers' subject not found",otherTeachersCoursesTitle:"Other teachers' subjects",overwritingNote:"Overwriting note",paste:"Paste",pasteImage:"Paste image",pasteText:"Paste text",pasteWeb:"Paste Web",nothingToPaste:"Nothing to paste",pasteCopiedUrl:"Paste the copied URL here",pdfDefaultFileName:"PDF",pendingFileAndThumbUploadCount:"Uploading %1$d file%3$s and %2$d thumbnail%4$s...",pendingFileUploadCount:"Uploading %1$d file%2$s...",pendingThumbUploadCount:"Uploading %1$d thumbnail%2$s...",photo:"Photo",photoDefaultFileName:"photo",pleaseEnterFolderName:"Enter folder name",preferences:"Preferences",preparingScreenSharing:"Preparing screen sharing...",preparingStudentPresentation:"Preparing for student presentation...",endedCoursesTitle:"Ended subjects",endedCoursesDesc:`Last year's subjects are in the "Ended Subjects" section`,print:"Print",prioritizeThisVersionDesc:"Destroy changes made on other devices and apply the changes made on this device.",prioritizeThisVersionTitle:"Apply local changes",release:"Remove",releaseAll:"Deselect All",reload:"Reload",rename:"Rename",renamingItem:"Renaming %1$s...",renameNoteDialogMsg:"Rename Note",requestPresentationLine1:"Ask to",requestPresentationLine2:"Present",resetCamera:"Reset Camera",resetLayout:"Reset layout",resolve:"Resolve",retake:"Retake",rotate:"Rotate",saveNoteUnderOtherNameDesc:"Overwrite this note applying changes from another device, and save the changes made from this device as a new note.",saveNoteUnderOtherNameTitle:"Save local changes as new note",saveToThisFolder:"Save to This Folder",saving:"Saving...",savingNoteWithOtherName:"Saving note with other name...",schoolLoiloTVUrl:"https://school.loilo.tv/us/web.html",screenLock:"Screen Lock",screensAreLocked:"Screens Locked",screenSharingErrorOccurred:"Error occurred while preparing to share screen",screenSharingTimedOutErrorMsg:"%1$d: Time limit to fetch screen sharing data reached",search:"Search",secondTimeUnit:"sec",secRemaining:"%1$s sec left",seeNextError:"See next error",select:"Select",selectAll:"Select All",selfStudy:"Self-Study",send:"Send",sendBack:"Send Back",sendBackAll:"Send Back All",sendBackErrorOccurred:"Error occurred while sending back marks",sendBackIncomplete:"%2$d of %1$d item%3$s were not sent back",sendingBackDocument:"Sending back...",sendingThumbnails:"Sending thumbnails...",sendToDialogTitle:"Select Recipients",sendToIndividuals:"Members",sendToMultiple:"Send (%1$d)",sentBackBy:"Send back by %1$s",serviceStatus:"Service Status",sessionExpiredMsg:"Your session has expired. To continue, please reload this page.",sessionExpiredTitle:"Reload Required",badCsrfTokenTitle:"Invalid CSRF token",badCsrfTokenMsg:"Cross-site request forgery token is invalid. Please log in again.",sharedBy:"Shared by %1$s",shareScreen:"Share Screen",sharing:"Sharing",sharingAnswers:"Sharing Answers",shrink:"Shrink",start:"Start",startAnswerSharing:"Share Answers",startComparing:"Start Comparing",startSharingLine1:"Share",startSharingLine2:"Screen",status403AccessDenied:"Access denied",status404ItemNotFound:"Item does not exist or was deleted",statusFetchErrorOccurred:"Error occurred while fetching data",stoppingScreenSharing:"Stopping screen sharing...",stoppingStudentPresentation:"Stopping student presentation...",stopScreenSharing:"Stop Sharing",student:"Students",enterClassCodeToJoinClass:"\u2193 Enter the class code that your teacher gave you",studentSharing:"Lock Tunnels",subjectNameInputPlaceholder:"Enter subject name...",subjectOrTaskDoesntExist:"Subject or task does not exist",subjectTitle:"Subject",requestContainsInvalidID:"Invalid subject or task ID",submissionName:"%1$s's Submission",submissions:"Tasks",submit:"Submit",submitOrder:"Submission Order",submitted:"submitted",submittedBy:"Submitted by %1$s",submittingDocument:"Submitting",support:"Support",taskExpiryFmt:"mm/dd/yyyy",taskListTitle:"Task List",taskNameDefaultPrefix:"Task ",teacher:"Teachers",teacherLockedScreens:"Screens locked",teacherNoJoinedCourseTitle1:"You are not yet in charge of",text:"Text",textButtonIconClass:"textButtonIconEnUs",textCardMenuBtnImgPath:"/svg/text_en_60x60_margin_less.svg",textDefaultFileName:"text",thinkingTool:"Thinking Tools",thisGroupHasNoSubjects:"This group has no subjects",thisIsAnEmptyFolder:"This is an empty folder",trackpadPinchZoomSensitivity:"Trackpad pinch zoom sensitivity",timeLabel:"Time",timelineTitle:"Timeline",ttAnalysis:"Analysis",ttButterfly:"Butterfly",ttCandy:"Candy",ttCircles:"Concentric Circles",ttDataChart:"Data",ttDiamond:"Diamond",ttFishbone:"Fishbone",ttJellyfish:"Jellyfish",ttOneAxis:"1 Axis",ttPlotLeft:"Plot(Left)",ttPlotRight:"Plot(Right)",ttPMI:"PMI/KWL",ttPyramid:"Pyramid",ttRake:"Rake",ttSheet:"Blank",ttTwoAxes:"2 Axes",ttVenn2:"2 Circle Venn",ttVenn3:"3 Circle Venn",ttWChart:"W",ttWebbing:"Webbing",ttXChart:"X",ttYChart:"Y",uncaughtErrorOccurred:"An unexpected error has caused the app to stop. Please view the details of the error and pass them on to our support staff, or reload the app.",viewErrorDetail:"View Details",unexpectedErrorOccurred:"Unexpected error occurred",unknownApiErrorMsg:"An unexpected server error has occurred. Please pardon the inconvenience caused.",unknownError:"Unknown error",unknownUser:"Unknown user",unlockingScreens:"Unlocking screens...",unlockingStudentSharing:"Unlocking student sharing...",unnamedNote:"unnamed node",unsaved:"unsaved",unsupportedContentType:"This type of content cannot be added to a note",unsupportedFileErrorMsg:'Unsupported file type: "%1$s" Extension: "%2$s"',unsupportedFileErrorWithoutOptMsg:"Unsupported file type",unsupportedNoteFeatErrorMsg:"%1$s may contain features created by a newer version of our app. (version: %2$s, feature codes: %3$s)",unsupportedNoteVerErrorMsg:"%1$s format was created by a newer version of our app and cannot be open. (version: %2$s)",update:"Update",updateCard:"Update Card",updateOrder:"Update Order",updatingSubmission:"Updating submission",uploadingAsset:"Uploading assets...",uploadingDocument:"Uploading documents...",use:"Use",useAll:"Use All",useFormally:"Use",version:"version",verticalWritingBtnLabel:"V",video:"Video",videoDefaultFileName:"video",volume:"Volume",web:"web",webCardExtensionLeadingText:`To easily create Web Cards,
use the LoiLo Web Card browser extension`,webPageSharedText:"Web page shared",webPageSharedTextBy:"%1$s has shared a web page with you",quiz:"Test",quizPresetTest:"Test",quizPresetSurvey:"Questionnaire",author:"Setter",questionCount:"%1$d Question%2$s",result:"Result",answer:"Answer",confirmAnswers:"Confirm Answers",answerTestTogether:`Answer
Together`,answerQuestionnaireTogether:`Answer
Together`,creatingTestCard:"Creating Test Card",createdTestCard:"Test Card created",failedCreateTestCard:"Could not create Test Card",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"Preparing test",preparingQuestionnaire:"Preparing questionnaire",webDefaultFileName:"web",didBackupUnsavedChanges:"Unsaved changes will be backed up locally. Currently there are %1$d backed up note%2$s.",willDeleteGroupFromSubject:"Deleting %2$s from %1$s...",year:"%1$d yrs",yourTurnToPresent:"It's your turn to present",zoomTitle:"Zoom",annotation:"teacher's marks",couldntSave:"Could not save %1$s",annotationThumbnail:"thumbnails for teacher's marks",documentThumbnail:"document thumbnails",couldntGetCoursesAttributes:"Could not get subject attributes",languageSettingTitle:"Language Setting",english:"English",japanese:"Japanese",japaneseHira:"Japanese\uFF08Hiragana\uFF09",traditionalChinese:"Traditional Chinese",simplifiedChinese:"Simplified Chinese",drawn:"drawing",inButtonIconClass:"inButtonIconEnUs",outButtonIconClass:"outButtonIconEnUs",thinkingToolHelpPageUrl:"https://n.loilo.tv/en/thinkingtool",couldntGetSubmissions:"Could not get submission data",tasksFeatureIsUnavailable:"Tasks feature is unavailable for groups of %1$d or more users",regularWtFontName:"loilo-NotoSansCJKjp-Regular",boldWtFontName:"loilo-NotoSansCJKjp-Black",uiFontName:"Noto Sans JP",couldntGetSubmissionMessage:"Could not get submission status information",appName:"LoiLoNote School",loiloNote:"LoiLoNote",sharedNote:"Shared Note",submissionBox:"Tasks",error:"Error",timeline:"Timeline",status400Msg:"Request format is invalid. This type of error does not ordinarily occur and may indicate a bug.",status403Msg:"Insufficient permission for requested resource",status404Msg:"Resource not found",status500Msg:"A server error occurred. A service-wide outage may be occurring.",defaultErrorMsg:"An unexpected error has occurred. We apologize for the inconvenience caused.",goToTopPage:"Back to the top",viewStatusPage:"View the service status page",login:"Sign in",masterUserLoginUnsupported:"Sign-in via the Quick Sign-in user is not supported",invalidCredentials:"The input school ID, user ID, or password are invalid",invalidIPAddress:"This account is temporarily suspended. Please contact your LoiLoNote School account administrator.",accountLocked:"Your account is locked. Please contact the school's LoiLoNote School administrator",forbiddenIsAdmin:"Sign-in via administrator account is not allowed.",forbiddenIsSSOUser:"Sign-in using school ID, user ID, and password is not allowed for accounts linked to Google services.",couldntLogIn:"Could not sign in",endpoint:"Endpoint",schoolIDLabel:"School",schoolIDPlaceholder:"school ID",schoolIDTitle:'Please enter half-width alphanumeric, "-" (hyphen), or "_" characters.',userIDLabel:"User",userIDPlaceholder:"user ID",userIDTitle:"please use half-width alphanumeric characters only",passwordPlaceholder:"password",passwordTitle:"please use half-width alphanumeric characters only",trialAccountLinkText:"Register for a free trial account",adminSignInLinkText:"Admin Sign In Page",recommendUpdateTitle:"Please consider updating your browser",recommendUpdateMsg:"Some features of this app may not function correctly",loginContinueBtnText:"Continue",recommendNativeAppTitle:"Please consider using our iOS app",recommendNativeAppMsg:"Your browser limits some of the features offered by our app. For the best possible experience, we recommend using our native app available in the iOS App Store.",unsupportedBrowserTitle:"Your browser is not supported.",unsupportedBrowserMsg:"Please use the latest version of Google Chrome",unknownBrowser:"unknown browser",yourBrowser:"Your browser",supportedVersionsLabel:"Supported versions",otherIOSBrowsers:"Other iOS browsers on iOS v. 13 or higher",localeCode:"en-US",signUpPageUrl:`${iu}/users/sign_up?lang=en`,iosAppStorePageUrl:"https://apps.apple.com/us/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_en.svg",chromeDownloadPageUrl:"https://www.google.com/intl/en_us/chrome/",needBrowserUpdateMsg:"Please update your browser to the latest version",installBrowser:"Get Latest Version of Chrome",getApp:"Get App from App Store",appStatusPageUrl:"https://status.loilonote.app/en",couldntEncodeDrawnData:"Could not encode pen mark data",accessNotPermitted:"Access Not Permitted",giveClipboardAccess:"Please give this app permission to use the clipboard.",couldntLoadFontFileMsg:"Could not load font file",noMemoryErrorTitle:"Not Enough Memory",noMemoryErrorMsg:"Could not complete some processing, as there is not enough memory. Please reload the app.",couldntChangeTool:"Could not change tools",couldntFetchData:"Could not get data",couldntSetupPdfWorker:"Could not create PDF worker",couldntDeleteAsOtherInCharge:`Subject cannot be deleted as other teachers are using it.
 Do you want to stop being in charge of this subject?`,relatedSubjectsMsg:"*If you stop being in charge of this subject, you will also stop being in charge of the following subjects which share materials.",stopBeginInCharge:"Stop Being In Charge",fileTooBigTitle:"Very Large File",fileTooBigMessage:"Cannot upload individual files larger than 1GB",exceedVideoQuality:`You have selected one or more large video files.
 They may not play smoothly when broadcast to other users.
 Add anyway?`,confirmDeleteTarget:'Delete "%1$s"?',signInWithXXX:"Sign in with %1$s",confirmDisplayAnswers:"Display answers?",submissionListDateShortFmt:"mm/dd hh:MM TT",submissionListDateFullFmt:"yyyy/mm/dd hh:MM TT",couldntExportCard:"Could not export cards",pdf:"PDF",exportingCardAsPdf:"Exporting cards as PDF...",open:"Open",cache:"Cache",submittersAnswer:"%1$s's Answer",previousSomeonesAnswer:"Previous person's answer",nextSomeonesAnswer:"Next person's answer",newerDataExistsOnServer:"Newer version of data already exists on server",qrCodePreviewDialogTitle:"QR Code Found",createWebCard:"Create Web Card",createTextCard:"Create Text Card",qrCodeScannerPrepError:"Could not prepare QR code scanner",textCardPlaceholderImgPath:"/svg/text_en_100x75_margin.svg",qrModeGuidance:"Please position a QR code in the frame",selectAnswers:"Select Answers",selectAnswersCompare:"Select Answers to Compare",selectNoteForAddingMaterials:"To which note would you like to add the received materials?",videoRecordingTimeLimitReached:"This video has reached the maximum allowed length. Recording was stopped.",creatingAttendanceCard:"Creating Attendance Card",createdAttendanceCard:"Attendance Card created",failedCreateAttendanceCard:"Could not create Attendance Card",failedGoogleLoginHelpText:"",failedGoogleLoginHelpLink:"",attendance:"Attendance",attendanceReport:"Attendance Report",attendanceCardCreator:"Creator",preparingAttendance:"Preparing attendance report",clickHereForHelp:"Click here for help",helpPageLinkForQuizCardTest:"https://scrapbox.io/enloilomanual/Test_Card_Instructions",helpPageLinkForQuizCardSurvey:"https://scrapbox.io/enloilomanual/Questionnaire_Card_Instructions",helpPageLinkForAttendanceCardTeacher:"https://scrapbox.io/enloilomanual/Attendance_Card_Instructions",helpPageLinkForAttendanceCardStudent:"https://scrapbox.io/enloilomanual/Attendance_Card_Instructions",loginPageTitle:"Sign in to LoiLoNote School",loginPageDesc:"Welcome to LoiLoNote School. We hope you enjoy your lesson!",penType:"Pen Type",penColor:"Pen Color",highlighterColor:"Highlighter Color",clearAll:"Clear All",penThickness:"Pen Thickness",eraserSize:"Eraser Size",myFolder:"Personal",schoolWideFolder:"School-Wide",districtShared:"%1$s Shared",schoolShared:"School-Wide Shared",classShared:"Subject Shared",teachersOnlyFolder:"Teachers-Only",classFolder:"%1$s",sortCreateDateOrder:"Creation Order",sortUpdateDateOrder:"Update Order",materialNameOrder:"Name Order",materialFileUpdateDateFolderNameOrder:"Folder Name Order",pushTokenRegistration:"Notification Token Registration",registered:"Completed",unregistered:"Incomplete",citationNotePrefix:"Source",markAllAsRead:"Mark all as read",confirmMarkAllSubmitsAsRead:"Mark all new submissions as read?",markedAllSubmitsAsRead:"All new submissions marked as read",confirmMarkAllRevealAnswersAsRead:"Mark all newly shared answers as read?",markedAllRevealAnswersAsRead:"All newly shared answers marked as read",copied:"Copied",failedCreateWebCardFromExtension:"Please open the note to which you wish to add a Web Card, then try once again to create a card via the browser extension",failedCreateWebCardFromExtensionTitle:"Please open a note",enableSharedNote:"Enable Shared Notes",selectSchool:"Please choose a school to login",showAnnotation:"Show Marks",hideAnnotation:"Hide Marks",submissionDeadlineFmt:"Due by hh:MM TT 'on' mm/dd/yyyy",submissionBoxDeletedOrNotExisted:"Task does not exist or was deleted",getToWork:"Get to work!",chooseNoteToWorkIn:"Select note to work in",newTaskCreated:"New task created",standardNote:"Private Note",xIsDeleted:"%1$s deleted",couldntFetchSharedNoteMembers:"Could not get list of members",manageSharedNoteMember:"Manage Members",chooseNoteToManageMember:"Please select the note whose members you wish to manage",chooseNoteToExport:"Select notes to export",chooseNoteToImport:"Select notes to import",couldntAddMember:"Could not add users",removedFromSharedNoteMembers:"You have been removed from this shared note's list of members",couldntGetDeviceInfo:"Device information unavailable",changePassword:"Change Password",submitPassword:"Change",currentPasswordIncorrect:"Old password is incorrect",currentPassword:"Old Password",newPassword:"New Password",newPasswordConfirm:"Confirm New Password",couldntChangePassword:"Could not change password",passwordUpdated:"Password changed",ipAddressRestricted:"Access from your current IP address is not allowed",hiUser:"Hi %1$s,",setNewPassword:"Please create a password to be used when you next sign in",welcomeToLns:"Welcome to LoiLoNote School!",connectionStatus:"Connection Status",connectedToPushServer:"Connected to notification server",couldntConnectToPushServer:"Notification server connection lost. Some features not available.",reconnectingToPushServer:"Reconnecting to notification server...",pleaseConnectToInternet:"Please connect to the Internet",pleaseConnectToInternetDesc:"Your Internet connection is offline. Please check your connection.",default:"Default",confirmCloseNoteForOtherSubmissionBox:"You are attempting to open an Answer List in a subject different from the currently open note. Close the current note?",confirmCloseNoteForOtherTimeline:"You are attempting to open the Timeline of a subject different from the currently open note. Close the current note?",selectItemsToExport:"Select items to export",retry:"Retry",exceedNumberOfExportableItemsMsg:"Export cancelled, as too many items where selected",exceedNumberOfExportableHierarchyMsg:"Export cancelled, as selected folders contain too many levels of sub-folders",analyzingDocument:"Reading items",exportingDocument:"Exporting items",couldntExportDocument:"Could not export items",import:"Import",imported:"Imported",export:"Export",underMaintenace:"Currently Under Maintenance",maintenanceNotification:"Notice of Maintenance Schedule",maintenanceScheduled:"Maintenance Scheduled",seeDetail:"More Details Here",endSchedule:"Expected Completion",watchTutorial:"View tutorial",closeTutorialTitle:"End tutorial?",closeTutorialMsg:"You can access these videos here",closeTutorialCheckLabel:"Don't show this again",understood:"OK!",failedPlayTutorial:"Could not start tutorial",importingNotes:"Importing Notes...",exportingNotes:"Exporting Notes...",accessIsNotAllowed:"Access from your IP address is not allowed",insufficientPermissionToJoin:"Insufficient permission to join",classHasEnded:"This class has ended",onlyStudentsAllowedToJoin:"Only students allowed to join",graduatesNotAllowedToJoinClass:"Graduates not allowed to join this class",ssoLogin422Msg:"The same %1$s account is connected to multiple LoiLo accounts. To resolve this, please disconnect all but the one account you intend to use to sign in.",ssoLogin422Url:"https://scrapbox.io/enloilomanual/SSO%E3%81%A7%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%97%E3%81%9F%E6%99%82%E3%81%AB%E9%87%8D%E8%A4%87%E7%99%BB%E9%8C%B2%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%A8%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%82%8B",ssoLogin404Msg:"This %1$s account is not connected to a LoiLoNote School account. Please contact your account administrator.",importNotes:"Importing %1$d note%2$s",createCourseAfterUserGroupCreation:"Go on and create a subject",createCourseAfterUserGroupCreationDesc:"Subject entries need to be created on a class-by-class and subject-by-subject basis. Each subject entry corresponds to each subject, such as grammar, math, geography, etc.",insufficientPermission:"Insufficient permission",accessDenied:"Access denied",actionCannotBeCarriedOutOnClosedCourse:"Action cannot be carried out on closed subject",couldNotGetSubmissionAnswers:"Could not get answers",folderWithThisNameAlreadyExists:"A folder with this name already exists",importDocument:"Importing files",couldntImportDocument:"Could not import files",folderForImportedItemsWillBeCreated:"Folder for imported items will be created",searchExampleLessonPlans:"Search Example Lesson Plans Page",searchExampleLessonPlansPageUrl:"https://help.loilonote.app/--602630326cb271001c1f19d7",save:"\u4FDD\u5B58",administrator:"Administrator",reuse:"Reuse",reuseThisTestCard:"Reuse This Test Card",reuseThisAttendanceCard:"Reuse This Attendance Card",pleaseWaitForMaintenanceEnd:"Please wait for a while until the maintenance is finished.",uploadingXXX:"Uploading %1$s...",upload:"Upload",experimentalFeatures:"Experimental Features",folderCannotBeUploaded:"Folders cannot be uploaded.",filesNoExtCannotBeUploaded:"Files with no file extension cannot be uploaded.",fileWithInvalidNameContained:"Contains a file with an invalid name.",insufficientPermissionToDocumentGroup:"You do not have permission to write to the folder.",convertToSharedNote:"Convert to Shared Note",chooseNoteToShare:"Choose a note to share",chooseUsersToBeShared:"Choose users to be a member",shareXXX:"Share %1$s",confirmShareNote:"A Shared Note cannot be reverted to a Regular Note. If the app does not support shared notes, it will not appear in the list, is that okay?",teacherNoClosedCourseTitle:"You were not in charge of any past subjects",studentNoClosedCourseTitle:"You did not join any past subjects",pasteTips:"Paste text or an image copied from the web",noMembersInGroup:"No students have joined the class.",showCodeToInviteStudents:"Display the class code and have students enter it",members:"members",saved:"Saved"};var Cue=["en-US","ja-JP","ja-Hira","zh-Hant","zh-Hans"];function b7(t){return Cue.some(e=>e===t)}var y7={"ja-JP":"japanese","ja-Hira":"japaneseHira","en-US":"english","zh-Hant":"traditionalChinese","zh-Hans":"simplifiedChinese"};function C7(t){switch(t){case"ja-JP":case"ja-Hira":return"ja-JP";case"zh-Hant":return"zh-TW";default:return"en-US"}}function S7(t){switch(t){case"en-US":return"en";case"zh-Hant":return"zh-tw";case"ja-JP":return"ja";case"ja-Hira":return"ja-Hira";default:return"en"}}function x7(t){var o;return`https://status.loilonote.app/${(o={"en-US":"en","ja-JP":"ja","ja-Hira":"ja","zh-Hant":"zh-Hant","zh-Hans":"zh-Hans"}[t])!=null?o:""}`}function Kk(t){switch(t){case"en-US":return"en";case"zh-Hant":return"zh-tw";case"zh-Hans":return"zh-cn";case"ja-JP":return"ja";case"ja-Hira":return"ja-Hira";default:return"en"}}function Sue(t,e){var o;if(!e)return(o={"en-US":"en","ja-JP":"jp","zh-Hant":"hk","zh-Hans":"en","ja-Hira":"jp"}[t])!=null?o:"en";let r=e.toLocaleLowerCase();return["jp","hk","tw"].includes(r)?r:"en"}function w7(t,e){let r=Sue(t,e);return r==="jp"?"https://help.loilonote.app/":`https://scrapbox.io/${r}loilots/`}function T7(t){switch(t){case"ja-JP":case"ja-Hira":return"ja";default:return t}}var De=class{constructor(e="ja-JP"){this.locale=e}static get(){let e=this.instance;return e||(e=new De,this.instance=e),this.instance}setLocale(e){this.locale=e}static resolve(e){return e=="ja-JP"?h7:e==="ja-Hira"?f7:e=="zh-Hant"?m7:e=="zh-Hans"?g7:v7}get strings(){return De.resolve(this.locale)}pluralSafeSuffix(e){return this.locale==="en-US"&&e>1?"s":""}};var su=(0,qk.createContext)(De.get().strings);function Te(){return(0,qk.useContext)(su)}var D7=su.Provider;var fo=class extends Error{constructor(e="not enough memory"){super(e)}},kl=class extends Error{constructor(e="could not load font"){super(e)}},Yr=class extends Error{constructor(e,r){super(r);this.status=e;if(r)try{this.json=JSON.parse(r)}catch(o){}}asJson(){return this.json}isBadCSRFToken(){var e;return this.status===403&&((e=this.json)==null?void 0:e.code)==="EBADCSRFTOKEN"}isUnderMaintenance(){var e;return this.status===503&&((e=this.json)==null?void 0:e.maintenance)===!0}},Sp=class extends Error{constructor(e){super(e)}},hs=class extends Error{constructor(e){super(e)}},mc=class extends Error{};function Pl(t,e){return t instanceof Error?t:new Error(e)}function Xk(t){let e=De.get().strings;if(t instanceof kl)return{title:e.couldntLoadFontFileMsg,okMessage:e.reload,color:"error",onOk(){return location.reload(),new Promise(()=>{})}};if(t instanceof fo)return{title:e.noMemoryErrorTitle,message:e.noMemoryErrorMsg,okMessage:e.reload,color:"error",async onOk(){return location.reload(),new Promise(()=>{})}};if(t instanceof Yr){if(t.status===401)return{title:e.sessionExpiredTitle,message:e.sessionExpiredMsg,okMessage:e.reload,color:"info",onOk:async()=>new Promise(()=>{let r=new URL(location.href);r.searchParams.set("refresh","1"),location.assign(r.href)})};if(t.isBadCSRFToken())return{title:e.badCsrfTokenTitle,message:e.badCsrfTokenMsg,okMessage:e.logout,color:"error",onOk(){location.href="/logout"}}}return{title:e.errorOccurred,message:e.uncaughtErrorOccurred,okMessage:e.reload,cancelMessage:e.logout,color:"error",onCancel:()=>{location.href="/logout"},async onOk(){location.assign(location.href)},unknownError:t}}var mf=({title:t,cancelMessage:e,onCancel:r,message:o,okMessage:i,onOk:s,unknownError:a,color:l})=>{var v,y;let c=(S,C)=>()=>{C(!0);let b=S();b instanceof Promise?b.finally(()=>C(!1)):C(!1)},[d,u]=(0,Yk.useState)(!1),[p,h]=(0,Yk.useState)(!1),f="";a&&(a.id&&(f+=`id: ${a.id}
`),f+=(y=(v=a.stack)!=null?v:a.message)!=null?y:"");let m=Te(),g;return o&&(g=Array.isArray(o)?o:[o]),zn.createElement(by,null,zn.createElement("div",{className:"uiDialogContent"},zn.createElement("div",{className:"uiDialogBar","data-color":l}),zn.createElement("div",{className:"uiDialogTitle"},t),(g||a)&&zn.createElement("div",{className:"uiDialogMessage"},g&&g.map((S,C)=>zn.createElement("div",{className:"uiDialogSection",key:C},S)),a&&zn.createElement("div",{className:"uiDialogSection"},zn.createElement(xue,{openTitle:m.viewErrorDetail,closeTitle:m.close},zn.createElement("textarea",{defaultValue:f,rows:4,style:{width:"100%",marginTop:15}})))),zn.createElement(El,null,e&&r&&zn.createElement(ma,{className:"uiDialogCancelButton",disabled:p,onClick:c(r,h)},e),zn.createElement(ma,{disabled:d,onClick:c(s,u)},i))))},xue=({openTitle:t,closeTitle:e,children:r})=>{let[o,i]=(0,Yk.useState)(!1);return zn.createElement("div",null,zn.createElement("p",{style:{textAlign:"center"}},zn.createElement("a",{href:"#",onClick:s=>{s.preventDefault(),s.stopPropagation(),i(!o)}},o?e:t)),o&&r)},gy=({children:t})=>Array.isArray(t)?zn.createElement(by,null,zn.createElement("div",{style:{flex:1}}),t,zn.createElement("div",{style:{flex:1}})):zn.createElement(by,null,t),k7=({children:t})=>zn.createElement("div",{className:"uiDialogContent"},zn.createElement("div",{className:"uiDialogTitle"},t),zn.createElement(ur,null)),vy=({title:t,type:e="primary",children:r})=>zn.createElement(by,null,zn.createElement("div",{className:"uiDialogContent"},zn.createElement("div",{className:"uiDialogBar",style:{backgroundColor:e==="primary"?"#0075f6":"#FF5E4D"}}),zn.createElement("div",{className:"uiDialogTitle"},t),zn.createElement("div",null,r))),P7=({children:t})=>zn.createElement("div",{className:"uiDialogBody"},t),El=({children:t})=>zn.createElement("div",{className:"uiDialogButtonWrapper"},t),ma=({children:t,className:e,...r})=>zn.createElement(qr,{className:"uiDialogButton "+e,...r},t),ur=({height:t=3,style:e={},absolute:r})=>(r&&(e.position="absolute",r==="top"?e.top=0:e.bottom=0,e.left=0),zn.createElement("div",{className:"uiDialogLoadingBarWrapper",style:e},zn.createElement("div",{className:"uiDialogLoadingBarContent",style:{height:t}}))),by=({children:t})=>zn.createElement("div",{className:"uiDialog",onDragOver:o=>{o.preventDefault()},onDrop:o=>{o.preventDefault()}},t);var _7=({error:t})=>{let e=Xk(t);return E7.createElement(mf,{...e})};var Dle=X(he()),Gh=X(he());function mo({url:t,type:e,title:r=""}){return{url:t,title:r,type:e}}function xp(t){return t.width>t.height?"landscape":"portrait"}function yy(t=100){return Math.min(window.innerWidth,window.innerHeight)*t/100}function A7(t){return window.innerWidth*t/100}function I7(t){return window.innerHeight*t/100}function _g(t){return Math.min(t.width,t.height)<=480}function js(t=Ze()){return Fx(t,window.innerWidth,window.innerHeight)}var Bi;(function(o){o[o.No=0]="No",o[o.Yes=1]="Yes",o[o.YesAfterDeadline=2]="YesAfterDeadline"})(Bi||(Bi={}));var Ag=class extends Error{constructor({resp:e,note:r,noteId:o,courseId:i}){super(e.error);this.error=e.error,this.info=e.info,this.note=r,this.noteId=o,this.courseId=i}};function Fn(t){let[e,r,o,i]=R7(t);return pn({a:e,r,g:o,b:i})}function Pt(t){let[e,r,o,i]=R7(t);return pn({a:i,r:e,g:r,b:o})}function rn(){return pn({a:255,g:255,b:255,r:255})}function qn(){return pn({a:255,g:0,b:0,r:0})}function pn(t=qn()){let e=t.a,r=t.r,o=t.g,i=t.b;function s(){e=ht(Math.round(e),0,255),r=ht(Math.round(r),0,255),o=ht(Math.round(o),0,255),i=ht(Math.round(i),0,255)}function a(g){return r===g.r&&o===g.g&&i===g.b&&Tl(e,g.a)}function l(){return r===255&&o===255&&i===255}function c(){return e===0}function d(){return s(),"#"+[e,r,o,i].map(F7).join("")}function u(){return s(),"#"+[r,o,i,e].map(F7).join("")}function p(){return s(),`rgba(${r}, ${o}, ${i}, ${e/255})`}function h(){return s(),{r,g:o,b:i,a:e}}function f(){return{r:r/255,g:o/255,b:i/255,a:e/255}}function m(){return pn({a:e,r,g:o,b:i})}return s(),{a:e,r,g:o,b:i,isWhite:l,isTransparent:c,toARGBHex:d,toRGBAHex:u,toCSSRGBA:p,toRGBA:h,equals:a,normalized:f,freeze:m}}var wue=/^#[0-9a-f]{8}$/i;function R7(t){if(!t.match(wue))throw new Error("invalid format:"+t);let e=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16),i=parseInt(t.slice(7,9),16);return[e,r,o,i]}function F7(t){let e=t.toString(16);return e.length<2?"0"+e:e.toUpperCase()}function M7(t,e){let r=t.r-e.r,o=t.g-e.g,i=t.b-e.b;return Math.sqrt(r*r+o*o+i*i)}function Cy(t){let[e,r,o,i]=[t.r/255,t.g/255,t.b/255,t.a],s=Math.max(e,r,o),a=Math.min(e,r,o),l=s-a;l>0&&(s===e?(l=(r-o)/l,l<0&&(l+=6)):s===r?l=2+(o-e)/l:l=4+(e-r)/l),l=l/6;let c=s-a;return s>0&&(c=c/s),{h:l,s:c,v:s,a:i}}function N7(t){let{h:e,s:r,v:o,a:i}=t,s=o,a=o,l=o;if(r>0){let c=e*6,d=Math.floor(c),u=c-d;switch(d){case 0:a*=1-r*(1-u),l*=1-r;break;case 1:s*=1-r*u,l*=1-r;break;case 2:s*=1-r,l*=1-r*(1-u);break;case 3:s*=1-r,a*=1-r*u;break;case 4:s*=1-r*(1-u),a*=1-r;break;case 5:a*=1-r,l*=1-r*u;break}}return s=ht(Math.round(s*255),0,255),a=ht(Math.round(a*255),0,255),l=ht(Math.round(l*255),0,255),{r:s,g:a,b:l,a:i}}function Lx(t){let e=Cy(t),r=.6;return e.v<r||e.a===0}var Ra=Pt("#ffffff00").freeze(),B7=Pt("#7FA0AFFF").freeze(),L7=Pt("#ffffff7f").freeze(),O7=Pt("#19335eff").freeze(),z7=Pt("#f9f8f4ff").freeze(),Qk=Pt("#596782ff").freeze(),U7=Pt("#BBBFBDFF").freeze(),Sy=Pt("#13254cff").freeze(),SN=Pt("#4B4B4BFF").freeze(),xN=Pt("#448AFFFF").freeze(),wN=Pt("#2E647C99").freeze(),Jk=Pt("#FFFF00FF").freeze(),Zk=Pt("#88FBC4FF").freeze();var s9=X(q7());function zx(t,e){for(let r in e)if(e.hasOwnProperty(r)){let o=t[r],i=e[r];Y7(o)&&Y7(i)?t[r]=zx(o,i):t[r]=i}return t}function tP(t){return JSON.parse(JSON.stringify(t))}function Y7(t){return typeof t=="object"&&typeof(t==null?void 0:t.constructor)=="function"&&t.constructor.name==="Object"}function X7(t,e,r,o=!0){let i=e.split("."),s=i.pop(),a=t,l,c="";for(;(l=i.shift())&&(c+=`.${l}`);){if(!a.hasOwnProperty(l))if(o)a[l]={};else throw new Error(`property missing: ${c} not defined.`);a=a[l]}if(!a)throw new Error(`property missing: ${c} not defined.`);a[s]=r}function Q7(t,e){let r=e.split("."),o=r.pop(),i,s=t;for(;i=r.shift();)s=s[i];return delete s[o]}function nn(t){let e=Object.create({});for(let[r,o]of t)e.hasOwnProperty(r)||(e[r]=o);return e}function gc(){let t=o=>{},e=o=>{},r=new Promise((o,i)=>{t=o,e=i});return Object.assign(r,{resolve:t,reject:e})}var J7=X(Ok());function xy(t){return typeof t=="object"&&un(t==null?void 0:t.x)&&un(t==null?void 0:t.y)}function Re(t,e=0){let r,o;if(t==null)return{x:0,y:0};if(xy(t))r=t.x,o=t.y;else if(un(t)&&un(e))r=t,o=e;else throw new Error("invalid point input");return(!pN(r)||!pN(o))&&(ge.error(`invalid point input: x=${r},y=${o}`),J7.default.notify(new Error("invalid point input"),i=>{i.addMetadata("arguments",{x:`${r}`,y:`${o}`})})),{x:r,y:o}}var PN=Math.PI/180,rP=180/Math.PI,er=class{constructor(e=0,r=0){typeof e=="number"?(this.x=e,this.y=r):(this.x=e.x,this.y=e.y)}clone(){return new er(this.x,this.y)}normalize(){let e=this.magnitude();return e===0?this:(this.x/=e,this.y/=e,this)}normalized(){return this.clone().normalize()}magnitude(){return Math.hypot(this.x,this.y)}sqrMagnitude(){return this.x*this.x+this.y*this.y}rotate(e){let r=e*PN,o=Math.cos(r),i=Math.sin(r);return[this.x,this.y]=[this.x*o-this.y*i,this.x*i+this.y*o],this}rotated(e){return this.clone().rotate(e)}scale(e){return this.x*=e,this.y*=e,this}scaled(e){return this.clone().scale(e)}add(e){return this.x+=e.x,this.y+=e.y,this}added(e){return this.clone().add(e)}sub(e){return this.x-=e.x,this.y-=e.y,this}subbed(e){return this.clone().sub(e)}angle(){return Math.atan2(this.y,this.x)*180/Math.PI}};function Rg(t,e){return t.x*e.y-t.y*e.x}function EN(t,e){return t.x*e.x+t.y*e.y}function Fg(t,e){return new er(t.x-e.x,t.y-e.y).magnitude()}function ti(t,e){return new er(t.x-e.x,t.y-e.y)}function au(t,e){return Re(t.x*e,t.y*e)}function vf(t,e){return t.x===e.x&&t.y===e.y}var go=class{constructor(e=0,r=0,o=0,i=0){typeof e=="number"?(this.x=e,this.y=r,this.width=o,this.height=i):(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height)}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}};function nt(t=0,e=0,r=0,o=0){let i;if(typeof t=="number"?i=t:(i=t.x,e=t.y,r=t.width,o=t.height),r<0||o<0)throw new Error(`width and height must be >= 0: ${r},${o}`);return{x:i,y:e,width:r,height:o}}function Z7(t,e,r,o=r){return{x:t-r,y:e-r,width:r*2,height:o*2}}function nP(t,e){let[r,o,i,s]=[t.x,t.y,t.x+t.width,t.y+t.height],a=e.cross(r,o),l=e.cross(i,o),c=e.cross(r,s),d=e.cross(i,s),u=Math.min(a.x,l.x,c.x,d.x),p=Math.min(a.y,l.y,c.y,d.y),h=Math.max(a.x,l.x,c.x,d.x),f=Math.max(a.y,l.y,c.y,d.y);return new go(u,p,h-u,f-p)}function Mg(t,e){return new go(t.x-e.left,t.y-e.top,t.width+e.left+e.right,t.height+e.top+e.bottom)}function oP(t,e){if(!ks(t,e))return;let r=Math.max(t.x,e.x),o=Math.min(t.x+t.width,e.x+e.width),i=Math.max(t.y,e.y),s=Math.min(t.y+t.height,e.y+e.height);return new go(r,i,o-r,s-i)}function Tp(t,e,r=e){let o=nt(t);return o.x*=e,o.y*=r,o.width*=e,o.height*=r,o}function Or(t){return Re(t.x+t.width*.5,t.y+t.height*.5)}function _l(t,e){return t.x<=e.x&&e.x+e.width<=t.x+t.width&&t.y<=e.y&&e.y+e.height<=t.y+t.height}function ks(t,e){let r=Or(t),o=Or(e);return Math.abs(r.x-o.x)<=t.width/2+e.width/2&&Math.abs(r.y-o.y)<=t.height/2+e.height/2}function Li(t,e){let[r,o,i,s]=[t.x,t.y,t.x+t.width,t.y+t.height];return e.x<r&&(r=e.x),i<e.x+e.width&&(i=e.x+e.width),e.y<o&&(o=e.y),s<e.y+e.height&&(s=e.y+e.height),t.x=r,t.y=o,t.width=i-r,t.height=s-o,t}function e9({rect:t,withNormalizedRect:e}){let r=t.x+t.width*e.x,o=t.y+t.height*e.y,i=t.width*e.width,s=t.height*e.height;return nt(r,o,i,s)}function t9({rect:t,inSize:e}){let r=t.x/e.width,o=t.y/e.height,i=t.width/e.width,s=t.height/e.height;return nt(r,o,i,s)}function Si(t,{x:e,y:r}){let o=t.x+t.width,i=t.y+t.height;return t.x<=e&&e<=o&&t.y<=r&&r<=i}function Dp(t,e,r,o,i){return t.x=e,t.y=r,t.width=o,t.height=i,t}function r9(t,e){return t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t}var Ng=class{constructor(e){this.command=e}},sl=class{constructor(e){this.params=e}},kp=class{constructor(e,r){this.position=e;this.finished=r}};var wy=class{constructor(e,r){this.toolType=e;this.startPosition=r}},Bg=class{constructor(e,r){this.toolType=e;this.position=r}},Lg=class{constructor(e,r,o){this.cardId=e;this.sheetType=r;this.position=o}},dd=class{constructor(e){this.params=e}},lu=class{constructor(e,r){this.startPosition=e;this.webCardContentBase=r}},Og=class{constructor(e,r){this.position=e;this.webCardContentBase=r}},Ux=class{constructor(e,r){this.startPosition=e;this.file=r}},Hx=class{constructor(e,r){this.startPosition=e;this.quizContentBase=r}},Gx=class{constructor(e,r){this.startPosition=e;this.contentBase=r}},bf=class{constructor(e,r){this.startPosition=r;this.files=[];for(let o=0;o<e.length;o++)this.files[o]=e[o]}},Pp=class{constructor(e,r){this.position=r;this.files=[];for(let o=0;o<e.length;o++)this.files[o]=e[o]}},ud=class{constructor(e,r){this.position=r;this.files=[];this.files=[...e]}},Vx=class{constructor(e,r){this.url=e;this.startPosition=r;this.type="image/jpeg"}},$x=class{constructor(e,r,o){this.url=e;this.type=r;this.startPosition=o}},zg=class{constructor(e){this.creatorCardId=e.creatorCardId,this.card=e.card,this.type=e.insertType,this.imageFile=e.imageFile,this.url=e.url}},Ug=class{constructor(e){this.creatorCardId=e.creatorCardId,this.card=e.card,this.type=e.insertType,this.videoFile=e.videoFile,this.url=e.url}},Hg=class{constructor(e,r,o,i){this.creatorCardId=e;this.sheetType=r;this.card=o;this.type=i}},Gg=class{constructor(e,r,o,i){this.original=e;this.file=r;this.type=o;this.cardId=i}},Al=class{constructor(e,r,o,i,s){this.cardId=e;this.position=r;this.url=o;this.title=i;this.thumbnailFile=s}},Vg=class{constructor(e,r,o,i){this.cardId=e;this.url=r;this.title=o;this.thumbnailFile=i}},$g=class{constructor(e,r,o,i){this.cardId=e;this.created=r;this.thumbnail=o;this.type=i}},Wg=class{constructor(e,r){this.cardId=e;this.file=r}},Wx=class{constructor(e,r){this.documentInfoList=e;this.startPosition=r}},Ty=class{constructor(e,r){this.documentInfo=e;this.startPosition=r}},Dy=class{constructor(e,r){this.documentInfo=e;this.position=r}},Ep=class{constructor(e,r,o){this.cardId=e;this.target=r;this.isRootCard=o}},jg=class{constructor(e,r){this.cardId=e;this.isRootCard=r}},Kg=class{constructor(e,r){this.cardId=e;this.isRootCard=r}},jx=class{constructor(e,r){this.srcId=e;this.type=r}},_p=class{constructor(e,r,o){this.command=e;this.effect=r;this.byOtherUserId=o}},Fa=class{constructor(e){var r,o;this.cardId=e.cardId,this.color=e.color,this.backcolor=e.backcolor,this.position=e.position,this.unmodified=(r=e.unmodified)!=null?r:!1,this.text=(o=e.text)!=null?o:""}},Ap=class{constructor(e){this.creatorCardId=e.cardId,this.card=e.card,this.type=e.type}},_N=new Map;function qg(t,e){_N.set(t,e)}function Kx(t){return _N.get(t)}function n9(){_N.clear()}function o9(t){return i9(t,["materialBox","submitButton","shareButton","desktopTrashBox"])}function iP(t){return i9(t,["editorTrashBox"])}function i9(t,e){for(let r of e){let o=Kx(r);if(!o)continue;let[i,s]=[t.x/window.devicePixelRatio,t.y/window.devicePixelRatio];if(Si(o,{x:i,y:s}))return r}}function Ip(){let t=new Map,e=0;function r(a){for(let[l,c]of t)try{c(a)}catch(d){ge.error(d)}}function o(a){r(new Ng(a))}function i(a){let l=e++;return t.set(l,a),{close(){t.delete(l)}}}function s(){return t.size}return{publish:r,emit:o,subscribe:i,subscribers:s}}var AN=Ip();function cu(t){return AN.subscribe(t)}function Nt(t){AN.publish(t)}function We(t){AN.emit(t)}function IN(t,...e){let r;for(let i of e){let s=i(t);!s||(r?r=zx(r,s):r=s)}return r==null?t:(ge.log("applyChange",r),{...(0,s9.default)(t,r)})}function ky(t){let e=!1,r=[],o=!1,i=Ip(),s=(...m)=>{if(o){ge.warn("store is hanging. all reducers are ignored");return}if(e){r.push(m);return}e=!0;try{let v=IN(h,...m);v!=h&&f({...v,reduce:s,waitUntil:c,subscribe:a,setHanged:l})}catch(v){throw v}finally{e=!1}let g=r;r=[];for(let v of g)s(...v)},a=m=>i.subscribe(m),l=m=>{o=m},c=(...m)=>{try{if(d(h,m))return Promise.resolve()}catch(v){return Promise.reject(v)}let g=gc();return p.push([m,g]),g},d=(m,g)=>!g.some(v=>!v(m)),u=m=>{for(let g=0;g<p.length;g++){let[v,y]=p[g];try{if(d(m,v))y.resolve();else continue}catch(S){y.reject(S)}p.splice(g,1),g--}},p=[],h={...t,reduce:s,waitUntil:c,setHanged:l,subscribe:a},f=m=>{h=m,i.publish(m),u(h)};return h}var Yg=class{static subscribe(e){Yg.subs.push(e)}static reduce(e){for(let r of Yg.subs)try{r(e)}catch(o){ge.error(o)}}static shouldHandle(e){if(e instanceof Yr){if(e.status===401)return!0;if(e.isBadCSRFToken())return!0}else{if(e instanceof fo)return!0;if(e instanceof kl)return!0}return!1}static handleError(e){if(Yg.shouldHandle(e)){Yg.reduce(sP(e));return}throw e}static catchError(e){try{return Yg.handleError(e),!0}catch(r){return!1}}},yt=Yg;yt.subs=[];var a9=new Map([["image/gif",".gif"],["image/png",".png"],["image/jpeg",".jpg"],["image/webp",".webp"]]),l9=new Map([[".gif","image/gif"],[".png","image/png"],[".jpg","image/jpeg"],[".jpeg","image/jpeg"],[".webp","image/webp"]]),aP=new Map([["video/mp4",".mp4"],["video/quicktime",".mov"],["video/webm",".webm"]]),c9=new Map([[".mp4","video/mp4"],[".mov","video/quicktime"],[".qt","video/quicktime"],[".webm","video/webm"]]),Py=new Map([["audio/mp3",".mp3"],["audio/mpeg",".mp3"],["audio/aac",".aac"],["audio/vnd.dlna.adts",".aac"],["audio/x-m4a",".m4a"],["audio/mp4",".m4a"],["audio/wav",".wav"],["audio/webm",".weba"]]),d9=new Map([[".mp3","audio/mp3"],[".aac","audio/aac"],[".m4a","audio/x-m4a"],[".wav","audio/wav"],[".weba","audio/webm"]]),no=new Map([["application/pdf",".pdf"],...a9.entries(),...Py.entries(),...aP.entries()]),Ey=new Map([[".pdf","application/pdf"],...l9.entries(),...d9.entries(),...c9.entries()]),u9="text/plain";function qx(t){return a9.has(t)}function Rp(t){return d9.has(t.toLowerCase())}function lP(t){return Py.has(t)}function cP(t){return l9.has(t.toLowerCase())}function _y(t){return c9.has(t.toLowerCase())}function al(t){return aP.has(t)}function p9(t){return t==="application/pdf"}function dP(t){return t.toLowerCase()===".pdf"}function RN(t){return t.toLowerCase()===".webm"}function pd(t){let e=t==null?void 0:t.toLowerCase();return e===".webm"||e===".weba"}function Xg(t){return t.toLowerCase()===".lnfragment"}var hd="image/jpeg";function Ay(t){return cP(t)||_y(t)||Rp(t)||dP(t)}function h9(t){let e=no.get(t);return e?Ay(e):!1}var Dr=class{static create(e,r){let o=document.createElement("canvas");return e!=null&&(typeof e=="number"?o.width=e:(o.width=e.width,o.height=e.height)),r!=null&&(o.height=r),this.canvases.set(o,!0),Object.assign(o,{getContext2dForce(){let i=o.getContext("2d");if(!i)throw new fo;return i}})}};Dr.canvases=new WeakMap;function f9(){return navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0}function uP(t){let e="getCapabilities";return e in t&&typeof t[e]=="function"}function m9(t,e){return new Promise((r,o)=>{try{t.pause();let{srcObject:i}=t;if(!(i instanceof MediaStream))throw new Error("srcObject is not instance of MediaStream");let s=i.getVideoTracks()[0],{width:a,height:l}=s.getSettings();if(!a||!l)throw new Error("invalid video track dimensions");let c=e%2==0?Dr.create(a,l):Dr.create(l,a),d=c.getContext2dForce();d.translate(c.width/2,c.height/2),d.rotate(Math.PI/2*e),d.drawImage(t,-a/2,-l/2),c.toBlob(u=>{try{let p=window.URL.createObjectURL(u);r(p)}catch(p){o(p)}},hd)}catch(i){o(i)}})}var FN=class{constructor(){this.isInitialized=!1}async initialize(){let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),r=document.createElement("video");r instanceof HTMLVideoElement&&(r.srcObject=e,r.srcObject=null),e.getTracks().forEach(o=>o.stop())}async getReport(){this.isInitialized||(await this.initialize(),this.isInitialized=!0);let e=await navigator.mediaDevices.enumerateDevices(),r=[],o=[];for(let i of e){if(i.deviceId==="default")continue;let s=i.kind;s==="audioinput"?r.push(i):s==="videoinput"&&o.push(i)}if(o.length<1)throw new Error("No video devices found.");return{video:o,audio:r}}};var Il=class{constructor(e,r){this.width=e;this.height=r}static findGreatestCommonDivisor(e,r){let o=Math.min(e,r),i=Math.max(e,r);for(;i>0&&Math.abs(1-o/i)>Number.EPSILON;){let s=o%i;o=i,i=s}return o}get label(){let{width:e,height:r}=this,o=Il.findGreatestCommonDivisor(e,r),i=`${e/o}:${r/o}`;return`${this.width} x ${this.height} (${i})`}equals(e){return this.width===e.width&&this.height===e.height}asLandscape(){return new Il(Math.max(this.width,this.height),Math.min(this.width,this.height))}asPortrait(){return new Il(Math.min(this.width,this.height),Math.max(this.width,this.height))}},Rue=[[1920,1080],[1280,720],[1024,576]].map(([t,e])=>new Il(t,e)),Fue=[[1600,1200],[1280,960],[800,600]].map(([t,e])=>new Il(t,e)),g9=[...Rue,...Fue],Mue=g9.map(t=>t.asPortrait());function Nue(t,e,r){let o=r?1:-1,i=t.width/t.height,s=e.width/e.height;return i>s?-o:i<s?o:0}function Bue(t,e){let r=t.width*t.height,o=e.width*e.height;return r>o?-1:r<o?1:0}function Lue(t){return(e,r)=>{let o=Nue(e,r,t);return o===0?Bue(e,r):o}}function v9(t,e,r){let{width:o,height:i}=t,{width:s,height:a}=e,l=[],c=!0,d=o<=i&&r,u=d?Mue:g9;for(let p of u){let{width:h,height:f}=p.asLandscape();h<=s&&f<=a&&l.push(p),p.equals(t)&&(c=!1)}return c&&l.push(t),l.sort(Lue(!d))}function b9(t){if(typeof(t==null?void 0:t.getSettings)!="function")throw new Error("MediaStreamTrack.getSettings not supported");let{width:e,height:r}=t.getSettings();if(e===void 0||r===void 0)throw new Error(`invalid video track dimensions: [ ${e} x ${r} ]`);return new Il(e,r)}function y9(t){if(!uP(t))throw new Error("MediaStreamTrack.getCapabilities not supported");let e=t.getCapabilities(),{width:r,height:o}=e;if(r===void 0||o===void 0)throw new Error("invalid video track capability dimensions");let i=r.max,s=o.max;if(i===void 0||s===void 0)throw new Error(`invalid video track maximum dimensions [ ${i} x ${s} ]`);return new Il(i,s)}function C9(t){let e=Object.entries(t);if(e.length<1)return{};let r={};for(let[o,i]of e)Dl(i)&&(r[o]=new Il(i.width,i.height));return r}function pP(t){var r;let e=(r=t.orientation)==null?void 0:r.type;if(typeof e=="string")return/^portrait/.test(e.toLowerCase())}var MN=new Il(1920,1080),S9=new Il(1280,720),hP=new Il(600,600);function Fp(t,e){return`${t}_${e}`}function ao(t,e){return`${t}/${e}`}function du(t,e){return`${t}/${e}`}function Iy(t,e){return`${t}_${e}`}function Ry(t){let{courseId:e,drawer:r,desktop:o,editor:i,screen:s,submissionBoxOpen:a,submissionAnswer:l,submissionNumber:c,materialBoxOpen:d,timelineOpen:u,timelineEntry:p,preferenceOpen:h}=t;return{courseId:e,drawer:r,desktop:o,editor:i,screen:s,submissionBoxOpen:a,submissionAnswer:l,submissionNumber:c,materialBoxOpen:d,timelineOpen:u,timelineEntry:p,preferenceOpen:h}}function x9(t){return`app.loilonote:preferences:${t}`}function NN(t,e){return`${t}:${e?"photo":"video"}`}var Oue=2,zue=30;function BN(t){return{width:t==="eraser"?zue:Oue,activeColor:1,colors:(r=>r==="highlighter"?{1:Pt("#FFFF00FF"),2:Pt("#FF6CC0FF"),3:Pt("#37F091FF")}:r==="eraser"?{1:Pt("#FFFFFFFF"),2:Pt("#FFFFFFFF"),3:Pt("#FFFFFFFF")}:{1:Pt("#131313FF"),2:Pt("#E53935FF"),3:Pt("#004CBAFF")})(t),activeRuler:!1}}function w9(){return{activeTool:"pen",lastTool:"pen",activePen:"pencil",prefs:{eraser:BN("eraser"),highlighter:BN("highlighter"),pen:BN("pen")}}}function Uue(){return{audioDeviceId:null,videoDeviceId:null,qrVideoDeviceId:null,mode:"photo",resolutions:{}}}function Hue(){return{enableSharedNote:!1,enableWebGlEngine:!1}}function T9(t){var o;let e={invertMouseWheel:!1,mouseWheelMultiplier:1,trackpadPinchZoomMultiplier:1,cardDrawToolPrefs:w9(),documentDrawToolPrefs:w9(),cameraPrefs:Uue(),experimentalFeatures:Hue(),materialBoxSortOrder:{key:"updateDate",direction:"descending"},noteListSortOrder:{key:"updatedAt",direction:"descending"},recordingDeviceId:"default"};if(!globalThis.localStorage)return e;let r=localStorage.getItem(x9(t.userInfo.user_id));if(r){let i=JSON.parse(r),s=(o=i==null?void 0:i.cameraPrefs)==null?void 0:o.resolutions;return s&&(i.cameraPrefs.resolutions=C9(s)),zx(e,i)}else return e}function D9(t,e){!globalThis.localStorage||localStorage.setItem(x9(t),JSON.stringify(e))}function k9(t){let e=ky(t);return yt.subscribe(e.reduce),e}function fP(t,e){return r=>{let o=e==null?void 0:e.users.byId[r.author_id],i=e==null?void 0:e.userStatuses.byKey[du(t,r.author_id)];return o||(o={id:r.author_id,username:r.author_name,display_name:r.author_name,sort_key:null,first_name:"",last_name:"",lang:"",is_teacher:r.author_is_teacher}),{user:o,attendantStatus:i==null?void 0:i.status,submissionAnswer:r}}}var P9="bySubmissionDate";function E9(t){return t.sort((e,r)=>{var o,i,s;return(s=(i=(o=Fy(r.is_teacher,e.is_teacher))!=null?o:Zg(e.sort_key,r.sort_key))!=null?i:Jg(e.username,r.username))!=null?s:Qg(e.id,r.id)})}function Yx(t){return t.sort((e,r)=>{var o,i,s;return(s=(i=(o=Fy(e.is_teacher,r.is_teacher))!=null?o:Zg(e.sort_key,r.sort_key))!=null?i:Jg(e.username,r.username))!=null?s:Qg(e.id,r.id)})}function mP({users:t,orderType:e,hideAuthor:r,topSelectedId:o}){return o?jue(t,o):r?Wue(t):e==="byUpdatedDate"?Vue(t):e==="byAuthorName"?$ue(t):Gue(t)}function Gue(t){return t.sort((e,r)=>{var o,i,s,a,l,c;return(c=(l=(a=(s=(i=(o=LN(e.submissionAnswer,r.submissionAnswer))!=null?o:Fy(e.user.is_teacher,r.user.is_teacher))!=null?i:ON(e.submissionAnswer,r.submissionAnswer))!=null?s:zN(e.attendantStatus,r.attendantStatus))!=null?a:Zg(e.user.sort_key,r.user.sort_key))!=null?l:Jg(e.user.username,r.user.username))!=null?c:Qg(e.user.id,r.user.id)})}function Vue(t){return t.sort((e,r)=>{var o,i,s,a,l,c;return(c=(l=(a=(s=(i=(o=LN(e.submissionAnswer,r.submissionAnswer))!=null?o:Fy(e.user.is_teacher,r.user.is_teacher))!=null?i:ON(r.submissionAnswer,e.submissionAnswer))!=null?s:zN(e.attendantStatus,r.attendantStatus))!=null?a:Zg(e.user.sort_key,r.user.sort_key))!=null?l:Jg(e.user.username,r.user.username))!=null?c:Qg(e.user.id,r.user.id)})}function $ue(t){return t.sort((e,r)=>{var o,i,s;return(s=(i=(o=Fy(e.user.is_teacher,r.user.is_teacher))!=null?o:Zg(e.user.sort_key,r.user.sort_key))!=null?i:Jg(e.user.username,r.user.username))!=null?s:Qg(e.user.id,r.user.id)})}function Wue(t){return t.sort((e,r)=>{var o,i,s,a,l;return(l=(a=(s=(i=(o=LN(e.submissionAnswer,r.submissionAnswer))!=null?o:ON(e.submissionAnswer,r.submissionAnswer))!=null?i:zN(e.attendantStatus,r.attendantStatus))!=null?s:Zg(e.user.sort_key,r.user.sort_key))!=null?a:Jg(e.user.username,r.user.username))!=null?l:Qg(e.user.id,r.user.id)})}function jue(t,e){return t.sort((r,o)=>{var i,s,a,l;return(l=(a=(s=(i=Kue(r.user.id,o.user.id,e))!=null?i:Fy(r.user.is_teacher,o.user.is_teacher))!=null?s:Zg(r.user.sort_key,o.user.sort_key))!=null?a:Jg(r.user.username,o.user.username))!=null?l:Qg(r.user.id,o.user.id)})}function LN(t,e){return t!==void 0&&e===void 0?-1:e!==void 0&&t===void 0?1:null}function ON(t,e){return t!==void 0&&e!==void 0?t.timestamp.localeCompare(e.timestamp):t!==void 0?-1:e!==void 0?1:null}function Qg(t,e){return t!==void 0&&e!==void 0?t<e?-1:1:t!==void 0?-1:e!==void 0?1:0}function Jg(t,e){return t!=null&&e!=null?t.localeCompare(e):t!=null?-1:e!=null?1:null}function Zg(t,e){if(t!=null&&e!=null){let r=t.toUpperCase(),o=e.toUpperCase();return r.localeCompare(o)}return t!=null?-1:e!=null?1:null}function zN(t,e){return t!=="good"&&e==="good"?1:t==="good"&&e!=="good"?-1:null}function Fy(t,e){return!t&&e?-1:t&&!e?1:null}function Kue(t,e,r){return r===void 0?null:t===r?-1:e===r?1:null}function My(t,e,r){return t.author_id===r.user_id?!0:Xx({submission:e,userInfo:r})}function gP(t){return t.reveal_answer===Bi.YesAfterDeadline&&t.expiry?new Date(t.expiry)<new Date:t.reveal_answer===Bi.Yes}function Xx(t){let{submission:e,userInfo:r}=t;return r.is_teacher?!0:gP(e)}function vP(t){let{targetIds:e,currentIds:r,submissionAnswers:o,submissionNumber:i}=t,s=e.filter(l=>!r.includes(l));if(s.length<=0)return e;let a=nn(s.map(l=>{var u;let c=o[l].author_id,d=(u=r.map(p=>o[p]).find(p=>p.submission_number===i&&p.author_id===c))==null?void 0:u.id;return[l,d]}));for(let l of s){let c=e.indexOf(l),d=a[l];d?e[c]=d:e.splice(c,1)}return e}var Qx=t=>typeof t=="object"&&(xi(t)||Jx(t)),_9=t=>typeof t=="object"&&(Qx(t)||Mp(t)),xi=t=>typeof t=="object"&&t.action==="screen_sharing"&&t.type==="fullscreen",Jx=t=>typeof t=="object"&&t.action==="screen_sharing"&&t.type==="comparison",A9=t=>typeof t=="object"&&t.action==="screen_sharing"&&t.type==="ready",Mp=t=>typeof t=="object"&&t.action==="screen_sharing"&&t.type==="end";function UN(t){let e={};for(let o of t)for(let i of o.courses){let s=`${i.user_group_id}:${i.user_group_name}`;(e[s]||(e[s]=[])).push({subject_id:o.subject_id,subject_name:o.subject_name,course_id:i.course_id,timestamp:i.timestamp})}let r=[];for(let o in e){let i=o.split(":"),s=parseInt(i[0]),a=i[1],l=e[o];r.push({user_group_id:s,user_group_name:a,courses:l})}return r}function bP(t){let e=[];for(let{user_group_id:r,user_group_name:o,courses:i}of t)for(let{subject_id:s,subject_name:a,course_id:l}of i)e.push({subject_id:s,subject_name:a,course_id:l,user_group_name:o,user_group_id:r});return e}function Ny(t){return que(t).filter(e=>e.length>0).sort((e,r)=>e[0].user_group_name.localeCompare(r[0].user_group_name))}function que(t){let e=new Map;for(let r of t){let o=e.get(r.user_group_id);o||(o=[],e.set(r.user_group_id,o)),o.push(r)}return[...e.values()]}function Ut(t){return t?t.display_name?t.display_name:`${t.last_name} ${t.first_name}`.trim():""}function Qi(t,e){return{id:e,name:Ut(t.users.byId[e])}}function Ji(t,e,r){let{selfStudy:o}=r!=null?r:De.get().strings;if(!e)return;if(e==="self-study")return o;let i=t.courses.byId[e];if(i)return i.subject_name;let s=t.courseAttributes.byId[e];if(!!s)return s.name}function Np({store:t,courseId:e,noteId:r,name:o,strings:i}){var c;let s=i!=null?i:De.get().strings,a=Ji(t,e,s),l=o!=null?o:(c=t.notes.byId[r])==null?void 0:c.name;return a&&l?`${a} ${l}`:s.appName}function yf(t,e){return[fd(t,e),Ji(t,e)].filter(Boolean).join(" ")}function Zx(t,e,r){let o=r!=null?r:De.get().strings,i=Ji(t,e,o);return i?`${i} ${o.timelineTitle}`:o.timelineTitle}function uu({store:t,courseId:e,submissionNumber:r,message:o,strings:i}){var d;let s=i!=null?i:De.get().strings,a=Ji(t,e,s),l=`${e}/${r}`,c=r?o!=null?o:(d=t.submissions.byKey[l])==null?void 0:d.message:void 0;return a&&c?`${a} ${c}`:a?`${a} ${s.submissionBox}`:s.submissionBox}function By(t,e,r){let o=r!=null?r:De.get().strings,i=Ji(t,e,o);return i?`${i} ${o.noteListTitle}`:o.noteListTitle}function I9(t,e){let r=new URL(e),{pathname:o}=r,[i,s,a,l,c]=o.substr(1).split("/");if(i!=="_")return;if(!s)return De.get().strings.courseListTitle;let d=s==="self-study"?s:parseInt(s);if(a)if(l){if(l==="submissions"&&!c)return uu({store:t,courseId:d});if(l==="submissions"){let u=parseInt(c);return uu({store:t,courseId:d,submissionNumber:u})}else return l==="timeline"?Zx(t,d):void 0}else{let u=parseInt(a);return Np({store:t,courseId:d,noteId:u})}else return By(t,d)}function fd(t,e){if(!e||e==="self-study")return;let r=t.courses.byId[e];if(r)return r.user_group_name;let o=t.courseAttributes.byId[e];if(o)return o.user_group_name}function or(t){var e,r;return(r=(e=t.desktop)==null?void 0:e.courseId)!=null?r:t.courseId}function ew(t){let e=Cf(t);return typeof e=="number"&&!t.userInfo.is_teacher&&t.screenLockStates[e]===!0}function md(t){let e=Cf(t);if(typeof e=="number"){let r=t.screenSharingActionNotification[e];return Qx(r)&&r.publisher!==t.userInfo.user_id}else return!1}function HN(t){return Object.keys(t.updatingMessages).length>0}function ev(t){var r;let e=t.userInfo.user_id;return((r=t.screenSharingState)==null?void 0:r.presenter)===e}function Ks(t){return ev(t)||md(t)||ew(t)}function R9(t){let{drawer:e,materialBoxOpen:r,timelineOpen:o,submissionBoxOpen:i}=t;return e.open||r||o||i}function Ly(t){let{userProfileOpen:e,cameraDialogOpen:r,addSheetDialogOpen:o,addTextCardDialogOpen:i,addWebCardDialogOpen:s,addQuizCardDialogOpen:a,preferenceOpen:l,leadingWebCardExtensionDialogState:c}=t;return e||r||o||i||s||a||l||c==="open"||HN(t)}function tv({store:t,courseId:e,includeSelf:r=!1}){var d,u;let o=[],i=[],s=t.userInfo.user_id,a=(d=t.users.byCourseId[e])!=null?d:[],l=(u=t.users.byTemporaryCourseId[e])!=null?u:[],c=[...a,...l];r||(c=c.filter(p=>p!==s));for(let p of c){let h=t.users.byId[p];h.is_teacher?o.push({...h,is_teacher:!0}):i.push({...h,is_teacher:!1})}return o=Yx(o),i=Yx(i),{teachers:o,students:i,allIds:c}}function Oy(t,e){let{submissionAnswer:r,submissionNumber:o,userInfo:i}=t,s=or(t);if(!r)return;let{id:a,orderedAnswers:l}=r;if(!un(s))return;let c=t.screenSharingActionNotification[s];if(xi(c)&&c.presenter===i.user_id)return{preview:a};if(!o)return;let d=ao(s,o),u=t.submissions.byKey[d];if(e.parent===void 0&&Xx({submission:u,userInfo:i})){let h=l.indexOf(a);if(h<0)return;let f=l[h-1],m=l[h+1];return{prev:f,preview:a,next:m}}else return{preview:a}}function Cf(t){var r;let e=(r=t.desktop)==null?void 0:r.courseId;return!e&&(t.submissionBoxOpen||t.timelineOpen)&&(e=t.courseId),e}function GN(t){return typeof t.courseId=="number"&&t.userPreference.experimentalFeatures.enableSharedNote&&t.userInfo.is_teacher}function F9(t){if(t.pushConnectionState==="reconnecting")return{severity:"yellow",count:1};if(t.pushConnectionState==="error")return{severity:"red",count:1}}var oe;(function(ve){ve[ve.createCourse=0]="createCourse",ve[ve.deleteCourse=1]="deleteCourse",ve[ve.joinCourse=2]="joinCourse",ve[ve.leaveSubject=3]="leaveSubject",ve[ve.createNote=4]="createNote",ve[ve.renameNote=5]="renameNote",ve[ve.deleteNote=6]="deleteNote",ve[ve.copyNote=7]="copyNote",ve[ve.createUserGroup=8]="createUserGroup",ve[ve.changeThinkingTool=9]="changeThinkingTool",ve[ve.deleteUserGroup=10]="deleteUserGroup",ve[ve.fetchSubmission=11]="fetchSubmission",ve[ve.deleteSubmission=12]="deleteSubmission",ve[ve.updateSubmission=13]="updateSubmission",ve[ve.createSubmission=14]="createSubmission",ve[ve.pagingSubmissionAnswer=15]="pagingSubmissionAnswer",ve[ve.fetchSubmissionMessages=16]="fetchSubmissionMessages",ve[ve.fetchSubmissionAnswers=17]="fetchSubmissionAnswers",ve[ve.lockScreen=18]="lockScreen",ve[ve.enableTunnel=19]="enableTunnel",ve[ve.openNote=20]="openNote",ve[ve.saveNote=21]="saveNote",ve[ve.exportNote=22]="exportNote",ve[ve.importNote=23]="importNote",ve[ve.checkNoteVersion=24]="checkNoteVersion",ve[ve.buildDocument=25]="buildDocument",ve[ve.exportCard=26]="exportCard",ve[ve.openDocument=27]="openDocument",ve[ve.insertDocument=28]="insertDocument",ve[ve.submitDocument=29]="submitDocument",ve[ve.uploadAsset=30]="uploadAsset",ve[ve.sendDocument=31]="sendDocument",ve[ve.screenSharing=32]="screenSharing",ve[ve.clipboard=33]="clipboard",ve[ve.deviceInit=34]="deviceInit",ve[ve.copyDocuments=35]="copyDocuments",ve[ve.createSubDocumentGroup=36]="createSubDocumentGroup",ve[ve.renameDocument=37]="renameDocument",ve[ve.deleteDocument=38]="deleteDocument",ve[ve.moveDocuments=39]="moveDocuments",ve[ve.uploadDocuments=40]="uploadDocuments",ve[ve.loadFile=41]="loadFile",ve[ve.fetchCourse=42]="fetchCourse",ve[ve.fetchCourseAttributes=43]="fetchCourseAttributes",ve[ve.fetchOtherTeacherCourses=44]="fetchOtherTeacherCourses",ve[ve.fetchNote=45]="fetchNote",ve[ve.fetchClosedYears=46]="fetchClosedYears",ve[ve.fetchThinkingTool=47]="fetchThinkingTool",ve[ve.replyToDocument=48]="replyToDocument",ve[ve.updateDocumentAnnotation=49]="updateDocumentAnnotation",ve[ve.updateDocumentExtension=50]="updateDocumentExtension",ve[ve.updateDocumentAnnotationThumbnail=51]="updateDocumentAnnotationThumbnail",ve[ve.updateDocumentThumbnail=52]="updateDocumentThumbnail",ve[ve.encodeDrawnData=53]="encodeDrawnData",ve[ve.criticalError=54]="criticalError",ve[ve.createWebCard=55]="createWebCard",ve[ve.editNoteMembers=56]="editNoteMembers",ve[ve.fetchNoteMembers=57]="fetchNoteMembers",ve[ve.changePassword=58]="changePassword",ve[ve.underMaintenance=59]="underMaintenance",ve[ve.alert=60]="alert",ve[ve.loadTutorial=61]="loadTutorial",ve[ve.exportDocument=62]="exportDocument",ve[ve.importDocument=63]="importDocument",ve[ve.reuseCard=64]="reuseCard",ve[ve.shareNote=65]="shareNote",ve[ve.noMembersInGroup=66]="noMembersInGroup",ve[ve.prepareForAddCourse=67]="prepareForAddCourse",ve[ve.signedInByOtherBrowser=68]="signedInByOtherBrowser"})(oe||(oe={}));function yP(t,e,r){if(t.length===0)return;let o=0,i=Math.abs(r(t[0],e));for(let s=1;s<t.length;s++){let a=Math.abs(r(t[s],e));i>a&&(o=s,i=a)}return o}function tw(t,e){let r=[...t];for(let o of t)if(e(o)){let i=r.indexOf(o);r.splice(i,1)}return r}function VN(t){return Array.from(new Set(t).values())}function M9(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Gr(t,e){let r=[];for(let o=t;o<t+e;o++)r.push(o);return r}function pu(t){let e=Array();for(let r of t)e=e.concat(r);return e}function Sf(t,e){return pu(t.map(e))}function N9(t,e){$e(e>0&&Number.isInteger(e),"step must be natural");let r=[];for(let o=0;o<t.length;o+=e){let i=Math.min(o+e,t.length),s=t.slice(o,i);for(;s.length<e;)s.push(null);r.push(s)}return r}function B9(t,e){let r=[],o=0;for(let i of t){let s=e(i,o++);s!==void 0&&r.push(s)}return r}function $N(t){let e="/_/";return t?gd(e):e}function rw(t,e){let r=`/_/${t}`;return e?gd(r):r}function zy(t,e,r){let o=`/_/${t}/${e}`;return r?gd(o):o}function CP(t,e,r,o){let i=`/_/${t}/${e}/${r}`;return o?gd(i):i}function WN(t,e){let r=`/_/${t}/submissions`;return e?gd(r):r}function nw(t,e,r){let o=`/_/${t}/submissions/${e}`;return r?gd(o):o}function ow({courseId:t,submissionNumber:e,pageIndex:r,answerId:o,zoomCardId:i,twa:s}){let a;return i?a=`/_/${t}/submissions/${e}/${o}/${r}/${i}`:a=`/_/${t}/submissions/${e}/${o}/${r}`,s?gd(a):a}function jN(t,e){let r=`/_/${t}/timeline`;return e?gd(r):r}function KN(t,e,r){let o=`/_/${t}/timeline/${e}`;return r?gd(o):o}function gd(t){let e=new URL(t,location.href),r=new URLSearchParams(e.search);return r.has("twa")?t:(r.append("twa","true"),`${e.pathname}?${r.toString()}`)}function SP(t,e){return()=>({noteStates:{[t]:{$set:e}}})}function xP(t,e){return()=>({noteFiles:{$set:{[t]:e}}})}function L9(t,{commands:e,file:r}){return()=>({sharedNoteFiles:{$set:{[t]:{commands:e,file:r}}}})}function O9(t,e){return()=>({users:{byId:{$merge:nn(e.map(r=>[r.id,r]))}},sharedNoteMembers:{[t]:{$set:e.map(r=>r.id)}}})}function Uy({noteId:t,adds:e=[],dels:r=[]}){return({sharedNoteMembers:o})=>{var s;let i=new Set((s=o[t])!=null?s:[]);for(let a of e)i.add(a);for(let a of r)i.delete(a);return{sharedNoteMembers:{[t]:{$set:Array.from(i)}}}}}function z9(t,e){return()=>({sharedNoteSessions:{byId:{$merge:nn(e.map(r=>[r.id,r]))},byNoteId:{[t]:{$set:e.map(r=>r.id)}}}})}function U9(t,e){return r=>{var i;let o=(i=r.sharedNoteSessions.byNoteId[t])!=null?i:[];return{sharedNoteSessions:{byId:{[e.id]:{$set:e}},byNoteId:{[t]:{$set:[...o,e.id]}}}}}}function H9(t,e){return({sharedNoteSessions:r})=>{var i;let o=(i=r.byNoteId[t])!=null?i:[];return o=o.filter(s=>s!==e),{sharedNoteSessions:{byId:{$unset:[e]},byNoteId:{[t]:{$set:o}}}}}}function G9(t){return({pushConnectionState:e})=>{if(e!==t)return{pushConnectionState:{$set:t}}}}function wP(t){return()=>({sharedNoteConnectionState:{$set:t}})}function TP(t,e){return()=>({noteNeedsReload:{[t]:{$set:e}}})}function Bp(t,e){return()=>({noteStates:{[t]:{$merge:e}}})}function Hy(t,e){return r=>{if(!!r.notes.byId[t])return{notes:{byId:{[t]:{$merge:e}}}}}}function Gy({courseId:t,noteId:e,pushState:r,name:o}){return i=>{let s={courseId:{$set:t},drawer:{open:{$set:!1}}};if(r){let a=zy(t,e,i.twa),l=Np({store:i,courseId:t,noteId:e,name:o});s.pushState={$set:mo({url:a,type:"desktop",title:l})}}return s}}function V9(t,e){return()=>({users:{byId:{[t]:{$set:e}}}})}function DP(t,e){let r=[...e.teachers.map(o=>({is_teacher:!0,...o})),...e.students.map(o=>({is_teacher:!1,...o}))];return()=>({courseAttributes:{byId:{[t]:{$set:e}}},users:{byId:nn(r.map(o=>[o.id,{$set:o}])),byCourseId:{[t]:{$set:r.map(o=>o.id)}}},screenLockStates:{[t]:{$set:e.is_screen_locked}},tunnelStates:{[t]:{$set:e.is_tunnel_enabled}}})}function $9(t,e){let r=e.map(o=>({...o,is_teacher:!0}));return()=>({users:{byId:nn(r.map(o=>[o.id,{$set:o}])),byTemporaryCourseId:{[t]:{$set:r.map(o=>o.id)}}}})}function Vy(t){return()=>({checkingScreenLockState:{$set:t}})}function W9(t){return()=>({pageFocused:{$set:t}})}function zo(t){return()=>({teacherToolVisible:{$set:t}})}function hu(t){return()=>({teacherToolOpen:{$set:t}})}function qN(t){return()=>({userStatusListOpen:{$set:t}})}function fu(t){return()=>({drawer:{open:{$set:t}}})}function mu(...t){return()=>({drawer:{viewStack:{$push:t}}})}function j9(){return t=>{$e(t.desktop!=null,"desktop must be defined");let{noteId:e,courseId:r}=t.desktop,o=zy(r,e,t.twa),i=Np({store:t,courseId:r,noteId:e}),s=mo({url:o,type:"desktop",title:i});return{courseId:{$set:r},drawer:{open:{$set:!1}},pushState:{$set:s}}}}function rv(t){return e=>{if(!!e.desktop&&e.desktop.hoverCardId!==t)return{desktop:{hoverCardId:{$set:t}}}}}function kP(t){return e=>{if(!!e.desktop){if(t&&e.desktop.heldCard){if(t.head===e.desktop.heldCard.head&&M9(t.all,e.desktop.heldCard.all))return}else if(!t&&!e.desktop.heldCard)return;return{desktop:{heldCard:{$set:t}}}}}}function cr(t){return e=>{if(!(!e.desktop||e.desktop.popoverOpen===t))return{desktop:{popoverOpen:{$set:t}}}}}function Uo(t){return e=>{if(!!e.desktop)return{desktop:{focusingCard:{$set:t}}}}}function lo(){return t=>{var e;if(!!((e=t.desktop)==null?void 0:e.focusingCard))return{desktop:{focusingCard:{$set:void 0},popoverOpen:{$set:!1}}}}}function Pr(t){return e=>{if(!(!e.desktop||e.desktop.positionPopoverOpen===t))return{desktop:{positionPopoverOpen:{$set:t}}}}}function nv(t){return()=>({fixedUIHit:{$set:t}})}function K9({cardId:t,animate:e,updatePushState:r=!0}){return o=>{$e(o.desktop!=null,"desktop must be defined");let{courseId:i,noteId:s}=o.desktop,a=o.editor?[...o.editor]:[],l=CP(i,s,t,o.twa),c=Np({store:o,courseId:i,noteId:s});return{editor:{$set:[...a,{cardId:t,animate:e}]},highlightedCardId:{$set:void 0},pushState:{$set:r?mo({url:l,type:"editor",title:c}):o.pushState}}}}function $y({deleted:t,updateEditorState:e=!0}){return r=>{$e(r.desktop!=null,"desktop must be defined"),$e(r.editor!=null,"editor must be defined");let{courseId:o,noteId:i}=r.desktop,s=Np({store:r,courseId:o,noteId:i}),a=[...r.editor],l=a.pop(),c=t||l==null?void 0:l.cardId;if(a.length===0){let d=zy(o,i,r.twa);return{editor:{$set:void 0},highlightedCardId:{$set:c},pushState:{$set:mo({url:d,type:"desktop",title:s})}}}else{let d=a[a.length-1],u=CP(o,i,d.cardId,r.twa);return{editor:{$set:a},highlightedCardId:{$set:c},pushState:{$set:e?mo({url:u,type:"editor",title:s}):r.pushState}}}}}function xf(t,e=!0){return r=>{let{desktop:o,editor:i}=r;$e(o!=null,"desktop must be defined"),$e(i!=null,"editor must be defined");let s=i.length-1,{courseId:a,noteId:l}=o,c=CP(a,l,t,r.twa),d=Np({store:r,courseId:a,noteId:l});return{editor:{[s]:{$set:{cardId:t,animate:!1}}},pushState:{$set:e?mo({url:c,type:"editor",title:d}):void 0}}}}function YN(t){return()=>({screen:{$set:{isMobile:_g(t),...t}}})}function Wy(t){return e=>{let r=rw(t,e.twa),o=By(e,t);return{courseId:{$set:t},pushState:{$set:mo({url:r,title:o,type:"note-list"})}}}}function ov(){return t=>{let e=[...t.drawer.viewStack];if(e.length<=1)throw new ci("cannot pop.");e.pop();let r=e[e.length-1];if(r.type==="courseList"){let{courseListTitle:o}=De.get().strings;return{courseId:{$set:void 0},drawer:{viewStack:{$set:e}},pushState:{$set:mo({url:$N(t.twa),title:o,type:"course-list"})}}}else{if(r.type==="closedYearList"||r.type==="unassignedCourseList"||r.type==="closedCourseList"||r.type==="closedUnassignedCourseList")return{drawer:{viewStack:{$set:e}}};throw new Error(`invalid viewType: ${r.type}`)}}}function PP(t,e){return({notes:r})=>{var o,i;if(typeof t=="number"){let a=((o=r.byCourseId[t])!=null?o:[]).indexOf(e);return a<0?void 0:{notes:{byId:{$unset:[e]},byCourseId:{[t]:{$splice:[[a,1]]}}}}}else{let a=((i=r.selfStudyIds)!=null?i:[]).indexOf(e);return a<0?void 0:{notes:{byId:{$unset:[e]},selfStudyIds:{$splice:[[a,1]]}}}}}}function vd(){return t=>{var i;let e,r=or(t);if(r){let s=By(t,r);e=mo({url:rw(r,t.twa),title:s,type:"note-list"})}else{let{courseListTitle:s}=De.get().strings;e=mo({url:$N(t.twa),title:s,type:"course-list"})}let o={desktop:{$set:void 0},editor:{$set:void 0},drawer:{open:{$set:!0}},pushState:{$set:e}};if(t.desktop&&t.desktop.isShared){let{noteId:s}=t.desktop,a=(i=t.sharedNoteSessions.byNoteId[s])!=null?i:[];o.sharedNoteSessions={byId:{$unset:a},byNoteId:{[s]:{$set:[]}}}}return o}}function Fe(t,e){return({updatingMessageOrder:r})=>{let o,i=r.indexOf(t);return typeof e=="string"?(o={updatingMessages:{[t]:{$set:e}}},i<0&&(o.updatingMessageOrder={$push:[t]})):(o={updatingMessages:{$unset:[t]}},i>-1&&(o.updatingMessageOrder={$splice:[[i,1]]})),o}}function XN(t){return e=>{if(e.restartLoadingDialogOpen!=t)return{restartLoadingDialogOpen:{$set:t}}}}function Pn(t){return()=>({toastMessage:{$set:t}})}function Pe(t,e){return()=>e?{alerts:{[t]:{$set:{...e,color:"error"}}}}:{alerts:{$unset:[t]}}}function Ps(t,e){return()=>e?{alerts:{[t]:{$set:e}}}:{alerts:{$unset:[t]}}}function Es(t){return e=>{let r=e.submissionNumber;$e(r!=null,"submissionNumber must be defined");let o=xn(or(e)),i=uu({store:e,courseId:o,submissionNumber:r});if(t){let s=ow({courseId:o,submissionNumber:r,answerId:t.id,pageIndex:t.pageIndex,zoomCardId:t.zoomCardId,twa:e.twa});return{submissionAnswer:{$set:t},submissionAnswerPageIndexStates:{[t.id]:{$set:t.pageIndex}},pushState:{$set:mo({url:s,type:"submission-preview",title:i})}}}else return{submissionAnswer:{$set:t},pushState:{$set:mo({url:nw(o,r,e.twa),type:"submission-box",title:i})}}}}function Lp(t,e){return r=>{let o=xn(or(r)),i=uu({store:r,courseId:o,submissionNumber:t,message:e});return t?{submissionNumber:{$set:t},pushState:{$set:mo({url:nw(o,t,r.twa),type:"submission-box",title:i})}}:{submissionNumber:{$set:t},pushState:{$set:mo({url:WN(o,r.twa),type:"submission-list",title:i})}}}}function q9(t,e,r){return o=>{let i=uu({store:o,courseId:t,submissionNumber:e,message:r});return{submissionBoxOpen:{$set:!0},submissionNumber:{$set:e},pushState:{$set:mo({url:nw(t,e,o.twa),type:"submission-box",title:i})}}}}function iw(t){return e=>{if(t===e.submissionNumber)return{submissionNumber:{$set:void 0}}}}function jy(t,e=!0){return r=>{let o=xn(or(r)),i=r.desktop;if(t){let s=uu({store:r,courseId:o}),a={submissionBoxOpen:{$set:t}};return e&&(a.pushState={$set:mo({url:WN(o,r.twa),type:"submission-list",title:s})}),a}else{let s={submissionBoxOpen:{$set:t},submissionNumber:{$set:void 0},submissionAnswer:{$set:void 0},submissionComparisonIds:{$set:void 0}};if(e)if(i){let{noteId:a,isShared:l}=i;s.pushState={$set:mo({url:zy(o,a,r.twa),type:"desktop",title:Np({store:r,courseId:o,noteId:a})})}}else s.pushState={$set:mo({url:rw(o,r.twa),type:"note-list",title:By(r,o)})};return s}}}function Zi(t){return()=>{let e={screenSharingState:{$set:t}};return t||(e.screenSharingForPresenter={$set:!1},e.screenSharingForSelf={$set:!1}),e}}function EP(t){return()=>({screenSharingForSelf:{$set:t}})}function Ky(t){return()=>({screenSharingForPresenter:{$set:t}})}function _P(t,e){return()=>({documentAnnotationLayerUpdateNotification:{[t]:{$set:e}}})}function AP(t,e){return()=>({documentExtensionLayerUpdateNotification:{[t]:{$set:e}}})}function qy(t,e){return r=>{if(r.submissionAnswers.byId[t])return{submissionAnswers:{byId:{[t]:{reply_status:{$merge:e}}}}}}}function wf(t,e){return()=>({screenLockStates:{[t]:{$set:e}}})}function Op(t,e){return()=>e?{screenSharingActionNotification:{[t]:{$set:e}}}:{screenSharingActionNotification:{$unset:[t]}}}function Yy(t,e){return()=>({screenSharingReadyStates:{[t]:{$set:e}}})}function Y9(){return()=>({screenSharingReadyStates:{$set:{}}})}function sw(t,e){return()=>({tunnelStates:{[t]:{$set:e}}})}function X9(t,e){return()=>({userStatuses:{byKey:{[du(t,e.user_id)]:{$set:{is_web_browsing:e.is_web_browsing,browsing_web_page:e.browsing_web_page,id:e.user_id,status:e.status}}}}})}function IP(t,e){return()=>({userStatuses:{byKey:{$merge:nn(e.map(r=>[du(t,r.id),r]))},byCourseId:{[t]:{$set:e.map(r=>du(t,r.id))}}}})}function aw(t,e,r){return o=>{var a;let i=ao(t,e),s=(a=o.submissions.byCourseId[t])!=null?a:[];return{submissions:{byKey:{[i]:{$set:r}},byCourseId:{[t]:{$set:VN(s.concat(i))}},updatedAt:{$set:Date.now()}}}}}function RP(t,e,r){let o=ao(t,e);return i=>{if(!!i.submissions.byKey[o])return{submissions:{byKey:{[o]:{$merge:r}},updatedAt:{$set:Date.now()}}}}}function lw(t,e){let r=ao(t,e);return o=>{var s;let i=(s=o.submissions.byCourseId[t])!=null?s:[];return i=tw(i,a=>a===r),i=VN(i),{submissions:{byKey:{$unset:[r]},byCourseId:{[t]:{$set:i}},updatedAt:{$set:Date.now()}}}}}function Xy(t){return()=>({desktop:{$set:t}})}function zp(t,e){return({notes:r})=>{var s;let o=e.map(a=>a.id),i=nn(e.map(a=>[a.id,a]));if(t==="self-study"){let a=r.selfStudyIds.concat(o);return{notes:{byId:{$merge:i},selfStudyIds:{$set:a}}}}else{let a=((s=r.byCourseId[t])!=null?s:[]).concat(o);return{notes:{byId:{$merge:i},byCourseId:{[t]:{$set:a}}}}}}}function Qy(t){return()=>({drawnAssetUploadTrigger:{$set:t}})}function QN(t){return()=>({assetThumbUploadTrigger:{$set:t}})}function Up({state:t,cardIdList:e,type:r}){return({assetUploadStates:o})=>({assetUploadStates:nn(e.map(i=>{var a;let s=(a=o[i])!=null?a:{};return s[r]=t,[i,{$set:s}]}))})}function Jy(t,e){return()=>({assetUploadStates:{...nn(t.map(r=>[r,{$unset:[e]}]))}})}function Zy({cardIdList:t,type:e,state:r}){return({assetThumbnailUploadStates:o})=>({assetThumbnailUploadStates:{...nn(t.map(i=>{var a;let s=(a=o[i])!=null?a:{};return s[e]=r,[i,{$set:s}]}))}})}function Q9({cardIdList:t,type:e}){return()=>({assetThumbnailUploadStates:{...nn(t.map(r=>[r,{$unset:[e]}]))}})}function FP(t){return({savingAssetsCount:e})=>({savingAssetsCount:{$set:Math.max(0,e+t)}})}function MP(t){return({savingAssetThumbsCount:e})=>({savingAssetThumbsCount:{$set:Math.max(0,e+t)}})}function e0(t,e){return()=>({assetMetadata:{[t]:{$set:e}}})}function JN(t,e){return()=>({assetInfo:{[t]:{$set:e}}})}function sP(t){return()=>({sessionExpired:{$set:!0},alerts:{[oe.criticalError]:{$set:Xk(t)}},updatingMessageOrder:{$set:[]},updatingMessages:{$set:{}}})}function J9(t){return()=>({sessionExpired:{$set:!0},alerts:{$set:{[oe.changePassword]:t}},updatingMessageOrder:{$set:[]},updatingMessages:{$set:{}}})}function Z9(t){return()=>({sessionExpired:{$set:!0},alerts:{$set:{[oe.underMaintenance]:t}},updatingMessageOrder:{$set:[]},updatingMessages:{$set:{}}})}function Hp(t){return()=>({materialBoxOpen:{$set:t}})}function Tf(t){return()=>({cameraDialogOpen:{$set:t}})}function NP(t){return e=>{let r=xn(or(e)),o=e.desktop,i={timelineOpen:{$set:t},timelineEntry:{$set:void 0}},s;if(t)s=mo({url:jN(r,e.twa),title:Zx(e,r),type:"timeline"});else if(o){let{noteId:a}=o;s=mo({title:Np({store:e,courseId:r,noteId:a}),url:zy(r,a,e.twa),type:"desktop"})}else s=mo({url:rw(r,e.twa),title:By(e,r),type:"note-list"});return i.pushState={$set:s},i}}function ZN(t){return e=>{let r=xn(or(e)),o={timelineEntry:{$set:t}},i=Zx(e,r);return t?o.pushState={$set:mo({url:KN(r,t,e.twa),type:"timeline-preview",title:i})}:o.pushState={$set:mo({url:jN(r,e.twa),type:"timeline",title:i})},o}}function eV(t,e){return r=>({timelineOpen:{$set:!0},timelineEntry:{$set:e},pushState:{$set:mo({url:KN(t,e,r.twa),type:"timeline-preview",title:Zx(r,t)})}})}function ui(t,e){return()=>({fetchStates:{[t]:{$set:e}}})}function gu(t){return()=>({submissionComparisonIds:{$set:t}})}function Df(t){return()=>({uploadingDocument:{$set:t}})}function cw(t){return({uploadingMaterialCount:e})=>({uploadingMaterialCount:{$set:Math.max(0,e+t)}})}function iv(t){return()=>({submittingDocument:{$set:t}})}function BP(t){return()=>({submitting:{$set:t}})}function tV(t,e){let r=ao(t,e);return()=>({submissions:{byKey:{[r]:{$merge:{submitted:!0,submit_date:new Date().toISOString()}}}}})}function rV(t){return()=>({sendingTasks:{$push:[t]}})}function LP(t){return e=>{let r=e.sendingTasks.findIndex(o=>o.id===t);if(r!==-1)return{sendingTasks:{$splice:[[r,1]]}}}}function t0(t){return()=>({preferenceOpen:{$set:t}})}function OP(t){return()=>({userPreference:{$set:t}})}function _s(t){return()=>({userPreference:t})}function zP(t){return()=>({passwordDialogOpen:{$set:t}})}function bd({forDocument:t,tool:e,pen:r}){return()=>{let o=t?"documentDrawToolPrefs":"cardDrawToolPrefs",i={activeTool:e};return(e==="pen"||e==="highlighter")&&(i.lastTool=e),r&&(i.activePen=r),{userPreference:{[o]:{$merge:i}}}}}function vu({forDocument:t,tool:e,part:r}){return o=>{let i=t?"documentDrawToolPrefs":"cardDrawToolPrefs",s=e!=null?e:o.userPreference[i].activeTool,a=o.userPreference[i].activePen;return r.activeRuler&&(s==="pen"&&a!=="pencil"&&(a="pencil"),s==="eraser"&&(r.activeRuler=!1)),{userPreference:{[i]:{activePen:{$set:a},prefs:{[s]:{$merge:r}}}}}}}function r0(t){return()=>({sendingDocument:{$set:t}})}function eB(t){return()=>({noteManagerReady:{$set:t}})}function nV(){return t=>({saveNoteTrigger:{$set:t.saveNoteTrigger+1}})}function Co(){return t=>({editorNeedsDisplayTrigger:{$set:t.editorNeedsDisplayTrigger+1}})}function tB(t,e,r=!0){return o=>{let i=o.submissionNumber;$e(i!=null,"submissionNumber must be defined");let s=xn(or(o));return{submissionAnswerPageIndexStates:{[t]:{$set:e}},submissionAnswer:{pageIndex:{$set:e}},pushState:{$set:r?mo({url:ow({courseId:s,submissionNumber:i,answerId:t,pageIndex:e,twa:o.twa}),type:"submission-preview",title:uu({store:o,courseId:s,submissionNumber:i})}):void 0}}}}function dw(t,e=!0){return r=>{let o=r.submissionNumber;$e(o!=null,"submissionNumber must be defined");let i=xn(or(r)),s=r.submissionAnswer;$e(s!=null,"submissionAnswer must be defined");let{id:a,pageIndex:l}=s,c;if(e){let d="submission-preview",u=uu({store:r,courseId:i,submissionNumber:o});c=mo({url:ow({courseId:i,submissionNumber:o,answerId:a,pageIndex:l,zoomCardId:t,twa:r.twa}),type:d,title:u})}return{submissionAnswer:{zoomCardId:{$set:t}},pushState:{$set:c}}}}function oV(t,e){return()=>({submissionAnswerPageIndexStates:{[t]:{$set:e}}})}function rB(t){return()=>({arrivedDocument:{$set:t}})}function iV(){return()=>({arrivedDocument:{$set:void 0}})}function nB(t){return e=>{var r;if(((r=e.arrivedDocument)==null?void 0:r.id)===t)return{arrivedDocument:{$set:void 0}}}}function oB(t,e){return t==="self-study"?()=>({notes:{byId:{$merge:nn(e.map(r=>[r.id,r]))},selfStudyIds:{$set:e.filter(r=>!r.is_deleted).reverse().map(r=>r.id)}}}):()=>({notes:{byId:{$merge:nn(e.map(r=>[r.id,r]))},byCourseId:{[t]:{$set:e.filter(r=>!r.is_deleted).reverse().map(r=>r.id)}}}})}function sV(t,e,r=e.submissions.length){var l;let o=e.submissions.map(c=>ao(t,c.submission_number)),i=nn(e.submissions.map(c=>[ao(t,c.submission_number),c])),s=Math.min(e.submissions.length-1,r-1),a=(l=e.submissions[s])==null?void 0:l.submission_number;return c=>{var p;let d=(p=c.submissions.byCourseId[t])!=null?p:[],u=new Set(d.concat(o));return{submissions:{byKey:{$merge:i},byCourseId:{[t]:{$set:Array.from(u)}},updatedAt:{$set:Date.now()}},submissionsOldest:{byCourseId:{[t]:{$set:e.oldest}}},lastSubmissionId:{byCourseId:{[t]:{$set:a}}}}}}function aV(t,e,r,o){let i=ao(t,e);return s=>{let a={submissionAnswers:{byId:{$merge:nn(o.map(d=>[d.id,d]))},bySubmissionKey:{[i]:{$set:o.map(d=>d.id)}}}},l=uu({store:s,courseId:t,submissionNumber:e}),{submissionAnswer:c}=s;if(c){let d=p=>{let h=s.submissionAnswers.byId[p];return o.find(f=>f.author_id===(h==null?void 0:h.author_id)&&f.submission_number===e)},u=d(c.id);if(u){let p=u.id!==c.id,h=p?0:c.pageIndex,f=p?void 0:c.zoomCardId,m=ow({courseId:t,submissionNumber:u.submission_number,pageIndex:h,answerId:u.id,zoomCardId:f,twa:s.twa}),{orderedAnswers:g,orderType:v}=c,y;if(v==="comparison"){y=[];for(let S of g){let C=d(S);C&&y.push(C.id)}}else{let S=o.map(fP(t,s)),C=!s.userInfo.is_teacher&&r.reveal_answer===Bi.No;y=mP({users:S,orderType:v,hideAuthor:r.hide_author,topSelectedId:C?s.userInfo.user_id:void 0}).filter(x=>!!x.submissionAnswer).map(x=>x.submissionAnswer.id)}return{...a,submissionAnswer:{$set:{id:u.id,pageIndex:h,orderedAnswers:y,orderType:v,zoomCardId:f}},pushState:{$set:mo({url:m,type:"submission-preview",title:l})}}}else{let p=nw(t,e,s.twa);return{...a,submissionAnswer:{$set:void 0},pushState:{$set:mo({url:p,type:"submission-list",title:l})}}}}else return a}}function uw(t){return()=>({pushTokenState:{$set:t}})}function lV(t){return()=>({twa:{$set:t}})}function cV(t){return()=>({newSubmissionDialog:{$set:t}})}function n0(){return()=>({newSubmissionDialog:{$set:void 0}})}function pw(t){return()=>({leadingWebCardExtensionDialogState:{$set:t}})}function hw(){return()=>({drawer:{open:{$set:!1}},fixedUIHit:{$set:void 0},editor:{$set:void 0},preferenceOpen:{$set:!1},devtoolOpen:{$set:!1},submissionNumber:{$set:void 0},submissionAnswer:{$set:void 0},submissionComparisonIds:{$set:void 0},uploadingDocument:{$set:void 0},submittingDocument:{$set:void 0},sendingDocument:{$set:void 0},teacherToolVisible:{$set:!0},materialBoxOpen:{$set:!1},timelineOpen:{$set:!1},timelineEntry:{$set:void 0},submissionBoxOpen:{$set:!1},userProfileOpen:{$set:!1},cameraDialogOpen:{$set:!1},addSheetDialogOpen:{$set:!1},addTextCardDialogOpen:{$set:!1},addWebCardDialogOpen:{$set:!1},addQuizCardDialogOpen:{$set:!1},leadingWebCardExtensionDialogState:{$set:void 0},arrivedDocument:{$set:void 0},userGroupJoinCode:{$set:void 0},highlightedCardId:{$set:void 0}})}var yd=X(he());var vc=X(he());function iB(){return iB=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},iB.apply(this,arguments)}function Yue(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Xue(t,e){if(t==null)return{};var r={},o=Object.keys(t),i,s;for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var sB=new Map,UP=new WeakMap,dV=0;function Que(t){return t?(UP.has(t)||(dV+=1,UP.set(t,dV.toString())),UP.get(t)):"0"}function Jue(t){return Object.keys(t).sort().filter(function(e){return t[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?Que(t.root):t[e])}).toString()}function Zue(t){var e=Jue(t),r=sB.get(e);if(!r){var o=new Map,i,s=new IntersectionObserver(function(a){a.forEach(function(l){var c,d=l.isIntersecting&&i.some(function(u){return l.intersectionRatio>=u});t.trackVisibility&&typeof l.isVisible=="undefined"&&(l.isVisible=d),(c=o.get(l.target))==null||c.forEach(function(u){u(d,l)})})},t);i=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:e,observer:s,elements:o},sB.set(e,r)}return r}function uV(t,e,r){if(r===void 0&&(r={}),!t)return function(){};var o=Zue(r),i=o.id,s=o.observer,a=o.elements,l=a.get(t)||[];return a.has(t)||a.set(t,l),l.push(e),s.observe(t),function(){l.splice(l.indexOf(e),1),l.length===0&&(a.delete(t),s.unobserve(t)),a.size===0&&(s.disconnect(),sB.delete(i))}}function pV(t){return typeof t.children!="function"}var hV=function(t){Yue(e,t);function e(o){var i;return i=t.call(this,o)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(s){i.node&&(i.unobserve(),!s&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=s||null,i.observeNode()},i.handleChange=function(s,a){s&&i.props.triggerOnce&&i.unobserve(),pV(i.props)||i.setState({inView:s,entry:a}),i.props.onChange&&i.props.onChange(s,a)},i.state={inView:!!o.initialInView,entry:void 0},i}var r=e.prototype;return r.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},r.componentWillUnmount=function(){this.unobserve(),this.node=null},r.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,s=i.threshold,a=i.root,l=i.rootMargin,c=i.trackVisibility,d=i.delay;this._unobserveCb=uV(this.node,this.handleChange,{threshold:s,root:a,rootMargin:l,trackVisibility:c,delay:d})}},r.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},r.render=function(){if(!pV(this.props)){var i=this.state,s=i.inView,a=i.entry;return this.props.children({inView:s,entry:a,ref:this.handleNode})}var l=this.props,c=l.children,d=l.as,u=l.tag,p=Xue(l,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return(0,vc.createElement)(d||u||"div",iB({ref:this.handleNode},p),c)},e}(vc.Component);hV.displayName="InView";hV.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function fV(t){var e=t===void 0?{}:t,r=e.threshold,o=e.delay,i=e.trackVisibility,s=e.rootMargin,a=e.root,l=e.triggerOnce,c=e.skip,d=e.initialInView,u=(0,vc.useRef)(),p=(0,vc.useState)({inView:!!d}),h=p[0],f=p[1],m=(0,vc.useCallback)(function(v){u.current!==void 0&&(u.current(),u.current=void 0),!c&&v&&(u.current=uV(v,function(y,S){f({inView:y,entry:S}),S.isIntersecting&&l&&u.current&&(u.current(),u.current=void 0)},{root:a,rootMargin:s,threshold:r,trackVisibility:i,delay:o}))},[Array.isArray(r)?r.toString():r,a,s,l,c,i,o]);(0,vc.useEffect)(function(){!u.current&&h.entry&&!l&&!c&&f({inView:!!d})});var g=[m,h.inView,h.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}var bc=()=>{let[t,e]=(0,yd.useReducer)((r,o)=>r+1,0);return()=>e(t+1)},es=t=>{(0,yd.useEffect)(t,[])},kf=t=>{(0,yd.useEffect)(()=>t,[])},wn=function(t){return(0,yd.useReducer)((e,r)=>({...e,...r}),t)},o0=(t,e)=>{let r=(0,yd.useRef)(!0);(0,yd.useEffect)(()=>{if(r.current){r.current=!1;return}return t()},e)};function i0(t){let[e,r]=(0,yd.useState)(()=>{let o=ky(t);return o.subscribe(i=>r(i)),o});return e}function mV(t){return typeof IntersectionObserver=="undefined"?{ref:()=>{},inView:!0}:fV(t)}function So(){let t;return(e,r)=>(t&&clearTimeout(t),t=setTimeout(e,r),t)}function fw(){let t,e=So();return{set:(i,s)=>(t=e(()=>{i(),t=void 0},s),t),clear:()=>{clearTimeout(t),t=void 0},isSet:()=>t!==void 0}}var Qn=X(he()),OR=X(he());var $Z=X(he()),po=X(he());function HP(t){ge.log("restoreDefaultBackEvent"),window.onpopstate=e=>{let r=I9(t,window.location.href);if(r&&(window.document.title=r),e.state){let o={uploadingDocument:void 0,submittingDocument:void 0,sendingDocument:void 0,materialBoxOpen:!1,preferenceOpen:!1,userProfileOpen:!1,cameraDialogOpen:!1,addTextCardDialogOpen:!1,addSheetDialogOpen:!1,addWebCardDialogOpen:!1},i=e.state;ge.log("popState",i),t.reduce(()=>({$merge:{...i,...o}}))}else throw new Error("empty state on popstate")}}function GP(t,e){let r=Ry(t),{title:o}=window.document,{href:i}=window.location;window.onpopstate=()=>{history.pushState(r,o,i),window.document.title="",window.document.title=o,e==null||e()}}var Cd=X(on());function aB(t,e){return new Date(t).getTime()-new Date(e).getTime()}var As=class extends Date{constructor(e){e?super(e):super()}afterHours(e){return new As(this.getTime()+pr.hour*e)}after(e){return new As(this.getTime()+e)}add(e){this.setTime(this.getTime()+e)}static today(){let e=new As;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}static tomorrow(){let e=As.today();return e.add(1*pr.day),e}isToday(){let e=new Date().toISOString(),r=this.toISOString();return e.slice(0,10)===r.slice(0,10)}isThisYear(){let e=new Date;return this.getFullYear()===e.getFullYear()}toTimelineDate(){let e=De.get().strings;return this.isToday()?(0,Cd.sprintf)(e.timelineDateFmtToday,this.getHours(),this.getMinutes()):this.isThisYear()?(0,Cd.sprintf)(e.timelineDateFmtThisYear,this.getMonth()+1,this.getDate(),this.getHours(),this.getMinutes()):(0,Cd.sprintf)(e.timelineDateFmtPrevYear,this.getFullYear(),this.getMonth()+1,this.getDate())}},Gp=class{constructor(e){this.ms=e}isPast(){return this.ms<0}days(){return Math.floor(this.ms/pr.day)}hours(){return Math.floor(this.ms/pr.hour)}minutes(){return Math.floor(this.ms/pr.min)}seconds(){return Math.floor(this.ms/pr.sec)}toRelativeString(){let e=this.seconds(),r=this.minutes(),o=this.hours(),i=this.days(),s=De.get().strings;if(0<i)return(0,Cd.sprintf)(s.daysRemaining,i);if(0<o)return(0,Cd.sprintf)(s.hoursRemaining,o);if(0<r){let a="%d";return(0,Cd.sprintf)((0,Cd.sprintf)(s.minRemaining,a),r)}else{let a="%02d";return(0,Cd.sprintf)((0,Cd.sprintf)(s.secRemaining,a),e)}}};function s0(t){let e=Math.floor(t/60),r=Math.floor(t-60*e);return(0,Cd.sprintf)("%02d:%02d",e,r)}var pr;(function(s){s[s.ms=1]="ms",s[s.sec=1e3]="sec",s[s.min=6e4]="min",s[s.hour=36e5]="hour",s[s.day=864e5]="day"})(pr||(pr={}));var gV=class{constructor(){this.authorizations=new Map}getEndpoint(e){let r=ue.initialState.userInfo.app_endpoints.find(o=>o.app_id===e);if(r==null?void 0:r.endpoint)return`${r.endpoint.match("loilo")?"https":"http"}://${r.endpoint}`}mustGetEndpoint(e){let r=this.getEndpoint(e);return $e(r!=null,"app_endpoints must be defined: app_id="+e),r}async mustIssue(e){let r=this.authorizations.get(e);if(r){let o=new Date().getTime();if(new Date(r.expired_at).getTime()>o)return r}return r=await ue.lnsClient.authenticateAppToken(e),this.authorizations.set(e,r),r}async issue(e){try{return this.mustIssue(e)}catch(r){if(yt.catchError(r))return;throw r}}},Zn=new gV;var Vp={x:90,y:70},sv=class{constructor(e){this.nextLeftTop=Re();this.currentMaxHeight=0;this.card=e,this.reset()}get scale(){return Ho(this.card.size)}get mx(){return Vp.x*this.scale}get my(){return Vp.y*this.scale}get right(){return this.card.bounds.x+this.card.bounds.width}add(e,r){let o=Xt(e,this.scale),i=nt(this.nextLeftTop.x,this.nextLeftTop.y,o.width,o.height);return r&&(i.x+=(Oo*2+Xi)*this.scale),this.updateNextPosition(i,o),i}set(e,r){let o=Xt(r,this.scale),i=nt(e.x-o.width/2,e.y-o.height/2,o.width,o.height);return this.updateNextPosition(i,o),i}reset(){let{x:e,y:r}=this.card.bounds;this.nextLeftTop=Re(e+this.mx,r+this.my),this.currentMaxHeight=0}updateNextPosition(e,r){let{width:o,height:i}=r;this.currentMaxHeight=Math.max(this.currentMaxHeight,i),this.nextLeftTop={x:e.x+e.width+this.mx,y:e.y},this.nextLeftTop.x+o>this.right&&(this.nextLeftTop={x:this.card.bounds.x+this.mx,y:this.nextLeftTop.y+this.currentMaxHeight+this.my},this.currentMaxHeight=0)}};var ft=class{constructor(e=1,r=0,o=0,i=1,s=0,a=0){this.a=e,this.b=r,this.c=o,this.d=i,this.e=s,this.f=a}clone(){return new ft(this.a,this.b,this.c,this.d,this.e,this.f)}invert(){let e=this.a,r=this.b,o=this.c,i=this.d,s=this.e,a=this.f,l=e*i-r*o,c=i/l,d=-r/l,u=-o/l,p=e/l,h=(o*a-i*s)/l,f=-(e*a-r*s)/l;return new ft(c,d,u,p,h,f)}applied(e){if(xy(e)&&Dl(e)){let r=[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],o=0,i=0,s=0,a=0,l=!1,c=!1,d=!1,u=!1;for(let g=0;g<r.length;g++){let[v,y]=r[g],{x:S,y:C}=this.cross(v,y);(!l||S<o)&&(l=!0,o=S),(!c||S>i)&&(c=!0,i=S),(!d||C<s)&&(d=!0,s=C),(!u||C>a)&&(u=!0,a=C)}let p=o,h=s,f=i-o,m=a-s;return{x:p,y:h,width:f,height:m}}else{if(xy(e))return this.cross(e.x,e.y);if(Dl(e)){let r=e.width*this.a+e.height*this.c,o=e.height*this.d+e.width*this.b;return{width:r,height:o}}else throw Error("invalid argument")}}set(e,r,o,i,s,a){return this.a=e,this.b=r,this.c=o,this.d=i,this.e=s,this.f=a,this}append(e,r,o,i,s,a){let{a:l,b:c,c:d,d:u,e:p,f:h}=this,[f,m,g,v,y,S]=[e,r,o,i,s,a];return this.a=l*f+d*m,this.c=l*g+d*v,this.e=l*y+d*S+p,this.b=c*f+u*m,this.d=c*g+u*v,this.f=c*y+u*S+h,this}prepend(e,r,o,i,s,a){let{a:l,b:c,c:d,d:u,e:p,f:h}=this,[f,m,g,v,y,S]=[e,r,o,i,s,a];return this.a=f*l+g*c,this.c=f*d+g*u,this.e=f*p+g*h+y,this.b=m*l+v*c,this.d=m*d+v*u,this.f=m*p+v*h+S,this}appendMatrix(e){return this.append(e.a,e.b,e.c,e.d,e.e,e.f)}prependMatrix(e){return this.prepend(e.a,e.b,e.c,e.d,e.e,e.f)}scale(e,r=e){return this.prepend(e,0,0,r,0,0)}rotate(e){let r=Math.cos(e),o=Math.sin(e);return this.prepend(r,o,-o,r,0,0)}translate(e,r){return this.prepend(1,0,0,1,e,r)}cross(e,r){return{x:this.a*e+this.c*r+this.e,y:this.b*e+this.d*r+this.f}}identity(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}get tx(){return this.e}set tx(e){this.e=e}get ty(){return this.f}set ty(e){this.f=e}get isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.e===0&&this.f===0}};function pi(t,e,r,o){let i=1;return t>=r&&e>=o?i=Math.min(t/r,e/o):t>=r&&e<o?i=e/o:t<r&&e>=o?i=t/r:i=Math.min(e/o,t/r),i}function Cn(t,e){return pi(t.width,t.height,e.width,e.height)}function bu(t,e){let r=e,o=pi(r.width,r.height,t.width,t.height),i=t.width*o,s=t.height*o,a=r.x+(r.width-i)*.5,l=r.y+(r.height-s)*.5;return{x:a,y:l,width:i,height:s}}function yc(t,e){if(typeof e!="number"&&(e=e.width*e.height),!isFinite(t.width)||isNaN(t.width)||t.width<=0||!isFinite(t.height)||isNaN(t.height)||t.height<=0||e<=0||!isFinite(e)||isNaN(e))return;let r=t.width*t.height;return Math.sqrt(e/r)}function ts(t,e){let r=yc(t,e);if(r===void 0)throw new Error(`size is invalid: [${t.width}, ${t.height}]`);return r}function xr(t,e){let r=yc(t,e);return r===void 0?{width:0,height:0}:{width:t.width*r,height:t.height*r}}function $P({bounds:t,canvas:e,margins:r}){let o=pi(e.width,e.height,t.width+r.left+r.right,t.height+r.top+r.bottom),[i,s]=[t.x+t.width/2,t.y+t.height/2];i*=o,s*=o;let a=e.width/2-i,l=e.height/2-s;return new ft(o,0,0,o,a,l)}var mw=class{constructor(e){this.params=e;this.positions=[];this.hasBaseItem=!1;this.gap=au(Vp,e.scale),this.handleWith=(Oo+Xi)*e.scale;let r=e.firstItem,o=r instanceof wi?r.size:r;this.maxHeight=o.height,this.offsetX=o.width;let i=Re(o.width*.5,o.height*.5);this.positions.push(i),r instanceof wi&&e.baseItem===r?(this.hasBaseItem=!0,this._translation=Re(r.position.x-i.x,0)):this._translation=e.initPosition}get translation(){return this._translation}append(e){return e instanceof wi?this.appendCard(e):this.appendSize(e)}map(){let e=this.params.offsetY+this.maxHeight*.5;return this.hasBaseItem&&this.params.baseItem&&(this._translation.y=this.params.baseItem.position.y-e),this.positions.map(r=>Re(r.x,e))}nextRow(e){if(this.positions.length<1)throw new Error("not found arranged targets");return new mw({firstItem:e,initPosition:this._translation,scale:this.params.scale,offsetY:this.params.offsetY+this.maxHeight+this.gap.y,maxX:this.params.maxX,baseItem:this.params.baseItem})}appendCard(e){let r=e.foldHandleVisible()?this.handleWith:0,o=this.offsetX+this.gap.x+r+e.size.width;if(this.positions.length>=mw.maxRow&&o>this.params.maxX)return!1;let i=Re(this.offsetX+this.gap.x+r+e.size.width*.5,this.params.offsetY+e.size.height*.5);return this.positions.push(i),this.offsetX=o,this.maxHeight=Math.max(this.maxHeight,e.size.height),this.params.baseItem&&this.params.baseItem===e&&(this.hasBaseItem=!0,this._translation=Re(e.position.x-i.x,0)),!0}appendSize(e){if(this.positions.length>=mw.maxRow)return!1;let r=Re(this.offsetX+this.gap.x+e.width*.5,this.params.offsetY+e.height*.5);return this.positions.push(r),this.offsetX=this.offsetX+this.gap.x+e.width,this.maxHeight=Math.max(this.maxHeight,e.height),!0}},lB=mw;lB.maxRow=4;function a0(t,e,r=1,o,i){if(e.length<1)throw new Error("arrange item array length is zero");let s=e[0];if(e[0]instanceof wi&&o===void 0)throw new Error("need maxX when arrange cards");let a=new lB({firstItem:s,initPosition:t,scale:r,offsetY:0,maxX:o,baseItem:i}),l=[];for(let c=1;c<e.length;c++)a.append(e[c])||(l=l.concat(a.map()),a=a.nextRow(e[c]));return l=l.concat(a.map()),l.map(c=>Re(c.x+a.translation.x,c.y+a.translation.y))}var vV=(t,e)=>{let r=t.headGroup(),o=r.parent?r.parent.bounds.x+r.parent.bounds.width:e.x+e.width,i=t.bounds.x+t.bounds.width;return Math.max(0,Math.min(o,o-i))},epe=t=>!(t.hasPrevCardOrGroup||t.tail().hasNextCardOrGroup);function tpe(t,e,r){let o=[...t.iterator()],i=vV(t,e),s=Re(t.bounds.x,t.bounds.y),a=a0(s,o,r,i);for(let l=0;l<o.length;l++){let c=a[l];We(av({cardId:o[l].id,x:c.x,y:c.y}))}We(l0(t.id,!1))}function bV({card:t,visibleRect:e}){let r=qo(t);if(epe(t)&&t.isFolded){tpe(t,e,r);return}let o=[];for(let c of t.connectedGroupHeadCards())c.isFolded?o.push(c):o=o.concat([...c.iterator()]);if(o.length<1)return;let i=Re(o[0].bounds.x,o[0].bounds.y),s=vV(t,e),l=a0(i,o,r,s,t);if(!l.every((c,d)=>vf(c,o[d].position)))for(let c=0;c<o.length;c++){let d=o[c],{x:u,y:p}=l[c];if(d.isFolded){let h=u-d.position.x,f=p-d.position.y;We(c0({topOfGroup:d.id,topX:u,topY:p,deltaX:h,deltaY:f,animationFrom:d.position}))}else We(av({cardId:d.id,x:u,y:p,animationFrom:d.position}))}}var WP=Cc();function EV(t){return t.type==="connectorMoved"||t.type==="connectorDismissed"||t.type==="assetUploadStateChanged"||t.type==="assetThumbnailUploadStateChanged"||t.type==="pointerMoved"?!1:!((t.type==="cardMoved"||t.type==="groupMoved"||t.type==="cardSizesChanged"||t.type==="cardMarginsChanged")&&!t.committed)}function _V({author:t,position:e,startPosition:r,url:o,contentSize:i,duration:s=.5}){let a=lv({author:t,url:o,position:e,contentSize:i}),l=r?[{cardId:a.id,translation:{from:r,to:e,duration:s}}]:[];return{type:"cardsInserted",cards:[a],treeStates:[{id:a.id,children:[]}],transitions:l}}function AV({user:t,position:e,startPosition:r,quizContentBase:o,duration:i=.5}){let s=t.user_id,a=wB({author:{id:s,name:Ut(t)},quizContentBase:o,position:e});return{type:"cardsInserted",cards:[a],transitions:[{cardId:a.id,translation:{from:r,to:e,duration:i}}]}}function IV({user:t,position:e,startPosition:r,contentBase:o,duration:i=.5}){let s=t.user_id,a=TB({author:{id:s,name:Ut(t)},contentBase:o,position:e});return{type:"cardsInserted",cards:[a],transitions:[{cardId:a.id,translation:{from:r,to:e,duration:i}}]}}function jP(t){let{mtx:e,ev:r,author:o,firedCard:i}=t,s=window.devicePixelRatio,a=e.invert().cross(r.position.x*s,r.position.y*s),l=Ho(i.size),c=Xt(Gt,l),d=r.color.toARGBHex();r.backcolor.isTransparent()&&(d=DB(i));let u=Sd({position:a,color:d,backcolor:r.backcolor.toARGBHex(),size:c,author:o,text:r.text});return RV(u,i),{type:"cardsInserted",cards:[u],groupStates:[],connections:[],treeStates:[{id:i.id,children:[{id:u.id,children:[]}]}],transitions:[]}}function KP({creator:t,author:e,position:r,url:o,contentSize:i,isTransition:s}){let a=lv({author:e,url:o,contentSize:i}),l=t?Ho(t.size):1,c=Xt(a.metadata.layout_size,l),d=t.bounds;a.metadata.layout_size=c,a.metadata.position={left:r.x,top:r.y};let u=s?[{cardId:a.id,translation:{from:Re(r.x,d.y-c.height),to:Re(r.x,r.y),duration:.5}}]:[];return{type:"cardsInserted",cards:[a],treeStates:[{id:t.id,children:[{id:a.id,children:[]}]}],transitions:u}}function qP({creator:t,author:e,position:r,asset:o,contentSize:i}){let s=Wp({asset:o,contentSize:i,author:e,position:r}),a=t?Ho(t.size):1,l=Xt(s.metadata.layout_size,a),c=t.bounds;return s.metadata.layout_size=l,s.metadata.position={left:r.x,top:r.y},{type:"cardsInserted",cards:[s],treeStates:[{id:t.id,children:[{id:s.id,children:[]}]}],transitions:[{cardId:s.id,translation:{from:Re(r.x,c.y-l.height),to:Re(r.x,r.y),duration:.5}}]}}function d0({creator:t,type:e,position:r,file:o,user:i,ignoreTransition:s=!1}){var v;let a=e==="inside"?t:t==null?void 0:t.parent,l=a?Ho(a.size):1,c=o.toCards({user:i,position:r,parent:a}),d=[];for(let y=0;y<c.length-1;y++){let[S,C]=[c[y],c[y+1]];d.push({from:S.id,to:C.id,as_different_group:!1})}let[u]=c,p=c.map(y=>({id:y.id,children:[]})),h=t.bounds,f=[],m=[];u.type==="pdf"&&c.length>1&&m.push({top_of_group:u.id,is_folded:!0});let g=[];if(s||(u.type==="pdf"&&c.length>1?g=[{cardId:u.id,translation:{from:Re(u.metadata.position.left,h.y-u.metadata.layout_size.height),to:Re(u.metadata.position.left,u.metadata.position.top),duration:.5}}]:g=c.map(y=>({cardId:y.id,translation:{from:Re(y.metadata.position.left,h.y-y.metadata.layout_size.height),to:Re(y.metadata.position.left,y.metadata.position.top),duration:.5}}))),e==="inside")return{type:"cardsInserted",cards:c,connections:d,groupStates:m,treeStates:[{id:t.id,children:p}],transitions:g};{let y=Vp.x*l,S=u.metadata.layout_size,C=t.bounds.width/2+S.width/2+y,b=(Oo*2+Xi)*l;c.length>1&&t.next!==t.nextGroup&&(C+=b);let x={left:t.position.x+C,top:t.position.y},[w,k]=[x.left-u.metadata.position.left,x.top-u.metadata.position.top];for(let V of c){let{left:W,top:me}=V.metadata.position;V.metadata.position={left:W+w,top:me+k}}t.parent&&f.push({id:t.parent.id,children:c.map(V=>({id:V.id,children:[]}))});let T=t.next||t.nextGroup,A=u.type==="pdf"&&c.length>1;if(!t.pinned){if(d.push({from:t.id,to:u.id,as_different_group:A}),T){let V=c[c.length-1].id;d.push({from:V,to:T.id,as_different_group:A||T===t.nextGroup})}t.isFolded&&A&&(t.isHead&&m.push({top_of_group:t.id,is_folded:!1}),((v=t.next)==null?void 0:v.isTail)&&m.push({top_of_group:t.next.id,is_folded:!1}))}let[E,F]=[t.position.x-u.metadata.position.left,t.position.y-u.metadata.position.top],z=c.map(V=>({cardId:V.id,translation:{from:{x:V.metadata.position.left+E,y:V.metadata.position.top+F},to:{x:V.metadata.position.left,y:V.metadata.position.top},duration:.5}})),L=C;c.length>1&&t.next!==t.nextGroup&&(L+=b);let R=yB({insertedCardSize:u.metadata.layout_size,after:t,spaceH:L,duration:0}),N=[...z,...R];return{type:"cardsInserted",cards:c,treeStates:f,groupStates:m,connections:d,transitions:N}}}function Pf({creator:t,card:e,type:r,position:o,ignoreTransition:i=!1}){let s=e,a=r==="inside"?t:t.parent,l=a?Ho(a.size):1;if(e.gadgets.title&&Fn(e.content.backcolor).isTransparent()&&(e.gadgets.title.forecolor=DB(a)),r==="inside"){let c=Xt(s.metadata.layout_size,l),d=t.bounds;s.metadata.layout_size=c,s.metadata.position={left:o.x,top:o.y},RV(s,t);let u=[];return i||(u=[{cardId:s.id,translation:{from:Re(o.x,d.y-c.height),to:Re(o.x,o.y),duration:.5}}]),{type:"cardsInserted",cards:[s],treeStates:[{id:t.id,children:[{id:s.id,children:[]}]}],transitions:u}}else{let c=Vp.x*l,d=Xt(s.metadata.layout_size,l),u=t.bounds.width/2+d.width/2+c,p=d.width+c,h={left:t.position.x+u,top:t.position.y};s.metadata.layout_size=d,s.metadata.position=h;let f=[],m=[];t.parent&&f.push({id:t.parent.id,children:[{id:s.id,children:[]}]});let g=t.next||t.nextGroup;t.pinned||(m.push({from:t.id,to:s.id,as_different_group:!1}),g&&m.push({from:s.id,to:g.id,as_different_group:g===t.nextGroup}));let v=yB({insertedCardSize:s.metadata.layout_size,after:t,spaceH:p,duration:0}),y=[{cardId:s.id,translation:{from:t.position,to:{x:h.left,y:h.top},duration:.5}},...v];return{type:"cardsInserted",cards:[s],treeStates:f,connections:m,transitions:y}}}function yB(t){var u;let{insertedCardSize:e,after:r,spaceH:o,duration:i}=t,s=(u=r.next)!=null?u:r.nextGroup;if(!s)return[];let a=[],l=Re(r.position.x+o,r.position.y),c;r.isFolded?s===r.nextGroup?c=[]:c=s.toTailIterator():c=s.toTailIteratorOverGroup();let d=e.height;for(let p of c)if(!(Math.abs(p.position.y-l.y)>p.size.height/2+d/2))for(let f of p.familyIterator()){let m={x:f.position.x+o,y:f.position.y};a.push({cardId:f.id,translation:{from:f.position,to:m,duration:i}})}return a}function RV(t,e){if(!t.gadgets.title)return;let r=Ho(e.size),i=$p({card:e,clipLocalFontSize:15})/r;t.gadgets.title.font_size=i}function FV({position:t,author:e,textColor:r,backColor:o,size:i,hoverId:s,startPosition:a,duration:l=.5,text:c}){let d=Sd({position:t,color:r,backcolor:o,size:i,author:e,text:c}),u=s?[{id:s,children:[{id:d.id,children:[]}]}]:[],p=a?[{cardId:d.id,translation:{from:a,to:t,duration:l}}]:[];return{type:"cardsInserted",cards:[d],treeStates:u,connections:[],groupStates:[],transitions:p}}function u0({position:t,author:e,contentSize:r,asset:o,startPosition:i,duration:s=.5}){let a=Wp({asset:o,contentSize:r,author:e,position:t});return i?{type:"cardsInserted",cards:[a],transitions:[{cardId:a.id,translation:{from:i,to:t,duration:s}}]}:{type:"cardsInserted",cards:[a],groupStates:[],connections:[],treeStates:[],transitions:[]}}function p0({author:t,asset:e,position:r,pageSizeList:o,startPosition:i,cardArea:s,duration:a=.5,usage:l="compatible"}){let c=[],d=o.map(m=>xr(m,s)),u=Re(r.x-d[0].width*.5,r.y-d[0].height*.5),p=a0(u,d);for(let m=0;m<o.length;m++)c.push(Rl({author:t,asset:e,pageIndex:m,pageSize:Ze(o[m]),layoutSize:d[m],position:p[m],usage:l}));let h=[],f=[];if(c.length>1){f=[{top_of_group:c[0].id,is_folded:!0}];for(let m=0;m<c.length-1;m++)h.push({from:c[m].id,to:c[m+1].id,as_different_group:!1})}return i?{type:"cardsInserted",cards:c,groupStates:f,connections:h,treeStates:[],transitions:[{cardId:c[0].id,translation:{from:i,to:p[0],duration:a}}]}:{type:"cardsInserted",cards:c,groupStates:f,connections:h,treeStates:[],transitions:[]}}function Ef({position:t,author:e,asset:r,type:o,avDuration:i,contentSize:s,startPosition:a,duration:l=.5}){let c=o==="audio"?cv({asset:r,duration:i,author:e,position:t,contentSize:s}):jp({asset:r,duration:i,author:e,position:t,contentSize:s}),d=[];return a&&d.push({cardId:c.id,translation:{from:a,to:t,duration:l}}),{type:"cardsInserted",cards:[c],groupStates:[],connections:[],treeStates:[],transitions:d}}function dpe(t){let e=new Map,{card:r,idMapper:o,overGroup:i,isRootCard:s}=t,a=[],l=[],c=[],d=[],u=r.copyGroup({srcIdMap:e,overGroup:i,idMapper:o}),p=[],h=[];for(let S of u.iteratorOverGroup()){for(let C of S.familyIterator({withoutSelf:!1}))l.push(C.toJSON());a.push(...S.connections({withoutSelf:!1})),c.push(...S.groupStates()),d.push(S.treeState()),p.push(...S.favoriteItems()),h.push(...S.pinnedItems({withoutSelf:!0}))}let f=XV(r,i),m=qo(r),g=upe(f,m);f.rect&&r.parent&&(g=ppe(g,f,r.parent.bounds));for(let S of l){let C=S.metadata.position,b=C.left+g.x,x=C.top+g.y;S.metadata.position={left:b,top:x}}let v=[];r.parent?v.push({id:r.parent.id,children:d}):v.push(...d);let y=[];for(let S of i?r.iteratorOverGroup():r.iterator()){let C=e.get(S.id),b=S.position,x=l.find(A=>A.id===C),{left:w,top:k}=x.metadata.position,T={cardId:C,translation:{from:b,to:{x:w,y:k},duration:.5}};y.push(T)}return{srcCardId:r.id,type:"cardsCopied",grouped:!0,activateTextEditor:!1,isRootCard:s,cards:l,connections:a,groupStates:c,treeStates:v,transitions:y,favoriteItems:p,pinnedItems:h}}function upe(t,e){let r,o=t.rect;return o?o.width<o.height?r=new er(o.width,0):r=new er(0,o.height):r=new er,new er(Vp).scaled(e).added(r)}function ppe(t,e,r){let o=e.rect;if(!o)return t;let{x:i,y:s}=t;return i=Math.min(r.x+r.width,o.x+o.width+i)-(o.x+o.width),s=Math.min(r.y+r.height,o.y+o.height+s)-(o.y+o.height),i=Math.max(r.x,o.x+i)-o.x,s=Math.max(r.y,o.y+s)-o.y,new er(i,s)}var MV=40,hpe=30;function fpe(t){let{card:e,idMapper:r,isRootCard:o}=t,i=new Map,s=e.copy(i,r);return s.pinned=!1,YP({src:e,copied:s,isRootCard:o,activateTextEditor:!1})}function NV({card:t,target:e,isRootCard:r,idMapper:o=()=>WP()}){return e!=="single"?dpe({card:t,overGroup:e==="all",idMapper:o,isRootCard:r}):fpe({card:t,idMapper:o,isRootCard:r})}function BV(t,e,r=()=>WP()){let o=new Map,i=t.copy(o,r),s=xr(di,t.size),a=Rl({author:t.author,asset:e,position:Re(t.position),pageIndex:0,pageSize:di,layoutSize:s,usage:"thinking_tool"});a.id=r(t.id);let l=Ys(a),c=Cn(l.size,t.size),d=new ft;d.translate(-l.position.x,-l.position.y),d.scale(c),d.translate(l.position.x,l.position.y);for(let u of i.familyIterator()){let p=d.applied(u.position),h=Xt(u.size,c);u.position=p,u.size=h}for(let u of i.children)l.addChild(u);return l.favorite=t.favorite,YP({src:t,copied:l,isRootCard:!0,activateTextEditor:!1})}function LV(t,e,r){let o=gpe({src:e,author:t,idMapper:()=>WP()});return YP({src:e,copied:o,isRootCard:r,activateTextEditor:!0})}async function OV({store:t,card:e,isRootCard:r,idMapper:o=()=>WP()}){let i;return e instanceof zr?i=await QV({store:t,card:e,idMapper:o}):i=await JV({store:t,card:e,idMapper:o}),YP({src:e,copied:i,isRootCard:r,activateTextEditor:!1})}function YP(t){let{src:e,isRootCard:r,copied:o,activateTextEditor:i}=t,s=o.connections({withoutSelf:!0});r&&!e.pinned&&s.push({from:e.id,to:o.id,as_different_group:!1});let a=e.next||e.nextGroup;r&&a&&s.push({from:o.id,to:a.id,as_different_group:a===e.nextGroup});let l,c,d;if(e.parent){l=[{id:e.parent.id,children:[o.treeState()]}];let p=Ze(MV,hpe),h=mpe(o,{parent:e.parent,besideWith:e,baseGap:p});c=h.x-e.position.x,d=h.y-e.position.y}else l=[o.treeState()],c=(e.size.width+o.size.width)/2+MV,d=0;for(let p of o.familyIterator()){let{x:h,y:f}=p.position;p.position={x:h+c,y:f+d}}let u=[{cardId:o.id,translation:{from:e.position,to:o.position,duration:.5}}];if(r){let p=yB({insertedCardSize:o.size,after:e,spaceH:c,duration:0});u.splice(u.length,0,...p)}return{srcCardId:e.id,type:"cardsCopied",grouped:!1,activateTextEditor:i,isRootCard:r,cards:[...o.familyIterator()].map(p=>p.toJSON()),connections:s,groupStates:o.groupStates(),treeStates:l,transitions:u,favoriteItems:o.favoriteItems(),pinnedItems:o.pinnedItems()}}var CB=({head:t,destPosition:e,startPosition:r})=>{let o=[],i=[],s=[],a=[],l=[],c=[];for(let g of t.iteratorOverGroup()){for(let v of g.familyIterator())o.push(v.toJSON());i.push(...g.groupStates()),s.push(...g.connections({withoutSelf:!1})),a.push(g.treeState()),l.push(...g.favoriteItems()),c.push(...g.pinnedItems())}let d=new Map;for(let g of o)d.set(g.id,g);let u=[...t.connectedGroupHeadCards()];for(let g of u){let v=i.find(y=>y.top_of_group===g.id);g.groupMemberCount()<2||(v?v.is_folded=!0:i.push({top_of_group:g.id,is_folded:!0}))}let p=qo(t),h=Vp.y*p,f=Re(e.x-t.size.width/2,e.y-t.size.height/2);for(let g of u){let v=d.get(g.id),y=f.x+v.metadata.layout_size.width/2,S=f.y+v.metadata.layout_size.height/2;v.metadata.position.left=y,v.metadata.position.top=S,f.y+=h+v.metadata.layout_size.height;for(let C of g.iterator())for(let b of C.familyIterator()){let x=d.get(b.id),w=b.position.x-g.position.x,k=b.position.y-g.position.y;x.metadata.position.left=y+w,x.metadata.position.top=S+k}}let m=[];if(r){let g=e.x-r.x,v=e.y-r.y;m=u.map(y=>{let S=d.get(y.id),C=Re(S.metadata.position.left,S.metadata.position.top),b=Re(C.x-g,C.y-v);return{cardId:S.id,translation:{from:b,to:C,duration:.5}}})}return{cards:o,groupStates:i,connections:s,treeStates:a,transitions:m,type:"cardsInserted",favoriteItems:l,pinnedItems:c}},Ma=(t,e)=>({type:"cardDeleted",cardId:t,toCardId:e}),Sn=(t,e)=>({type:"cardEdited",cardId:t,replacement:e}),av=({cardId:t,x:e,y:r,committed:o=!0,animationFrom:i})=>({type:"cardMoved",cardId:t,position:{x:e,y:r},committed:o,transition:i?[{cardId:t,translation:{from:i,to:{x:e,y:r},duration:.3}}]:void 0}),zV=(t,e,r,o=!1)=>({type:"connectorMoved",fromId:t,position:{x:e,y:r},disconnected:o}),XP=t=>({type:"connectorDismissed",fromId:t}),UV=(t,e,r=!1)=>({type:"connectorConnected",fromId:t,toId:e,asDifferentGroup:r}),HV=t=>({type:"connectorDisconnected",fromId:t}),QP=(t,e,r)=>{let o,i,s=t.tail().nextGroup===r;return e.isFolded?o={from:t.id,to:e.id,as_different_group:!0}:o={from:t.id,to:e.id,as_different_group:t.isFolded},e.isFolded?i={from:e.tail().id,to:r.id,as_different_group:!0}:i={from:e.id,to:r.id,as_different_group:s},{type:"connectorInserted",conn1:o,conn2:i}},l0=(t,e=!1)=>({type:"groupStateChanged",topOfGroup:t,isFolded:e}),c0=({topOfGroup:t,topX:e,topY:r,deltaX:o,deltaY:i,committed:s=!0,animationFrom:a})=>({type:"groupMoved",delta:{x:o,y:i},topPosition:{x:e,y:r},topOfGroup:t,committed:s,transition:a?[{cardId:t,translation:{from:a,to:{x:e,y:r},duration:.3}}]:void 0}),yu=t=>({type:"groupDeleted",topOfGroup:t}),vw=t=>{let{cardId:e,parentId:r,grouped:o,resize:i}=t;return{type:"treeStateChanged",cardId:e,parentId:r,grouped:o,resize:i}},JP=({point:t,card:e,grouped:r,corner:o,committed:i,startBounds:s,zoom:a})=>{let{y:l,height:c,x:d,width:u}=e.bounds,p=l+c,h=d+u,f=qo(e),{width:m,height:g}=jV({card:e,startBounds:s,scaleToParent:f,zoom:a}),{width:v,height:y}=qV({card:e,corner:o,startBounds:s}),S,C,b,x;if(o==="bbLeftTop")b=ht(p-t.y,g,y),x=ht(h-t.x,m,v),S="right",C="bottom";else if(o==="bbRightTop")b=ht(p-t.y,g,y),x=ht(t.x-d,m,v),S="left",C="bottom";else if(o==="bbRightBottom")b=ht(t.y-l,g,y),x=ht(t.x-d,m,v),S="left",C="top";else if(o==="bbLeftBottom")b=ht(t.y-l,g,y),x=ht(h-t.x,m,v),S="right",C="top";else throw new Error("invalid corner: "+o);let w=VV({vPivot:C,hPivot:S,h:b,w:x,card:e,grouped:r});return{type:"cardSizesChanged",firedCardId:e.id,changes:w,committed:i}};function GV({card:t,grouped:e,size:r,duration:o}){let i=VV({vPivot:"top",hPivot:"left",grouped:e,card:t,h:r.height,w:r.width,duration:o});return{type:"cardSizesChanged",firedCardId:t.id,changes:i,committed:!0}}function VV({vPivot:t,hPivot:e,grouped:r,card:o,h:i,w:s,duration:a}){let{width:l,height:c}=o.bounds,d=Math.min(s/l,i/c),u=[],p=r?Array.from(o.iterator()):[o],h=Re();e==="left"?h.x=o.position.x-o.size.width/2:h.x=o.position.x+o.size.width/2,t==="top"?h.y=o.position.y-o.size.height/2:h.y=o.position.y+o.size.height/2;for(let f of p)for(let m of f.familyIterator()){let g=h.x-m.position.x,v=h.y-m.position.y,y=g*d+m.position.x,S=v*d+m.position.y,C=h.x-y,b=h.y-S,x;a&&(x={from:{position:m.position,size:m.size},duration:a}),u.push({cardId:m.id,layoutSize:{width:m.size.width*d,height:m.size.height*d},position:{x:m.position.x+C,y:m.position.y+b},transition:x})}return u}var ZP=({point:t,card:e,corner:r,committed:o,startBounds:i,startContentWithMargins:s,zoom:a})=>{let{x:l,y:c,width:d,height:u}=e.bounds,p=l+d,h=c+u,f=e.position.x,m=e.position.y,g=qo(e),{width:v,height:y}=KV({card:e,corner:r,startBounds:i,scaleToParent:g,zoom:a}),{width:S,height:C}=YV({card:e,corner:r,startBounds:i}),b,x=d,w=u;if(r==="bbLeftMiddle")x=ht(p-t.x,v,S),b={x:p,y:m};else if(r==="bbRightMiddle")x=ht(t.x-l,v,S),b={x:l,y:m};else if(r==="bbCenterTop")w=ht(h-t.y,y,C),b={x:f,y:h};else if(r==="bbCenterBottom")w=ht(t.y-c,y,C),b={x:f,y:c};else throw new Error("invalid corner:"+r);let k=pc(x,e.size.width,1),T=pc(w,e.size.height,1),A=Math.min(s.width,vN.width),E=Math.min(s.height,vN.height),F=SB(e,r,k,T),z=e.contentSize.width+F.left+F.right,L=e.contentSize.height+F.top+F.bottom;if(z<A){let I=A/e.contentSizeWithMargins.width;x=e.size.width*I,k=pc(x,e.size.width,1),F=SB(e,r,k,T)}else if(L<E){let I=E/e.contentSizeWithMargins.height;w=e.size.height*I,T=pc(w,e.size.height,1),F=SB(e,r,k,T)}let R=b.x-e.position.x,N=b.y-e.position.y,V=R*k+e.position.x,W=N*T+e.position.y,me=b.x-V,ie=b.y-W,Z={x:e.position.x+me,y:e.position.y+ie},P=(e.contentSize.width+F.left+F.right)/e.contentSizeWithMargins.width,_=(e.contentSize.height+F.top+F.bottom)/e.contentSizeWithMargins.height;return{type:"cardMarginsChanged",cardId:e.id,position:Z,layoutSize:{width:e.size.width*P,height:e.size.height*_},margins:F,committed:o}};function SB(t,e,r,o){let i=t.content.margins,s=t.contentSize,a=t.contentSizeWithMargins,l={...t.content.margins};return e==="bbLeftMiddle"?l.left=a.width*r-i.right-s.width:e==="bbRightMiddle"?l.right=a.width*r-i.left-s.width:e==="bbCenterTop"?l.top=a.height*o-i.bottom-s.height:e==="bbCenterBottom"&&(l.bottom=a.height*o-i.top-s.height),l}function qs(t,e){return{type:"pinStateChanged",cardId:t,pinned:e}}function $V(t,e){return{type:"favoriteStateChanged",cardId:t,favorite:e}}function mpe(t,e){let{parent:r,besideWith:o,baseGap:i}=e,s=Ho(r.size),a=i.width*s,l=i.height*s,c=Re(o.bounds.x+o.bounds.width+a+t.bounds.width/2,o.bounds.y+o.bounds.height/2),d=r.bounds.x,u=r.bounds.x+r.bounds.width,p=r.bounds.y,h=r.bounds.y+r.bounds.height;return c.x+t.bounds.width/2>u&&(c=Re(d+a+t.bounds.width/2,o.bounds.y+o.bounds.height+l+t.bounds.height/2),c.y+t.bounds.height/2>h&&(c=Re(c.x,p+t.bounds.height/2+l))),c}function gpe(t){let{src:e,author:r,idMapper:o}=t,i=JSON.stringify(e.toJSON()),{id:s,metadata:a,...l}=JSON.parse(i);r&&(a.author=r);let c=o(s),d=Ys({id:c,metadata:a,...l});return d.gadgets.title&&(d.gadgets.title.text="",d.gadgets.title.attributes=[],d.gadgets.title.attribute_ranges=[]),d.gadgets.drawn=void 0,d.gadgets.annotations=void 0,d.gadgets.naration=void 0,d.gadgets.bgm=void 0,d}var xB=(t,e,r)=>({type:"pointerMoved",pointerType:"draw",cardId:t,user:{id:e.user_id,name:Ut(e)},point:{x:r.x,y:r.y}}),eE=(t,e,r)=>({type:"pointerMoved",pointerType:"text",cardId:t,user:{id:e.user_id,name:Ut(e)},caretRect:r}),WV=(t,e,r)=>({type:"pointerMoved",pointerType:"connector",cardId:t,user:{id:e.user_id,name:Ut(e)},point:{x:r.x,y:r.y}}),_f=(t,e)=>({type:"pointerMoved",pointerType:"card",cardId:t,user:{id:e.user_id,name:Ut(e)}});function tE(t){let{userInfo:e}=t.getStore();return{shouldHandleCardEvent(r){if(t.getStore().screenSharingState){let{type:i,target:s}=r;return s==="card"&&["down","up"].includes(i)}return!0},onConnectorDismissed(r){t.getStore().screenSharingState||We(XP(r.id))},onCardClicked(r,o){ZV(t,r)},onCardFullscreenButtonClicked(r){t.getStore().screenSharingState||ZV(t,r)},onCardDeleted(r){t.getStore().screenSharingState||We(Ma(r.id))},onCardHeld(r,o){let i=t.getStore();i.screenSharingState||(r?o?i.reduce(kP({head:r.id,all:Array.from(r.memberAndChildrenIterator()).map(s=>s.id)})):i.reduce(kP({head:r.id,all:Array.from(r.familyIterator()).map(s=>s.id)})):i.reduce(kP(void 0),rv(void 0)))},onCardMoved(r,o,i){t.getStore().screenSharingState||(We(av({cardId:r.id,x:o.x,y:o.y,committed:i})),We(_f(r.id,e)))},onContentMarginsChanged(r){t.getStore().screenSharingState||(We(r),We(_f(r.cardId,e)))},onCardSizesChanged(r){t.getStore().screenSharingState||(We(r),We(_f(r.firedCardId,e)))},onConnectorInserted(r,o,i){t.getStore().screenSharingState||We(QP(r,o,i))},onConnectorConnected(r,o,i){t.getStore().screenSharingState||We(UV(r.id,o.id,i))},onConnectorDisconnected(r){t.getStore().screenSharingState||We(HV(r.id))},onConnectorMoved(r,o,i){t.getStore().screenSharingState||(We(zV(r.id,o.x,o.y,i)),We(WV(r.id,e,o)))},onGroupDeleted(r){t.getStore().screenSharingState||We(yu(r.id))},onGroupMoved(r,{pos:o,delta:i},s){t.getStore().screenSharingState||(We(c0({topOfGroup:r.id,topX:o.x,topY:o.y,deltaX:i.x,deltaY:i.y,committed:s})),We(_f(r.id,e)))},onGroupStateChanged(r,o){t.getStore().screenSharingState||(We(l0(r.id,o)),We(_f(r.id,e)))},treeStateChanged(r,o,i,s){t.getStore().screenSharingState||We(vw({cardId:r.id,parentId:o!=null?o:null,grouped:i,resize:s}))},onHoverCard(r){let o=t.getStore();o.screenSharingState||o.reduce(rv(r==null?void 0:r.id))},onCardLoadingStateChanged(r,o){},onCardInsertionCompleted(r,o){},onShowBoundingBox(r,o){t.getStore().reduce(Uo({id:r.id,pinned:r.pinned,favorite:r.favorite,canPin:r.canPin(),canRotate:r.canRotate(),canAlign:r.canAlign(),bounds:o}),Pr(void 0),cr(!0))},onDismissBoundingBox(){t.getStore().reduce(cr(!1),lo())}}}var Oi={shouldHandleCardEvent(){return!1},onCardClicked(t,e){},onCardFullscreenButtonClicked(t){},onCardDeleted(t){},onCardHeld(t,e){},onCardMoved(t,e,r){},onContentMarginsChanged(t){},onCardSizesChanged(t){},onConnectorInserted(t,e,r){},onConnectorConnected(t,e,r){},onConnectorDisconnected(t){},onConnectorDismissed(t){},onConnectorMoved(t,e,r){},onGroupDeleted(t){},onGroupMoved(t,e,r){},onGroupStateChanged(t,e){},treeStateChanged(t,e,r,o){},onHoverCard(t){},onCardLoadingStateChanged(t,e){},onCardInsertionCompleted(t,e){},onShowBoundingBox(){},onDismissBoundingBox(){}};function ZV(t,e){let r=t.getStore(),o;r.editor?o=e.id:o=e.rootParent().id;let i=!r.screenSharingState;r.reduce(K9({cardId:o,animate:!0,updatePushState:i}))}var rE=Symbol("None"),xd=class{constructor(e=""){this.name=e;this.value=rE;this._state=null;this.waiters=[]}get(){if(this.value!==rE)return{value:this.value}}loadedAtLeastOnce(){return this.value!==rE}get state(){return this._state}set(e){this.value=e,this._state="done"}async fetch(e){this._state="fetching";try{let r=await e();this.value=r,this._state="done",this.waiters.forEach(o=>o.resolve({value:r})),this.waiters=[]}catch(r){let o;r instanceof Error?o=r:o=new Error(`${r}`),this._state=o,this.waiters.forEach(i=>i.resolve(void 0)),this.waiters=[]}return this.get()}async wait(){if(this.value!==rE)return{value:this.value};if(this._state==="fetching"){let e=gc();return this.waiters.push(e),e}else return}};function Fl(t,e){let r=new xd,o=!1,i,s=new Set;async function a(f,{force:m}={force:!1}){if(!m&&(o||p()===!1))return;let g;if(m||r.state===null||r.state instanceof Error){let v=new AbortController;s.add(v);try{g=await r.fetch(()=>t(f,v))}finally{s.delete(v)}}else r.state==="fetching"?g=await r.wait():r.state==="done"&&(g=r.get());return r.state instanceof Error?(i=r.state,e&&(o=!0,setTimeout(()=>{o=!1},e.delay*e.unit))):i=void 0,g==null?void 0:g.value}function l(f){var m;return(m=r.get())==null?void 0:m.value}function c(f){var m;return a(f),(m=r.get())==null?void 0:m.value}function d(){return o}function u(){return i}function p(){let f=r.get();if(f)return f.value!==void 0}function h(){r=new xd,s.forEach(f=>f.abort()),s=new Set,o=!1,i=void 0}return{exists:p,get:l,getOrLoad:c,fetch:a,isThrottling:d,lastError:u,invalidate:h}}var h0=X(r$());function n$(){h0.default.GlobalWorkerOptions.workerSrc=ue.res.src("/js/pdf.worker.js");let t=ue.res.src("/cmaps/"),e=Fl(async()=>{let o=new h0.PDFWorker;try{return await o.promise,o}catch(i){throw o.destroy(),i}});async function r(o,i){let s=await e.fetch();if(!s){let d=De.get().strings;throw new hs(d.couldntSetupPdfWorker)}let a={worker:s,cMapUrl:t,cMapPacked:!0};o instanceof ArrayBuffer?a.data=new Uint8Array(o):a.url=o;let l=await(0,h0.getDocument)(a).promise,c=[];if(i==="all")for(let d=0;d<l.numPages;d++)c.push(await l.getPage(d+1));else for(let d=0;d<i.length;d++)c.push(await l.getPage(i[d]+1));return{doc:l,pages:c}}return{loadPages:r}}async function nE({urlOrData:t,pageIndexList:e,pageSize:r}){let o=await ue.pdf.loadPages(t,e),{doc:i,pages:s}=o,a=await bw(s,r);return i.destroy(),a}async function bw(t,e){let r=[];for(let o=0;o<t.length;o++){let i=Dr.create(),s=i.getContext2dForce();i.style.display="none";let a=t[o].getViewport({scale:1}),l=[];if(!e)i.height=a.height,i.width=a.width,l=[1,0,0,1,0,0];else{let u=xr({width:a.width,height:a.height},e).width/a.width;l=[u,0,0,u,0,0],i.height=e.height,i.width=e.width}let c={canvasContext:s,viewport:a,transform:l};await t[o].render(c).promise,r.push(i)}return r}var o$=class{constructor(){this._rendering=!1;this._didBitbltExactPosition=!1;this.canvas=Dr.create();let e=this.canvas.getContext("2d");if(!e)throw new fo;this.ctx=e}get didBitbltExactPosition(){return this._didBitbltExactPosition}get rendering(){return this._rendering}bitblt(e,r){let o=this.geometry;if(!o)return;e.save();let i=o.mtx.invert();e.transform(i.a,i.b,i.c,i.d,i.e,i.f),e.drawImage(this.canvas,0,0),e.restore(),this._didBitbltExactPosition=this.hasIdenticalGeometry(Ze(e.canvas.width,e.canvas.height),r)}async promiseRender({destinationSize:e,pageSize:r,page:o,mtx:i,contentLocalBounds:s}){this.canvas.width=e.width,this.canvas.height=e.height,this.ctx.clearRect(0,0,e.width,e.height);let a=o.getViewport({scale:1}),l=ts(r,a.width*a.height);r=Xt(r,l);let c=Rr(s),d=ts(r,c),u=bu(r,s),h=new ft(d,0,0,d,u.x,u.y).prependMatrix(i),f=[h.a,h.b,h.c,h.d,h.e,h.f],m={canvasContext:this.ctx,viewport:a,transform:f};try{await o.render(m).promise,this.geometry={size:e,mtx:i.clone(),contentLocalBounds:s}}catch(g){ge.error(g)}this._rendering=!1}markRenderingInProgress(){this._rendering=!0,this.geometry=void 0,this._didBitbltExactPosition=!1}hasIdenticalGeometry(e,r){if(!this.geometry)return!1;let o=1e-10;return vpe(e,this.geometry.size,o)&&bpe(r,this.geometry.mtx,o)}get isReady(){return!this.rendering&&this.geometry!==void 0}};function vpe(t,e,r){$e(r>=0);let o=Math.abs(t.width-e.width),i=Math.abs(t.height-e.height);return o<=r&&i<=r}function bpe(t,e,r){$e(r>=0);let o=Math.abs(t.a-e.a),i=Math.abs(t.b-e.b),s=Math.abs(t.c-e.c),a=Math.abs(t.d-e.d),l=Math.abs(t.e-e.e),c=Math.abs(t.f-e.f);return o<=r&&i<=r&&s<=r&&a<=r&&l<=r&&c<=r}var i$=class{constructor(e){this.currentIndex=0;let{page:r,pageSize:o}=e;this.buffers=[];for(let i=0;i<2;i++)this.buffers.push(new o$);this.page=r,this.pageSize=o}current(e,r){let o=this.buffers[this.currentIndex],i=this.buffers[(this.currentIndex+1)%this.buffers.length];if(o.isReady&&o.hasIdenticalGeometry(e,r))return o;if(i.isReady&&i.hasIdenticalGeometry(e,r))return i;if(o.isReady)return o;if(i.isReady)return i}enqueue(e){let r=this.buffers[this.currentIndex],o=(this.currentIndex+1)%this.buffers.length,i=this.buffers[o];if(i.rendering||r.rendering)return;let{destinationSize:s,mtx:a,contentLocalBounds:l,completion:c}=e;i.hasIdenticalGeometry(s,a)||(i.markRenderingInProgress(),i.promiseRender({destinationSize:s,page:this.page,pageSize:this.pageSize,mtx:a,contentLocalBounds:l}).then(()=>{this.currentIndex=o,c()}))}},yw=class{constructor({card:e,signalRedraw:r}){this.loadingState="waiting";this.card=e,this.signalRedraw=r,this.tryLoadPdf()}tryLoadPdf(){var o;let e=this.card,r=(o=e.content.asset)==null?void 0:o.remote_id;if(!r){this.loadingState="waiting";return}this.loadingState="loading",ue.lnsClient.downloadAsset(r).then(oE).then(i=>ue.pdf.loadPages(i,[e.content.page_index]).then(s=>{let{doc:a,pages:l}=s,c=l[0];this.dBuffer=new i$({page:c,pageSize:this.card.content.page_size}),this.loadingState="ok",this.doc=a,this.signalRedraw()})).catch(yt.handleError).catch(i=>{this.loadingState="failed",ge.error(i)})}prepare(e,r){if(this.loadingState==="failed")return;let o=this.dBuffer;if(!o){this.loadingState==="waiting"&&this.tryLoadPdf();return}let i=o.current(e,r);i&&i.didBitbltExactPosition||i&&i.hasIdenticalGeometry(e,r)||(this.prev&&this.prev.equals(r)&&o.enqueue({destinationSize:e,contentLocalBounds:this.card.contentLocalBounds,mtx:r.clone(),completion:()=>{this.signalRedraw()}}),this.prev=r.clone())}render(e,r){if(!this.dBuffer)return;let o=Ze(e.canvas.width,e.canvas.height),i=this.dBuffer.current(o,r);if(!i)return;e.save();let s=this.card.contentLocalBounds;e.beginPath(),e.rect(s.x,s.y,s.width,s.height),e.clip(),i.bitblt(e,r),e.restore()}close(){var e;this.dBuffer=void 0,(e=this.doc)==null||e.destroy(),this.doc=void 0}};var Is=class{constructor(e,r){this.file=e;this.pageSizes=r;this.extension=".pdf"}static async fromFile(e){let r=URL.createObjectURL(e);try{let{doc:o,pages:i}=await ue.pdf.loadPages(r,"all"),s=i.map(a=>{let l=a.getViewport({scale:1});return Ze(l.width,l.height)});return o.destroy(),new Is(e,s)}finally{URL.revokeObjectURL(r)}}getLayoutSize(){return this.pageSizes.map(e=>xr(e,Gt))}insert({user:e,position:r,startPosition:o}){let i={description:this.file.name,extension:this.extension};return p0({author:{id:e.user_id,name:Ut(e)},asset:i,position:r,pageSizeList:this.pageSizes,cardArea:Rr(Gt),startPosition:o})}toCards({parent:e,position:r,user:o}){let i=[],s=this.getLayoutSize(),a=Rr(Gt),l=e?Ho(e.size):1,c=s.map(f=>Xt(xr(f,a),l)),d=Re(r.x-c[0].width*.5,r.y-c[0].height*.5),u=a0(d,c,l),p={id:o.user_id,name:Ut(o)},h={description:this.file.name,extension:this.extension};for(let f=0;f<s.length;f++)i.push(Rl({author:p,asset:h,pageIndex:f,pageSize:this.pageSizes[f],layoutSize:c[f],position:u[f],usage:"compatible"}));return i}getMetadata(){return this.pageSizes.map(e=>({...e,duration:0}))}async*generateThumbnails(){for await(let e of this.generateThumbnailsWithOptions({imageType:"image/jpeg"}))yield e}async*generateThumbnailsWithOptions(e){let{imageType:r}=e,o=URL.createObjectURL(this.file),i,s;try{let a=await ue.pdf.loadPages(o,"all");i=a.doc,s=a.pages}catch(a){ge.error(a),i==null||i.destroy(),URL.revokeObjectURL(o),yield void 0}if(!i||!s)throw URL.revokeObjectURL(o),new Error("cannot load pdf file: "+this.file.name);for(let a=0;a<s.length;a++){let l=s[a],c=this.pageSizes[a],d=xr(c,ou),u=xr(c,ff);try{let[p,h,f]=await Promise.all([bw([l]),bw([l],d),bw([l],u)]);a===s.length-1&&(i.destroy(),URL.revokeObjectURL(o)),yield{high:p[0],small:h[0],medium:f[0],contentType:r}}catch(p){i.destroy(),URL.revokeObjectURL(o),ge.error(p),yield void 0}}}async generateHeadThumbnail(){let e=URL.createObjectURL(this.file);try{let[r]=await nE({urlOrData:e,pageIndexList:[0]});return r}finally{URL.revokeObjectURL(e)}}};var Af=class{constructor(e){this.audio=e.audio,this.extension=e.extension,this.name=e.name,this.contentType=e.contentType}static async fromFile(e){let r=hi(e);if(!lP(r))throw new Error("is not audio file: "+r);let o=URL.createObjectURL(e);try{let i=await kB(o),s=Py.get(r);return new Af({audio:i,extension:s,name:e.name,contentType:r})}finally{URL.revokeObjectURL(o)}}static async fromWebmFile(e){if(!pd(Xs(e.name)))throw new Error(`Non-WebM file ${e.name}`);let r=URL.createObjectURL(e);try{let o=await kB(r);$e(ga(o.duration),"edited audio webm should have duration");let i=f0(e.name);return new Af({audio:o,extension:".weba",name:`${i}.weba`,contentType:"audio/webm"})}finally{URL.revokeObjectURL(r)}}insert(e){let r=Ze(Yi);return Ef({position:e.position,author:{id:e.user.user_id,name:Ut(e.user)},asset:{description:this.name,extension:this.extension},type:"audio",avDuration:this.audio.duration,contentSize:r,startPosition:e.startPosition})}getLayoutSize(){return[Ze(Gt)]}toCards({parent:e,position:r,user:o}){let i=e?Ho(e.size):1;return[cv({scaleToParent:i,position:r,author:{id:o.user_id,name:Ut(o)},duration:this.audio.duration,contentSize:Ze(Yi),asset:{description:this.name,extension:this.extension}})]}getMetadata(){return[{duration:this.audio.duration}]}async*generateThumbnails(){yield void 0}async generateHeadThumbnail(){return Na({url:ue.res.src("/svg/audio_card_placeholder.svg")})}};var RL=X(PB());var uge=xL().schema,pge=new Map([[21936,{name:"Colour",webm:!0,level:4,type:"m",multiple:!1,mandatory:!1,cppname:"VideoColour",description:"Settings describing the colour format."}],[21937,{name:"MatrixCoefficients",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoColourMatrix",description:`The Matrix Coefficients of the video used to derive luma and chroma values from red, green, and blue color primaries.
For clarity, the value and meanings for MatrixCoefficients are adopted from Table 4 of ISO/IEC 23001-8:2016 or ITU-T H.273.`}],[21938,{name:"BitsPerChannel",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoBitsPerChannel",description:"Number of decoded bits per channel. A value of 0 indicates that the BitsPerChannel is unspecified."}],[21939,{name:"ChromaSubsamplingHorz",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoChromaSubsampHorz",description:`The amount of pixels to remove in the Cr and Cb channels for every pixel not removed horizontally.
Example: For video with 4:2:0 chroma subsampling, the ChromaSubsamplingHorz **SHOULD** be set to 1.`}],[21940,{name:"ChromaSubsamplingVert",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoChromaSubsampVert",description:`The amount of pixels to remove in the Cr and Cb channels for every pixel not removed vertically.
Example: For video with 4:2:0 chroma subsampling, the ChromaSubsamplingVert **SHOULD** be set to 1.`}],[21941,{name:"CbSubsamplingHorz",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoCbSubsampHorz",description:`The amount of pixels to remove in the Cb channel for every pixel not removed horizontally.
This is additive with ChromaSubsamplingHorz. Example: For video with 4:2:1 chroma subsampling,
the ChromaSubsamplingHorz **SHOULD** be set to 1 and CbSubsamplingHorz **SHOULD** be set to 1.`}],[21942,{name:"CbSubsamplingVert",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoCbSubsampVert",description:`The amount of pixels to remove in the Cb channel for every pixel not removed vertically.
This is additive with ChromaSubsamplingVert.`}],[21943,{name:"ChromaSitingHorz",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoChromaSitHorz",description:"How chroma is subsampled horizontally."}],[21944,{name:"ChromaSitingVert",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoChromaSitVert",description:"How chroma is subsampled vertically."}],[21945,{name:"Range",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoColourRange",description:"Clipping of the color ranges."}],[21946,{name:"TransferCharacteristics",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoColourTransferCharacter",description:`The transfer characteristics of the video. For clarity,
the value and meanings for TransferCharacteristics are adopted from Table 3 of ISO/IEC 23091-4 or ITU-T H.273.`}],[21947,{name:"Primaries",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoColourPrimaries",description:`The colour primaries of the video. For clarity,
the value and meanings for Primaries are adopted from Table 2 of ISO/IEC 23091-4 or ITU-T H.273.`}],[21948,{name:"MaxCLL",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoColourMaxCLL",description:`Maximum brightness of a single pixel (Maximum Content Light Level)
in candelas per square meter (cd/m^2^).`}],[21949,{name:"MaxFALL",webm:!0,level:5,type:"u",multiple:!1,mandatory:!1,cppname:"VideoColourMaxFALL",description:`Maximum brightness of a single full frame (Maximum Frame-Average Light Level)
in candelas per square meter (cd/m^2^).`}],[21968,{name:"MasteringMetadata",webm:!0,level:5,type:"m",multiple:!1,mandatory:!1,cppname:"VideoColourMasterMeta",description:"SMPTE 2086 mastering data."}],[21969,{name:"PrimaryRChromaticityX",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoRChromaX",description:"Red X chromaticity coordinate, as defined by CIE 1931."}],[21970,{name:"PrimaryRChromaticityY",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoRChromaY",description:"Red Y chromaticity coordinate, as defined by CIE 1931."}],[21971,{name:"PrimaryGChromaticityX",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoGChromaX",description:"Green X chromaticity coordinate, as defined by CIE 1931."}],[21972,{name:"PrimaryGChromaticityY",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoGChromaY",description:"Green Y chromaticity coordinate, as defined by CIE 1931."}],[21973,{name:"PrimaryBChromaticityX",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoBChromaX",description:"Blue X chromaticity coordinate, as defined by CIE 1931."}],[21974,{name:"PrimaryBChromaticityY",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoBChromaY",description:"Blue Y chromaticity coordinate, as defined by CIE 1931."}],[21975,{name:"WhitePointChromaticityX",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoWhitePointChromaX",description:"White X chromaticity coordinate, as defined by CIE 1931."}],[21976,{name:"WhitePointChromaticityY",webm:!0,level:6,type:"f",range:"0-1",multiple:!1,mandatory:!1,cppname:"VideoWhitePointChromaY",description:"White Y chromaticity coordinate, as defined by CIE 1931."}],[21977,{name:"LuminanceMax",webm:!0,level:6,type:"f",range:"0-999.9999",multiple:!1,mandatory:!1,cppname:"VideoLuminanceMax",description:"Maximum luminance. Represented in candelas per square meter (cd/m^2^)."}],[21978,{name:"LuminanceMin",webm:!0,level:6,type:"f",range:"0-999.9999",multiple:!1,mandatory:!1,cppname:"VideoLuminanceMin",description:"Minimum luminance. Represented in candelas per square meter (cd/m^2^)."}]]),Ow=new Map([...uge,...pge]);var BE=class{constructor(){this._buffers=[],this._stack=[]}encode(e){return Gf(e.reduce((r,o)=>r.concat(this.encodeChunk(o)),[])).buffer}encodeChunk(e){return e.type==="m"?e.isEnd?this.endTag(e):this.startTag(e):(e.data=ms.from(e.data),this.writeTag(e)),this.flush()}flush(){let e=this._buffers;return this._buffers=[],e}getSchemaInfo(e){for(let r of Ow.keys()){let o=Ow.get(r);if((o==null?void 0:o.name)===e)return new ms(r.toString(16),"hex")}return null}writeTag(e){let r=e.name,o=this.getSchemaInfo(r),i=e.data;if(o==null)throw new Error("No schema entry found for "+r);let s=zw(o,i);if(this._stack.length>0){this._stack[this._stack.length-1].children.push({tagId:o,elm:e,children:[],data:s});return}this._buffers=this._buffers.concat(s)}startTag(e){let r=e.name,o=this.getSchemaInfo(r);if(o==null)throw new Error("No schema entry found for "+r);if(e.unknownSize){let s=zw(o,new ms(0),e.unknownSize);this._buffers=this._buffers.concat(s);return}let i={tagId:o,elm:e,children:[],data:null};this._stack.length>0&&this._stack[this._stack.length-1].children.push(i),this._stack.push(i)}endTag(e){let r=this._stack.pop();if(r==null)throw new Error("EBML structure is broken");if(r.elm.name!==e.name)throw new Error("EBML structure is broken");let o=r.children.reduce((s,a)=>{if(a.data===null)throw new Error("EBML structure is broken");return s.concat(a.data)},[]),i=Gf(o);r.elm.type==="m"?r.data=zw(r.tagId,i,r.elm.unknownSize):r.data=zw(r.tagId,i),this._stack.length<1&&(this._buffers=this._buffers.concat(r.data))}};var qge=xj(),Yge=_j(),{tools:Aj}=xL(),ms=qge.Buffer;function FL(t,e=0){return Aj.readVint(t,e)}function Xge(t){return Aj.writeVint(t)}var Ij=Yge;function zw(t,e,r=!1){return Gf([t,r?new ms("01ffffffffffffff","hex"):Xge(e.length),e])}function Rj(t){let e=Fj("VP8 ",t),r=Gf([new ms("WEBP","ascii"),e]);return Fj("RIFF",r)}function Fj(t,e){let r=new ms(4);return r.writeUInt32LE(e.byteLength,0),Gf([new ms(t.substr(0,4),"ascii"),r,e,new ms(e.byteLength%2==0?0:1)])}function Mj(t,e,r){let o=ML("EBML",t),s=Uw(o)+12,a=t[t.length-1].dataEnd-s,l=ML("Info",t);Qge("Duration",l),l.splice(1,0,{name:"Duration",type:"f",data:Jge(e,8)});let c=Uw(l),d=ML("Tracks",t),u=Uw(d),p=47,h=[],f=5+r.length*15,m=[],g=-1,v=10;for(let C=0;C<v;C++){let b=p,x=b+c,w=x+u,T=w+f-a;h=[],h.push({name:"SeekHead",type:"m",isEnd:!1}),h.push({name:"Seek",type:"m",isEnd:!1}),h.push({name:"SeekID",type:"b",data:new ms([21,73,169,102])}),h.push({name:"SeekPosition",type:"u",data:T0(b)}),h.push({name:"Seek",type:"m",isEnd:!0}),h.push({name:"Seek",type:"m",isEnd:!1}),h.push({name:"SeekID",type:"b",data:new ms([22,84,174,107])}),h.push({name:"SeekPosition",type:"u",data:T0(x)}),h.push({name:"Seek",type:"m",isEnd:!0}),h.push({name:"Seek",type:"m",isEnd:!1}),h.push({name:"SeekID",type:"b",data:new ms([28,83,187,107])}),h.push({name:"SeekPosition",type:"u",data:T0(w)}),h.push({name:"Seek",type:"m",isEnd:!0}),h.push({name:"SeekHead",type:"m",isEnd:!0}),p=Uw(h),m=[];let A=!1;if(m.push({name:"Cues",type:"m",isEnd:!1}),r.forEach(({CueTrack:E,CueClusterPosition:F,CueTime:z})=>{if(m.push({name:"CuePoint",type:"m",isEnd:!1}),m.push({name:"CueTime",type:"u",data:T0(z)}),m.push({name:"CueTrackPositions",type:"m",isEnd:!1}),m.push({name:"CueTrack",type:"u",data:T0(E)}),F-=s,F+=T,F<0){A=!0;return}m.push({name:"CueClusterPosition",type:"u",data:T0(F)}),m.push({name:"CueTrackPositions",type:"m",isEnd:!0}),m.push({name:"CuePoint",type:"m",isEnd:!0})}),!A)if(m.push({name:"Cues",type:"m",isEnd:!0}),f=Uw(m),g!==T){if(g=T,C===v-1)throw new Error("Failed to converge to a stable metadata size")}else break}let y=[...o,{name:"Segment",type:"m",isEnd:!1,unknownSize:!0},...h,...l,...d,...m];return new BE().encode(y)}function Qge(t,e){let r=[],o=-1;for(let i=0;i<e.length;i++){let s=e[i];if(s.name===t)if(s.type==="m")if(!s.isEnd)o=i;else{if(o==-1)throw new Error(`Detected ${t} closing element before finding the start`);e.splice(o,i-o+1);return}else{e.splice(i,1);return}}}function ML(t,e){let r=[],o=-1;for(let i=0;i<e.length;i++){let s=e[i];if(s.name===t)if(s.type==="m")if(!s.isEnd)o=i;else{if(o==-1)throw new Error(`Detected ${t} closing element before finding the start`);r=e.slice(o,i+1);break}else{r.push(e[i]);break}}return r}function Uw(t){let e=new BE;return t.reduce((r,o)=>r.concat(e.encode([o])),[]).reduce((r,o)=>r+o.byteLength,0)}function Gf(t){return ms.concat(t)}function T0(t){let e=1;for(;t>=Math.pow(2,8*e);e++);if(e>=7)return ge.warn("7bit or more bigger uint not supported."),new RL.Uint64BE(t).toBuffer();let r=new ms(e);return r.writeUIntBE(t,0,e),r}function Jge(t,e=8){if(e===8){let r=new ms(8);return r.writeDoubleBE(t,0),r}else if(e===4){let r=new ms(4);return r.writeFloatBE(t,0),r}else throw new Error("float type bits must 4bytes or 8bytes")}function Nj(t){return t instanceof Date?t:new Date(new Date("2001-01-01T00:00:00.000Z").getTime()+Number(t)/1e3/1e3)}var zj=X(Oj());var NL=class extends zj.EventEmitter{constructor(){super();this.logGroup="";this.hasLoggingStarted=!1;this.metadataloaded=!1,this.chunks=[],this.stack=[],this.segmentOffset=0,this.last2SimpleBlockVideoTrackTimecode=[0,0],this.last2SimpleBlockAudioTrackTimecode=[0,0],this.lastClusterTimecode=0,this.lastClusterPosition=0,this.timecodeScale=1e6,this.metadataSize=0,this.metadatas=[],this.cues=[],this.firstVideoBlockRead=!1,this.firstAudioBlockRead=!1,this.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null},this.trackTypes=[],this.trackDefaultDuration=[],this.trackCodecDelay=[],this.trackInfo={type:"nothing"},this.ended=!1,this.logging=!1,this.use_duration_every_simpleblock=!1,this.use_webp=!1,this.use_segment_info=!0,this.drop_default_duration=!0}stop(){for(this.ended=!0,this.emit_segment_info();this.stack.length;)this.stack.pop(),this.logging&&console.groupEnd();this.logging&&this.hasLoggingStarted&&this.logGroup&&console.groupEnd()}emit_segment_info(){let e=this.chunks;if(this.chunks=[],this.metadataloaded){if(!this.use_segment_info)return;let r=this.lastClusterTimecode,o=this.duration,i=this.timecodeScale;this.emit("cluster",{timecode:r,data:e}),this.emit("duration",{timecodeScale:i,duration:o})}else{this.metadataloaded=!0,this.metadatas=e;let r=this.trackTypes.indexOf(1),o=this.trackTypes.indexOf(2);if(this.trackInfo=r>=0&&o>=0?{type:"both",trackNumber:r}:r>=0?{type:"video",trackNumber:r}:o>=0?{type:"audio",trackNumber:o}:{type:"nothing"},!this.use_segment_info)return;this.emit("metadata",{data:e,metadataSize:this.metadataSize})}}read(e){let r=!1;if(!this.ended){if(e.type==="m")if(e.isEnd)this.stack.pop();else{let o=this.stack[this.stack.length-1];if(o!=null&&o.level>=e.level){this.stack.pop(),this.logging&&console.groupEnd(),o.dataEnd=e.dataEnd,o.dataSize=e.dataEnd-o.dataStart,o.unknownSize=!1;let i=Object.assign({},o,{name:o.name,type:o.type,isEnd:!0});this.chunks.push(i)}this.stack.push(e)}if(e.type==="m"&&e.name=="Segment")this.segmentOffset!=0&&ge.warn("Multiple segments detected!"),this.segmentOffset=e.dataStart,this.emit("segment_offset",this.segmentOffset);else if(e.type==="b"&&e.name==="SimpleBlock"){let{timecode:o,trackNumber:i,frames:s}=Ij(e.data);if(this.trackTypes[i]===1){if(!this.firstVideoBlockRead&&(this.firstVideoBlockRead=!0,this.trackInfo.type==="both"||this.trackInfo.type==="video")){let a=this.lastClusterTimecode+o;this.cues.push({CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a}),this.emit("cue_info",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a})}this.last2SimpleBlockVideoTrackTimecode=[this.last2SimpleBlockVideoTrackTimecode[1],o]}else if(this.trackTypes[i]===2){if(!this.firstAudioBlockRead&&(this.firstAudioBlockRead=!0,this.trackInfo.type==="audio")){let a=this.lastClusterTimecode+o;this.cues.push({CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a}),this.emit("cue_info",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a})}this.last2SimpleBlockAudioTrackTimecode=[this.last2SimpleBlockAudioTrackTimecode[1],o]}this.use_duration_every_simpleblock&&this.emit("duration",{timecodeScale:this.timecodeScale,duration:this.duration}),this.use_webp&&s.forEach(a=>{if(a.slice(3,6).toString("hex")!=="9d012a")return;let c=Rj(a),d=new Blob([c],{type:"image/webp"}),u=this.duration;this.emit("webp",{currentTime:u,webp:d})})}else e.type==="m"&&e.name==="Cluster"&&e.isEnd===!1?(this.firstVideoBlockRead=!1,this.firstAudioBlockRead=!1,this.emit_segment_info(),this.emit("cluster_ptr",e.tagStart),this.lastClusterPosition=e.tagStart):e.type==="u"&&e.name==="Timecode"?this.lastClusterTimecode=e.value:e.type==="u"&&e.name==="TimecodeScale"?this.timecodeScale=e.value:e.type==="m"&&e.name==="TrackEntry"?e.isEnd?(this.trackTypes[this.currentTrack.TrackNumber]=this.currentTrack.TrackType,this.trackDefaultDuration[this.currentTrack.TrackNumber]=this.currentTrack.DefaultDuration,this.trackCodecDelay[this.currentTrack.TrackNumber]=this.currentTrack.CodecDelay):this.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null}:e.type==="u"&&e.name==="TrackType"?this.currentTrack.TrackType=e.value:e.type==="u"&&e.name==="TrackNumber"?this.currentTrack.TrackNumber=e.value:e.type==="u"&&e.name==="CodecDelay"?this.currentTrack.CodecDelay=e.value:e.type==="u"&&e.name==="DefaultDuration"?this.drop_default_duration?(ge.warn("DefaultDuration detected!, remove it"),r=!0):this.currentTrack.DefaultDuration=e.value:e.name==="unknown"&&ge.warn(e);!this.metadataloaded&&e.dataEnd>0&&(this.metadataSize=e.dataEnd),r||this.chunks.push(e),this.logging&&this.put(e)}}get duration(){if(this.trackInfo.type==="nothing")return ge.warn("no video, no audio track"),0;let e=0,r=0,o=0,i=this.trackDefaultDuration[this.trackInfo.trackNumber];if(typeof i=="number")e=i;else if(this.trackInfo.type==="both")if(this.last2SimpleBlockAudioTrackTimecode[1]>this.last2SimpleBlockVideoTrackTimecode[1]){e=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackTypes.indexOf(2)];typeof l=="number"&&(r=l),o=this.last2SimpleBlockAudioTrackTimecode[1]}else{e=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackTypes.indexOf(1)];typeof l=="number"&&(r=l),o=this.last2SimpleBlockVideoTrackTimecode[1]}else if(this.trackInfo.type==="video"){e=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackInfo.trackNumber];typeof l=="number"&&(r=l),o=this.last2SimpleBlockVideoTrackTimecode[1]}else if(this.trackInfo.type==="audio"){e=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackInfo.trackNumber];typeof l=="number"&&(r=l),o=this.last2SimpleBlockAudioTrackTimecode[1]}let a=((this.lastClusterTimecode+o)*this.timecodeScale+e-r)/this.timecodeScale;return Math.floor(a)}addListener(e,r){return super.addListener(e,r)}put(e){this.hasLoggingStarted||(this.hasLoggingStarted=!0,this.logging&&this.logGroup&&console.groupCollapsed(this.logGroup)),e.type==="m"?e.isEnd?console.groupEnd():console.group(e.name+":"+e.tagStart):e.type==="b"?ge.log(e.name,e.type):ge.log(e.name,e.tagStart,e.type,e.value)}};var Uj=X(PB());var ku;(function(o){o[o.STATE_TAG=1]="STATE_TAG",o[o.STATE_SIZE=2]="STATE_SIZE",o[o.STATE_CONTENT=3]="STATE_CONTENT"})(ku||(ku={}));var BL=class{constructor(){this._buffer=new ms(0),this._tag_stack=[],this._state=1,this._cursor=0,this._total=0,this._result=[]}decode(e){this.readChunk(e);let r=this._result;return this._result=[],r}readChunk(e){for(this._buffer=Gf([this._buffer,new ms(e)]);this._cursor<this._buffer.length&&!(this._state===1&&!this.readTag()||this._state===2&&!this.readSize()||this._state===3&&!this.readContent()););}getSchemaInfo(e){let r=Ow.get(e);return r||{name:"unknown",level:-1,type:"unknown",description:"unknown"}}readTag(){if(this._cursor>=this._buffer.length)return!1;let e=FL(this._buffer,this._cursor);if(e==null)return!1;let o=this._buffer.slice(this._cursor,this._cursor+e.length).reduce((a,l,c,d)=>a+l*Math.pow(16,2*(d.length-1-c)),0),i=this.getSchemaInfo(o),s={EBML_ID:o.toString(16),schema:i,type:i.type,name:i.name,level:i.level,tagStart:this._total,tagEnd:this._total+e.length,sizeStart:this._total+e.length,sizeEnd:null,dataStart:null,dataEnd:null,dataSize:null,data:null};return this._tag_stack.push(s),this._cursor+=e.length,this._total+=e.length,this._state=2,!0}readSize(){if(this._cursor>=this._buffer.length)return!1;let e=FL(this._buffer,this._cursor);if(e==null)return!1;let r=this._tag_stack[this._tag_stack.length-1];return r.sizeEnd=r.sizeStart+e.length,r.dataStart=r.sizeEnd,r.dataSize=e.value,e.value===-1?(r.dataEnd=-1,r.type==="m"&&(r.unknownSize=!0)):r.dataEnd=r.sizeEnd+e.value,this._cursor+=e.length,this._total+=e.length,this._state=3,!0}readContent(){let e=this._tag_stack[this._tag_stack.length-1];if(e.type==="m"){if(e.isEnd=!1,this._result.push(e),this._state=1,e.dataSize===0){let o=Object.assign({},e,{isEnd:!0});this._result.push(o),this._tag_stack.pop()}return!0}if(this._buffer.length<this._cursor+e.dataSize)return!1;let r=this._buffer.slice(this._cursor,this._cursor+e.dataSize);switch(this._buffer=this._buffer.slice(this._cursor+e.dataSize),e.data=r,e.type){case"u":e.value=r.readUIntBE(0,r.length);break;case"i":e.value=r.readIntBE(0,r.length);break;case"f":e.value=e.dataSize===4?r.readFloatBE(0):e.dataSize===8?r.readDoubleBE(0):(ge.warn(`cannot read ${e.dataSize} octets float. failback to 0`),0);break;case"s":e.value=r.toString("ascii");break;case"8":e.value=r.toString("utf8");break;case"b":e.value=r;break;case"d":e.value=Nj(new Uj.Int64BE(r).toNumber());break}if(e.value===null)throw new Error("unknown tag type:"+e.type);for(this._result.push(e),this._total+=e.dataSize,this._state=1,this._cursor=0,this._tag_stack.pop();this._tag_stack.length>0;){let o=this._tag_stack[this._tag_stack.length-1];if(o.dataEnd<0)return this._tag_stack.pop(),!0;if(this._total<o.dataEnd)break;if(o.type!=="m")throw new Error("parent element is not master element");let i=Object.assign({},o,{isEnd:!0});this._result.push(i),this._tag_stack.pop()}return!0}};var D0=class{constructor(e){this.mimeType=e;this.chunks=[];this.decoder=new BL;this.reader=new NL;this.addQueue=[];this.reader.logging=!1}add(e){let r=new xd("WebmEditor"),{decoder:o,reader:i,addQueue:s}=this;this.chunks.push(e);let a=[...s];r.fetch(async function(){let l=Promise.all(a.map(u=>u.wait())),[c]=await Promise.all([oE(e),l]);o.decode(c).forEach(u=>i.read(u))}),s.push(r)}async close(){await Promise.all(this.addQueue.map(u=>u.wait())),this.reader.stop();let{metadatas:e,metadataSize:r,duration:o,cues:i}=this.reader,s=Mj(e,o,i),a={type:this.mimeType},l=new Blob(this.chunks,a);this.chunks=[];let c=l.slice(r);return{blob:new Blob([s,c],a),duration:o/1e3}}};async function Vf(t){let e=[];for(let r of t){let o=Xs(r.name);if(!pd(o)){e.push(r);continue}try{let i=new D0(r.type);i.add(r);let{blob:s}=await i.close(),a=new File([s],r.name);e.push(a)}catch(i){ge.warn(`could not make seekable version of ${r.name}`),e.push(r)}}return e}async function Hj(t){try{return await zi.fromFile(t)}catch(e){if(!(e instanceof Bl))throw e}return Af.fromWebmFile(t)}function ga(t){return!!t&&!isNaN(t)&&isFinite(t)&&t>0}function Gj(t){return(t==null?void 0:t.endsWith("webm"))?e=>eve(e,t):tve}async function eve(t,e){let r=await LL(t),o=new D0(e);return o.add(r),(await o.close()).duration}function tve(t){return new Promise((e,r)=>{let o=!1,i=document.createElement("video");i.muted=!0,i.preload="none",i.autoplay=!1;let s=l=>{let{duration:c}=l.currentTarget;ga(c)&&(i.removeEventListener("seeked",s),o=!0,e(c))},a=()=>{i.addEventListener("seeked",s),i.currentTime=1*pr.day,i.removeEventListener("loadeddata",a)};i.addEventListener("loadeddata",a),i.src=t,i.load(),setTimeout(()=>{o||(o=!0,i.src="",i.load(),r(new Error("force-update duration timed out")))},30*pr.sec)})}var k0=OL();function HE(){var e;let t=(e=k0.os)==null?void 0:e.family;return t?t.includes("iOS")||t.includes("OS X")&&window.ontouchstart!==void 0||t.includes("Android"):!1}function P0(){var t,e;return!!((e=(t=k0.os)==null?void 0:t.family)==null?void 0:e.includes("iOS"))}function Td(){var t;return!!((t=k0.name)==null?void 0:t.match("Safari"))}function E0(){let t="";return k0.os&&k0.os.family&&(t=k0.os.family),t==="OS X"}var eh=class{constructor(e,r,o,i){this.mainTrack=e;this._duration=r;this.subTracks=new Map;this._playing=!1;this.handlePlayQueueFailed=()=>{this.setMuted(!0),this.currentPlayQueue=void 0,this.currentPlayQueueFailedHandler=void 0,this.play()};this.speedScale=1;this.muted=!1;this.waitingTracks=new Set;this.handleWaitingChanged=(e,r)=>{let o=this.waitingTracks.size>0;r?(this.waitingTracks.add(e),this.freeze({except:e})):this.waitingTracks.delete(e);let i=this.waitingTracks.size>0;o!==i&&(i||this.thaw())};var a,l;e.onTimeChange=c=>{var d;(d=this.onTimeChange)==null||d.call(this,c)},e.onEnded=()=>{var c;(c=this.onEnded)==null||c.call(this)};let s=(l=(a=this.mainTrack)==null?void 0:a.element)==null?void 0:l.src;s&&!ga(this._duration)&&Gj(o)(s).then(d=>{this.duration=d,i==null||i(d)}).catch(d=>{ge.warn("could not get valid duration",d)}),e.onWaitingChanged=this.handleWaitingChanged}static makeVideo(e){let{duration:r,isWebm:o,onDurationChange:i}=e,s=xv.makeVideo(e),a=o?"video/webm":void 0;return new eh(s,r,a,i)}static makeAudio(e){let{src:r,duration:o,volume:i,isWebm:s,onDurationChange:a,onReady:l}=e,c=xv.makeAudio({src:r,volume:i,offset:0,loop:!1,onReady:l}),d=s?"audio/webm":void 0;return new eh(c,o,d,a)}static makeEmpty(e,r){let o=new _0(e);return r(),new eh(o,e)}get duration(){return this._duration}set duration(e){this._duration=e,this.mainTrack instanceof _0&&(this.mainTrack.duration=e)}get video(){if(this.mainTrack.element instanceof HTMLVideoElement)return this.mainTrack.element}get audio(){if(this.mainTrack.element instanceof HTMLAudioElement)return this.mainTrack.element}get isLoading(){return this.waitingTracks.size>0?!0:this.tracks.some(e=>e.element&&($j(e.element)||e.element.seeking))}addSubTrack(e){let{url:r,volume:o,trackId:i,offset:s,loop:a,duration:l}=e;if(this.subTracks.has(i)){console.warn(`trackId "${i}" is already in use`);return}let c=this.playing;this.pause();let d=xv.makeAudio({src:r,volume:o,offset:s,loop:a});d.onWaitingChanged=this.handleWaitingChanged,this.subTracks.set(i,d),this.mainTrack instanceof _0&&l?(this.duration=l,this.seek(0)):this.seek(this.mainTrack.currentTime),c&&this.play()}removeSubTrack(e,r){let o=this.subTracks.get(e);if(!o)return;let i=this.playing;this.pause(),this.subTracks.delete(e),this.mainTrack instanceof _0&&r&&(this.duration=r,this.seek(0)),o.close(),i&&this.play()}get playing(){return this._playing}play(){if(this._playing=!0,this.currentPlayQueue)return;this.currentPlayQueueFailedHandler=this.handlePlayQueueFailed;let e=this.mainTrack.currentTime;this.currentPlayQueue=Promise.all(this.tracks.map(r=>r.play(e))).catch(()=>{var r;(r=this.currentPlayQueueFailedHandler)==null||r.call(this)}).finally(()=>{this.currentPlayQueueFailedHandler=void 0,this.currentPlayQueue=void 0})}apply(e){(e!==this.playing||this.shouldSyncPlaying)&&(e?this.play():this.pause())}get shouldSyncPlaying(){let e=this.mainTrack.currentTime;return this.tracks.some(r=>r.canSeekTo(e)&&r.frozen)&&this.currentPlayQueue===void 0&&this.waitingTracks.size===0}pause(){this.currentPlayQueue=void 0,this.currentPlayQueueFailedHandler=void 0,this.tracks.forEach(e=>e.pause()),this._playing=!1}seek(e){var r;this.tracks.forEach(o=>{o.seek(e)}),(r=this.onSeekTimeUpdated)==null||r.call(this,this.mainTrack.currentTime)}close(){this._playing=!1,this.tracks.forEach(e=>e.close()),this.subTracks.clear(),this.waitingTracks.clear(),this.onMuteChanged=void 0,this.onTimeChange=void 0,this.onSeekTimeUpdated=void 0,this.onEnded=void 0}setMainTrackVolume(e){this.mainTrack.volume!==e&&(this.mainTrack.volume=e)}setSubTrackVolume(e,r){let o=this.subTracks.get(e);!o||o.volume!==r&&(o.volume=r)}setSpeedScale(e){this.speedScale=e,!(this.waitingTracks.size>0)&&this.tracks.forEach(r=>{r.setSpeedScale(this.speedScale)})}freeze(e){let{except:r}=e;this.tracks.filter(o=>o!==r).forEach(o=>o.freeze())}thaw(){let e=this.mainTrack.currentTime;this.tracks.filter(r=>r.canSeekTo(e)).forEach(r=>r.thaw())}setMuted(e){var r;this.muted!==e&&(this.tracks.forEach(o=>o.muted=e),this.muted=e,(r=this.onMuteChanged)==null||r.call(this,this.muted))}get tracks(){return[this.mainTrack,...this.subTracks.values()]}},xv=class{constructor(e){this.speedScale=1;this._frozen=!1;this.handleTimeUpdate=()=>{var r;let e=this.currentTime;(r=this.onTimeChange)==null||r.call(this,e)};this.handleEnded=()=>{var e;(e=this.onEnded)==null||e.call(this)};this.waiting=!1;this.handleWaitingChanged=()=>{var r;if(!this.element)return;let e=!this.element.paused&&$j(this.element);e!==this.waiting&&(this.waiting=e,(r=this.onWaitingChanged)==null||r.call(this,this,this.waiting))};let{element:r,src:o,volume:i,offset:s,loop:a,onReady:l}=e;if(r.onloadeddata=()=>{this.handleWaitingChanged();let c=this.pendingSeekTime;this.pendingSeekTime=void 0,c!==void 0&&(r.currentTime=c-this.offset)},this.element=r,Td()||P0()){let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(!this.element){c.onerror=null,c.abort();return}if(c.readyState<XMLHttpRequest.HEADERS_RECEIVED||r.src.length>0)return;c.abort(),r.setAttribute("crossOrigin","use-credential");let{responseURL:d}=c,u=d.length>0?d:o;r.src=u,r.load(),l==null||l()},c.onerror=()=>{},c.open("GET",o,!0),c.send()}else r.setAttribute("crossOrigin","anonymous"),r.src=o,r.load(),l==null||l();this.offset=s,this.loop=a,this._volume=i,this.subscribe()}static makeVideo(e){let{src:r,volume:o,onReady:i}=e,s=document.createElement("video");return s.preload="auto",s.setAttribute("playsinline","1"),new xv({element:s,src:r,volume:o,offset:0,loop:!1,onReady:i})}static makeAudio(e){let{src:r,volume:o,offset:i,loop:s,onReady:a}=e,l=new Audio;return l.preload="auto",new xv({element:l,src:r,volume:o,offset:i,loop:s,onReady:a})}seek(e){if(!!this.element){if(this.element.src.length===0){this.pendingSeekTime=e;return}if(this.loop){let r=e%this.element.duration;this.element.currentTime=r}else this.canSeekTo(e)||this.freeze(),this.element.currentTime=e-this.offset}}pause(){var e;(e=this.element)==null||e.pause()}play(e){return this.element?(this.element.currentTime=e-this.offset,this.canSeekTo(e)?this.thaw():this.freeze(),this.element.play()):Promise.reject("track closed")}canSeekTo(e){if(!this.element)return!1;let r=e-this.offset;return isNaN(this.element.duration)?0<=r:0<=r&&r<this.element.duration}get muted(){return this.element?this.element.muted:!1}set muted(e){!this.element||(this.element.muted=e)}get currentTime(){var e;return this.loop&&console.warn('"currentTime" reports wired timestamp in case of loop mode'),this.element?(e=this.pendingSeekTime)!=null?e:this.element.currentTime+this.offset:0}get volume(){return this.element?this.element.volume:0}set volume(e){isNaN(e)||!this.element||(this.element.volume=ht(e,0,1))}get playing(){return this.element?!this.element.paused:!1}setSpeedScale(e){this.speedScale=e,!(this.frozen||!this.element)&&this.element.playbackRate!==e&&(this.element.playbackRate=e)}get frozen(){return this._frozen}freeze(){this._frozen=!0,this.element&&(this.element.playbackRate=0)}thaw(){this.element&&(this.element.playbackRate=this.speedScale),this._frozen=!1}close(){this.onTimeChange=void 0,this.onEnded=void 0,this.onWaitingChanged=void 0,this.unsubscribe(),GE(this.element),this.element=void 0}subscribe(){this.element&&(this.element.addEventListener("timeupdate",this.handleTimeUpdate),this.element.addEventListener("ended",this.handleEnded),this.element.addEventListener("waiting",this.handleWaitingChanged),this.element.addEventListener("playing",this.handleWaitingChanged))}unsubscribe(){this.element&&(this.element.removeEventListener("timeupdate",this.handleTimeUpdate),this.element.removeEventListener("ended",this.handleEnded),this.element.removeEventListener("waiting",this.handleWaitingChanged),this.element.removeEventListener("playing",this.handleWaitingChanged))}},Vj=class{constructor(e,r,o){this.startSecond=Date.now()/1e3,this.timerId=window.setInterval(o,e*1e3),this.speedScale=r}close(){window.clearInterval(this.timerId)}get elapsedTime(){return(Date.now()/1e3-this.startSecond)*this.speedScale}},zL=class{constructor(e){this._duration=e;this.offset=0;this.muted=!0;this.volume=0;this.speedScale=1;this._frozen=!1;this.handleTick=()=>{var r,o;let e=this.currentTime;e>this._duration?((r=this.onEnded)==null||r.call(this),this.pause()):(o=this.onTimeChange)==null||o.call(this,e)}}set duration(e){this._duration=e}get currentTime(){var r,o;let e=this.frozen?0:1;return this.offset+((o=(r=this.generator)==null?void 0:r.elapsedTime)!=null?o:0)*e}close(){var e;(e=this.generator)==null||e.close(),this.generator=void 0,this.onTimeChange=void 0,this.onEnded=void 0}pause(){var e;this.offset=this.currentTime,(e=this.generator)==null||e.close(),this.generator=void 0}play(e){return this.playing||(this.offset=e,this.generator=this.createGenerator()),Promise.resolve()}seek(e){this.offset=e,this.reset()}canSeekTo(e){return!0}setSpeedScale(e){this.offset=this.currentTime,this.speedScale=e,this.reset()}get frozen(){return this._frozen}freeze(){this.offset=this.currentTime,this._frozen=!0}thaw(){this._frozen=!1}get playing(){return this.generator!==void 0}reset(){var e;this.generator&&((e=this.generator)==null||e.close(),this.generator=this.createGenerator())}createGenerator(){return new Vj(zL.INTERVAL,this.speedScale,this.handleTick)}},_0=zL;_0.INTERVAL=.1;function $j(t){return t.readyState<HTMLMediaElement.HAVE_FUTURE_DATA||isNaN(t.duration)}var $f=class{get player(){return this._player}initialize(e){var h,f,m,g;let r,o=e.duration,i=VE(e)/2,s=v=>{var y;return(y=this.onDurationChange)==null?void 0:y.call(this,v)},a=()=>{var v;return(v=this.onReady)==null?void 0:v.call(this)};if(e instanceof Ao){let v=ue.fileManager.getContentAssetUrl(e),y=(h=e.content.asset)==null?void 0:h.extension;v&&(r=eh.makeVideo({src:v,duration:o,volume:i,isWebm:pd(y),onDurationChange:s,onReady:a}))}else if(e instanceof Yo){let v=ue.fileManager.getContentAssetUrl(e),y=(f=e.content.asset)==null?void 0:f.extension;v&&(r=eh.makeAudio({src:v,duration:o,volume:i,isWebm:pd(y),onDurationChange:s,onReady:a}))}let l=r!=null?r:eh.makeEmpty(o,a),{naration:c,bgm:d}=e.gadgets,u=ue.res.assetUrl((m=c==null?void 0:c.asset)==null?void 0:m.remote_id),p=ue.res.assetUrl((g=d==null?void 0:d.asset)==null?void 0:g.remote_id);c&&u&&l.addSubTrack({url:u,trackId:$f.TRACK_ID_NARRATION,volume:c.source_volume/2,offset:c.start_point,loop:!1}),d&&p&&l.addSubTrack({url:p,trackId:$f.TRACK_ID_BGM,volume:i,offset:0,loop:!0}),this._player=l,l.onTimeChange=v=>{var y;(y=this.onTimeChange)==null||y.call(this,v)},l.onEnded=()=>{var v;(v=this.onEnded)==null||v.call(this)},this._player=l,this.card=e}uninitialize(){var e;this.onDurationChange=void 0,(e=this._player)==null||e.close(),this._player=void 0}setNarration(e){var s;let r=this._player;if(!r)return;r.removeSubTrack($f.TRACK_ID_NARRATION,e.duration);let{naration:o}=e.gadgets;if(!o||!o.asset)return;let i=ue.res.assetUrl((s=o.asset)==null?void 0:s.remote_id);!i||r.addSubTrack({url:i,trackId:$f.TRACK_ID_NARRATION,volume:o.source_volume/2,offset:o.start_point,loop:!1,duration:e.duration})}setNarrationDuration(e){!this.player||this.player.duration===e||(this.player.duration=e)}apply(e,r={syncTime:!1}){let o=this._player;if(!this.card||!o)return;let{avPlaying:i,avSeekTime:s,avVolume:a,avMuted:l,avSpeedScale:c,narrationVolume:d,setAvMuted:u,setAvSeekTime:p}=e,{syncTime:h}=r;o.onMuteChanged=u,h&&(o.onSeekTimeUpdated=f=>{Tl(s,f)||p(f,h)},o.seek(s)),o.setMuted(l),o.setMainTrackVolume(a/2),o.setSubTrackVolume($f.TRACK_ID_NARRATION,d/2),o.setSubTrackVolume($f.TRACK_ID_BGM,a/2),o.setSpeedScale(c),o.apply(i)}},Vw=$f;Vw.TRACK_ID_NARRATION=2,Vw.TRACK_ID_BGM=3;async function UL(t){return new Promise((e,r)=>{let o=document.createElement("video");o.preload="auto",o.src=t,o.load(),o.onloadeddata=()=>{e(o)},o.onerror=r})}async function kB(t){return new Promise((e,r)=>{let o=new Audio(t);o.onloadeddata=()=>{e(o)},o.onerror=r,o.load()})}function GE(t){!t||(t.removeAttribute("src"),t.load())}var zi=class{constructor(e){this.thumbnailType="image/jpeg";this.video=e.video,this.extension=e.extension,this.name=e.name,this.contentType=e.contentType,this.duration=e.duration}static async fromFile(e){let r=hi(e);if(!al(r))throw new Error("file is not video: "+r);let o=URL.createObjectURL(e);try{let i=no.get(r),s=await UL(o);if(!rve(s.videoWidth,s.videoHeight))throw new Bl("size of video file is invalid.");let a=s.duration;return $e(ga(a),"duration must be positive finite number"),new zi({video:s,extension:i,name:e.name,contentType:r,duration:a})}finally{URL.revokeObjectURL(o)}}static async fromObjectUrl(e,r){if(!al(r))throw new Error(`unsupported video content type: "${r}"`);let o=no.get(r),i=await UL(e),s=i.duration;return $e(ga(s),"duration must be positive finite number"),new zi({video:i,extension:o,name:`captured${o}`,contentType:r,duration:s})}getLayoutSize(){return[xr(Ze(this.video.videoWidth,this.video.videoHeight),Gt)]}insert(e){let r=Ze(this.video.videoWidth,this.video.videoHeight);return Ef({position:e.position,author:{id:e.user.user_id,name:Ut(e.user)},asset:{description:this.name,extension:this.extension},type:"video",avDuration:this.duration,contentSize:r,startPosition:e.startPosition})}toCards({parent:e,position:r,user:o}){let i=e?Ho(e.size):1,s=Ze(this.video.videoWidth,this.video.videoHeight);return[jp({scaleToParent:i,position:r,author:{id:o.user_id,name:Ut(o)},duration:this.duration,contentSize:s,asset:{description:this.name,extension:this.extension}})]}getMetadata(){return[{width:this.video.videoWidth,height:this.video.videoHeight,duration:this.duration}]}async*generateThumbnails(){yield $E(await this.generateHeadThumbnail(),"image/jpeg")}async generateHeadThumbnail(){let e=Dr.create(this.video.videoWidth,this.video.videoHeight);return e.getContext2dForce().drawImage(this.video,0,0),e}};function rve(t,e){return t&&!isNaN(t)&&isFinite(t)&&e&&!isNaN(e)&&isFinite(e)}var Ec=class extends Error{constructor(e){let r=Xs(e.name),o=e.type.length>0?e.type:"unknown",i=`File not supported. File Type: "${o}", Extension: "${Xs(e.name)}"`;super(i);this.type=o,this.extension=r}},Bl=class extends Error{constructor(e){super(e)}};async function Pu(t){let e=hi(t),r=Xs(t.name);if(qx(e))return $o.fromFile(t);if(RN(r))return Hj(t);if(al(e))return zi.fromFile(t);if(p9(e))return Is.fromFile(t);if(lP(e))return Af.fromFile(t);throw new Ec(t)}async function $E(t,e){let r=xr(t,ou),o=xr(t,ff),i=dl(t,r),s=dl(t,o);return{high:t,medium:s,small:i,contentType:e}}function Wj({doc:t,metadata:e,startPosition:r,position:o,author:i}){var a;let s={remote_id:Uk(t.asset_proxy),extension:t.extension,description:t.name};if(cP(t.extension))return u0({position:o,author:i,contentSize:e[0],asset:s,startPosition:r});if(RN(t.extension)){let[l]=e,c=Dl(l);return Ef({position:o,author:i,asset:s,contentSize:c?l:void 0,type:c?"video":"audio",avDuration:(a=l==null?void 0:l.duration)!=null?a:0,startPosition:r})}else{if(Rp(t.extension))return Ef({position:o,author:i,asset:s,type:"audio",avDuration:e[0].duration,startPosition:r});if(_y(t.extension))return Ef({position:o,author:i,contentSize:e[0],asset:s,type:"video",avDuration:e[0].duration,startPosition:r});if(dP(t.extension))return p0({author:i,asset:s,position:o,pageSizeList:e,cardArea:Rr(Gt),startPosition:r});throw new Error("invalid state")}}function Xs(t){let e=t.lastIndexOf(".");return e<1?"":t.substr(e)}function f0(t){let e=t.lastIndexOf(".");return t.slice(0,e)}function hi(t){if(t.type===""){let e=Xs(t.name).toLowerCase();return Ey.get(e)||""}else return t.type}async function Wf(t,e,r){let o=await LL(t);return new File([o],e,{type:r})}async function LL(t){let e=await fetch(t);if(e.status!==200)throw new Error(`could not fetch ObjectURL: (${e.status}) "${e.statusText}"`);return e.blob()}async function jj({ext:t,remote_id:e,metadataList:r,author:o}){var a,l;let i={extension:t,remote_id:e},[s]=r;if(cP(t))return Ys(Wp({asset:i,contentSize:Ze(s),author:o}));if(pd(t))return Dl(s)===!0?Ys(jp({author:o,asset:i,duration:(a=s==null?void 0:s.duration)!=null?a:0,contentSize:Ze(s)})):Ys(cv({author:o,asset:i,duration:(l=s==null?void 0:s.duration)!=null?l:0,contentSize:Yi}));if(_y(t))return Ys(jp({author:o,asset:i,duration:s.duration,contentSize:Ze(s)}));if(Rp(t))return Ys(cv({author:o,asset:i,duration:s.duration}));if(dP(t)){let c=r.map((d,u)=>Ys(Rl({author:o,asset:i,pageIndex:u,pageSize:Ze(d),layoutSize:xr(d,Gt),position:Re()})));for(let d=0;d<c.length-1;d++){let u=c[d],p=c[d+1];u.connect(p)}return $e(c.length>0),c[0]}else throw new Error("unsupported extension: "+t)}var jE=X(Kj());var $o=class{constructor(e,r,o,i,s){this.image=e;this.extension=r;this.name=o;this.contentType=i;this.file=s;this.thumbnailType=i==="image/jpeg"?"image/jpeg":"image/png"}static async fromFile(e){let r=hi(e);if(!qx(r))throw new Error("non image file: "+r);let o=URL.createObjectURL(e);try{return new $o(await Na({url:o}),no.get(r),e.name,r,e)}finally{URL.revokeObjectURL(o)}}static async fromObjectURL(e,r){if(!qx(r))throw new Error("non image file: "+r);let o=no.get(r),i=`captured${o}`;return new $o(await Na({url:e}),o,i,r,await Wf(e,i,r))}getLayoutSize(){return[xr(this.image,Gt)]}insert(e){return u0({position:e.position,author:{id:e.user.user_id,name:Ut(e.user)},contentSize:Ze(this.image),asset:{description:this.name,extension:this.extension},startPosition:e.startPosition})}toCards({parent:e,position:r,user:o}){let i=e?Ho(e.size):1;return[Wp({scaleToParent:i,position:r,author:{id:o.user_id,name:Ut(o)},contentSize:Ze(this.image),asset:{description:this.name,extension:this.extension}})]}getMetadata(){return[{width:this.image.width,height:this.image.height}]}async*generateThumbnails(){yield $E(this.image,this.thumbnailType)}async generateHeadThumbnail(){return this.image}};function qj(t){return new Promise(e=>{jE.getData(t,()=>{let o=jE.getTag(t,"Orientation")||0;e({image:t,orientation:o})})||e({image:t,orientation:0})})}function Yj(t){let e=90/180*Math.PI,r=new ft;switch(t){case 2:r.scale(-1,1);break;case 3:r.scale(-1,-1);break;case 4:r.scale(1,-1);break;case 5:r.rotate(e).scale(-1,1);break;case 6:r.rotate(e);break;case 7:r.rotate(-e).scale(-1,1);break;case 8:r.rotate(-e);break}return r}function Xj(t,e){switch(e){case 5:case 6:case 7:case 8:return Ze(t.height,t.width);default:return t}}var jf=async t=>new Promise((e,r)=>{setTimeout(e,t.delay*t.unit)});var wv=5;async function KE({url:t,maxRetryCount:e,signal:r}){return Qj({url:t,maxRetryCount:e,retryCount:0,signal:r,method:"GET"}).then(o=>o==null?void 0:o.blob())}async function Qj({url:t,maxRetryCount:e,retryCount:r,signal:o,method:i}){let s=await fetch(t,{method:i,signal:o});if(s.status===200)return s;if(s.status===202)return e<=r?void 0:(await jf({delay:wv,unit:pr.sec}),Qj({url:t,maxRetryCount:e,retryCount:r+1,signal:o,method:i}));throw new Yr(s.status,await s.text())}var Zj=X(Jj()),EUe=new Map([["Chrome",72],["Edge",80],["Edge Android",45],["Safari",13],["Mobile Safari",13],["Firefox",68]]);function eK(t){let e=new Zj.UAParser(t),r=e.getBrowser();if(!r||!r.version)return!1;let o=parseFloat(r.version);switch(r.name){case"Chrome":return o>=81;case"Safari":return o>=13.1;case"Firefox":return o>=76;case"Edge":let i=e.getOS();if(i.name==="Windows"||i.name==="Mac OS")return o>=81;if(i.name==="Android")return!1;if(i.name==="iOS")return!1;break}return!1}function A0(t){return sve()&&!t.type.includes("svg")?createImageBitmap(t):new Promise((e,r)=>{let o=URL.createObjectURL(t),i=new Image;i.addEventListener("load",()=>e(i)),i.addEventListener("error",r),i.src=o})}async function oE(t){return new Promise((e,r)=>{let o=new FileReader;o.onload=()=>{o.result instanceof ArrayBuffer?e(o.result):r(new Error("failed to read"))},o.onerror=()=>{r(o.error)},o.readAsArrayBuffer(t)})}async function jw({url:t,maxRetryCount:e=5,signal:r}){let o=await KE({url:t,maxRetryCount:e,signal:r});if(o)return o=await HL(o),o;throw new Error("retry failed")}function nve(t,e,r,o,i,s,a){let l=Yj(r);if(l.isIdentity)t.drawImage(e,o,i,s,a);else{t.save();let c=ts(e,{width:s,height:a});t.translate(o+s/2,i+a/2),t.transform(l.a,l.b,l.c,l.d,l.tx,l.ty),t.scale(c,c),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),t.restore()}}async function HL(t){let e=await qj(t),{image:r,orientation:o}=e,i=navigator.userAgent;return eK(i)||o<2?r:A0(r).then(a=>{let l=Xj(a,o),c=Dr.create(l.width,l.height),d=c.getContext2dForce();return nve(d,a,o,0,0,l.width,l.height),tK(c,"image/jpeg",1)})}async function Na(t){return jw(t).then(A0)}async function xo(t,e,r){let o=await ive(t,e,1);return new File([o],r,{type:e})}function ove(t){let e;if(t instanceof HTMLCanvasElement)e=t;else{let r=Dr.create();t instanceof HTMLVideoElement?(r.width=t.videoWidth,r.height=t.videoHeight):(r.width=t.width,r.height=t.height),r.getContext2dForce().drawImage(t,0,0),e=r}return e}async function ive(t,e,r){let o=await tK(t,e,r);return typeof o.arrayBuffer=="function"?o.arrayBuffer():new Promise((i,s)=>{let a=new FileReader;a.onload=()=>{let l=a.result;i(l)},a.onerror=s,a.readAsArrayBuffer(o)})}async function tK(t,e,r){let o=ove(t);return new Promise((i,s)=>{o.toBlob(a=>{a?i(a):s()},e,r?ht(r,0,1):void 0)})}function dl(t,e){let r=Dr.create(e);return r.getContext2dForce().drawImage(t,0,0,e.width,e.height),r}var rK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function sve(){return typeof globalThis.ImageBitmap!="undefined"&&typeof globalThis.createImageBitmap!="undefined"}function YE(t,e){let r=Dr.create(t.height,t.width),o=r.getContext2dForce();o.save(),o.translate(r.width/2,r.height/2);let i=e==="left"?-1:1;return o.rotate(i*Math.PI/2),o.drawImage(t,-t.width/2,-t.height/2),o.restore(),r}function I0(t){let e=/^data:image\/png;base64,/;if(!RegExp(e).test(t))throw Error("Unmatched base64-png-image when decoding string.");let r=atob(t.replace(e,""));for(var o=new Uint8Array(r.length),i=0;i<r.length;i++)o[i]=r.charCodeAt(i);return new File([o],"file_image.png",{type:"image/png"})}String.prototype.codePointAt||function(){var t=function(){try{var r={},o=Object.defineProperty,i=o(r,r,r)&&o}catch(s){}return i}(),e=function(r){if(this==null)throw TypeError();var o=String(this),i=o.length,s=r?Number(r):0;if(s!=s&&(s=0),!(s<0||s>=i)){var a=o.charCodeAt(s),l;return a>=55296&&a<=56319&&i>s+1&&(l=o.charCodeAt(s+1),l>=56320&&l<=57343)?(a-55296)*1024+l-56320+65536:a}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var GL=0,nK=-3;function Kw(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function ave(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new Kw,this.dtree=new Kw}var oK=new Kw,iK=new Kw,VL=new Uint8Array(30),$L=new Uint16Array(30),sK=new Uint8Array(30),aK=new Uint16Array(30),lve=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lK=new Kw,Eu=new Uint8Array(288+32);function cK(t,e,r,o){var i,s;for(i=0;i<r;++i)t[i]=0;for(i=0;i<30-r;++i)t[i+r]=i/r|0;for(s=o,i=0;i<30;++i)e[i]=s,s+=1<<t[i]}function cve(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[24+144+r]=280+r;for(r=0;r<112;++r)t.trans[24+144+8+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}var dK=new Uint16Array(16);function WL(t,e,r,o){var i,s;for(i=0;i<16;++i)t.table[i]=0;for(i=0;i<o;++i)t.table[e[r+i]]++;for(t.table[0]=0,s=0,i=0;i<16;++i)dK[i]=s,s+=t.table[i];for(i=0;i<o;++i)e[r+i]&&(t.trans[dK[e[r+i]]++]=i)}function dve(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=t.tag&1;return t.tag>>>=1,e}function _u(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var o=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,o+r}function jL(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,o=0,i=0,s=t.tag;do o=2*o+(s&1),s>>>=1,++i,r+=e.table[i],o-=e.table[i];while(o>=0);return t.tag=s,t.bitcount-=i,e.trans[r+o]}function uve(t,e,r){var o,i,s,a,l,c;for(o=_u(t,5,257),i=_u(t,5,1),s=_u(t,4,4),a=0;a<19;++a)Eu[a]=0;for(a=0;a<s;++a){var d=_u(t,3,0);Eu[lve[a]]=d}for(WL(lK,Eu,0,19),l=0;l<o+i;){var u=jL(t,lK);switch(u){case 16:var p=Eu[l-1];for(c=_u(t,2,3);c;--c)Eu[l++]=p;break;case 17:for(c=_u(t,3,3);c;--c)Eu[l++]=0;break;case 18:for(c=_u(t,7,11);c;--c)Eu[l++]=0;break;default:Eu[l++]=u;break}}WL(e,Eu,0,o),WL(r,Eu,o,i)}function uK(t,e,r){for(;;){var o=jL(t,e);if(o===256)return GL;if(o<256)t.dest[t.destLen++]=o;else{var i,s,a,l;for(o-=257,i=_u(t,VL[o],$L[o]),s=jL(t,r),a=t.destLen-_u(t,sK[s],aK[s]),l=a;l<a+i;++l)t.dest[t.destLen++]=t.dest[l]}}}function pve(t){for(var e,r,o;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],r=t.source[t.sourceIndex+3],r=256*r+t.source[t.sourceIndex+2],e!==(~r&65535))return nK;for(t.sourceIndex+=4,o=e;o;--o)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,GL}function hve(t,e){var r=new ave(t,e),o,i,s;do{switch(o=dve(r),i=_u(r,2,0),i){case 0:s=pve(r);break;case 1:s=uK(r,oK,iK);break;case 2:uve(r,r.ltree,r.dtree),s=uK(r,r.ltree,r.dtree);break;default:s=nK}if(s!==GL)throw new Error("Data error")}while(!o);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}cve(oK,iK);cK(VL,$L,4,3);cK(sK,aK,2,1);VL[28]=0;$L[28]=258;var fve=hve;function R0(t,e,r,o,i){return Math.pow(1-i,3)*t+3*Math.pow(1-i,2)*i*e+3*(1-i)*Math.pow(i,2)*r+Math.pow(i,3)*o}function Kf(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Kf.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Kf.prototype.addPoint=function(t,e){typeof t=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};Kf.prototype.addX=function(t){this.addPoint(t,null)};Kf.prototype.addY=function(t){this.addPoint(null,t)};Kf.prototype.addBezier=function(t,e,r,o,i,s,a,l){var c=[t,e],d=[r,o],u=[i,s],p=[a,l];this.addPoint(t,e),this.addPoint(a,l);for(var h=0;h<=1;h++){var f=6*c[h]-12*d[h]+6*u[h],m=-3*c[h]+9*d[h]-9*u[h]+3*p[h],g=3*d[h]-3*c[h];if(m===0){if(f===0)continue;var v=-g/f;0<v&&v<1&&(h===0&&this.addX(R0(c[h],d[h],u[h],p[h],v)),h===1&&this.addY(R0(c[h],d[h],u[h],p[h],v)));continue}var y=Math.pow(f,2)-4*g*m;if(!(y<0)){var S=(-f+Math.sqrt(y))/(2*m);0<S&&S<1&&(h===0&&this.addX(R0(c[h],d[h],u[h],p[h],S)),h===1&&this.addY(R0(c[h],d[h],u[h],p[h],S)));var C=(-f-Math.sqrt(y))/(2*m);0<C&&C<1&&(h===0&&this.addX(R0(c[h],d[h],u[h],p[h],C)),h===1&&this.addY(R0(c[h],d[h],u[h],p[h],C)))}}};Kf.prototype.addQuad=function(t,e,r,o,i,s){var a=t+2/3*(r-t),l=e+2/3*(o-e),c=a+1/3*(i-t),d=l+1/3*(s-e);this.addBezier(t,e,a,l,c,d,i,s)};function gs(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}gs.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})};gs.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})};gs.prototype.curveTo=gs.prototype.bezierCurveTo=function(t,e,r,o,i,s){this.commands.push({type:"C",x1:t,y1:e,x2:r,y2:o,x:i,y:s})};gs.prototype.quadTo=gs.prototype.quadraticCurveTo=function(t,e,r,o){this.commands.push({type:"Q",x1:t,y1:e,x:r,y:o})};gs.prototype.close=gs.prototype.closePath=function(){this.commands.push({type:"Z"})};gs.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof Kf){var e=t;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,t)};gs.prototype.getBoundingBox=function(){for(var t=new Kf,e=0,r=0,o=0,i=0,s=0;s<this.commands.length;s++){var a=this.commands[s];switch(a.type){case"M":t.addPoint(a.x,a.y),e=o=a.x,r=i=a.y;break;case"L":t.addPoint(a.x,a.y),o=a.x,i=a.y;break;case"Q":t.addQuad(o,i,a.x1,a.y1,a.x,a.y),o=a.x,i=a.y;break;case"C":t.addBezier(o,i,a.x1,a.y1,a.x2,a.y2,a.x,a.y),o=a.x,i=a.y;break;case"Z":o=e,i=r;break;default:throw new Error("Unexpected path command "+a.type)}}return t.isEmpty()&&t.addPoint(0,0),t};gs.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var r=this.commands[e];r.type==="M"?t.moveTo(r.x,r.y):r.type==="L"?t.lineTo(r.x,r.y):r.type==="C"?t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):r.type==="Q"?t.quadraticCurveTo(r.x1,r.y1,r.x,r.y):r.type==="Z"&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())};gs.prototype.toPathData=function(t){t=t!==void 0?t:2;function e(a){return Math.round(a)===a?""+Math.round(a):a.toFixed(t)}function r(){for(var a=arguments,l="",c=0;c<arguments.length;c+=1){var d=a[c];d>=0&&c>0&&(l+=" "),l+=e(d)}return l}for(var o="",i=0;i<this.commands.length;i+=1){var s=this.commands[i];s.type==="M"?o+="M"+r(s.x,s.y):s.type==="L"?o+="L"+r(s.x,s.y):s.type==="C"?o+="C"+r(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?o+="Q"+r(s.x1,s.y1,s.x,s.y):s.type==="Z"&&(o+="Z")}return o};gs.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};gs.prototype.toDOMElement=function(t){var e=this.toPathData(t),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",e),r};function pK(t){throw new Error(t)}function hK(t,e){t||pK(e)}var sn={fail:pK,argument:hK,assert:hK},fK=32768,mK=2147483648,F0={},Bt={},Mr={};function Dd(t){return function(){return t}}Bt.BYTE=function(t){return sn.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]};Mr.BYTE=Dd(1);Bt.CHAR=function(t){return[t.charCodeAt(0)]};Mr.CHAR=Dd(1);Bt.CHARARRAY=function(t){for(var e=[],r=0;r<t.length;r+=1)e[r]=t.charCodeAt(r);return e};Mr.CHARARRAY=function(t){return t.length};Bt.USHORT=function(t){return[t>>8&255,t&255]};Mr.USHORT=Dd(2);Bt.SHORT=function(t){return t>=fK&&(t=-(2*fK-t)),[t>>8&255,t&255]};Mr.SHORT=Dd(2);Bt.UINT24=function(t){return[t>>16&255,t>>8&255,t&255]};Mr.UINT24=Dd(3);Bt.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]};Mr.ULONG=Dd(4);Bt.LONG=function(t){return t>=mK&&(t=-(2*mK-t)),[t>>24&255,t>>16&255,t>>8&255,t&255]};Mr.LONG=Dd(4);Bt.FIXED=Bt.ULONG;Mr.FIXED=Mr.ULONG;Bt.FWORD=Bt.SHORT;Mr.FWORD=Mr.SHORT;Bt.UFWORD=Bt.USHORT;Mr.UFWORD=Mr.USHORT;Bt.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]};Mr.LONGDATETIME=Dd(8);Bt.TAG=function(t){return sn.argument(t.length===4,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]};Mr.TAG=Dd(4);Bt.Card8=Bt.BYTE;Mr.Card8=Mr.BYTE;Bt.Card16=Bt.USHORT;Mr.Card16=Mr.USHORT;Bt.OffSize=Bt.BYTE;Mr.OffSize=Mr.BYTE;Bt.SID=Bt.USHORT;Mr.SID=Mr.USHORT;Bt.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t=t-108,[(t>>8)+247,t&255]):t>=-1131&&t<=-108?(t=-t-108,[(t>>8)+251,t&255]):t>=-32768&&t<=32767?Bt.NUMBER16(t):Bt.NUMBER32(t)};Mr.NUMBER=function(t){return Bt.NUMBER(t).length};Bt.NUMBER16=function(t){return[28,t>>8&255,t&255]};Mr.NUMBER16=Dd(3);Bt.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,t&255]};Mr.NUMBER32=Dd(5);Bt.REAL=function(t){var e=t.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(r){var o=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));e=(Math.round(t*o)/o).toString()}for(var i="",s=0,a=e.length;s<a;s+=1){var l=e[s];l==="e"?i+=e[++s]==="-"?"c":"b":l==="."?i+="a":l==="-"?i+="e":i+=l}i+=i.length&1?"f":"ff";for(var c=[30],d=0,u=i.length;d<u;d+=2)c.push(parseInt(i.substr(d,2),16));return c};Mr.REAL=function(t){return Bt.REAL(t).length};Bt.NAME=Bt.CHARARRAY;Mr.NAME=Mr.CHARARRAY;Bt.STRING=Bt.CHARARRAY;Mr.STRING=Mr.CHARARRAY;F0.UTF8=function(t,e,r){for(var o=[],i=r,s=0;s<i;s++,e+=1)o[s]=t.getUint8(e);return String.fromCharCode.apply(null,o)};F0.UTF16=function(t,e,r){for(var o=[],i=r/2,s=0;s<i;s++,e+=2)o[s]=t.getUint16(e);return String.fromCharCode.apply(null,o)};Bt.UTF16=function(t){for(var e=[],r=0;r<t.length;r+=1){var o=t.charCodeAt(r);e[e.length]=o>>8&255,e[e.length]=o&255}return e};Mr.UTF16=function(t){return t.length*2};var KL={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};F0.MACSTRING=function(t,e,r,o){var i=KL[o];if(i!==void 0){for(var s="",a=0;a<r;a++){var l=t.getUint8(e+a);l<=127?s+=String.fromCharCode(l):s+=i[l&127]}return s}};var XE=typeof WeakMap=="function"&&new WeakMap,QE,mve=function(t){if(!QE){QE={};for(var e in KL)QE[e]=new String(e)}var r=QE[t];if(r!==void 0){if(XE){var o=XE.get(r);if(o!==void 0)return o}var i=KL[t];if(i!==void 0){for(var s={},a=0;a<i.length;a++)s[i.charCodeAt(a)]=a+128;return XE&&XE.set(r,s),s}}};Bt.MACSTRING=function(t,e){var r=mve(e);if(r!==void 0){for(var o=[],i=0;i<t.length;i++){var s=t.charCodeAt(i);if(s>=128&&(s=r[s],s===void 0))return;o[i]=s}return o}};Mr.MACSTRING=function(t,e){var r=Bt.MACSTRING(t,e);return r!==void 0?r.length:0};function qL(t){return t>=-128&&t<=127}function gve(t,e,r){for(var o=0,i=t.length;e<i&&o<64&&t[e]===0;)++e,++o;return r.push(128|o-1),e}function vve(t,e,r){for(var o=0,i=t.length,s=e;s<i&&o<64;){var a=t[s];if(!qL(a)||a===0&&s+1<i&&t[s+1]===0)break;++s,++o}r.push(o-1);for(var l=e;l<s;++l)r.push(t[l]+256&255);return s}function bve(t,e,r){for(var o=0,i=t.length,s=e;s<i&&o<64;){var a=t[s];if(a===0||qL(a)&&s+1<i&&qL(t[s+1]))break;++s,++o}r.push(64|o-1);for(var l=e;l<s;++l){var c=t[l];r.push(c+65536>>8&255,c+256&255)}return s}Bt.VARDELTAS=function(t){for(var e=0,r=[];e<t.length;){var o=t[e];o===0?e=gve(t,e,r):o>=-128&&o<=127?e=vve(t,e,r):e=bve(t,e,r)}return r};Bt.INDEX=function(t){for(var e=1,r=[e],o=[],i=0;i<t.length;i+=1){var s=Bt.OBJECT(t[i]);Array.prototype.push.apply(o,s),e+=s.length,r.push(e)}if(o.length===0)return[0,0];for(var a=[],l=1+Math.floor(Math.log(e)/Math.log(2))/8|0,c=[void 0,Bt.BYTE,Bt.USHORT,Bt.UINT24,Bt.ULONG][l],d=0;d<r.length;d+=1){var u=c(r[d]);Array.prototype.push.apply(a,u)}return Array.prototype.concat(Bt.Card16(t.length),Bt.OffSize(l),a,o)};Mr.INDEX=function(t){return Bt.INDEX(t).length};Bt.DICT=function(t){for(var e=[],r=Object.keys(t),o=r.length,i=0;i<o;i+=1){var s=parseInt(r[i],0),a=t[s];e=e.concat(Bt.OPERAND(a.value,a.type)),e=e.concat(Bt.OPERATOR(s))}return e};Mr.DICT=function(t){return Bt.DICT(t).length};Bt.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]};Bt.OPERAND=function(t,e){var r=[];if(Array.isArray(e))for(var o=0;o<e.length;o+=1)sn.argument(t.length===e.length,"Not enough arguments given for type"+e),r=r.concat(Bt.OPERAND(t[o],e[o]));else if(e==="SID")r=r.concat(Bt.NUMBER(t));else if(e==="offset")r=r.concat(Bt.NUMBER32(t));else if(e==="number")r=r.concat(Bt.NUMBER(t));else if(e==="real")r=r.concat(Bt.REAL(t));else throw new Error("Unknown operand type "+e);return r};Bt.OP=Bt.BYTE;Mr.OP=Mr.BYTE;var JE=typeof WeakMap=="function"&&new WeakMap;Bt.CHARSTRING=function(t){if(JE){var e=JE.get(t);if(e!==void 0)return e}for(var r=[],o=t.length,i=0;i<o;i+=1){var s=t[i];r=r.concat(Bt[s.type](s.value))}return JE&&JE.set(t,r),r};Mr.CHARSTRING=function(t){return Bt.CHARSTRING(t).length};Bt.OBJECT=function(t){var e=Bt[t.type];return sn.argument(e!==void 0,"No encoding function for type "+t.type),e(t.value)};Mr.OBJECT=function(t){var e=Mr[t.type];return sn.argument(e!==void 0,"No sizeOf function for type "+t.type),e(t.value)};Bt.TABLE=function(t){for(var e=[],r=t.fields.length,o=[],i=[],s=0;s<r;s+=1){var a=t.fields[s],l=Bt[a.type];sn.argument(l!==void 0,"No encoding function for field type "+a.type+" ("+a.name+")");var c=t[a.name];c===void 0&&(c=a.value);var d=l(c);a.type==="TABLE"?(i.push(e.length),e=e.concat([0,0]),o.push(d)):e=e.concat(d)}for(var u=0;u<o.length;u+=1){var p=i[u],h=e.length;sn.argument(h<65536,"Table "+t.tableName+" too big."),e[p]=h>>8,e[p+1]=h&255,e=e.concat(o[u])}return e};Mr.TABLE=function(t){for(var e=0,r=t.fields.length,o=0;o<r;o+=1){var i=t.fields[o],s=Mr[i.type];sn.argument(s!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");var a=t[i.name];a===void 0&&(a=i.value),e+=s(a),i.type==="TABLE"&&(e+=2)}return e};Bt.RECORD=Bt.TABLE;Mr.RECORD=Mr.TABLE;Bt.LITERAL=function(t){return t};Mr.LITERAL=function(t){return t.length};function Js(t,e,r){for(var o=0;o<e.length;o+=1){var i=e[o];this[i.name]=i.value}if(this.tableName=t,this.fields=e,r)for(var s=Object.keys(r),a=0;a<s.length;a+=1){var l=s[a],c=r[l];this[l]!==void 0&&(this[l]=c)}}Js.prototype.encode=function(){return Bt.TABLE(this)};Js.prototype.sizeOf=function(){return Mr.TABLE(this)};function qw(t,e,r){r===void 0&&(r=e.length);var o=new Array(e.length+1);o[0]={name:t+"Count",type:"USHORT",value:r};for(var i=0;i<e.length;i++)o[i+1]={name:t+i,type:"USHORT",value:e[i]};return o}function YL(t,e,r){var o=e.length,i=new Array(o+1);i[0]={name:t+"Count",type:"USHORT",value:o};for(var s=0;s<o;s++)i[s+1]={name:t+s,type:"TABLE",value:r(e[s],s)};return i}function ZE(t,e,r){var o=e.length,i=[];i[0]={name:t+"Count",type:"USHORT",value:o};for(var s=0;s<o;s++)i=i.concat(r(e[s],s));return i}function e_(t){t.format===1?Js.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(qw("glyph",t.glyphs))):sn.assert(!1,"Can't create coverage table format 2 yet.")}e_.prototype=Object.create(Js.prototype);e_.prototype.constructor=e_;function t_(t){Js.call(this,"scriptListTable",ZE("scriptRecord",t,function(e,r){var o=e.script,i=o.defaultLangSys;return sn.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+r,type:"TAG",value:e.tag},{name:"script"+r,type:"TABLE",value:new Js("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Js("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(qw("featureIndex",i.featureIndexes)))}].concat(ZE("langSys",o.langSysRecords,function(s,a){var l=s.langSys;return[{name:"langSysTag"+a,type:"TAG",value:s.tag},{name:"langSys"+a,type:"TABLE",value:new Js("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:l.reqFeatureIndex}].concat(qw("featureIndex",l.featureIndexes)))}]})))}]}))}t_.prototype=Object.create(Js.prototype);t_.prototype.constructor=t_;function r_(t){Js.call(this,"featureListTable",ZE("featureRecord",t,function(e,r){var o=e.feature;return[{name:"featureTag"+r,type:"TAG",value:e.tag},{name:"feature"+r,type:"TABLE",value:new Js("featureTable",[{name:"featureParams",type:"USHORT",value:o.featureParams}].concat(qw("lookupListIndex",o.lookupListIndexes)))}]}))}r_.prototype=Object.create(Js.prototype);r_.prototype.constructor=r_;function n_(t,e){Js.call(this,"lookupListTable",YL("lookup",t,function(r){var o=e[r.lookupType];return sn.assert(!!o,"Unable to write GSUB lookup type "+r.lookupType+" tables."),new Js("lookupTable",[{name:"lookupType",type:"USHORT",value:r.lookupType},{name:"lookupFlag",type:"USHORT",value:r.lookupFlag}].concat(YL("subtable",r.subtables,o)))}))}n_.prototype=Object.create(Js.prototype);n_.prototype.constructor=n_;var Er={Table:Js,Record:Js,Coverage:e_,ScriptList:t_,FeatureList:r_,LookupList:n_,ushortList:qw,tableList:YL,recordList:ZE};function gK(t,e){return t.getUint8(e)}function o_(t,e){return t.getUint16(e,!1)}function yve(t,e){return t.getInt16(e,!1)}function XL(t,e){return t.getUint32(e,!1)}function vK(t,e){var r=t.getInt16(e,!1),o=t.getUint16(e+2,!1);return r+o/65535}function Cve(t,e){for(var r="",o=e;o<e+4;o+=1)r+=String.fromCharCode(t.getInt8(o));return r}function Sve(t,e,r){for(var o=0,i=0;i<r;i+=1)o<<=8,o+=t.getUint8(e+i);return o}function xve(t,e,r){for(var o=[],i=e;i<r;i+=1)o.push(t.getUint8(i));return o}function wve(t){for(var e="",r=0;r<t.length;r+=1)e+=String.fromCharCode(t[r]);return e}var Tve={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Xe(t,e){this.data=t,this.offset=e,this.relativeOffset=0}Xe.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};Xe.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};Xe.prototype.parseCard8=Xe.prototype.parseByte;Xe.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};Xe.prototype.parseCard16=Xe.prototype.parseUShort;Xe.prototype.parseSID=Xe.prototype.parseUShort;Xe.prototype.parseOffset16=Xe.prototype.parseUShort;Xe.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};Xe.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t};Xe.prototype.parseULong=function(){var t=XL(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};Xe.prototype.parseOffset32=Xe.prototype.parseULong;Xe.prototype.parseFixed=function(){var t=vK(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};Xe.prototype.parseString=function(t){var e=this.data,r=this.offset+this.relativeOffset,o="";this.relativeOffset+=t;for(var i=0;i<t;i++)o+=String.fromCharCode(e.getUint8(r+i));return o};Xe.prototype.parseTag=function(){return this.parseString(4)};Xe.prototype.parseLongDateTime=function(){var t=XL(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t};Xe.prototype.parseVersion=function(t){var e=o_(this.data,this.offset+this.relativeOffset),r=o_(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t===void 0&&(t=4096),e+r/t/10};Xe.prototype.skip=function(t,e){e===void 0&&(e=1),this.relativeOffset+=Tve[t]*e};Xe.prototype.parseULongList=function(t){t===void 0&&(t=this.parseULong());for(var e=new Array(t),r=this.data,o=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=r.getUint32(o),o+=4;return this.relativeOffset+=t*4,e};Xe.prototype.parseOffset16List=Xe.prototype.parseUShortList=function(t){t===void 0&&(t=this.parseUShort());for(var e=new Array(t),r=this.data,o=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=r.getUint16(o),o+=2;return this.relativeOffset+=t*2,e};Xe.prototype.parseShortList=function(t){for(var e=new Array(t),r=this.data,o=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=r.getInt16(o),o+=2;return this.relativeOffset+=t*2,e};Xe.prototype.parseByteList=function(t){for(var e=new Array(t),r=this.data,o=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=r.getUint8(o++);return this.relativeOffset+=t,e};Xe.prototype.parseList=function(t,e){e||(e=t,t=this.parseUShort());for(var r=new Array(t),o=0;o<t;o++)r[o]=e.call(this);return r};Xe.prototype.parseList32=function(t,e){e||(e=t,t=this.parseULong());for(var r=new Array(t),o=0;o<t;o++)r[o]=e.call(this);return r};Xe.prototype.parseRecordList=function(t,e){e||(e=t,t=this.parseUShort());for(var r=new Array(t),o=Object.keys(e),i=0;i<t;i++){for(var s={},a=0;a<o.length;a++){var l=o[a],c=e[l];s[l]=c.call(this)}r[i]=s}return r};Xe.prototype.parseRecordList32=function(t,e){e||(e=t,t=this.parseULong());for(var r=new Array(t),o=Object.keys(e),i=0;i<t;i++){for(var s={},a=0;a<o.length;a++){var l=o[a],c=e[l];s[l]=c.call(this)}r[i]=s}return r};Xe.prototype.parseStruct=function(t){if(typeof t=="function")return t.call(this);for(var e=Object.keys(t),r={},o=0;o<e.length;o++){var i=e[o],s=t[i];r[i]=s.call(this)}return r};Xe.prototype.parseValueRecord=function(t){if(t===void 0&&(t=this.parseUShort()),t!==0){var e={};return t&1&&(e.xPlacement=this.parseShort()),t&2&&(e.yPlacement=this.parseShort()),t&4&&(e.xAdvance=this.parseShort()),t&8&&(e.yAdvance=this.parseShort()),t&16&&(e.xPlaDevice=void 0,this.parseShort()),t&32&&(e.yPlaDevice=void 0,this.parseShort()),t&64&&(e.xAdvDevice=void 0,this.parseShort()),t&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};Xe.prototype.parseValueRecordList=function(){for(var t=this.parseUShort(),e=this.parseUShort(),r=new Array(e),o=0;o<e;o++)r[o]=this.parseValueRecord(t);return r};Xe.prototype.parsePointer=function(t){var e=this.parseOffset16();if(e>0)return new Xe(this.data,this.offset+e).parseStruct(t)};Xe.prototype.parsePointer32=function(t){var e=this.parseOffset32();if(e>0)return new Xe(this.data,this.offset+e).parseStruct(t)};Xe.prototype.parseListOfLists=function(t){for(var e=this.parseOffset16List(),r=e.length,o=this.relativeOffset,i=new Array(r),s=0;s<r;s++){var a=e[s];if(a===0){i[s]=void 0;continue}if(this.relativeOffset=a,t){for(var l=this.parseOffset16List(),c=new Array(l.length),d=0;d<l.length;d++)this.relativeOffset=a+l[d],c[d]=t.call(this);i[s]=c}else i[s]=this.parseUShortList()}return this.relativeOffset=o,i};Xe.prototype.parseCoverage=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort(),r=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(r)};if(e===2){for(var o=new Array(r),i=0;i<r;i++)o[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:o}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")};Xe.prototype.parseClassDef=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:Xe.uShort,end:Xe.uShort,classId:Xe.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")};Xe.list=function(t,e){return function(){return this.parseList(t,e)}};Xe.list32=function(t,e){return function(){return this.parseList32(t,e)}};Xe.recordList=function(t,e){return function(){return this.parseRecordList(t,e)}};Xe.recordList32=function(t,e){return function(){return this.parseRecordList32(t,e)}};Xe.pointer=function(t){return function(){return this.parsePointer(t)}};Xe.pointer32=function(t){return function(){return this.parsePointer32(t)}};Xe.tag=Xe.prototype.parseTag;Xe.byte=Xe.prototype.parseByte;Xe.uShort=Xe.offset16=Xe.prototype.parseUShort;Xe.uShortList=Xe.prototype.parseUShortList;Xe.uLong=Xe.offset32=Xe.prototype.parseULong;Xe.uLongList=Xe.prototype.parseULongList;Xe.struct=Xe.prototype.parseStruct;Xe.coverage=Xe.prototype.parseCoverage;Xe.classDef=Xe.prototype.parseClassDef;var bK={reserved:Xe.uShort,reqFeatureIndex:Xe.uShort,featureIndexes:Xe.uShortList};Xe.prototype.parseScriptList=function(){return this.parsePointer(Xe.recordList({tag:Xe.tag,script:Xe.pointer({defaultLangSys:Xe.pointer(bK),langSysRecords:Xe.recordList({tag:Xe.tag,langSys:Xe.pointer(bK)})})}))||[]};Xe.prototype.parseFeatureList=function(){return this.parsePointer(Xe.recordList({tag:Xe.tag,feature:Xe.pointer({featureParams:Xe.offset16,lookupListIndexes:Xe.uShortList})}))||[]};Xe.prototype.parseLookupList=function(t){return this.parsePointer(Xe.list(Xe.pointer(function(){var e=this.parseUShort();sn.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var r=this.parseUShort(),o=r&16;return{lookupType:e,lookupFlag:r,subtables:this.parseList(Xe.pointer(t[e])),markFilteringSet:o?this.parseUShort():void 0}})))||[]};Xe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var t=this.parseUShort(),e=this.parseUShort();sn.argument(t===1&&e<1,"GPOS/GSUB feature variations table unknown.");var r=this.parseRecordList32({conditionSetOffset:Xe.offset32,featureTableSubstitutionOffset:Xe.offset32});return r})||[]};var ir={getByte:gK,getCard8:gK,getUShort:o_,getCard16:o_,getShort:yve,getULong:XL,getFixed:vK,getTag:Cve,getOffset:Sve,getBytes:xve,bytesToString:wve,Parser:Xe};function Dve(t,e){e.parseUShort(),t.length=e.parseULong(),t.language=e.parseULong();var r;t.groupCount=r=e.parseULong(),t.glyphIndexMap={};for(var o=0;o<r;o+=1)for(var i=e.parseULong(),s=e.parseULong(),a=e.parseULong(),l=i;l<=s;l+=1)t.glyphIndexMap[l]=a,a++}function kve(t,e,r,o,i){t.length=e.parseUShort(),t.language=e.parseUShort();var s;t.segCount=s=e.parseUShort()>>1,e.skip("uShort",3),t.glyphIndexMap={};for(var a=new ir.Parser(r,o+i+14),l=new ir.Parser(r,o+i+16+s*2),c=new ir.Parser(r,o+i+16+s*4),d=new ir.Parser(r,o+i+16+s*6),u=o+i+16+s*8,p=0;p<s-1;p+=1)for(var h=void 0,f=a.parseUShort(),m=l.parseUShort(),g=c.parseShort(),v=d.parseUShort(),y=m;y<=f;y+=1)v!==0?(u=d.offset+d.relativeOffset-2,u+=v,u+=(y-m)*2,h=ir.getUShort(r,u),h!==0&&(h=h+g&65535)):h=y+g&65535,t.glyphIndexMap[y]=h}function Pve(t,e){var r={};r.version=ir.getUShort(t,e),sn.argument(r.version===0,"cmap table version should be 0."),r.numTables=ir.getUShort(t,e+2);for(var o=-1,i=r.numTables-1;i>=0;i-=1){var s=ir.getUShort(t,e+4+i*8),a=ir.getUShort(t,e+4+i*8+2);if(s===3&&(a===0||a===1||a===10)||s===0&&(a===0||a===1||a===2||a===3||a===4)){o=ir.getULong(t,e+4+i*8+4);break}}if(o===-1)throw new Error("No valid cmap sub-tables found.");var l=new ir.Parser(t,e+o);if(r.format=l.parseUShort(),r.format===12)Dve(r,l);else if(r.format===4)kve(r,l,t,e,o);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");return r}function Eve(t,e,r){t.segments.push({end:e,start:e,delta:-(e-r),offset:0,glyphIndex:r})}function _ve(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function Ave(t){var e=!0,r;for(r=t.length-1;r>0;r-=1){var o=t.get(r);if(o.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new Er.Table("cmap",i);for(s.segments=[],r=0;r<t.length;r+=1){for(var a=t.get(r),l=0;l<a.unicodes.length;l+=1)Eve(s,a.unicodes[l],r);s.segments=s.segments.sort(function(S,C){return S.start-C.start})}_ve(s);var c=s.segments.length,d=0,u=[],p=[],h=[],f=[],m=[],g=[];for(r=0;r<c;r+=1){var v=s.segments[r];v.end<=65535&&v.start<=65535?(u=u.concat({name:"end_"+r,type:"USHORT",value:v.end}),p=p.concat({name:"start_"+r,type:"USHORT",value:v.start}),h=h.concat({name:"idDelta_"+r,type:"SHORT",value:v.delta}),f=f.concat({name:"idRangeOffset_"+r,type:"USHORT",value:v.offset}),v.glyphId!==void 0&&(m=m.concat({name:"glyph_"+r,type:"USHORT",value:v.glyphId}))):d+=1,!e&&v.glyphIndex!==void 0&&(g=g.concat({name:"cmap12Start_"+r,type:"ULONG",value:v.start}),g=g.concat({name:"cmap12End_"+r,type:"ULONG",value:v.end}),g=g.concat({name:"cmap12Glyph_"+r,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=(c-d)*2,s.searchRange=Math.pow(2,Math.floor(Math.log(c-d)/Math.log(2)))*2,s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(u),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(p),s.fields=s.fields.concat(h),s.fields=s.fields.concat(f),s.fields=s.fields.concat(m),s.cmap4Length=14+u.length*2+2+p.length*2+h.length*2+f.length*2+m.length*2,!e){var y=16+g.length*4;s.cmap12Offset=12+2*2+4+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:y},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),s.fields=s.fields.concat(g)}return s}var yK={parse:Pve,make:Ave},i_=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Ive=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Rve=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Tv=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function CK(t){this.font=t}CK.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),r=this.font.glyphs;if(r){for(var o=0;o<r.length;o+=1)for(var i=r.get(o),s=0;s<i.unicodes.length;s+=1)if(i.unicodes[s]===e)return o}return null};function SK(t){this.cmap=t}SK.prototype.charToGlyphIndex=function(t){return this.cmap.glyphIndexMap[t.codePointAt(0)]||0};function s_(t,e){this.encoding=t,this.charset=e}s_.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),r=this.encoding[e];return this.charset.indexOf(r)};function QL(t){switch(t.version){case 1:this.names=Tv.slice();break;case 2:this.names=new Array(t.numberOfGlyphs);for(var e=0;e<t.numberOfGlyphs;e++)t.glyphNameIndex[e]<Tv.length?this.names[e]=Tv[t.glyphNameIndex[e]]:this.names[e]=t.names[t.glyphNameIndex[e]-Tv.length];break;case 2.5:this.names=new Array(t.numberOfGlyphs);for(var r=0;r<t.numberOfGlyphs;r++)this.names[r]=Tv[r+t.glyphNameIndex[r]];break;case 3:this.names=[];break;default:this.names=[];break}}QL.prototype.nameToGlyphIndex=function(t){return this.names.indexOf(t)};QL.prototype.glyphIndexToName=function(t){return this.names[t]};function Fve(t){for(var e,r=t.tables.cmap.glyphIndexMap,o=Object.keys(r),i=0;i<o.length;i+=1){var s=o[i],a=r[s];e=t.glyphs.get(a),e.addUnicode(parseInt(s))}for(var l=0;l<t.glyphs.length;l+=1)e=t.glyphs.get(l),t.cffEncoding?t.isCIDFont?e.name="gid"+l:e.name=t.cffEncoding.charset[l]:t.glyphNames.names&&(e.name=t.glyphNames.glyphIndexToName(l))}function Mve(t){t._IndexToUnicodeMap={};for(var e=t.tables.cmap.glyphIndexMap,r=Object.keys(e),o=0;o<r.length;o+=1){var i=r[o],s=e[i];t._IndexToUnicodeMap[s]===void 0?t._IndexToUnicodeMap[s]={unicodes:[parseInt(i)]}:t._IndexToUnicodeMap[s].unicodes.push(parseInt(i))}}function Nve(t,e){e.lowMemory?Mve(t):Fve(t)}function Bve(t,e,r,o,i){t.beginPath(),t.moveTo(e,r),t.lineTo(o,i),t.stroke()}var Dv={line:Bve};function Lve(t,e){var r=e||new gs;return{configurable:!0,get:function(){return typeof r=="function"&&(r=r()),r},set:function(o){r=o}}}function _c(t){this.bindConstructorValues(t)}_c.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||t.unicode!==void 0?[t.unicode]:[],"xMin"in t&&(this.xMin=t.xMin),"yMin"in t&&(this.yMin=t.yMin),"xMax"in t&&(this.xMax=t.xMax),"yMax"in t&&(this.yMax=t.yMax),"advanceWidth"in t&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",Lve(this,t.path))};_c.prototype.addUnicode=function(t){this.unicodes.length===0&&(this.unicode=t),this.unicodes.push(t)};_c.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};_c.prototype.getPath=function(t,e,r,o,i){t=t!==void 0?t:0,e=e!==void 0?e:0,r=r!==void 0?r:72;var s,a;o||(o={});var l=o.xScale,c=o.yScale;if(o.hinting&&i&&i.hinting&&(a=this.path&&i.hinting.exec(this,r)),a)s=i.hinting.getCommands(a),t=Math.round(t),e=Math.round(e),l=c=1;else{s=this.path.commands;var d=1/(this.path.unitsPerEm||1e3)*r;l===void 0&&(l=d),c===void 0&&(c=d)}for(var u=new gs,p=0;p<s.length;p+=1){var h=s[p];h.type==="M"?u.moveTo(t+h.x*l,e+-h.y*c):h.type==="L"?u.lineTo(t+h.x*l,e+-h.y*c):h.type==="Q"?u.quadraticCurveTo(t+h.x1*l,e+-h.y1*c,t+h.x*l,e+-h.y*c):h.type==="C"?u.curveTo(t+h.x1*l,e+-h.y1*c,t+h.x2*l,e+-h.y2*c,t+h.x*l,e+-h.y*c):h.type==="Z"&&u.closePath()}return u};_c.prototype.getContours=function(){if(this.points===void 0)return[];for(var t=[],e=[],r=0;r<this.points.length;r+=1){var o=this.points[r];e.push(o),o.lastPointOfContour&&(t.push(e),e=[])}return sn.argument(e.length===0,"There are still points left in the current contour."),t};_c.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],r=[],o=0;o<t.length;o+=1){var i=t[o];i.type!=="Z"&&(e.push(i.x),r.push(i.y)),(i.type==="Q"||i.type==="C")&&(e.push(i.x1),r.push(i.y1)),i.type==="C"&&(e.push(i.x2),r.push(i.y2))}var s={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s};_c.prototype.draw=function(t,e,r,o,i){this.getPath(e,r,o,i).draw(t)};_c.prototype.drawPoints=function(t,e,r,o){function i(p,h,f,m){t.beginPath();for(var g=0;g<p.length;g+=1)t.moveTo(h+p[g].x*m,f+p[g].y*m),t.arc(h+p[g].x*m,f+p[g].y*m,2,0,Math.PI*2,!1);t.closePath(),t.fill()}e=e!==void 0?e:0,r=r!==void 0?r:0,o=o!==void 0?o:24;for(var s=1/this.path.unitsPerEm*o,a=[],l=[],c=this.path,d=0;d<c.commands.length;d+=1){var u=c.commands[d];u.x!==void 0&&a.push({x:u.x,y:-u.y}),u.x1!==void 0&&l.push({x:u.x1,y:-u.y1}),u.x2!==void 0&&l.push({x:u.x2,y:-u.y2})}t.fillStyle="blue",i(a,e,r,s),t.fillStyle="red",i(l,e,r,s)};_c.prototype.drawMetrics=function(t,e,r,o){var i;e=e!==void 0?e:0,r=r!==void 0?r:0,o=o!==void 0?o:24,i=1/this.path.unitsPerEm*o,t.lineWidth=1,t.strokeStyle="black",Dv.line(t,e,-1e4,e,1e4),Dv.line(t,-1e4,r,1e4,r);var s=this.xMin||0,a=this.yMin||0,l=this.xMax||0,c=this.yMax||0,d=this.advanceWidth||0;t.strokeStyle="blue",Dv.line(t,e+s*i,-1e4,e+s*i,1e4),Dv.line(t,e+l*i,-1e4,e+l*i,1e4),Dv.line(t,-1e4,r+-a*i,1e4,r+-a*i),Dv.line(t,-1e4,r+-c*i,1e4,r+-c*i),t.strokeStyle="green",Dv.line(t,e+d*i,-1e4,e+d*i,1e4)};function a_(t,e,r){Object.defineProperty(t,e,{get:function(){return t.path,t[r]},set:function(o){t[r]=o},enumerable:!0,configurable:!0})}function JL(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var r=0;r<e.length;r++){var o=e[r];o.path.unitsPerEm=t.unitsPerEm,this.glyphs[r]=o}this.length=e&&e.length||0}JL.prototype.get=function(t){if(this.glyphs[t]===void 0){this.font._push(t),typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());var e=this.glyphs[t],r=this.font._IndexToUnicodeMap[t];if(r)for(var o=0;o<r.unicodes.length;o++)e.addUnicode(r.unicodes[o]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+t:e.name=this.font.cffEncoding.charset[t]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(t)),this.glyphs[t].advanceWidth=this.font._hmtxTableData[t].advanceWidth,this.glyphs[t].leftSideBearing=this.font._hmtxTableData[t].leftSideBearing}else typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());return this.glyphs[t]};JL.prototype.push=function(t,e){this.glyphs[t]=e,this.length++};function Ove(t,e){return new _c({index:e,font:t})}function zve(t,e,r,o,i,s){return function(){var a=new _c({index:e,font:t});return a.path=function(){r(a,o,i);var l=s(t.glyphs,a);return l.unitsPerEm=t.unitsPerEm,l},a_(a,"xMin","_xMin"),a_(a,"xMax","_xMax"),a_(a,"yMin","_yMin"),a_(a,"yMax","_yMax"),a}}function Uve(t,e,r,o){return function(){var i=new _c({index:e,font:t});return i.path=function(){var s=r(t,i,o);return s.unitsPerEm=t.unitsPerEm,s},i}}var Au={GlyphSet:JL,glyphLoader:Ove,ttfGlyphLoader:zve,cffGlyphLoader:Uve};function xK(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r+=1)if(!xK(t[r],e[r]))return!1;return!0}else return!1}function ZL(t){var e;return t.length<1240?e=107:t.length<33900?e=1131:e=32768,e}function qf(t,e,r){var o=[],i=[],s=ir.getCard16(t,e),a,l;if(s!==0){var c=ir.getByte(t,e+2);a=e+(s+1)*c+2;for(var d=e+3,u=0;u<s+1;u+=1)o.push(ir.getOffset(t,d,c)),d+=c;l=a+o[s]}else l=e+2;for(var p=0;p<o.length-1;p+=1){var h=ir.getBytes(t,a+o[p],a+o[p+1]);r&&(h=r(h)),i.push(h)}return{objects:i,startOffset:e,endOffset:l}}function Hve(t,e){var r=[],o=ir.getCard16(t,e),i,s;if(o!==0){var a=ir.getByte(t,e+2);i=e+(o+1)*a+2;for(var l=e+3,c=0;c<o+1;c+=1)r.push(ir.getOffset(t,l,a)),l+=a;s=i+r[o]}else s=e+2;return{offsets:r,startOffset:e,endOffset:s}}function Gve(t,e,r,o,i){var s=ir.getCard16(r,o),a=0;if(s!==0){var l=ir.getByte(r,o+2);a=o+(s+1)*l+2}var c=ir.getBytes(r,a+e[t],a+e[t+1]);return i&&(c=i(c)),c}function Vve(t){for(var e="",r=15,o=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=t.parseByte(),s=i>>4,a=i&15;if(s===r||(e+=o[s],a===r))break;e+=o[a]}return parseFloat(e)}function $ve(t,e){var r,o,i,s;if(e===28)return r=t.parseByte(),o=t.parseByte(),r<<8|o;if(e===29)return r=t.parseByte(),o=t.parseByte(),i=t.parseByte(),s=t.parseByte(),r<<24|o<<16|i<<8|s;if(e===30)return Vve(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return r=t.parseByte(),(e-247)*256+r+108;if(e>=251&&e<=254)return r=t.parseByte(),-(e-251)*256-r-108;throw new Error("Invalid b0 "+e)}function Wve(t){for(var e={},r=0;r<t.length;r+=1){var o=t[r][0],i=t[r][1],s=void 0;if(i.length===1?s=i[0]:s=i,e.hasOwnProperty(o)&&!isNaN(e[o]))throw new Error("Object "+e+" already has key "+o);e[o]=s}return e}function wK(t,e,r){e=e!==void 0?e:0;var o=new ir.Parser(t,e),i=[],s=[];for(r=r!==void 0?r:t.length;o.relativeOffset<r;){var a=o.parseByte();a<=21?(a===12&&(a=1200+o.parseByte()),i.push([a,s]),s=[]):s.push($ve(o,a))}return Wve(i)}function Yw(t,e){return e<=390?e=i_[e]:e=t[e-391],e}function TK(t,e,r){for(var o={},i,s=0;s<e.length;s+=1){var a=e[s];if(Array.isArray(a.type)){var l=[];l.length=a.type.length;for(var c=0;c<a.type.length;c++)i=t[a.op]!==void 0?t[a.op][c]:void 0,i===void 0&&(i=a.value!==void 0&&a.value[c]!==void 0?a.value[c]:null),a.type[c]==="SID"&&(i=Yw(r,i)),l[c]=i;o[a.name]=l}else i=t[a.op],i===void 0&&(i=a.value!==void 0?a.value:null),a.type==="SID"&&(i=Yw(r,i)),o[a.name]=i}return o}function jve(t,e){var r={};return r.formatMajor=ir.getCard8(t,e),r.formatMinor=ir.getCard8(t,e+1),r.size=ir.getCard8(t,e+2),r.offsetSize=ir.getCard8(t,e+3),r.startOffset=e,r.endOffset=e+4,r}var DK=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],kK=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Kve(t,e){var r=wK(t,0,t.byteLength);return TK(r,DK,e)}function PK(t,e,r,o){var i=wK(t,e,r);return TK(i,kK,o)}function EK(t,e,r,o){for(var i=[],s=0;s<r.length;s+=1){var a=new DataView(new Uint8Array(r[s]).buffer),l=Kve(a,o);l._subrs=[],l._subrsBias=0;var c=l.private[0],d=l.private[1];if(c!==0&&d!==0){var u=PK(t,d+e,c,o);if(l._defaultWidthX=u.defaultWidthX,l._nominalWidthX=u.nominalWidthX,u.subrs!==0){var p=d+u.subrs,h=qf(t,p+e);l._subrs=h.objects,l._subrsBias=ZL(l._subrs)}l._privateDict=u}i.push(l)}return i}function qve(t,e,r,o){var i,s,a=new ir.Parser(t,e);r-=1;var l=[".notdef"],c=a.parseCard8();if(c===0)for(var d=0;d<r;d+=1)i=a.parseSID(),l.push(Yw(o,i));else if(c===1)for(;l.length<=r;){i=a.parseSID(),s=a.parseCard8();for(var u=0;u<=s;u+=1)l.push(Yw(o,i)),i+=1}else if(c===2)for(;l.length<=r;){i=a.parseSID(),s=a.parseCard16();for(var p=0;p<=s;p+=1)l.push(Yw(o,i)),i+=1}else throw new Error("Unknown charset format "+c);return l}function Yve(t,e,r){var o,i={},s=new ir.Parser(t,e),a=s.parseCard8();if(a===0)for(var l=s.parseCard8(),c=0;c<l;c+=1)o=s.parseCard8(),i[o]=c;else if(a===1){var d=s.parseCard8();o=1;for(var u=0;u<d;u+=1)for(var p=s.parseCard8(),h=s.parseCard8(),f=p;f<=p+h;f+=1)i[f]=o,o+=1}else throw new Error("Unknown encoding format "+a);return new s_(i,r)}function _K(t,e,r){var o,i,s,a,l=new gs,c=[],d=0,u=!1,p=!1,h=0,f=0,m,g,v,y;if(t.isCIDFont){var S=t.tables.cff.topDict._fdSelect[e.index],C=t.tables.cff.topDict._fdArray[S];m=C._subrs,g=C._subrsBias,v=C._defaultWidthX,y=C._nominalWidthX}else m=t.tables.cff.topDict._subrs,g=t.tables.cff.topDict._subrsBias,v=t.tables.cff.topDict._defaultWidthX,y=t.tables.cff.topDict._nominalWidthX;var b=v;function x(T,A){p&&l.closePath(),l.moveTo(T,A),p=!0}function w(){var T;T=c.length%2!=0,T&&!u&&(b=c.shift()+y),d+=c.length>>1,c.length=0,u=!0}function k(T){for(var A,E,F,z,L,R,N,V,W,me,ie,Z,P=0;P<T.length;){var _=T[P];switch(P+=1,_){case 1:w();break;case 3:w();break;case 4:c.length>1&&!u&&(b=c.shift()+y,u=!0),f+=c.pop(),x(h,f);break;case 5:for(;c.length>0;)h+=c.shift(),f+=c.shift(),l.lineTo(h,f);break;case 6:for(;c.length>0&&(h+=c.shift(),l.lineTo(h,f),c.length!==0);)f+=c.shift(),l.lineTo(h,f);break;case 7:for(;c.length>0&&(f+=c.shift(),l.lineTo(h,f),c.length!==0);)h+=c.shift(),l.lineTo(h,f);break;case 8:for(;c.length>0;)o=h+c.shift(),i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),h=s+c.shift(),f=a+c.shift(),l.curveTo(o,i,s,a,h,f);break;case 10:L=c.pop()+g,R=m[L],R&&k(R);break;case 11:return;case 12:switch(_=T[P],P+=1,_){case 35:o=h+c.shift(),i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),N=s+c.shift(),V=a+c.shift(),W=N+c.shift(),me=V+c.shift(),ie=W+c.shift(),Z=me+c.shift(),h=ie+c.shift(),f=Z+c.shift(),c.shift(),l.curveTo(o,i,s,a,N,V),l.curveTo(W,me,ie,Z,h,f);break;case 34:o=h+c.shift(),i=f,s=o+c.shift(),a=i+c.shift(),N=s+c.shift(),V=a,W=N+c.shift(),me=a,ie=W+c.shift(),Z=f,h=ie+c.shift(),l.curveTo(o,i,s,a,N,V),l.curveTo(W,me,ie,Z,h,f);break;case 36:o=h+c.shift(),i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),N=s+c.shift(),V=a,W=N+c.shift(),me=a,ie=W+c.shift(),Z=me+c.shift(),h=ie+c.shift(),l.curveTo(o,i,s,a,N,V),l.curveTo(W,me,ie,Z,h,f);break;case 37:o=h+c.shift(),i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),N=s+c.shift(),V=a+c.shift(),W=N+c.shift(),me=V+c.shift(),ie=W+c.shift(),Z=me+c.shift(),Math.abs(ie-h)>Math.abs(Z-f)?h=ie+c.shift():f=Z+c.shift(),l.curveTo(o,i,s,a,N,V),l.curveTo(W,me,ie,Z,h,f);break;default:console.log("Glyph "+e.index+": unknown operator "+1200+_),c.length=0}break;case 14:c.length>0&&!u&&(b=c.shift()+y,u=!0),p&&(l.closePath(),p=!1);break;case 18:w();break;case 19:case 20:w(),P+=d+7>>3;break;case 21:c.length>2&&!u&&(b=c.shift()+y,u=!0),f+=c.pop(),h+=c.pop(),x(h,f);break;case 22:c.length>1&&!u&&(b=c.shift()+y,u=!0),h+=c.pop(),x(h,f);break;case 23:w();break;case 24:for(;c.length>2;)o=h+c.shift(),i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),h=s+c.shift(),f=a+c.shift(),l.curveTo(o,i,s,a,h,f);h+=c.shift(),f+=c.shift(),l.lineTo(h,f);break;case 25:for(;c.length>6;)h+=c.shift(),f+=c.shift(),l.lineTo(h,f);o=h+c.shift(),i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),h=s+c.shift(),f=a+c.shift(),l.curveTo(o,i,s,a,h,f);break;case 26:for(c.length%2&&(h+=c.shift());c.length>0;)o=h,i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),h=s,f=a+c.shift(),l.curveTo(o,i,s,a,h,f);break;case 27:for(c.length%2&&(f+=c.shift());c.length>0;)o=h+c.shift(),i=f,s=o+c.shift(),a=i+c.shift(),h=s+c.shift(),f=a,l.curveTo(o,i,s,a,h,f);break;case 28:A=T[P],E=T[P+1],c.push((A<<24|E<<16)>>16),P+=2;break;case 29:L=c.pop()+t.gsubrsBias,R=t.gsubrs[L],R&&k(R);break;case 30:for(;c.length>0&&(o=h,i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),h=s+c.shift(),f=a+(c.length===1?c.shift():0),l.curveTo(o,i,s,a,h,f),c.length!==0);)o=h+c.shift(),i=f,s=o+c.shift(),a=i+c.shift(),f=a+c.shift(),h=s+(c.length===1?c.shift():0),l.curveTo(o,i,s,a,h,f);break;case 31:for(;c.length>0&&(o=h+c.shift(),i=f,s=o+c.shift(),a=i+c.shift(),f=a+c.shift(),h=s+(c.length===1?c.shift():0),l.curveTo(o,i,s,a,h,f),c.length!==0);)o=h,i=f+c.shift(),s=o+c.shift(),a=i+c.shift(),h=s+c.shift(),f=a+(c.length===1?c.shift():0),l.curveTo(o,i,s,a,h,f);break;default:_<32?console.log("Glyph "+e.index+": unknown operator "+_):_<247?c.push(_-139):_<251?(A=T[P],P+=1,c.push((_-247)*256+A+108)):_<255?(A=T[P],P+=1,c.push(-(_-251)*256-A-108)):(A=T[P],E=T[P+1],F=T[P+2],z=T[P+3],P+=4,c.push((A<<24|E<<16|F<<8|z)/65536))}}}return k(r),e.advanceWidth=b,l}function Xve(t,e,r,o){var i=[],s,a=new ir.Parser(t,e),l=a.parseCard8();if(l===0)for(var c=0;c<r;c++){if(s=a.parseCard8(),s>=o)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+o+")");i.push(s)}else if(l===3){var d=a.parseCard16(),u=a.parseCard16();if(u!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var p,h=0;h<d;h++){if(s=a.parseCard8(),p=a.parseCard16(),s>=o)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+o+")");if(p>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+p);for(;u<p;u++)i.push(s);u=p}if(p!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+p)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+l);return i}function Qve(t,e,r,o){r.tables.cff={};var i=jve(t,e),s=qf(t,i.endOffset,ir.bytesToString),a=qf(t,s.endOffset),l=qf(t,a.endOffset,ir.bytesToString),c=qf(t,l.endOffset);r.gsubrs=c.objects,r.gsubrsBias=ZL(r.gsubrs);var d=EK(t,e,a.objects,l.objects);if(d.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+d.length);var u=d[0];if(r.tables.cff.topDict=u,u._privateDict&&(r.defaultWidthX=u._privateDict.defaultWidthX,r.nominalWidthX=u._privateDict.nominalWidthX),u.ros[0]!==void 0&&u.ros[1]!==void 0&&(r.isCIDFont=!0),r.isCIDFont){var p=u.fdArray,h=u.fdSelect;if(p===0||h===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");p+=e;var f=qf(t,p),m=EK(t,e,f.objects,l.objects);u._fdArray=m,h+=e,u._fdSelect=Xve(t,h,r.numGlyphs,m.length)}var g=e+u.private[1],v=PK(t,g,u.private[0],l.objects);if(r.defaultWidthX=v.defaultWidthX,r.nominalWidthX=v.nominalWidthX,v.subrs!==0){var y=g+v.subrs,S=qf(t,y);r.subrs=S.objects,r.subrsBias=ZL(r.subrs)}else r.subrs=[],r.subrsBias=0;var C;o.lowMemory?(C=Hve(t,e+u.charStrings),r.nGlyphs=C.offsets.length):(C=qf(t,e+u.charStrings),r.nGlyphs=C.objects.length);var b=qve(t,e+u.charset,r.nGlyphs,l.objects);if(u.encoding===0?r.cffEncoding=new s_(Ive,b):u.encoding===1?r.cffEncoding=new s_(Rve,b):r.cffEncoding=Yve(t,e+u.encoding,b),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new Au.GlyphSet(r),o.lowMemory)r._push=function(k){var T=Gve(k,C.offsets,t,e+u.charStrings);r.glyphs.push(k,Au.cffGlyphLoader(r,k,_K,T))};else for(var x=0;x<r.nGlyphs;x+=1){var w=C.objects[x];r.glyphs.push(x,Au.cffGlyphLoader(r,x,_K,w))}}function AK(t,e){var r,o=i_.indexOf(t);return o>=0&&(r=o),o=e.indexOf(t),o>=0?r=o+i_.length:(r=i_.length+e.length,e.push(t)),r}function Jve(){return new Er.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function Zve(t){var e=new Er.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var r=0;r<t.length;r+=1)e.names.push({name:"name_"+r,type:"NAME",value:t[r]});return e}function IK(t,e,r){for(var o={},i=0;i<t.length;i+=1){var s=t[i],a=e[s.name];a!==void 0&&!xK(a,s.value)&&(s.type==="SID"&&(a=AK(a,r)),o[s.op]={name:s.name,type:s.type,value:a})}return o}function RK(t,e){var r=new Er.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=IK(DK,t,e),r}function FK(t){var e=new Er.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function ebe(t){var e=new Er.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var r=0;r<t.length;r+=1)e.strings.push({name:"string_"+r,type:"STRING",value:t[r]});return e}function tbe(){return new Er.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function rbe(t,e){for(var r=new Er.Record("Charsets",[{name:"format",type:"Card8",value:0}]),o=0;o<t.length;o+=1){var i=t[o],s=AK(i,e);r.fields.push({name:"glyph_"+o,type:"SID",value:s})}return r}function nbe(t){var e=[],r=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var o=0,i=0,s=0;s<r.commands.length;s+=1){var a=void 0,l=void 0,c=r.commands[s];if(c.type==="Q"){var d=1/3,u=2/3;c={type:"C",x:c.x,y:c.y,x1:d*o+u*c.x1,y1:d*i+u*c.y1,x2:d*c.x+u*c.x1,y2:d*c.y+u*c.y1}}if(c.type==="M")a=Math.round(c.x-o),l=Math.round(c.y-i),e.push({name:"dx",type:"NUMBER",value:a}),e.push({name:"dy",type:"NUMBER",value:l}),e.push({name:"rmoveto",type:"OP",value:21}),o=Math.round(c.x),i=Math.round(c.y);else if(c.type==="L")a=Math.round(c.x-o),l=Math.round(c.y-i),e.push({name:"dx",type:"NUMBER",value:a}),e.push({name:"dy",type:"NUMBER",value:l}),e.push({name:"rlineto",type:"OP",value:5}),o=Math.round(c.x),i=Math.round(c.y);else if(c.type==="C"){var p=Math.round(c.x1-o),h=Math.round(c.y1-i),f=Math.round(c.x2-c.x1),m=Math.round(c.y2-c.y1);a=Math.round(c.x-c.x2),l=Math.round(c.y-c.y2),e.push({name:"dx1",type:"NUMBER",value:p}),e.push({name:"dy1",type:"NUMBER",value:h}),e.push({name:"dx2",type:"NUMBER",value:f}),e.push({name:"dy2",type:"NUMBER",value:m}),e.push({name:"dx",type:"NUMBER",value:a}),e.push({name:"dy",type:"NUMBER",value:l}),e.push({name:"rrcurveto",type:"OP",value:8}),o=Math.round(c.x),i=Math.round(c.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function obe(t){for(var e=new Er.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<t.length;r+=1){var o=t.get(r),i=nbe(o);e.charStrings.push({name:o.name,type:"CHARSTRING",value:i})}return e}function ibe(t,e){var r=new Er.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=IK(kK,t,e),r}function sbe(t,e){for(var r=new Er.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),o=1/e.unitsPerEm,i={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[o,0,0,o,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s={},a=[],l,c=1;c<t.length;c+=1)l=t.get(c),a.push(l.name);var d=[];r.header=Jve(),r.nameIndex=Zve([e.postScriptName]);var u=RK(i,d);r.topDictIndex=FK(u),r.globalSubrIndex=tbe(),r.charsets=rbe(a,d),r.charStringsIndex=obe(t),r.privateDict=ibe(s,d),r.stringIndex=ebe(d);var p=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return i.charset=p,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),u=RK(i,d),r.topDictIndex=FK(u),r}var MK={parse:Qve,make:sbe};function abe(t,e){var r={},o=new ir.Parser(t,e);return r.version=o.parseVersion(),r.fontRevision=Math.round(o.parseFixed()*1e3)/1e3,r.checkSumAdjustment=o.parseULong(),r.magicNumber=o.parseULong(),sn.argument(r.magicNumber===1594834165,"Font header has wrong magic number."),r.flags=o.parseUShort(),r.unitsPerEm=o.parseUShort(),r.created=o.parseLongDateTime(),r.modified=o.parseLongDateTime(),r.xMin=o.parseShort(),r.yMin=o.parseShort(),r.xMax=o.parseShort(),r.yMax=o.parseShort(),r.macStyle=o.parseUShort(),r.lowestRecPPEM=o.parseUShort(),r.fontDirectionHint=o.parseShort(),r.indexToLocFormat=o.parseShort(),r.glyphDataFormat=o.parseShort(),r}function lbe(t){var e=Math.round(new Date().getTime()/1e3)+2082844800,r=e;return t.createdTimestamp&&(r=t.createdTimestamp+2082844800),new Er.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var NK={parse:abe,make:lbe};function cbe(t,e){var r={},o=new ir.Parser(t,e);return r.version=o.parseVersion(),r.ascender=o.parseShort(),r.descender=o.parseShort(),r.lineGap=o.parseShort(),r.advanceWidthMax=o.parseUShort(),r.minLeftSideBearing=o.parseShort(),r.minRightSideBearing=o.parseShort(),r.xMaxExtent=o.parseShort(),r.caretSlopeRise=o.parseShort(),r.caretSlopeRun=o.parseShort(),r.caretOffset=o.parseShort(),o.relativeOffset+=8,r.metricDataFormat=o.parseShort(),r.numberOfHMetrics=o.parseUShort(),r}function dbe(t){return new Er.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var BK={parse:cbe,make:dbe};function ube(t,e,r,o,i){for(var s,a,l=new ir.Parser(t,e),c=0;c<o;c+=1){c<r&&(s=l.parseUShort(),a=l.parseShort());var d=i.get(c);d.advanceWidth=s,d.leftSideBearing=a}}function pbe(t,e,r,o,i){t._hmtxTableData={};for(var s,a,l=new ir.Parser(e,r),c=0;c<i;c+=1)c<o&&(s=l.parseUShort(),a=l.parseShort()),t._hmtxTableData[c]={advanceWidth:s,leftSideBearing:a}}function hbe(t,e,r,o,i,s,a){a.lowMemory?pbe(t,e,r,o,i):ube(e,r,o,i,s)}function fbe(t){for(var e=new Er.Table("hmtx",[]),r=0;r<t.length;r+=1){var o=t.get(r),i=o.advanceWidth||0,s=o.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:s})}return e}var LK={parse:hbe,make:fbe};function mbe(t){for(var e=new Er.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),r="",o=12+t.length*4,i=0;i<t.length;++i){var s=r.indexOf(t[i]);s<0&&(s=r.length,r+=t[i]),e.fields.push({name:"offset "+i,type:"USHORT",value:o+s}),e.fields.push({name:"length "+i,type:"USHORT",value:t[i].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),e}function gbe(t,e){var r=new ir.Parser(t,e),o=r.parseULong();sn.argument(o===1,"Unsupported ltag table version."),r.skip("uLong",1);for(var i=r.parseULong(),s=[],a=0;a<i;a++){for(var l="",c=e+r.parseUShort(),d=r.parseUShort(),u=c;u<c+d;++u)l+=String.fromCharCode(t.getInt8(u));s.push(l)}return s}var OK={make:mbe,parse:gbe};function vbe(t,e){var r={},o=new ir.Parser(t,e);return r.version=o.parseVersion(),r.numGlyphs=o.parseUShort(),r.version===1&&(r.maxPoints=o.parseUShort(),r.maxContours=o.parseUShort(),r.maxCompositePoints=o.parseUShort(),r.maxCompositeContours=o.parseUShort(),r.maxZones=o.parseUShort(),r.maxTwilightPoints=o.parseUShort(),r.maxStorage=o.parseUShort(),r.maxFunctionDefs=o.parseUShort(),r.maxInstructionDefs=o.parseUShort(),r.maxStackElements=o.parseUShort(),r.maxSizeOfInstructions=o.parseUShort(),r.maxComponentElements=o.parseUShort(),r.maxComponentDepth=o.parseUShort()),r}function bbe(t){return new Er.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var zK={parse:vbe,make:bbe},UK=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],HK={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},ybe={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},GK={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Cbe(t,e,r){switch(t){case 0:if(e===65535)return"und";if(r)return r[e];break;case 1:return HK[e];case 3:return GK[e]}}var e3="utf-16",Sbe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},xbe={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function VK(t,e,r){switch(t){case 0:return e3;case 1:return xbe[r]||Sbe[e];case 3:if(e===1||e===10)return e3;break}}function wbe(t,e,r){for(var o={},i=new ir.Parser(t,e),s=i.parseUShort(),a=i.parseUShort(),l=i.offset+i.parseUShort(),c=0;c<a;c++){var d=i.parseUShort(),u=i.parseUShort(),p=i.parseUShort(),h=i.parseUShort(),f=UK[h]||h,m=i.parseUShort(),g=i.parseUShort(),v=Cbe(d,p,r),y=VK(d,u,p);if(y!==void 0&&v!==void 0){var S=void 0;if(y===e3?S=F0.UTF16(t,l+g,m):S=F0.MACSTRING(t,l+g,m,y),S){var C=o[f];C===void 0&&(C=o[f]={}),C[v]=S}}}var b=0;return s===1&&(b=i.parseUShort()),o}function t3(t){var e={};for(var r in t)e[t[r]]=parseInt(r);return e}function $K(t,e,r,o,i,s){return new Er.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:o},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:s}])}function Tbe(t,e){var r=t.length,o=e.length-r+1;e:for(var i=0;i<o;i++)for(;i<o;i++){for(var s=0;s<r;s++)if(e[i+s]!==t[s])continue e;return i}return-1}function WK(t,e){var r=Tbe(t,e);if(r<0){r=e.length;for(var o=0,i=t.length;o<i;++o)e.push(t[o])}return r}function Dbe(t,e){var r,o=[],i={},s=t3(UK);for(var a in t){var l=s[a];if(l===void 0&&(l=a),r=parseInt(l),isNaN(r))throw new Error('Name table entry "'+a+'" does not exist, see nameTableNames for complete list.');i[r]=t[a],o.push(r)}for(var c=t3(HK),d=t3(GK),u=[],p=[],h=0;h<o.length;h++){r=o[h];var f=i[r];for(var m in f){var g=f[m],v=1,y=c[m],S=ybe[y],C=VK(v,S,y),b=Bt.MACSTRING(g,C);b===void 0&&(v=0,y=e.indexOf(m),y<0&&(y=e.length,e.push(m)),S=4,b=Bt.UTF16(g));var x=WK(b,p);u.push($K(v,S,y,r,b.length,x));var w=d[m];if(w!==void 0){var k=Bt.UTF16(g),T=WK(k,p);u.push($K(3,1,w,r,k.length,T))}}}u.sort(function(F,z){return F.platformID-z.platformID||F.encodingID-z.encodingID||F.languageID-z.languageID||F.nameID-z.nameID});for(var A=new Er.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+u.length*12}]),E=0;E<u.length;E++)A.fields.push({name:"record_"+E,type:"RECORD",value:u[E]});return A.fields.push({name:"strings",type:"LITERAL",value:p}),A}var jK={parse:wbe,make:Dbe},r3=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function kbe(t){for(var e=0;e<r3.length;e+=1){var r=r3[e];if(t>=r.begin&&t<r.end)return e}return-1}function Pbe(t,e){var r={},o=new ir.Parser(t,e);r.version=o.parseUShort(),r.xAvgCharWidth=o.parseShort(),r.usWeightClass=o.parseUShort(),r.usWidthClass=o.parseUShort(),r.fsType=o.parseUShort(),r.ySubscriptXSize=o.parseShort(),r.ySubscriptYSize=o.parseShort(),r.ySubscriptXOffset=o.parseShort(),r.ySubscriptYOffset=o.parseShort(),r.ySuperscriptXSize=o.parseShort(),r.ySuperscriptYSize=o.parseShort(),r.ySuperscriptXOffset=o.parseShort(),r.ySuperscriptYOffset=o.parseShort(),r.yStrikeoutSize=o.parseShort(),r.yStrikeoutPosition=o.parseShort(),r.sFamilyClass=o.parseShort(),r.panose=[];for(var i=0;i<10;i++)r.panose[i]=o.parseByte();return r.ulUnicodeRange1=o.parseULong(),r.ulUnicodeRange2=o.parseULong(),r.ulUnicodeRange3=o.parseULong(),r.ulUnicodeRange4=o.parseULong(),r.achVendID=String.fromCharCode(o.parseByte(),o.parseByte(),o.parseByte(),o.parseByte()),r.fsSelection=o.parseUShort(),r.usFirstCharIndex=o.parseUShort(),r.usLastCharIndex=o.parseUShort(),r.sTypoAscender=o.parseShort(),r.sTypoDescender=o.parseShort(),r.sTypoLineGap=o.parseShort(),r.usWinAscent=o.parseUShort(),r.usWinDescent=o.parseUShort(),r.version>=1&&(r.ulCodePageRange1=o.parseULong(),r.ulCodePageRange2=o.parseULong()),r.version>=2&&(r.sxHeight=o.parseShort(),r.sCapHeight=o.parseShort(),r.usDefaultChar=o.parseUShort(),r.usBreakChar=o.parseUShort(),r.usMaxContent=o.parseUShort()),r}function Ebe(t){return new Er.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var n3={parse:Pbe,make:Ebe,unicodeRanges:r3,getUnicodeRange:kbe};function _be(t,e){var r={},o=new ir.Parser(t,e);switch(r.version=o.parseVersion(),r.italicAngle=o.parseFixed(),r.underlinePosition=o.parseShort(),r.underlineThickness=o.parseShort(),r.isFixedPitch=o.parseULong(),r.minMemType42=o.parseULong(),r.maxMemType42=o.parseULong(),r.minMemType1=o.parseULong(),r.maxMemType1=o.parseULong(),r.version){case 1:r.names=Tv.slice();break;case 2:r.numberOfGlyphs=o.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var i=0;i<r.numberOfGlyphs;i++)r.glyphNameIndex[i]=o.parseUShort();r.names=[];for(var s=0;s<r.numberOfGlyphs;s++)if(r.glyphNameIndex[s]>=Tv.length){var a=o.parseChar();r.names.push(o.parseString(a))}break;case 2.5:r.numberOfGlyphs=o.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var l=0;l<r.numberOfGlyphs;l++)r.offset[l]=o.parseChar();break}return r}function Abe(){return new Er.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var KK={parse:_be,make:Abe},kd=new Array(9);kd[1]=function(){var e=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(Xe.coverage),deltaGlyphId:this.parseUShort()};if(r===2)return{substFormat:2,coverage:this.parsePointer(Xe.coverage),substitute:this.parseOffset16List()};sn.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};kd[2]=function(){var e=this.parseUShort();return sn.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xe.coverage),sequences:this.parseListOfLists()}};kd[3]=function(){var e=this.parseUShort();return sn.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xe.coverage),alternateSets:this.parseListOfLists()}};kd[4]=function(){var e=this.parseUShort();return sn.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var M0={sequenceIndex:Xe.uShort,lookupListIndex:Xe.uShort};kd[5]=function(){var e=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:r,coverage:this.parsePointer(Xe.coverage),ruleSets:this.parseListOfLists(function(){var s=this.parseUShort(),a=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(a,M0)}})};if(r===2)return{substFormat:r,coverage:this.parsePointer(Xe.coverage),classDef:this.parsePointer(Xe.classDef),classSets:this.parseListOfLists(function(){var s=this.parseUShort(),a=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(a,M0)}})};if(r===3){var o=this.parseUShort(),i=this.parseUShort();return{substFormat:r,coverages:this.parseList(o,Xe.pointer(Xe.coverage)),lookupRecords:this.parseRecordList(i,M0)}}sn.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};kd[6]=function(){var e=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(Xe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(M0)}})};if(r===2)return{substFormat:2,coverage:this.parsePointer(Xe.coverage),backtrackClassDef:this.parsePointer(Xe.classDef),inputClassDef:this.parsePointer(Xe.classDef),lookaheadClassDef:this.parsePointer(Xe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(M0)}})};if(r===3)return{substFormat:3,backtrackCoverage:this.parseList(Xe.pointer(Xe.coverage)),inputCoverage:this.parseList(Xe.pointer(Xe.coverage)),lookaheadCoverage:this.parseList(Xe.pointer(Xe.coverage)),lookupRecords:this.parseRecordList(M0)};sn.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};kd[7]=function(){var e=this.parseUShort();sn.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var r=this.parseUShort(),o=new Xe(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:r,extension:kd[r].call(o)}};kd[8]=function(){var e=this.parseUShort();return sn.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Xe.coverage),backtrackCoverage:this.parseList(Xe.pointer(Xe.coverage)),lookaheadCoverage:this.parseList(Xe.pointer(Xe.coverage)),substitutes:this.parseUShortList()}};function Ibe(t,e){e=e||0;var r=new Xe(t,e),o=r.parseVersion(1);return sn.argument(o===1||o===1.1,"Unsupported GSUB table version."),o===1?{version:o,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(kd)}:{version:o,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(kd),variations:r.parseFeatureVariationsList()}}var l_=new Array(9);l_[1]=function(e){return e.substFormat===1?new Er.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Er.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Er.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Er.Coverage(e.coverage)}].concat(Er.ushortList("substitute",e.substitute)))};l_[3]=function(e){return sn.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new Er.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Er.Coverage(e.coverage)}].concat(Er.tableList("altSet",e.alternateSets,function(r){return new Er.Table("alternateSetTable",Er.ushortList("alternate",r))})))};l_[4]=function(e){return sn.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new Er.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Er.Coverage(e.coverage)}].concat(Er.tableList("ligSet",e.ligatureSets,function(r){return new Er.Table("ligatureSetTable",Er.tableList("ligature",r,function(o){return new Er.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:o.ligGlyph}].concat(Er.ushortList("component",o.components,o.components.length+1)))}))})))};function Rbe(t){return new Er.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Er.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new Er.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new Er.LookupList(t.lookups,l_)}])}var qK={parse:Ibe,make:Rbe};function Fbe(t,e){var r=new ir.Parser(t,e),o=r.parseULong();sn.argument(o===1,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var i=r.parseULong(),s={},a=0;a<i;a++){var l=r.parseTag(),c=r.parseULong(),d=r.parseULong(),u=F0.UTF8(t,e+c,d);s[l]=u}return s}function Mbe(t){var e=Object.keys(t).length,r="",o=16+e*12,i=new Er.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:o},{name:"numTags",type:"ULONG",value:e}]);for(var s in t){var a=r.length;r+=t[s],i.fields.push({name:"tag "+s,type:"TAG",value:s}),i.fields.push({name:"offset "+s,type:"ULONG",value:o+a}),i.fields.push({name:"length "+s,type:"ULONG",value:t[s].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),i}var YK={parse:Fbe,make:Mbe};function XK(t){return Math.log(t)/Math.log(2)|0}function o3(t){for(;t.length%4!=0;)t.push(0);for(var e=0,r=0;r<t.length;r+=4)e+=(t[r]<<24)+(t[r+1]<<16)+(t[r+2]<<8)+t[r+3];return e%=Math.pow(2,32),e}function QK(t,e,r,o){return new Er.Record("Table Record",[{name:"tag",type:"TAG",value:t!==void 0?t:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:r!==void 0?r:0},{name:"length",type:"ULONG",value:o!==void 0?o:0}])}function JK(t){var e=new Er.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var r=Math.pow(2,XK(e.numTables));e.searchRange=16*r,e.entrySelector=XK(r),e.rangeShift=e.numTables*16-e.searchRange;for(var o=[],i=[],s=e.sizeOf()+QK().sizeOf()*e.numTables;s%4!=0;)s+=1,i.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<t.length;a+=1){var l=t[a];sn.argument(l.tableName.length===4,"Table name"+l.tableName+" is invalid.");var c=l.sizeOf(),d=QK(l.tableName,o3(l.encode()),s,c);for(o.push({name:d.tag+" Table Record",type:"RECORD",value:d}),i.push({name:l.tableName+" table",type:"RECORD",value:l}),s+=c,sn.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!=0;)s+=1,i.push({name:"padding",type:"BYTE",value:0})}return o.sort(function(u,p){return u.value.tag>p.value.tag?1:-1}),e.fields=e.fields.concat(o),e.fields=e.fields.concat(i),e}function ZK(t,e,r){for(var o=0;o<e.length;o+=1){var i=t.charToGlyphIndex(e[o]);if(i>0){var s=t.glyphs.get(i);return s.getMetrics()}}return r}function Nbe(t){for(var e=0,r=0;r<t.length;r+=1)e+=t[r];return e/t.length}function Bbe(t){for(var e=[],r=[],o=[],i=[],s=[],a=[],l=[],c,d=0,u=0,p=0,h=0,f=0,m=0;m<t.glyphs.length;m+=1){var g=t.glyphs.get(m),v=g.unicode|0;if(isNaN(g.advanceWidth))throw new Error("Glyph "+g.name+" ("+m+"): advanceWidth is not a number.");(c>v||c===void 0)&&v>0&&(c=v),d<v&&(d=v);var y=n3.getUnicodeRange(v);if(y<32)u|=1<<y;else if(y<64)p|=1<<y-32;else if(y<96)h|=1<<y-64;else if(y<123)f|=1<<y-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(g.name!==".notdef"){var S=g.getMetrics();e.push(S.xMin),r.push(S.yMin),o.push(S.xMax),i.push(S.yMax),a.push(S.leftSideBearing),l.push(S.rightSideBearing),s.push(g.advanceWidth)}}var C={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:Nbe(s),minLeftSideBearing:Math.min.apply(null,a),maxLeftSideBearing:Math.max.apply(null,a),minRightSideBearing:Math.min.apply(null,l)};C.ascender=t.ascender,C.descender=t.descender;var b=NK.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:C.xMin,yMin:C.yMin,xMax:C.xMax,yMax:C.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),x=BK.make({ascender:C.ascender,descender:C.descender,advanceWidthMax:C.advanceWidthMax,minLeftSideBearing:C.minLeftSideBearing,minRightSideBearing:C.minRightSideBearing,xMaxExtent:C.maxLeftSideBearing+(C.xMax-C.xMin),numberOfHMetrics:t.glyphs.length}),w=zK.make(t.glyphs.length),k=n3.make(Object.assign({xAvgCharWidth:Math.round(C.advanceWidthAvg),usFirstCharIndex:c,usLastCharIndex:d,ulUnicodeRange1:u,ulUnicodeRange2:p,ulUnicodeRange3:h,ulUnicodeRange4:f,sTypoAscender:C.ascender,sTypoDescender:C.descender,sTypoLineGap:0,usWinAscent:C.yMax,usWinDescent:Math.abs(C.yMin),ulCodePageRange1:1,sxHeight:ZK(t,"xyvw",{yMax:Math.round(C.ascender/2)}).yMax,sCapHeight:ZK(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",C).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0},t.tables.os2)),T=LK.make(t.glyphs),A=yK.make(t.glyphs),E=t.getEnglishName("fontFamily"),F=t.getEnglishName("fontSubfamily"),z=E+" "+F,L=t.getEnglishName("postScriptName");L||(L=E.replace(/\s/g,"")+"-"+F);var R={};for(var N in t.names)R[N]=t.names[N];R.uniqueID||(R.uniqueID={en:t.getEnglishName("manufacturer")+":"+z}),R.postScriptName||(R.postScriptName={en:L}),R.preferredFamily||(R.preferredFamily=t.names.fontFamily),R.preferredSubfamily||(R.preferredSubfamily=t.names.fontSubfamily);var V=[],W=jK.make(R,V),me=V.length>0?OK.make(V):void 0,ie=KK.make(),Z=MK.make(t.glyphs,{version:t.getEnglishName("version"),fullName:z,familyName:E,weightName:F,postScriptName:L,unitsPerEm:t.unitsPerEm,fontBBox:[0,C.yMin,C.ascender,C.advanceWidthMax]}),P=t.metas&&Object.keys(t.metas).length>0?YK.make(t.metas):void 0,_=[b,x,w,k,W,A,ie,Z,T];me&&_.push(me),t.tables.gsub&&_.push(qK.make(t.tables.gsub)),P&&_.push(P);for(var I=JK(_),U=I.encode(),M=o3(U),$=I.fields,H=!1,Y=0;Y<$.length;Y+=1)if($[Y].name==="head table"){$[Y].value.checkSumAdjustment=2981146554-M,H=!0;break}if(!H)throw new Error("Could not find head table with checkSum to adjust.");return I}var Lbe={make:JK,fontToTable:Bbe,computeCheckSum:o3};function i3(t,e){for(var r=0,o=t.length-1;r<=o;){var i=r+o>>>1,s=t[i].tag;if(s===e)return i;s<e?r=i+1:o=i-1}return-r-1}function eq(t,e){for(var r=0,o=t.length-1;r<=o;){var i=r+o>>>1,s=t[i];if(s===e)return i;s<e?r=i+1:o=i-1}return-r-1}function tq(t,e){for(var r,o=0,i=t.length-1;o<=i;){var s=o+i>>>1;r=t[s];var a=r.start;if(a===e)return r;a<e?o=s+1:i=s-1}if(o>0)return r=t[o-1],e>r.end?0:r}function Xw(t,e){this.font=t,this.tableName=e}Xw.prototype={searchTag:i3,binSearch:eq,getTable:function(t){var e=this.font.tables[this.tableName];return!e&&t&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var t=this.getTable();return t?t.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var t=this.getTable();if(!!t){for(var e=!1,r=0;r<t.scripts.length;r++){var o=t.scripts[r].tag;if(o==="DFLT")return o;o==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(t,e){var r=this.getTable(e);if(r){t=t||"DFLT";var o=r.scripts,i=i3(r.scripts,t);if(i>=0)return o[i].script;if(e){var s={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return o.splice(-1-i,0,s),s.script}}},getLangSysTable:function(t,e,r){var o=this.getScriptTable(t,r);if(o){if(!e||e==="dflt"||e==="DFLT")return o.defaultLangSys;var i=i3(o.langSysRecords,e);if(i>=0)return o.langSysRecords[i].langSys;if(r){var s={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return o.langSysRecords.splice(-1-i,0,s),s.langSys}}},getFeatureTable:function(t,e,r,o){var i=this.getLangSysTable(t,e,o);if(i){for(var s,a=i.featureIndexes,l=this.font.tables[this.tableName].features,c=0;c<a.length;c++)if(s=l[a[c]],s.tag===r)return s.feature;if(o){var d=l.length;return sn.assert(d===0||r>=l[d-1].tag,"Features must be added in alphabetical order."),s={tag:r,feature:{params:0,lookupListIndexes:[]}},l.push(s),a.push(d),s.feature}}},getLookupTables:function(t,e,r,o,i){var s=this.getFeatureTable(t,e,r,i),a=[];if(s){for(var l,c=s.lookupListIndexes,d=this.font.tables[this.tableName].lookups,u=0;u<c.length;u++)l=d[c[u]],l.lookupType===o&&a.push(l);if(a.length===0&&i){l={lookupType:o,lookupFlag:0,subtables:[],markFilteringSet:void 0};var p=d.length;return d.push(l),c.push(p),[l]}}return a},getGlyphClass:function(t,e){switch(t.format){case 1:return t.startGlyph<=e&&e<t.startGlyph+t.classes.length?t.classes[e-t.startGlyph]:0;case 2:var r=tq(t.ranges,e);return r?r.classId:0}},getCoverageIndex:function(t,e){switch(t.format){case 1:var r=eq(t.glyphs,e);return r>=0?r:-1;case 2:var o=tq(t.ranges,e);return o?o.index+e-o.start:-1}},expandCoverage:function(t){if(t.format===1)return t.glyphs;for(var e=[],r=t.ranges,o=0;o<r.length;o++)for(var i=r[o],s=i.start,a=i.end,l=s;l<=a;l++)e.push(l);return e}};function Qw(t){Xw.call(this,t,"gpos")}Qw.prototype=Xw.prototype;Qw.prototype.init=function(){var t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)};Qw.prototype.getKerningValue=function(t,e,r){for(var o=0;o<t.length;o++)for(var i=t[o].subtables,s=0;s<i.length;s++){var a=i[s],l=this.getCoverageIndex(a.coverage,e);if(!(l<0))switch(a.posFormat){case 1:for(var c=a.pairSets[l],d=0;d<c.length;d++){var u=c[d];if(u.secondGlyph===r)return u.value1&&u.value1.xAdvance||0}break;case 2:var p=this.getGlyphClass(a.classDef1,e),h=this.getGlyphClass(a.classDef2,r),f=a.classRecords[p][h];return f.value1&&f.value1.xAdvance||0}}return 0};Qw.prototype.getKerningTables=function(t,e){if(this.font.tables.gpos)return this.getLookupTables(t,e,"kern",2)};function Pd(t){Xw.call(this,t,"gsub")}function Obe(t,e){var r=t.length;if(r!==e.length)return!1;for(var o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}function rq(t,e,r){for(var o=t.subtables,i=0;i<o.length;i++){var s=o[i];if(s.substFormat===e)return s}if(r)return o.push(r),r}Pd.prototype=Xw.prototype;Pd.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Pd.prototype.getSingle=function(t,e,r){for(var o=[],i=this.getLookupTables(e,r,t,1),s=0;s<i.length;s++)for(var a=i[s].subtables,l=0;l<a.length;l++){var c=a[l],d=this.expandCoverage(c.coverage),u=void 0;if(c.substFormat===1){var p=c.deltaGlyphId;for(u=0;u<d.length;u++){var h=d[u];o.push({sub:h,by:h+p})}}else{var f=c.substitute;for(u=0;u<d.length;u++)o.push({sub:d[u],by:f[u]})}}return o};Pd.prototype.getAlternates=function(t,e,r){for(var o=[],i=this.getLookupTables(e,r,t,3),s=0;s<i.length;s++)for(var a=i[s].subtables,l=0;l<a.length;l++)for(var c=a[l],d=this.expandCoverage(c.coverage),u=c.alternateSets,p=0;p<d.length;p++)o.push({sub:d[p],by:u[p]});return o};Pd.prototype.getLigatures=function(t,e,r){for(var o=[],i=this.getLookupTables(e,r,t,4),s=0;s<i.length;s++)for(var a=i[s].subtables,l=0;l<a.length;l++)for(var c=a[l],d=this.expandCoverage(c.coverage),u=c.ligatureSets,p=0;p<d.length;p++)for(var h=d[p],f=u[p],m=0;m<f.length;m++){var g=f[m];o.push({sub:[h].concat(g.components),by:g.ligGlyph})}return o};Pd.prototype.addSingle=function(t,e,r,o){var i=this.getLookupTables(r,o,t,1,!0)[0],s=rq(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});sn.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var a=e.sub,l=this.binSearch(s.coverage.glyphs,a);l<0&&(l=-1-l,s.coverage.glyphs.splice(l,0,a),s.substitute.splice(l,0,0)),s.substitute[l]=e.by};Pd.prototype.addAlternate=function(t,e,r,o){var i=this.getLookupTables(r,o,t,3,!0)[0],s=rq(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});sn.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var a=e.sub,l=this.binSearch(s.coverage.glyphs,a);l<0&&(l=-1-l,s.coverage.glyphs.splice(l,0,a),s.alternateSets.splice(l,0,0)),s.alternateSets[l]=e.by};Pd.prototype.addLigature=function(t,e,r,o){var i=this.getLookupTables(r,o,t,4,!0)[0],s=i.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=s),sn.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var a=e.sub[0],l=e.sub.slice(1),c={ligGlyph:e.by,components:l},d=this.binSearch(s.coverage.glyphs,a);if(d>=0){for(var u=s.ligatureSets[d],p=0;p<u.length;p++)if(Obe(u[p].components,l))return;u.push(c)}else d=-1-d,s.coverage.glyphs.splice(d,0,a),s.ligatureSets.splice(d,0,[c])};Pd.prototype.getFeature=function(t,e,r){if(/ss\d\d/.test(t))return this.getSingle(t,e,r);switch(t){case"aalt":case"salt":return this.getSingle(t,e,r).concat(this.getAlternates(t,e,r));case"dlig":case"liga":case"rlig":return this.getLigatures(t,e,r)}};Pd.prototype.add=function(t,e,r,o){if(/ss\d\d/.test(t))return this.addSingle(t,e,r,o);switch(t){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(t,e,r,o):this.addAlternate(t,e,r,o);case"dlig":case"liga":case"rlig":return this.addLigature(t,e,r,o)}};function zbe(){return typeof window!="undefined"}function Ube(t){for(var e=new Buffer(t.byteLength),r=new Uint8Array(t),o=0;o<e.length;++o)e[o]=r[o];return e}function Jw(t,e){if(!t)throw e}function nq(t,e,r,o,i){var s;return(e&o)>0?(s=t.parseByte(),(e&i)==0&&(s=-s),s=r+s):(e&i)>0?s=r:s=r+t.parseShort(),s}function oq(t,e,r){var o=new ir.Parser(e,r);t.numberOfContours=o.parseShort(),t._xMin=o.parseShort(),t._yMin=o.parseShort(),t._xMax=o.parseShort(),t._yMax=o.parseShort();var i,s;if(t.numberOfContours>0){for(var a=t.endPointIndices=[],l=0;l<t.numberOfContours;l+=1)a.push(o.parseUShort());t.instructionLength=o.parseUShort(),t.instructions=[];for(var c=0;c<t.instructionLength;c+=1)t.instructions.push(o.parseByte());var d=a[a.length-1]+1;i=[];for(var u=0;u<d;u+=1)if(s=o.parseByte(),i.push(s),(s&8)>0)for(var p=o.parseByte(),h=0;h<p;h+=1)i.push(s),u+=1;if(sn.argument(i.length===d,"Bad flags."),a.length>0){var f=[],m;if(d>0){for(var g=0;g<d;g+=1)s=i[g],m={},m.onCurve=!!(s&1),m.lastPointOfContour=a.indexOf(g)>=0,f.push(m);for(var v=0,y=0;y<d;y+=1)s=i[y],m=f[y],m.x=nq(o,s,v,2,16),v=m.x;for(var S=0,C=0;C<d;C+=1)s=i[C],m=f[C],m.y=nq(o,s,S,4,32),S=m.y}t.points=f}else t.points=[]}else if(t.numberOfContours===0)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var b=!0;b;){i=o.parseUShort();var x={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(x.dx=o.parseShort(),x.dy=o.parseShort()):x.matchedPoints=[o.parseUShort(),o.parseUShort()]:(i&2)>0?(x.dx=o.parseChar(),x.dy=o.parseChar()):x.matchedPoints=[o.parseByte(),o.parseByte()],(i&8)>0?x.xScale=x.yScale=o.parseF2Dot14():(i&64)>0?(x.xScale=o.parseF2Dot14(),x.yScale=o.parseF2Dot14()):(i&128)>0&&(x.xScale=o.parseF2Dot14(),x.scale01=o.parseF2Dot14(),x.scale10=o.parseF2Dot14(),x.yScale=o.parseF2Dot14()),t.components.push(x),b=!!(i&32)}if(i&256){t.instructionLength=o.parseUShort(),t.instructions=[];for(var w=0;w<t.instructionLength;w+=1)t.instructions.push(o.parseByte())}}}function s3(t,e){for(var r=[],o=0;o<t.length;o+=1){var i=t[o],s={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(s)}return r}function Hbe(t){for(var e=[],r=[],o=0;o<t.length;o+=1){var i=t[o];r.push(i),i.lastPointOfContour&&(e.push(r),r=[])}return sn.argument(r.length===0,"There are still points left in the current contour."),e}function iq(t){var e=new gs;if(!t)return e;for(var r=Hbe(t),o=0;o<r.length;++o){var i=r[o],s=null,a=i[i.length-1],l=i[0];if(a.onCurve)e.moveTo(a.x,a.y);else if(l.onCurve)e.moveTo(l.x,l.y);else{var c={x:(a.x+l.x)*.5,y:(a.y+l.y)*.5};e.moveTo(c.x,c.y)}for(var d=0;d<i.length;++d)if(s=a,a=l,l=i[(d+1)%i.length],a.onCurve)e.lineTo(a.x,a.y);else{var u=s,p=l;s.onCurve||(u={x:(a.x+s.x)*.5,y:(a.y+s.y)*.5}),l.onCurve||(p={x:(a.x+l.x)*.5,y:(a.y+l.y)*.5}),e.quadraticCurveTo(a.x,a.y,p.x,p.y)}e.closePath()}return e}function sq(t,e){if(e.isComposite)for(var r=0;r<e.components.length;r+=1){var o=e.components[r],i=t.get(o.glyphIndex);if(i.getPath(),i.points){var s=void 0;if(o.matchedPoints===void 0)s=s3(i.points,o);else{if(o.matchedPoints[0]>e.points.length-1||o.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+e.name);var a=e.points[o.matchedPoints[0]],l=i.points[o.matchedPoints[1]],c={xScale:o.xScale,scale01:o.scale01,scale10:o.scale10,yScale:o.yScale,dx:0,dy:0};l=s3([l],c)[0],c.dx=a.x-l.x,c.dy=a.y-l.y,s=s3(i.points,c)}e.points=e.points.concat(s)}}return iq(e.points)}function Gbe(t,e,r,o){for(var i=new Au.GlyphSet(o),s=0;s<r.length-1;s+=1){var a=r[s],l=r[s+1];a!==l?i.push(s,Au.ttfGlyphLoader(o,s,oq,t,e+a,sq)):i.push(s,Au.glyphLoader(o,s))}return i}function Vbe(t,e,r,o){var i=new Au.GlyphSet(o);return o._push=function(s){var a=r[s],l=r[s+1];a!==l?i.push(s,Au.ttfGlyphLoader(o,s,oq,t,e+a,sq)):i.push(s,Au.glyphLoader(o,s))},i}function $be(t,e,r,o,i){return i.lowMemory?Vbe(t,e,r,o):Gbe(t,e,r,o)}var aq={getPath:iq,parse:$be},lq,kv,cq,a3;function dq(t){this.font=t,this.getCommands=function(e){return aq.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Wbe(t){return t}function uq(t){return Math.sign(t)*Math.round(Math.abs(t))}function jbe(t){return Math.sign(t)*Math.round(Math.abs(t*2))/2}function Kbe(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function qbe(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function Ybe(t){return Math.sign(t)*Math.floor(Math.abs(t))}var pq=function(t){var e=this.srPeriod,r=this.srPhase,o=this.srThreshold,i=1;return t<0&&(t=-t,i=-1),t+=o-r,t=Math.trunc(t/e)*e,t+=r,t<0?r*i:t*i},Iu={x:1,y:0,axis:"x",distance:function(t,e,r,o){return(r?t.xo:t.x)-(o?e.xo:e.x)},interpolate:function(t,e,r,o){var i,s,a,l,c,d,u;if(!o||o===this){if(i=t.xo-e.xo,s=t.xo-r.xo,c=e.x-e.xo,d=r.x-r.xo,a=Math.abs(i),l=Math.abs(s),u=a+l,u===0){t.x=t.xo+(c+d)/2;return}t.x=t.xo+(c*l+d*a)/u;return}if(i=o.distance(t,e,!0,!0),s=o.distance(t,r,!0,!0),c=o.distance(e,e,!1,!0),d=o.distance(r,r,!1,!0),a=Math.abs(i),l=Math.abs(s),u=a+l,u===0){Iu.setRelative(t,t,(c+d)/2,o,!0);return}Iu.setRelative(t,t,(c*l+d*a)/u,o,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,e,r,o,i){if(!o||o===this){t.x=(i?e.xo:e.x)+r;return}var s=i?e.xo:e.x,a=i?e.yo:e.y,l=s+r*o.x,c=a+r*o.y;t.x=l+(t.y-c)/o.normalSlope},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},th={x:0,y:1,axis:"y",distance:function(t,e,r,o){return(r?t.yo:t.y)-(o?e.yo:e.y)},interpolate:function(t,e,r,o){var i,s,a,l,c,d,u;if(!o||o===this){if(i=t.yo-e.yo,s=t.yo-r.yo,c=e.y-e.yo,d=r.y-r.yo,a=Math.abs(i),l=Math.abs(s),u=a+l,u===0){t.y=t.yo+(c+d)/2;return}t.y=t.yo+(c*l+d*a)/u;return}if(i=o.distance(t,e,!0,!0),s=o.distance(t,r,!0,!0),c=o.distance(e,e,!1,!0),d=o.distance(r,r,!1,!0),a=Math.abs(i),l=Math.abs(s),u=a+l,u===0){th.setRelative(t,t,(c+d)/2,o,!0);return}th.setRelative(t,t,(c*l+d*a)/u,o,!0)},normalSlope:0,setRelative:function(t,e,r,o,i){if(!o||o===this){t.y=(i?e.yo:e.y)+r;return}var s=i?e.xo:e.x,a=i?e.yo:e.y,l=s+r*o.x,c=a+r*o.y;t.y=c+o.normalSlope*(t.x-l)},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};Object.freeze(Iu);Object.freeze(th);function Zw(t,e){this.x=t,this.y=e,this.axis=void 0,this.slope=e/t,this.normalSlope=-t/e,Object.freeze(this)}Zw.prototype.distance=function(t,e,r,o){return this.x*Iu.distance(t,e,r,o)+this.y*th.distance(t,e,r,o)};Zw.prototype.interpolate=function(t,e,r,o){var i,s,a,l,c,d,u;if(a=o.distance(t,e,!0,!0),l=o.distance(t,r,!0,!0),i=o.distance(e,e,!1,!0),s=o.distance(r,r,!1,!0),c=Math.abs(a),d=Math.abs(l),u=c+d,u===0){this.setRelative(t,t,(i+s)/2,o,!0);return}this.setRelative(t,t,(i*d+s*c)/u,o,!0)};Zw.prototype.setRelative=function(t,e,r,o,i){o=o||this;var s=i?e.xo:e.x,a=i?e.yo:e.y,l=s+r*o.x,c=a+r*o.y,d=o.normalSlope,u=this.slope,p=t.x,h=t.y;t.x=(u*p-d*l+c-h)/(u-d),t.y=u*(t.x-p)+h};Zw.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0};function e1(t,e){var r=Math.sqrt(t*t+e*e);return t/=r,e/=r,t===1&&e===0?Iu:t===0&&e===1?th:new Zw(t,e)}function rh(t,e,r,o){this.x=this.xo=Math.round(t*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=r,this.onCurve=o,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}rh.prototype.nextTouched=function(t){for(var e=this.nextPointOnContour;!t.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};rh.prototype.prevTouched=function(t){for(var e=this.prevPointOnContour;!t.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var t1=Object.freeze(new rh(0,0)),Xbe={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Yf(t,e){switch(this.env=t,this.stack=[],this.prog=e,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Iu,this.round=uq}}dq.prototype.exec=function(t,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,o=this._prepState;if(!o||o.ppem!==e){var i=this._fpgmState;if(!i){Yf.prototype=Xbe,i=this._fpgmState=new Yf("fpgm",r.tables.fpgm),i.funcs=[],i.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{kv(i)}catch(d){console.log("Hinting error in FPGM:"+d),this._errorState=3;return}}Yf.prototype=i,o=this._prepState=new Yf("prep",r.tables.prep),o.ppem=e;var s=r.tables.cvt;if(s)for(var a=o.cvt=new Array(s.length),l=e/r.unitsPerEm,c=0;c<s.length;c++)a[c]=s[c]*l;else o.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),o.step=-1);try{kv(o)}catch(d){this._errorState<2&&console.log("Hinting error in PREP:"+d),this._errorState=2}}if(!(this._errorState>1))try{return cq(t,o)}catch(d){this._errorState<1&&(console.log("Hinting error:"+d),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};cq=function(t,e){var r=e.ppem/e.font.unitsPerEm,o=r,i=t.components,s,a,l;if(Yf.prototype=e,!i)l=new Yf("glyf",t.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),l.step=-1),a3(t,l,r,o),a=l.gZone;else{var c=e.font;a=[],s=[];for(var d=0;d<i.length;d++){var u=i[d],p=c.glyphs.get(u.glyphIndex);l=new Yf("glyf",p.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+d+"---"),l.step=-1),a3(p,l,r,o);for(var h=Math.round(u.dx*r),f=Math.round(u.dy*o),m=l.gZone,g=l.contours,v=0;v<m.length;v++){var y=m[v];y.xTouched=y.yTouched=!1,y.xo=y.x=y.x+h,y.yo=y.y=y.y+f}var S=a.length;a.push.apply(a,m);for(var C=0;C<g.length;C++)s.push(g[C]+S)}t.instructions&&!l.inhibitGridFit&&(l=new Yf("glyf",t.instructions),l.gZone=l.z0=l.z1=l.z2=a,l.contours=s,a.push(new rh(0,0),new rh(Math.round(t.advanceWidth*r),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),l.step=-1),kv(l),a.length-=2)}return a};a3=function(t,e,r,o){for(var i=t.points||[],s=i.length,a=e.gZone=e.z0=e.z1=e.z2=[],l=e.contours=[],c,d=0;d<s;d++)c=i[d],a[d]=new rh(c.x*r,c.y*o,c.lastPointOfContour,c.onCurve);for(var u,p,h=0;h<s;h++)c=a[h],u||(u=c,l.push(h)),c.lastPointOfContour?(c.nextPointOnContour=u,u.prevPointOnContour=c,u=void 0):(p=a[h+1],c.nextPointOnContour=p,p.prevPointOnContour=c);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var f=0;f<s;f++)console.log(f,a[f].x,a[f].y)}if(a.push(new rh(0,0),new rh(Math.round(t.advanceWidth*r),0)),kv(e),a.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var m=0;m<s;m++)console.log(m,a[m].x,a[m].y)}}};kv=function(t){var e=t.prog;if(!!e){var r=e.length,o;for(t.ip=0;t.ip<r;t.ip++){if(exports.DEBUG&&t.step++,o=lq[e[t.ip]],!o)throw new Error("unknown instruction: 0x"+Number(e[t.ip]).toString(16));o(t)}}};function c_(t){for(var e=t.tZone=new Array(t.gZone.length),r=0;r<e.length;r++)e[r]=new rh(0,0)}function hq(t,e){var r=t.prog,o=t.ip,i=1,s;do if(s=r[++o],s===88)i++;else if(s===89)i--;else if(s===64)o+=r[o+1]+1;else if(s===65)o+=2*r[o+1]+1;else if(s>=176&&s<=183)o+=s-176+1;else if(s>=184&&s<=191)o+=(s-184+1)*2;else if(e&&i===1&&s===27)break;while(i>0);t.ip=o}function fq(t,e){exports.DEBUG&&console.log(e.step,"SVTCA["+t.axis+"]"),e.fv=e.pv=e.dpv=t}function mq(t,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+t.axis+"]"),e.pv=e.dpv=t}function gq(t,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+t.axis+"]"),e.fv=t}function vq(t,e){var r=e.stack,o=r.pop(),i=r.pop(),s=e.z2[o],a=e.z1[i];exports.DEBUG&&console.log("SPVTL["+t+"]",o,i);var l,c;t?(l=s.y-a.y,c=a.x-s.x):(l=a.x-s.x,c=a.y-s.y),e.pv=e.dpv=e1(l,c)}function bq(t,e){var r=e.stack,o=r.pop(),i=r.pop(),s=e.z2[o],a=e.z1[i];exports.DEBUG&&console.log("SFVTL["+t+"]",o,i);var l,c;t?(l=s.y-a.y,c=a.x-s.x):(l=a.x-s.x,c=a.y-s.y),e.fv=e1(l,c)}function Qbe(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",r,o),t.pv=t.dpv=e1(o,r)}function Jbe(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",r,o),t.fv=e1(o,r)}function Zbe(t){var e=t.stack,r=t.pv;exports.DEBUG&&console.log(t.step,"GPV[]"),e.push(r.x*16384),e.push(r.y*16384)}function eye(t){var e=t.stack,r=t.fv;exports.DEBUG&&console.log(t.step,"GFV[]"),e.push(r.x*16384),e.push(r.y*16384)}function tye(t){t.fv=t.pv,exports.DEBUG&&console.log(t.step,"SFVTPV[]")}function rye(t){var e=t.stack,r=e.pop(),o=e.pop(),i=e.pop(),s=e.pop(),a=e.pop(),l=t.z0,c=t.z1,d=l[r],u=l[o],p=c[i],h=c[s],f=t.z2[a];exports.DEBUG&&console.log("ISECT[], ",r,o,i,s,a);var m=d.x,g=d.y,v=u.x,y=u.y,S=p.x,C=p.y,b=h.x,x=h.y,w=(m-v)*(C-x)-(g-y)*(S-b),k=m*y-g*v,T=S*x-C*b;f.x=(k*(S-b)-T*(m-v))/w,f.y=(k*(C-x)-T*(g-y))/w}function nye(t){t.rp0=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)}function oye(t){t.rp1=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)}function iye(t){t.rp2=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)}function sye(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP0[]",e),t.zp0=e,e){case 0:t.tZone||c_(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function aye(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP1[]",e),t.zp1=e,e){case 0:t.tZone||c_(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function lye(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP2[]",e),t.zp2=e,e){case 0:t.tZone||c_(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function cye(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZPS[]",e),t.zp0=t.zp1=t.zp2=e,e){case 0:t.tZone||c_(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function dye(t){t.loop=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)}function uye(t){exports.DEBUG&&console.log(t.step,"RTG[]"),t.round=uq}function pye(t){exports.DEBUG&&console.log(t.step,"RTHG[]"),t.round=Kbe}function hye(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SMD[]",e),t.minDis=e/64}function fye(t){exports.DEBUG&&console.log(t.step,"ELSE[]"),hq(t,!1)}function mye(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"JMPR[]",e),t.ip+=e-1}function gye(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCVTCI[]",e),t.cvCutIn=e/64}function vye(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DUP[]"),e.push(e[e.length-1])}function l3(t){exports.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function bye(t){exports.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0}function yye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"SWAP[]"),e.push(r),e.push(o)}function Cye(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DEPTH[]"),e.push(e.length)}function Sye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"LOOPCALL[]",r,o);var i=t.ip,s=t.prog;t.prog=t.funcs[r];for(var a=0;a<o;a++)kv(t),exports.DEBUG&&console.log(++t.step,a+1<o?"next loopcall":"done loopcall",a);t.ip=i,t.prog=s}function xye(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"CALL[]",e);var r=t.ip,o=t.prog;t.prog=t.funcs[e],kv(t),t.ip=r,t.prog=o,exports.DEBUG&&console.log(++t.step,"returning from",e)}function wye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"CINDEX[]",r),e.push(e[e.length-r])}function Tye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"MINDEX[]",r),e.push(e.splice(e.length-r,1)[0])}function Dye(t){if(t.env!=="fpgm")throw new Error("FDEF not allowed here");var e=t.stack,r=t.prog,o=t.ip,i=e.pop(),s=o;for(exports.DEBUG&&console.log(t.step,"FDEF[]",i);r[++o]!==45;);t.ip=o,t.funcs[i]=r.slice(s+1,o)}function yq(t,e){var r=e.stack.pop(),o=e.z0[r],i=e.fv,s=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+t+"]",r);var a=s.distance(o,t1);t&&(a=e.round(a)),i.setRelative(o,t1,a,s),i.touch(o),e.rp0=e.rp1=r}function Cq(t,e){var r=e.z2,o=r.length-2,i,s,a;exports.DEBUG&&console.log(e.step,"IUP["+t.axis+"]");for(var l=0;l<o;l++)i=r[l],!t.touched(i)&&(s=i.prevTouched(t),s!==i&&(a=i.nextTouched(t),s===a&&t.setRelative(i,i,t.distance(s,s,!1,!0),t,!0),t.interpolate(i,s,a,t)))}function Sq(t,e){for(var r=e.stack,o=t?e.rp1:e.rp2,i=(t?e.z0:e.z1)[o],s=e.fv,a=e.pv,l=e.loop,c=e.z2;l--;){var d=r.pop(),u=c[d],p=a.distance(i,i,!1,!0);s.setRelative(u,u,p,a),s.touch(u),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-l)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",d)}e.loop=1}function xq(t,e){var r=e.stack,o=t?e.rp1:e.rp2,i=(t?e.z0:e.z1)[o],s=e.fv,a=e.pv,l=r.pop(),c=e.z2[e.contours[l]],d=c;exports.DEBUG&&console.log(e.step,"SHC["+t+"]",l);var u=a.distance(i,i,!1,!0);do d!==i&&s.setRelative(d,d,u,a),d=d.nextPointOnContour;while(d!==c)}function wq(t,e){var r=e.stack,o=t?e.rp1:e.rp2,i=(t?e.z0:e.z1)[o],s=e.fv,a=e.pv,l=r.pop();exports.DEBUG&&console.log(e.step,"SHZ["+t+"]",l);var c;switch(l){case 0:c=e.tZone;break;case 1:c=e.gZone;break;default:throw new Error("Invalid zone")}for(var d,u=a.distance(i,i,!1,!0),p=c.length-2,h=0;h<p;h++)d=c[h],s.setRelative(d,d,u,a)}function kye(t){for(var e=t.stack,r=t.loop,o=t.fv,i=e.pop()/64,s=t.z2;r--;){var a=e.pop(),l=s[a];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-r)+": ":"")+"SHPIX[]",a,i),o.setRelative(l,l,i),o.touch(l)}t.loop=1}function Pye(t){for(var e=t.stack,r=t.rp1,o=t.rp2,i=t.loop,s=t.z0[r],a=t.z1[o],l=t.fv,c=t.dpv,d=t.z2;i--;){var u=e.pop(),p=d[u];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"IP[]",u,r,"<->",o),l.interpolate(p,s,a,c),l.touch(p)}t.loop=1}function Tq(t,e){var r=e.stack,o=r.pop()/64,i=r.pop(),s=e.z1[i],a=e.z0[e.rp0],l=e.fv,c=e.pv;l.setRelative(s,a,o,c),l.touch(s),exports.DEBUG&&console.log(e.step,"MSIRP["+t+"]",o,i),e.rp1=e.rp0,e.rp2=i,t&&(e.rp0=i)}function Eye(t){for(var e=t.stack,r=t.rp0,o=t.z0[r],i=t.loop,s=t.fv,a=t.pv,l=t.z1;i--;){var c=e.pop(),d=l[c];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"ALIGNRP[]",c),s.setRelative(d,o,0,a),s.touch(d)}t.loop=1}function _ye(t){exports.DEBUG&&console.log(t.step,"RTDG[]"),t.round=jbe}function Dq(t,e){var r=e.stack,o=r.pop(),i=r.pop(),s=e.z0[i],a=e.fv,l=e.pv,c=e.cvt[o];exports.DEBUG&&console.log(e.step,"MIAP["+t+"]",o,"(",c,")",i);var d=l.distance(s,t1);t&&(Math.abs(d-c)<e.cvCutIn&&(d=c),d=e.round(d)),a.setRelative(s,t1,d,l),e.zp0===0&&(s.xo=s.x,s.yo=s.y),a.touch(s),e.rp0=e.rp1=i}function Aye(t){var e=t.prog,r=t.ip,o=t.stack,i=e[++r];exports.DEBUG&&console.log(t.step,"NPUSHB[]",i);for(var s=0;s<i;s++)o.push(e[++r]);t.ip=r}function Iye(t){var e=t.ip,r=t.prog,o=t.stack,i=r[++e];exports.DEBUG&&console.log(t.step,"NPUSHW[]",i);for(var s=0;s<i;s++){var a=r[++e]<<8|r[++e];a&32768&&(a=-((a^65535)+1)),o.push(a)}t.ip=e}function Rye(t){var e=t.stack,r=t.store;r||(r=t.store=[]);var o=e.pop(),i=e.pop();exports.DEBUG&&console.log(t.step,"WS",o,i),r[i]=o}function Fye(t){var e=t.stack,r=t.store,o=e.pop();exports.DEBUG&&console.log(t.step,"RS",o);var i=r&&r[o]||0;e.push(i)}function Mye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"WCVTP",r,o),t.cvt[o]=r/64}function Nye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"RCVT",r),e.push(t.cvt[r]*64)}function kq(t,e){var r=e.stack,o=r.pop(),i=e.z2[o];exports.DEBUG&&console.log(e.step,"GC["+t+"]",o),r.push(e.dpv.distance(i,t1,t,!1)*64)}function Pq(t,e){var r=e.stack,o=r.pop(),i=r.pop(),s=e.z1[o],a=e.z0[i],l=e.dpv.distance(a,s,t,t);exports.DEBUG&&console.log(e.step,"MD["+t+"]",o,i,"->",l),e.stack.push(Math.round(l*64))}function Bye(t){exports.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)}function Lye(t){exports.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0}function Oye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"LT[]",r,o),e.push(o<r?1:0)}function zye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"LTEQ[]",r,o),e.push(o<=r?1:0)}function Uye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"GT[]",r,o),e.push(o>r?1:0)}function Hye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"GTEQ[]",r,o),e.push(o>=r?1:0)}function Gye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"EQ[]",r,o),e.push(r===o?1:0)}function Vye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"NEQ[]",r,o),e.push(r!==o?1:0)}function $ye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"ODD[]",r),e.push(Math.trunc(r)%2?1:0)}function Wye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"EVEN[]",r),e.push(Math.trunc(r)%2?0:1)}function jye(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"IF[]",e),e||(hq(t,!0),exports.DEBUG&&console.log(t.step,"EIF[]"))}function Kye(t){exports.DEBUG&&console.log(t.step,"EIF[]")}function qye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"AND[]",r,o),e.push(r&&o?1:0)}function Yye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"OR[]",r,o),e.push(r||o?1:0)}function Xye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"NOT[]",r),e.push(r?0:1)}function c3(t,e){var r=e.stack,o=r.pop(),i=e.fv,s=e.pv,a=e.ppem,l=e.deltaBase+(t-1)*16,c=e.deltaShift,d=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+t+"]",o,r);for(var u=0;u<o;u++){var p=r.pop(),h=r.pop(),f=l+((h&240)>>4);if(f===a){var m=(h&15)-8;m>=0&&m++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",p,"by",m*c);var g=d[p];i.setRelative(g,g,m*c,s)}}}function Qye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"SDB[]",r),t.deltaBase=r}function Jye(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"SDS[]",r),t.deltaShift=Math.pow(.5,r)}function Zye(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"ADD[]",r,o),e.push(o+r)}function e0e(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"SUB[]",r,o),e.push(o-r)}function t0e(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"DIV[]",r,o),e.push(o*64/r)}function r0e(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"MUL[]",r,o),e.push(o*r/64)}function n0e(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"ABS[]",r),e.push(Math.abs(r))}function o0e(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"NEG[]",r),e.push(-r)}function i0e(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"FLOOR[]",r),e.push(Math.floor(r/64)*64)}function s0e(t){var e=t.stack,r=e.pop();exports.DEBUG&&console.log(t.step,"CEILING[]",r),e.push(Math.ceil(r/64)*64)}function d_(t,e){var r=e.stack,o=r.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),r.push(e.round(o/64)*64)}function a0e(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"WCVTF[]",r,o),t.cvt[o]=r*t.ppem/t.font.unitsPerEm}function d3(t,e){var r=e.stack,o=r.pop(),i=e.ppem,s=e.deltaBase+(t-1)*16,a=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+t+"]",o,r);for(var l=0;l<o;l++){var c=r.pop(),d=r.pop(),u=s+((d&240)>>4);if(u===i){var p=(d&15)-8;p>=0&&p++;var h=p*a;exports.DEBUG&&console.log(e.step,"DELTACFIX",c,"by",h),e.cvt[c]+=h}}}function l0e(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SROUND[]",e),t.round=pq;var r;switch(e&192){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=r,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*r;break;case 32:t.srPhase=.5*r;break;case 48:t.srPhase=.75*r;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*r}function c0e(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"S45ROUND[]",e),t.round=pq;var r;switch(e&192){case 0:r=Math.sqrt(2)/2;break;case 64:r=Math.sqrt(2);break;case 128:r=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=r,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*r;break;case 32:t.srPhase=.5*r;break;case 48:t.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*r}function d0e(t){exports.DEBUG&&console.log(t.step,"ROFF[]"),t.round=Wbe}function u0e(t){exports.DEBUG&&console.log(t.step,"RUTG[]"),t.round=qbe}function p0e(t){exports.DEBUG&&console.log(t.step,"RDTG[]"),t.round=Ybe}function h0e(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANCTRL[]",e)}function Eq(t,e){var r=e.stack,o=r.pop(),i=r.pop(),s=e.z2[o],a=e.z1[i];exports.DEBUG&&console.log(e.step,"SDPVTL["+t+"]",o,i);var l,c;t?(l=s.y-a.y,c=a.x-s.x):(l=a.x-s.x,c=a.y-s.y),e.dpv=e1(l,c)}function f0e(t){var e=t.stack,r=e.pop(),o=0;exports.DEBUG&&console.log(t.step,"GETINFO[]",r),r&1&&(o=35),r&32&&(o|=4096),e.push(o)}function m0e(t){var e=t.stack,r=e.pop(),o=e.pop(),i=e.pop();exports.DEBUG&&console.log(t.step,"ROLL[]"),e.push(o),e.push(r),e.push(i)}function g0e(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"MAX[]",r,o),e.push(Math.max(o,r))}function v0e(t){var e=t.stack,r=e.pop(),o=e.pop();exports.DEBUG&&console.log(t.step,"MIN[]",r,o),e.push(Math.min(o,r))}function b0e(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANTYPE[]",e)}function y0e(t){var e=t.stack.pop(),r=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"INSTCTRL[]",e,r),e){case 1:t.inhibitGridFit=!!r;return;case 2:t.ignoreCvt=!!r;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Xf(t,e){var r=e.stack,o=e.prog,i=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+t+"]");for(var s=0;s<t;s++)r.push(o[++i]);e.ip=i}function Qf(t,e){var r=e.ip,o=e.prog,i=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+t+"]");for(var s=0;s<t;s++){var a=o[++r]<<8|o[++r];a&32768&&(a=-((a^65535)+1)),i.push(a)}e.ip=r}function rr(t,e,r,o,i,s){var a=s.stack,l=t&&a.pop(),c=a.pop(),d=s.rp0,u=s.z0[d],p=s.z1[c],h=s.minDis,f=s.fv,m=s.dpv,g,v,y,S;v=g=m.distance(p,u,!0,!0),y=v>=0?1:-1,v=Math.abs(v),t&&(S=s.cvt[l],o&&Math.abs(v-S)<s.cvCutIn&&(v=S)),r&&v<h&&(v=h),o&&(v=s.round(v)),f.setRelative(p,u,y*v,m),f.touch(p),exports.DEBUG&&console.log(s.step,(t?"MIRP[":"MDRP[")+(e?"M":"m")+(r?">":"_")+(o?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",t?l+"("+s.cvt[l]+","+S+")":"",c,"(d =",g,"->",y*v,")"),s.rp1=s.rp0,s.rp2=c,e&&(s.rp0=c)}lq=[fq.bind(void 0,th),fq.bind(void 0,Iu),mq.bind(void 0,th),mq.bind(void 0,Iu),gq.bind(void 0,th),gq.bind(void 0,Iu),vq.bind(void 0,0),vq.bind(void 0,1),bq.bind(void 0,0),bq.bind(void 0,1),Qbe,Jbe,Zbe,eye,tye,rye,nye,oye,iye,sye,aye,lye,cye,dye,uye,pye,hye,fye,mye,gye,void 0,void 0,vye,l3,bye,yye,Cye,wye,Tye,void 0,void 0,void 0,Sye,xye,Dye,void 0,yq.bind(void 0,0),yq.bind(void 0,1),Cq.bind(void 0,th),Cq.bind(void 0,Iu),Sq.bind(void 0,0),Sq.bind(void 0,1),xq.bind(void 0,0),xq.bind(void 0,1),wq.bind(void 0,0),wq.bind(void 0,1),kye,Pye,Tq.bind(void 0,0),Tq.bind(void 0,1),Eye,_ye,Dq.bind(void 0,0),Dq.bind(void 0,1),Aye,Iye,Rye,Fye,Mye,Nye,kq.bind(void 0,0),kq.bind(void 0,1),void 0,Pq.bind(void 0,0),Pq.bind(void 0,1),Bye,void 0,Lye,void 0,void 0,Oye,zye,Uye,Hye,Gye,Vye,$ye,Wye,jye,Kye,qye,Yye,Xye,c3.bind(void 0,1),Qye,Jye,Zye,e0e,t0e,r0e,n0e,o0e,i0e,s0e,d_.bind(void 0,0),d_.bind(void 0,1),d_.bind(void 0,2),d_.bind(void 0,3),void 0,void 0,void 0,void 0,a0e,c3.bind(void 0,2),c3.bind(void 0,3),d3.bind(void 0,1),d3.bind(void 0,2),d3.bind(void 0,3),l0e,c0e,void 0,void 0,d0e,void 0,u0e,p0e,l3,l3,void 0,void 0,void 0,void 0,void 0,h0e,Eq.bind(void 0,0),Eq.bind(void 0,1),f0e,void 0,m0e,g0e,v0e,b0e,y0e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Xf.bind(void 0,1),Xf.bind(void 0,2),Xf.bind(void 0,3),Xf.bind(void 0,4),Xf.bind(void 0,5),Xf.bind(void 0,6),Xf.bind(void 0,7),Xf.bind(void 0,8),Qf.bind(void 0,1),Qf.bind(void 0,2),Qf.bind(void 0,3),Qf.bind(void 0,4),Qf.bind(void 0,5),Qf.bind(void 0,6),Qf.bind(void 0,7),Qf.bind(void 0,8),rr.bind(void 0,0,0,0,0,0),rr.bind(void 0,0,0,0,0,1),rr.bind(void 0,0,0,0,0,2),rr.bind(void 0,0,0,0,0,3),rr.bind(void 0,0,0,0,1,0),rr.bind(void 0,0,0,0,1,1),rr.bind(void 0,0,0,0,1,2),rr.bind(void 0,0,0,0,1,3),rr.bind(void 0,0,0,1,0,0),rr.bind(void 0,0,0,1,0,1),rr.bind(void 0,0,0,1,0,2),rr.bind(void 0,0,0,1,0,3),rr.bind(void 0,0,0,1,1,0),rr.bind(void 0,0,0,1,1,1),rr.bind(void 0,0,0,1,1,2),rr.bind(void 0,0,0,1,1,3),rr.bind(void 0,0,1,0,0,0),rr.bind(void 0,0,1,0,0,1),rr.bind(void 0,0,1,0,0,2),rr.bind(void 0,0,1,0,0,3),rr.bind(void 0,0,1,0,1,0),rr.bind(void 0,0,1,0,1,1),rr.bind(void 0,0,1,0,1,2),rr.bind(void 0,0,1,0,1,3),rr.bind(void 0,0,1,1,0,0),rr.bind(void 0,0,1,1,0,1),rr.bind(void 0,0,1,1,0,2),rr.bind(void 0,0,1,1,0,3),rr.bind(void 0,0,1,1,1,0),rr.bind(void 0,0,1,1,1,1),rr.bind(void 0,0,1,1,1,2),rr.bind(void 0,0,1,1,1,3),rr.bind(void 0,1,0,0,0,0),rr.bind(void 0,1,0,0,0,1),rr.bind(void 0,1,0,0,0,2),rr.bind(void 0,1,0,0,0,3),rr.bind(void 0,1,0,0,1,0),rr.bind(void 0,1,0,0,1,1),rr.bind(void 0,1,0,0,1,2),rr.bind(void 0,1,0,0,1,3),rr.bind(void 0,1,0,1,0,0),rr.bind(void 0,1,0,1,0,1),rr.bind(void 0,1,0,1,0,2),rr.bind(void 0,1,0,1,0,3),rr.bind(void 0,1,0,1,1,0),rr.bind(void 0,1,0,1,1,1),rr.bind(void 0,1,0,1,1,2),rr.bind(void 0,1,0,1,1,3),rr.bind(void 0,1,1,0,0,0),rr.bind(void 0,1,1,0,0,1),rr.bind(void 0,1,1,0,0,2),rr.bind(void 0,1,1,0,0,3),rr.bind(void 0,1,1,0,1,0),rr.bind(void 0,1,1,0,1,1),rr.bind(void 0,1,1,0,1,2),rr.bind(void 0,1,1,0,1,3),rr.bind(void 0,1,1,1,0,0),rr.bind(void 0,1,1,1,0,1),rr.bind(void 0,1,1,1,0,2),rr.bind(void 0,1,1,1,0,3),rr.bind(void 0,1,1,1,1,0),rr.bind(void 0,1,1,1,1,1),rr.bind(void 0,1,1,1,1,2),rr.bind(void 0,1,1,1,1,3)];function N0(t){this.char=t,this.state={},this.activeState=null}function u3(t,e,r){this.contextName=r,this.startIndex=t,this.endOffset=e}function C0e(t,e,r){this.contextName=t,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=r}function Ed(t,e){this.context=t,this.index=e,this.length=t.length,this.current=t[e],this.backtrack=t.slice(0,e),this.lookahead=t.slice(e+1)}function u_(t){this.eventId=t,this.subscribers=[]}function S0e(t){var e=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach(function(i){Object.defineProperty(e.events,i,{value:new u_(i)})}),t&&r.forEach(function(i){var s=t[i];typeof s=="function"&&e.events[i].subscribe(s)});var o=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];o.forEach(function(i){e.events[i].subscribe(e.updateContextsRanges)})}function Di(t){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],S0e.call(this,t)}N0.prototype.setState=function(t,e){return this.state[t]=e,this.activeState={key:t,value:this.state[t]},this.activeState};N0.prototype.getState=function(t){return this.state[t]||null};Di.prototype.inboundIndex=function(t){return t>=0&&t<this.tokens.length};Di.prototype.composeRUD=function(t){var e=this,r=!0,o=t.map(function(s){return e[s[0]].apply(e,s.slice(1).concat(r))}),i=function(s){return typeof s=="object"&&s.hasOwnProperty("FAIL")};if(o.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:o.filter(i)};this.dispatch("composeRUD",[o.filter(function(s){return!i(s)})])};Di.prototype.replaceRange=function(t,e,r,o){e=e!==null?e:this.tokens.length;var i=r.every(function(a){return a instanceof N0});if(!isNaN(t)&&this.inboundIndex(t)&&i){var s=this.tokens.splice.apply(this.tokens,[t,e].concat(r));return o||this.dispatch("replaceToken",[t,e,r]),[s,r]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Di.prototype.replaceToken=function(t,e,r){if(!isNaN(t)&&this.inboundIndex(t)&&e instanceof N0){var o=this.tokens.splice(t,1,e);return r||this.dispatch("replaceToken",[t,e]),[o[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Di.prototype.removeRange=function(t,e,r){e=isNaN(e)?this.tokens.length:e;var o=this.tokens.splice(t,e);return r||this.dispatch("removeRange",[o,t,e]),o};Di.prototype.removeToken=function(t,e){if(!isNaN(t)&&this.inboundIndex(t)){var r=this.tokens.splice(t,1);return e||this.dispatch("removeToken",[r,t]),r}else return{FAIL:"removeToken: invalid token index."}};Di.prototype.insertToken=function(t,e,r){var o=t.every(function(i){return i instanceof N0});return o?(this.tokens.splice.apply(this.tokens,[e,0].concat(t)),r||this.dispatch("insertToken",[t,e]),t):{FAIL:"insertToken: invalid token(s)."}};Di.prototype.registerModifier=function(t,e,r){this.events.newToken.subscribe(function(o,i){var s=[o,i],a=e===null||e.apply(this,s)===!0,l=[o,i];if(a){var c=r.apply(this,l);o.setState(t,c)}}),this.registeredModifiers.push(t)};u_.prototype.subscribe=function(t){return typeof t=="function"?this.subscribers.push(t)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};u_.prototype.unsubscribe=function(t){this.subscribers.splice(t,1)};Ed.prototype.setCurrentIndex=function(t){this.index=t,this.current=this.context[t],this.backtrack=this.context.slice(0,t),this.lookahead=this.context.slice(t+1)};Ed.prototype.get=function(t){switch(!0){case t===0:return this.current;case(t<0&&Math.abs(t)<=this.backtrack.length):return this.backtrack.slice(t)[0];case(t>0&&t<=this.lookahead.length):return this.lookahead[t-1];default:return null}};Di.prototype.rangeToText=function(t){if(t instanceof u3)return this.getRangeTokens(t).map(function(e){return e.char}).join("")};Di.prototype.getText=function(){return this.tokens.map(function(t){return t.char}).join("")};Di.prototype.getContext=function(t){var e=this.registeredContexts[t];return e||null};Di.prototype.on=function(t,e){var r=this.events[t];return r?r.subscribe(e):null};Di.prototype.dispatch=function(t,e){var r=this,o=this.events[t];o instanceof u_&&o.subscribers.forEach(function(i){i.apply(r,e||[])})};Di.prototype.registerContextChecker=function(t,e,r){if(this.getContext(t))return{FAIL:"context name '"+t+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof r!="function")return{FAIL:"missing context end check."};var o=new C0e(t,e,r);return this.registeredContexts[t]=o,this.contextCheckers.push(o),o};Di.prototype.getRangeTokens=function(t){var e=t.startIndex+t.endOffset;return[].concat(this.tokens.slice(t.startIndex,e))};Di.prototype.getContextRanges=function(t){var e=this.getContext(t);return e?e.ranges:{FAIL:"context checker '"+t+"' is not registered."}};Di.prototype.resetContextsRanges=function(){var t=this.registeredContexts;for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];r.ranges=[]}};Di.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var t=this.tokens.map(function(o){return o.char}),e=0;e<t.length;e++){var r=new Ed(t,e);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Di.prototype.setEndOffset=function(t,e){var r=this.getContext(e).openRange.startIndex,o=new u3(r,t,e),i=this.getContext(e).ranges;return o.rangeId=e+"."+i.length,i.push(o),this.getContext(e).openRange=null,o};Di.prototype.runContextCheck=function(t){var e=this,r=t.index;this.contextCheckers.forEach(function(o){var i=o.contextName,s=e.getContext(i).openRange;if(!s&&o.checkStart(t)&&(s=new u3(r,null,i),e.getContext(i).openRange=s,e.dispatch("contextStart",[i,r])),!!s&&o.checkEnd(t)){var a=r-s.startIndex+1,l=e.setEndOffset(a,i);e.dispatch("contextEnd",[i,l])}})};Di.prototype.tokenize=function(t){this.tokens=[],this.resetContextsRanges();var e=Array.from(t);this.dispatch("start");for(var r=0;r<e.length;r++){var o=e[r],i=new Ed(e,r);this.dispatch("next",[i]),this.runContextCheck(i);var s=new N0(o);this.tokens.push(s),this.dispatch("newToken",[s,i])}return this.dispatch("end",[this.tokens]),this.tokens};function Jf(t){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(t)}function _q(t){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(t)}function Zf(t){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(t)}function p_(t){return/[A-z]/.test(t)}function x0e(t){return/\s/.test(t)}function Ll(t){this.font=t,this.features={}}function Pv(t){this.id=t.id,this.tag=t.tag,this.substitution=t.substitution}function r1(t,e){if(!t)return-1;switch(e.format){case 1:return e.glyphs.indexOf(t);case 2:for(var r=e.ranges,o=0;o<r.length;o++){var i=r[o];if(t>=i.start&&t<=i.end){var s=t-i.start;return i.index+s}}break;default:return-1}return-1}function w0e(t,e){var r=r1(t,e.coverage);return r===-1?null:t+e.deltaGlyphId}function T0e(t,e){var r=r1(t,e.coverage);return r===-1?null:e.substitute[r]}function p3(t,e){for(var r=[],o=0;o<t.length;o++){var i=t[o],s=e.current;s=Array.isArray(s)?s[0]:s;var a=r1(s,i);a!==-1&&r.push(a)}return r.length!==t.length?-1:r}function D0e(t,e){var r=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(t.context.length<r)return[];var o=p3(e.inputCoverage,t);if(o===-1)return[];var i=e.inputCoverage.length-1;if(t.lookahead.length<e.lookaheadCoverage.length)return[];for(var s=t.lookahead.slice(i);s.length&&Zf(s[0].char);)s.shift();var a=new Ed(s,0),l=p3(e.lookaheadCoverage,a),c=[].concat(t.backtrack);for(c.reverse();c.length&&Zf(c[0].char);)c.shift();if(c.length<e.backtrackCoverage.length)return[];var d=new Ed(c,0),u=p3(e.backtrackCoverage,d),p=o.length===e.inputCoverage.length&&l.length===e.lookaheadCoverage.length&&u.length===e.backtrackCoverage.length,h=[];if(p)for(var f=0;f<e.lookupRecords.length;f++)for(var m=e.lookupRecords[f],g=m.lookupListIndex,v=this.getLookupByIndex(g),y=0;y<v.subtables.length;y++){var S=v.subtables[y],C=this.getLookupMethod(v,S),b=this.getSubstitutionType(v,S);if(b==="12")for(var x=0;x<o.length;x++){var w=t.get(x),k=C(w);k&&h.push(k)}}return h}function k0e(t,e){var r=t.current,o=r1(r,e.coverage);if(o===-1)return null;for(var i,s=e.ligatureSets[o],a=0;a<s.length;a++){i=s[a];for(var l=0;l<i.components.length;l++){var c=t.lookahead[l],d=i.components[l];if(c!==d)break;if(l===i.components.length-1)return i}}return null}function P0e(t,e){var r=r1(t,e.coverage);return r===-1?null:e.sequences[r]}Ll.prototype.getDefaultScriptFeaturesIndexes=function(){for(var t=this.font.tables.gsub.scripts,e=0;e<t.length;e++){var r=t[e];if(r.tag==="DFLT")return r.script.defaultLangSys.featureIndexes}return[]};Ll.prototype.getScriptFeaturesIndexes=function(t){var e=this.font.tables;if(!e.gsub)return[];if(!t)return this.getDefaultScriptFeaturesIndexes();for(var r=this.font.tables.gsub.scripts,o=0;o<r.length;o++){var i=r[o];if(i.tag===t&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var s=i.langSysRecords;if(s)for(var a=0;a<s.length;a++){var l=s[a];if(l.tag===t){var c=l.langSys;return c.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};Ll.prototype.mapTagsToFeatures=function(t,e){for(var r={},o=0;o<t.length;o++){var i=t[o].tag,s=t[o].feature;r[i]=s}this.features[e].tags=r};Ll.prototype.getScriptFeatures=function(t){var e=this.features[t];if(this.features.hasOwnProperty(t))return e;var r=this.getScriptFeaturesIndexes(t);if(!r)return null;var o=this.font.tables.gsub;return e=r.map(function(i){return o.features[i]}),this.features[t]=e,this.mapTagsToFeatures(e,t),e};Ll.prototype.getSubstitutionType=function(t,e){var r=t.lookupType.toString(),o=e.substFormat.toString();return r+o};Ll.prototype.getLookupMethod=function(t,e){var r=this,o=this.getSubstitutionType(t,e);switch(o){case"11":return function(i){return w0e.apply(r,[i,e])};case"12":return function(i){return T0e.apply(r,[i,e])};case"63":return function(i){return D0e.apply(r,[i,e])};case"41":return function(i){return k0e.apply(r,[i,e])};case"21":return function(i){return P0e.apply(r,[i,e])};default:throw new Error("lookupType: "+t.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};Ll.prototype.lookupFeature=function(t){var e=t.contextParams,r=e.index,o=this.getFeature({tag:t.tag,script:t.script});if(!o)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+t.tag+"' for script '"+t.script+"'.");for(var i=this.getFeatureLookups(o),s=[].concat(e.context),a=0;a<i.length;a++)for(var l=i[a],c=this.getLookupSubtables(l),d=0;d<c.length;d++){var u=c[d],p=this.getSubstitutionType(l,u),h=this.getLookupMethod(l,u),f=void 0;switch(p){case"11":f=h(e.current),f&&s.splice(r,1,new Pv({id:11,tag:t.tag,substitution:f}));break;case"12":f=h(e.current),f&&s.splice(r,1,new Pv({id:12,tag:t.tag,substitution:f}));break;case"63":f=h(e),Array.isArray(f)&&f.length&&s.splice(r,1,new Pv({id:63,tag:t.tag,substitution:f}));break;case"41":f=h(e),f&&s.splice(r,1,new Pv({id:41,tag:t.tag,substitution:f}));break;case"21":f=h(e.current),f&&s.splice(r,1,new Pv({id:21,tag:t.tag,substitution:f}));break}e=new Ed(s,r),!(Array.isArray(f)&&!f.length)&&(f=null)}return s.length?s:null};Ll.prototype.supports=function(t){if(!t.script)return!1;this.getScriptFeatures(t.script);var e=this.features.hasOwnProperty(t.script);if(!t.tag)return e;var r=this.features[t.script].some(function(o){return o.tag===t.tag});return e&&r};Ll.prototype.getLookupSubtables=function(t){return t.subtables||null};Ll.prototype.getLookupByIndex=function(t){var e=this.font.tables.gsub.lookups;return e[t]||null};Ll.prototype.getFeatureLookups=function(t){return t.lookupListIndexes.map(this.getLookupByIndex.bind(this))};Ll.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var r=this.features[e.script];return r?r.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function E0e(t){var e=t.current,r=t.get(-1);return r===null&&Jf(e)||!Jf(r)&&Jf(e)}function _0e(t){var e=t.get(1);return e===null||!Jf(e)}var A0e={startCheck:E0e,endCheck:_0e};function I0e(t){var e=t.current,r=t.get(-1);return(Jf(e)||Zf(e))&&!Jf(r)}function R0e(t){var e=t.get(1);switch(!0){case e===null:return!0;case(!Jf(e)&&!Zf(e)):var r=x0e(e);if(!r)return!0;if(r){var o=!1;if(o=t.lookahead.some(function(i){return Jf(i)||Zf(i)}),!o)return!0}break;default:return!1}}var F0e={startCheck:I0e,endCheck:R0e};function M0e(t,e,r){e[r].setState(t.tag,t.substitution)}function N0e(t,e,r){e[r].setState(t.tag,t.substitution)}function B0e(t,e,r){t.substitution.forEach(function(o,i){var s=e[r+i];s.setState(t.tag,o)})}function L0e(t,e,r){var o=e[r];o.setState(t.tag,t.substitution.ligGlyph);for(var i=t.substitution.components.length,s=0;s<i;s++)o=e[r+s+1],o.setState("deleted",!0)}var Aq={11:M0e,12:N0e,63:B0e,41:L0e};function h3(t,e,r){t instanceof Pv&&Aq[t.id]&&Aq[t.id](t,e,r)}function O0e(t){for(var e=[].concat(t.backtrack),r=e.length-1;r>=0;r--){var o=e[r],i=_q(o),s=Zf(o);if(!i&&!s)return!0;if(i)return!1}return!1}function z0e(t){if(_q(t.current))return!1;for(var e=0;e<t.lookahead.length;e++){var r=t.lookahead[e],o=Zf(r);if(!o)return!0}return!1}function U0e(t){var e=this,r="arab",o=this.featuresTags[r],i=this.tokenizer.getRangeTokens(t);if(i.length!==1){var s=new Ed(i.map(function(l){return l.getState("glyphIndex")}),0),a=new Ed(i.map(function(l){return l.char}),0);i.forEach(function(l,c){if(!Zf(l.char)){s.setCurrentIndex(c),a.setCurrentIndex(c);var d=0;O0e(a)&&(d|=1),z0e(a)&&(d|=2);var u;switch(d){case 1:u="fina";break;case 2:u="init";break;case 3:u="medi";break}if(o.indexOf(u)!==-1){var p=e.query.lookupFeature({tag:u,script:r,contextParams:s});if(p instanceof Error)return console.info(p.message);p.forEach(function(h,f){h instanceof Pv&&(h3(h,i,f),s.context[f]=h.substitution)})}}})}}function Iq(t,e){var r=t.map(function(o){return o.activeState.value});return new Ed(r,e||0)}function H0e(t){var e=this,r="arab",o=this.tokenizer.getRangeTokens(t),i=Iq(o);i.context.forEach(function(s,a){i.setCurrentIndex(a);var l=e.query.lookupFeature({tag:"rlig",script:r,contextParams:i});l.length&&(l.forEach(function(c){return h3(c,o,a)}),i=Iq(o))})}function G0e(t){var e=t.current,r=t.get(-1);return r===null&&p_(e)||!p_(r)&&p_(e)}function V0e(t){var e=t.get(1);return e===null||!p_(e)}var $0e={startCheck:G0e,endCheck:V0e};function Rq(t,e){var r=t.map(function(o){return o.activeState.value});return new Ed(r,e||0)}function W0e(t){var e=this,r="latn",o=this.tokenizer.getRangeTokens(t),i=Rq(o);i.context.forEach(function(s,a){i.setCurrentIndex(a);var l=e.query.lookupFeature({tag:"liga",script:r,contextParams:i});l.length&&(l.forEach(function(c){return h3(c,o,a)}),i=Rq(o))})}function _d(t){this.baseDir=t||"ltr",this.tokenizer=new Di,this.featuresTags={}}_d.prototype.setText=function(t){this.text=t};_d.prototype.contextChecks={latinWordCheck:$0e,arabicWordCheck:A0e,arabicSentenceCheck:F0e};function f3(t){var e=this.contextChecks[t+"Check"];return this.tokenizer.registerContextChecker(t,e.startCheck,e.endCheck)}function j0e(){return f3.call(this,"latinWord"),f3.call(this,"arabicWord"),f3.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function K0e(){var t=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(r){var o=t.tokenizer.getRangeTokens(r);t.tokenizer.replaceRange(r.startIndex,r.endOffset,o.reverse())})}_d.prototype.registerFeatures=function(t,e){var r=this,o=e.filter(function(i){return r.query.supports({script:t,tag:i})});this.featuresTags.hasOwnProperty(t)?this.featuresTags[t]=this.featuresTags[t].concat(o):this.featuresTags[t]=o};_d.prototype.applyFeatures=function(t,e){if(!t)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Ll(t));for(var r=0;r<e.length;r++){var o=e[r];!this.query.supports({script:o.script})||this.registerFeatures(o.script,o.tags)}};_d.prototype.registerModifier=function(t,e,r){this.tokenizer.registerModifier(t,e,r)};function m3(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function q0e(){var t=this,e="arab";if(!!this.featuresTags.hasOwnProperty(e)){m3.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(o){U0e.call(t,o)})}}function Y0e(){var t=this,e="arab";if(!!this.featuresTags.hasOwnProperty(e)){var r=this.featuresTags[e];if(r.indexOf("rlig")!==-1){m3.call(this);var o=this.tokenizer.getContextRanges("arabicWord");o.forEach(function(i){H0e.call(t,i)})}}}function X0e(){var t=this,e="latn";if(!!this.featuresTags.hasOwnProperty(e)){var r=this.featuresTags[e];if(r.indexOf("liga")!==-1){m3.call(this);var o=this.tokenizer.getContextRanges("latinWord");o.forEach(function(i){W0e.call(t,i)})}}}_d.prototype.checkContextReady=function(t){return!!this.tokenizer.getContext(t)};_d.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(q0e.call(this),Y0e.call(this)),this.checkContextReady("latinWord")&&X0e.call(this),this.checkContextReady("arabicSentence")&&K0e.call(this)};_d.prototype.processText=function(t){(!this.text||this.text!==t)&&(this.setText(t),j0e.call(this),this.applyFeaturesToContexts())};_d.prototype.getBidiText=function(t){return this.processText(t),this.tokenizer.getText()};_d.prototype.getTextGlyphs=function(t){this.processText(t);for(var e=[],r=0;r<this.tokenizer.tokens.length;r++){var o=this.tokenizer.tokens[r];if(!o.state.deleted){var i=o.activeState.value;e.push(Array.isArray(i)?i[0]:i)}}return e};function Io(t){t=t||{},t.tables=t.tables||{},t.empty||(Jw(t.familyName,"When creating a new Font object, familyName is required."),Jw(t.styleName,"When creating a new Font object, styleName is required."),Jw(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Jw(t.ascender,"When creating a new Font object, ascender is required."),Jw(t.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables=Object.assign(t.tables,{os2:Object.assign({usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR},t.tables.os2)})),this.supported=!0,this.glyphs=new Au.GlyphSet(this,t.glyphs||[]),this.encoding=new CK(this),this.position=new Qw(this),this.substitution=new Pd(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new dq(this)}})}Io.prototype.hasChar=function(t){return this.encoding.charToGlyphIndex(t)!==null};Io.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)};Io.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),r=this.glyphs.get(e);return r||(r=this.glyphs.get(0)),r};Io.prototype.updateFeatures=function(t){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(r){return t[r]})}:e})};Io.prototype.stringToGlyphs=function(t,e){var r=this,o=new _d,i=function(p){return r.charToGlyphIndex(p.char)};o.registerModifier("glyphIndex",null,i);var s=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;o.applyFeatures(this,s);for(var a=o.getTextGlyphs(t),l=a.length,c=new Array(l),d=this.glyphs.get(0),u=0;u<l;u+=1)c[u]=this.glyphs.get(a[u])||d;return c};Io.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)};Io.prototype.nameToGlyph=function(t){var e=this.nameToGlyphIndex(t),r=this.glyphs.get(e);return r||(r=this.glyphs.get(0)),r};Io.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""};Io.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,t,e):this.kerningPairs[t+","+e]||0};Io.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Io.prototype.forEachGlyph=function(t,e,r,o,i,s){e=e!==void 0?e:0,r=r!==void 0?r:0,o=o!==void 0?o:72,i=Object.assign({},this.defaultRenderOptions,i);var a=1/this.unitsPerEm*o,l=this.stringToGlyphs(t,i),c;if(i.kerning){var d=i.script||this.position.getDefaultScriptName();c=this.position.getKerningTables(d,i.language)}for(var u=0;u<l.length;u+=1){var p=l[u];if(s.call(this,p,e,r,o,i),p.advanceWidth&&(e+=p.advanceWidth*a),i.kerning&&u<l.length-1){var h=c?this.position.getKerningValue(c,p.index,l[u+1].index):this.getKerningValue(p,l[u+1]);e+=h*a}i.letterSpacing?e+=i.letterSpacing*o:i.tracking&&(e+=i.tracking/1e3*o)}return e};Io.prototype.getPath=function(t,e,r,o,i){var s=new gs;return this.forEachGlyph(t,e,r,o,i,function(a,l,c,d){var u=a.getPath(l,c,d,i,this);s.extend(u)}),s};Io.prototype.getPaths=function(t,e,r,o,i){var s=[];return this.forEachGlyph(t,e,r,o,i,function(a,l,c,d){var u=a.getPath(l,c,d,i,this);s.push(u)}),s};Io.prototype.getAdvanceWidth=function(t,e,r){return this.forEachGlyph(t,0,0,e,r,function(){})};Io.prototype.draw=function(t,e,r,o,i,s){this.getPath(e,r,o,i,s).draw(t)};Io.prototype.drawPoints=function(t,e,r,o,i,s){this.forEachGlyph(e,r,o,i,s,function(a,l,c,d){a.drawPoints(t,l,c,d)})};Io.prototype.drawMetrics=function(t,e,r,o,i,s){this.forEachGlyph(e,r,o,i,s,function(a,l,c,d){a.drawMetrics(t,l,c,d)})};Io.prototype.getEnglishName=function(t){var e=this.names[t];if(e)return e.en};Io.prototype.validate=function(){var t=this;function e(o,i){}function r(o){var i=t.getEnglishName(o);e(i&&i.trim().length>0)}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),e(this.unitsPerEm>0)};Io.prototype.toTables=function(){return Lbe.fontToTable(this)};Io.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Io.prototype.toArrayBuffer=function(){for(var t=this.toTables(),e=t.encode(),r=new ArrayBuffer(e.length),o=new Uint8Array(r),i=0;i<e.length;i++)o[i]=e[i];return r};Io.prototype.download=function(t){var e=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");t=t||e.replace(/\s/g,"")+"-"+r+".otf";var o=this.toArrayBuffer();if(zbe())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(o),s=new Blob([i],{type:"font/opentype"}),a=document.createElement("a");a.href=window.URL.createObjectURL(s),a.download=t;var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!1),a.dispatchEvent(l)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var c=Za("fs"),d=Ube(o);c.writeFileSync(t,d)}};Io.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Io.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Io.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function Fq(t,e){var r=JSON.stringify(t),o=256;for(var i in e){var s=parseInt(i);if(!(!s||s<256)){if(JSON.stringify(e[i])===r)return s;o<=s&&(o=s+1)}}return e[o]=t,o}function Q0e(t,e,r){var o=Fq(e.name,r);return[{name:"tag_"+t,type:"TAG",value:e.tag},{name:"minValue_"+t,type:"FIXED",value:e.minValue<<16},{name:"defaultValue_"+t,type:"FIXED",value:e.defaultValue<<16},{name:"maxValue_"+t,type:"FIXED",value:e.maxValue<<16},{name:"flags_"+t,type:"USHORT",value:0},{name:"nameID_"+t,type:"USHORT",value:o}]}function J0e(t,e,r){var o={},i=new ir.Parser(t,e);return o.tag=i.parseTag(),o.minValue=i.parseFixed(),o.defaultValue=i.parseFixed(),o.maxValue=i.parseFixed(),i.skip("uShort",1),o.name=r[i.parseUShort()]||{},o}function Z0e(t,e,r,o){for(var i=Fq(e.name,o),s=[{name:"nameID_"+t,type:"USHORT",value:i},{name:"flags_"+t,type:"USHORT",value:0}],a=0;a<r.length;++a){var l=r[a].tag;s.push({name:"axis_"+t+" "+l,type:"FIXED",value:e.coordinates[l]<<16})}return s}function eCe(t,e,r,o){var i={},s=new ir.Parser(t,e);i.name=o[s.parseUShort()]||{},s.skip("uShort",1),i.coordinates={};for(var a=0;a<r.length;++a)i.coordinates[r[a].tag]=s.parseFixed();return i}function tCe(t,e){var r=new Er.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+t.axes.length*4}]);r.offsetToData=r.sizeOf();for(var o=0;o<t.axes.length;o++)r.fields=r.fields.concat(Q0e(o,t.axes[o],e));for(var i=0;i<t.instances.length;i++)r.fields=r.fields.concat(Z0e(i,t.instances[i],t.axes,e));return r}function rCe(t,e,r){var o=new ir.Parser(t,e),i=o.parseULong();sn.argument(i===65536,"Unsupported fvar table version.");var s=o.parseOffset16();o.skip("uShort",1);for(var a=o.parseUShort(),l=o.parseUShort(),c=o.parseUShort(),d=o.parseUShort(),u=[],p=0;p<a;p++)u.push(J0e(t,e+s+p*l,r));for(var h=[],f=e+s+a*l,m=0;m<c;m++)h.push(eCe(t,f+m*d,u,r));return{axes:u,instances:h}}var nCe={make:tCe,parse:rCe},Ad=new Array(10);Ad[1]=function(){var e=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{posFormat:1,coverage:this.parsePointer(Xe.coverage),value:this.parseValueRecord()};if(r===2)return{posFormat:2,coverage:this.parsePointer(Xe.coverage),values:this.parseValueRecordList()};sn.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};Ad[2]=function(){var e=this.offset+this.relativeOffset,r=this.parseUShort();sn.assert(r===1||r===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var o=this.parsePointer(Xe.coverage),i=this.parseUShort(),s=this.parseUShort();if(r===1)return{posFormat:r,coverage:o,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(Xe.pointer(Xe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))};if(r===2){var a=this.parsePointer(Xe.classDef),l=this.parsePointer(Xe.classDef),c=this.parseUShort(),d=this.parseUShort();return{posFormat:r,coverage:o,valueFormat1:i,valueFormat2:s,classDef1:a,classDef2:l,class1Count:c,class2Count:d,classRecords:this.parseList(c,Xe.list(d,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))}}};Ad[3]=function(){return{error:"GPOS Lookup 3 not supported"}};Ad[4]=function(){return{error:"GPOS Lookup 4 not supported"}};Ad[5]=function(){return{error:"GPOS Lookup 5 not supported"}};Ad[6]=function(){return{error:"GPOS Lookup 6 not supported"}};Ad[7]=function(){return{error:"GPOS Lookup 7 not supported"}};Ad[8]=function(){return{error:"GPOS Lookup 8 not supported"}};Ad[9]=function(){return{error:"GPOS Lookup 9 not supported"}};function oCe(t,e){e=e||0;var r=new Xe(t,e),o=r.parseVersion(1);return sn.argument(o===1||o===1.1,"Unsupported GPOS table version "+o),o===1?{version:o,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Ad)}:{version:o,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Ad),variations:r.parseFeatureVariationsList()}}var iCe=new Array(10);function sCe(t){return new Er.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Er.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new Er.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new Er.LookupList(t.lookups,iCe)}])}var aCe={parse:oCe,make:sCe};function lCe(t){var e={};t.skip("uShort");var r=t.parseUShort();sn.argument(r===0,"Unsupported kern sub-table version."),t.skip("uShort",2);var o=t.parseUShort();t.skip("uShort",3);for(var i=0;i<o;i+=1){var s=t.parseUShort(),a=t.parseUShort(),l=t.parseShort();e[s+","+a]=l}return e}function cCe(t){var e={};t.skip("uShort");var r=t.parseULong();r>1&&console.warn("Only the first kern subtable is supported."),t.skip("uLong");var o=t.parseUShort(),i=o&255;if(t.skip("uShort"),i===0){var s=t.parseUShort();t.skip("uShort",3);for(var a=0;a<s;a+=1){var l=t.parseUShort(),c=t.parseUShort(),d=t.parseShort();e[l+","+c]=d}}return e}function dCe(t,e){var r=new ir.Parser(t,e),o=r.parseUShort();if(o===0)return lCe(r);if(o===1)return cCe(r);throw new Error("Unsupported kern table version ("+o+").")}var uCe={parse:dCe};function pCe(t,e,r,o){for(var i=new ir.Parser(t,e),s=o?i.parseUShort:i.parseULong,a=[],l=0;l<r+1;l+=1){var c=s.call(i);o&&(c*=2),a.push(c)}return a}var hCe={parse:pCe};function Mq(t,e){for(var r=[],o=12,i=0;i<e;i+=1){var s=ir.getTag(t,o),a=ir.getULong(t,o+4),l=ir.getULong(t,o+8),c=ir.getULong(t,o+12);r.push({tag:s,checksum:a,offset:l,length:c,compression:!1}),o+=16}return r}function fCe(t,e){for(var r=[],o=44,i=0;i<e;i+=1){var s=ir.getTag(t,o),a=ir.getULong(t,o+4),l=ir.getULong(t,o+8),c=ir.getULong(t,o+12),d=void 0;l<c?d="WOFF":d=!1,r.push({tag:s,offset:a,compression:d,compressedLength:l,length:c}),o+=20}return r}function rs(t,e){if(e.compression==="WOFF"){var r=new Uint8Array(t.buffer,e.offset+2,e.compressedLength-2),o=new Uint8Array(e.length);if(fve(r,o),o.byteLength!==e.length)throw new Error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length");var i=new DataView(o.buffer,0);return{data:i,offset:0}}else return{data:t,offset:e.offset}}function Nq(t,e){e=e==null?{}:e;var r,o,i=new Io({empty:!0}),s=new DataView(t,0),a,l=[],c=ir.getTag(s,0);if(c===String.fromCharCode(0,1,0,0)||c==="true"||c==="typ1")i.outlinesFormat="truetype",a=ir.getUShort(s,4),l=Mq(s,a);else if(c==="OTTO")i.outlinesFormat="cff",a=ir.getUShort(s,4),l=Mq(s,a);else if(c==="wOFF"){var d=ir.getTag(s,4);if(d===String.fromCharCode(0,1,0,0))i.outlinesFormat="truetype";else if(d==="OTTO")i.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+c);a=ir.getUShort(s,12),l=fCe(s,a)}else throw new Error("Unsupported OpenType signature "+c);for(var u,p,h,f,m,g,v,y,S,C,b,x=0;x<a;x+=1){var w=l[x],k=void 0;switch(w.tag){case"cmap":k=rs(s,w),i.tables.cmap=yK.parse(k.data,k.offset),i.encoding=new SK(i.tables.cmap);break;case"cvt ":k=rs(s,w),b=new ir.Parser(k.data,k.offset),i.tables.cvt=b.parseShortList(w.length/2);break;case"fvar":p=w;break;case"fpgm":k=rs(s,w),b=new ir.Parser(k.data,k.offset),i.tables.fpgm=b.parseByteList(w.length);break;case"head":k=rs(s,w),i.tables.head=NK.parse(k.data,k.offset),i.unitsPerEm=i.tables.head.unitsPerEm,r=i.tables.head.indexToLocFormat;break;case"hhea":k=rs(s,w),i.tables.hhea=BK.parse(k.data,k.offset),i.ascender=i.tables.hhea.ascender,i.descender=i.tables.hhea.descender,i.numberOfHMetrics=i.tables.hhea.numberOfHMetrics;break;case"hmtx":g=w;break;case"ltag":k=rs(s,w),o=OK.parse(k.data,k.offset);break;case"maxp":k=rs(s,w),i.tables.maxp=zK.parse(k.data,k.offset),i.numGlyphs=i.tables.maxp.numGlyphs;break;case"name":S=w;break;case"OS/2":k=rs(s,w),i.tables.os2=n3.parse(k.data,k.offset);break;case"post":k=rs(s,w),i.tables.post=KK.parse(k.data,k.offset),i.glyphNames=new QL(i.tables.post);break;case"prep":k=rs(s,w),b=new ir.Parser(k.data,k.offset),i.tables.prep=b.parseByteList(w.length);break;case"glyf":h=w;break;case"loca":y=w;break;case"CFF ":u=w;break;case"kern":v=w;break;case"GPOS":f=w;break;case"GSUB":m=w;break;case"meta":C=w;break}}var T=rs(s,S);if(i.tables.name=jK.parse(T.data,T.offset,o),i.names=i.tables.name,h&&y){var A=r===0,E=rs(s,y),F=hCe.parse(E.data,E.offset,i.numGlyphs,A),z=rs(s,h);i.glyphs=aq.parse(z.data,z.offset,F,i,e)}else if(u){var L=rs(s,u);MK.parse(L.data,L.offset,i,e)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");var R=rs(s,g);if(LK.parse(i,R.data,R.offset,i.numberOfHMetrics,i.numGlyphs,i.glyphs,e),Nve(i,e),v){var N=rs(s,v);i.kerningPairs=uCe.parse(N.data,N.offset)}else i.kerningPairs={};if(f){var V=rs(s,f);i.tables.gpos=aCe.parse(V.data,V.offset),i.position.init()}if(m){var W=rs(s,m);i.tables.gsub=qK.parse(W.data,W.offset)}if(p){var me=rs(s,p);i.tables.fvar=nCe.parse(me.data,me.offset,i.names)}if(C){var ie=rs(s,C);i.tables.meta=YK.parse(ie.data,ie.offset),i.metas=i.tables.meta}return i}function Bq(t){let e={},r=Nq(t),o=(s,a)=>{let l=s+a;return s+a>65535&&(l-=65535),l},i=r.tables.gsub;if(i){let s=new Set;for(let a of i.features)if(a.tag==="vert")for(let l of a.feature.lookupListIndexes)s.add(l);for(let a of s){let l=i.lookups[a];for(let c of l.subtables){let{deltaGlyphId:d,substFormat:u}=c,{coverage:p,substitute:h}=c;if(u===1){if(p.glyphs)for(let f of p.glyphs)e[f]=o(d,f);if(p.ranges)for(let f of p.ranges){let{start:m,end:g}=f;for(let v=m;v<g;v++)e[v]=o(d,v)}}else if(u===2)for(let f of p.ranges){let{start:m,end:g,index:v}=f;for(let y=0;y<=g-m;y++)e[m+y]=h[v+y]}}}}return{font:r,vertGsubMap:e,family:r.names.postScriptName.en}}var g3=class{constructor(){this.list=[]}wait(){let e=gc();return this.list.push(e),e}resolve(e){let r=this.list;this.list=[],r.forEach(o=>o.resolve(e))}reject(e){let r=this.list;this.list=[],r.forEach(o=>o.reject(e))}};var Ev=class{constructor(e,r){this.fetcher=e;this.retryThrottle=r;this.waiters=new g3;this.fetching=!1}get throttling(){var e;return!this.fetchedAt||!this.retryThrottle?!1:((e=this.data)==null?void 0:e.type)==="error"&&Date.now()<this.fetchedAt+this.retryThrottle.delay*this.retryThrottle.unit}async fetch(e,r){var o;return((o=this.data)==null?void 0:o.type)==="success"?this.data:this.throttling?{type:"cancelled",reason:"throttled"}:this.fetching?this.waiters.wait():(this.fetching=!0,this._fetch(e,r).then(i=>{this.data=i,this.fetchedAt=Date.now(),this.waiters.resolve(i)}).finally(()=>{this.fetching=!1}),this.waiters.wait())}async _fetch(e,r){try{let o=await this.fetcher(e,r);return{type:"success",value:o}}catch(o){return(r==null?void 0:r.aborted)?{type:"cancelled",reason:"aborted"}:{type:"error",error:o}}}get(){var e;if(((e=this.data)==null?void 0:e.type)==="success")return{value:this.data.value}}};var v3=class{constructor(e,r,o,i){this.fetcher=e;this.onError=r;this.maxRetryCount=o;this.retryDelay=i;this.isFailed=!1;this.statefulFetcher=new Ev(e,i)}getOrFetch(e,r){let o=this.statefulFetcher.get();if(o)return o.value;this.isFailed||this.fetchWithRetry(0,e,r)}async fetch(e,r){return await this.fetchWithRetry(0,e,r)}async fetchWithRetry(e,r,o){let i=await this.statefulFetcher.fetch(r,o);if(i.type==="success")return i.value;if(i.type==="cancelled")return;if(e<this.maxRetryCount)return await jf(this.retryDelay),await this.fetchWithRetry(e+1,r,o);this.isFailed=!0,this.onError(i.error)}};var Lq=De.get().strings,Vt=class{static async init(){await Promise.all([this.pinIcon.fetch(),this.regularFont.fetch(),this.boldFont.fetch(),this.webCardThumbnailPlaceholder.fetch(),this.mapCardPlaceholder.fetch(),this.webCardPlaceholder.fetch(),this.quizCardSurveyPlaceholder.fetch(),this.quizCardTestPlaceholder.fetch(),this.atndCardPlaceholder.fetch(),this.fullScreenIcon.fetch(),this.brokenCardIcon.fetch(),this.penPointer.fetch(),this.fingerPointerIcon.fetch(),this.textPointerIcon.fetch()])}};Vt.pinIcon=Oq(()=>ue.res.src("/svg/pin_icon.svg")),Vt.regularFont=Uq(Lq.regularWtFontName),Vt.boldFont=Uq(Lq.boldWtFontName),Vt.webCardThumbnailPlaceholder=Ru(()=>ue.res.src("/svg/web_card_thumbnail_placeholder.svg")),Vt.qrCodeWorkerScript=Fl(zq("/js/client/camera/qr-code-worker.js")),Vt.zlibWorkerScript=Fl(zq("/js/client/worker/zlib-worker.js")),Vt.mapCardPlaceholder=Ru(()=>ue.res.src("/svg/map_card_placeholder.svg")),Vt.webCardPlaceholder=Ru(()=>ue.res.src("/svg/web_card_placeholder.svg")),Vt.quizCardTestPlaceholder=Ru(()=>ue.res.src("/svg/quiz_card_bg_test_80x60.svg")),Vt.quizCardSurveyPlaceholder=Ru(()=>ue.res.src("/svg/quiz_card_bg_survey_80x60.svg")),Vt.atndCardPlaceholder=Ru(()=>ue.res.src("/svg/attendance_card_bg_80x60.svg")),Vt.fullScreenIcon=Oq(()=>ue.res.src("/svg/fullscreen.svg")),Vt.brokenCardIcon=Ru(()=>ue.res.src("/svg/exclamationmark_circle.svg")),Vt.penPointer=Ru(()=>ue.res.src("/svg/pen_circle.svg")),Vt.fingerPointerIcon=Ru(()=>ue.res.src("/svg/hand_circle.svg")),Vt.textPointerIcon=Ru(()=>ue.res.src("/svg/text_circle.svg"));function Ru(t){return Fl((e,r)=>Na({url:t(),signal:r.signal}))}function Oq(t){return Fl(async()=>{let e=await jw({url:t()}),r=new Image;return r.src=URL.createObjectURL(e),await r.decode(),r})}function zq(t){return async(e,r)=>{let o=ue.res.src(t),i=await KE({url:o,maxRetryCount:5,signal:r.signal});if(!i)throw new Error("script fetch retry failed");return URL.createObjectURL(i)}}function Uq(t){let e=async(r,o)=>{let i=ue.res.src(`/font/${t}.otf`);(Td()||P0())&&(i+="?q=1");let a=[(await fetch(i,{mode:"cors",signal:o})).arrayBuffer().then(Bq)];typeof window!="undefined"&&a.push(document.fonts.load(`40px '${t}'`));let[l]=await Promise.all(a);return l};return new v3(e,r=>{throw ge.error(r),new kl},3,{delay:1,unit:pr.sec})}function Hq(t){return t instanceof nh&&t.content.asset==null||t instanceof ri&&t.content.asset==null||t.type==="quiz"||t.type==="attendance"}function b3(t){if(t instanceof nh&&!t.content.asset)return Vt.mapCardPlaceholder.getOrLoad();if(t instanceof ri&&!t.content.asset)return Vt.webCardPlaceholder.getOrLoad();if(t instanceof zr)switch(t.content.preset){case"test":return Vt.quizCardTestPlaceholder.getOrLoad();case"survey":return Vt.quizCardSurveyPlaceholder.getOrLoad()}else if(t instanceof an)return Vt.atndCardPlaceholder.getOrLoad()}var mCe=["picture","video","map","web","pdf"];function h_(t){return mCe.includes(t.type)&&t.contentAssetId()!=null||!!b3(t)}function f_(t){return t.startsWith("bb")}function m_(t){return t==="bbCenterTop"||t==="bbLeftMiddle"||t==="bbRightMiddle"||t==="bbCenterBottom"}function Gq(t){return t==="quizButtonHelp"||t==="quizButtonAnswerTogether"||t==="quizButtonEdit"||t==="quizButtonResult"||t==="quizButtonAnswer"}function Vq(t){return t==="attendanceButtonOpen"||t==="attendanceButtonAnswer"||t==="attendanceButtonHelp"}function em(t){return window.devicePixelRatio*(window.innerWidth<=480?17:20)/t}function g_(t,e,r){let o=Xt(t,e),i=Math.min(o.width,o.height),s=window.devicePixelRatio,a=(r?20:40)*s,l=s/e;return i<a&&(l=l*i/a),l}function n1(t,e){let r=em(e.a),{width:o,height:i}=t.bounds,[s,a]=[-o/2-r,-i/2-r],[l,c]=[s+o+r*2,a+i+r*2],d=new Map([["bbLeftTop",{x:s,y:a,type:"bbLeftTop"}],["bbCenterTop",{x:0,y:a,type:"bbCenterTop"}],["bbRightTop",{x:l,y:a,type:"bbRightTop"}],["bbLeftMiddle",{x:s,y:0,type:"bbLeftMiddle"}],["bbRightMiddle",{x:l,y:0,type:"bbRightMiddle"}],["bbLeftBottom",{x:s,y:c,type:"bbLeftBottom"}],["bbCenterBottom",{x:0,y:c,type:"bbCenterBottom"}],["bbRightBottom",{x:l,y:c,type:"bbRightBottom"}]]);if(t.foldHandleVisible()&&d.delete("bbLeftMiddle"),(!t.hasNextCardOrGroup||t.isFolded&&!t.tail().hasNextCardOrGroup)&&d.delete("bbRightTop"),t.type==="quiz"||t.type==="attendance")for(let u of d.values())m_(u.type)&&d.delete(u.type);return d}var ni=class extends Map{constructor(e,r){super(r);this.provider=e}get(e){let r=super.get(e);return r||(r=this.provider(e),super.set(e,r)),r}};var wo=class{static getLowerLevel(e){switch(e){case"high":return"medium";case"medium":return"small";case"small":return}}static getSizeForLevel(e){return e==="medium"?{...Cp}:{...Bx}}static getMaxLevelForCard(e){return e.type==="picture"||e.type==="web"||e.type==="map"?"high":"medium"}static getThumbnailSize(e,r){if(e==="high")return r;let o=wo.getSizeForLevel(e);return xr(r,o)}static getLevel(e,r){let o=e.width*e.height*r*r;return ff<o?"high":ou<o?"medium":"small"}static mipmapLevelHigherThan(e,r){return e==="medium"&&r==="small"?!0:e==="high"&&(r==="medium"||r==="small")}};function Ac(t=!1){let e=t;function r(){e=!0}function o(){let i=e;return e=!1,i}return{mark:r,drain:o}}var o1=class{constructor(){this.thumbs=new Map;this.states=new ni(()=>null);this.deferredLoads=new ni(()=>[]);this.levelDirtyMap=new ni(()=>Ac());this.timestamp=Date.now()}set(e,r){this.setInternal({level:e,image:r})}setInternal({level:e,image:r}){this.thumbs.set(e,r),this.markUpdated()}setThumbs({small:e,medium:r,high:o}){e&&this.set("small",e),r&&this.set("medium",r),o&&this.set("high",o)}delete(e){this.thumbs.delete(e),this.markUpdated()}get(e){return this.thumbs.get(e)}getForZoom(e,r){let o;for(o=wo.getLevel(e,r);o;o=wo.getLowerLevel(o)){let i=this.get(o);if(i)return{src:i,level:o}}}has(e){return this.thumbs.has(e)}setState(e,r){this.states.set(e,r),this.markUpdated()}setStates(e,r){for(let o of e)this.setState(o,r)}getState(e){return this.states.get(e)}getUnderLevel(e){var o;let r=wo.getLowerLevel(e);return r?(o=this.get(e))!=null?o:this.getUnderLevel(r):this.get(e)}clear(){this.thumbs.clear();for(let e of this.levelDirtyMap.keys())this.levelDirtyMap.get(e).mark();this.markUpdated()}markUpdated(){this.timestamp=Date.now()}isLoading(){return this.getState("small")==="fetching"||this.getState("medium")==="fetching"||this.getState("high")==="fetching"}async load(e,r){let o=this.levelDirtyMap.get(e).drain();if(!o&&this.has(e))return;if(this.getState(e)==="fetching"){let s=gc();return this.deferredLoads.get(e).push(s),s}this.setState(e,"fetching");let i=wo.getLowerLevel(e);i&&this.load(i,r);try{let s=await this.loadInternal(e,r,o);s&&this.setInternal({level:e,...s}),this.setState(e,"done")}catch(s){ge.error(`couldn't load mipmap: level=${e}`,s);let a=De.get().strings,l=Pl(s,a.unexpectedErrorOccurred);this.setState(e,l)}for(let s of this.deferredLoads.get(e))s.resolve();this.deferredLoads.set(e,[])}};var v_=Cc();function b_(t){let{x:e,y:r,width:o}=t;return{x:e,y:r,width:o}}function $q(t){return typeof t=="object"&&gCe(t.type)}function y3(t){return t==="brush"||t==="pen"}function gCe(t){return t==="eraser"||t=="highlighter"||t=="pencil"}function Wq(t){let e=JSON.parse(t),r=e.data.contents,o=y_(r);return{canvas:e.data.canvas,contents:o}}function y_(t){var r,o;let e=[];for(let i of t){let s=atob(i.data.$binary),a=new ArrayBuffer(s.length),l=new DataView(a);for(let p=0;p<a.byteLength;p++)l.setUint8(p,s[p].charCodeAt(0));let c=0,d=[],u;for(i.type==="pen"||i.type==="brush"?u=12:u=8;c+u<=l.byteLength;){let p=l.getFloat32(c,!0);c+=4;let h=l.getFloat32(c,!0);if(c+=4,i.type==="pen"||i.type==="brush"){let f=l.getFloat32(c,!0);c+=4,d.push({x:p,y:h,width:f})}else if(i.type==="eraser"||i.type==="highlighter"||i.type==="pencil"){let f=i.data.width;d.push({x:p,y:h,width:f})}}if(i.type==="pen"||i.type==="brush"){let p=(o=(r=d[0])==null?void 0:r.width)!=null?o:0;e.push({id:i.id||v_(),type:i.type,color:i.data.color,width:p,points:d})}else if(i.type==="highlighter"||i.type==="pencil"||i.type==="eraser")e.push({id:i.id||v_(),type:i.type,color:i.data.color,width:i.data.width,points:d});else throw new Error("invalid type: "+i.type)}return e}function jq(t,e){let r=e?12:8,o=new ArrayBuffer(r*t.length),i=new DataView(o),s=0;for(let l of t)i.setFloat32(s,l.x,!0),s+=4,i.setFloat32(s,l.y,!0),s+=4,e&&(i.setFloat32(s,l.width,!0),s+=4);let a=[];for(let l=0;l<i.byteLength;l++)a[l]=String.fromCharCode(i.getUint8(l));return btoa(a.join(""))}function C_(t){let e=[];for(let r of t)if(r.type==="brush"||r.type==="pen"){let o=jq(r.points,!0);e.push({id:r.id||v_(),type:r.type,data:{color:r.color,$binary:o}})}else if(r.type==="pencil"||r.type==="highlighter"||r.type==="eraser"){let o=jq(r.points,!1);e.push({id:r.id||v_(),type:r.type,data:{width:r.width,color:r.color,$binary:o}})}return e}var Kq=new WeakMap;function vCe(t,e){let r=new Path2D;return Fu.makeStrokePathUntilLast({path:r,points:t.points,resolutionScale:e,startIndex:0}),{path:r,resolutionScale:e}}function bCe(t,e){let r=Kq.get(t);if(r===void 0||r&&r.resolutionScale<e){let o=vCe(t,e);return Kq.set(t,o),o.path}else return r.path}function S_(t){let{ctx:e,content:r,resolutionScale:o}=t,{points:i}=r;if(i.length<1)return;let s=bCe(r,o),a=Fn(r.color);e.save(),e.beginPath(),e.fillStyle=a.toCSSRGBA(),e.fill(s),e.restore()}var Fu=class{static addStrokeSegment(e,r,o){let i,s,a,l,c,d,u=r.width*.5,p=o.width*.5;p<u?(i=o.x,s=o.y,a=p,l=r.x,c=r.y,d=u):(i=r.x,s=r.y,a=u,l=o.x,c=o.y,d=p);let h=new Path2D;if(x_(i-l)&&x_(s-c)){h.ellipse(l,c,d,d,0,0,Math.PI*2),e.addPath(h);return}let f=i-l,m=s-c,g=Math.hypot(f,m);if(a+g<=d){h.ellipse(l,c,d,d,0,0,Math.PI*2),e.addPath(h);return}let v=g>0?1/g:0,y=f*v,S=m*v,C,b,x,w,k,T,A,E;if(x_(a-d)){let N=-S,V=y,W=-N,me=-V;C=i+a*W,b=s+a*me,x=i+a*N,w=s+a*V,k=l+d*W,T=c+d*me,A=l+d*N,E=c+d*V}else{let N=g*a/(d-a),V=i+N*y,W=s+N*S,me=Math.asin(a/N),ie=Math.sqrt(N*N-a*a),Z=Math.sqrt((N+g)*(N+g)-d*d),P=Math.sin(me),_=Math.cos(me),I=-y*_- -S*P,U=-y*P+-S*_,M=Math.sin(-me),$=Math.cos(-me),H=-y*$- -S*M,Y=-y*M+-S*$;C=V+ie*I,b=W+ie*U,x=V+ie*H,w=W+ie*Y,k=V+Z*I,T=W+Z*U,A=V+Z*H,E=W+Z*Y}h.moveTo(C,b);let F=Math.atan2(b-s,C-i),z=Yq(qq(C-i,b-s,x-i,w-s),a*a,!1);h.arc(i,s,a,F,F+z,!1),h.lineTo(A,E);let L=Math.atan2(E-c,A-l),R=Yq(qq(A-l,E-c,k-l,T-c),d*d,!0);h.arc(l,c,d,L,L+R,!1),h.lineTo(C,b),h.closePath(),e.addPath(h)}static numStrokeInterpolationPoints(e){let{p0:r,p1:o,p2:i,p3:s,unit:a,maxCount:l}=e,c=ti(i,o),d=c.magnitude();if(d<=a)return 0;let u=ti(o,r),p=u.magnitude(),h=ti(s,i),f=h.magnitude(),m=0;if(p>0&&d>0){let y=EN(u,c)/(p*d);m=Math.acos(y)*180/Math.PI,m=90-Math.abs(m-90),m=45-Math.abs(m-45)}let g=0;if(d>0&&f>0){let y=EN(c,h)/(d*f);g=Math.acos(y)*180/Math.PI,g=90-Math.abs(g-90),g=45-Math.abs(g-45)}let v=Math.max(m,g);return v<=1e-10?0:Math.floor(Math.min(l,d/a*Math.min(1,v/45)))}static addInterpolatedStrokeSegments(e){let{path:r,p0:o,p1:i,p2:s,p3:a,unit:l,maxCount:c}=e,d=this.numStrokeInterpolationPoints({p0:o,p1:i,p2:s,p3:a,unit:l,maxCount:c}),u=1/(d+1),p=i;for(let h=0;h<d;h++){let f=u*(h+1),m=Qq(o,i,s,a,f),g={x:m.x,y:m.y,width:Zq(i.width,s.width,f)};this.addStrokeSegment(r,p,g),p=g}this.addStrokeSegment(r,p,s)}static strokePointsBoundingBox(...e){if(e.length<1)throw new Error("points.length must not be empty");let r=tm(e[0]);for(let o=1;o<e.length;o++)r=Li(r,tm(e[o]));return r}static interpolatedBoundingBox(e,r,o,i){let s=Li(tm(r),tm(o)),a=ti(o,r);if(x_(a.magnitude()))return s;let l=.5,c=Qq(e,r,o,i,l),d={x:c.x,y:c.y,width:Zq(r.width,o.width,l)};s=Li(s,tm(d));let u=new er({x:d.x+a.x,y:d.y+a.y}),p=Jq(e,r,d,u);if(p){let f=tm({x:p.x,y:p.y,width:r.width});s=Li(s,f)}let h=Jq(o,i,d,u);if(h){let f=tm({x:h.x,y:h.y,width:o.width});s=Li(s,f)}return s}static intersectsStroke(e,r,o){if(o===void 0)return!0;let i=this.strokePointsBoundingBox(e,r);return ks(o,i)}static interpolatedIntersectsStroke(e,r,o,i,s){if(s===void 0)return!0;let a=this.interpolatedBoundingBox(e,r,o,i);return ks(s,a)}static makeStrokePathWithoutLast(e){let{path:r,points:o,contentExtent:i,resolutionScale:s,startIndex:a}=e,l=o.length;if(l<2)return{endIndex:a};let c=l-1;if(a>=c)return{endIndex:a};let d=a,u,p;if(d<=1?(u=o[0],p=o[1],this.intersectsStroke(u,p,i)&&this.addStrokeSegment(r,u,p),d=2):(u=o[d-2],p=o[d-1]),l<4)return{endIndex:d};let h=o[d],f=2/s,m=20;for(;d<c;){d+=1;let g=o[d];this.interpolatedIntersectsStroke(u,p,h,g,i)&&this.addInterpolatedStrokeSegments({path:r,p0:u,p1:p,p2:h,p3:g,unit:f,maxCount:m}),u=p,p=h,h=g}return{endIndex:d}}static makeStrokePathUntilLast(e){let{path:r,points:o,contentExtent:i,resolutionScale:s,startIndex:a}=e,l=o.length;if(l<=0)return{endIndex:a};if(a>=l)return{endIndex:a};if(l===1){let c=tm(o[0]);return i===void 0||i&&ks(i,c)?(r.ellipse(o[0].x,o[0].y,o[0].width/2,o[0].width/2,0,0,Math.PI*2),{endIndex:l}):{endIndex:l}}else{this.makeStrokePathWithoutLast({path:r,points:o,contentExtent:i,resolutionScale:s,startIndex:a});let c=o[l-2],d=o[l-1];return this.intersectsStroke(c,d,i)?(this.addStrokeSegment(r,c,d),{endIndex:l}):{endIndex:l}}}};function tm(t){let e=t.width*.5;return nt(t.x-e,t.y-e,e*2,e*2)}function x_(t){return Math.abs(t)<1e-10}function qq(t,e,r,o){return t*r+e*o}function Yq(t,e,r){let o=Math.acos(Math.min(1,Math.max(-1,t/e)));return r?Math.PI*2-o:o}function Xq(t,e,r,o,i){let s=i*i,a=s*i;return((-a+2*s-i)*t+(3*a-5*s+2)*e+(-3*a+4*s+i)*r+(a-s)*o)*.5}function Qq(t,e,r,o,i){let s=Xq(t.x,e.x,r.x,o.x,i),a=Xq(t.y,e.y,r.y,o.y,i);return{x:s,y:a}}function Jq(t,e,r,o){let i=ti(e,t),s=ti(o,r),a=Rg(s,i);if(a===0||yCe(s,i))return;let l=ti(r,t),c=Rg(s,l)/a;return Re(t.x+i.x*c,t.y+i.y*c)}function Zq(t,e,r){return t+(e-t)*r}function yCe(t,e,r=.001){let o=t.magnitude()*e.magnitude();return Rg(t,e)/o<=r}function w_(t,e,r,o={drawEraserAsStroke:!1}){t.save();for(let i of e.contents)i.points.length<1||($q(i)?C3(t,i,o.drawEraserAsStroke):S_({ctx:t,content:i,resolutionScale:r}));t.restore()}function C3(t,e,r){if(e.points.length<1)return;let o=e.points[0];t.save();{t.globalCompositeOperation="source-over";let i;if(e.type==="eraser")r||(t.globalCompositeOperation="destination-out"),i="#000";else{let{r:s,g:a,b:l,a:c}=Fn(e.color);e.type==="highlighter"&&(r&&(t.globalCompositeOperation="xor"),c/=2),i=pn({a:c,r:s,g:a,b:l}).toCSSRGBA()}if(t.beginPath(),e.points.length===1)t.arc(o.x,o.y,o.width/2,0,Math.PI*2),t.fillStyle=i,t.fill();else{t.strokeStyle=i,t.lineCap="round",t.lineJoin="round",t.lineWidth=o.width,t.moveTo(o.x,o.y);for(let s=1;s<e.points.length;s++){let a=e.points[s-1],l=e.points[s];if(ti(a,l).magnitude()<1e-10){t.lineTo(l.x,l.y);continue}let c=CCe(e.points,s)||a,d=SCe(e.points,s)||l;if(c===a&&d===l){t.lineTo(l.x,l.y);continue}t.bezierCurveTo(c.x,c.y,d.x,d.y,l.x,l.y)}t.stroke()}}t.restore()}var eY=.5;function CCe(t,e){if(e-1<0||t.length<=e)return;if(e-2<0)return t[e-1];let r=t[e-2],o=t[e-1],i=t[e],s=ti(i,r),a=ti(o,r);if(Math.abs(Rg(s,a))<1e-10)return o;let l=s.scaled(eY/3);return{x:o.x+l.x,y:o.y+l.y}}function SCe(t,e){if(e-1<0||t.length<=e)return;if(t.length-1<e+1)return t[e];let r=t[e-1],o=t[e],i=t[e+1],s=ti(r,i),a=ti(o,i);if(Math.abs(Rg(s,a))<1e-10)return o;let l=s.scaled(eY/3);return{x:o.x+l.x,y:o.y+l.y}}var rm=class{constructor(e){this.smoothedPoints=[];this.rawPoints=[];this.id=e.id,this.width=e.width,this.type=e.type,this.color=e.color}static fromContent(e){var o,i;let r=new rm({id:e.id,type:e.type,width:(o=e.width)!=null?o:1,color:Fn((i=e.color)!=null?i:"#FFFFFFFF")});return r.rawPoints=[...e.points],r}*points(){var e;for(let r=0;r<this.rawPoints.length;r++)yield(e=this.smoothedPoints[r])!=null?e:this.rawPoints[r]}size(){return this.rawPoints.length}clone(e){var o;let r=new rm({id:e,width:this.width,type:this.type,color:this.color});return r.rawPoints=this.rawPoints.map(b_),r.smoothedPoints=(o=this.smoothedPoints)==null?void 0:o.map(b_),r}get content(){return{id:this.id,type:this.type,color:this.color.toARGBHex(),width:this.width,points:Array.from(this.points())}}draw(e){let{ctx:r,resolutionScale:o,rectUpdated:i}=e,{type:s,color:a}=this;if(y3(s)){let l=Array.from(this.points()),c=new Path2D;Fu.makeStrokePathUntilLast({path:c,points:l,resolutionScale:o,startIndex:0,contentExtent:i}),r.save(),r.beginPath(),r.fillStyle=a.toCSSRGBA(),r.fill(c),r.restore()}else C3(r,this.content,!0)}},S3=class extends rm{constructor(e,r){super(e);this.isRuler=r;this.LengthThreshold=8;this.MinDistance=4;this.StepAngle=15;this.MaxSlopAngle=5;this.MinLength=this.MinDistance/Math.sin(this.MaxSlopAngle*.5*PN);this.snapThreshold=e=>{if(e<this.MinLength)return this.MaxSlopAngle;let r=Math.asin(this.MinDistance/e)*rP*2;return Math.min(this.MaxSlopAngle,r)}}add({x:e,y:r,pressure:o}){let i=this.width;if(y3(this.type)&&o>0&&(i=Math.max(0,(Math.log10(o*10)+1)*this.width)),this.rawPoints.length<1)this.rawPoints.push({x:e,y:r,width:i});else if(this.isRuler){let u=this.rulerEndPoint(e,r);this.rawPoints=[this.rawPoints[0],{x:u.x,y:u.y,width:i}]}else{let u=this.rawPoints[this.rawPoints.length-1];if(Math.abs(e-u.x)<1&&Math.abs(r-u.y)<1)return nt({x:u.x,y:u.y,width:0,height:0});this.rawPoints.push({x:e,y:r,width:i})}if(this.smoothLast(),this.isRuler||this.rawPoints.length<2)return;if(this.rawPoints.length===2)return Fu.strokePointsBoundingBox(this.rawPoints[0],this.rawPoints[1]);if(this.rawPoints.length<=4)return;let s=Fu.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-2],this.smoothedPoints[this.smoothedPoints.length-1],this.rawPoints[this.rawPoints.length-1],this.rawPoints[this.rawPoints.length-1]),a=Fu.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.rawPoints[this.rawPoints.length-2],this.rawPoints[this.rawPoints.length-2]),l=Fu.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.smoothedPoints[this.smoothedPoints.length-1],this.rawPoints[this.rawPoints.length-1]),c=Fu.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-4],this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.rawPoints[this.rawPoints.length-2]),d=Fu.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-4],this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.smoothedPoints[this.smoothedPoints.length-1]);return s=Li(s,a),s=Li(s,l),s=Li(s,c),s=Li(s,d),s}smoothLast(){let e=this.rawPoints.length,r=e-2;if(e<2)return;if(e===2){this.smoothedPoints[0]=b_(this.rawPoints[0]);return}let o=0,i=0,s=0;for(let a=-1;a<2;a++){let l=this.rawPoints[r+a];o+=l.x,i+=l.y,s+=l.width}o/=3,i/=3,s/=3,this.smoothedPoints[r]={x:o,y:i,width:s}}rulerEndPoint(e,r){let o=new er(e-this.rawPoints[0].x,r-this.rawPoints[0].y),i=o.magnitude();if(i<=this.LengthThreshold)return{x:e,y:r};let s=o.angle(),a=Math.round(s/this.StepAngle)*this.StepAngle;if(Math.abs(a-s)<=this.snapThreshold(i)){let l=new er(1,0).rotate(a);return Re(this.rawPoints[0].x+l.x*i,this.rawPoints[0].y+l.y*i)}else return{x:e,y:r}}};var B0=class{constructor(e){this.id=e}static get(e){return B0.links.get(e)}linkTo(e){this.next=B0.links.get(e),this.next.prev=this}current(){let e=this;for(;e.next!=null;)e=e.next;return e}unlink(){this.next&&(this.next.prev=this.prev),this.prev&&(this.prev.next=this.next),B0.links.delete(this.id)}pop(){let e=this.current();return e.unlink(),e}},i1=B0;i1.links=new ni(e=>new B0(e));var xCe=Cc(),nm=class{static addStroke(e){return new nm({contents:[e],deleted:[],ignore_base:!1})}static clearAll(e){return new nm({contents:[],deleted:Array.from(e),ignore_base:!0})}constructor({contents:e,deleted:r,ignore_base:o}){this.strokes=e,this.deleted=r,this.ignore_base=o}invert(e={}){let r=Array.from(this.deleted).map(i=>{let s=e.idMapper?e.idMapper(i.id):xCe();return i1.get(i.id).linkTo(s),i.clone(s)}),o=this.strokes.map(i=>{let s=i1.get(i.id);return i.clone(s.pop().id)});return new nm({contents:r,deleted:o,ignore_base:this.ignore_base})}},T_=class{constructor(){this.done=[];this.rewind=[]}canUndo(){return this.done.length>0}canRedo(){return this.rewind.length>0}push(e){this.done.push(e),this.rewind.length>0&&(this.rewind=[])}undo(){let e=this.done.pop();if(!e)return;let r=e.invert();return this.rewind.push(r),r}redo(){let e=this.rewind.pop();if(!e)return;let r=e.invert();return this.done.push(r),r}};function wCe(t){return fa(t,{id:hc,metadata:{position:{left:un,top:un},author:{id:un,name:hc}}})}function TCe(t){return fa(t,{from:hc,to:hc,as_different_group:Rx})}function DCe(t){return fa(t,{top_of_group:hc,is_folded:Rx})}var D_={version:zk("1.0.0.0","2.0.0.0"),format:"note",data:{metadata:{created_by:ol},frames:nu(wCe),connections:nu(TCe),group_states:nu(DCe)}};function kCe(t){return fa(t,{id:hc,relative_position:xy})}var k_=Object.assign({},D_,{version:"2.1.0.0",data:Object.assign({fold_states:nu(kCe)},D_.data)});function tY(t){hf(t,D_);let{version:e,data:r,...o}=t;return{...o,version:"2.1.0.0",data:{...r,fold_states:[]}}}function Hn(t){if(t==null)return{left:0,right:0,bottom:0,top:0};if(typeof t=="number"){let e=t;return{left:e,right:e,top:e,bottom:e}}else{let{left:e,top:r,bottom:o,right:i}=t;return{left:e,top:r,bottom:o,right:i}}}function rY(t){return t.right===0&&t.left===0&&t.top===0&&t.bottom===0}function P_(t,e){return Hn({left:t.left*e,top:t.top*e,right:t.right*e,bottom:t.bottom*e})}function E_(t,e,r,o,i){return t.left=e,t.top=r,t.right=o,t.bottom=i,t}function nY(t){return fa(t,{id:hc,children:nu(nY)})}var __=Object.assign({},k_,{version:/^3\.(\d+)\.(\d+)\.(\d+)$/,features:nu(ol),data:Object.assign({tree_states:nu(nY)},k_.data)});function oY(t){hf(t,k_);let{version:e,data:r,...o}=t,{frames:i,...s}=r;return{...o,version:"3.0.0.0",features:["sheet"],data:{...s,frames:i.map(PCe),tree_states:[]}}}function PCe(t){var f,m;let e=t.metadata.position?Re(t.metadata.position.left,t.metadata.position.top):Re(),r;t.type==="pdf"?r=(f=t.content.page_size)!=null?f:Yi:r=(m=t.content.size)!=null?m:Yi;let o=fc(Gt)/fc(r),i=Xt(r,o),s=Hn(),a;if(t.type==="title"||t.type==="drawn")a={...t.content,margins:s};else{let g="#FFFFFFFF";a={...t.content,backcolor:g,margins:s}}let{drawn:l,title:c,annotations:d,bgm:u,naration:p}=t.gadgets,h={bgm:u,naration:p};if(l){let g=nt(0,0,1,1);h.drawn={...l,thumbnailRect:g}}if(d){let g=nt(0,0,1,1);h.annotations={...d,thumbnailRect:g}}if(c){let g=[{type:"font",value:{size:c.font_size,bold:!1}},{type:"foreground_color",value:c.forecolor}],v=[{index:0,range:{location:0,length:c.text.length}},{index:1,range:{location:0,length:c.text.length}}],y=!1;h.title={...c,attributes:g,attribute_ranges:v,vertical:y}}return{id:t.id,metadata:{position:{left:e.x,top:e.y},layout_size:i,duration:t.metadata.duration,author:{...t.metadata.author}},type:t.type,content:a,gadgets:h}}function iY(t){if(t.version!=="3.0.0.0")throw new ci("version is not 3.0.0.0");let{version:e,data:r,...o}=t,{frames:i,...s}=r;return{version:"3.1.0.0",data:{frames:i.map(ECe),favorite_items:[],pinned_items:[],...s},...o}}function ECe(t){let e=t.type!=="video"&&t.type!=="audio",{metadata:r,...o}=t;return{...o,metadata:{...r,unlimited_recording_time:e}}}function sY(t){if(t.version!=="3.1.0.0")throw new ci("version is not 3.1.0.0");let{version:e,data:r,...o}=t,{frames:i,...s}=r;return{version:"3.2.0.0",data:{frames:i,...s},...o}}function aY(t){if(t.version!=="3.2.0.0")throw new ci("version is not 3.2.0.0");let{version:e,...r}=t;return{version:"3.3.0.0",...r}}function lY(t){if(t.version!=="3.3.0.0")throw new ci("version is not 3.3.0.0");let{version:e,...r}=t;return{version:"3.4.0.0",...r}}function cY(t){if(t.version!=="3.4.0.0")throw new ci("version is not 3.3.0.0");let{version:e,...r}=t;return{version:"3.5.0.0",...r}}function dY(t){if(t.version!=="3.5.0.0")throw new ci("version is not 3.5.0.0");let{version:e,data:r,...o}=t;return{version:"3.6.0.0",data:{...r,locking_items:[]},...o}}function uY(t){if(t.version!=="3.6.0.0")throw new ci("version is not 3.6.0.0");let{version:e,...r}=t;return{version:"3.7.0.0",...r}}var A_=L0();var hY="3.7.0.0",_v;(function(s){s[s.brokenZip=0]="brokenZip",s[s.filesNotRead=1]="filesNotRead",s[s.missingFiles=2]="missingFiles",s[s.invalidJson=3]="invalidJson",s[s.invalidVersionNumber=4]="invalidVersionNumber"})(_v||(_v={}));var om=class extends Error{constructor(e,r){super("note may be broken");this.error=e;this.type=r}};async function O0(t,e){var p,h,f,m;let r=await A_.loadAsync(t).catch(g=>{throw new om(g,0)}),o,i,s,a;try{[o,s,i,a]=await Promise.all([(p=r.file("version"))==null?void 0:p.async("text"),(h=r.file("body"))==null?void 0:h.async("text"),(f=r.file("header"))==null?void 0:f.async("text"),(m=r.file("share_metadata"))==null?void 0:m.async("text")])}catch(g){let v=De.get().strings,y=Pl(g,v.unexpectedErrorOccurred);throw new om(y,1)}if(!o||!s)throw new om(new Error("missing required entries"),2);let l,c,d;try{l=JSON.parse(s),i&&(c=JSON.parse(i)),a&&(d=JSON.parse(a))}catch(g){let v=De.get().strings,y=Pl(g,v.unexpectedErrorOccurred);throw new om(y,3)}let u;if(o.match(/^\d+\n?$/))u=parseInt(o);else throw new om(new Error("invalid version format"),4);return{version:u,header:c,note:l1(l,e),share_metadata:d}}async function s1({note:t,header:e,version:r,share_metadata:o}){$e(t.version===e.format_version,"format version mismatch");let i=new A_;return i.file("version",`${r}`),i.file("header",JSON.stringify(e)),i.file("body",JSON.stringify(t)),o&&i.file("share_metadata",JSON.stringify(o)),i.generateAsync({type:"arraybuffer"})}async function I_(t){let e=new A_,r={version:"1.1.0.0",format:"drawn",data:{canvas:t.canvas,contents:C_(t.contents)}};return e.file("data",JSON.stringify(r)),e.generateAsync({type:"arraybuffer"})}async function R_(t){var o;let r=await((o=(await A_.loadAsync(t)).file("data"))==null?void 0:o.async("text"));return $e(r!=null,"data must be stored"),Wq(r)}var a1=class extends Error{constructor(e,r){super(r);this.version=e}},F_=class extends Error{constructor(e,r,o){super(o);this.version=e;this.features=r}};function _Ce(t){let e=t.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);if(!e)throw new a1(t,"Unrecognized file format version: "+t);let[r,o,i,s,a]=e;try{return[o,i,s,a].map(l=>parseInt(l))}catch(l){throw ge.error(l),l}}function l1(t,e){let[r]=_Ce(t.version);if(r>3)throw new a1(t.version,"Unsupported file format version: "+t.version);e&&ACe(t,e),(t.version==="1.0.0.0"||t.version==="2.0.0.0")&&(t=tY(t)),t.version==="2.1.0.0"&&(t=oY(t));let o=t.features,i=["sheet","quiz","attendance"],s=o.filter(a=>!i.includes(a));if(s.length>0)throw new F_(t.version,s);return t.version==="3.0.0.0"&&(t=iY(t)),t.version==="3.1.0.0"&&(t=sY(t)),t.version==="3.2.0.0"&&(t=aY(t)),t.version==="3.3.0.0"&&(t=lY(t)),t.version==="3.4.0.0"&&(t=cY(t)),t.version==="3.5.0.0"&&(t=dY(t)),t.version==="3.6.0.0"&&(t=uY(t)),t.version==="3.7.0.0",hf(t,__),t}function ACe(t,e){for(let r of t.data.frames)(!r.metadata.author||!r.metadata.author.id||!r.metadata.author.name)&&(r.metadata.author=e)}var w3=class{constructor(){this.baseStrokes=[];this.ignoreBase=!1;this.strokes=[];this.ids=new Set;this.ignoredIds=new Set}setBase(e){this.baseStrokes=[...e]}push(e){let{id:r}=e;this.ids.has(r)||(this.ids.add(r),this.strokes.push(e))}delete(e){this.ids.delete(e);let r=this.strokes.findIndex(o=>o.id===e);this.strokes.splice(r,1)}applyMetadata(e){this.ignoreBase=e.ignore_base;for(let r of e.garbage)this.ignoredIds.add(r)}applyOperation(e){this.ignoreBase=e.ignore_base;for(let r of e.strokes)this.push(r);for(let r of e.deleted)this.delete(r.id)}canClearAll(){return this.baseStrokes.length>0||this.strokes.length>0}clear(){this.strokes=[],this.baseStrokes=[]}*validStrokes(e){for(let r of e)this.ignoredIds.has(r.id)||(yield r)}*[Symbol.iterator](){this.ignoreBase||(yield*this.validStrokes(this.baseStrokes)),yield*this.validStrokes(this.strokes)}};function fY(t,e){let r=[],o=new Set;return async i=>{let s=e(i);if(o.has(s)){let a=gc();return r.push([s,a]),a}return o.add(s),new Promise((a,l)=>{function c(d,u){for(let p=0;p<r.length;p++){let[h,f]=r[p];h===s&&(u?f.reject(d):f.resolve(d),r.splice(p,1),p--)}}t(i).then(d=>{a(d),c(d,!1)}).catch(d=>{l(d),c(d,!0)}).finally(()=>{o.delete(s)})})}}var ki=class{add(e){let r=e instanceof ki?e.rect:e;if(r!==void 0)if(this._rect){let[o,i]=[Math.min(this._rect.x,r.x),Math.max(this._rect.x+this._rect.width,r.x+r.width)],[s,a]=[Math.min(this._rect.y,r.y),Math.max(this._rect.y+this._rect.height,r.y+r.height)];this._rect=nt(o,s,i-o,a-s)}else this._rect=nt(r.x,r.y,r.width,r.height)}clear(){this._rect=void 0}get rect(){if(!!this._rect)return nt(this._rect.x,this._rect.y,this._rect.width,this._rect.height)}};var ICe=Cc();function mY(t,e,r,o){return o?`${t}/${e}/${r}:${o}`:`${t}/${e}/${r}`}var M_=class{constructor(e,r,o,i){this.type=e;this.id=r;this.pageIndex=o;this.snapshotId=i;this.strokes=new w3;this.htmlToCardMatrix=new ft;this.history=new T_;this.updatedRectBoundingBox=new ki;this.layerLoadState=new xd("StrokeManager.layerLoadState");this.baseLoadState=new xd("StrokeManager.baseLoadState");this._cancelled=!1;this.unifier=fY(e=>this.updateDocumentLayerInternal(e),e=>`${e.afterGeneration}`)}get currentStroke(){return this._currentStroke}unsafeCurrentStroke(){if(!this._currentStroke)throw new Error("current stroke is not ready");return this._currentStroke}getLayerMetadata(){return this.layerMetadata}setLayerMetadata(e){this.layerMetadata=e}get generation(){var e,r;return(r=(e=this.layerMetadata)==null?void 0:e.generation)!=null?r:0}getLayerLoadState(){return this.layerLoadState}getBaseLoadState(){return this.baseLoadState}static reset(){this.instances=new Map}static get(e,r){return r.document?this.forDocument(e,r.document.id,r.document.index,r.document.commentSnapshotId):this.forCard(e,r.id)}static forCard(e,r){let o=mY(e,r,0,void 0),i=this.instances.get(o);return i||(i=new M_(e,r,0,void 0),i.layerLoadState.set("notFound"),this.instances.set(o,i)),i}static forDocument(e,r,o,i){let s=mY(e,r,o,i),a=this.instances.get(s);return a||(a=new M_(e,r,o,i),this.instances.set(s,a)),a}canClearAllStroke(){return this.strokes.canClearAll()}clearAllStroke(){if(!this.canClearAllStroke)return;let e=nm.clearAll(this.strokes);return this.history.push(e),this.strokes.clear(),this._currentStroke=void 0,e}beginStroke(e){let r=e.penType,o=ICe();this._cancelled=!1,this._currentStroke=new S3({id:o,type:r,width:e.width,color:e.color},e.isRuler)}addPoint(e,r,o){let i=this._currentStroke;if(!i)throw new Error("current stroke is not ready");let s=this.htmlToCardMatrix.applied({x:e,y:r}),a=i.add({x:s.x,y:s.y,pressure:o});return a&&this.updatedRectBoundingBox.add(a),a}endStroke(){let e=this.currentStroke;if(this._currentStroke=void 0,!!e)return this.commitStroke(e)}get cancelled(){return this._cancelled}cancelStroke(){let e=this.currentStroke;if(!e)return;this._cancelled=!0,this._currentStroke=void 0;let{points:r}=e.content;if(r.length<2)return;let o=r[0],i=r[r.length-1];if(r.length>=my||Fg(o,i)>=my)return this.commitStroke(e)}commitStroke(e){this.strokes.push(e);let r=nm.addStroke(e);return this.history.push(r),r}clearUpdatedRect(){this.updatedRectBoundingBox.clear()}getUpdatedCanvasClipRect(){if(!this.updatedRectBoundingBox.rect)return;let e=this.updatedRectBoundingBox.rect,o=this.htmlToCardMatrix.invert().applied({x:e.x,y:e.y,width:e.width,height:e.height});return o={x:Math.floor(o.x),y:Math.floor(o.y),width:Math.ceil(o.width),height:Math.ceil(o.height)},o}packContents(){let e=this.currentStroke?[this.currentStroke]:[];return Array.from(this.strokes).concat(e).map(r=>r.content)}async updateData(e){await this.baseLoadState.fetch(async()=>{let r=await ue.lnsClient.downloadAsset(e).then(R_);return this.strokes.setBase(r.contents.map(rm.fromContent)),{remote_id:e}})}async updateDocumentLayer({afterGeneration:e}={afterGeneration:this.generation}){return this.unifier({afterGeneration:e})}async updateDocumentLayerInternal({afterGeneration:e}){var a;let r=xn(this.id,`id must be document id: id=${this.id}, type=${this.type}`),o=ue.lnsClient,i=this.type,s=await this.layerLoadState.fetch(async()=>{let l;if(this.snapshotId?l=await o.getDocumentLayerSnapshot({type:i,documentId:r,snapshotId:this.snapshotId,index:this.pageIndex}):l=await o.getDocumentLayer({type:i,documentId:r,index:this.pageIndex,afterGeneration:e}),!l)return"notFound";let[c,d]=l;if(!(this.generation!==c.generation))return"notUpdated";this.layerMetadata=c;for(let p of d)this.strokes.push(rm.fromContent(p));return this.strokes.applyMetadata(c),"updated"});return(a=s==null?void 0:s.value)!=null?a:"error"}updateTransformMatrix({card:e,mtx:r,canvasSize:o}){let i=e.drawnGeometry(this.type),s=e.contentSize,a=e.content.margins,l={width:a.left+s.width+a.right,height:a.top+s.height+a.bottom};this.htmlToCardMatrix.identity(),this.htmlToCardMatrix.prepend(1,0,0,1,-r.e,-r.f),this.htmlToCardMatrix.prepend(1/r.a,0,0,1/r.a,0,0);let c=1/pi(o.width,o.height,l.width,l.height);this.htmlToCardMatrix.prepend(c,0,0,c,0,0),this.htmlToCardMatrix.prepend(1,0,0,1,l.width*.5-a.left,l.height*.5-a.top);let d=pi(i.canvas.width,i.canvas.height,s.width,s.height);this.htmlToCardMatrix.prepend(d,0,0,d,0,0),this.htmlToCardMatrix.prepend(1,0,0,1,(i.canvas.width-s.width*d)*.5,(i.canvas.height-s.height*d)*.5)}clearHistory(){this.history=new T_}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}undo(){let e=this.history.undo();return e&&this.runOperation(e),e}redo(){let e=this.history.redo();return e&&this.runOperation(e),e}runOperation(e){this.strokes.applyOperation(e)}},To=M_;To.instances=new Map;function gY(t){return Fl(async r=>{let o=r.drawnAssetId(t),i=To.get(t,r);return o?await i.updateData(o):i.getBaseLoadState().set({remote_id:void 0}),r.document?await i.updateDocumentLayer():i.getLayerLoadState().set("notFound"),i.packContents()},{delay:1,unit:pr.min})}var T3=class{constructor(e){this.factory=e}get current(){return this.t?this.t.value:(this.t={value:this.factory()},this.t.value)}invalidate(){this.t=void 0}};var N_=class{constructor(e){this.id=e;this.fetcher=new T3(()=>new Ev((e,r)=>this._fetch(e,r),{delay:1,unit:pr.min}));this._revokeRequiredUrls=[]}static get(e){return N_.instances.get(e)}invalidate(){this.fetcher.invalidate(),this.revokeCachedUrl()}async load(e){let r=await this.fetch(e);if(r)return Na({url:r})}async fetch(e){let r=await this.fetcher.current.fetch(e,e.signal);if(r.type==="success")return r.value}async _fetch({skipForKnown404Url:e=!1,maxRetryCount:r,url:o},i){if(!(e&&await ue.idb.booleans.urlNotFound(o)))try{let s=await jw({url:o,maxRetryCount:r,signal:i});this.revokeCachedUrl();let a=URL.createObjectURL(s);return this.setCachedUrl(a)}catch(s){throw s instanceof Yr&&s.status===404&&await ue.idb.booleans.putUrlNotFound(o),s}}cachedUrl(){return this._cachedUrl}revokeCachedUrl(){this._cachedUrl&&this._revokeRequiredUrls.push(this._cachedUrl),this._cachedUrl=void 0}setCachedUrl(e){for(let r of this._revokeRequiredUrls)URL.revokeObjectURL(r);return this._revokeRequiredUrls=[],this._cachedUrl=e,e}async toUrl(e){var r;return(r=this._cachedUrl)!=null?r:this.fetch(e)}},Mu=N_;Mu.instances=new ni(e=>new N_(e));var D3=class extends o1{async loadInternal(e,r,o){let i=b3(r);if(i)return{image:i};if(e==="small"||e==="medium"){let s=ue.res.cardThumbUrl(r,e);if(s){let a=Mu.get(s);o&&a.invalidate();let l=await a.load({url:s});if(l)return{image:l}}}else if(e==="high"&&wo.getMaxLevelForCard(r)==="high"){let s=r.contentAssetId();if(s){let a=await ue.lnsClient.downloadAsset(s);return{image:await HL(a).then(A0)}}}}getUrlForThumb(e,r){if(!Hq(r)){if(e==="small"||e==="medium"){let o=ue.res.cardThumbUrl(r,e);if(o)return o}else if(e==="high"&&wo.getMaxLevelForCard(r)==="high")return ue.res.assetUrl(r.contentAssetId())}}rotate(e){for(let[r,o]of this.thumbs){let i=YE(o,e);this.set(r,i)}}},k3=class extends o1{async loadInternal(e,r,o){let i=this.getUrlForThumb(e,r);if(!i)return;let s=Mu.get(i);o&&s.invalidate();let a=await s.load({url:i});if(!!a)return{image:a}}getUrlForThumb(e,r){if(!r.document)return;let{id:o,index:i,commentSnapshotId:s}=r.document;if(e==="small"||e==="medium"){let{res:a}=ue;return a.documentThumbUrl({docId:o,index:i,snapshotId:s,size:e})}}},B_=class extends o1{constructor(e){super();this.type=e;this.loader=new P3(this.type,this)}get geometry(){if(this._geometry)return{...this._geometry}}async loadInternal(e,r,o){let s=await this.promoteLoader(e).load(e,r,o);if(this._geometry=r.drawnGeometry(this.type),s)return{image:s.image}}promoteLoader(e){if(this.loader instanceof L_)return this.loader;if(e==="high"){let r=new L_(this.type,this);return this.setLoader(r),r}else return this.loader}getUrlForThumb(e,r){return this.loader.getUrlForThumb(e,r)}setLoader(e){this.loader!==e&&(this.loader.delegate=void 0,this.loader=e)}redrawThumbnails({geometry:e,contents:r}){let o=vY({geometry:e,contents:r}),{medium:i,small:s}=RCe(o);if($e(s!=null),$e(i!=null),$e(o!=null),this.loader instanceof P3){let a=new L_(this.type,this);this.setLoader(a)}return this.set("high",o),this.set("medium",i),this.set("small",s),this._geometry={...e},{small:s,medium:i,high:o,contentType:"image/png"}}},P3=class{constructor(e,r){this.type=e;this.delegate=r}async load(e,r,o){var l;$e(e!=="high");let i=ue.res.drawnThumbUrl(r,this.type,e);if(!i)return;let s=Mu.get(i);o&&s.invalidate();let a=await s.load({url:i});if(!!a)return(l=this.delegate)==null||l.set(e,a),{image:a}}getUrlForThumb(e,r){if(e!=="high")return ue.res.drawnThumbUrl(r,this.type,e)}},L_=class{constructor(e,r){this.type=e;this.dataFetcher=gY(this.type);this.delegate=r}async load(e,r,o){var c,d;let i=await this.dataFetcher.fetch(r,{force:o});if(!i)return;let s=r.drawnGeometry(this.type),a,l=vY({contents:i,geometry:s});e==="high"&&(a=l),(c=this.delegate)==null||c.set("high",l);for(let u of["small","medium"]){let p=wo.getThumbnailSize(u,l),h=dl(l,p);(d=this.delegate)==null||d.set(u,h),e===u&&(a=h)}return $e(a!==void 0),{image:a}}getUrlForThumb(e,r){}};function vY({geometry:t,contents:e}){let{canvas:r,thumbnailRect:o}=t,[i,s]=[Math.floor(r.width*o.width),Math.floor(r.height*o.height)],a=Dr.create(i,s),l=a.getContext2dForce();return l.save(),l.translate(-r.width*o.x,-r.height*o.y),w_(l,{canvas:r,contents:e},1),l.restore(),a}function RCe(t){let e=wo.getThumbnailSize("small",t),r=wo.getThumbnailSize("medium",t);return{small:dl(t,e),medium:dl(t,r)}}var O_=class{constructor(){this.content=new D3;this.document=new k3;this.drawn=new B_("drawn");this.annotation=new B_("annotation")}static get(e){if(e.document){let{id:r,index:o,commentSnapshotId:i}=e.document;return this.forDocument(r,o,i)}else return this.forCard(e.id)}static forCard(e){return this.instances.get(`card/${e}`)}static forDocument(e,r,o){return o!=null?this.instances.get(`document/${e}/${r}/${o}`):this.instances.get(`document/${e}/${r}`)}static reset(){this.instances=new ni(()=>new O_)}get timestamp(){return Math.max(this.content.timestamp,this.document.timestamp,this.drawn.timestamp,this.annotation.timestamp)}},gr=O_;gr.instances=new ni(()=>new O_);var{splitGraphemes:GY}=HY(),Ro=class{static fromTitleGadget(e){let r=new Ro(e);return r.attachFont(e.font_size),r}constructor({text:e,attributes:r,attribute_ranges:o}){this.text=e,this.attributes=r||[],this.attribute_ranges=o||[]}get length(){return this.text.length}substr({location:e,length:r}){let o=this.attribute_ranges.map(a=>{let l=sm({location:e,length:r},a.range);if(!l||l.length<1)return;let c={location:l.location-e,length:l.length};return{index:a.index,range:c}}).filter(a=>a!==void 0),{attributes:i,attribute_ranges:s}=_3({attributes:this.attributes,attribute_ranges:o});return new Ro({text:this.text.substr(e,r),attributes:i,attribute_ranges:s})}*lines(e={location:0,length:this.length}){let r;e.location<=0?r=0:r=this.text.lastIndexOf(`
`,e.location-1)+1;let o=this.text.indexOf(`
`,e.location);o<0?o=this.text.length:o++;let i={location:r,length:o-r};if(yield{line:this.substr(i),range:i},o!==this.text.length)for(r=o;r<=e.location+e.length;){if(o=this.text.indexOf(`
`,r),o<0?o=this.text.length:o++,i={location:r,length:o-r},yield{line:this.substr(i),range:i},o===this.text.length)return;r=o}}attributeAt({location:e,type:r}){let o=this.attribute_ranges.findIndex(a=>Q_(a.range,e)&&this.attributes[a.index].type===r);if(o<0)return;let i=this.attribute_ranges[o].index;return this.attributes[i]}attributesAt(e){return this.attribute_ranges.filter(r=>Q_(r.range,e)).map(r=>this.attributes[r.index])}append(e){let r=this.length,o=this.attributes.length;this.text+=e.text,this.attributes=this.attributes.concat(e.attributes),this.attribute_ranges=this.attribute_ranges.concat(e.attribute_ranges.map(i=>({index:i.index+o,range:{location:i.range.location+r,length:i.range.length}})))}insert({string:e,location:r}){let o=this.substr({location:0,length:r}),i=this.substr({location:r,length:this.length-r});this.text=o.text,this.attributes=o.attributes,this.attribute_ranges=o.attribute_ranges,this.append(e),this.append(i)}replace({range:e,string:r}){this.remove(e),this.insert({string:r,location:e.location})}remove({location:e,length:r}){if(this.length<=e)return;let o=e,i=Math.min(this.length,e+r);this.text=this.text.substring(0,o)+this.text.substr(i);let s=[];for(let c of this.attribute_ranges){let d=c.range.location,u=d+c.range.length;o<=d&&u<=i||(d<o&&i<=u?s.push({index:c.index,range:{location:d,length:u-d-(i-o)}}):o<=d&&d<i?s.push({index:c.index,range:{location:o,length:u-i}}):o<u&&u<=i?s.push({index:c.index,range:{location:d,length:o-d}}):i<=d?s.push({index:c.index,range:{location:d-(i-o),length:u-d}}):s.push(c))}let{attributes:a,attribute_ranges:l}=_3({attributes:this.attributes,attribute_ranges:s});this.attributes=a,this.attribute_ranges=l}advance({location:e,byComposedCharacterOffset:r}){if(e<0||this.text.length<e)return;let o=[...d1(this.text)],i=0,s=o.length;for(let c=0;c<o.length;c++){let d=o[c],u=i,p=i+d.length;if(u<=e&&e<p){s=c;break}i+=d.length}let a=ht(s+r,0,o.length),l=0;for(let c=1;c<=a;c++)l+=o[c-1].length;return l}removeAttribute({type:e,range:r}){r=c1(r);let o=[];for(let a=0;a<this.attribute_ranges.length;a++){let l=this.attribute_ranges[a];if(this.attributes[l.index].type!==e){o.push(l);continue}let c=sm(l.range,r);if(c===void 0){o.push(l);continue}let d={location:l.range.location,length:c.location-l.range.location};d.length>0&&o.push({index:l.index,range:d});let u={location:c.location+c.length,length:l.range.location+l.range.length-(c.location+c.length)};u.length>0&&o.push({index:l.index,range:u})}let{attributes:i,attribute_ranges:s}=_3({attributes:this.attributes,attribute_ranges:o});this.attributes=i,this.attribute_ranges=s}addAttribute({attribute:e,range:r}){let o=sm(c1(r),{location:0,length:this.length});if(o===void 0||o.length===0)return;let{type:i}=e;this.removeAttribute({type:i,range:o});let s=this.attributes.findIndex(a=>a.type!==i?!1:a.value===e.value);s<0&&(s=this.attributes.length,this.attributes.push(e)),this.attribute_ranges.push({index:s,range:o})}clone(){let e=this.text,r=this.attributes.map(i=>{let s=i.type;return s==="font"?{type:s,value:{...i.value}}:s==="foreground_color"?{type:s,value:i.value}:s==="language"?{type:s,value:i.value}:{type:s,value:{...i.value}}}),o=this.attribute_ranges.map(i=>({index:i.index,range:{...i.range}}));return new Ro({text:e,attributes:r,attribute_ranges:o})}equals(e){return this.text===e.text&&JSON.stringify(this.attributes)===JSON.stringify(e.attributes)&&JSON.stringify(this.attribute_ranges)===JSON.stringify(e.attribute_ranges)}pack(){let{attributes:e,attribute_ranges:r}=OSe({attributes:this.attributes,attribute_ranges:this.attribute_ranges});return{text:this.text,attributes:e,attribute_ranges:r}}attachFont(e){let r=this.attribute_ranges.filter(a=>this.attributes[a.index].type==="font").sort((a,l)=>a.range.location-l.range.location),o=0,i={type:"font",value:{size:e,bold:!1}},s=[];for(let a=0;a<r.length;a++){let{range:l,index:c}=r[a],{location:d,length:u}=l;if(o<d)s.push({attribute:i,range:{location:o,length:d-o}});else if(d+u<o)continue;o=d+u,i=this.attributes[c]}o<this.length&&s.push({attribute:i,range:{location:o,length:this.length-o}});for(let{attribute:a,range:l}of s)this.addAttribute({attribute:a,range:l})}};function Zs(t,e=[]){let r=e.map((o,i)=>({index:i,range:{location:0,length:t.length}}));return new Ro({text:t,attributes:e,attribute_ranges:r})}function Ol({begin:t,end:e}){return{location:t,length:e-t}}function sm(t,e){let r=t.location+t.length,o=e.location+e.length,i=r<o?r:o;if(e.location<=t.location&&t.location<o)return{location:t.location,length:i-t.location};if(t.location<=e.location&&e.location<r)return{location:e.location,length:i-e.location}}function Q_(t,e){let r=c1(t);return r.location<=e&&e<r.location+r.length}function c1(t){return t.length>0?t:{location:t.location+t.length,length:-t.length}}function co(t){return Math.min(t.location,t.location+t.length)}function oi(t){return Math.max(t.location,t.location+t.length)}function oh({text:t,location:e}){if(e<0||t.length<e)return;let r=t.indexOf(`
`,e);r<0?r=t.length:r+=1;let o=t.substr(0,e).lastIndexOf(`
`);return o<0?o=0:o+=1,{location:o,length:r-o}}function*d1(t){let e=t.split(`
`);if(e.length===0)return;for(let i=0;i<e.length-1;i++){let s=e[i],a=GY(s);for(let l=0;l<a.length;l++)yield a[l];yield`
`}let r=e[e.length-1],o=GY(r);for(let i=0;i<o.length;i++)yield o[i];r.endsWith(`
`)&&(yield`
`)}function _3({attributes:t,attribute_ranges:e}){let r=t.concat(),o=e.concat(),i=r.length-1;for(;i>=0;)o.findIndex(s=>s.index===i)<0&&(r.splice(i,1),o=o.map(s=>s.index>i?{index:s.index-1,range:s.range}:s)),i-=1;return{attributes:r,attribute_ranges:o}}function OSe({attributes:t,attribute_ranges:e}){let r=t.map(s=>JSON.stringify(s)),o=new Map,i=[];for(let s=0;s<e.length;s++){let{index:a,range:l}=e[s],c=t[a],d=r[a];if(o.has(d)){let u=o.get(d);i.push({index:u.index,range:l})}else{let u={index:o.size,value:c};o.set(d,u),i.push({index:u.index,range:l})}}for(let s=0;s<i.length-1;s++){let a=i[s];for(let l=s+1;l<i.length;l++){let c=i[l];c.index===a.index&&(a.range.location+a.range.length===c.range.location?(i[s].range={location:a.range.location,length:a.range.length+c.range.length},i.splice(l,1),l--):c.range.location+c.range.length===a.range.location&&(i[s].range={location:c.range.location,length:a.range.length+c.range.length},i.splice(l,1),l--))}}return{attributes:[...o.values()].map(s=>s.value),attribute_ranges:i}}function J_(t){if(!t)return"#000000ff";let{value:e}=t;return e.length===9?"#"+e.substr(3,6)+e.substr(1,2):"#000000ff"}var TX=X($Y());var A3=1e3;function WY({run:t,ofLine:e,dx:r,ctx:o,vertical:i}){var s;if(o.save(),i&&t.rotate?(o.translate(0,e.origin.y),o.rotate(-Math.PI/2),o.translate(-t.advance/2+(e.ascender+e.descender)/2,e.origin.x+r+t.advance/2+(t.ascender-t.descender)/2+t.descender)):o.translate(e.origin.x+r,e.origin.y),i&&t.rotate&&t.shouldUseGlyph)for(let{glyphs:a,advance:l}of t.graphemes){if(a){let d=((s=a.sub)!=null?s:a.main).getPath(0,0,t.fontSize);d.fill=t.rgbaHex,d.draw(o)}o.translate(l,0)}else if(t.bitmap){let a=80,l=t.fontSize/a;o.font=`${a}px '${t.fontFamily}'`,o.fillStyle=t.rgbaHex,o.scale(l,l),o.fillText(t.text,t.kerning,0)}else{let a=ht(Math.round(t.fontSize),40,A3),l=t.fontSize/a;o.save(),o.scale(l,l),o.font=`${a}px '${t.fontFamily}'`,o.fillStyle=t.rgbaHex,o.fillText(t.text,t.kerning/l,0),o.restore()}o.restore()}function Z_({run:t,next:e,vertical:r,onlyLackingGlyphs:o}){if(!(r||o)&&!(t.rotate||t.shouldUseGlyph||t.bitmap||t.text==="	"||t.headIndent)&&!(e.rotate||e.shouldUseGlyph||e.bitmap||e.text==="	"||e.headIndent||e.kerning!==0)&&!(t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.bold!==e.bold)&&t.rgbaHex===e.rgbaHex)return{text:t.text+e.text,graphemes:[...t.graphemes,...e.graphemes],shouldUseGlyph:t.shouldUseGlyph,fontSize:t.fontSize,fontFamily:t.fontFamily,advance:t.advance+e.advance,kerning:t.kerning,rotate:!1,rgbaHex:t.rgbaHex,bold:t.bold,ascender:Math.max(t.ascender,e.ascender),descender:Math.min(t.descender,e.descender),bitmap:!1}}function I3(t){return t.graphemes.some(e=>{var r;return((r=e.glyphs)==null?void 0:r.main)==null||e.glyphs.main.index===0})}function R3({line:t,origin:e,ascender:r,descender:o}){return{runs:t.runs,spacing:t.spacing,origin:e,ascender:r,descender:o}}function ih(t){let e=0,r=0;for(let o of t.runs)e=Math.max(e,o.ascender),r=Math.min(r,o.descender);return{ascender:e,descender:r}}function Av(t){let e=0;for(let r of t.runs)e=e+r.kerning+r.advance;return e}function eA(t){let e=0;for(let r of t.runs)e+=r.text.length;return e}function jY(t,e){return t.runs.length===0?!1:t.runs[t.runs.length-1].text.endsWith(e)}function KY(t){if(t.length===0)return Ze(0,0);let e=t[0],{ascender:r,descender:o}=ih(e),i=e.origin.x,s=e.origin.x+Av(e),a=e.origin.y-r,l=e.origin.y-o+e.spacing;for(let c=1;c<t.length;c++){let d=t[c],{ascender:u,descender:p}=ih(d);i=Math.min(i,d.origin.x),s=Math.max(s,d.origin.x+Av(d)),a=Math.min(a,d.origin.y-u),l=Math.max(l,d.origin.y-p+d.spacing)}return Ze(s-i,l-a)}function F3({line:t,x:e}){if(t.runs.length===0)return 0;let r;t.runs[t.runs.length-1].text===`
`?r=t.runs.length-1:r=t.runs.length;let o=r,i=t.origin.x;for(let s=0;s<t.runs.length;s++){let a=t.runs[s],l=i,c=i+a.advance+a.kerning,d=(l+c)/2;if(e<=d){o=s;break}if(l<=e&&e<d){o=s;break}if(d<=e&&e<=c){o=Math.min(s+1,r);break}i=c}return o}function USe(t,e){let r=t.width*t.height;return Math.sqrt(e/r)}function HSe(t,e){return Math.min(e.width/t.width,e.height/t.height)}var tA={top:20,left:20,bottom:20,right:20},z0={width:480,height:360};function M3(t,e,r){let o=USe(t,z0.width*z0.height),i=t.height*o,s={width:t.width+e.left+e.right,height:t.height+e.top+e.bottom},a=HSe(s,r);return t.height*a/i}var rA=class{constructor(e,r){this.titleJson=e;this.size=r}equals(e){return this.titleJson===e.titleJson&&il(this.size,e.size)}static New(e){let r=e.gadgets.title;if(r!==void 0)return new rA(JSON.stringify(r),e.size)}},N3=class{constructor(e){this.card=e;this.updateTextFrameIfNeeded()}get(){return this.frame}updateTextFrameIfNeeded(){let e=this.card.gadgets.title;if(!e)return;let r=rA.New(this.card);if(!r||this.frame&&this.state&&this.state.equals(r))return;let o=Ro.fromTitleGadget(e),i=this.card.size,s=M3(this.card.contentSize,this.card.content.margins,i),a=sh({text:o,size:i,vertical:e.vertical,fontSizeScale:s,hAlignment:e.h_alignment,vAlignment:e.v_alignment});if(!!a)return this.frame=a,this.state=r,a}};var qY=X(Ok());function ah(t,e){return e===0&&qY.default.notify(new Error("possible zero division")),t/e}var YY=class{constructor(e,r){this.range=e,this.string=r}apply(e,r){if(e.replace({range:this.range,string:this.string}),r.length==0)return co(r)<=co(this.range)?r:oi(this.range)<=co(r)?{location:co(r)-this.range.length+this.string.length,length:0}:{location:co(this.range)+this.string.length,length:0};if(oi(this.range)<=co(r)){let o=co(r)-this.range.length+this.string.length,i=oi(r)-this.range.length+this.string.length;return Ol({begin:o,end:i})}else{if(oi(r)<=co(this.range))return r;if(co(r)<=co(this.range)&&oi(this.range)<=oi(r)){let o=co(r),i=oi(r)-this.range.length+this.string.length;return Ol({begin:o,end:i})}else if(co(this.range)<=co(r)&&co(r)<oi(this.range)&&oi(this.range)<=oi(r)){let o=co(this.range)+this.string.length,i=oi(r)-this.range.length+this.string.length;return Ol({begin:o,end:i})}else{if(co(r)<=co(this.range)&&co(this.range)<oi(r)&&oi(r)<=oi(this.range))return Ol({begin:co(r),end:co(this.range)});{let o=co(this.range)+this.string.length,i=co(this.range)+this.string.length;return Ol({begin:o,end:i})}}}}},XY=class{constructor(e,r){this.string=e,this.location=r}apply(e,r){return e.insert({string:this.string,location:this.location}),oi(r)<this.location?r:this.location<=co(r)?{location:co(r)+this.string.length,length:r.length}:{location:co(r),length:r.length+this.string.length}}},B3=class{constructor(){this.commands=[]}apply(e,r){let o=r;this.commands.reverse();for(let a of this.commands)o=a.apply(e,o);this.commands=[];let i=Math.min(Math.max(co(o),0),e.length),s=Math.min(Math.max(oi(o),0),e.length);return{string:e,selection:Ol({begin:i,end:s})}}replaceCharacters({range:e,string:r}){this.commands.push(new YY(e,r))}insert({string:e,location:r}){this.commands.push(new XY(e,r))}};var u1="\u2022";function am(t){switch(t){case"bulleted":return`${u1}	`;case"numbered":return"1.	"}}function U0(t){switch(t){case void 0:return"bulleted";case"bulleted":return"numbered";case"numbered":return}}function GSe({string:t,style:e,range:r}){let o=!1;for(let{line:i}of t.lines(r)){let s=ya({string:i,location:0});if(s!==void 0&&s.style===e){o=!0;break}}return o}function ya({string:t,location:e}){let r=oh({text:t.text,location:e});if(r===void 0)return;let o=t.substr(r),i;if(i=o.text.match(/^(\t*)([0-9]*[.]\t).*(\n|$)/)){let s={location:r.location+i.index,length:i[1].length},a={location:s.location+s.length,length:i[2].length};return{style:"numbered",indentRange:s,markerRange:a}}else if(i=o.text.match(/^(\t*)(•\t).*(\n|$)/)){let s={location:r.location+i.index,length:i[1].length},a={location:s.location+s.length,length:i[2].length};return{style:"bulleted",indentRange:s,markerRange:a}}}function L3({string:t,range:e}){for(let{line:r}of t.lines(e)){let o=ya({string:r,location:0});if(o)return o}}function p1({string:t,location:e}){let r=oh({text:t.text,location:e});if(r===void 0)return 0;let i=t.substr(r).text.match(/^(\t+).*(\n|$)/);return i==null?0:i[1].length}function O3(t,e){let r="";for(let o=0;o<e;o++)r+=t;return r}var h1=class{constructor({string:e,selectedRange:r}){this.dirty=!0;this.editor=new B3;this._string=e,this._selectedRange=r}retrieveString(){return this.clearDirty(),this._string}retrieveSelectedRange(){return this.clearDirty(),this._selectedRange}clearDirty(){!this.dirty||(this.renumberList(),this.dirty=!1)}retrieveEditorResult(){let{string:e,selection:r}=this.editor.apply(this._string,this._selectedRange);this._string=e,this._selectedRange=r}toggle({style:e,typingAttributes:r}){GSe({string:this._string,style:e,range:this._selectedRange})?this.removeList(this._selectedRange):this.addList({style:e,range:this._selectedRange,typingAttributes:r}),this.dirty=!0}setTextList({style:e,typingAttributes:r}){this.removeList(this._selectedRange),e&&this.addList({style:e,range:this._selectedRange,typingAttributes:r}),this.dirty=!0}addList({style:e,range:r,typingAttributes:o}){if(this._string.length==0)this.editor.insert({string:Zs(am(e),o),location:0});else for(let{range:i}of this._string.lines(r)){let s=ya({string:this._string,location:i.location});if(s===void 0){let a=p1({string:this._string,location:i.location}),l=i.location+a,c=this._string.attributesAt(l),d=this.compensateAttributes({existing:c,typingAttributes:o}),u=Zs(am(e),d);this.editor.insert({string:u,location:l})}else if(s.style!==e){let a=this._string.attributesAt(s.markerRange.location),l=this.compensateAttributes({existing:a,typingAttributes:o}),c=Zs(am(e),l);this.editor.replaceCharacters({range:s.markerRange,string:c})}}this.retrieveEditorResult()}removeList(e){for(let{range:r}of this._string.lines(e)){let o=ya({string:this._string,location:r.location});o!==void 0&&this.editor.replaceCharacters({range:o.markerRange,string:Zs("")})}this.retrieveEditorResult()}renumberList(){let e=new Map;for(let{range:r}of this._string.lines()){let o=p1({string:this._string,location:r.location});Array.from(e.keys()).filter(s=>s>o).forEach(s=>{e.delete(s)});let i=ya({string:this._string,location:r.location});if(i!==void 0&&i.style==="numbered"){let s=e.get(o),a;s===void 0?a=1:a=s+1;let l=this._string.attributesAt(i.markerRange.location),c=Zs(`${a}.	`,l);this.editor.replaceCharacters({range:i.markerRange,string:c}),e.set(o,a)}}this.retrieveEditorResult()}indent({delta:e,typingAttributes:r}){let o=!1;if(this._string.length===0&&e>0)o=!0,this.editor.insert({string:Zs(O3("	",e),r),location:0});else for(let{range:i}of this._string.lines(this._selectedRange)){let s=p1({string:this._string,location:i.location}),l=Math.max(0,s+e)-s;if(l>0){o=!0;let c=this._string.attributesAt(i.location+s),d=this.compensateAttributes({existing:c,typingAttributes:r}),u=Zs(O3("	",l),d);this.editor.insert({string:u,location:i.location+s})}else l<0&&(o=!0,this.editor.replaceCharacters({range:{location:i.location,length:-l},string:Zs("")}))}return this.retrieveEditorResult(),this.dirty=this.dirty||o,o}deleteListMarker(e){this.editor.replaceCharacters({range:e.markerRange,string:Zs("")}),this.retrieveEditorResult(),this.dirty=!0}replace({text:e,range:r}){this._string.replace({range:r,string:e}),this._selectedRange={location:r.location+e.length,length:0},this.dirty=!0}replaceWithNewLine({range:e,typingAttributes:r}){let o=ya({string:this._string,location:e.location});if(o===void 0)return;let i=Ol({begin:oi(e),end:this._string.length}),s=this._string.substr(i),a=ya({string:s,location:0})!==void 0,l=Math.min(Math.max(e.location-1,0),this._string.length-1),c=this._string.attributesAt(l),d=this.compensateAttributes({existing:c,typingAttributes:r});this.editor.replaceCharacters({range:e,string:Zs("")});let u=O3("	",o.indentRange.length);a?this.editor.insert({string:Zs(`
`+u,d),location:oi(e)}):this.editor.insert({string:Zs(`
`+u+am(o.style),d),location:oi(e)}),this.retrieveEditorResult(),this.dirty=!0}compensateAttributes({existing:e,typingAttributes:r}){let o=e;for(let i of r)o.findIndex((a,l)=>a.type===i.type)>=0||o.push(i);return o}};var iA=class{constructor({line:e,regularFont:r,boldFont:o}){this.firstLineHeadIndent=0;if(this.defaultTabInterval=0,this.headIndent=0,this.lineSpacing=0,this.tabStops=oA(1,12).map(u=>u*iA.kDefaultTabWidth),e.length===0)return;let i=e.attributeAt({location:0,type:"paragraph_style"});i&&(this.lineSpacing=i.value.line_spacing);let s=e.attributeAt({location:0,type:"font"});if(!s)return;let a=s.value.size,l=s.value.bold?o:r,c=1.4,d=ya({string:e,location:0});if(d===void 0){let u=p1({string:e,location:0});if(u>0){let p=l.font.getAdvanceWidth("8. ",a),h=p*c;this.headIndent=p*u,this.defaultTabInterval=h;let f=oA(1,u+1).map(m=>p*m);f.sort((m,g)=>m-g),this.tabStops=f}else return}else switch(d.style){case"numbered":{let u=l.font.getAdvanceWidth("8. ",a),p=d.indentRange.length,h=u*c;this.headIndent=h*p+u,this.defaultTabInterval=h;let f=oA(1,p+1).map(m=>h*m);f.push(this.headIndent),f.sort((m,g)=>m-g),this.tabStops=f;break}case"bulleted":{let u=l.font.getAdvanceWidth(`${u1} `,a),p=d.indentRange.length,h=u*c,f=12*a/40;this.headIndent=h*p+u+f,this.firstLineHeadIndent=f,this.defaultTabInterval=h;let m=oA(1,p+1).map(g=>h*g+f);m.push(this.headIndent),m.sort((g,v)=>g-v),this.tabStops=m;break}}}tabAdvanceAt({x:e,fontSizeScale:r}){let o=0;for(let i=0;i<this.tabStops.length;i++){let s=this.tabStops[i]*r;if(o<=e&&e<s)return s-e;o=s}return this.defaultTabInterval>0?Math.ceil(ah(e,this.defaultTabInterval*r))*this.defaultTabInterval*r-e:iA.kDefaultTabWidth*r}},nA=iA;nA.kDefaultTabWidth=28;function oA(t,e){let r=[];for(let o=t;o<e;o++)r.push(o);return r}function z3(t){let{line:e,regularFont:r,boldFont:o}=t,i={location:0,length:e.length},s;for(let a of e.attribute_ranges){if(!sm(i,a.range))continue;let l=e.attributes[a.index];if(!l||l.type!=="font")continue;let{bold:c,size:d}=l.value,u=c?o:r,p=1/(u.font.unitsPerEm||1e3)*d,h=(u.font.ascender||1e3)*p,f=(u.font.descender||0)*p,m=h-f;s===void 0?s=m:s=Math.max(s,m)}return s}var SX=X(bX());var xX=X(CX()),cA;function uxe(){return cA||(cA=Dr.create().getContext2dForce(),cA)}var Y3=class{constructor({line:e,regularFont:r,boldFont:o,lookupGlyph:i,fontSizeScale:s}){this.line=e;let a=[...d1(e.text)];this.fontSizeScale=s,this.style=new nA({line:e,regularFont:r,boldFont:o}),this.chars=a,this.cursor=0,this.regularFont=r,this.boldFont=o,this.lookupGlyph=i,this.i=0;let l=new SX.LineBreaker(e.text);this.lineBreaker=l,this.nextBreak=l.nextBreak()}createTextLine(){return{runs:[],spacing:this.style.lineSpacing*this.fontSizeScale}}nextRun(e){if(this.chars.length<=this.i)return;let r=this.cursor,o=this.i,i=o,s=[];s.push(this.chars[o]),this.cursor+=this.chars[o].length;let a=this.cursor,l=this.nextBreak==null?this.line.length:this.nextBreak.position;for(let p=o+1;p<this.chars.length&&a<l;p++){let h=this.chars[p];a+=h.length,i=p,s.push(h)}this.cursor=a,this.i=i+1,this.nextBreak=this.lineBreaker.nextBreak();let c=(0,xX.default)(),d={runs:[]},u=r;for(let p of s){let h=u;u+=p.length;let f=this.line.attributeAt({location:h,type:"font"});if(f===void 0)continue;let m=f.value.size*this.fontSizeScale,g=f.value.bold?this.boldFont:this.regularFont,v=g.font.names.postScriptName.en,y=1/(g.font.unitsPerEm||1e3)*m,S=(g.font.ascender||1e3)*y,C=(g.font.descender||0)*y,b=J_(this.line.attributeAt({location:h,type:"foreground_color"}));if(p==="	"){let x=this.style.tabAdvanceAt({x:e,fontSizeScale:this.fontSizeScale}),w={text:p,graphemes:[{grapheme:p,advance:x}],shouldUseGlyph:!1,advance:x,kerning:0,rotate:!1,rgbaHex:b,fontSize:m,fontFamily:v,bold:!1,ascender:S,descender:C,bitmap:!1};this.prevGlyph=void 0,d.runs.push(w),e+=x}else if(p===`
`){let x={text:p,graphemes:[{grapheme:p,advance:0}],shouldUseGlyph:!1,advance:0,kerning:0,rotate:!1,rgbaHex:b,fontSize:m,fontFamily:v,bold:!1,ascender:S,descender:C,bitmap:!1};this.prevGlyph=void 0,d.runs.push(x)}else if(c.test(p)){let x={text:p,graphemes:[{grapheme:p,advance:m}],shouldUseGlyph:!1,advance:m,kerning:0,rotate:!0,rgbaHex:"#000000ff",fontSize:m,fontFamily:v,bold:!1,ascender:S,descender:C,bitmap:!0};this.prevGlyph=void 0,d.runs.push(x),e+=x.advance}else{let{glyph:x,rotate:w,substituted:k}=this.lookupGlyph(p,g),T,A;if(x.name==="gid0"){let F=uxe();if(F){let z=ht(Math.round(m),40,A3),L=ah(m,z);F.font=`${z}px '${g.family}'`,T=F.measureText(p).width*L}else T=x.advanceWidth*y;A=0}else T=x.advanceWidth*y,A=pxe({prevGlyph:this.prevGlyph,glyph:x,font:g})*y;let E={text:p,graphemes:[{grapheme:p,glyphs:{main:g.font.charToGlyph(p),sub:k},advance:T}],shouldUseGlyph:k!=null,advance:T,kerning:A,rotate:w,rgbaHex:b,fontSize:m,fontFamily:v,bold:f.value.bold,ascender:S,descender:C,bitmap:!1};d.runs.push(E),this.prevGlyph=x,e+=T+A}}return d}firstLineHeadIndent(){return this.makeLeadingIndent(this.style.firstLineHeadIndent)}headIndent(){return this.makeLeadingIndent(this.style.headIndent)}makeLeadingIndent(e){if(e<=0)return;let r=ht(this.cursor,0,this.line.length-1),o=this.line.attributeAt({location:r,type:"font"});if(!o)return;let i=o.value.size*this.fontSizeScale,s=o.value.bold?this.boldFont:this.regularFont,a=1/(s.font.unitsPerEm||1e3)*i,l=(s.font.ascender||1e3)*a,c=(s.font.descender||0)*a,d=e*this.fontSizeScale;return{text:"",graphemes:[{grapheme:"",advance:d}],shouldUseGlyph:!1,advance:d,kerning:0,rotate:!1,rgbaHex:"#000000ff",fontSize:i,fontFamily:s.family,bold:o.value.bold,ascender:l,descender:c,bitmap:!1,headIndent:!0}}};function pxe({prevGlyph:t,glyph:e,font:r}){return t?r.font.getKerningValue(t,e):0}var Rv=class{constructor({lines:e,scale:r,size:o,justFit:i,suggestedScale:s}){this.lines=e,this.scale=r,this.size=o,this.justFit=i,this.suggestedScale=s}},lm=class{constructor(e){this.scale=e}},dA=class{constructor({size:e,vertical:r,edgeInsets:o}){this.size=e,this.vertical=r,this.edgeInsets=o}measure(e,r){let{vertical:o,edgeInsets:i}=this;if(!bp(r))return;let s=this.constraintSize(r);if(!bp(s.width)||!bp(s.height))return new lm(r);let{lines:a,suggestedSize:l,fitRange:c}=wX(e,s);if(c.length!==e.text.length)return new lm(r);let d=Math.max(s.width,s.height),u=2e3/d;if(Math.abs(s.width-l.width)*u>=1&&s.width<l.width)return new lm(r);let f=Math.abs(s.height-l.height)*u<1;if(!f&&s.height<l.height)return new lm(r);let m=mN(l,i),g=this.suggestedScale({scale:r,suggestedSizeWithInsets:m,justFit:f});o&&(m=Eg(m));let v=Xt(m,r);return new Rv({lines:a,scale:r,size:v,justFit:f,suggestedScale:g})}suggestedScale(e){let{scale:r,suggestedSizeWithInsets:o,justFit:i}=e;if(!bp(o.height))return;let s=this.layoutSize,a=s.height/o.height,l=bp(o.width)?s.width/o.width:void 0;if(l!==void 0&&l<a)return r===l?void 0:{scale:l,type:"forAdjustment"};if(r!==a)return i?{scale:a,type:"forAdjustment"}:{scale:a,type:"probablyFix"}}layout(e){let r=this.layoutWithoutAlignment(e);return r?this.applyAlignment(r,e):{lines:[],scale:1}}layoutWithoutAlignment(e){var a;let r=this.maxScale,o=this.measure(e,r),i;if(o instanceof Rv)return o;if(o instanceof lm)i=o;else return;let s=this.estimateMinScale(e);if(!!s){if(s.justFit)return s;for(;;){let l=(i.scale+s.scale)*.5,c=this.measure(e,l);if(c instanceof Rv){if(c.justFit)return this.adjustLayoutResult(e,c);if(s=c,((a=c.suggestedScale)==null?void 0:a.type)==="probablyFix"&&s.scale<c.suggestedScale.scale&&c.suggestedScale.scale<i.scale){let u=this.measure(e,c.suggestedScale.scale);if(u instanceof Rv){if(u.justFit)return u;s=u}else u instanceof lm&&(i=u)}}else if(c instanceof lm)i=c;else return;if(Math.abs(i.scale-s.scale)/s.scale<=dA.kTargetRelativeDifference)break}return this.adjustLayoutResult(e,s)}}applyAlignment(e,r){let{hAlignment:o,vAlignment:i}=r,{scale:s}=e,{xAlignment:a}=hxe({hAlignment:o,vAlignment:i,vertical:this.vertical}),l=this.constraintSize(s),c=0;return{lines:e.lines.map(u=>{let{ascender:p,descender:h}=ih(u),f=Av(u),m=(()=>a==="negative"?0:a==="positive"?l.width-f:l.width/2-f/2)(),g=Re(m,c+p);return c+=p-h+u.spacing,R3({line:u,origin:g,ascender:p,descender:h})}),scale:s}}estimateMinScale(e){let r=Ze(Number.MAX_VALUE,Number.MAX_VALUE),{lines:o,suggestedSize:i,fitRange:s}=wX(e,r);if(e.text.length!==s.length)return;let{vertical:a,edgeInsets:l,layoutSize:c}=this,d=mN(i,l);if(!bp(d.height))return;let u=!1,p=c.height/d.height,h=bp(d.width)?c.width/d.width:void 0;if(h!==void 0&&h<p?p=h:u=!0,!bp(p))return;a&&(d=Eg(d));let f=Xt(d,p);return new Rv({lines:o,scale:p,size:f,justFit:u,suggestedScale:void 0})}adjustLayoutResult(e,r){if(r.suggestedScale&&r.suggestedScale.type=="forAdjustment"){let o=this.measure(e,r.suggestedScale.scale);if(o instanceof Rv)return o}return r}get layoutSize(){let{size:e,vertical:r}=this;return r?Eg(e):Ze(e)}get maxScale(){let{size:e,edgeInsets:r}=this,o=1,i=r.left+r.right;i>0&&(o=Math.min(o,e.width/i));let s=r.top+r.bottom;return s>0&&(o=Math.min(o,e.height/s)),o}constraintSize(e){let{size:r,edgeInsets:o,vertical:i}=this,{top:s,right:a,bottom:l,left:c}=o,d=ah(r.width,e)-c-a,u=ah(r.height,e)-s-l,p=Ze(d,u);return i?Eg(p):p}},v1=dA;v1.kSignificantDigits=3,v1.kTargetRelativeDifference=Math.pow(10,-dA.kSignificantDigits);function hxe({hAlignment:t,vAlignment:e,vertical:r}){let o,i;return r?(e==="top"?o="negative":e==="bottom"?o="positive":o="center",t==="left"?i="positive":t==="right"?i="negative":i="center"):(t==="left"?o="negative":t==="right"?o="positive":o="center",e==="top"?i="negative":e==="bottom"?i="positive":i="center"),{xAlignment:o,yAlignment:i}}function fxe({startIndex:t,runs:e,offset:r,width:o}){if(e.length===0)return{index:0,advance:0};let i=e[t].advance+e[t].kerning,s=t+1;for(;s<e.length;s++){let{advance:a,kerning:l}=e[s],c=i+a+l;if(r+c>o)break;i=c}return{index:s,advance:i}}function wX(t,e){let{text:r,lookupGlyph:o,regularFont:i,boldFont:s,fontSizeScale:a}=t,l=e.width,c=e.height,d=[],u=0;for(let{line:v}of r.lines()){let y=new Y3({line:v,fontSizeScale:a,regularFont:i,boldFont:s,lookupGlyph:o}),S=y.createTextLine(),C,b=!0,x=0,w=y.firstLineHeadIndent();for(w&&(S.runs.push(w),x=w.advance);(C=y.nextRun(x))&&u<c;){let k=C.runs.reduce((A,E)=>A+E.advance+E.kerning,0);if(l>=x+k){x+=k,S.runs.push(...C.runs),b=!1;continue}let T=0;for(;T<C.runs.length;){if(S.runs.length>0){let{ascender:F,descender:z}=ih(S);if(u+=S.spacing+F-z,u<=c&&d.push(S),u>=c)break}if(C.runs[T].kerning=0,S=y.createTextLine(),b)x=0;else{let F=y.headIndent();F===void 0?x=0:(S.runs.push(F),x=F.advance)}let{index:A,advance:E}=fxe({startIndex:T,runs:C.runs,offset:x,width:l});for(let F=T;F<A;F++)S.runs.push(C.runs[F]);T=A,x+=E,b=!1}}if(u>=c)break;if(S.runs.length>0){let{ascender:k,descender:T}=ih(S);if(u+=k-T+S.spacing,u<=c&&d.push(S),u>=c)break}}if(u<c&&r.length>0&&r.text[r.length-1]===`
`){let v=r.substr({location:r.length-1,length:1}),y=J_(v.attributeAt({location:0,type:"foreground_color"})),S=v.attributeAt({location:0,type:"font"});if(S){let C=S.value.bold,b=C?s:i,x=S.value.size*a,w=S.value.bold?s:i,k=1/(w.font.unitsPerEm||1e3)*x,T=(w.font.ascender||1e3)*k,A=(w.font.descender||0)*k,F={runs:[{text:"",graphemes:[{grapheme:"",advance:0}],shouldUseGlyph:!1,rotate:!1,ascender:T,descender:A,fontSize:x,fontFamily:b.family,advance:0,kerning:0,rgbaHex:y,bold:C,bitmap:!1}],spacing:0};d.push(F)}}let p=0;d.length>0&&(d[d.length-1].spacing=0);let h=0,f=d.map(v=>{let{ascender:y,descender:S}=ih(v);h=Math.max(h,Av(v));let C=Re(0,p+y);return p+=y-S+v.spacing,R3({line:v,origin:C,ascender:y,descender:S})}),m=p,g=f.reduce((v,y)=>v+eA(y),0);return{lines:f,suggestedSize:{width:h,height:m},fitRange:{location:0,length:g}}}var mxe=(t,e)=>{let r=e.font.charToGlyph(t);return r?{glyph:r,rotate:!1}:{glyph:e.font.charToGlyph("\u25A1"),rotate:!1}},gxe="\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3046\u3091\u3092\u3093\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30A6\u30F1\u30F2\u30F3\u3094\u304C\u304E\u3050\u3052\u3054\u3056\u3058\u305A\u305C\u305E\u3060\u3062\u3065\u3067\u3069\u3070\u3073\u3076\u3079\u307C\u30F4\u30AC\u30AE\u30B0\u30B2\u30B4\u30B6\u30B8\u30BA\u30BC\u30BE\u30C0\u30C2\u30C5\u30C7\u30C9\u30D0\u30D3\u30D6\u30D9\u30DC\u30F7\u30F8\u30F9\u30FA\u3071\u3074\u3077\u307A\u307D\u30D1\u30D4\u30D7\u30DA\u30DD",vxe=(t,e)=>{let r=e.font.charToGlyphIndex(t),o=e.font.glyphs.get(r);if(!o)return{glyph:e.font.charToGlyph("\u25A1"),rotate:!1};let i=yxe(t);if(e.family.startsWith("loilo-NotoSans")&&gxe.includes(t))return{glyph:o,rotate:i};let s=e.vertGsubMap[r];if(s!==void 0){let a=e.font.glyphs.get(s);return{glyph:o,substituted:a,rotate:i}}else return{glyph:o,rotate:i}},b1=class{constructor({text:e,size:r,vertical:o,regularFont:i,boldFont:s,fontSizeScale:a,hAlignment:l,vAlignment:c,edgeInsets:d}){this.lines=[];this.text=e,this.size=r,this.vertical=o,this.hAlignment=l,this.vAlignment=c,this.edgeInsets=d;let u=new v1({size:r,edgeInsets:d,vertical:o}),p={text:e,lookupGlyph:o?vxe:mxe,regularFont:i,boldFont:s,fontSizeScale:a,hAlignment:l,vAlignment:c},h=u.layout(p),{lines:f,scale:m}=h;this.lines=f,this.shrinkScale=m;let{width:g,height:v}=KY(this.lines),y=Ze(g*m,v*m);this.boundingBoxSize=this.vertical?Eg(y):y,this.textIndexLut=[];let S=0;for(let C=0;C<this.lines.length;C++){let b=this.lines[C];this.textIndexLut.push(S);for(let x of b.runs)S+=x.text.length}this.textIndexLut.push(S)}get modelToViewTransform(){let e=new ft,r=this.shrinkScale,o=Xt(this.size,pc(1,r,0)),i=Xt(this.boundingBoxSize,pc(1,r,0)),s=this.edgeInsets,a,l;return this.vertical?(a=s.top,this.hAlignment==="right"?l=s.right:this.hAlignment==="center"?l=o.width/2-i.width/2:l=o.width-i.width-s.left):(a=s.left,this.vAlignment==="top"?l=s.top:this.vAlignment==="middle"?l=o.height/2-i.height/2:l=o.height-i.height-s.bottom),e.translate(a,l),e.scale(r,r),this.vertical&&(e.translate(-this.size.height*.5,-this.size.width*.5),e.rotate(Math.PI/2),e.translate(this.size.width*.5,this.size.height*.5)),e}draw(e,r={}){let{selectedRange:o,compositionRange:i,onlyLackingGlyphs:s}=r;e.save(),e.beginPath(),e.textAlign="start",e.textBaseline="alphabetic";let a=this.modelToViewTransform;e.transform(a.a,a.b,a.c,a.d,a.e,a.f);for(let l=0;l<this.lines.length;l++){let c=this.lines[l],d=this.textIndexLut[l];bxe({ctx:e,line:c,vertical:this.vertical,onlyLackingGlyphs:s===!0}),o&&kX({ctx:e,line:c,location:d,range:o}),i&&kX({ctx:e,line:c,location:d,range:i})}e.restore()}hasLackingGlyphs(){for(let e of this.lines)for(let r of e.runs)if(I3(r))return!0;return!1}cursorAt(e){let r=-1;if(e.location<0?r=0:this.text.length<=e.location?r=this.lines.length-1:r=this.textIndexLut.findIndex(c=>c>e.location)-1,r<0||this.lines.length<=r)return;e.affinity==="backward"&&r>0&&this.textIndexLut[r]===e.location&&!jY(this.lines[r-1],`
`)&&r--;let o=this.lines[r];if(o.runs.length===0)return;let i=this.textIndexLut[r],s=o.runs[0],a=o.origin.x;for(let c of o.runs){let d=i+c.text.length;if(i<=e.location&&e.location<d)break;s=c,i=d,a+=c.advance+c.kerning}if(!s)return;let l=this.modelToViewTransform;if(this.vertical){let c=o.origin.y,d=l.applied(Re(a,c));return nt(d.x+o.descender*this.shrinkScale,d.y,(o.ascender-o.descender)*this.shrinkScale,0)}else{let c=o.origin.y-o.ascender,d=l.applied(Re(a,c));return nt(d.x,d.y,0,(o.ascender-o.descender)*this.shrinkScale)}}position({from:e,direction:r,offset:o}){let i=0,s=0;if(this.vertical?r==="left"?s=o:r==="right"?s=-o:r==="up"?i=-o:i=o:r==="left"?i=-o:r==="right"?i=o:r==="up"?s=-o:s=o,i!=0){let a=this.text.advance({location:e,byComposedCharacterOffset:i});return a===void 0&&(a=e+i),hn(a,i>0?"backward":"forward")}else{let a=-1;e<0?a=0:this.text.length<=e?a=this.lines.length-1:a=this.textIndexLut.findIndex(m=>m>e)-1,a=Math.min(Math.max(a,0),this.lines.length-1);let l=this.lines[a],c=a+s;if(c<0)return hn(0);if(this.lines.length<=c)return hn(this.text.length);let d=this.lines[c],u=this.textIndexLut[a],p=l.origin.x;for(let m=0;m<l.runs.length;m++){let g=l.runs[m];if(u<=e&&e<u+g.text.length)break;p+=g.advance+g.kerning,u+=g.text.length}let h=F3({line:d,x:p}),f=this.textIndexLut[c];for(let m=0;m<h;m++)f+=d.runs[m].text.length;return hn(f,h===d.runs.length?"backward":"forward")}}closestPosition(e){if(this.lines.length===0)return{location:0,affinity:"forward"};let o=this.modelToViewTransform.invert().applied(e),i=this.lines.length-1;for(let c=0;c<this.lines.length;c++){let d=this.lines[c],u=d.origin.y-d.ascender,p=d.origin.y-d.descender+d.spacing;if(o.y<u){i=Math.max(c-1,0);break}else if(o.y<p){i=c;break}}let s=this.lines[i],a=this.textIndexLut[i];if(s.runs.length===0)return{location:a,affinity:"forward"};let l=F3({line:s,x:o.x});for(let c=0;c<l;c++)a+=s.runs[c].text.length;return{location:a,affinity:l===s.runs.length?"backward":"forward"}}hitTest(e){let o=this.modelToViewTransform.invert().applied(e);for(let i of this.lines){let{ascender:s,descender:a}=ih(i),l=0,c=0;i.runs.length>0&&(l=i.runs[0].fontSize/2,c=i.runs[i.runs.length-1].fontSize/2);let d=Av(i),u=nt(i.origin.x-l,i.origin.y-s,d+l+c,s-a+i.spacing);if(Si(u,o))return!0}return!1}textRects(e){let r=[];for(let o=0;o<this.lines.length;o++){let i=this.textIndexLut[o],s;o===this.lines.length-1?s=this.text.length+1:s=this.textIndexLut[o+1];let a=sm(e,{location:i,length:s-i});if(!a||a.length<1)continue;let l=this.cursorAt({location:a.location,affinity:"forward"}),c=this.cursorAt({location:a.location+a.length,affinity:"forward"});if(!l||!c)continue;let d=Math.min(l.x,c.x),u=Math.max(l.x+l.width,c.x+c.width),p=Math.min(l.y,c.y),h=Math.max(l.y+l.height,c.y+c.height);r.push(nt(d,p,u-d,h-p))}return r}};function sh({text:t,size:e,vertical:r,fontSizeScale:o,hAlignment:i,vAlignment:s,baseEdgeInsets:a=tA}){let l=Vt.regularFont.getOrFetch(),c=Vt.boldFont.getOrFetch();if(!(!l||!c))return new b1({text:t,size:e,vertical:r,regularFont:l,boldFont:c,hAlignment:i,vAlignment:s,fontSizeScale:o,edgeInsets:P_(a,o)})}function*DX(t){let e=0,r=0;for(let o of t.runs)yield{run:o,dx:r,location:e},r+=o.advance+o.kerning,e+=o.text.length}function bxe({ctx:t,line:e,vertical:r,onlyLackingGlyphs:o}){let i,s=a=>{let l=!0;o&&(l=I3(a.run)),l&&WY({run:a.run,ofLine:e,ctx:t,vertical:r,dx:a.dx})};for(let{run:a,dx:l}of DX(e))if(i){let c=Z_({run:i.run,next:a,vertical:r,onlyLackingGlyphs:o});c?i={run:c,dx:i.dx}:(s(i),i={run:a,dx:l})}else i={run:a,dx:l};i&&s(i)}function kX({ctx:t,line:e,location:r,range:o,fillStyle:i="rgba(2, 112, 234, 0.2)"}){let s,a,l={location:r,length:eA(e)},c=sm(c1(o),l);if(c&&c.length>0)s=c.location-l.location,a=s+c.length;else return;let d=e.origin,u=e.ascender-e.descender,p,h;for(let{run:f,dx:m,location:g}of DX(e))s===g?p=d.x+m:a===g&&(h=d.x+m),m+=f.advance+f.kerning,g+=f.text.length,s===g?p=d.x+m:a===g&&(h=d.x+m);p===void 0||h===void 0||(t.save(),t.fillStyle=i,t.fillRect(p,d.y-e.ascender,h-p,u),t.restore())}function hn(t,e="forward"){return{location:t,affinity:e}}function X3(t,e){return t.location===e.location&&t.affinity===e.affinity}function yxe(t){return Cxe.has((0,TX.obtainUnicode)(t)[0])}var Cxe=function(){let t=[],e=[];t.push(...Gr(4352,256)),t.push(...Gr(9312,160)),t.push(...Gr(9728,256)),t.push(...Gr(9984,192)),t.push(...Gr(11904,128)),t.push(...Gr(12032,224)),t.push(...Gr(12272,16)),t.push(...Gr(12288,64)),e.push(...Gr(12296,10)),e.push(...Gr(12308,12)),t.push(...Gr(12352,96)),t.push(...Gr(12448,96)),t.push(...Gr(12544,48)),t.push(...Gr(12592,96)),t.push(...Gr(12688,16)),t.push(...Gr(12704,32)),t.push(...Gr(12736,48)),t.push(...Gr(12784,16)),t.push(...Gr(12800,256)),t.push(...Gr(13056,256)),t.push(...Gr(13312,2582)),t.push(...Gr(19968,20941)),t.push(...Gr(44032,11172)),t.push(...Gr(55216,80)),t.push("\uF8FF".charCodeAt(0)),t.push(...Gr(63744,512)),t.push(...Gr(65040,16)),t.push(...Gr(65280,240)),e.push(...Gr(65377,127)),t.push(...Gr(127488,256)),t.push(...Gr(127744,768)),t.push(...Gr(128512,80)),t.push(...Gr(128640,128)),t.push(...Gr(12540,1)),t.push(...Gr(65392,1));let r=new Set(t);return e.forEach(o=>{r.delete(o)}),r}();var Q3=class{constructor(e){this.dest=e;this.offset=0}write(e){if(typeof e=="string"){let r=eO(e+`
`);this.dest.write(r),this.offset+=r.byteLength}else if(e instanceof ArrayBuffer){let r=new Uint8Array(e);this.dest.write(r),this.offset+=r.byteLength}else this.dest.write(e),this.offset+=e.byteLength}};function Fv(t){let e;if(typeof t=="boolean")e=`${t}`;else if(typeof t=="string")e=`${Z3(t)}`;else if(t===null)e="null";else if(typeof t=="number")e=J3(t);else if(t instanceof Yn)e=`${t.toString()}`;else if(t instanceof C1||t instanceof S1)e=`${t.id} ${t.generation} R`;else if(t instanceof Uint8Array)e=wxe(t);else if(t instanceof ArrayBuffer){let r=new DataView(t),o=[];for(let i=0;i<t.byteLength;i++){let s=r.getUint8(i);o.push(s.toString(16))}e=`<${o.join("")}>`}else if(t instanceof Date){let r=`0000${t.getUTCFullYear()}`.slice(-4),o=`00${t.getUTCMonth()+1}`.slice(-2),i=`00${t.getUTCDate()}`.slice(-2),s=`00${t.getUTCHours()}`.slice(-2),a=`00${t.getUTCMinutes()}`.slice(-2),l=`00${t.getUTCSeconds()}`.slice(-2);e=`(D:${r}${o}${i}${s}${a}${l}+00'00')`}else typeof t=="object"&&t.constructor===Object?e=y1(t):Array.isArray(t)&&(e=`[${t.map(Fv).join(" ")}]`);return e}function J3(t){if(t>-1e21&&t<1e21)return String(Math.round(t*1e6)/1e6);throw new Error(`unsupported number: ${t}`)}var Sxe=/[\n\r\t\b\f()\\]/g,xxe=new Map([[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\b","\\b"],["\f","\\f"],["\\","\\\\"],["(","\\("],[")","\\)"]]);function wxe(t){let e=[];for(let r=0;r<t.byteLength;r++){let o=t[r];e.push(o.toString(16))}return`<${e.join("")}>`}function Z3(t){return`(${t.replace(Sxe,r=>{var o;return(o=xxe.get(r))!=null?o:""})})`}function y1(t){let e="";e+=`<<
`;for(let r in t){if(!t.hasOwnProperty(r))continue;let o=Fv(new Yn(r)),i=Fv(t[r]);o!=null&&i!=null&&(e+=o,e+=" ",e+=i,e+=`
`)}return e+=">>",e}function eO(t){return new TextEncoder().encode(t)}var tO=class{constructor(e,r=0){this.id=e;this.generation=r}},C1=class extends tO{constructor({id:e,data:r}){super(e);this.data=r}visit(e){let r=Fv(this.data);$e(r!=null),e.write(`${this.id} ${this.generation} obj`),e.write(r),e.write("endobj")}},rO=class{constructor(){this.offsets=[[0,65535,"f"]]}add(e,r,o){this.offsets.push([e,r,o])}size(){return this.offsets.length}visit(e){e.write("xref"),e.write(`0 ${this.offsets.length}`);for(let[r,o,i]of this.offsets){let s=`0000000000${r}`.slice(-10),a=`00000${o}`.slice(-5);e.write(`${s} ${a} ${i} `)}}};function G0(t){return typeof t=="string"?{encode:()=>eO(t)}:t instanceof Uint8Array?{encode:()=>t}:{encode:()=>new Uint8Array(t)}}var S1=class extends tO{constructor({id:e,data:r,content:o}){super(e);this.data=r,this.content=o}visit(e){var o;let r=this.content.encode();e.write(`${this.id} 0 obj`),e.write(y1({Length:r.byteLength,...(o=this.data)!=null?o:{}})),e.write("stream"),e.write(r),e.write("endstream"),e.write("endobj")}},Yn=class{constructor(e){this.name=e}toString(){return"/"+this.name}};function PX({glyphIdToCodePoints:t}){let e=[],r=[],o=a=>{let l=`${a.toString(16)}`.toUpperCase();return l.length<4&&(l=`0000${l}`.slice(-4)),l.length%2==1?"0"+l:l},i=function*(a){a>65535&&(a-=65536,yield o(a>>>10&1023|55296),a=56320|a&1023),yield o(a)},s=()=>{e.length!==0&&(r.push([`${e.length} beginbfchar`,e.join(`
`),"endbfchar"].join(`
`)),e=[])};for(let[a,l]of t){let c=[];for(let p of l)c.push(...i(p));let d=`<${o(a)}>`,u=`<${c.join(" ")}>`;e.push(`${d} ${u}`),e.length===100&&s()}return s(),`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000> <FFFF>
endcodespacerange
${r.join(`
`)}
endcmap
CMapName currentdict /CMap defineresource pop
end
end
`}var x1=class{constructor(e){this.prefix=e;this.ids=0}next(){return`${this.prefix}${this.ids++}`}};var nO=2*Math.PI,EX=.5*Math.PI,oO=4*((Math.sqrt(2)-1)/3),w1=class{constructor(e){this.doc=e;this.commands=[];this.saveRestoreCount=0;this.opacity0=e.addGraphicState({ca:0}),this.opacity1=e.addGraphicState({ca:1})}save(){this.commands.push("q"),this.saveRestoreCount++}restore(){this.commands.push("Q"),this.saveRestoreCount--}translate(e,r){this.commands.push([1,0,0,1,e,r,"cm"])}scale(e,r){this.commands.push([e,0,0,r,0,0,"cm"])}rotate(e){let r=Math.cos(e),o=Math.sin(e);this.commands.push([r,o,-o,r,0,0,"cm"])}transform(e,r,o,i,s,a){this.commands.push([e,r,o,i,s,a,"cm"])}fillColor(e,r,o){e=Math.max(0,Math.min(1,e)),r=Math.max(0,Math.min(1,r)),o=Math.max(0,Math.min(1,o)),this.commands.push([e,r,o,"rg"])}getGSForOpacity(e){return e===0?this.opacity0:e===1?this.opacity1:this.doc.addGraphicState({ca:e})}fillOpacity(e){this.commands.push([`/${this.getGSForOpacity(e)}`,"gs"])}strokeColor(e,r,o){e=Math.max(0,Math.min(1,e)),r=Math.max(0,Math.min(1,r)),o=Math.max(0,Math.min(1,o)),this.commands.push([e,r,o,"RG"])}strokeOpacity(e){this.commands.push([`/${this.getGSForOpacity(e)}`,"GS"])}setLineDash(e,r=0){var i;let o=(i=Fv(e))!=null?i:[];this.commands.push([o,r,"d"])}lineWidth(e){this.commands.push([e,"w"])}lineJoin(e){this.commands.push([e,"j"])}lineCap(e){this.commands.push([e,"J"])}moveTo(e,r){this.commands.push([e,r,"m"])}lineTo(e,r){this.commands.push([e,r,"l"])}arc(e,r,o,i,s,a=!1){let l=s-i;Math.abs(l)>nO?l=nO:l!==0&&a!==l<0&&(l=(a?-1:1)*nO+l);let c=Math.ceil(Math.abs(l)/EX),d=l/c,u=d/EX*oO*o,p=i,h=-Math.sin(p)*u,f=Math.cos(p)*u,m=e+Math.cos(p)*o,g=r+Math.sin(p)*o;this.moveTo(m,g);for(let v=0;v<c;v++){let y=m+h,S=g+f;p+=d,m=e+Math.cos(p)*o,g=r+Math.sin(p)*o,h=-Math.sin(p)*u,f=Math.cos(p)*u;let C=m-h,b=g-f;this.bezierCurveTo(y,S,C,b,m,g)}}bezierCurveTo(e,r,o,i,s,a){this.commands.push([e,r,o,i,s,a,"c"])}quadraticCurveTo(e,r,o,i){this.commands.push([e,r,o,i,"v"])}closePath(){this.commands.push("h")}endPath(){this.commands.push("n")}ellipse(e,r,o,i=o){e-=o,r-=i;let s=o*oO,a=i*oO,l=e+o*2,c=r+i*2,d=e+o,u=r+i;this.moveTo(e,u),this.bezierCurveTo(e,u-a,d-s,r,d,r),this.bezierCurveTo(d+s,r,l,u-a,l,u),this.bezierCurveTo(l,u+a,d+s,c,d,c),this.bezierCurveTo(d-s,c,e,u+a,e,u),this.closePath()}rect(e,r,o,i){this.commands.push([e,r,o,i,"re"])}fillRect(e,r,o,i){this.rect(e,r,o,i),this.fill()}strokeRect(e,r,o,i){this.rect(e,r,o,i),this.stroke()}fill(e=!1){let r=e?"f*":"f";this.commands.push(r)}fillAndStroke(e=!1){let r=e?"B*":"B";this.commands.push(r)}stroke(){this.commands.push("S")}closeAndStroke(){this.commands.push("s")}clip(e=!1){let r=e?"W*":"W";this.commands.push(r)}do(e){let r=this.doc.xObjectNameMap.get(e);if(r==null)throw new Error(`'${e}' not found in XObjects`);this.commands.push([`/${r}`,"Do"])}doLiterally(e){this.commands.push([`/${e}`,"Do"])}font(e,r){let o=this.doc.fontNameMap.get(e);if(!o)throw new Error(`font '${e}' not defined`);this.commands.push([`/${o}`,r,"Tf"])}textCharSpace(e){this.commands.push([e,"Tc"])}textWordSpace(e){this.commands.push([e,"Tw"])}textScale(e){this.commands.push([e,"Th"])}textLeading(e){this.commands.push([e,"Tl"])}textRenderMode(e){this.commands.push([e,"Tr"])}textRise(e){this.commands.push([e,"Ts"])}textMove(e,r){this.commands.push([e,r,"Td"])}textNextLine(){this.commands.push("T*")}textTransform(e,r,o,i,s,a){this.commands.push([e,r,o,i,s,a,"Tm"])}text(e){if(typeof e=="string")this.commands.push(["BT",Z3(e),"Tj","ET"]);else{let r=[];for(let o of e){let i=`0000${o.toString(16).toUpperCase()}`.slice(-4);r.push(i)}this.commands.push(["BT",`<${r.join("")}>`,"Tj","ET"])}}encode(){this.saveRestoreCount!==0&&console.warn("save/restore count mismatch: "+this.saveRestoreCount);let e=this.commands.map(_X).join(`
`);return new TextEncoder().encode(e)}};function _X(t){return typeof t=="number"?""+J3(t):typeof t=="string"?t:t.map(_X).join(" ")}function AX(t){switch(t){case"miter":return 0;case"round":return 1;case"bevel":return 2}}function IX(t){switch(t){case"butt":return 0;case"round":return 1;case"square":return 2}}var cm=Ze(612,792),RX=144/72,iO=class{constructor({dest:e,size:r=cm,creationDate:o=new Date}){this.version="1.5";this.refId=1;this.refs=[];this.fontNameMap=new Map;this.xObjectNameMap=new Map;this.fontIds=new x1("C");this.imageIds=new x1("I");this.gsIds=new x1("gs");this.dest=e,this.writer=new Q3(e),this.writer.write("%PDF-"+this.version),this.writer.write("%\xFF\xFF\xFF\xFF"),this.info=this.ref({Creator:"LoiLo Inc",Producer:"LoiLo Note School (Web)",CreationDate:o}),this.pages=this.ref({Type:new Yn("Pages"),Kids:[],Count:0}),this.root=this.ref({Type:new Yn("Catalog"),Pages:this.pages}),this.resources=this.ref({ProcSet:[new Yn("PDF"),new Yn("Text"),new Yn("ImageB"),new Yn("ImageC"),new Yn("ImageI")],Font:{},XObject:{},ExtGState:{}}),this.currentPage=this.addPage({size:r})}end(){let e=new rO;for(let o of this.refs)e.add(this.writer.offset,o.generation,"n"),o.visit(this.writer);let r=this.writer.offset;e.visit(this.writer),this.writer.write("trailer"),this.writer.write(y1({Root:this.root,Info:this.info,Size:e.size(),ID:["aaa","bbb"]})),this.writer.write("startxref"),this.writer.write(`${r}`),this.writer.write("%%EOF")}ref(e){let r=new C1({id:this.refId++,data:e});return this.refs.push(r),r}stream(e,r){let o=new S1({id:this.refId++,content:e,data:r});return this.refs.push(o),o}registerFont(e){this.fontNameMap.set(e,this.fontIds.next())}addFont({font:e,fontName:r}){var i;let o=(i=this.fontNameMap.get(r))!=null?i:this.fontIds.next();this.resources.data.Font[o]=e,this.fontNameMap.set(r,o)}addCIDFont({fontName:e,fontData:r,info:o,isCFF:i,glyphIdToCodePoints:s}){let a=this.stream(G0(r),{Subtype:i?new Yn("CIDFontType0C"):void 0}),l=i?this.ref({...o,FontFile3:a}):this.ref({...o,FontFile2:a}),c=this.ref({Supplement:0,Registry:"Adobe",Ordering:"Identity"}),d=PX({glyphIdToCodePoints:s}),u=this.stream(G0(d),{Type:new Yn("CMap"),CMapName:new Yn("Adobe-Identity-0"),CIDSystemInfo:c,WMode:0}),p=this.ref({Type:new Yn("Font"),BaseFont:new Yn(e),Subtype:new Yn(i?"CIDFontType0":"CIDFontType2"),FontDescriptor:l,CIDSystemInfo:c,CIDToGIDMap:i?void 0:new Yn("Identity")}),h=this.ref({Type:new Yn("Font"),Subtype:new Yn("Type0"),Encoding:new Yn("Identity-H"),BaseFont:new Yn(e),DescendantFonts:[p],ToUnicode:u});this.addFont({font:h,fontName:e})}addXObject({data:e,obj:r,name:o}){let i=this.imageIds.next();this.resources.data.XObject[i]=this.stream(G0(e),r),this.xObjectNameMap.set(o,i)}currentPageSize(){return{width:this.currentPage.data.MediaBox[2],height:this.currentPage.data.MediaBox[3]}}setCurrentPageSize(e){this.currentPage.data.MediaBox[2]=e.width,this.currentPage.data.MediaBox[3]=e.height}addPage({size:e=cm}={}){let r=this.ref({Type:new Yn("Page"),MediaBox:[0,0,e.width,e.height],Resources:this.resources,Contents:[],Parent:this.pages});return this.pages.data.Count+=1,this.pages.data.Kids.push(r),this.currentPage=r,r}addContent(){let e=new w1(this),r=this.stream(e);return this.currentPage.data.Contents.push(r),e}addGraphicState(e){let r=this.ref(e),o=this.gsIds.next();return this.resources.data.ExtGState[o]=r,o}};var uA=class{constructor(e,r,o,i){this.a3=e;this.a2=r;this.a1=o;this.a0=i}y(e){let r=this.a3*e+this.a2;return r=r*e+this.a1,r=r*e+this.a0,r}minmax(e){if(this.a3===0)return new FX(this.a2,this.a1,this.a0).minmax(e);let r=e.min,o=e.max,i=3*this.a3,s=2*this.a2,a=this.a1,l=s*s-4*i*a,c=this.y(r),d=this.y(o);if(l<=0)return{min:Math.min(c,d),max:Math.max(c,d)};{let u=Math.sqrt(l),p=(-s-u)/(2*i),h=(-s+u)/(2*i);if(h<p){let g=p;p=h,h=g}let f=this.y(p),m=this.y(h);return p<r&&r<=h&&h<=o?{min:Math.min(c,d,m),max:Math.max(c,d,m)}:r<=p&&p<=o&&o<h?{min:Math.min(c,d,f),max:Math.max(c,d,f)}:r<p&&p<o&&r<h&&h<o?{min:Math.min(c,d,f,m),max:Math.max(c,d,f,m)}:{min:Math.min(c,d),max:Math.max(c,d)}}}},FX=class{constructor(e,r,o){this.a2=e;this.a1=r;this.a0=o}y(e){return(this.a2*e+this.a1)*e+this.a0}minmax(e){if(this.a2===0)return new MX(this.a1,this.a0).minmax(e);let r=e.min,o=e.max,i=this.y(r),s=this.y(o),a=-this.a1/(2*this.a2);if(r<=a&&a<=o){let l=this.y(a);return{min:Math.min(i,l,s),max:Math.max(i,l,s)}}else return{min:Math.min(i,s),max:Math.max(i,s)}}},MX=class{constructor(e,r){this.a1=e;this.a0=r}y(e){return this.a1*e+this.a0}minmax(e){if(this.a1===0)return{min:this.a0,max:this.a0};let r=this.y(e.min),o=this.y(e.max);return{min:Math.min(r,o),max:Math.max(r,o)}}};var T1=class{static boundingBox(e,r,o,i,s){let a=s.x-i.x*3+o.x*3-r.x,l=i.x*3-o.x*6+r.x*3,c=o.x*3-r.x*3,d=r.x,u=new uA(a,l,c,d),p=s.y-i.y*3+o.y*3-r.y,h=i.y*3-o.y*6+r.y*3,f=o.y*3-r.y*3,m=r.y,g=new uA(p,h,f,m),v={min:0,max:1},y=u.minmax(v),S=g.minmax(v),C=e*.5;return nt(y.min-C,S.min-C,y.max-y.min+e,S.max-S.min+e)}};var sO=class{constructor(){this.commands=[];this._path=new Path2D}arc(e,r,o,i,s,a){this._path.arc(e,r,o,i,s),this.commands.push(["arc",[e,r,o,i,s,a]])}arcTo(e,r,o,i,s){this._path.arcTo(e,r,o,i,s),this.commands.push(["arcTo",[e,r,o,i,s]])}bezierCurveTo(e,r,o,i,s,a){this._path.bezierCurveTo(e,r,o,i,s,a),this.commands.push(["bezierCurveTo",[e,r,o,i,s,a]])}closePath(){this._path.closePath(),this.commands.push(["closePath",[]])}ellipse(e,r,o,i,s,a,l,c){this._path.ellipse(e,r,o,i,s,a,l,c),this.commands.push(["ellipse",[e,r,o,i,s,a,l,c]])}lineTo(e,r){this._path.lineTo(e,r),this.commands.push(["lineTo",[e,r]])}moveTo(e,r){this._path.moveTo(e,r),this.commands.push(["moveTo",[e,r]])}quadraticCurveTo(e,r,o,i){this._path.quadraticCurveTo(e,r,o,i),this.commands.push(["quadraticCurveTo",[e,r,o,i]])}rect(e,r,o,i){this._path.rect(e,r,o,i),this.commands.push(["rect",[e,r,o,i]])}toPath2D(){return new Path2D(this._path)}drawPdf(e){for(let[r,o]of this.commands)switch(r){case"arc":{let[i,s,a,l,c,d]=o;e.arc(i,s,a,l,c,d);break}case"arcTo":break;case"bezierCurveTo":{let[i,s,a,l,c,d]=o;e.bezierCurveTo(i,s,a,l,c,d);break}case"closePath":{e.closePath();break}case"ellipse":{let[i,s,a,l]=o;e.ellipse(i,s,a,l);break}case"lineTo":{let[i,s]=o;e.lineTo(i,s);break}case"moveTo":{let[i,s]=o;e.moveTo(i,s);break}case"quadraticCurveTo":{let[i,s,a,l]=o;e.quadraticCurveTo(i,s,a,l);break}case"rect":{let[i,s,a,l]=o;e.rect(i,s,a,l);break}}}};var lh=class{constructor(){this._path=new sO;this.current=Re(0,0);this.bounds=new ki}moveTo(e,r){this._path.moveTo(e,r),this.current=Re(e,r)}lineTo(e,r){this._path.lineTo(e,r);let[o,i]=[Math.min(e,this.current.x),Math.max(e,this.current.x)],[s,a]=[Math.min(r,this.current.y),Math.max(r,this.current.y)];this.bounds.add(nt(o,s,i-o,a-s)),this.current=Re(e,r)}bezierCurveTo(e,r,o,i,s,a){this._path.bezierCurveTo(e,r,o,i,s,a);let l=T1.boundingBox(0,this.current,Re(e,r),Re(o,i),Re(s,a));this.bounds.add(l),this.current=Re(s,a)}arc(e,r,o,i,s,a){this._path.arc(e,r,o,i,s,a),this.bounds.add(nt(e-o,r-o,2*o,2*o));let l=Re(e+o*Math.cos(s),r+o*Math.sin(s));this.current=Re(l.x,l.y)}get path(){return this._path}},D1=class{constructor(){this.orbit=[];this.lineCap=[];this.lineDash=[];this.lineJoin=[];this._bounds=new ki}addOrbit(e,r={}){let{lineCap:o,lineDash:i,lineJoin:s}=r;this.orbit.push(e.path),this.lineCap.push(o||"butt"),this.lineDash.push(i||[]),this.lineJoin.push(s||"round"),this._bounds.add(e.bounds)}stroke(e,r,o){e.save(),e.lineWidth=r,e.strokeStyle=o.toCSSRGBA();for(let i=0;i<this.orbit.length;i++){e.beginPath();let s=this.orbit[i],a=this.lineCap[i],l=this.lineDash[i],c=this.lineJoin[i];e.setLineDash(l),e.lineCap=a,e.lineJoin=c,e.stroke(s.toPath2D())}e.restore()}strokePdf(e,r,o){e.save(),e.lineWidth(r);let{r:i,g:s,b:a}=o.normalized();e.strokeColor(i,s,a);for(let l=0;l<this.orbit.length;l++){let c=this.orbit[l],d=this.lineCap[l],u=this.lineDash[l],p=this.lineJoin[l];e.setLineDash(u),e.lineCap(IX(d)),e.lineJoin(AX(p)),c.drawPdf(e),e.stroke()}e.restore()}hitTest(e,r,o,i){e.save(),e.lineWidth=i;for(let s=0;s<this.orbit.length;s++){e.beginPath();let a=this.orbit[s],l=this.lineCap[s],c=this.lineDash[s],d=this.lineJoin[s];if(e.setLineDash(c),e.lineCap=l,e.lineJoin=d,e.isPointInStroke(a.toPath2D(),r,o))return e.restore(),!0}return e.restore(),!1}getBounds(e){let r=this._bounds.rect;if(r===void 0)return;let o=e*.5;return nt(r.x-o,r.y-o,r.width+e,r.height+e)}};var V0=9.482,Mv=2.462135903752836,NX=16.797;var pA=40,Ca=Pt("#ffeb32ff"),Ic=Pt("#f3ba04ff"),Ns=3.265,dm=.5;var aO;function Txe(){return aO||(aO=Dr.create()),aO.getContext2dForce()}function BX({ev:t,from:e,to:r,mtx:o,asDifferentGroup:i,handleScale:s,toolVisible:a,dpr:l}){e.isFolded&&(e=e.head()),fA({sourceItem:e,outletItem:r,keepOutletOut:!1,handleScale:s});let c=UX({from:{card:e},to:{card:r},handleScale:s,asDifferentGroup:i,isGroupGripHidden:!a}),d=o.invert().cross(t.x,t.y);if(a&&i&&r.foldHandleVisible()){let h=mA(r,s);if(Si(h,d))return!1}let u=Txe(),p=pA/o.a*l;return c.hitTest(u,d.x,d.y,p)}function LX(t,e){let[r,o,i,s]=e,a=1-t,l=t*t,c=a*a,d=c*a,u=l*t,p={x:r.x*d,y:r.y*d};return p.x+=o.x*3*c*t,p.y+=o.y*3*c*t,p.x+=i.x*3*a*l,p.y+=i.y*3*a*l,p.x+=s.x*u,p.y+=s.y*u,p}function OX({from:t,to:e,asDifferentGroup:r,handleScale:o,visibleRect:i,toolVisible:s}){var p,h,f,m;fA({sourceItem:t.card,outletItem:e.card,keepOutletOut:!1,handleScale:o});let a=UX({from:t,to:e,handleScale:o,asDifferentGroup:r,isGroupGripHidden:!s}),l=qo(t.card)*Math.max((h=(p=t.mtx)==null?void 0:p.a)!=null?h:1,(m=(f=e.mtx)==null?void 0:f.a)!=null?m:1),c=Ns*l,d=a.getBounds(c),u={orbits:a,lineScale:l};return i&&d&&!(ks(i,d)||ks(d,i))?[u,!1]:[u,!0]}function zX(t){switch(t){case"left":return new er(-1,0);case"top":return new er(0,-1);case"right":return new er(1,0);case"bottom":return new er(0,1)}}function um(t,e){return new er(e.x-t.x,e.y-t.y)}function lO({unitNormal:t,start:e,end:r,aux:o}){let i=um(e,r),a=i.magnitude()*.5,l=Math.min(a,Math.max(o,Math.abs(i.x)*.5)),c=Math.min(a,Math.max(o,Math.abs(i.y)*.5)),d=e.x+l*t.x,u=e.y+c*t.y;return Re(d,u)}function Dxe({start:t,control1:e,control2:r,end:o,division:i}){let s=1/i,a=0,l=t;for(let c=1;c<i;c++){let d=s*c,u=LX(d,[t,e,r,o]);a+=um(l,u).magnitude(),l=u}return a+=um(l,o).magnitude(),a}function kxe({start:t,control1:e,control2:r,end:o,hint:i,distanceFromEnd:s}){let a=Dxe({start:t,control1:e,control2:r,end:o,division:16});if(a===0)return new er(i.x*s,i.y*s);if(a<s){let p=um(o,t);if(p.magnitude()===0)return new er(i.x*s,i.y*s);{let f=p.normalized();return new er(f.x*s,f.y*s)}}let l=1-s/a,c=LX(l,[t,e,r,o]),d=um(o,c);if(d.magnitude()===0)return new er(i.x*s,i.y*s);{let p=d.normalized();return new er(p.x*s,p.y*s)}}var $0=9.482,Nv=2.462135903752836,Pxe=16.797,Exe=10;function _xe({from:t,to:e,scale:r}){let o=30*r,i=Re(t.location.x,t.location.y),s=Re(e.location.x,e.location.y),a=zX(t.type),l=zX(e.type),c=lO({unitNormal:a,start:i,end:s,aux:o}),d=lO({unitNormal:l,start:s,end:i,aux:o}),u=um(t.center,e.center),p=u.magnitude(),h=p===0?l:u.scaled(p),f=$0*r,m=Nv*r,v=kxe({start:i,control1:c,control2:d,end:s,hint:h,distanceFromEnd:f}).normalized(),y=v.scaled(m),S=Re(s.x+y.x,s.y+y.y),C=v.scaled(f),b=Re(S.x+C.x,S.y+C.y),x=lO({unitNormal:v,start:b,end:i,aux:o});return[i,c,x,b]}function cO(t){var v,y,S,C;let{handleScale:e,from:r,to:o,asDifferentGroup:i,isGroupGripHidden:s}=t,a;i&&s?a="left":a=o.card.inPort;let l=GX(r.card,r.card.outPort),c=VX(o.card,a,i&&!s,e),d=WX(r.card,r.card.outPort),u=i&&!s?$X(o.card):WX(o.card,a);if(r.mtx){let b=new ft().translate(-r.card.position.x,-r.card.position.y).prependMatrix(r.mtx).translate(r.card.position.x,r.card.position.y);l=b.applied(l),d=b.applied(d)}if(o.mtx){let b=new ft().translate(-o.card.position.x,-o.card.position.y).prependMatrix(o.mtx).translate(o.card.position.x,o.card.position.y);c=b.applied(c),u=b.applied(u)}let p=qo(o.card)*Math.max((y=(v=r.mtx)==null?void 0:v.a)!=null?y:1,(C=(S=o.mtx)==null?void 0:S.a)!=null?C:1),[h,f,m,g]=_xe({from:{location:l,type:r.card.outPort,center:d},to:{location:c,type:a,center:u},scale:p});return{p0:h,cp0:f,cp1:m,p1:g,fromPoint:l,toPoint:c}}function UX(t){let{p0:e,cp0:r,cp1:o,p1:i,toPoint:s}=cO(t),{orbits:a,lineEnd:l}=hA({stemFrom:i,stemTo:s}),c=new lh;return c.moveTo(e.x,e.y),c.bezierCurveTo(r.x,r.y,o.x,o.y,i.x,i.y),c.lineTo(l.x,l.y),a.addOrbit(c),a}function hA(t){let{stemFrom:e,stemTo:r}=t,o=new D1,i=um(e,r),s=i.magnitude()/($0+Nv)*Nv,a=new er(r).subbed(i.normalized().scaled(s)),l=i.magnitude()/($0+Nv)*Pxe,c=i.normalized().rotate(90).scale(l*.5),d=Re(e.x+c.x,e.y+c.y),u=Re(e.x-c.x,e.y-c.y),p=new lh;return p.moveTo(d.x,d.y),p.lineTo(a.x,a.y),p.lineTo(u.x,u.y),o.addOrbit(p,{lineCap:"round",lineJoin:"miter"}),{orbits:o,lineEnd:Re(a.x,a.y)}}function HX(t,e,r){let i=um(t,e).normalized().scale(($0+Nv)*r),s=Re(e.x-i.x,e.y-i.y),{orbits:a,lineEnd:l}=hA({stemFrom:s,stemTo:e}),c=new lh;c.moveTo(t.x,t.y),c.lineTo(l.x,l.y);let d=Exe*r;return a.addOrbit(c,{lineCap:"round",lineDash:[d,d]}),a}function W0(t,e,r){let o=Ns*r,i=o+dm*r/window.devicePixelRatio;t instanceof w1?(e.strokePdf(t,i,Ic),e.strokePdf(t,o,Ca)):(e.stroke(t,i,Ic),e.stroke(t,o,Ca))}function fA({sourceItem:t,outletItem:e,keepOutletOut:r,handleScale:o}){let i=Sa.eval({sourceItem:t,outletItem:e,keepSourceIn:!0}),s=i.decideOutletPort({outletItem:e,keepOutletOut:r});e.inPort!==s&&(e.inPort=s);let a=i.decideSourcePort({sourceItem:t,outletItem:e,outletPort:s,handleScale:o});t.outPort!==a&&(t.outPort=a)}var Bv=class{constructor(e,r){this.portIndex=e;this.score=r}get sourcePort(){return zl.sourcePort[this.portIndex]}get outletPort(){return zl.outletPort[this.portIndex]}},Sa=class{constructor(e,r,o){this.best=e;this.second=r;this.third=o}getBestSourcePortEntry({sourceItem:e,keepSourceIn:r}){let o=Sa.getSourceDisablePortIndex({clipItem:e,keepSourceIn:r});return this.best.portIndex==o?this.second:this.best}getSecondSourcePortEntry({sourceItem:e,keepSourceIn:r}){let o=Sa.getSourceDisablePortIndex({clipItem:e,keepSourceIn:r});return this.best.portIndex==o?this.third:this.second.portIndex==o?this.third:this.second}getSecondOutletPortEntry({outletItem:e,keepOutletOut:r}){let o=Sa.getOutletDisablePortIndex({clipItem:e,keepOutletOut:r});return this.best.portIndex==o?this.third:this.second.portIndex==o?this.third:this.second}getBestOutletPortEntry({outletItem:e,keepOutletOut:r}){let o=Sa.getOutletDisablePortIndex({clipItem:e,keepOutletOut:r});return this.best.portIndex==o?this.second:this.best}decideOutletPort({outletItem:e,keepOutletOut:r}){if(e.isHead||r)return this.getBestOutletPortEntry({outletItem:e,keepOutletOut:r}).outletPort;let o=this.getBestOutletPortEntry({outletItem:e,keepOutletOut:!1}),i=e.visibleNextCard();if(i===void 0)return o.outletPort;let a=Sa.eval({sourceItem:e,outletItem:i,keepSourceIn:!1}).getBestSourcePortEntry({sourceItem:i,keepSourceIn:!1});return o.outletPort==a.sourcePort&&o.score>a.score?this.getSecondOutletPortEntry({outletItem:e,keepOutletOut:!1}).outletPort:o.outletPort}static getSourcePortScore({sourceItem:e,entry:r,outletPosition:o}){let i=GX(e,r.sourcePort),s=o.x-i.x,a=o.y-i.y;return new er(Re(s,a)).sqrMagnitude()}decideSourcePort({sourceItem:e,outletItem:r,outletPort:o,handleScale:i}){let s=e.nextGroup===r,a=VX(r,o,s,i),l=this.getBestSourcePortEntry({sourceItem:e,keepSourceIn:!0}),c=this.getSecondSourcePortEntry({sourceItem:e,keepSourceIn:!0}),d=Sa.getSourcePortScore({sourceItem:e,entry:l,outletPosition:a}),u=Sa.getSourcePortScore({sourceItem:e,entry:c,outletPosition:a});return d>u?c.sourcePort:l.sourcePort}static getSourceDisablePortIndex({clipItem:e,keepSourceIn:r}){return e.foldHandleVisible()?zl.sourceIndex.get("left"):r?zl.sourceIndex.get(e.inPort):-1}static getOutletDisablePortIndex({clipItem:e,keepOutletOut:r}){return e.foldHandleVisible()?zl.outletIndex.get("right"):r&&e.visibleNextCard()!==void 0?zl.outletIndex.get(e.outPort):-1}static rank({sourceFrame:e,sourceDisablePortIndex:r,outletFrame:o,outletDisablePortIndex:i}){let s=Or(o).x-Or(e).x,a=Or(o).y-Or(e).y,l=uN(Math.atan2(a,s)*rP+360,360),c=4,d=360/c,u=uN(l/d,c),p=Math.round(u),h=p%c,f=u-p,m=Math.abs(f),g=(h+Math.sign(f)*Math.ceil(Math.abs(f))+4)%c;h==g&&(g=(h+1)%c);let v=1-m,y=(p-(g-h)+4)%c,S=1,C=zl.perpendicular[h],b=Math.min(new er(e.width*C.x,e.height*C.y).magnitude(),new er(o.width*C.x,o.height*C.y).magnitude())*.5,x=new er(s*C.x,a*C.y).magnitude();if(h==i&&x<b||h==r&&x<b){let w=new Bv(g,v),k=new Bv(y,S),T=new Bv((h+2)%4,2);return new Sa(w,k,T)}else{let w=new Bv(h,m),k=new Bv(g,v),T=new Bv(y,S);return new Sa(w,k,T)}}static eval({sourceItem:e,outletItem:r,keepSourceIn:o}){let i=Sa.getSourceDisablePortIndex({clipItem:e,keepSourceIn:o}),s=Sa.getOutletDisablePortIndex({clipItem:r,keepOutletOut:!1});if(r.foldHandleVisible()){let a=$X(r),l=qo(r),c=Oo*l,d=nt(a.x-c,a.y-c,c*2,c*2);return Sa.rank({sourceFrame:e.bounds,sourceDisablePortIndex:i,outletFrame:d,outletDisablePortIndex:s})}else return Sa.rank({sourceFrame:e.bounds,sourceDisablePortIndex:i,outletFrame:r.bounds,outletDisablePortIndex:s})}},zl=class{};zl.perpendicular=[new er(0,1),new er(-1,0),new er(0,-1),new er(1,0)],zl.sourceIndex=new Map([["left",2],["top",3],["right",0],["bottom",1]]),zl.outletIndex=new Map([["left",0],["top",1],["right",2],["bottom",3]]),zl.sourcePort=["right","bottom","left","top"],zl.outletPort=["left","top","right","bottom"];function GX(t,e){let r=t.bounds,{width:o,height:i}=r,s=t.position.x,a=t.position.y,l=qo(t);return e==="right"?t.isFolded?s=r.x+o+Ia*l:s=r.x+o:e==="left"?s=r.x:e==="top"?a=r.y:e==="bottom"&&(t.isFolded?a=r.y+i+Ia*l:a=r.y+i),Re(s,a)}function VX(t,e,r,o){let i=t.bounds,{width:s,height:a}=i,l=Ns*o,c=(Xi+Oo)*o,d=Oo*o;if(r){let u=t.position.x-s/2-c,p=t.position.y;return e==="top"?Re(u,p-(d+l*.5)):e==="bottom"?Re(u,p+(d+l*.5)):Re(u-(d+l*.5),p)}else{let u=t.position.x,p=t.position.y;return e==="top"?Re(u,p-a/2):e==="left"?Re(u-s/2,p):e==="bottom"?Re(u,p+a/2):Re(u+s/2,p)}}function $X(t){let e=t.bounds,r=qo(t),o=(Xi+Oo)*r,i=t.position.x-e.width/2-o,s=t.position.y;return Re(i,s)}function WX(t,e){let r=t.isFolded?Ia:0,o=t.position.x,i=t.position.y;return e==="top"||e==="left"?Re(o,i):e==="right"?Re(o+r,i):Re(o,i+r)}var Wr;(function(s){s[s.ANSWER_TOGETHER=0]="ANSWER_TOGETHER",s[s.EDIT=1]="EDIT",s[s.RESULT=2]="RESULT",s[s.ANSWER=3]="ANSWER",s[s.HELP=4]="HELP"})(Wr||(Wr={}));function jX(t){switch(t){case 3:return"quizButtonAnswer";case 0:return"quizButtonAnswerTogether";case 1:return"quizButtonEdit";case 2:return"quizButtonResult";case 4:return"quizButtonHelp"}}function KX(t){var a;let{card:e,store:r}=t;if(!(e instanceof zr))return;let o=or(r);if(o===void 0||Zn.getEndpoint("loilonote-quiz")===void 0)return;let i=[{state:{interaction:"none"},role:4}];if(((a=e.content.quiz_author)==null?void 0:a.id)===`${r.userInfo.user_id}`)if(o==="self-study")i.push({state:{interaction:"none"},role:1},{state:{interaction:"none"},role:2});else{let l=r.screenSharingActionNotification[o];(r.userInfo.is_teacher||l&&xi(l)&&l.presenter===r.userInfo.user_id)&&i.push({state:{interaction:"none"},role:0}),i.push({state:{interaction:"none"},role:1},{state:{interaction:"none"},role:2})}else i.push({state:{interaction:"none"},role:3});return i}function qX(t){let{ctx:e,styles:r,layout:o}=t,{data:i,buttons:s}=r,a=De.get();gA({data:i,ctx:e,stringProvider:a}),s&&bA({ctx:e,layout:o,buttons:s,stringProvider:a})}async function YX(t){let{data:e,ctx:r}=t;await vA(r,e)}var Do;(function(o){o[o.OPEN=0]="OPEN",o[o.ANSWER=1]="ANSWER",o[o.HELP=2]="HELP"})(Do||(Do={}));function XX(t){switch(t){case 1:return"attendanceButtonAnswer";case 0:return"attendanceButtonOpen";case 2:return"attendanceButtonHelp"}}function QX(t){let{card:e,store:r}=t;if(!(e instanceof an)||!Zn.getEndpoint("loilonote-attendance"))return;let o=[];return o.push({state:{interaction:"none"},role:2}),r.userInfo.is_teacher?o.push({state:{interaction:"none"},role:0}):o.push({state:{interaction:"none"},role:1}),o}function JX(t){let{ctx:e,layout:r,styles:o}=t,i=De.get();gA({data:o.data,ctx:e,stringProvider:i}),o.buttons&&bA({ctx:e,layout:r,buttons:o.buttons,stringProvider:i})}async function ZX(t){let{ctx:e,data:r}=t;await vA(e,r)}var dO=class{constructor({doc:e,boldFont:r,regularFont:o,adapter:i}){this.doc=e,this.regularFont=o,this.boldFont=r,this.adapter=i,this.doc.registerFont(o.family),this.doc.registerFont(r.family)}async renderCardsAsync({cards:e,onProgress:r,printAuthor:o}){let i=0,s=0,a=qn().toARGBHex();for await(let{card:l,author:c}of e){let d=0,u=l.headGroup().iteratorOverGroup(),p=l.memberCountOverGroup(),h=u.next().value;for(;h;){s>0&&this.doc.addPage();let f=uO(cm,h.size),m=this.doc.addContent();m.save();let g=Cn({width:f.width,height:f.height-30},f);if(m.transform(g,0,0,g,(1-g)*f.width/2,30),await this.renderCardTreeInternal(m,h),m.restore(),m.save(),m.transform(1,0,0,-1,0,30),o){let y=this.footerTextFrames({pageSize:f,align:"center",text:c,color:a});await j0({ctx:m,frame:y})}let v=this.footerTextFrames({pageSize:f,align:"right",text:`${d+1}/${p}`,color:a});await j0({ctx:m,frame:v}),m.restore(),h=u.next().value,s++,d++}i++,r(i)}}footerTextFrames({align:e,pageSize:r,color:o,text:i}){let s=22,a=Ze(r.width,30),l=new Ro({text:i}),c={location:0,length:l.length};l.addAttribute({attribute:{type:"font",value:{bold:!1,size:s}},range:c}),l.addAttribute({attribute:{type:"foreground_color",value:o},range:c});let d=sh({text:l,size:a,fontSizeScale:1,vertical:!1,hAlignment:e,vAlignment:"middle"});if(!d)throw new kl;return d}async renderCardGroup(e){let r=e.headGroup().iteratorOverGroup(),{doc:o}=this,i=r.next().value;for(;i;){await this.renderCardTree(i);let s=r.next();s.value&&o.addPage(),i=s.value}}async renderCardTree(e){let r=this.doc.addContent();await this.renderCardTreeInternal(r,e)}async renderCardTreeInternal(e,r){let{doc:o}=this,i=uO(cm,r.size);o.setCurrentPageSize(i);let s=Cn(i,r.size),[a,l]=[i.width/2,i.height/2],c=new ft(s,0,0,-s,a,l),d=ch({canvas:i,viewport:js(),root:r,toolVisible:!1,dpr:1}),u=K0({cards:[r],callback:Oi,state:d,mtx:c});e.save(),e.transform(c.a,c.b,c.c,c.d,c.e,c.f);let p=r.localPosition;c.translate(-p.x,-p.y),e.translate(-p.x,-p.y),await new eQ(this.adapter,this.doc,r).paint(e,u),e.restore()}},eQ=class{constructor(e,r,o){this.adapter=e;this.doc=r;this.card=o;this.measure=new tQ}getCard(e){let r=this.card.getCard(e);return $e(r!=null,"card not found: "+e),r}async paint(e,r){!r.visible||(r.type==="card"?await this.paintCard(e,r):r.type==="connector"?this.paintConnector(e,r):r.type==="container"&&await this.paintContainer(e,r))}paintConnector(e,r){ge.log("exporter renderConnectors:begin",this.measure.diff());let o=r.localMtx;e.save(),e.transform(o.a,o.b,o.c,o.d,o.e,o.f),W0(e,r.layout.orbits,r.layout.lineScale),e.restore(),ge.log("exporter renderConnectors:end",this.measure.diff())}async paintCard(e,r){var S,C;let{localMtx:o,styles:i,layout:s,props:a}=r,{measure:l,doc:c,adapter:d}=this,u=this.getCard(a.id);ge.log("exporter renderCardBackground:begin",l.diff());let{width:p,height:h}=s.bounds,[f,m]=[s.localBounds.x,s.localBounds.y],{scaleToParent:g}=s;if(e.save(),e.transform(o.a,o.b,o.c,o.d,o.e,o.f),i.shade){ge.log("exporter foldShade:begin",l.diff()),e.save();let{r:b,g:x,b:w}=pn(i.shade).normalized();e.fillColor(b,x,w),e.rect(f+Ia*g,m+Ia*g,p,h),e.fill(),e.restore(),ge.log("exporter foldShade:end",l.diff())}if(i.background){ge.log("exporter bg:begin",l.diff()),e.save();let{r:b,b:x,g:w,a:k}=pn(i.background).normalized();e.fillColor(b,w,x),k<1&&e.fillOpacity(k),e.rect(f,m,p,h),e.fill(),e.restore(),ge.log("exporter bg:end",l.diff())}if(i.contentThumb){ge.log("exporter thumb:begin",l.diff()),e.save(),e.rect(f,m,p,h),e.clip(),e.endPath(),ge.log("exporter loadThumb:begin",l.diff());let b;if(ge.log("exporter pdf:begin",l.diff()),u instanceof Bs?b=await d.loadPdfThumb(u,hO({base:cm,root:this.card.size,card:u.size,thumb:u.contentSize,thumbWithMargins:u.contentSizeWithMargins})):b=await d.loadThumb(u,hO({base:cm,root:this.card.size,card:u.size,thumb:u.contentSize,thumbWithMargins:u.contentSizeWithMargins})),ge.log("exporter loadThumb:done",l.diff()),b){ge.log("exporter embedImage:begin",l.diff()),pO(c,b);let x=(S=i.contentThumb.width)!=null?S:b.width,w=(C=i.contentThumb.height)!=null?C:b.height;e.translate(i.contentThumb.x,i.contentThumb.y+w),e.scale(1,-1),e.scale(x,w),e.do(b.name),ge.log("exporter embedImage:end",l.diff())}e.restore(),ge.log("exporter thumb:end",l.diff())}if(i.text.frame){let{frame:b}=i.text;if(ge.log("exporter title:begin",l.diff()),e.save(),e.translate(-p/2,-h/2),await j0({ctx:e,frame:b}),e.restore(),ge.log("exporter title:end",l.diff()),i.text.frame.hasLackingGlyphs()){ge.log("exporter generateLackingGlyph:begin");let x=Math.sqrt(Rr(this.doc.currentPageSize())/Rr(this.card.size)),w=Xt(u.size,x),k=await d.generateLackingGlyphTexture(u,w,i.text.frame),{name:T}=k;pO(c,k),e.save(),e.scale(1,-1),e.translate(f,m),e.scale(p,h),e.do(T),e.restore(),ge.log("exporter generateLackingGlyph:end")}}i.quiz&&await YX({data:i.quiz.data,ctx:e}),i.attendance&&await ZX({data:i.attendance.data,ctx:e});for(let b of r.children)await this.paint(e,b);let{drawn:v,annotation:y}=i.strokes;v&&await this.paintStrokeThumb({ctx:e,card:u,stroke:v,type:"drawn"}),y&&await this.paintStrokeThumb({ctx:e,card:u,stroke:y,type:"annotation"}),e.restore(),ge.log("exporter renderCardBackground:end",l.diff())}async paintContainer(e,r){let{localMtx:o}=r;e.save(),e.transform(o.a,o.b,o.c,o.d,o.e,o.f);for(let i of r.children)await this.paint(e,i);e.restore()}async paintStrokeThumb({ctx:e,stroke:r,card:o,type:i}){var p;if(!r.thumb)return;ge.log("exporter paintStrokeThumb:begin",this.measure.diff()),e.save(),r.clip&&(e.rect(r.clip.x,r.clip.y,r.clip.width,r.clip.height),e.clip(),e.endPath()),ge.log("exporter loadDrawnThumb:begin",this.measure.diff());let s,{x:a,y:l,width:c,height:d}=r.thumb;if(c&&d){let h=Ze(c,d);s=hO({base:cm,root:this.card.size,card:o.size,thumb:h,thumbWithMargins:(p=r.clip)!=null?p:h})}let u=await this.adapter.loadDrawnThumb(o,i,s);if(ge.log("exporter loadDrawnThumb:end",this.measure.diff()),u){let h=c!=null?c:u.width,f=d!=null?d:u.height;pO(this.doc,u),e.translate(a,l+f),e.scale(1,-1),e.scale(h,f),e.do(u.name)}e.restore(),ge.log("exporter paintStrokeThumb:end",this.measure.diff())}},tQ=class{diff(){var o;let e=performance.now(),r=e-((o=this.prev)!=null?o:e);return this.prev=e,r}};function uO(t,e){let r=xr(e,t);return Ze(Math.round(r.width),Math.round(r.height))}function pO(t,e){let r={Type:new Yn("XObject"),Subtype:new Yn("Image"),BitsPerComponent:8,Width:e.width,Height:e.height,ColorSpace:new Yn("DeviceRGB"),Filter:new Yn("FlateDecode")};e.alphaChannel&&(r.SMask=t.stream(G0(e.alphaChannel),{Type:new Yn("XObject"),Subtype:new Yn("Image"),Width:e.width,Height:e.height,BitsPerComponent:8,Filter:new Yn("FlateDecode"),ColorSpace:new Yn("DeviceGray"),Decode:[0,1]})),t.addXObject({data:e.image,obj:r,name:e.name})}function Axe(t,e){for(let r=0;r<e.commands.length;r+=1){let o=e.commands[r];o.type==="M"?t.moveTo(o.x,o.y):o.type==="L"?t.lineTo(o.x,o.y):o.type==="C"?t.bezierCurveTo(o.x1,o.y1,o.x2,o.y2,o.x,o.y):o.type==="Q"?t.quadraticCurveTo(o.x1,o.y1,o.x,o.y):o.type==="Z"&&t.closePath()}}async function j0(t){let{ctx:e,frame:r}=t,o=r.modelToViewTransform;e.save(),e.transform(o.a,o.b,o.c,o.d,o.e,o.f);for(let i of r.lines)await Ixe({ctx:e,line:i,vertical:r.vertical});e.restore()}async function Ixe({ctx:t,line:e,vertical:r}){let o=0,i,s=0;for(let a of e.runs){if(i){let l=Z_({run:i.run,next:a,vertical:r});l?i={run:l,dx:i.dx}:(await rQ({run:i.run,ofLine:e,ctx:t,vertical:r,dx:i.dx}),i={run:a,dx:s})}else i={run:a,dx:s};s+=a.advance+a.kerning,o+=a.text.length}i&&await rQ({run:i.run,ofLine:e,ctx:t,vertical:r,dx:i.dx})}async function rQ(t){let{run:e,ofLine:r,dx:o,ctx:i,vertical:s}=t;if(i.save(),s&&e.rotate?(i.translate(0,r.origin.y),i.rotate(-Math.PI/2),i.translate(-e.advance/2+(r.ascender+r.descender)/2,r.origin.x+o+e.advance/2+(e.ascender-e.descender)/2+e.descender)):i.translate(r.origin.x+o,r.origin.y),!e.bitmap){i.save();for(let a of e.graphemes){let{glyphs:l,advance:c}=a;if(l){let d=l.main;e.rotate&&e.shouldUseGlyph&&l.sub&&(d=l.sub),i.save();let{r:u,g:p,b:h,a:f}=Pt(e.rgbaHex).normalized();i.fillColor(u,p,h),f<1&&i.fillOpacity(f);let m=d.getPath(0,0,e.fontSize);Axe(i,m),i.fill(),i.restore()}i.translate(c,0)}i.restore()}i.restore()}function hO({base:t,root:e,card:r,thumb:o,thumbWithMargins:i}){let s=Cn(uO(t,e),e),a=Cn(r,i),l=Xt(o,a),c=Xt(l,s),d=Xt(c,RX);return Ze(Math.round(d.width),Math.round(d.height))}var k1=class{constructor(){this.cache=new Map}measure(e){let{ctx:r,text:o,fontSize:i,fontName:s}=e;if(o.length===0||i<0||s.length===0)return{width:0,height:0};let a=`${i}px '${s}'`,l=`${o} ${a}`;if(this.cache.has(l))return this.cache.get(l);let c=0,d=0,u=o.split(`
`);r.save(),r.fillStyle="transparent",r.font=a;for(let h of u){let f=r.measureText(o);c=Math.max(c,f.width),d+=i}r.restore();let p={width:c,height:d};return this.cache.set(l,p),p}};function q0(t){let{theme:e}=t;return{none:{background:e,border:e,title:rn()},pushed:{background:rn(),border:e,title:Pt("#D3D3D3FF")}}}var Rxe={top:8,left:16,bottom:8,right:16};function nQ(t){let{ctx:e,title:r,bounds:o,state:i,style:s}=t,a=s.colors[i.interaction],l=Math.min(o.width,o.height)*.45,c=new Path2D,{width:d,height:u}=o;c.moveTo(0,l),c.arc(l,l,l,Math.PI,Math.PI*1.5),c.lineTo(d-l,0),c.arc(d-l,l,l,Math.PI*1.5,Math.PI*2),c.lineTo(d,u-l),c.arc(d-l,u-l,l,0,Math.PI*.5),c.lineTo(l,u),c.arc(l,u-l,l,Math.PI*.5,Math.PI),c.closePath(),e.save(),e.translate(o.x,o.y),a.background&&a.background.a>0&&(e.fillStyle=a.background.toCSSRGBA(),e.fill(c)),s.borderWidth>0&&a.border&&a.border.a>0&&(e.strokeStyle=a.border.toCSSRGBA(),e.stroke(c)),Fxe({bounds:{x:0,y:0,width:o.width,height:o.height},ctx:e,fontName:s.fontName,fontSize:s.fontSize,text:r,colorSet:a}),e.restore()}var oQ=new k1;function iQ(t){var h;let{text:e,style:r,ctx:o,max:i,min:s}=t,{fontSize:a,fontName:l}=r,c=(h=r.edgeInsets)!=null?h:Rxe,d=oQ.measure({ctx:o,text:e,fontName:l,fontSize:a}),u=ht(c.left+d.width+c.right,s.width,i.width),p=ht(c.top+d.height+c.bottom,s.height,i.height);return{width:u,height:p}}function Fxe(t){let{ctx:e,bounds:r,text:o,fontName:i,fontSize:s,colorSet:a}=t,l=o.split(`
`);if(l.length===0)return;e.font=`${s}px '${i}'`,e.textBaseline="ideographic";let c=s,d=c*l.length,u=r.x+r.width*.5,p=r.y+r.height*.5-d*.5;for(let h=0;h<l.length;h++){let f=l[h],{width:m}=oQ.measure({ctx:e,text:f,fontSize:s,fontName:i}),g=Math.max(u-m*.5,r.x),v=p+c*(h+1);e.fillStyle=a.title.toCSSRGBA(),e.fillText(f,g,v,r.width),a.underline&&(e.beginPath(),e.moveTo(g,v),e.lineTo(g+Math.min(m,r.width),v),e.strokeStyle=a.underline.toCSSRGBA(),e.lineWidth=1,e.stroke())}}function yA(t){let[e,r]=[sQ(t.width),sQ(t.height)];return{width:e,height:r}}function sQ(t){return t<=480?"compact":"regular"}var dh={width:480,height:360};function fO(){let t=-dh.width/2,e=-dh.height/2,r=dh.width,o=dh.height,i=t+r*.1,s=e+o*.4;return{x:i,y:s,width:r*.5,height:o*.2}}function aQ(t){let{title:e,color:r}=t,o=fO(),i=24,s={location:0,length:e.length},a=new Ro({text:e,attributes:[],attribute_ranges:[]});return a.addAttribute({attribute:{type:"font",value:{bold:!1,size:i}},range:s}),a.addAttribute({attribute:{type:"foreground_color",value:r.toARGBHex()},range:s}),sh({text:a,size:o,fontSizeScale:1,hAlignment:"left",vAlignment:"bottom",vertical:!1,baseEdgeInsets:Hn()})}function Mxe(t){let{text:e,color:r,fontSize:o,size:i}=t,s={location:0,length:e.length},a=new Ro({text:e,attributes:[],attribute_ranges:[]});return a.addAttribute({attribute:{type:"font",value:{bold:!1,size:o}},range:s}),a.addAttribute({attribute:{type:"foreground_color",value:r.toARGBHex()},range:s}),sh({text:a,size:i,fontSizeScale:1,hAlignment:"left",vAlignment:"bottom",vertical:!1,baseEdgeInsets:Hn()})}function gA(t){let{ctx:e,data:r,stringProvider:o}=t,{strings:i}=o,{title:s,labels:a,bounds:l,bgColorArgbHex:c}=r,d=ts(dh,l),u=dh.height,p=Fn(c),h=Lx(p)?rn():qn(),f=i.regularWtFontName,m=11,g=5,v=fO(),y=aQ({title:s,color:h});if(y===void 0)return;let S=v.x,C=v.y;e.save(),e.scale(d,d),C+=g;let b={x:S,y:C,width:v.width,height:.5};e.fillRect(b.x,b.y,b.width,b.height),e.lineWidth=1,e.strokeStyle=h.toCSSRGBA(),e.strokeRect(b.x,b.y,b.width,b.height),e.fillStyle=h.toCSSRGBA(),C+=u*.47;for(let x of a)e.font=`${m}px '${f}'`,e.fillText(x,S,C),C+=u*.05;e.translate(v.x,v.y-v.height),y.draw(e),e.restore()}async function vA(t,e){let{title:r,labels:o,bounds:i,bgColorArgbHex:s}=e,a=ts(dh,i),l=dh.height,c=Fn(s),d=Lx(c)?rn():qn(),u=11,p=5,h=fO(),f=aQ({title:r,color:d});if(f===void 0)return;let m=h.x,g=h.y;t.save(),t.scale(a,a),g+=p;let v={x:m,y:g,width:h.width,height:.5};t.fillRect(v.x,v.y,v.width,v.height),t.lineWidth(1),t.strokeColor(d.r,d.g,d.b),t.strokeRect(v.x,v.y,v.width,v.height),t.save(),t.translate(h.x,h.y-h.height),await j0({ctx:t,frame:f}),t.restore(),g+=l*.47;for(let y of o){let S={width:dh.width*10,height:u},C=Mxe({text:y,color:d,fontSize:u,size:S});!C||(t.save(),t.translate(h.x,g-u),await j0({ctx:t,frame:C}),t.restore(),g+=l*.05)}t.restore()}function P1(t,e){let r=window.devicePixelRatio,o=Xt(t,1/r);return Cn(o,e.size)}function pm(t,e){let r=P1(t,e),o=Xt(e.size,r);return yA(o)}function bA(t){let{ctx:e,layout:r,buttons:o}=t,i=r.canvasScale,s=Nxe({cardSize:r.bounds,scale:i,ctx:e,buttons:o});e.save(),e.scale(1/i,1/i);for(let l of s){let{button:c,bounds:d}=l,{style:u,state:p,title:h}=c;nQ({ctx:e,style:u,bounds:d,state:p,title:h})}e.restore();let a=s.map(l=>{let c=r.bounds.x+r.bounds.width*.5+l.bounds.x/i,d=r.bounds.y+r.bounds.height*.5+l.bounds.y/i,u=l.bounds.width/i,p=l.bounds.height/i;return{x:c,y:d,width:u,height:p}});for(let l=0;l<Math.min(a.length,o.length);l++)o[l].state.bounds=a[l]}function Nxe(t){let{ctx:e,cardSize:r,scale:o,buttons:i}=t,s=Xt(r,o),a=yA(s),l=Bxe(a),c=Lxe(s,i.length),u=i.map(y=>{let{style:S,title:C}=y;return iQ({ctx:e,text:C,style:S,min:l,max:c})}).reduce((y,S)=>({width:Math.max(y.width,S.width),height:Math.max(y.height,S.height)}),{width:0,height:0}),p=Oxe(s,u,i.length),h=u.width,f=u.height*i.length+p*(i.length-1),m=-s.width/2+s.width*.85-h*.5,g=-s.height/2+s.height*.5-f*.5,v=u.height+p;return i.map((y,S)=>{let C={x:m,y:g+v*S,width:h,height:u.height};return{button:y,bounds:C}})}function Bxe(t){let{width:e,height:r}=t,o;e==="regular"&&r==="regular"?o=25:o=15;let i;return e==="compact"&&r==="compact"?i=130:e==="regular"&&r==="compact"?i=150:e==="compact"&&r==="regular"?i=75:i=180,{width:i,height:o}}var lQ=.9;function Lxe(t,e){let r=t.width*.3*.8,o=t.height*lQ/e;return{width:r,height:o}}function CA(t){let{width:e,height:r}=t;return e==="compact"&&r==="compact"?13:e==="regular"&&r==="compact"?22:e==="compact"&&r==="regular"?9:25}function Oxe(t,e,r){let o=yA(t),i;o.height==="compact"?i=40:i=50;let s=(t.height*lQ-e.height*r)/(r-1);return Math.min(i,s)}var cQ={none:{title:Pt("#0075f6ff"),underline:Pt("#0075f6ff")},pushed:{title:Pt("#FFFFFFFF"),underline:Pt("#FFFFFFFF")}};var dQ=X(on());function uQ({card:t,canvas:e,buttons:r}){let o=De.get(),i=pm(e,t),s=zxe(t,o),a;return r&&(a=Uxe({card:t,strings:o.strings,buttons:r,sizeClass:i})),{buttons:a,data:s}}function zxe(t,e){let r=e.strings,o=t.content.title;if(o.length===0)switch(t.content.preset){case"test":o=r.quizPresetTest;break;case"survey":o=r.quizPresetSurvey;break}let{question_count:i,quiz_author:s,backcolor:a}=t.content,l=[];if(s){let{name:c}=s,d=`${r.author} ${c}`,u=(0,dQ.sprintf)(r.questionCount,i,e.pluralSafeSuffix(i));l.push(d),l.push(u)}return{title:o,labels:l,bounds:t.bounds,bgColorArgbHex:a}}function Uxe(t){let{card:e,buttons:r,strings:o,sizeClass:i}=t,s=o.regularWtFontName,a=CA(i),l=1,c={colors:Wxe(e),fontSize:a,fontName:s,borderWidth:l},d={colors:Vxe,fontSize:a,fontName:s,borderWidth:l},u={colors:$xe,fontSize:a,fontName:s,borderWidth:0};return r.map(p=>{let{state:h,role:f}=p;switch(f){case Wr.ANSWER_TOGETHER:return{title:jxe(o,e),state:h,style:c};case Wr.ANSWER:return e.content.isAnswered?{title:o.confirmAnswers,state:h,style:c}:{title:o.answer,state:h,style:c};case Wr.RESULT:return{title:o.result,state:h,style:d};case Wr.EDIT:return{title:o.edit,state:h,style:c};case Wr.HELP:return{title:`? ${o.clickHereForHelp}`,state:h,style:u}}})}var Hxe=q0({theme:Pt("#3D5AFDFF")}),Gxe=q0({theme:Pt("#FF8F00FF")}),Vxe=q0({theme:Pt("#00C853FF")}),$xe={none:{title:Pt("#0075f6ff"),underline:Pt("#0075f6ff")},pushed:{title:Pt("#FFFFFFFF"),underline:Pt("#FFFFFFFF")}};function Wxe(t){switch(t.content.preset){case"test":return Hxe;case"survey":return Gxe}}function jxe(t,e){switch(e.content.preset){case"test":return t.answerTestTogether;case"survey":return t.answerQuestionnaireTogether}}function pQ({card:t,canvas:e,buttons:r}){let o=De.get(),s={data:Kxe(t,o),buttons:void 0};if(r){let a=pm(e,t);s.buttons=Yxe({buttons:r,strings:o.strings,sizeClass:a})}return s}function Kxe(t,e){let r=e.strings,o=t.content.title;o.length===0&&(o=r.attendanceReport);let i=[];if(t.content.attendance_author){let s=`${r.attendanceCardCreator} ${t.content.attendance_author.name}`;i.push(s)}return{title:o,labels:i,bounds:t.bounds,bgColorArgbHex:t.content.backcolor}}var qxe=q0({theme:Pt("#5AC361FF")});function Yxe(t){let{buttons:e,strings:r,sizeClass:o}=t,i=r.regularWtFontName,s=CA(o),l={colors:qxe,fontSize:s,fontName:i,borderWidth:1};return e.map(c=>{switch(c.role){case Do.OPEN:return{title:r.open,state:c.state,style:l};case Do.ANSWER:return{title:r.answer,state:c.state,style:l};case Do.HELP:let d=`? ${r.clickHereForHelp}`,u={colors:cQ,fontSize:s,fontName:i,borderWidth:0};return{title:d,state:c.state,style:u}}})}"use strict";var Y0=2147483647,Lu=36,mO=1,E1=26,Xxe=38,Qxe=700,hQ=72,fQ=128,mQ="-",Jxe=/^xn--/,Zxe=/[^\0-\x7E]/,ewe=/[\x2E\u3002\uFF0E\uFF61]/g,twe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gO=Lu-mO,Ou=Math.floor,vO=String.fromCharCode;function Lv(t){throw new RangeError(twe[t])}function rwe(t,e){let r=[],o=t.length;for(;o--;)r[o]=e(t[o]);return r}function gQ(t,e){let r=t.split("@"),o="";r.length>1&&(o=r[0]+"@",t=r[1]),t=t.replace(ewe,".");let i=t.split("."),s=rwe(i,e).join(".");return o+s}function vQ(t){let e=[],r=0,o=t.length;for(;r<o;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<o){let s=t.charCodeAt(r++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var nwe=t=>String.fromCodePoint(...t),owe=function(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:Lu},bQ=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},yQ=function(t,e,r){let o=0;for(t=r?Ou(t/Qxe):t>>1,t+=Ou(t/e);t>gO*E1>>1;o+=Lu)t=Ou(t/gO);return Ou(o+(gO+1)*t/(t+Xxe))},CQ=function(t){let e=[],r=t.length,o=0,i=fQ,s=hQ,a=t.lastIndexOf(mQ);a<0&&(a=0);for(let l=0;l<a;++l)t.charCodeAt(l)>=128&&Lv("not-basic"),e.push(t.charCodeAt(l));for(let l=a>0?a+1:0;l<r;){let c=o;for(let u=1,p=Lu;;p+=Lu){l>=r&&Lv("invalid-input");let h=owe(t.charCodeAt(l++));(h>=Lu||h>Ou((Y0-o)/u))&&Lv("overflow"),o+=h*u;let f=p<=s?mO:p>=s+E1?E1:p-s;if(h<f)break;let m=Lu-f;u>Ou(Y0/m)&&Lv("overflow"),u*=m}let d=e.length+1;s=yQ(o-c,d,c==0),Ou(o/d)>Y0-i&&Lv("overflow"),i+=Ou(o/d),o%=d,e.splice(o++,0,i)}return String.fromCodePoint(...e)},SQ=function(t){let e=[];t=vQ(t);let r=t.length,o=fQ,i=0,s=hQ;for(let c of t)c<128&&e.push(vO(c));let a=e.length,l=a;for(a&&e.push(mQ);l<r;){let c=Y0;for(let u of t)u>=o&&u<c&&(c=u);let d=l+1;c-o>Ou((Y0-i)/d)&&Lv("overflow"),i+=(c-o)*d,o=c;for(let u of t)if(u<o&&++i>Y0&&Lv("overflow"),u==o){let p=i;for(let h=Lu;;h+=Lu){let f=h<=s?mO:h>=s+E1?E1:h-s;if(p<f)break;let m=p-f,g=Lu-f;e.push(vO(bQ(f+m%g,0))),p=Ou(m/g)}e.push(vO(bQ(p,0))),s=yQ(i,d,l==a),i=0,++l}++i,++o}return e.join("")},iwe=function(t){return gQ(t,function(e){return Jxe.test(e)?CQ(e.slice(4).toLowerCase()):e})},swe=function(t){return gQ(t,function(e){return Zxe.test(e)?"xn--"+SQ(e):e})},awe={version:"2.1.0",ucs2:{decode:vQ,encode:nwe},decode:CQ,encode:SQ,toASCII:swe,toUnicode:iwe};var xQ=awe;function wQ(t){let e=t.content;if(e.uri===void 0||!e.needs_display_url_domain)return;let r;try{let{hostname:s}=new URL(e.uri);s.length>0?r=xQ.toUnicode(s):r=e.uri}catch(s){r=e.uri}let{strings:o}=De.get();return{urlDomainLabel:`${o.citationNotePrefix} : ${r}`}}function SA({card:t,rend:e,mtx:r,state:o}){var A,E;let{userId:i,toolVisible:s,ignoreAnnotations:a,ignoreFavorites:l,root:c,cards:d,dpr:u}=o,p=(A=d[t.id])!=null?A:{},h=c===t,f=e.shouldDisplayLoading(h),m=hm(t,r.a/u),g={alphaMultiplier:e.globalAlphaMultiplier(),shade:void 0,broken:!1,boundingBox:void 0,connectorHandle:t.connectorHandleVisible()&&!t.pinned,displayName:void 0,contentThumb:void 0,documentThumb:void 0,border:void 0,background:void 0,favorite:t.favorite,groupHandle:void 0,highlight:e.highlightAlpha(),emphasize:!!p.hover||e.hasCardEmphasizeEffect(),loading:f,pinned:t.pinned,playable:t.type==="video"||t.type==="audio",strokes:{drawn:void 0,annotation:void 0},text:{frame:e.textFrame,selectedRange:e.textSelectedRange,compositionRange:e.textCompositionRange},pdf:p.pdfRenderer,attendance:void 0,quiz:void 0,webCard:void 0};t.isFolded&&t.isHead&&(g.shade=U7.toRGBA()),p.focused&&(m.resizable?g.boundingBox={resizable:!t.pinned,corners:Array.from(n1(t,r).values())}:g.boundingBox={resizable:!1,corners:[]}),t.foldHandleVisible()&&(g.groupHandle={open:!t.isFolded});let v=t.content.backcolor?Fn(t.content.backcolor):rn();(t.type==="map"||t.type==="web")&&t.contentAssetId()===void 0&&(v=z7),v.isTransparent()&&(h&&t.parent!=null?v=Qk:f&&(v=L7)),g.background=v.toRGBA();let y=DQ(t);s&&y&&(g.border=e.borderColor().toRGBA());let C=lwe({card:t,rend:e,state:o,zoom:r.a});if((C==null?void 0:C.type)==="content"){let F=bu(C.image,t.contentLocalBounds);g.contentThumb={image:C.image,...F}}else(C==null?void 0:C.type)==="document"&&(g.documentThumb={image:C.image,...t.localBounds});!!(t.gadgets.drawn||t.document)&&(g.strokes.drawn=TQ({card:t,state:o,mtx:r,type:"drawn"})),!!(t.gadgets.annotations||t.document)&&(g.strokes.annotation=TQ({card:t,state:o,mtx:r,type:"annotation"})),t instanceof zr?g.quiz=uQ({card:t,canvas:o.canvas,buttons:p.quizButtons}):t instanceof an?g.attendance=pQ({card:t,canvas:o.canvas,buttons:p.attendanceButtons}):t instanceof ri&&(g.webCard=wQ(t)),p.textEditing&&(g.playable=!1);let k=[p.assetUploadState,p.assetThumbUploadState].some(F=>(F==null?void 0:F.content)==="failed"),T=xA(t);return((E=p.assetUploadState)==null?void 0:E.content)!=null&&(T=!1),(k||T)&&(g.broken=!0,g.background=SN.toRGBA(),g.border=bO(SN).toRGBA(),g.contentThumb=void 0,g.documentThumb=void 0,g.pdf=void 0,g.loading=!1,g.playable=!1),h&&(g.shade=void 0,g.playable=!1,g.favorite=!1),(h||!s)&&(g.connectorHandle=!1,g.groupHandle=void 0,g.pinned=!1,g.emphasize=!1,g.boundingBox=void 0),a&&(g.strokes.annotation=void 0),l&&(g.favorite=!1),t.parent==null&&i!=null&&i!==t.author.id&&(g.displayName=t.author.name),m.connectable||(g.border=void 0,g.connectorHandle=!1,g.groupHandle=void 0,g.pinned=!1),g}function lwe({card:t,rend:e,zoom:r,state:o}){var C,b,x,w;let{cards:i,root:s}=o,a=(C=i[t.id])!=null?C:{},{thumbType:l,fineStroke:c,pdfRenderer:d,fineStrokeRenderer:u}=a,p=t===s,h=(b=e.player)==null?void 0:b.video,f=gr.get(t),m=t.contentLocalBounds,g=f.content.getForZoom(m,r),v=f.document.getForZoom(t.size,r),y=f.drawn.getForZoom(t.size,r),S;if(t instanceof Ao&&h&&h.buffered.length>0&&h.buffered.end(0)>0&&(h.played.length>0||h.currentTime!==0))h.width=h.videoWidth,h.height=h.videoHeight,S=h;else if(l==="content")S=g==null?void 0:g.src;else if(l==="document")S=v==null?void 0:v.src;else if(!t.document)S=g==null?void 0:g.src;else if(!p)S=(x=v==null?void 0:v.src)!=null?x:g==null?void 0:g.src;else{let k=To.get("drawn",t),T=k.getBaseLoadState(),A=k.getLayerLoadState(),E=T.get(),F=A.get(),z=h_(t),L=(E==null?void 0:E.value.remote_id)!=null||(F==null?void 0:F.value)!=="notFound",R=c==null?void 0:c.drawn,N=y!=null;if(!E||!F)S=v==null?void 0:v.src;else if(z)if(g&&v)if(t instanceof Bs&&d&&(!L||!!u))S=g.src;else if(L){let W=y==null?void 0:y.level,me=g.level;W&&wo.mipmapLevelHigherThan(W,"small")&&wo.mipmapLevelHigherThan(me,"small")?S=g.src:S=v.src}else wo.mipmapLevelHigherThan(v.level,g.level)?S=v.src:S=g.src;else S=(w=g==null?void 0:g.src)!=null?w:v==null?void 0:v.src;else L&&(!N||!R)&&(S=v==null?void 0:v.src)}if(!!S)return{image:S,type:S===(v==null?void 0:v.src)?"document":"content"}}function TQ({card:t,type:e,state:r,mtx:o}){var v,y,S;let i=To.get(e,t),s=r.cards[t.id],a=(v=s==null?void 0:s.fineStroke)==null?void 0:v[e],l=s==null?void 0:s.fineStrokeRenderer,c=r.root===t,d=gr.get(t)[e],u=a!==void 0&&c,p=(y=d.getForZoom(t.size,o.a))==null?void 0:y.src,h=i.getBaseLoadState(),f=i.getLayerLoadState(),m=!u||!h.loadedAtLeastOnce()||!f.loadedAtLeastOnce(),g={};if(c||(g.clip=nt(t.localBounds)),m&&p){let C=t.document!=null&&e==="annotation",b;if(C)b=t.localBounds;else{let{thumbnailRect:x}=(S=d.geometry)!=null?S:t.drawnGeometry(e);b=t.drawnThumbLocalBounds(e,x)}g.thumb={image:p,...b}}return u&&(g.fineStrategy=a,g.fineRenderer=l,a==="redraw"&&(g.fineRedrawParams={mtx:o.clone(),type:e,canvasSize:r.canvas,contents:i.packContents(),contentLocalBounds:t.contentLocalBounds,drawnLocalBounds:t.drawnLocalBounds(e),geometry:t.drawnGeometry(e)})),g}var zu=class{static currentAnimationTime(){return Date.now()/1e3}},Q0=class{static calculate(e){let r=e*Q0.scale;if(r<1)r-=1-Math.exp(-r);else{let o=.36787944117;r=1-Math.exp(1-r),r=o+e*(1-o)}return r}constructor(){this.normalize=1/Q0.calculate(1),this.offset=1-this.normalize*Q0.calculate(1)}},X0=Q0;X0.scale=8,X0.singleton=new Q0;var kQ=class{getInterpolation(e){let r=X0.singleton.normalize*X0.calculate(e);return r>0?r+X0.singleton.offset:r}},ph=class{constructor(){this.startPosition=0;this.currentPosition=0;this.finalPosition=0;this.startVelocity=0;this.currentVelocity=0;this.deceleration=0;this.startTime=0;this.duration=0;this.splineDuration=0;this.splineDistance=0;this.finished=!0;this.overDistance=0;this.flingFriction=.015;this.state=za.spline;this.physicalCoeff=ph.computeDeceleration(.84)}static computeDeceleration(e){return this.gravityEarth*this.inchPerMeter*this.ppi*e}updateScroll(e){this.currentPosition=this.startPosition+Math.round(e*(this.finalPosition-this.startPosition))}static getDeceleration(e){return e>0?-this.gravity:this.gravity}adjustDuration(e,r,o){let i=r-e,s=o-e,a=Math.abs(s/i),l=Ul.singleton.samples,c=Math.floor(l*a);if(c<Ul.singleton.samples){let d=c/l,u=(c+1)/l,p=Ul.singleton.time[c],h=Ul.singleton.time[c+1],f=p+(a-d)/(u-d)*(h-p);this.duration*=f}}startScroll(e,r,o,i){this.finished=!1,this.currentPosition=e,this.startPosition=e,this.finalPosition=e+r,this.startTime=i,this.duration=o,this.deceleration=0,this.startVelocity=0}finish(){this.currentPosition=this.finalPosition,this.finished=!0}setFinalPosition(e){this.finalPosition=e,this.finished=!1}extendDuration(e){let r=zu.currentAnimationTime()-this.startTime;this.duration=r+e,this.finished=!1}springback(e,r,o,i){return this.finished=!0,this.currentPosition=e,this.startPosition=e,this.finalPosition=e,this.startVelocity=0,this.startTime=i,this.duration=0,e<r?this.startSpringback(e,r,0):e>o&&this.startSpringback(e,o,0),!this.finished}startSpringback(e,r,o){this.finished=!1,this.state=za.cubic,this.currentPosition=e,this.startPosition=e,this.finalPosition=r;let i=e-r;this.deceleration=ph.getDeceleration(i),this.startVelocity=-i,this.overDistance=Math.abs(i),this.duration=Math.sqrt(-2*i/this.deceleration)}fling(e,r,o,i,s,a){if(this.overDistance=s,this.finished=!1,this.currentVelocity=r,this.startVelocity=r,this.duration=0,this.splineDuration=0,this.startTime=a,this.currentPosition=e,this.startPosition=e,e>i||e<o){this.startAfterEdge(e,o,i,r,a);return}this.state=za.spline;let l=0;r!=0&&(this.duration=this.getSplineFlingDuration(r),this.splineDuration=this.duration,l=this.getSplineFlingDistance(r)),this.splineDistance=l*Math.sign(r),this.finalPosition=e+this.splineDistance,this.finalPosition<o&&(this.adjustDuration(this.startPosition,this.finalPosition,o),this.finalPosition=o),this.finalPosition>i&&(this.adjustDuration(this.startPosition,this.finalPosition,i),this.finalPosition=i)}getSplineDeceleration(e){return Math.log(Ul.singleton.inflexion*Math.abs(e)/(this.flingFriction*this.physicalCoeff))}getSplineFlingDistance(e){let r=this.getSplineDeceleration(e),o=ph.decelerationRate-1;return this.flingFriction*this.physicalCoeff*Math.exp(ph.decelerationRate/o*r)}getSplineFlingDuration(e){let r=this.getSplineDeceleration(e),o=ph.decelerationRate-1;return Math.exp(r/o)}fitOnBounceCurve(e,r,o){let i=-o/this.deceleration,a=o*o/2/Math.abs(this.deceleration),l=Math.abs(r-e),c=Math.sqrt(2*(a+l)/Math.abs(this.deceleration));this.startTime-=c-i,this.currentPosition=r,this.startPosition=r,this.startVelocity=-this.deceleration*c}startBounceAfterEdge(e,r,o){this.deceleration=ph.getDeceleration(o===0?e-r:o),this.fitOnBounceCurve(e,r,o),this.onEdgeReached()}startAfterEdge(e,r,o,i,s){if(e>r&&e<o){this.finished=!0;return}let a=e>o,l=a?o:r,c=e-l;c*i>=0?this.startBounceAfterEdge(e,l,i):this.getSplineFlingDistance(i)>Math.abs(c)?this.fling(e,i,a?r:e,a?e:o,c,s):this.startSpringback(e,l,i)}notifyEdgeReached(e,r,o,i){this.state===za.spline&&(this.overDistance=o,this.startTime=i,this.startAfterEdge(e,r,r,this.currentVelocity,i))}onEdgeReached(){let e=this.startVelocity*this.startVelocity,r=e/(2*Math.abs(this.deceleration)),o=Math.sign(this.startVelocity);r>this.overDistance&&(this.deceleration=-o*e/(2*this.overDistance),r=this.overDistance),this.overDistance=r,this.state=za.ballistic,this.finalPosition=this.startPosition+(this.startVelocity>0?r:-r),this.duration=-(this.startVelocity/this.deceleration)}continueWhenFinished(e){switch(this.state){case za.spline:if(this.duration<this.splineDuration)this.currentPosition=this.finalPosition,this.startPosition=this.finalPosition,this.startVelocity=this.currentVelocity,this.deceleration=ph.getDeceleration(this.startVelocity),this.startTime+=this.duration,this.onEdgeReached();else return!1;break;case za.ballistic:this.startTime+=this.duration,this.startSpringback(this.finalPosition,this.startPosition,0);break;case za.cubic:return!1}return this.update(e),!0}update(e){if(e=e-this.startTime,e===0)return this.duration>0;if(e>this.duration)return!1;let o=0;switch(this.state){case za.spline:{if(this.splineDuration===0)return!1;let i=e/this.splineDuration,s=Math.floor(Ul.singleton.samples*i),a=1,l=0;if(s<Ul.singleton.samples){let c=s/Ul.singleton.samples,d=(s+1)/Ul.singleton.samples,u=Ul.singleton.position[s];l=(Ul.singleton.position[s+1]-u)/(d-c),a=u+(i-c)*l}o=a*this.splineDistance,this.currentVelocity=l*this.splineDistance/this.splineDuration;break}case za.ballistic:{let i=e;this.currentVelocity=this.startVelocity+this.deceleration*i,o=this.startVelocity*i+this.deceleration*i*i/2;break}case za.cubic:{if(this.duration===0)return!1;let i=e/this.duration,s=i*i,a=Math.sign(this.startVelocity);o=a*this.overDistance*(3*s-2*i*s),this.currentVelocity=a*this.overDistance*6*(-i+s);break}}return this.currentPosition=this.startPosition+o,!0}},fm=ph;fm.gravityEarth=9.80665,fm.inchPerMeter=39.37,fm.ppi=160,fm.gravity=2e3,fm.decelerationRate=Math.log(.78)/Math.log(.9);var yO=class{constructor(){this.inflexion=.35;this.startTension=.5;this.endTension=1;this.samples=100;this.p1=this.startTension*this.inflexion,this.p2=1-this.endTension*(1-this.inflexion);let e=this.samples,r=Array.from({length:this.samples+1}).map(a=>0),o=Array.from({length:this.samples+1}).map(a=>0),i=0,s=0;for(let a=0;a<this.samples;a++){let l=a/e,c=1,d=0,u=0,p=0;for(;d=i+(c-i)/2,p=3*d*(1-d),u=p*((1-d)*this.p1+d*this.p2)+d*d*d,!(Math.abs(u-l)<1e-5);)u>l?c=d:i=d;r[a]=p*((1-d)*this.startTension+d)+d*d*d;let h=1,f=0,m=0;for(;f=s+(h-s)/2,p=3*f*(1-f),m=p*((1-f)*this.startTension+f)+f*f*f,!(Math.abs(m-l)<1e-5);)m>l?h=f:s=f;o[a]=p*((1-f)*this.p1+f*this.p2)+f*f*f}r[this.samples]=1,o[this.samples]=1,this.position=r,this.time=o}},Ul=yO;Ul.singleton=new yO;var za;(function(o){o[o.spline=0]="spline",o[o.cubic=1]="cubic",o[o.ballistic=2]="ballistic"})(za||(za={}));var uh;(function(r){r[r.scroll=0]="scroll",r[r.fling=1]="fling"})(uh||(uh={}));var CO=class{constructor(){this.mode=0;this.scrollerX=new fm;this.scrollerY=new fm;this.interpolator=new kQ;this.flywheel=!0}get isFinished(){return this.scrollerX.finished&&this.scrollerY.finished}forceFinished(e){this.scrollerX.finished=e,this.scrollerY.finished=e}get startTime(){return Math.min(this.scrollerX.startTime,this.scrollerY.startTime)}get duration(){return Math.max(this.scrollerX.duration,this.scrollerY.duration)}get currX(){return this.scrollerX.currentPosition}get currY(){return this.scrollerY.currentPosition}get currVelocity(){return Math.hypot(this.scrollerX.currentVelocity,this.scrollerY.currentVelocity)}get startX(){return this.scrollerX.startPosition}get startY(){return this.scrollerY.startPosition}get finalX(){return this.scrollerX.finalPosition}get finalY(){return this.scrollerY.finalPosition}computeScrollOffset(e=zu.currentAnimationTime()){if(this.isFinished)return!1;switch(this.mode){case 0:let r=e-this.scrollerX.startTime,o=this.scrollerX.duration;if(r<o){let i=this.interpolator.getInterpolation(r/o);this.scrollerX.updateScroll(i),this.scrollerY.updateScroll(i)}else this.abortAnimation();break;case 1:this.scrollerX.finished||this.scrollerX.update(e)||this.scrollerX.continueWhenFinished(e)||this.scrollerX.finish(),this.scrollerY.finished||this.scrollerY.update(e)||this.scrollerY.continueWhenFinished(e)||this.scrollerY.finish();break}return!0}startScroll(e,r,o,i,s=CO.defaultDuration){this.mode=0;let a=zu.currentAnimationTime();this.scrollerX.startScroll(e,o,s,a),this.scrollerY.startScroll(r,i,s,a)}springBackOrFling(e,r,o,i,s,a,l,c){this.mode=1;let d=zu.currentAnimationTime();if(!this.scrollerX.springback(e,s,a,d)){let u=o;if(this.flywheel&&!this.scrollerX.finished){let p=this.scrollerX.currentVelocity;Math.sign(u)===Math.sign(p)&&(u+=p)}this.scrollerX.fling(e,u,s,a,0,d)}if(!this.scrollerY.springback(r,l,c,d)){let u=i;if(this.flywheel&&!this.scrollerY.finished){let p=this.scrollerY.currentVelocity;Math.sign(u)===Math.sign(p)&&(u+=p)}this.scrollerY.fling(r,u,l,c,0,d)}}springBack(e,r,o,i,s,a){this.mode=1;let l=zu.currentAnimationTime(),c=this.scrollerX.springback(e,o,i,l),d=this.scrollerY.springback(r,s,a,l);return c||d}fling(e,r,o,i,s,a,l,c,d=0,u=0){let p=o,h=i;if(this.flywheel&&!this.isFinished){let m=this.scrollerX.currentVelocity,g=this.scrollerY.currentVelocity;Math.sign(p)===Math.sign(m)&&Math.sign(h)===Math.sign(g)&&(p+=m,h+=g)}this.mode=1;let f=zu.currentAnimationTime();this.scrollerX.fling(e,p,s,a,d,f),this.scrollerY.fling(r,h,l,c,u,f)}notifyHorizontalEdgeReached(e,r,o){let i=zu.currentAnimationTime();this.scrollerX.notifyEdgeReached(e,r,o,i)}notifyVerticalEdgeReached(e,r,o){let i=zu.currentAnimationTime();this.scrollerY.notifyEdgeReached(e,r,o,i)}get isOverScrolled(){return!this.scrollerX.finished&&this.scrollerX.state!=0||!this.scrollerY.finished&&this.scrollerY.state!=0}abortAnimation(){this.scrollerX.finish(),this.scrollerY.finish()}timePassed(){let e=zu.currentAnimationTime(),r=Math.min(this.scrollerX.startTime,this.scrollerY.startTime);return e-r}isScrollingInDirection(e,r){let o=this.scrollerX.finalPosition-this.scrollerX.startPosition,i=this.scrollerY.finalPosition-this.scrollerY.startPosition;return!this.isFinished&&Math.sign(e)===Math.sign(o)&&Math.sign(r)===Math.sign(i)}},Uu=CO;Uu.defaultDuration=250;function PQ(t,e,r,o){let i=0,s=e.x,a=e.y,l=t.x,c=t.y,d={x:s-l,y:a-c};function u(){return i>=r}function p(f){return i+=f,u()?{x:s,y:a,alpha:o?0:1,visible:!o}:{x:l+d.x*(i/r),y:c+d.y*(i/r),alpha:o?1-i/r:i/r,visible:!0}}let h=p(0);return{get finished(){return u()},update:f=>(h=p(f),h),current(){return h}}}var J0=(t,e,r,o)=>o+r*(t/e);var Fo=(t,e,r,o)=>(t/=e,t=t-1,r*Math.sqrt(1-t*t)+o),EQ=(t,e,r,o)=>(t/=e,o+r*(1-(1-t)*(1-t)));function ea(t,e,r,o=J0){let i=0,[s,a]=[e.x-t.x,e.y-t.y],[l,c]=[t.x,t.y],d=Re(l,c);function u(){return i>=r}return{get finished(){return u()},update(p){return i+=p,u()?e:d={x:o(i,r,s,l),y:o(i,r,a,c)}},current(){return d}}}function Ls({from:t,to:e,durationSec:r,easing:o=J0}){let i=t,s=0;return{get finished(){return s>=r},current(){return i},update(a){return s+=a,s>=r?(i=e,e):i=o(s,r,e-t,t)}}}function Z0(t){let{start:e,velocity:r,minX:o,minY:i,maxX:s,maxY:a}=t,l=new Uu;l.springBackOrFling(e.x,e.y,r.x,r.y,o,s,i,a);let c=Re(e);return{get finished(){return l.isFinished},current(){return c},update(d){return l.computeScrollOffset(),c=Re(l.currX,l.currY)}}}function _Q({from:t,to:e,duration:r,easing:o}){let i=Re(t.position),s=Ze(t.size),a=0;return{get finished(){return a>=r},current(){return[{...i},{...s}]},update(l){a+=l,a>r&&(a=r);let c=o(a,r,e.position.x-t.position.x,t.position.x),d=o(a,r,e.position.y-t.position.y,t.position.y),u=o(a,r,e.size.width-t.size.width,t.size.width),p=o(a,r,e.size.height-t.size.height,t.size.height);return i={x:c,y:d},s={width:u,height:p},this.current()}}}var wA=class{constructor(e){let{insert:r,duration:o,activateTextEditor:i}=e;this.anim=ea(r.from,r.to,o),this.activateTextEditor=i}get finished(){return this.anim.finished}current(){return this.anim.current()}update(e){return this.anim.update(e)}},SO=class{constructor(e){let{from:r,to:o,duration:i,pivot:s}=e;this.anim=Ls({from:r,to:o,durationSec:i}),this.to=o,this.pivot=s}get finished(){return!1}current(){return this.anim?this.anim.current():this.to}update(e){if(this.anim){let r=this.anim.update(e);return this.anim.finished&&(this.anim=void 0),r}else return this.to}},Rc=class extends SO{constructor(e){super({from:1,...e})}},Hl=class extends SO{constructor(e){super(e);this.alpha=1}},mm=class{constructor(e){this.anim=Ls(e),this.pivot=e.pivot}get finished(){return this.anim.finished}current(){return this.anim.current()}update(e){return this.anim.update(e)}},_1=class{constructor(e){this.alpha=e}},Gl=class{constructor(e,r,o){this.animation=e;this.direction=r;this.activateTextEditor=o}get finished(){return this.animation.finished}update(e){return this.animation.update(e)}current(){return this.animation.current()}},ul=class{constructor(e){this.animation=e}get finished(){return this.animation.finished}update(e){return this.animation.update(e)}current(){return this.animation.current()}},A1=class{constructor({fromPos:e,toPos:r,fromScale:o,toScale:i,durationSec:s}){let a=EQ;this.scaleAnim=Ls({from:o,to:i,durationSec:s,easing:a}),this.posAnim=ea(e,r,s,a),this.alphaAnim=Ls({from:0,to:1,durationSec:s,easing:a}),this.toPos=r,this.toScale=i}get finished(){return this.posAnim.finished&&this.scaleAnim.finished}current(){return this.posAnim.finished&&this.scaleAnim.finished?{pos:this.toPos,scale:this.toScale,alpha:1}:{pos:this.posAnim.current(),scale:this.scaleAnim.current(),alpha:this.alphaAnim.current()}}update(e){return this.posAnim.update(e),this.scaleAnim.update(e),this.alphaAnim.update(e),this.current()}},I1=class{constructor({durationSec:e,fromScale:r,toScale:o,baseMtx:i,card:s}){let a=EQ;this.scaleAnim=Ls({from:r,to:o,durationSec:e,easing:a}),this.alphaAnim=Ls({from:1,to:0,durationSec:e,easing:a}),this.baseMtx=i,this.card=s}get finished(){return this.scaleAnim.finished&&this.alphaAnim.finished}current(){return{scale:this.scaleAnim.current(),alpha:this.alphaAnim.current()}}update(e){return this.scaleAnim.update(e),this.alphaAnim.update(e),this.current()}};function AQ(t){return"TouchEvent"in window&&t instanceof TouchEvent}function eC(t){return"Touch"in window&&t instanceof Touch}function Hu(t){return"PointerEvent"in window&&t instanceof PointerEvent}function uo(t){let e=Fc(t),r=t.timestamp-t.down.timestamp;return e<fy&&r<Mx}function IQ(t){let e=Fc(t),r=t.timestamp-t.down.timestamp;return e<fy&&r>=Mx}function RQ(t,e){let r=t.timestamp-t.down.timestamp,o=Math.abs(t.x-t.down.x),i=e?1:devicePixelRatio;return r<500&&o>2*i}var Mn=class{constructor(e,r){this.target=e;this.pointers=new Map;this.downEvents=new Map;this.prevEvents=new Map;this._handler=e=>r=>{AQ(r)?this.handleTouchEvent(e,r):Hu(r)?this.handlePointerEvent(e,r):this.handleMouseEvent(e,r)};this.handleDown=this._handler("down");this.handleMove=this._handler("move");this.handleUp=this._handler("up");this.handleCancel=this._handler("cancel");this.onSingle=()=>{};this.onDoubleMove=()=>{};var o,i,s,a;this.ignoreDevicePixelRatio=(o=r==null?void 0:r.ignoreDevicePixelRatio)!=null?o:!1,this.onlyEventOnTarget=(i=r==null?void 0:r.onlyEventOnTarget)!=null?i:!0,this.preventOnTouch=(s=r==null?void 0:r.preventOnTouch)!=null?s:!0,this.invertTargetTransform=(a=r==null?void 0:r.invertTargetTransform)!=null?a:!0,e.addEventListener("contextmenu",l=>{l.preventDefault(),l.stopPropagation()}),window.ontouchstart!==void 0?(e.addEventListener("touchstart",this.handleDown),e.addEventListener("touchmove",this.handleMove),e.addEventListener("touchend",this.handleUp),e.addEventListener("touchcancel",this.handleCancel)):window.onpointerdown!==void 0?(e.addEventListener("pointerdown",this.handleDown),window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleUp),window.addEventListener("pointercancel",this.handleCancel)):(e.addEventListener("mousedown",this.handleDown),window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))}unbind(){window.ontouchstart!==void 0?(this.target.removeEventListener("touchstart",this.handleDown),this.target.removeEventListener("touchmove",this.handleMove),this.target.removeEventListener("touchend",this.handleUp),this.target.removeEventListener("touchcancel",this.handleCancel)):window.onpointerdown!==void 0?(this.target.removeEventListener("pointerdown",this.handleDown),window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleUp),window.removeEventListener("pointercancel",this.handleCancel)):(this.target.removeEventListener("mousedown",this.handleDown),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp))}handleMouseEvent(e,r){if(e!=="down"&&!this.pointers.has(0))return;this.pointers.set(0,r),r.preventDefault(),r.stopPropagation();let[o,i]=this.globalToLocal(r),s=this.createCanvasPointerEvent({id:0,original:r,position:{x:o,y:i}},r.timeStamp);e==="down"?(this.downEvents.set(0,s),this.onSingle("down",s)):e==="move"?this.onSingle("move",s):e==="up"&&this.onSingle("up",s),this.prevEvents.set(0,s),e==="up"&&(this.prevEvents.delete(0),this.downEvents.delete(0),this.pointers.delete(0))}globalToLocal(e){let{left:r,top:o}=this.target.getBoundingClientRect(),i=this.ignoreDevicePixelRatio?1:window.devicePixelRatio,s=this.invertTargetTransform?r:0,a=this.invertTargetTransform?o:0;return[(e.x-s)*i,(e.y-a)*i]}handlePointerEvent(e,r){if(e!=="down"&&!this.pointers.has(r.pointerId))return;e==="down"||e==="move"?this.pointers.set(r.pointerId,r):(e==="up"||e==="cancel")&&this.pointers.delete(r.pointerId),r.preventDefault(),r.stopPropagation();let o=[{id:r.pointerId,position:{x:r.x,y:r.y},original:r}],i=[...this.pointers.entries()].map(([a,l])=>{let c=l;return{id:a,original:c,position:{x:c.x,y:c.y}}}),s;typeof r.getCoalescedEvents=="function"&&(s=r.getCoalescedEvents().map(a=>{let[l,c]=this.globalToLocal({x:a.x,y:a.y});return{x:l,y:c}}),s.length===0&&(s=void 0)),this.handleMultiPointerEvent(e,{changedPointers:o,pointers:i,coalescedPoints:s})}handleTouchEvent(e,r){this.preventOnTouch&&r.preventDefault(),r.stopPropagation();let o=[];for(let a=0;a<r.changedTouches.length;a++){let l=r.changedTouches[a];(!this.onlyEventOnTarget||l.target===this.target)&&(o.push({id:l.identifier,original:l,position:{x:l.pageX,y:l.pageY}}),e==="down"||e==="move"?this.pointers.set(l.identifier,l):(e==="up"||e==="cancel")&&this.pointers.delete(l.identifier))}let i=[],s=this.onlyEventOnTarget?r.targetTouches:r.touches;for(let a=0;a<s.length;a++){let l=s[a];i.push({id:l.identifier,original:l,position:{x:l.pageX,y:l.pageY}})}this.handleMultiPointerEvent(e,{pointers:i,changedPointers:o})}handleMultiPointerEvent(e,r){var i;let o=performance.now();if(e==="down")for(let s of r.changedPointers){let a=this.createCanvasPointerEvent(s,o);this.downEvents.set(s.id,a),this.prevEvents.set(s.id,a)}if(r.pointers.length===0&&r.changedPointers.length>0){let s=r.changedPointers[0],a=this.createCanvasPointerEvent(s,o);(i=this.onSingle)==null||i.call(this,"up",a)}else if(r.pointers.length===1){let s=r.pointers[0],a=this.createCanvasPointerEvent(s,o,r.coalescedPoints);e==="down"?this.onSingle("down",a):e==="move"&&this.onSingle("move",a),this.prevEvents.set(s.id,a)}else if(r.pointers.length===2&&e==="move"){let s=this.createCanvasPointerEvent(r.pointers[0],o,r.coalescedPoints),a=this.createCanvasPointerEvent(r.pointers[1],o,r.coalescedPoints);this.onDoubleMove(s,a)}for(let s of r.changedPointers)if(e==="down"||e==="move"){let a=this.createCanvasPointerEvent(s,o,r.coalescedPoints);this.prevEvents.set(s.id,a)}else(e==="up"||e==="cancel")&&(this.downEvents.delete(s.id),this.prevEvents.delete(s.id))}createCanvasPointerEvent(e,r,o){let i=this.downEvents.get(e.id),s=this.prevEvents.get(e.id),[a,l]=this.globalToLocal(e.position),[c,d]=[0,0],[u,p]=[0,0];s&&([c,d]=[a-s.x,l-s.y],[u,p]=[s.totalMovementX+Math.abs(c),s.totalMovementY+Math.abs(d)]);let h,f,m=(i==null?void 0:i.original)||e.original;return m instanceof MouseEvent&&(h=m.button,f=m.buttons),{x:a,y:l,dx:c,dy:d,totalMovementX:u,totalMovementY:p,original:e.original,down:i,prev:s,button:h,buttons:f,timestamp:r,coalescedPoints:o}}};function TA(t){let{ev1:e,ev2:r,zoom:o,minZoom:i,maxZoom:s}=t,[a,l]=[e.x,e.y],[c,d]=[r.x,r.y],[u,p]=[a+(c-a)/2,l+(d-l)/2],h=Fg(e,r),[f,m]=[u,p],g=h;e.prev&&r.prev&&(g=Fg(e.prev,r.prev),[f,m]=[e.prev.x+(r.prev.x-e.prev.x)/2,e.prev.y+(r.prev.y-e.prev.y)/2]);let[v,y]=[u-f,p-m],S=h/g,C=o*S;C<=i?C=i:C>=s&&(C=s);let b=C/o;return new ft().prepend(1,0,0,1,-u,-p).prepend(b,0,0,b,0,0).prepend(1,0,0,1,u,p).prepend(1,0,0,1,v,y)}function gm(t){let{ev:e,zoom:r,minZoom:o,maxZoom:i,invert:s,multiplier:a}=t,l=e.target,c=window.devicePixelRatio,d=l.getBoundingClientRect(),[u,p]=[(e.x-d.left)*c,(e.y-d.top)*c],h=e.deltaY*(s?1:-1),m=(e.ctrlKey===!0?3:.4)*h*a/200,g=Math.min(Math.max(r+m,o),i);r<1&&1<g&&(g=1);let v=g/r;return new ft().prepend(1,0,0,1,-u,-p).prepend(v,0,0,v,0,0).prepend(1,0,0,1,u,p)}function DA(t){let{button:e,buttons:r}=t;return e==null||r==null?!0:e===1||(r&1)==1}function vm(t){let{button:e,buttons:r}=t;return e==null||r==null?!1:e===2||(r&2)==2}function Gu(t,e){let r,o=t;for(;o;){if(o.x!==t.x||o.y!==t.y){r=o;break}o=o.prev}if(r===void 0)return new er(0,0);let i=(t.timestamp-r.timestamp)/1e3;return i>e?new er(0,0):new er(t.x-r.x,t.y-r.y).scale(1/i)}var Mo;(function(o){o[o.Never=0]="Never",o[o.Handle=1]="Handle",o[o.Ignore=2]="Ignore"})(Mo||(Mo={}));function Fc(t){return Math.hypot(t.totalMovementX,t.totalMovementY)/window.devicePixelRatio}var FQ=new WeakMap;function Dt(t,e){let r=FQ.get(t);return r||(r=new MQ(t,e),FQ.set(t,r)),r.callback=e,r}var MQ=class{constructor(e,r=Oi){this.card=e;this.active=!1;this.loading=!1;this.marker=Ac();this.prevTime=performance.now();this.emphasizeEffect=!1;this.callback=r,this.textFrameUpdater=new N3(e)}isActive(){return this.active}setActive(e,r){if(r)for(let o of this.card.iterator())Dt(o,this.callback).setActive(e,!1);else this.active=e}get isThumbnailLoading(){return this.loadState==="loading"}setLoading(e){this.loading=e}isLoading(){return this.loading}setLoadState(e){this.loadState=e,this.marker.mark(),this.callback.onCardLoadingStateChanged(this.card,e)}shouldDisplayLoading(e){return this.loading?!0:e&&this.player?this.player.isLoading:this.isThumbnailLoading}resetHandlingComponent(){this.handlingComponent=void 0}update(){let e=performance.now(),r=(e-this.prevTime)/1e3,o=gr.get(this.card);this.isThumbnailLoading!==o.content.isLoading()&&this.setLoadState(o.content.isLoading()?"loading":"loaded");let i=this.hasAnimation()||this.isThumbnailLoading||this.marker.drain();this.player&&(this.player.video?(this.player.playing||this.player.isLoading)&&(i=!0):this.player.isLoading&&(i=!0)),this.updateAnimations(r);let s=this.textFrameUpdater.updateTextFrameIfNeeded();return!i&&this.card.gadgets.title&&s&&(i=!0),this.prevTime=e,i}updateAnimations(e){for(let[r,o]of this.animations())o.update(e),o.finished&&(o instanceof wA&&this.callback.onCardInsertionCompleted(this.card,{activateTextEditor:o.activateTextEditor}),delete this[r],this.marker.mark())}*animations(){this.foldAnimation&&(yield["foldAnimation",this.foldAnimation]),this.insertAnimation&&(yield["insertAnimation",this.insertAnimation]),this.highlightAnimation&&(yield["highlightAnimation",this.highlightAnimation]),this.resizeAnimation&&(yield["resizeAnimation",this.resizeAnimation]),(this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof Hl||this.adoptionEffect instanceof mm)&&(yield["adoptionEffect",this.adoptionEffect])}accessoryScale(e,r){return hh({card:this.card,focused:e,zoom:r.a,dpr:window.devicePixelRatio})}foldHandleBounds(e,r){return mA(this.card,this.accessoryScale(e,r))}connectorHandleBounds(e,r){let{x:o,y:i,width:s}=this.card.bounds,a=this.accessoryScale(e,r),l=o+s,c=i,d=yp*a,u=d/(Math.sqrt(2)*2),p=l+u,h=c-u;return Z7(p,h,d)}authorNameBounds(){let{x:e,y:r,width:o,height:i}=this.card.bounds,s=qo(this.card);return Tp(nt(e,r+i+24,o,12),s)}checkBoundingBoxControlHit(e,r,o){for(let{x:i,y:s,type:a}of n1(this.card,o).values()){let l=em(o.a),c=nt(i+this.card.position.x-l,s+this.card.position.y-l,l*2,l*2);if(Si(c,{x:e,y:r}))return a}}doInsert({insert:e,duration:r=.3,activateTextEditor:o=!1}){this.insertAnimation=new wA({insert:e,duration:r,activateTextEditor:o})}highlightAlpha(){var e;return(e=this.highlightAnimation)==null?void 0:e.current()}setHighlightAnimation(){this.highlightAnimation=Ls({from:1,to:0,durationSec:1})}setResizeAnimation(e){if(!e.transition)return;let{from:r,duration:o}=e.transition;this.resizeAnimation=_Q({from:r,duration:o,easing:J0,to:{size:this.card.size,position:this.card.position}})}doFold(e,r){let{card:o}=this,i=.3,s,a,l,c,[d,u]=[e.position.x,e.position.y];r?(s=d,a=u,l=o.position.x,c=o.position.y):(l=d,c=u,s=o.position.x,a=o.position.y),e!==o&&o.rootParent()!==e&&(this.foldAnimation=PQ({x:l,y:c},{x:s,y:a},i,r))}hasScaleShrinkAnimation(){return this.adoptionEffect instanceof Rc}setScaleShrinkAnimationByAdoption(e,r){this.adoptionEffect instanceof Rc||(this.adoptionEffect=new Rc({to:e,duration:.3,pivot:r}))}setAdoptionCancelAnimation(e){if(this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof Hl){let r=this.adoptionEffect.current();this.adoptionEffect=new mm({from:r,to:1,durationSec:.2,pivot:e})}else this.adoptionEffect instanceof _1&&(this.adoptionEffect=void 0)}hasScaleChangeAnimation(){return this.adoptionEffect instanceof Hl}setScaleChangeAnimation(e,r){if(this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof Hl){let o=this.adoptionEffect.current();this.adoptionEffect=new Hl({from:o,to:e,duration:.2,pivot:r})}}updatePivotForScaleChangeAnimation(e,r){this.adoptionEffect instanceof Hl&&(this.adoptionEffect.to!==e?this.setScaleChangeAnimation(e,r):this.adoptionEffect.pivot=r)}setTranslucentEffectByAdoption(){this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof mm||(this.adoptionEffect instanceof Hl?this.adoptionEffect.alpha=.75:this.adoptionEffect=new _1(.75))}unsetTranslucentEffect(){this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof mm||(this.adoptionEffect instanceof Hl?this.adoptionEffect.alpha=1:this.removeAdoptionEffect())}removeAdoptionEffect(){this.adoptionEffect=void 0}onConnectorUp({pt:e,from:r,root:o,ignoreFoldHandle:i,focused:s,mtx:a,isClick:l}){let{card:c}=this;if(!c.canBeConnectedFrom(r))return!1;let d=!1;if(this.card.foldHandleVisible()&&Si(this.foldHandleBounds(s,a),e)){if(i)return!1;d=!0}else if(!this.card.isVisibleInCardTree(o)||!Si(this.card.bounds,e))return!1;if(c.prev?this.callback.onConnectorDisconnected(c.prev):c.prevGroup&&this.callback.onConnectorDisconnected(c.prevGroup),l)return!1;let u=d||c.isFolded||r.isFolded;return this.callback.onConnectorConnected(r.tail(),this.card,u),!0}applyResizeEffect({x:e,y:r,committed:o,corner:i,zoom:s}){!this.resizeStartSize||(m_(i)?this.callback.onContentMarginsChanged(ZP({card:this.card,point:{x:e,y:r},corner:i,committed:o,startBounds:this.resizeStartSize.card,startContentWithMargins:this.resizeStartSize.contentWithMargins,zoom:s})):this.callback.onCardSizesChanged(JP({card:this.card,point:{x:e,y:r},grouped:this.card.isFolded,committed:o,corner:i,startBounds:this.resizeStartSize.card,zoom:s})))}getObjectUnderPoint(e){let r=this.getObjectUnderPointInternal(e);if(!(this.card.pinned&&r!=="card"&&r!="bbLeftTop"))return r}getObjectUnderPointInternal({root:e,ev:r,mtx:o,focused:i,toolVisible:s}){let a=this.card.isVisibleInCardTree(e),l=hm(this.card,o.a/devicePixelRatio);if(a){let p=o.invert().cross(r.x,r.y);if(i){let h=this.checkBoundingBoxControlHit(p.x,p.y,o);if(h&&l.resizable)return h}if(l.movable&&Si(this.card.bounds,p))return"card";if(this.card.foldHandleVisible()&&l.connectable&&Si(this.foldHandleBounds(i,o),p))return"foldHandle";if(this.card.connectorHandleVisible()&&l.connectable&&Si(this.connectorHandleBounds(i,o),p))return"connectorHandle"}let c=this.accessoryScale(i,o),d=this.card.next||this.card.nextGroup,u=!1;if(this.card!==e&&d&&(u=d.isVisibleInCardTree(e)),l.connectable&&d&&(a&&!this.card.isFolded||!a&&d===this.card.nextGroup)&&u&&BX({ev:r,mtx:o,from:this.card,to:d,asDifferentGroup:d===this.card.nextGroup,handleScale:c,toolVisible:s,dpr:window.devicePixelRatio}))return"connection"}invalidateMipmapWithLevel(e){let r=this.card,o=r.document!=null,i=o||r.drawnAssetId("drawn")!=null,s=o||r.drawnAssetId("annotation")!=null,a=h_(r)||o,l=gr.get(r),c=[];if(a&&c.push(l.content.load(e,r)),o&&c.push(l.document.load(e,r)),i&&c.push(l.drawn.load(e,r)),s&&c.push(l.annotation.load(e,r)),c.length===0){this.setLoadState("loaded");return}this.setLoadState("loading"),Promise.all(c).finally(()=>{this.setLoadState("loaded")})}invalidateMipmap(e){let r=wo.getLevel(this.card.size,e);this.invalidateMipmapWithLevel(r)}get moveCardTarget(){return this._moveCardTarget}onDown({ev:e,mtx:r,focused:o,root:i,toolVisible:s}){var l;let a=this.getObjectUnderPoint({ev:e,mtx:r,focused:o,root:i,toolVisible:s});if(!(!a||!this.callback.shouldHandleCardEvent({type:"down",target:a}))){if(this.handlingComponent=a,this.setActive(!0,this.handlingComponent==="foldHandle"),this.handlingComponent==="connection"){let d=r.clone().invert().cross(e.x,e.y);this.callback.onConnectorDisconnected(this.card),this.callback.onConnectorMoved(this.card,d,!0)}else if(this.handlingComponent==="card"||this.handlingComponent==="foldHandle"||this.handlingComponent==="bbLeftTop"){let c=tC(this.card,i);c&&(this._moveCardTarget={card:c,originState:{position:Re(c.position),parentId:(l=c.parent)==null?void 0:l.id}},this.callback.onCardHeld(c,this.handlingComponent==="foldHandle"))}else if(f_(this.handlingComponent)){this.resizeStartSize={card:this.card.bounds,contentWithMargins:this.card.contentSizeWithMargins};let d=n1(this.card,r).get(this.handlingComponent);if(d){let p=r.clone().invert().cross(e.x,e.y),h=em(r.a),f=Math.sign(d.x)*h,m=Math.sign(d.y)*h;this.downEventBBCornerOffset=new er(this.card.position.x+d.x-p.x-f,this.card.position.y+d.y-p.y-m)}else this.downEventBBCornerOffset=new er(0,0)}return this.handlingComponent}}onMove(e,r){if(!this.handlingComponent||!this.callback.shouldHandleCardEvent({type:"move",target:this.handlingComponent})||uo(e))return;let o=r.clone().invert(),i=e.dx/r.a,s=e.dy/r.a,a=Fg(e,e.down)/window.devicePixelRatio;if(this.handlingComponent==="card"||this.handlingComponent==="bbLeftTop")if(this._moveCardTarget&&!this._moveCardTarget.card.pinned){let l=this._moveCardTarget.card.position.x+e.dx/r.a,c=this._moveCardTarget.card.position.y+e.dy/r.a;this._moveCardTarget.card.isFolded?this.callback.onGroupMoved(this._moveCardTarget.card,{pos:{x:l,y:c},delta:Re(i,s)},!1):this.callback.onCardMoved(this._moveCardTarget.card,{x:l,y:c},!1)}else this.handlingComponent=void 0;else if(this.handlingComponent==="foldHandle"){if(a>2){let l=this.card.position.x+e.dx/r.a,c=this.card.position.y+e.dy/r.a;this.callback.onGroupMoved(this.card,{pos:{x:l,y:c},delta:Re(i,s)},!1)}}else if(this.handlingComponent==="connectorHandle"||this.handlingComponent==="connection"){let l=o.cross(e.x,e.y);this.callback.onConnectorMoved(this.card,l,!1)}else{if(this.card.pinned)return;if(f_(this.handlingComponent)&&this.downEventBBCornerOffset){let l=o.cross(e.x,e.y);this.applyResizeEffect({x:l.x+this.downEventBBCornerOffset.x,y:l.y+this.downEventBBCornerOffset.y,committed:!1,corner:this.handlingComponent,zoom:r.a/devicePixelRatio})}}return this.handlingComponent}moveCardOnUp(e,r){if(this.handlingComponent&&!this.callback.shouldHandleCardEvent({type:"move",target:this.handlingComponent})||!this._moveCardTarget||this._moveCardTarget.card.pinned)return;let o=e.dx/r.a,i=e.dy/r.a,s=this._moveCardTarget.card.position.x+e.dx/r.a,a=this._moveCardTarget.card.position.y+e.dy/r.a;this._moveCardTarget.card.isFolded?this.callback.onGroupMoved(this._moveCardTarget.card,{pos:{x:s,y:a},delta:Re(o,i)},!0):uo(e)||this.callback.onCardMoved(this._moveCardTarget.card,{x:s,y:a},!0)}onUp(e){var c,d;let{ev:r,mtx:o,root:i}=e,s=this.handlingComponent,a=r.dx/o.a,l=r.dy/o.a;if(this.handlingComponent&&this.callback.shouldHandleCardEvent({type:"up",target:this.handlingComponent})){let u=uo(r);if(this.handlingComponent==="card"){if(this.moveCardOnUp(r,o),u){let p;i?p=this.card:p=(d=(c=this._moveCardTarget)==null?void 0:c.card)!=null?d:this.card,this.callback.onCardClicked(p,r)}this.callback.onCardHeld(void 0,!1)}else if(this.handlingComponent==="foldHandle"){if(u)this.card.groupMemberCount()>1&&this.callback.onGroupStateChanged(this.card,!this.card.isFolded);else{let[p,h]=[this.card.position.x+r.dx/o.a,this.card.position.y+r.dy/o.a];this.callback.onGroupMoved(this.card,{pos:{x:p,y:h},delta:Re(a,l)},!0)}this.callback.onCardHeld(void 0,!1)}else if(this.handlingComponent==="bbLeftTop")this.moveCardOnUp(r,o),u&&this.callback.onCardFullscreenButtonClicked(this.card),this.callback.onCardHeld(void 0,!1);else if(f_(this.handlingComponent)&&this.downEventBBCornerOffset){if(this.card.pinned)return;{let h=o.clone().invert().cross(r.x,r.y);this.applyResizeEffect({x:h.x+this.downEventBBCornerOffset.x,y:h.y+this.downEventBBCornerOffset.y,committed:!0,corner:this.handlingComponent,zoom:o.a/devicePixelRatio}),this.downEventBBCornerOffset=void 0,this.resizeStartSize=void 0}}}return this.setActive(!1,this.handlingComponent==="foldHandle"),this.handlingComponent=void 0,this._moveCardTarget=void 0,s}predictPointerEventResponse({ev:e,mtx:r,root:o,toolVisible:i}){if(this.handlingComponent&&this.handlingComponent!=="card")return Mo.Never;if(!this.callback.shouldHandleCardEvent({type:"down",target:"card"}))return Mo.Ignore;let s=this.getObjectUnderPoint({ev:e,mtx:r,focused:!1,root:o,toolVisible:i});return s===void 0?Mo.Ignore:s==="card"?Mo.Handle:Mo.Never}isFolding(){var e;return!!((e=this.foldAnimation)==null?void 0:e.current().visible)}isMoving(){return!!(this.foldAnimation||this.insertAnimation||this.resizeAnimation)}hasAnimation(){return!!(this.foldAnimation||this.insertAnimation||this.highlightAnimation||this.resizeAnimation||this.adoptionEffect)}shouldAnimate(e){return e!==this.card}isMovingInCardTree(e){let r=this.card;for(;r&&r!==e;){if(Dt(r,this.callback).isMoving())return!0;r=r.parent}return!1}translationInAnimation(){let[e,r]=[0,0],{x:o,y:i}=this.card.position;if(this.foldAnimation){let s=this.foldAnimation.current();e=s.x-o,r=s.y-i}else if(this.insertAnimation){let s=this.insertAnimation.current();e=s.x-o,r=s.y-i}else if(this.resizeAnimation){let[s]=this.resizeAnimation.current();e=s.x-o,r=s.y-i}else if(this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof Hl||this.adoptionEffect instanceof mm){let s=this.adoptionEffect.pivot,a=this.adoptionEffect.current(),c=new ft().translate(-s.x,-s.y).scale(a).translate(s.x,s.y).applied(this.card.position);e=c.x-o,r=c.y-i}return[e,r]}scaleInAnimation(){if(this.resizeAnimation){let[e,r]=this.resizeAnimation.current();return[r.width/this.card.size.width,r.height/this.card.size.height]}else if(this.adoptionEffect instanceof Rc||this.adoptionEffect instanceof Hl||this.adoptionEffect instanceof mm){let e=this.adoptionEffect.current();return[e,e]}return[1,1]}localTransform(){let[e,r]=this.translationInAnimation(),[o,i]=this.scaleInAnimation();return new ft(o,0,0,i,e,r)}globalAlphaMultiplier(){return this.foldAnimation?this.foldAnimation.current().alpha:this.adoptionEffect instanceof Hl?this.adoptionEffect.alpha:this.adoptionEffect instanceof _1?this.adoptionEffect.alpha:1}get textFrame(){return this.textFrameUpdater.get()}get textSelectedRange(){return this._textSelectedRange}setTextSelectedRange(e){this._textSelectedRange=e,this.marker.mark()}get textCompositionRange(){return this._textCompositionRange}setTextCompositionRange(e){this._textCompositionRange=e,this.marker.mark()}isInFoldAnimation(e){if(this.isFolding())return!0;for(let r of this.card.parentsIterator()){if(e===r)break;if(Dt(r,this.callback).isFolding())return this.card.isVisibleInGroup()}return!1}shouldRenderInCardTree({root:e,ignoreTransition:r}){let o=this.card.isVisibleInCardTree(e),i=!r&&this.isInFoldAnimation(e);return!(!o&&!i)}getViewRect({userId:e}={}){let{card:r}=this,o=new ki;o.add(r.bounds);let i=qo(r);if(r.foldHandleVisible()){let u=r.bounds.x-Xi-2*Oo-Ns*.5,p=r.bounds.y+r.bounds.height*.5-Oo-Ns*.5,h=2*Oo+Xi+Ns,f=2*Oo+Ns;o.add(nt(u*i,p*i,h*i,f*i))}if(r.connectorHandleVisible()){let p=yp*i*Math.SQRT1_2,h=r.bounds.x+r.bounds.width,f=r.bounds.y-p;o.add(nt(h,f,p,p))}if(r.isFolded&&r.isHead){let u=Ia*i;o.add(nt(r.bounds.x+u,r.bounds.y+u,r.bounds.width,r.bounds.height))}e!==r.author.id&&o.add(this.authorNameBounds());let s=o.rect;$e(s!=null);let a=this.localTransform();if(a.isIdentity)return s;let l=Or(r.bounds),c=s.x,d=s.y;return nt((c-l.x)*a.a+l.x+a.tx,(d-l.y)*a.d+l.y+a.ty,s.width*a.a,s.height*a.d)}setEmphasizeEffect(e){this.emphasizeEffect=e}hasCardEmphasizeEffect(){return this.emphasizeEffect}borderColor(){var r;let e=this.card.content.backcolor;return((r=this.borderColorCache)==null?void 0:r.baseColor)===e?this.borderColorCache.color:(this.borderColorCache={baseColor:e,color:NQ(this.card)},this.borderColorCache.color)}};function K0({cards:t,callback:e,state:r,mtx:o}){let i=[];for(let l of t)i=i.concat(Array.from(BQ({card:l,callback:e,state:r,mtx:o})));let{root:s,remotePointers:a}=r;return!s&&a&&(i=i.concat(Array.from(LQ({remotePointers:a,mtx:o})))),{type:"container",globalMtx:o,localMtx:new ft,styles:{},layout:{},props:{},children:i,visible:!0,layer:"static"}}function*BQ({card:t,callback:e,state:r,mtx:o}){var N;let{root:i,userId:s,visibleRect:a,cards:l}=r,d=!!((N=l[t.id])!=null?N:{}).focused,u=i===t,p=Dt(t,e),h=p.shouldRenderInCardTree({root:i,ignoreTransition:u}),f=new ki;for(let V of t.familyIterator()){let W=Dt(V,e);f.add(W.getViewRect({userId:s}))}let m=f.rect,g=!0;a&&(g=ks(m,a));let v=h&&(!a||g),{x:y,y:S}=t.localPosition,C;p.shouldAnimate(i)?C=p.localTransform().translate(y,S):C=new ft(1,0,0,1,y,S);let b=qo(t),x=o.clone().prependMatrix(C),w=hh({card:t,zoom:x.a,focused:d,dpr:window.devicePixelRatio}),k=_g(r.viewport),T=g_(t.size,x.a,k),A={position:t.position,localPosition:t.localPosition,bounds:t.bounds,localBounds:t.localBounds,localContentBounds:t.contentLocalBounds,scaleToParent:b,accessoryScale:w,borderScale:T,coverSizeClass:pm(r.canvas,t),canvasScale:P1(r.canvas,t)},E=xO(t,e,r),F=SA({card:t,rend:p,mtx:x,state:r}),z=[],L={id:t.id};for(let V of t.children)for(let W of BQ({card:V,callback:e,state:r,mtx:x}))z.push(W);yield{type:"card",localMtx:C,globalMtx:x,styles:F,layout:A,props:L,children:z,visible:v,layer:E};let{remotePointers:R}=r;R&&(u?yield*LQ({remotePointers:R,editorRoot:t,mtx:o}):yield*cwe({cardId:t.id,localMtx:C,globalMtx:x,displayName:F.displayName,layer:E,visible:v,cardRect:t.localBounds,remotePointers:R})),yield*uwe({card:t,callback:e,state:r,mtx:o}),yield*pwe(t,x,b)}function*LQ({remotePointers:t,editorRoot:e,mtx:r}){for(let o of t){let{pointerType:i}=o;if(i==="connector"||(e==null?void 0:e.id)===o.cardId&&(i==="draw"||i==="text")){let s=new ft;e&&s.translate(e.localPosition.x-e.position.x,e.localPosition.y-e.position.y),yield{type:"pointer",globalMtx:r,localMtx:s,styles:{},layout:{},props:{pointer:o},layer:"hud",children:[],visible:!0}}}}function*cwe({cardId:t,localMtx:e,globalMtx:r,displayName:o,layer:i,visible:s,cardRect:a,remotePointers:l}){let c=l.filter(d=>d.pointerType!=="connector"&&d.cardId===t);c.length>0&&(yield{type:"cardPointer",localMtx:e,globalMtx:r,styles:{needsMarginTop:!!o},props:{pointers:c},children:[],layer:i,visible:s,layout:{cardRect:a}})}function xO(t,e,r){var s;let o=(s=r.cards[t.id])!=null?s:{},i=Dt(t,e);return t===r.root?"static":o.active||o.focused||o.hover||i.hasAnimation()||i.isActive()?"dynamic":"inherit"}function dwe(t,e,r,o){let i=xO(t,r,o),s=xO(e,r,o);return i==="dynamic"||s==="dynamic"?"dynamic":"inherit"}function*uwe({card:t,callback:e,state:r,mtx:o}){var k;let{visibleRect:i,toolVisible:s,root:a}=r,l=a===t,c=t,d=t.next||t.nextGroup;if(l||!d)return;let u=o.clone(),p=new ft,h=Dt(c,e),f=Dt(d,e);c.isFolded&&(c=t.head(),h=Dt(c,e)),p.translate(c.localPosition.x-c.position.x,c.localPosition.y-c.position.y);let m=((k=r.cards[d.id])==null?void 0:k.focused)===!0,g=hh({card:d,zoom:o.a,focused:m,dpr:window.devicePixelRatio}),v=h.localTransform(),y=f.localTransform(),[S,C]=OX({from:{card:c,mtx:v},to:{card:d,mtx:y},asDifferentGroup:d===t.nextGroup,handleScale:g,visibleRect:i,toolVisible:s}),b=dwe(c,d,e,r),w=d.isVisibleInCardTree(a)&&!h.isMovingInCardTree(a)&&!f.isMovingInCardTree(a)&&C;yield{type:"connector",localMtx:p,globalMtx:u,layout:S,visible:w,layer:b,props:{},styles:{color:Ca.toCSSRGBA(),borderColor:Ic.toCSSRGBA()},children:[]}}function*pwe(t,e,r){if(t.dashedConnectorPosition){let o=t.isFolded?t.head():t,{x:i,y:s,width:a}=o.bounds,l=Re(i+a,s),c=HX(l,t.dashedConnectorPosition,r),d=new ft;d.translate(o.localPosition.x-o.position.x,o.localPosition.y-o.position.y),yield{type:"connector",localMtx:d,globalMtx:e,layout:{orbits:c,lineScale:r},props:{},layer:"hud",styles:{color:Ca.toCSSRGBA(),borderColor:Ic.toCSSRGBA()},visible:!0,children:[]}}}function OQ(t){let{ctx:e,bounds:r}=t,o=.4,i=Date.now()/1e3,{x:s,y:a,width:l,height:c}=r,d=l/56,u=l/224,p=s+l/2-d,h=a+c/2,f=i%o,m=o/3;e.save();for(let g=0;g<3;g++){let v="#aaa";m*g<=f&&f<m*(g+1)&&(v="#fff"),e.beginPath(),e.fillStyle=v,e.arc(p+g*d,h,u,0,Math.PI*2,!0),e.fill()}e.restore()}function rC(t,e){!e.visible||(e.type==="card"?hwe(t,e):e.type==="connector"?fwe(t,e):e.type==="pointer"?mwe(t,e):e.type==="cardPointer"?vwe(t,e):bwe(t,e))}function hwe(t,e){let{styles:r,globalMtx:o,localMtx:i,layout:s}=e,{scaleToParent:a,accessoryScale:l,borderScale:c,localBounds:d}=s,{x:u,y:p,width:h,height:f}=d,m=u+h,g=o.a/devicePixelRatio,{strings:v}=De.get();if(t.save(),t.transform(i.a,i.b,i.c,i.d,i.e,i.f),t.globalAlpha*=r.alphaMultiplier,r.shade&&(t.save(),t.beginPath(),t.fillStyle=pn(r.shade).toCSSRGBA(),t.fillRect(u+Ia*a,p+Ia*a,h,f),t.restore()),r.background&&(t.save(),t.beginPath(),t.fillStyle=pn(r.background).toCSSRGBA(),t.fillRect(u,p,h,f),t.restore()),r.border){t.save(),t.beginPath(),t.strokeStyle=pn(r.border).toCSSRGBA();let C=Math.min(1/g,1);t.lineWidth=C,t.strokeRect(u-C/2,p-C/2,h+C,f+C),t.restore()}if(t.save(),t.beginPath(),t.rect(u,p,h,f),t.clip(),r.contentThumb&&wO(t,r.contentThumb),r.webCard&&Swe(t,r.webCard,d),r.pdf&&r.pdf.render(t,o),r.text.frame){let{frame:C,selectedRange:b,compositionRange:x}=r.text;t.save(),t.translate(-h/2,-f/2),C.draw(t,{selectedRange:b,compositionRange:x}),t.restore()}if(r.quiz&&(t.save(),qX({ctx:t,layout:s,styles:r.quiz}),t.restore()),r.attendance&&(t.save(),JX({ctx:t,styles:r.attendance,layout:s}),t.restore()),r.documentThumb&&wO(t,r.documentThumb),t.restore(),r.playable&&ywe(t,d),r.loading&&OQ({ctx:t,bounds:d}),r.broken){let C=Vt.brokenCardIcon.getOrLoad();C&&Cwe(t,d,C)}for(let C of e.children)rC(t,C);let y=["drawn","annotation"];for(let C of y){let b=r.strokes[C];!b||(t.save(),b.clip&&(t.beginPath(),t.rect(b.clip.x,b.clip.y,b.clip.width,b.clip.height),t.clip()),b.thumb&&wO(t,b.thumb),b.fineStrategy&&b.fineRenderer&&(b.fineRedrawParams&&b.fineRenderer.redrawFineThumbnail(b.fineRedrawParams),b.fineRenderer.bitbltFineCanvas({ctx:t,mtx:o,type:C})),t.restore())}if(r.favorite){let C=2*c;t.save(),t.beginPath(),t.strokeStyle=Jk.toRGBAHex(),t.lineWidth=C,t.strokeRect(u+C/2,p+C/2,h-C,f-C),t.restore()}if(r.emphasize){let C=3/g;t.save(),t.globalAlpha=1,t.beginPath(),t.strokeStyle=Zk.toRGBAHex(),t.lineWidth=C,t.strokeRect(u,p,h,f),t.restore()}if(r.groupHandle){let C=Oo*l,b=Xi*l,x=Vk*l,w=u-b-C,k=new D1,T=new lh;T.moveTo(u,0),T.lineTo(u-b,0),T.arc(w,0,C,0,Math.PI*2,!0),k.addOrbit(T);let A=new lh;A.moveTo(w-x,0),A.lineTo(w+x,0),r.groupHandle.open||(A.moveTo(w,-x),A.lineTo(w,x)),k.addOrbit(A,{lineCap:"round"}),t.save(),W0(t,k,l),t.restore()}if(r.connectorHandle){let C=yp*l,b=new er(1,-1).normalize(),x=Re(m+b.x*C,p+b.y*C),w=(V0+Mv)*l,k=Re(x.x-b.x*w,x.y-b.y*w),{orbits:T,lineEnd:A}=hA({stemFrom:k,stemTo:x}),E=new lh;E.moveTo(m,p),E.lineTo(A.x,A.y),T.addOrbit(E,{lineCap:"round"}),t.save(),W0(t,T,l),t.restore()}if(r.boundingBox){let{corners:C,resizable:b}=r.boundingBox,x=2*c,w=5*c;t.save(),t.beginPath(),t.strokeStyle="#ddd",t.lineWidth=x,t.setLineDash([w,x]),t.strokeRect(u-x/2,p-x/2,h+x,f+x),t.setLineDash([]),Twe(t,g,C,b),t.restore()}if(r.highlight!==void 0){let C=4/g;t.save(),t.beginPath(),t.strokeStyle=`rgba(255,255,255,${r.highlight})`,t.lineCap="round",t.lineJoin="round",t.lineWidth=C,t.strokeRect(u-C,p-C,h+C*2,f+C*2),t.restore()}let S=Vt.pinIcon.getOrLoad();if(r.pinned&&S){t.save();let C=20*a,b=20*a,x=u+h/2+C*.1,w=p-b+b*.3;t.drawImage(S,x-C/2,w,C,b),t.restore()}r.displayName&&(t.save(),t.fillStyle="white",t.textAlign="start",t.textBaseline="alphabetic",t.font=`12px "${v.uiFontName}"`,t.fillText(r.displayName,u,p+f+24),t.restore()),t.restore()}function fwe(t,e){let{localMtx:r,layout:o}=e;t.save(),t.transform(r.a,r.b,r.c,r.d,r.e,r.f),W0(t,o.orbits,o.lineScale),t.restore()}function mwe(t,e){let{localMtx:r,globalMtx:o,props:i}=e,{pointer:s}=i;$e(s.pointerType!=="card");let a=o.a/devicePixelRatio,l=bN/a,c=CN/a,u=yN/a/2,{x:p,y:h,width:f,height:m}=Dwe(s),{name:g}=s.user,{strings:v}=De.get();t.save(),t.transform(r.a,r.b,r.c,r.d,r.e,r.f),t.textBaseline="middle",t.font=`${l}px "${v.uiFontName}"`;let{width:y}=t.measureText(g);s.pointerType==="text"&&(t.lineWidth=3/a,t.strokeStyle=xN.toRGBAHex(),t.strokeRect(p,h,f,m)),t.translate(p+f,h),t.beginPath(),t.moveTo(0,0),t.lineTo(u,-u),t.lineTo(u+c*2+y,-u),t.arc(u+c+y,0,u,-Math.PI/2,Math.PI/2),t.lineTo(u,u),t.lineTo(0,0),t.closePath(),t.fillStyle=wN.toRGBAHex(),t.fill(),t.fillStyle=rn().toRGBAHex(),t.fillText(g,u+c,0),t.restore()}function gwe(t,e,r){let o=CN/r,i=yN/r,s=i/2,{strings:a}=De.get(),l=bN/r;t.save(),t.textBaseline="middle",t.font=`${l}px "${a.uiFontName}"`,e.forEach((c,d)=>{let{name:u}=c.user;t.translate(0,i*d+10/r);let{width:p}=t.measureText(u);t.beginPath(),t.moveTo(s,0),t.lineTo(s*2+o+p,0),t.arc(s*2+o+p,s,s,-Math.PI/2,Math.PI/2),t.lineTo(s,i),t.arc(s,s,s,Math.PI/2,Math.PI*3/2),t.closePath(),t.fillStyle=wN.toRGBAHex(),t.fill();let h;c.pointerType==="draw"?h=Vt.penPointer.getOrLoad():c.pointerType==="text"?h=Vt.textPointerIcon.getOrLoad():h=Vt.fingerPointerIcon.getOrLoad(),h&&t.drawImage(h,0,0,i,i),t.fillStyle=rn().toRGBAHex(),t.fillText(u,s*2+o,s)}),t.restore()}function vwe(t,e){let{localMtx:r,globalMtx:o,styles:i,props:s,layout:a}=e,l=o.a/devicePixelRatio,{x:c,y:d,width:u,height:p}=a.cardRect;t.save(),t.transform(r.a,r.b,r.c,r.d,r.e,r.f),t.lineWidth=3/l,t.strokeStyle=xN.toRGBAHex(),t.strokeRect(c,d,u,p),t.translate(c,d+p+(i.needsMarginTop?24:0)),gwe(t,s.pointers,l),t.restore()}function bwe(t,e){let{localMtx:r}=e;t.save(),t.transform(r.a,r.b,r.c,r.d,r.e,r.f);for(let o of e.children)rC(t,o);t.restore()}function ywe(t,e){let r={width:42,height:42},o=Rr(r)/Rr(Gt),i=Rr(e)*o,s=ts(r,i),a=r.width*s/2;t.save(),t.beginPath(),t.lineWidth=s,t.fillStyle="rgba(0,0,0,0.3)",t.arc(0,0,a+2*s,0,Math.PI*2,!0),t.fill();{let l=a*.75;t.save(),t.beginPath(),t.rotate(Math.PI/6),t.moveTo(Math.cos(Math.PI/2)*l,Math.sin(Math.PI/2)*l),t.lineTo(Math.cos(Math.PI*7/6)*l,Math.sin(Math.PI*7/6)*l),t.lineTo(Math.cos(-Math.PI/6)*l,Math.sin(-Math.PI/6)*l),t.closePath(),t.fillStyle="#fff",t.fill(),t.restore()}t.beginPath(),t.strokeStyle="#fff",t.lineWidth=2*s,t.arc(0,0,a,0,Math.PI*2,!0),t.stroke(),t.restore()}function Cwe(t,e,r){let o={width:42,height:42},i=Rr(o)/Rr(Gt),s=Rr(e)*i,a=ts(o,s),l=o.width/2*a;t.save(),t.drawImage(r,-l,-l,l*2,l*2),t.restore()}function wO(t,e){let{image:r,x:o,y:i,width:s,height:a}=e;if(t.save(),s!=null&&a!=null)if(r instanceof SVGElement||r instanceof HTMLVideoElement)t.drawImage(r,o,i,s,a);else{let l=Cn({width:s,height:a},r),c=new ft().translate(-o,-i).scale(l,l).translate(o,i);t.transform(c.a,c.b,c.c,c.d,c.e,c.f),t.drawImage(r,o,i)}else t.drawImage(r,o,i);t.restore()}function Swe(t,e,r){let{urlDomainLabel:o}=e;t.save();let i=r.width,s=r.height*.1,a=Ho({width:i,height:s}),l=20*a,c=r.x+l,d=r.y+r.height-l,{strings:u}=De.get();t.font=`${l}px '${u.uiFontName}'`,t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=l/20,t.strokeText(o,c,d),t.fillStyle="#555555FF",t.fillText(o,c,d),t.restore()}function kA(t,e,r,o,i,s){let a=wwe(e,o,i,s);t.save(),t.lineWidth=r*2,t.strokeStyle="#ccc",t.stroke(a),t.fillStyle="#fff",t.fill(a),t.restore()}function xwe(t,e,r,o,i){t.save(),t.beginPath(),t.arc(o,i,e,0,Math.PI*2,!0),t.closePath(),t.lineWidth=r*2,t.strokeStyle="#ccc",t.stroke(),t.fillStyle="#fff",t.fill(),t.restore()}function wwe(t,e,r,o){let i=new er(t,0),s=Re(i.rotate(e)),a=Re(i.rotate(120)),l=Re(i.rotate(120)),c=new Path2D;return c.moveTo(s.x+r,s.y+o),c.lineTo(a.x+r,a.y+o),c.lineTo(l.x+r,l.y+o),c.closePath(),c}function Twe(t,e,r,o){let i=3.5/e,s=1/e,a=i*2/3*2,l=a-i;for(let{x:c,y:d,type:u}of r){if(u==="bbLeftTop"){let p=Vt.fullScreenIcon.getOrLoad();if(p){let h=i*5*2,f=h/2-i/2;t.drawImage(p,c-f,d-f,h,h)}continue}if(!!o)switch(u){case"bbRightTop":case"bbLeftBottom":case"bbRightBottom":xwe(t,i,s,c,d);break;case"bbLeftMiddle":kA(t,a,s,0,c-l,d);break;case"bbCenterTop":kA(t,a,s,90,c,d-l);break;case"bbRightMiddle":kA(t,a,s,180,c+l,d);break;case"bbCenterBottom":kA(t,a,s,270,c,d+l);break}}}function Dwe(t){let{pointerType:e}=t;return e==="text"?t.caretRect:nt(t.point.x,t.point.y)}function ch({canvas:t,viewport:e,root:r,userId:o,fineRedrawStrategies:i,finePdfRenderer:s,fineStrokeRenderer:a,rootMipmapType:l,ignoreAnnotations:c,visibleRect:d,heldCardIds:u=[],hoverCardIds:p=[],assetUplaodStates:h={},assetThumbUploadStates:f={},focusingCardId:m,textEditingCardId:g,toolVisible:v,ignoreFavorites:y,quizButtons:S,attendanceButtons:C,dpr:b,remotePointers:x}){let w=new ni(()=>({}));for(let T of u)w.get(T).active=!0;m&&(w.get(m).focused=!0),g&&(w.get(g).textEditing=!0);for(let T of p)w.get(T).hover=!0;for(let[T,A]of Object.entries(h))w.get(T).assetUploadState=A;for(let[T,A]of Object.entries(f))w.get(T).assetThumbUploadState=A;if(r){let T=w.get(r.id);i&&(T.fineStroke={drawn:i.get("drawn"),annotation:i.get("annotation")}),l&&(T.thumbType=l),S&&(T.quizButtons=S),C&&(T.attendanceButtons=C),s&&(T.pdfRenderer=s),a&&(T.fineStrokeRenderer=a)}return{canvas:t,viewport:e,userId:o,root:r,toolVisible:v,ignoreAnnotations:c,ignoreFavorites:y,visibleRect:d,dpr:b,remotePointers:x,cards:nn(w.entries())}}function fh(t){let{ctx:e,mtx:r,card:o,cardRendererCallback:i,root:s}=t,a=i||Oi,l=ch(t),c=r.clone();if(e.save(),s){let u=o.localPosition;c.translate(-u.x,-u.y),e.translate(-u.x,-u.y)}let d=K0({cards:[o],callback:a,mtx:c,state:l});rC(e,d),e.restore()}var Ui=class{constructor(e){this.data=e}stringify(){return JSON.stringify(this.data)}};var kwe=t=>t.match(/password|token/i)!=null,TO=class{constructor(e,r=kwe){this.konsole=e;this.redactor=r}logEntries(e,r){let o=[];for(let i of r){let[s,a]=i;this.redactor(s)&&(a="[REDACTED]"),o.push({name:s,value:zQ(a)})}this.konsole.groupCollapsed(e),this.konsole.table(o),this.konsole.groupEnd()}logHttpBody(e){e instanceof Ui?this.logEntries("Body",Object.entries(e.data)):e instanceof URLSearchParams?this.logEntries("Body",e):e instanceof FormData?this.logEntries("Body",e):(this.konsole.groupCollapsed("Body"),this.konsole.log(zQ(e)),this.konsole.groupEnd())}};function zQ(t){if(t instanceof File){let{lastModified:e,name:r,size:o,type:i}=t;return{objectType:"File",lastModified:e,name:r,size:o,type:i}}else if(t instanceof Blob){let{size:e,type:r}=t;return{objectType:"Blob",size:e,type:r}}return t}var R1=class extends Error{constructor(e="operation timeout"){super(e)}};var Vl=class{constructor({method:e,url:r,body:o,signal:i}){this.headers=new Headers;var s;this.method=e.toUpperCase(),r.match(/^https?:\/\//)?this.url=new URL(r):this.url=new URL(r,(s=globalThis.origin)!=null?s:"http://dummy"),this.body=o,this.signal=i,o instanceof Ui&&this.setContentType("application/json;charset=UTF-8")}setContentType(e){this.headers.set("content-type",e)}addParam(e,r){this.body instanceof Ui?this.body.data[e]=r:this.body instanceof FormData?this.body.set(e,r):this.body instanceof URLSearchParams?this.body.set(e,r):this.url.searchParams.set(e,r)}serializeBody(){return this.body instanceof Ui?this.body.stringify():this.body}fetch(e={}){return fetch(this.url.toString(),{method:this.method,headers:this.headers,body:this.serializeBody(),...e})}},F1=new TO(ge);async function Vu(t,{enableLog:e,noCache:r,responseType:o,keepalive:i}){e&&(ge.groupCollapsed(`${t.method} ${t.url.origin}${t.url.pathname}`),F1.logEntries("Queries",t.url.searchParams),F1.logEntries("Headers",t.headers),t.body&&F1.logHttpBody(t.body),ge.groupEnd());let s,a=!1;try{let d;if(t.signal)d=t.signal;else if(t.timeout){let u=new AbortController;d=u.signal,setTimeout(()=>{a=!0,u.abort()},t.timeout.delay*t.timeout.unit)}s=await t.fetch({cache:r?"no-cache":"default",signal:d,keepalive:i})}catch(d){if(a)throw new R1;let p=Pl(d).message;throw new Sp(p)}let l=s.status,c;try{if(l===200||l===201){if(o==="raw")c=s;else if(o==="json")c=await s.json();else if(o==="arrayBuffer")c=await s.arrayBuffer();else if(o==="blob")c=await s.blob();else if(o==="text")c=await s.text();else if(o==="headers")c=s.headers;else throw new Error("invalid responseType: "+o);return c}else{let d="";try{d=await s.text(),c=d}catch(u){}throw new Yr(l,d)}}finally{if(e){let d=`%c${l} %c${t.method} ${t.url.origin}${t.url.pathname}`,u=l<300?"lime":"red";ge.groupCollapsed(d,`color: ${u}; font-weight:bold;`,"color: font-weight:bold;"),F1.logEntries("Headers",s.headers),F1.logHttpBody(c),ge.groupEnd()}}}var Ov=class{constructor(e){this.options=e}async create(e){return this.send({method:"POST",url:"/api/attendance/new",responseType:"json",appToken:e})}async getCoverData(e,r){return this.send({method:"GET",url:`/api/attendance/${e}/cover`,responseType:"json",appToken:r})}async fork(e,r){return(await this.send({method:"POST",url:`/api/attendance/${e}/fork`,responseType:"json",appToken:r})).attendanceId}async send(e){let{method:r,body:o,appToken:i,responseType:s}=e,a=`${this.options.lnaEndpoint}${e.url}`,l=new Vl({method:r,url:a,body:o});return l.headers.append("content-type","application/json; charset=UTF-8"),l.headers.append("x-loilo-app-token",i),l.headers.append("x-loilo-lns-endpoint",this.options.lnsEndpoint),Vu(l,{enableLog:this.options.logEnabled,responseType:s})}};var zv=class{constructor(e){this.options=e}async send(e){let{method:r,body:o,appToken:i}=e,a=`${this.options.lnqEndpoint}${e.url}`,l=new Vl({method:r,url:a,body:o});return l.headers.set("x-loilo-app-token",i),l.headers.set("x-loilo-lns-endpoint",this.options.lnsEndpoint),Vu(l,{enableLog:this.options.logEnabled,noCache:e.noCache,responseType:e.responseType})}async fork(e,r){return(await this.send({method:"POST",url:`/api/quiz/${e}/fork`,responseType:"json",appToken:r})).quizId}async getCoverData(e,r){return this.send({method:"GET",url:`/api/quiz/${e}/cover`,responseType:"json",appToken:r})}async createQuiz(e,r){return this.send({method:"POST",url:"/api/quiz",responseType:"json",body:new Ui({preset:e}),appToken:r})}};var DO=["test","survey"];function UQ(t){return fa(t,{quiz_id:ol,preset:zk(...DO),quiz_author:e=>fa(e,{id:ol,name:ol}),title:ol,question_count:un,isAnswered:Rx})}function PA(t){var e;return((e=t.state)==null?void 0:e.answeredCount)===t.questionCount}var $u=Cc();function M1(t){let e=[];for(let r of t.children)e.push(M1(r));return{id:t.id,children:e}}function qo(t){return t.parent?Ho(t.parent.size):1}function Ho(t){let e;t.width>=t.height?e=Ze(di):e=Ze(di.height,di.width);let r=pi(e.width,e.height,t.width,t.height);return pc(t.height,t.height*r,1)}function HQ(t,e){for(let r of t.bubblingOrderIterator())if(r.id!==e.id&&_l(r.bounds,e.bounds)&&r.isVisibleInCardTree(void 0))return r}function nC({cardHolder:t,card:e,desktopScale:r,forHitTest:o,pivot:i,rootCard:s}){for(let a of t.bubblingOrderIterator()){if(a.id===e.id||!a.isVisibleInCardTree(s)||a.isDescendantOf(e.id))continue;let l=Rwe(a,[e],r,o),d=new ft().translate(-i.x,-i.y).scale(l).translate(i.x,i.y).applied(e.bounds);if(a===e.parent){if(ks(a.bounds,d))return{card:a,scale:l}}else if(_l(a.bounds,d))return{card:a,scale:l}}}function bm(t){return!!(t.type==="audio"||t.type==="video"||t.gadgets.bgm&&t.gadgets.bgm.asset||t.gadgets.naration&&t.gadgets.naration.asset)}function vs(t){return t instanceof Yo||t instanceof Ao?{startSeconds:t.content.in_point,endSeconds:t.content.out_point,duration:Math.max(t.content.out_point-t.content.in_point,0)}:{startSeconds:0,endSeconds:t.duration,duration:t.duration}}function EA(t){return t instanceof Yo||t instanceof Ao?!1:t.unlimitedRecordingTime}function VE(t){return t instanceof Yo?t.content.source_volume:t instanceof Ao?t.content.is_source_muted?0:t.content.source_volume:1}function Pwe(t){let e=nt(t.content.margins.left,t.content.margins.top,t.contentSize.width,t.contentSize.height),r=t.contentSizeWithMargins;return t9({rect:e,inSize:r})}function GQ(t){let e=nt(0,0,t.bounds.width,t.bounds.height),r=e9({rect:e,withNormalizedRect:Pwe(t)});return Math.sqrt(Rr(r)/Rr(Gt))}function $p({card:t,clipLocalFontSize:e}){let r=GQ(t);return e*r}function _A({card:t,universalFontSize:e}){let r=GQ(t);return e/r}var Id=5;function lv({author:t,url:e,position:r=Re(),contentSize:o,scaleToParent:i=1,asset:s}){let a=o?xr(o,Gt):Gt;return a=Xt(a,i),{id:$u(),type:"web",metadata:{position:{left:r.x,top:r.y},layout_size:a,author:t,duration:Id,unlimited_recording_time:!0},content:{uri:e,size:Ze(o!=null?o:Yi),backcolor:rn().toARGBHex(),margins:Hn(),needs_display_url_domain:!0,asset:s},gadgets:{}}}function wB(t){let{author:e,quizContentBase:r,position:o,layoutSize:i,cardId:s,backcolor:a=rn().toARGBHex(),metadata:l={duration:Id,unlimited_recording_time:!0},gadgets:c={}}=t;return{id:s!=null?s:$u(),type:"quiz",metadata:{...l,position:{left:o.x,top:o.y},layout_size:i!=null?i:Ze(Gt),author:e},content:{size:Ze(Yi),backcolor:a,margins:Hn(),quiz_id:r.quiz_id,quiz_author:r.quiz_author,preset:r.preset,title:r.title,question_count:r.question_count,isAnswered:!1},gadgets:c}}async function oC(t,e,r=N1){let o=await ue.apiClient.getOgpMetadata(t),i=await r({author:e,decodedUrl:decodeURI(t),title:o.title,description:o.description});return{url:t,thumbnailFile:i,title:o.title}}var N1=async({author:t,decodedUrl:e,title:r,description:o})=>{let i={x:0,y:0},s="#FF000000",a="#00FFFFFF",l=Sd({position:i,color:s,backcolor:a,size:Ze(Gt),author:t}),c=l.metadata.layout_size.height,u=l.metadata.layout_size.width*.8,p=9,h=32,f=24,m=10,g=70;e.length>g&&(e=e.substr(0,g)+"...");let v=Sd({position:i,backcolor:a,color:Nx.url,author:t,size:{width:u,height:p},text:e,font_size:p*14});v.metadata.position={left:0,top:-(c/2)+8.4};let y=[];y.push(Sd({position:i,backcolor:a,color:Nx.title,author:t,size:{width:u,height:h},text:r,font_size:h*4})),o&&y.push(Sd({position:i,backcolor:Nx.descriptionBackground,color:Nx.description,author:t,size:{width:u,height:f},text:o,font_size:f*2})),y=Ewe(y,m,c,i.y),y.push(v);let S=Ys(l);y.forEach(b=>{S.addChild(Ys(b))});let C=_we(S);return xo(C,"image/png","webcard_thumb.png")};function Ewe(t,e,r,o){let i=o-r/2,s=0;t.forEach(l=>{s+=l.metadata.layout_size.height}),s+=e*(t.length-1);let a=(r-s)/2;return t.forEach(l=>{l.metadata.position.top=i+l.metadata.layout_size.height/2+a,a+=l.metadata.layout_size.height,a+=e}),t}function _we(t){let e=Vt.webCardThumbnailPlaceholder.getOrLoad(),r=xr(t.contentSizeWithMargins,c7),o=Dr.create(r),i=o.getContext2dForce();i.drawImage(e,0,0,e.width,e.height,0,0,o.width,o.height);let[s,a]=[o.width/2,o.height/2],l=Cn(o,t.size),c=new ft(l,0,0,l,s,a);return i.transform(c.a,0,0,c.d,c.e,c.f),fh({ctx:i,mtx:c,canvas:i.canvas,viewport:js(),root:t,card:t,toolVisible:!1,rootMipmapType:"content",dpr:1}),o}function TB(t){let{author:e,contentBase:r,position:o,layoutSize:i,cardId:s,backcolor:a=rn().toARGBHex(),metadata:l={duration:Id,unlimited_recording_time:!0},gadgets:c={}}=t;return{id:s!=null?s:$u(),type:"attendance",metadata:{...l,position:{left:o.x,top:o.y},layout_size:i!=null?i:Ze(Gt),author:e},content:{size:Ze(Yi),backcolor:a,margins:Hn(),attendance_id:r.attendanceId,title:r.title,attendance_author:{...r.author}},gadgets:c}}function AA({type:t,...e}){var o,i,s,a,l,c,d,u;let r={text:(o=e.text)!=null?o:"",forecolor:(i=e.forecolor)!=null?i:qn().toARGBHex(),vertical:(s=e.vertical)!=null?s:!1,h_alignment:((a=e.h_alignment)!=null?a:t==="audio")?"center":"left",v_alignment:(l=e.v_alignment)!=null?l:"middle",font_size:(c=e.font_size)!=null?c:$k,attributes:(d=e.attributes)!=null?d:[],attribute_ranges:(u=e.attribute_ranges)!=null?u:[]};if(r.text!==""){let p=Zs(r.text,[{type:"font",value:{bold:!1,size:r.font_size}},{type:"foreground_color",value:r.forecolor},{type:"paragraph_style",value:{line_spacing:0}}]),{attributes:h,attribute_ranges:f}=p;r.attributes=h,r.attribute_ranges=f}return r}function Sd({id:t,backcolor:e=rn().toARGBHex(),author:r,color:o=qn().toARGBHex(),position:i=Re(),size:s=Ze(Gt),text:a,font_size:l}){return{id:t!=null?t:$u(),type:"title",metadata:{position:{left:i.x,top:i.y},layout_size:Ze(s),author:r,duration:Id,unlimited_recording_time:!0},content:{backcolor:e,size:Ze(Yi),margins:Hn()},gadgets:{title:AA({type:"text",forecolor:o,text:a,font_size:l})}}}function DB(t){return t===void 0?rn().toARGBHex():t instanceof ym||t instanceof Yo?Awe(t):t instanceof Bs&&t.content.usage==="thinking_tool"?rn().toARGBHex():qn().toARGBHex()}function Awe(t){let e,r;for(let{backgroundColor:o,textColor:i}of Wk){let s=M7(Fn(t.content.backcolor),Pt(o));(r===void 0||r>s)&&(r=s,e=Pt(i).toARGBHex())}return e!=null?e:qn().toARGBHex()}function Wp({scaleToParent:t=1,asset:e,contentSize:r,author:o,position:i=Re()}){let s={backcolor:Ra.toARGBHex(),size:Ze(r),margins:Hn(),asset:e},a=$u(),l=Xt(xr(r,Gt),t);return{id:a,type:"picture",metadata:{position:{left:i.x,top:i.y},layout_size:l,author:o,duration:Id,unlimited_recording_time:!0},content:s,gadgets:{}}}function VQ(t){let e=t.width>t.height?Yi:{width:Yi.height,height:Yi.width},r=pi(e.width,e.height,t.width,t.height);return{width:t.width*r,height:t.height*r}}function Iwe({contentSize:t,margins:e,canvasSize:r}){let o=bu(t,{x:0,y:0,width:r.width,height:r.height}),i=o.width/t.width,s=o.height/t.height,a=o.x-e.left*i,l=o.y-e.top*s;return new ft(i,0,0,s,a,l)}function $Q({contentSize:t,margins:e,canvasSize:r}){let{width:o,height:i}=Ze(t.width+e.left+e.right,t.height+e.top+e.bottom),s=nt(0,0,o,i),a=nP(s,Iwe({contentSize:t,margins:e,canvasSize:r}));return{x:a.x/r.width,y:a.y/r.height,width:a.width/r.width,height:a.height/r.height}}function Rl({author:t,asset:e,pageIndex:r,pageSize:o,layoutSize:i,margins:s=Hn(),position:a,usage:l="compatible"}){let c={page_size:o,page_index:r,margins:{...s},asset:e,backcolor:l==="thinking_tool"?O7.toARGBHex():Ra.toARGBHex(),usage:l};return{id:$u(),type:"pdf",metadata:{position:{left:a.x,top:a.y},layout_size:Ze(i),author:t,duration:Id,unlimited_recording_time:!0},content:c,gadgets:{}}}var kO=qn();function cv({position:t,author:e,duration:r,asset:o,contentSize:i,scaleToParent:s=1}){var c,d;let a=AA({type:"audio",forecolor:kO.toARGBHex()}),l=i?xr(i,Gt):Gt;return l=Xt(l,s),{id:$u(),type:"audio",metadata:{position:{left:(c=t==null?void 0:t.x)!=null?c:0,top:(d=t==null?void 0:t.y)!=null?d:0},layout_size:l,author:e,duration:r,unlimited_recording_time:!0},content:{size:Ze(i!=null?i:Yi),backcolor:rn().toARGBHex(),asset:o,in_point:0,out_point:r,source_volume:1,is_source_muted:!1,margins:Hn()},gadgets:{title:a}}}function jp({scaleToParent:t=1,asset:e,duration:r,author:o,position:i,contentSize:s}){var l,c;let a=s?xr(s,Gt):Gt;return a=Xt(a,t),{id:$u(),type:"video",metadata:{position:{left:(l=i==null?void 0:i.x)!=null?l:0,top:(c=i==null?void 0:i.y)!=null?c:0},layout_size:a,author:o,duration:r,unlimited_recording_time:!0},content:{size:Ze(s!=null?s:Yi),backcolor:Ra.toARGBHex(),asset:e,in_point:0,out_point:r,source_volume:1,is_source_muted:!1,margins:Hn()},gadgets:{}}}function WQ(t){let e=t.content,r=e.size,o=Hn(e.margins),i=t.contentSizeWithMargins,s=new go(0,0,i.width,i.height),a=new go(o.left,o.top,r.width,r.height),l=oP(a,s);if(!l)throw console.error(s,a),new Error("no intersection");let c=new ft().translate(-l.cx,-l.cy).rotate(-Math.PI/2).translate(l.cx,l.cy),d=nP(a,c),u=nP(l,c),p=d.x-u.x,h=u.right-d.right;(vp(o.left,0)||vp(o.right,0))&&(p=Math.max(p,d.x-s.x),h=Math.max(h,s.right-d.right));let f=d.y-u.y,m=u.bottom-d.bottom;return(vp(o.top,0)||vp(o.bottom,0))&&(f=Math.max(f,d.y-s.y),m=Math.max(m,s.bottom-d.bottom)),Hn({left:p,top:f,right:h,bottom:m})}function Rwe(t,e,r,o=!1){let i=my/r,s=i*i*4,a=1;for(let c of e)if(!(!o&&c.parent===t)&&!Fwe(t,c,r)&&!(isNaN(c.bounds.width)||!isFinite(c.bounds.width)||isNaN(c.bounds.height)||!isFinite(c.bounds.height)))if(c.parent===t){if(!o)continue;let d=Ze(Math.max(0,c.bounds.width-i),Math.max(0,c.bounds.height-i)),u=ts(c.bounds,Math.max(s,Rr(d)));a=Math.min(a,u)}else{let d=ts(Ze(c.bounds.width,c.bounds.height),Math.max(s,Rr(t.bounds)/9));a=Math.min(a,d)}let l=Ho(t.bounds);for(let c of e){let d=Xt(xr(c.contentSizeWithMargins,Hk),l);if(c.bounds.width<d.width||c.bounds.height<d.height){let u=d.height/c.bounds.height;a=Math.max(a,u)}}return a}function Fwe(t,e,r){let o=my/r;return t.bounds.width-o>=e.bounds.width&&t.bounds.height-o>=e.bounds.height}function B1(t,e,r){if(e===1||e<=0||isNaN(e)||!isFinite(e))return;let o=new ft().translate(-r.x,-r.y).scale(e).translate(r.x,r.y);for(let i of t()){let s=o.applied(i.bounds);i.position=Or(s),i.size=Ze(s)}}function jV({card:t,startBounds:e,scaleToParent:r,zoom:o}){let i=xr(t.size,Hk),s=Rr(Xt(i,r)),a=Rr(Mwe(t.size,o)),l=Math.min(Math.max(s,a),Rr(e));return xr(t.size,l)}function PO(){return{landscape:Ze(Gk),portrait:Ze(Gk.height,Gk.width)}}function Mwe(t,e){let r=PO(),o=Math.max(r.portrait.width/t.width,r.portrait.height/t.height),i=Math.max(r.landscape.width/t.width,r.landscape.height/t.height),s=Math.min(i,o);return Xt(t,s/e)}function KV({card:t,corner:e,startBounds:r,scaleToParent:o,zoom:i}){let s=Xt(Hk,o),a=Nwe({startBounds:r,zoom:i,corner:e}),l=fN(a,s),c=Lwe(t);return c&&(l=Bwe({minSize:l,start:new go(r),children:c,corner:e})),l7(l,r)}function Nwe(t){let{startBounds:e,zoom:r,corner:o}=t,i=PO();return o.includes("Middle")?vp(e.height*r,i.landscape.height)?Xt(i.landscape,1/r):Xt(i.portrait,1/r):vp(e.width*r,i.portrait.width)?Xt(i.portrait,1/r):Xt(i.landscape,1/r)}function qV({card:t,corner:e,startBounds:r}){let o=xr(t.size,gN);t.parent&&(o=jQ({maxSize:o,start:new go(r),parent:new go(t.parent.bounds),corner:e}));let i=Math.max(Rr(o),Rr(r));return xr(t.size,i)}function YV({card:t,corner:e,startBounds:r}){let o=gN;return t.parent&&(o=jQ({maxSize:o,start:new go(r),parent:new go(t.parent.bounds),corner:e})),o=fN(o,r),o}function jQ(t){let{maxSize:e,start:r,parent:o,corner:i}=t;if(i==="bbLeftTop"){let s={x:o.x,y:o.y,width:Math.min(e.width,r.right-o.x),height:Math.min(e.height,r.bottom-o.y)};return bu(r,s)}else if(i==="bbRightTop"){let s={x:r.x,y:o.y,width:Math.min(e.width,o.right-r.x),height:Math.min(e.height,r.bottom-o.y)};return bu(r,s)}else if(i==="bbLeftBottom"){let s={x:o.x,y:r.y,width:Math.min(e.width,r.right-o.x),height:Math.min(e.height,o.bottom-r.y)};return bu(r,s)}else if(i==="bbRightBottom"){let s={x:r.x,y:r.y,width:Math.min(e.width,o.right-r.x),height:Math.min(e.height,o.bottom-r.y)};return bu(r,s)}else return i==="bbCenterTop"?Ze(e.width,Math.min(e.height,r.bottom-o.y)):i==="bbLeftMiddle"?Ze(Math.min(e.width,r.right-o.x),e.height):i==="bbRightMiddle"?Ze(Math.min(e.width,o.right-r.x),e.height):Ze(e.width,Math.min(e.height,o.bottom-r.y))}function Bwe(t){let{minSize:e,start:r,children:o,corner:i}=t;return i==="bbCenterTop"?Ze(e.width,Math.max(e.height,r.bottom-o.y)):i==="bbLeftMiddle"?Ze(Math.max(e.width,r.right-o.x),e.height):i==="bbRightMiddle"?Ze(Math.max(e.width,o.right-r.x),e.height):Ze(e.width,Math.max(e.height,o.bottom-r.y))}function Lwe(t){let e;for(let r of t.familyIterator({withoutSelf:!0}))!r.isVisibleInGroup()||(e=e?Li(e,r.bounds):r.bounds);if(e)return new go(e)}function fi(t){var e,r;return!!(t instanceof ym||t instanceof Yo||((r=(e=t.gadgets.title)==null?void 0:e.text.length)!=null?r:0>0))}function XV(t,e=!0){let r=new ki,o=t.parent;for(let i of e?t.iteratorOverGroup():t.iterator())for(let s of i.familyIterator())!s.isVisibleInCardTree(o)||r.add(s.bounds);return r}var EO=class extends Error{constructor(e="Could not copy card"){super(e)}};async function QV(t){let{card:e,store:r,srcIdMap:o,idMapper:i}=t,s=e.copy(o,i),a=await Zn.issue("loilonote-quiz"),l=Zn.getEndpoint("loilonote-quiz");if(!a||!l)throw new EO;let{lnsEndpoint:c,logEnabled:d}=r,u=new zv({lnsEndpoint:c,lnqEndpoint:l,logEnabled:d}),p=await u.fork(e.content.quiz_id,a.app_token),h=await u.getCoverData(p,a.app_token),f={quiz_id:p,preset:e.content.preset,quiz_author:h.author,title:h.title,question_count:h.questionCount,isAnswered:PA(h)},m=i?i(e.id):$u(),g=wB({cardId:m,author:e.author,quizContentBase:f,layoutSize:e.size,backcolor:e.content.backcolor,position:Re(e.position),metadata:e.metadata,gadgets:e.gadgets});o==null||o.set(e.id,m);let v=new zr(g);for(let y of s.children)v.addChild(y);return v}async function JV(t){let{card:e,store:r,srcIdMap:o,idMapper:i}=t,s=e.copy(o,i),a=await Zn.issue("loilonote-attendance"),l=Zn.getEndpoint("loilonote-attendance");if(!a||!l)throw new EO;let{lnsEndpoint:c,logEnabled:d}=r,u=new Ov({lnsEndpoint:c,lnaEndpoint:l,logEnabled:d}),p=await u.fork(e.content.attendance_id,a.app_token),f={...await u.getCoverData(p,a.app_token),attendanceId:p},m=i?i(e.id):$u(),g=TB({cardId:m,author:e.author,contentBase:f,layoutSize:e.size,backcolor:e.content.backcolor,position:Re(e.position),metadata:e.metadata,gadgets:e.gadgets});o==null||o.set(e.id,m);let v=new an(g);for(let y of s.children)v.addChild(y);return v}function hh({card:t,zoom:e,focused:r,dpr:o}){let i=qo(t);return r&&(i=Owe({cardSize:t.bounds,zoom:e,scale:i,dpr:o})),i}function Owe({cardSize:t,zoom:e,scale:r,dpr:o}){let s=Math.min(t.height,t.width)/Oo*2,a=Math.min(1/(e/o),s)*.7;return Math.max(r,a)}function mA(t,e){let r=Oo*e,o=Xi*e;return nt(t.position.x-t.size.width*.5-o-r*2,t.position.y-r,r*2,r*2)}function tC(t,e){let r=t;for(;r&&!(r===e||!r.pinned);)if(r.parent)r=r.parent;else{r=void 0;break}if(!(e&&r===e))return r}function KQ(t){var r,o;let e=(i,s)=>{if(!!i)return i.length>s?i.substr(0,s):i};if(t instanceof ym)return e((r=t.gadgets.title)==null?void 0:r.text,20);if(t instanceof Rd||t instanceof Ao||t instanceof ri||t instanceof Bs||t instanceof Yo)return e((o=t.content.asset)==null?void 0:o.description,255);if(t instanceof zr||t instanceof an)return e(t.content.title,255)}function Mc(t,e){let r=t.parent;if(!(t.id===e.id||!r||r.id===e.id))for(;r;){for(let o of e.children)if(r.id===o.id)return r;r=r.parent}}var zwe=new Map([["bbLeftTop","pointer"],["bbCenterTop","n-resize"],["bbRightTop","ne-resize"],["bbLeftMiddle","w-resize"],["bbRightMiddle","e-resize"],["bbLeftBottom","sw-resize"],["bbCenterBottom","s-resize"],["bbRightBottom","se-resize"]]);function IA(t,e){return t&&e!=="bbLeftTop"&&e!=="card"?"default":zwe.get(e)||"pointer"}function NQ(t){let e=Fn(t.content.backcolor);return bO(e)}function bO(t){if(t.a===0)return B7;let e=Cy(t);return e.v>.113?e.v-=.1:e.v+=.1,pn(N7(e))}function DQ(t){let e=t.type==="title"||t.type==="drawn"||t.type==="pdf"||t.type==="audio",r=!rY(t.content.margins);return e||r}function xA(t){return t.contentAssetId()==null&&(t.type==="picture"||t.type==="video"||t.type==="audio"||t.type==="pdf")}function Uwe(t,e){if(t.parent){let r=Xt(t.parent.size,e);return Rr(r)>=Rr(d7)}else return!0}function qQ(t,e){let r=Xt(t.size,e);r.width+=.1,r.height+=.1;let{portrait:o,landscape:i}=PO();return r.width>=i.width&&r.height>=i.height||r.width>=o.width&&r.height>=o.height}function Hwe(t,e){return t.parent?qQ(t,e):!0}function Gwe(t,e){return qQ(t,e)}function hm(t,e){let r={connectable:!1,movable:!1,resizable:!1};return!Uwe(t,e)||(r.connectable=!0,!Hwe(t,e))||(r.movable=!0,!Gwe(t,e))||(r.resizable=!0),r}function _O(t){let e=Vwe(t),r=t.bounds;for(let o of t.iteratorOverGroup())r=Li(r,o.bounds);return B1(()=>t.memberAndChildrenIteratorOverGroup(),e,Or(r)),t}function Vwe(t){let e;if(t.size.width>t.size.height){let o=ht(t.size.width,Gt.width,di.width);e=pc(o,t.size.width,1)}else{let o=ht(t.size.height,Gt.height,di.height);e=pc(o,t.size.height,1)}return e}function YQ(t){let e=[];for(let r of t.familyIterator())r.next?e.push({from:r.id,to:r.next.id,as_different_group:!1}):r.nextGroup&&e.push({from:r.id,to:r.nextGroup.id,as_different_group:!0});return e}function RA(t){let e=[],r=new Map;for(let o of t.familyIterator())!o.isHead||!o.isFolded||o.groupMemberCount()<2||r.set(o.id,o.isFolded);for(let[o,i]of r.entries())e.push({top_of_group:o,is_folded:i});return e}function Wu(t){var r,o,i,s,a,l,c;let e=new Set;for(let d of t){if(d.type==="pdf"||d.type==="picture"||d.type==="video"||d.type==="audio"||d.type==="web"||d.type==="map"){let f=(r=d.content.asset)==null?void 0:r.remote_id;f&&e.add(f)}let u=(i=(o=d.gadgets.drawn)==null?void 0:o.asset)==null?void 0:i.remote_id,p=(a=(s=d.gadgets.annotations)==null?void 0:s.asset)==null?void 0:a.remote_id;u&&e.add(u),p&&e.add(p);let h=(c=(l=d.gadgets.naration)==null?void 0:l.asset)==null?void 0:c.remote_id;h&&e.add(h)}return Array.from(e.values())}function FA(t){let e;for(let r of t)(!r.isFolded||r.isFolded&&r.isHead)&&(e||(e=nt(r.bounds)),e=Li(e,r.bounds));return e}function $we(t){return(e,r)=>t(r,e)}function Wwe(t,e){return t.id-e.id}function jwe(t,e){return t.updated_at&&e.updated_at?t.updated_at.localeCompare(e.updated_at):t.updated_at?1:e.updated_at?-1:t.id-e.id}function XQ(t){let e=t.key==="createdAt"?Wwe:jwe;return t.direction==="ascending"?e:$we(e)}var QQ=Cc(),wi=class{constructor(e,r){this._isFolded=!1;this._children=[];this._lastModified=new Date;this._pinned=!1;this._favorite=!1;this.inPort="left";this.outPort="right";this.id=r.id,this._position=Re(r.metadata.position.left,r.metadata.position.top),this._size=Ze(r.metadata.layout_size),this.author={id:r.metadata.author.id,name:r.metadata.author.name},this.metadata=r.metadata,this.type=e,this.content=r.content,this.content.margins||(this.content.margins={left:0,top:0,right:0,bottom:0}),this.content.backcolor||(this.content.backcolor="#00000000"),this.gadgets=r.gadgets||{},this.migrate()}get next(){return this._next}get prev(){return this._prev}get nextGroup(){return this._nextGroup}get prevGroup(){return this._prevGroup}get nextCardOrGruop(){return this._next||this._nextGroup}get prevCardOrGroup(){return this._prev||this._prevGroup}get hasNextCardOrGroup(){return!!(this.next||this.nextGroup)}get hasPrevCardOrGroup(){return!!(this.prev||this.prevGroup)}get hasConnectedCardOrGroup(){return this.hasPrevCardOrGroup||this.hasNextCardOrGroup}get isFolded(){return this._isFolded}get parent(){return this._parent}rootParent(){let e=this;for(;e;){if(!e.parent)return e;e=e.parent}return this}parentsCount(){let e=0,r=this;for(;r.parent;)r=r.parent,e++;return e}groupMemberCount(){let e=0;return this.forEach(r=>e++),e}memberCountOverGroup(){let e=0;return this.forEachOverGroup(r=>e++),e}descendantsCount(){let e=0;return this.forEachDescendant(r=>e++),e}*renderingOrderIterator(e={includeSelf:!0}){let r=e.includeSelf?[this]:[...this.children],o;for(;o=r.shift();)yield o,r.push(...o.children)}*bubblingOrderIterator(){let e=[...this.renderingOrderIterator()];for(let r=e.length-1;r>=0;r--)yield e[r]}*rflatTree(e={includeSelf:!0}){for(let r of[...this._children].reverse())for(let o of r.rflatTree())yield o;e.includeSelf&&(yield this)}bringChildToFront(e,r){let o=r?Array.from(e.lastSelfIterator()):[e];for(let i of o){let s=this._children.indexOf(i);s>-1&&(this._children.splice(s,1),this._children.push(i))}}get children(){return[...this._children]}get lastModified(){return this._lastModified}get pinned(){return this._pinned}set pinned(e){this._pinned=e,this.markAsModified()}pinnedItems(e){let r=[];for(let o of this.familyIterator(e))o.pinned&&r.push({id:o.id});return r}get favorite(){return this._favorite}set favorite(e){this._favorite=e,this.markAsModified()}favoriteItems(){let e=[];for(let r of this.familyIterator())r.favorite&&e.push({id:r.id});return e}canPin(){return!this.isFolded}canAlign(){return!!(this.prev||this.prevGroup||this.next||this.nextGroup)}canRotate(){return this.type==="picture"}get position(){return Re(this._position)}set position(e){this._position=Re(e),this.markAsModified()}get localPosition(){let e=Re(this._position);return this.parent&&(e=ti(e,this.parent._position)),e}get size(){return Ze(this._size)}set size(e){this._size=Ze(e),this.markAsModified()}get contentSizeWithMargins(){let{width:e,height:r}=this.contentSize,{left:o,top:i,bottom:s,right:a}=this.content.margins;return Ze(e+o+a,r+i+s)}get bounds(){let{width:e,height:r}=this.size;return nt(this.position.x-e/2,this.position.y-r/2,e,r)}get localBounds(){let{width:e,height:r}=this.size;return{x:-e/2,y:-r/2,width:e,height:r}}get contentLocalBounds(){let e=this.content.margins,r=this.size.width/(e.left+e.right+this.contentSize.width),o=this.size.height/(e.top+e.bottom+this.contentSize.height),[i,s]=[-this.size.width/2,-this.size.height/2];return nt(i+e.left*r,s+e.top*o,this.contentSize.width*r,this.contentSize.height*o)}get duration(){return this.metadata.duration}get unlimitedRecordingTime(){return this.metadata.unlimited_recording_time}get playbackRate(){var e;return(e=this.metadata.playback_rate)!=null?e:1}createDrawnGeometry(e){let r;e==="drawn"&&this.gadgets.drawn?r=this.gadgets.drawn.canvas:e==="annotation"&&this.gadgets.annotations?r=this.gadgets.annotations.canvas:r=VQ(this.contentSize);let o=$Q({canvasSize:r,margins:this.content.margins,contentSize:this.contentSize});return{canvas:r,thumbnailRect:o}}drawnGeometry(e){if(e==="drawn"){if(this.gadgets.drawn){let{canvas:r,thumbnailRect:o}=this.gadgets.drawn;return{canvas:r,thumbnailRect:o}}}else if(e==="annotation"&&this.gadgets.annotations){let{canvas:r,thumbnailRect:o}=this.gadgets.annotations;return{canvas:r,thumbnailRect:o}}return this.createDrawnGeometry(e)}drawnLocalBounds(e){let{canvas:r}=this.drawnGeometry(e),{width:o,height:i}=this.size,s=1/pi(r.width,r.height,this.contentSize.width,this.contentSize.height),a=this.content.margins,l={w:o/(a.left+a.right+this.contentSize.width),h:i/(a.top+a.bottom+this.contentSize.height)},c={width:r.width*s*l.w,height:r.height*s*l.h},d={w:this.contentSize.width*l.w-c.width,h:this.contentSize.height*l.h-c.height},u={x:-o*.5+a.left*l.w+d.w*.5,y:-i*.5+a.top*l.h+d.h*.5};return nt(u.x,u.y,c.width,c.height)}drawnThumbLocalBounds(e,r=void 0){let o=this.drawnLocalBounds(e),i=r!=null?r:this.drawnGeometry(e).thumbnailRect,s=o.x+o.width*i.x,a=o.y+o.height*i.y,l=o.width*i.width,c=o.height*i.height;return{x:s,y:a,width:l,height:c}}drawnAssetId(e){var r,o,i,s;switch(e){case"drawn":return(o=(r=this.gadgets.drawn)==null?void 0:r.asset)==null?void 0:o.remote_id;case"annotation":return(s=(i=this.gadgets.annotations)==null?void 0:i.asset)==null?void 0:s.remote_id}}migrate(){this.type==="audio"&&this.gadgets.title===void 0&&(this.gadgets.title=AA({type:"audio",forecolor:kO.toARGBHex()}))}copy(e=new Map,r=()=>QQ()){let o=this.toJSON(),{id:i,...s}=o,a=r(i),l=Ys({id:a,...s});l.favorite=this.favorite,l.pinned=this.pinned,e.set(i,a);for(let c of this.children){let d=c.copy(e,r);e.set(c.id,d.id),l.addChild(d)}for(let c of this.children){let d=c.next||c.nextGroup;if(d){let u=e.get(c.id),p=e.get(d.id),h=l.getCard(u),f=l.getCard(p);h.connect(f,d===c.nextGroup)}}for(let c of this.children)c.isFolded&&c.isHead&&l.getCard(e.get(c.id)).fold(c.isFolded);return l}copyGroup({srcIdMap:e=new Map,overGroup:r=!0,idMapper:o=()=>QQ()}){var a;let i=new Map,s=[];for(let l of r?this.iteratorOverGroup():this.iterator()){let c=l.copy(e,o);i.set(c.id,c),s.push(c),l.isFolded&&c.fold(!0)}for(let l of r?this.iteratorOverGroup():this.iterator()){let c=r?(a=l.next)!=null?a:l.nextGroup:l.next;if(c){let d=i.get(e.get(l.id)),u=i.get(e.get(c.id));d.connect(u,c===c.head())}}return s[0]}get isHead(){return!this.prev}get isTail(){return!this.next}head(){let e=this;for(;e.prev;)e=e.prev;return e}tail(){let e=this;for(;e.next;)e=e.next;return e}connection(){if(this.next)return{from:this.id,to:this.next.id,as_different_group:!1};if(this.nextGroup)return{from:this.id,to:this.nextGroup.id,as_different_group:!0}}indexOverGroup(){let e=0;for(let r of this.iteratorOverGroup()){if(r===this)return e;e++}return-1}memberAt(e){let r=0;for(let o of this.iteratorOverGroup())if(r++===e)return o}headGroup(){var r;let e=this;for(;e.hasPrevCardOrGroup;)e=(r=e.prev)!=null?r:e.prevGroup;return e}tailGroup(){var r;let e=this;for(;e.hasNextCardOrGroup;)e=(r=e.next)!=null?r:e._nextGroup;return e}forEach(e){let r=0;for(let o of this.iterator())e(o,r),r++}forEachOverGroup(e){let r=0;for(let o of this.iteratorOverGroup())e(o,r),r++}forEachDescendant(e){let r=[...this.children],o;for(;o=r.shift();)r.push(...o.children),e(o)}containsInGroup(e){for(let r of this.memberAndChildrenIterator())if(r.id===e.id)return!0;return!1}*iterator(){let e=this.head();for(yield e;e.next&&(e=e.next);)yield e}*lastSelfIterator(){for(let e of this.iterator())e!==this&&(yield e);yield this}*iteratorOverGroup(){var r;let e=this.headGroup();for(yield e;e.hasNextCardOrGroup&&(e=(r=e.next)!=null?r:e.nextGroup);)yield e}*toTailIterator(){let e=this;for(yield e;e=e.next;)yield e}*toTailIteratorOverGroup(){var r;let e=this;for(yield e;e=(r=e.next)!=null?r:e.nextGroup;)yield e}*fromTailIterator(){let e=this.tail();for(yield e;e.prev&&(e=e.prev);)yield e}*parentsIterator(){let e=this;for(;e=e.parent;)yield e}isDescendantOf(e){for(let r of this.parentsIterator())if(r.id===e)return!0;return!1}markAsModified(){this._lastModified=new Date}canBeConnectedFrom(e){if(e.pinned||this.pinned||e.parent!==this.parent)return!1;let r=e.tailGroup();for(;;){if(r.id===this.id)return!1;if(r.prev)r=r.prev;else if(r.prevGroup)r=r.prevGroup;else break}return!0}connect(e,r=!1){$e(e.canBeConnectedFrom(this)),this.unsafeConnect(e,r)}safeConnect(e,r=!1){return e.canBeConnectedFrom(this)?(this.unsafeConnect(e,r),!0):!1}unsafeConnect(e,r=!1){var o,i;if((o=e.prev)==null||o.purgeNext(),(i=e.prevGroup)==null||i.purgeNext(),this.purgeNext(),r)this._nextGroup=e,e._prevGroup=this;else{this._next=e,e._prev=this;let s=this;for(;s.next&&(s=s.next);)s._isFolded=this.isFolded,s.markAsModified()}this.markAsModified()}purgeNext(){this.next?(this.next._prev=void 0,this._next=void 0):this._nextGroup&&(this._nextGroup._prevGroup=void 0,this._nextGroup=void 0),this.markAsModified()}fold(e){this.forEach(r=>{r._isFolded=e,r.markAsModified()})}removeFromGroup(){let e=this,r=(o,i,s)=>{o.unsafeConnect(i,s)};if(e.prev&&!e.next)e.nextGroup?r(e.prev,e.nextGroup,!0):e.prev.purgeNext();else if(!e.prev&&e.next)e.prevGroup?r(e.prevGroup,e.next,!0):e.purgeNext();else if(e.prev&&e.next)r(e.prev,e.next,!1);else if(!e.prevGroup&&e.nextGroup)e.purgeNext();else if(e.prevGroup&&!e.nextGroup)e.prevGroup.purgeNext();else if(e.prevGroup&&e.nextGroup){let{nextGroup:o,prevGroup:i}=e;e.purgeNext(),i.purgeNext(),r(i,o,!0)}}removeFromGroupAsGroup(){if(this.prevGroup&&this.tail().nextGroup){let e=this.prevGroup,r=this.tail().nextGroup;this.prevGroup.purgeNext(),this.tail().purgeNext(),e.connect(r,!0)}else this.prevGroup&&!this.tail().nextGroup?this.prevGroup.purgeNext():!this.prevGroup&&this.tail().nextGroup&&this.tail().purgeNext()}replaceContent(e){for(let r in e){let o=e[r];if(o===null)Q7(this,r);else if(o!==void 0)X7(this,r,o);else throw new Error(`replacement value for "${r} is undefined."`)}this.markAsModified()}addChild(e,r=-1){e.parent!==this&&(e.parent&&e.removeFromParent(),r<0&&(r=this.children.length+r+1),e._parent=this,this._children.splice(r,0,e),this.markAsModified(),e.markAsModified())}addGroup(e){e.parent!==this&&(e.removeFromGroupAsGroup(),e.forEach(r=>{r.removeFromParent(),r._parent=this,this._children.push(r),r.markAsModified()}),this.markAsModified())}removeChild(e){for(let r=0;r<this._children.length;r++)if(this._children[r]===e){let o=this._children[r];o._parent=void 0,this._children.splice(r,1),this.markAsModified(),o.markAsModified();break}}removeFromParent(){this.parent&&this.parent.removeChild(this)}toJSON(){return tP({id:this.id,type:this.type,content:this.content,metadata:{position:{left:this.position.x,top:this.position.y},author:this.author,duration:this.duration,layout_size:this.size,unlimited_recording_time:this.unlimitedRecordingTime,playback_rate:this.metadata.playback_rate},gadgets:this.gadgets})}toV210JSON(){let{id:e,type:r,content:o,gadgets:i,duration:s}=this,a={id:this.author.id,name:this.author.name},l={left:this.position.x,top:this.position.y};return this instanceof zr||this instanceof an?tP({id:e,metadata:{position:l,author:a,duration:s},type:"title",gadgets:{...i,title:{text:this.content.title,font_size:12,forecolor:"#FF000000",h_alignment:"left",v_alignment:"middle"}},content:{size:{...Yi},backcolor:"#FFFFFFFF"}}):tP({id:e,metadata:{position:l,author:a,duration:s},type:r,gadgets:{...i},content:{...o}})}*familyIterator(e={withoutSelf:!1,breadthFirst:!1}){let r=e.withoutSelf?[...this.children]:[this],o;for(;o=e.breadthFirst?r.shift():r.pop();)r.push(...o.children),yield o}*memberAndChildrenIterator(){for(let e of this.iterator())for(let r of e.familyIterator())yield r}*memberAndChildrenIteratorOverGroup(){for(let e of this.iteratorOverGroup())for(let r of e.familyIterator())yield r}isVisibleInCardTree(e){if(this===e)return!0;if(e&&!this.isDescendantOf(e.id))throw new Error("is not descendant of root");let r=i=>{let s=i.parent;for(;s&&s!==e;){if(s.isFolded&&!s.isHead)return s;s=s.parent}},o=this;for(;o&&o!==e;){if(o.isFolded)return o.isHead?r(o)===void 0:!1;o=o.parent}return!0}isVisibleInGroup(){return!this.isFolded||this.isHead}foldHandleVisible(){return this.next&&!this.prev||!!this.prevGroup}connectorHandleVisible(){if(this.isFolded){let e=this.tail();return this.isHead&&!e.nextGroup&&!this.dashedConnectorPosition&&!e.dashedConnectorPosition}else return!this.dashedConnectorPosition&&!this.nextGroup&&!this.next}connections({withoutSelf:e}){let r=[];for(let o of this.familyIterator({withoutSelf:e})){let i=o.next||o.nextGroup;i&&r.push({from:o.id,to:i.id,as_different_group:i===o.nextGroup})}return r}groupStates(){return RA(this)}treeState(){return M1(this)}getCard(e){return Array.from(this.familyIterator()).find(r=>r.id===e)}visibleNextCard(){return this.isFolded?this.nextGroup:this.next}*connectedGroupHeadCards(){let e=this.headGroup();for(yield e;e=e==null?void 0:e.tail().nextGroup;)yield e}},Rd=class extends wi{constructor(e){super("picture",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Bs=class extends wi{constructor(e){super("pdf",e)}get contentSize(){return this.content.page_size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Ao=class extends wi{constructor(e){super("video",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},MA=class extends wi{constructor(e){super("drawn",e)}get contentSize(){return this.content.size}contentAssetId(){}},ri=class extends wi{constructor(e){super("web",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Yo=class extends wi{constructor(e){super("audio",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},nh=class extends wi{constructor(e){super("map",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},ym=class extends wi{constructor(e){super("title",e)}get contentSize(){return this.content.size}contentAssetId(){}},zr=class extends wi{constructor(e){super("quiz",e)}get contentSize(){return this.content.size}contentAssetId(){}},an=class extends wi{constructor(e){super("attendance",e)}get contentSize(){return this.content.size}contentAssetId(){}};function Ys(t){switch(t.type){case"picture":return new Rd(t);case"drawn":return new MA(t);case"pdf":return new Bs(t);case"web":return new ri(t);case"title":return new ym(t);case"video":return new Ao(t);case"map":return new nh(t);case"audio":return new Yo(t);case"quiz":return new zr(t);case"attendance":return new an(t)}throw new Error("unexpected type")}var JQ=class{constructor(){this.columns=0;this.rows=0}evaluate(e,r,o){return this.score===void 0||this.score<o?(this.columns=e,this.rows=r,this.score=o,!0):!1}gridSize(){return{cols:this.columns,rows:this.rows}}};function Kwe(t,e){return t.width<t.height?Math.max(1,Math.floor(Math.sqrt(e))):Math.max(1,Math.ceil(Math.sqrt(e)))}function*qwe(t,e){let r=Kwe(t,e);if(t.width<t.height){let o=r;for(;;){let i=o;if(i<1)break;o-=1,yield i}}else{let o=r;for(;;){let i=o;if(i>e)break;o+=1,yield i}}}function ZQ(t,e,r,o){let i=Math.max(e,t.width/r),s=Math.max(e,t.height/o),a=Math.min(i,s),l=a*a,c=t.height/i,d=t.width/s;return l-(Math.abs(o-c)+Math.abs(r-d))}function Ywe(t){return Math.abs(t.width)<Number.EPSILON||Math.abs(t.height)<Number.EPSILON?1:t.width/t.height}function NA(t,e,r,o){if(o<=0)return{cols:1,rows:1};let i=Math.max(1,Math.floor(t.width/Math.max(1,r)+Number.EPSILON)),s=Math.max(1,Math.ceil(o/i)),a=Ywe(e),l=Ze(t.width,t.height*a),c=new JQ,d=ZQ(l,r,i,s);c.evaluate(i,s,d);for(let u of qwe(l,o)){if(u>i)break;let p=Math.max(1,Math.ceil(o/u)),h=ZQ(l,r,u,p);c.evaluate(u,p,h)}return c.gridSize()}function iC(t,e){return NA(t,Gt,320,e)}function BA(t,e){let{cols:r,rows:o}=NA(t,Gt,320,e.length),i=Array.from({length:o*r-e.length}).map(()=>null);return[...e,...i]}async function Uv(t,e){let r=0,o=0,i=!1;for(;!i;){let s=Date.now();try{return await t()}catch(a){o+=Date.now()-s;let l=await e({error:a,retryCount:r++,totalConsumedTimeMs:o});l?(await jf(l),o+=l.delay*l.unit):i=!0}}throw new R1}var AO=X(on());function $l(t){return e=>{let r=De.get().strings,{store:o,id:i,title:s,okMessage:a,onOkClick:l}=t;return Pe(i,{title:s,...Ht(e,{403:r.status403AccessDenied,404:r.status404ItemNotFound}),okMessage:a!=null?a:r.back,onOk:()=>{l==null||l(),o.reduce(Pe(i,void 0))}})}}function bo(t,{fetchingId:e,promise:r,beforeReducers:o=[],doneReducer:i,errorReducer:s}){return t.reduce(ui(e,"fetching"),...o),r.then(async a=>{let l=await i(a),c=Array.isArray(l)?l:[l];t.reduce(ui(e,"done"),...c)}).catch(yt.handleError).catch(async a=>{ge.error(a);let l=[ui(e,a)];if(s){let c=await s(a);l.push(c)}t.reduce(...l)})}function Ht(t,e={}){var i;let r=De.get().strings,o={message:(i=e.default)!=null?i:r.unexpectedErrorOccurred};if(t instanceof Yr){let s=e[t.status];if(typeof s=="string")o.message=s;else if(typeof s=="function")try{o.message=s(t)}catch(a){ge.error(a)}o.message=`${t.status}: ${o.message}`}else t instanceof Sp?o.message=r.couldntGet_CheckInternetConnection:t instanceof hs?o.message=t.message:o.unknownError=t;return o}async function eo(t,{file:e,metadata:r,description:o,extension:i,cardIdList:s,thumbnailsGenerator:a}){let l=new xd("assetUUID"),c=!Rp(i),d=(m,g)=>{let v=g==="all"?s:[s[g]];for(let y of v){let S=gr.forCard(y).content,C=m?"fetching":"done";S.setStates(["small","medium","high"],C)}};c&&d(!0,"all"),l.fetch(()=>IO({store:t,type:"content",file:e,metadata:r,cardIdList:s,extension:i,hasThumbs:c})),(Rp(i)||_y(i))&&ue.fileManager.setContentLocalFileAsset(s,e);let u=l.wait().then(m=>{var g;for(let v=0;v<s.length;v++){let y=s[v];((g=m==null?void 0:m.value)==null?void 0:g.result)?(We(Sn(y,{"content.asset":{description:o!=null?o:e.name,extension:i,remote_id:m.value.result}})),We({type:"assetUploadStateChanged",cardId:y,assetType:"content",state:"done"})):We({type:"assetUploadStateChanged",cardId:y,assetType:"content",state:"error"})}});if(!c){await u;return}let p=a(),h=0,f=[u];for(;h<s.length;){let m=p.next(),g=h;f.push(m.then(async({value:v})=>{gr.forCard(s[g]).content.setThumbs(v);let S=await l.wait();if(!S||!S.value)throw new Error("failed to upload asset");t.reduce(QN({cardId:s[g],assetUUID:S.value.result,index:g,type:"content",thumb:v}))}).catch(yt.handleError).catch(v=>{ge.error((0,AO.sprintf)("failed generate asset thumb: index=%d",g),v),t.reduce(Zy({cardIdList:[s[g]],type:"content",state:"failed"}))}).finally(()=>{d(!1,g)})),h++}await Promise.all(f)}async function eJ(t,{cardId:e,file:r,extension:o,recordedDuration:i,cardDuration:s,volume:a,start:l}){let c=await IO({store:t,file:r,type:"narration",metadata:[{duration:i}],cardIdList:[e],extension:o,hasThumbs:!1});if(!c){We({type:"assetUploadStateChanged",assetType:"content",state:"error",cardId:e});return}let d={"gadgets.naration":{start_point:l,source_volume:a,asset:{remote_id:c.result,extension:o}}};s!==void 0&&(d["metadata.duration"]=s),We(Sn(e,d)),We({type:"assetUploadStateChanged",assetType:"content",state:"done",cardId:e})}async function tJ({store:t,cardId:e,geometry:r,file:o,thumb:i}){var l;if(((l=t.assetUploadStates[e])==null?void 0:l.drawn)==="saving")return;We({type:"assetUploadStateChanged",assetType:"drawn",state:"uploading",cardId:e});let a=await IO({store:t,type:"drawn",file:o,cardIdList:[e],extension:".lnstroke",metadata:[{}],hasThumbs:!0});if(!a){t.reduce(Zy({cardIdList:[e],type:"drawn",state:"failed"})),We({type:"assetUploadStateChanged",assetType:"drawn",state:"error",cardId:e});return}We({type:"assetUploadStateChanged",assetType:"drawn",state:"done",cardId:e}),t.reduce(QN({cardId:e,index:0,assetUUID:a.result,thumb:i,type:"drawn",geometry:r}))}async function IO({store:t,file:e,metadata:r,extension:o,cardIdList:i,hasThumbs:s,type:a}){let l=[FP(1),Up({cardIdList:i,state:"saving",type:a})];s&&l.push(Zy({cardIdList:i,type:a,state:"unsaved"})),t.reduce(...l);try{let c=await Xwe({file:e,metadata:r,extWithDot:o});return t.reduce(FP(-1),Jy(i,a)),c}catch(c){if(t.reduce(FP(-1),Up({cardIdList:i,state:"failed",type:a})),yt.catchError(c))return;e1e(t,oe.uploadAsset)(c);return}}async function rJ({cardId:t,store:e,assetUUID:r,type:o,index:i,thumb:s,geometry:a}){e.reduce(Zy({cardIdList:[t],type:o,state:"saving"}),MP(1)),We({type:"assetThumbnailUploadStateChanged",index:i,state:"uploading",cardId:t,assetUUID:r,assetType:o});try{await Qwe({uuid:r,thumb:s,index:i}),e.reduce(MP(-1),Q9({cardIdList:[t],type:o})),o==="drawn"&&a&&We(Sn(t,{"gadgets.drawn.asset":{remote_id:r},"gadgets.drawn.thumbnailRect":a.thumbnailRect,"gadgets.drawn.canvas":a.canvas})),We({type:"assetThumbnailUploadStateChanged",index:i,state:"done",cardId:t,assetUUID:r,assetType:o})}catch(l){if(We({type:"assetThumbnailUploadStateChanged",index:i,state:"error",cardId:t,assetUUID:r,assetType:o}),yt.catchError(l))return;ge.error((0,AO.sprintf)("failed to upload thumb: index=%d",i),l),e.reduce(MP(-1),Zy({cardIdList:[t],type:o,state:"failed"}))}}async function Xwe(t){return ge.log("uploading assets..."),Uv(()=>ue.lnsClient.uploadAssetV2(t),nJ("asset"))}async function Qwe({uuid:t,index:e,thumb:r}){ge.log("uploading asset thumbs...");let{contentType:o}=r,i=no.get(o);await Uv(async()=>{let[s,a]=await Promise.all([xo(r.small,o,"small"+i),xo(r.medium,o,"medium"+i)]);return ue.lnsClient.uploadAssetThumbnails({uuid:t,index:e,small:s,medium:a})},nJ("asset thumb"))}function nJ(t){return e=>{let r=e.error;if(r instanceof Yr&&r.status>=500&&e.totalConsumedTimeMs<5*pr.min){let o=wv*Math.pow(2,e.retryCount);return ge.warn(`${t} upload failed with status=${r.status}, retry after ${o}s (retryCount=${e.retryCount})`),{delay:o,unit:pr.sec}}throw e.error}}var Jwe=["content","drawn","narration"];function Cm(t,e){try{if(!oJ(e)(t))return"saving"}catch(r){return"failed"}}function oJ(t){return({assetUploadStates:e,assetThumbnailUploadStates:r})=>{for(let o of t)for(let i of[e,r])if(!!i[o])for(let s of Jwe){let a=i[o][s];if(a==="failed"){let l=De.get().strings;throw new hs(l.cardHasUploadFailedAttachments)}else if(a)return!1}return!0}}function Zwe(t,e){var o;let r=(o=t.assetUploadStates[e])==null?void 0:o.drawn;return r==="unsaved"||r==="failed"}async function Sm(t,e,r){let o=De.get().strings,i=[],s=[];for(let a of e.memberAndChildrenIteratorOverGroup()){let l=t.assetUploadStates[a.id];if((l==null?void 0:l.content)==null&&xA(a))throw new hs(o.cardHasUploadFailedAttachments);if(Zwe(t,a.id)){let c=a.createDrawnGeometry("drawn");i.push({cardId:a.id,geometry:c})}s.push(a.id)}t.reduce(Qy(i)),Cm(t,s)&&(r&&t.reduce(Fe(r,o.uploadingAsset)),await t.waitUntil(oJ(s)))}function e1e(t,e){let r=De.get().strings;return o=>{ge.error("failed to upload asset",o),t.reduce(Pe(e,{title:r.couldntUploadDocument,...Ht(o,{default:r.checkServiceStatus}),okMessage:r.back,onOk:()=>t.reduce(Pe(e,void 0))}))}}async function LA(t,e,r){try{if(r){let o=await ue.lnsClient.getAssetInfo(e),i=await Promise.all(Array.from({length:o.number_of_pages}).map((s,a)=>ue.lnsClient.getAssetMetadata(e,a)));return t.reduce(JN(e,o),e0(e,i)),i}else{let o=await ue.lnsClient.getAssetMetadata(e,0);return t.reduce(e0(e,[o]),JN(e,{number_of_pages:1})),[o]}}catch(o){return ge.error(o),t.reduce(e0(e,null)),null}}var wt=class{static user(e){return`users/${e}`}static courses(){return"courses"}static otherTeacherCourses(){return"other-teachers"}static closedYears(){return"closed-years"}static closedCoursesByYear(e){return`closed-courses/${e}`}static userGroupCode(e){return`user-group-code/${e}`}static userGroupAttendances(e){return`user-group-attendances/${e}`}static notes(e){return`courses/${e}/notes`}static courseUserStatus(e){return`courses/${e}/user-statuses`}static courseAttributes(e){return`courses/${e}`}static courseTemporaryTeachers(e){return`courses/${e}/temporary-teachers`}static submissionAnswers(e,r){return`courses/${e}/submissions/${r}/answers`}static submissions(e){return`courses/${e}/submissions`}static timelineEntries(e){return`timeline-entries/${e}`}static mobilePushes(){return"mobile-pushes"}static receiverStatus(e){return`courses/${e}/receiverStatus`}static sharedNotes(e){return`courses/${e}/sharedNotes/${e}`}static sharedNote(e){return`sharedNotes/${e}`}static sharedNoteMembers(e){return`sharedNotes/${e}/members`}static tutorial(){return"tutorial"}static prepareForAddCourse(){return"prepare-for-add-course"}};function sC(t){return lC.create(t)}function aC(t,e){return lC.load(t,e)}var lC=class{constructor(e,r){this.cardMap=new Map;this._zOrders=[];this._cardsIntegrity=0;this._zOrderIntegrity=0;if(this.id=e,this._lastModified=new Date,!r)return;let o=i=>{try{i()}catch(s){}};for(let i of r.data.frames)o(()=>{this.addCard(Ys(i))});for(let i of r.data.connections)o(()=>{this.useCards([i.from,i.to],(s,a)=>{s.connect(a,i.as_different_group)})});for(let i of r.data.fold_states)o(()=>{this.useCard(i.id,s=>{let a=s.head();s.position={x:a.position.x+i.relative_position.x,y:a.position.y+i.relative_position.y}})});for(let i of r.data.group_states)o(()=>{this.useCard(i.top_of_group,s=>{s.fold(i.is_folded)})});this.applyTreeStates(r.data.tree_states);for(let i of r.data.tree_states)this.bringCardTreeToFront(this.getCard(i.id));for(let{id:i}of r.data.favorite_items)this.getCard(i).favorite=!0;for(let{id:i}of r.data.pinned_items)this.getCard(i).pinned=!0}pinnedItems(){return[...this.iterator()].filter(e=>e.pinned).map(e=>({id:e.id}))}favoriteItems(){return[...this.iterator()].filter(e=>e.favorite).map(e=>({id:e.id}))}get lastModified(){return new Date(this._lastModified)}cardsIntegrity(){return this._cardsIntegrity}zOrderIntegrity(){return this._zOrderIntegrity}static load(e,r){return new lC(e,r)}static create(e){return new lC(e)}*renderingOrderIterator(){for(let e of this._zOrders)yield this.getCard(e)}*bubblingOrderIterator(){for(let e=this._zOrders.length-1;e>=0;e--)yield this.getCard(this._zOrders[e])}bringCardTreeToFront(e,r=!1){let o=r?Array.from(e.lastSelfIterator()):[e];for(let i of o){for(let s of i.familyIterator({breadthFirst:!0})){let a=this._zOrders.indexOf(s.id);this._zOrders.splice(a,1),this._zOrders.push(s.id)}i.parent&&i.parent.bringChildToFront(i,r)}this._zOrderIntegrity++}*iterator(){for(let e of this.cardMap.values())yield e}*rootChildrenIterator(){for(let e of this._zOrders){let r=this.getCard(e);r.parent||(yield r)}}getCard(e){hN(e);let r=this.cardMap.get(e);if(!r)throw new Error(`card[${e}] not exists.`);return r}getCardSafe(e){return this.cardMap.get(e)}getCards(...e){return e.map(r=>this.getCard(r))}size(){return this.cardMap.size}hasCard(e){return this.cardMap.has(e)}addCard(e){this.cardMap.set(e.id,e),this._zOrders.push(e.id),this._cardsIntegrity++}deleteCardInternal(e){this.cardMap.delete(e);let r=this._zOrders.indexOf(e);this._zOrders.splice(r,1),this._cardsIntegrity++}deleteCard(e){let r=this.getCardSafe(e);if(!r)return[];let o=[e];return r.removeFromParent(),r.forEachDescendant(i=>{this.deleteCardInternal(i.id),o.push(i.id)}),this.deleteCardInternal(r.id),o}useCard(e,r){let o=this.getCardSafe(e);if(o)return r(o)}findCard(e){for(let r of this.cardMap.values())if(e(r))return r}useCards(e,r){let o=[];for(let i of e){let s=this.getCardSafe(i);s&&o.push(s)}if(o.length>0&&o.length===e.length)return r(...o)}handleCommand(e){let r=OA();if(e.type==="cardsInserted"||e.type==="cardsCopied")r=this.onCardsInserted(e);else if(e.type==="cardDeleted")r=this.onCardDeleted(e);else if(e.type==="cardMoved")this.onCardMoved(e);else if(e.type==="cardSizesChanged")this.onCardSizesChanged(e);else if(e.type==="cardMarginsChanged")this.onCardMarginsChanged(e);else if(e.type==="cardEdited")this.onCardEdited(e);else if(e.type==="connectorConnected")this.onConnectorConnected(e);else if(e.type==="connectorDisconnected")this.onConnectorDisconnected(e);else if(e.type==="connectorInserted")this.onConnectorInserted(e);else if(e.type==="groupStateChanged")this.onGroupStateChanged(e);else if(e.type==="groupMoved")this.onGroupMoved(e);else if(e.type==="groupDeleted")r=this.onGroupDeleted(e);else if(e.type==="treeStateChanged")this.onTreeStateChanged(e);else if(e.type==="connectorMoved")this.onConnectorMoved(e);else if(e.type==="connectorDismissed")this.onConnectorDismissed(e);else if(e.type==="pinStateChanged")this.onPinStateChanged(e);else if(e.type==="favoriteStateChanged")this.onFavoriteStateChanged(e);else return;return this._lastModified=new Date,r}applyTreeStates(e){let r,o=[...e];for(;r=o.pop();){o.push(...r.children);for(let{id:i}of r.children)this.useCards([r.id,i],(s,a)=>{s.addChild(a)})}}onCardsInserted(e){let r=OA();for(let o of e.cards){let i=Ys(o);this.hasCard(o.id)||(r.inserted.push(o.id),this.addCard(i))}if(e.treeStates&&this.applyTreeStates(e.treeStates),e.connections)for(let o of e.connections)this.useCards([o.from,o.to],(i,s)=>{i.safeConnect(s,o.as_different_group)});if(e.groupStates)for(let o of e.groupStates)this.useCard(o.top_of_group,i=>i.fold(o.is_folded));if(e.transitions)for(let o of e.transitions)this.useCard(o.cardId,i=>i.position=o.translation.to);if(e.favoriteItems)for(let o of e.favoriteItems)this.useCard(o.id,i=>i.favorite=!0);if(e.pinnedItems)for(let o of e.pinnedItems)this.useCard(o.id,i=>i.pinned=!0);return r}onCardMoved(e){this.useCard(e.cardId,r=>{let[o,i]=[e.position.x-r.position.x,e.position.y-r.position.y];r.position=Re(e.position),r.forEachDescendant(s=>{s.position=Re(s.position.x+o,s.position.y+i)}),this.bringCardTreeToFront(r,!0)})}onCardMarginsChanged(e){this.useCard(e.cardId,r=>{r.position={...e.position},r.size={...e.layoutSize},r.content.margins={...e.margins},r.markAsModified()})}onCardSizesChanged(e){for(let r of e.changes)this.useCard(r.cardId,o=>{o.position={...r.position},o.size={...r.layoutSize},o.markAsModified()})}onCardDeleted(e){let r=OA();return this.useCard(e.cardId,o=>{o.removeFromGroup(),o.removeFromParent(),r.deleted.push(...this.deleteCard(o.id))}),r}onCardEdited(e){this.hasCard(e.cardId)&&this.useCard(e.cardId,r=>{r.replaceContent(e.replacement)})}onConnectorConnected(e){this.useCards([e.fromId,e.toId],(r,o)=>{r.safeConnect(o,e.asDifferentGroup)})}onConnectorDisconnected(e){this.useCard(e.fromId,r=>{r.purgeNext()})}onConnectorInserted(e){this.useCards([e.conn1.from,e.conn1.to,e.conn2.from,e.conn2.to],(r,o,i,s)=>{o.canBeConnectedFrom(r)&&s.canBeConnectedFrom(i)&&(r.connect(o,e.conn1.as_different_group),i.connect(s,e.conn2.as_different_group))})}onConnectorMoved(e){this.useCard(e.fromId,r=>{r.dashedConnectorPosition=Re(e.position)})}onConnectorDismissed(e){this.useCard(e.fromId,r=>{r.dashedConnectorPosition=void 0})}onGroupMoved(e){this.useCard(e.topOfGroup,r=>{let o=e.topPosition.x-r.position.x,i=e.topPosition.y-r.position.y,s=Array.from(r.iterator()),a;for(;a=s.pop();)s.push(...a.children),a.position=Re(a.position.x+o,a.position.y+i)})}onGroupDeleted(e){let r=OA();return this.useCard(e.topOfGroup,o=>{o.removeFromGroupAsGroup();for(let i of o.iterator())r.deleted.push(...this.deleteCard(i.id))}),r}onGroupStateChanged(e){this.useCard(e.topOfGroup,r=>{r.fold(e.isFolded)})}onTreeStateChanged(e){let r=e.cardId,o=e.parentId;o?this.useCards([r,o],(i,s)=>{e.resize&&(e.grouped?B1(function*(){for(let a of i.memberAndChildrenIterator())a.id!==s.id&&(yield a)},e.resize.scale,e.resize.pivot):B1(function*(){for(let a of i.familyIterator())a.id!==s.id&&(yield a)},e.resize.scale,e.resize.pivot)),e.grouped?s.addGroup(i):(i.removeFromGroup(),s.addChild(i)),this.bringCardTreeToFront(i,e.grouped)}):this.useCard(r,i=>{e.resize&&B1(()=>i.memberAndChildrenIterator(),e.resize.scale,e.resize.pivot),e.grouped?(i.removeFromGroupAsGroup(),i.forEach(s=>{s.removeFromParent()})):(i.removeFromGroup(),i.removeFromParent()),this.bringCardTreeToFront(i,e.grouped)})}onPinStateChanged(e){this.useCard(e.cardId,r=>{var i;let o=(i=r.prev)!=null?i:r.prevGroup;o==null||o.purgeNext(),r.purgeNext(),r.pinned=e.pinned})}onFavoriteStateChanged(e){this.useCard(e.cardId,r=>{r.favorite=e.favorite})}cards(){let e=[];for(let r of this.renderingOrderIterator())e.push(r.toJSON());return e}*familyIterator(){for(let e of this.iterator())yield e}connections(){return YQ(this)}groupStates(){return RA(this)}foldStates(){return[]}treeStates(){return Array.from(this.rootChildrenIterator()).map(M1)}toJSON(){let e=this.cards(),r=["sheet"];return e.some(o=>o.type==="quiz")&&r.push("quiz"),e.some(o=>o.type==="attendance")&&r.push("attendance"),{format:"note",version:hY,data:{metadata:{created_by:"web"},frames:this.cards(),connections:this.connections(),fold_states:this.foldStates(),group_states:this.groupStates(),tree_states:this.treeStates(),pinned_items:this.pinnedItems(),favorite_items:this.favoriteItems()},features:r}}};function OA(t={}){return{deleted:[],inserted:[],...t}}var iJ=L0();async function ta(t){var i;let o=await((i=(await new iJ().loadAsync(t)).file("body"))==null?void 0:i.async("text"));return $e(o!=null,"body must be stored"),JSON.parse(o)}function ra({id:t,snapshotId:e,file:r,overrideAuthor:o,remapIds:i,srcIdMap:s,idMapper:a,author:l}){let c=t1e(r,l);if(o)for(let p of c.data.frames)p.metadata.author=l;let u=aC(0,c).findCard(p=>!p.parent).headGroup();return i&&(u=u.copyGroup({srcIdMap:s,overGroup:!0,idMapper:a})),Array.from(u.iteratorOverGroup()).forEach((p,h)=>{p.document={id:t,index:h,commentSnapshotId:e}}),u}async function sJ(t){let e=new iJ;return e.file("body",JSON.stringify(t)),await e.generateAsync({type:"arraybuffer"})}function t1e(t,e){let{entire_body:r,fold_states:o,...i}=t;return t.entire_body?l1(t.entire_body,e):o?l1({version:"2.1.0.0",format:"note",data:{metadata:{created_by:"ipad"},fold_states:o,...i}},e):l1({version:"2.0.0.0",format:"note",data:{metadata:{created_by:"ipad"},...i}},e)}async function RO({lnsClient:t,docId:e,head:r,snapshotId:o}){let i=0,s=[];for(let a of r.iteratorOverGroup()){let l=async(p,h,f,m)=>{let g=a.drawnAssetId(p),v=new Set(h.garbage);g&&!h.ignore_base&&(f=(await ue.lnsClient.downloadAsset(g).then(R_)).contents.concat(f)),f=f.filter(k=>!v.has(k.id));let y=gr.get(a),S={canvas:h.canvas,contents:f},{small:C,medium:b}=y[p].redrawThumbnails({geometry:m,contents:f});if(!C||!b)throw new Error(`medium thumb for ${p} must be generated!`);let x=await I_(S),w=await t.uploadAssetV2({file:new File([x],`${p}.lnstroke`,{type:"application/zip"}),metadata:[{}],extWithDot:".lnstroke"});return await t.uploadAssetThumbnails({uuid:w.result,index:0,small:await xo(C,"image/png","small.png"),medium:await xo(b,"image/png","medium.png")}),w},c,d;o?[c,d]=await Promise.all([t.getDocumentLayerSnapshot({documentId:e,index:i,type:"annotation",snapshotId:o}),t.getDocumentLayerSnapshot({documentId:e,index:i,type:"drawn",snapshotId:o})]):[c,d]=await Promise.all([t.getDocumentLayer({documentId:e,index:i,type:"annotation",afterGeneration:0}),t.getDocumentLayer({documentId:e,index:i,type:"drawn",afterGeneration:0})]);let u=[];if(c){let[p,h]=c,f=a.drawnGeometry("annotation");u.push(l("annotation",p,h,f).then(m=>{a.gadgets.annotations={...f,asset:{remote_id:m.result}}}))}if(d){let[p,h]=d,f=a.drawnGeometry("drawn");u.push(l("drawn",p,h,f).then(m=>{a.gadgets.drawn={...f,asset:{remote_id:m.result}}}))}s.push(Promise.all(u)),i++}await Promise.all(s)}async function FO(t){$e(t.document!=null,"document must be set");let e=xr(t.contentSizeWithMargins,ff),r=Dr.create(e),o=r.getContext2dForce();L1(o,t,(a,l)=>{fh({ctx:a,mtx:l,canvas:a.canvas,viewport:js(),root:t,card:t,toolVisible:!1,rootMipmapType:"content",ignoreAnnotations:!0,dpr:1})});let i=dl(r,xr(t.contentSizeWithMargins,ou)),s=gr.get(t);return s.document.set("medium",r),s.document.set("small",i),r}async function r1e(t){$e(t.document!=null,"document must be set");let e=To.get("annotation",t),r=t.drawnAssetId("annotation"),o=[];r&&!e.getLayerLoadState().loadedAtLeastOnce()?o.push(e.updateData(r)):o.push(Promise.resolve()),o.push(e.updateDocumentLayer());let[i,s]=await Promise.all(o),a=gr.get(t);if(s!=="notFound"){let{medium:l}=a.annotation.redrawThumbnails({geometry:t.drawnGeometry("annotation"),contents:e.packContents()});return l}else return null}function L1(t,e,r){let o=t.canvas,[i,s]=[o.width/2,o.height/2],a=Cn(o,e.size),l=new ft(a,0,0,a,i,s);t.save(),t.clearRect(0,0,o.width,o.height),t.transform(l.a,0,0,l.d,l.e,l.f),r(t,l),t.restore()}async function zA(t){$e(t.document!=null,"card must have document");let e=await FO(t);return xo(e,"image/jpeg",`thumb_${t.document.index}.jpg`)}async function UA(t){$e(t.document!=null,"card must have document");let e=await r1e(t);return e?xo(e,"image/png",`annotation_thumb_${t.document.index}.png`):null}async function cC(t,e,r=!0){let o=await lJ(t,e),i=[],s=[],a=[];if(r){let{medium:l,annoMedium:c}=await cJ(t);i=l,s=c,a=[...t.iteratorOverGroup()].map(d=>{if(d.drawnAssetId("annotation")){let p=d.drawnGeometry("annotation");return{version:"1.1.0.0",canvas:p.canvas}}else return null})}return{data:o,annotationThumbnails:s,annotations:a,thumbnails:i,pageCount:t.memberCountOverGroup(),assetUUIDs:Wu([...t.memberAndChildrenIteratorOverGroup()].map(l=>l.toJSON()))}}async function aJ(t){let{card:e,user:r,courseId:o,submission_number:i}=t,s=await lJ(e,r),{small:a,medium:l,annoSmall:c,annoMedium:d}=await cJ(e,!0);$e(a!=null,"small thumbs must be defined"),$e(c!==void 0,"annotation small thumbs must be defined");let u=[],p=[];for(let h=0;h<l.length;h++){let f=[ue.lnsClient.uploadGenericFile({file:a[h],extWithDot:".png"}),ue.lnsClient.uploadGenericFile({file:l[h],extWithDot:".png"})],m=c==null?void 0:c[h],g=d[h];g&&m&&f.push(ue.lnsClient.uploadGenericFile({file:m,extWithDot:".png"}),ue.lnsClient.uploadGenericFile({file:g,extWithDot:".png"}));let v=await Promise.all(f);u.push({small:v[0].id,medium:v[1].id}),v[2]&&v[3]&&p.push({index:h,small:v[2].id,medium:v[3].id})}return{courseId:o,submission_number:i,data:s,thumbnails:u,annotation_thumbnails:p}}async function lJ(t,e){let r=[...t.iteratorOverGroup()],o=pu(r.map(f=>f.groupStates())),i=r.map(f=>f.treeState()),s=pu(r.map(f=>f.connections({withoutSelf:!1}))),a=[],l=[...t.memberAndChildrenIteratorOverGroup()].map(f=>f.toJSON()).map(f=>(f.metadata.author.id!==e.id&&(f.metadata.author.id=e.id,f.metadata.author.name=e.name),f)),c=[...t.memberAndChildrenIteratorOverGroup()].map(f=>f.toV210JSON()).map(f=>(f.metadata.author.id!==e.id&&(f.metadata.author.id=e.id,f.metadata.author.name=e.name),f)),d=[],u=[];for(let f of t.memberAndChildrenIteratorOverGroup())f.favorite&&d.push({id:f.id}),f.pinned&&u.push({id:f.id});let p=["sheet"];l.some(f=>f.type==="quiz")&&p.push("quiz"),l.some(f=>f.type==="attendance")&&p.push("attendance");let h={frames:c,connections:s,group_states:o,fold_states:a,entire_body:{data:{connections:s,favorite_items:d,fold_states:a,frames:l,group_states:o,metadata:{created_by:"web"},pinned_items:u,tree_states:i},features:p,format:"note",version:"3.7.0.0"}};return new File([await sJ(h)],"document.lnfragment",{type:"application/octet-stream"})}async function cJ(t,e){let r=[],o=[],i,s;e&&(i=[],s=[]);let a=[];for(let u of t.memberAndChildrenIteratorOverGroup()){let p=gr.get(u);a.push(p.content.load("medium",u),p.document.load("medium",u),p.drawn.load("medium",u),p.annotation.load("medium",u))}await Promise.all(a);let l=Dr.create(0,0),c=l.getContext2dForce(),d=0;for(let u of t.iteratorOverGroup()){let p=xr(u.contentSizeWithMargins,Cp);l.width=p.width,l.height=p.height,L1(c,u,(g,v)=>{fh({ctx:g,mtx:v,canvas:g.canvas,viewport:js(),root:u,card:u,toolVisible:!1,ignoreAnnotations:!0,dpr:1})});let h=await xo(l,"image/png",`thumb${d}_medium.png`);if(r.push(h),i){let g=dl(l,xr(u.contentSizeWithMargins,ou)),v=await xo(g,"image/png",`thumb${d}_small.png`);i.push(v)}let f=gr.get(u);if(u.drawnAssetId("annotation")){let g=f.annotation.get("medium");$e(g!=null,"annotation thumbnail must be generated"),L1(c,u,y=>{let S=u.drawnThumbLocalBounds("annotation");y.save(),y.drawImage(g,S.x,S.y,S.width,S.height),y.restore()});let v=await xo(l,"image/png",`annotation${d}_medium.png`);if(o.push(v),s){let y=dl(l,xr(u.contentSizeWithMargins,ou)),S=await xo(y,"image/png",`annotation${d}_small.png`);s.push(S)}}else o.push(null),s==null||s.push(null);d++}return{small:i,annoSmall:s,medium:r,annoMedium:o}}async function MO({store:t,state:e,courseId:r,card:o,presenter:i,authorId:s,anonymous:a,presentedQuizId:l,presentedQuizPreset:c,presentedAttendanceId:d}){let u=oe.screenSharing,p=De.get().strings;try{await Sm(t,o,u)}catch(h){t.reduce(Fe(u,null),Pe(u,{title:p.couldntShareScreen,...Ht(h),okMessage:p.okay,onOk(){t.reduce(Pe(u,void 0))}}));return}try{let h,f=o.rootParent();f.document?h=f.document.id:h=await n1e(t,r,o);let m=Nc({store:t,presenter:i,publisher:t.userInfo.user_id,clientId:t.deviceId,anonymous:a,fullscreen:{authorId:s,document:h,...e,presentedQuizId:l,presentedQuizPreset:c,presentedAttendanceId:d}});await GA({store:t,courseId:r,command:m,presenter:i})}catch(h){t.reduce(Pe(u,{title:p.couldntShareScreen,...Ht(h),okMessage:"OK",onOk:()=>t.reduce(Pe(u,void 0))}))}}async function HA({store:t,anonymous:e,answers:r}){let o=or(t);$e(typeof o=="number");let i=$A(t,o,r),s=i.map(u=>u.document),{rows:a,cols:l}=iC(t.screen,r.length),c={rowCount:a,columnCount:l,height:t.screen.height,scrollOffset:0,items:i},d=z1({store:t,anonymous:e,documentDependency:s,body:c});await GA({store:t,courseId:o,command:d}).then(()=>{t.reduce(gu(s))}).catch(u=>{let p=De.get().strings;t.reduce(Pe(oe.screenSharing,{title:p.couldntShareScreen,...Ht(u),okMessage:"OK",onOk:()=>t.reduce(Pe(oe.screenSharing,void 0))}))})}async function n1e(t,e,r){let o=De.get().strings;t.reduce(Fe(oe.screenSharing,o.uploadingDocument));let i={id:t.userInfo.user_id,name:Ut(t.userInfo)},s=r.headGroup();if(s.parent){s=s.copyGroup({idMapper:c=>c});for(let c of s.iteratorOverGroup())Fn(c.content.backcolor).isTransparent()&&(c.content.backcolor=Qk.toARGBHex())}let a=await cC(s,i,!1),l={courseId:e,...a};try{return(await ue.lnsClient.uploadDocumentForScreenSharing(l)).id}catch(c){throw yt.catchError(c),c}finally{t.reduce(Fe(oe.screenSharing,null))}}function GA({store:t,courseId:e,command:r,presenter:o}){let i=De.get().strings;return t.reduce(Fe(oe.screenSharing,o?i.preparingStudentPresentation:i.preparingScreenSharing)),ue.lnsClient.startScreenSharing({courseId:e,command:r}).then(s=>{let a={sessionId:s.id,courseId:e,publisher:t.userInfo.user_id,presenter:o,type:r.type,clientId:r.clientId,anonymous:r.anonymous===!0};if(BO(r)){let{document:c,authorId:d,presentedWebURL:u,presentedQuizId:p,presentedAttendanceId:h}=r.fullscreen;a.fullscreen={document:c,authorId:d,presentedWebURL:u,presentedQuizId:p,presentedAttendanceId:h}}let l=o?Ky(!0):EP(!0);t.reduce(Zi(a),l,Co())}).catch(yt.handleError).finally(()=>{t.reduce(Fe(oe.screenSharing,null))})}async function Fd({store:t,sessionId:e,courseId:r,showDialog:o,forStudent:i}){let s=De.get().strings,a=i?s.stoppingStudentPresentation:s.stoppingScreenSharing;t.reduce(Fe(oe.screenSharing,o?a:null));try{if(!e){let l=await ue.lnsClient.getScreenSharingState(r);(l==null?void 0:l.publisher)===t.userInfo.user_id&&(e=l.id)}e&&(await ue.lnsClient.stopScreenSharing(r,e),t.reduce(Zi(void 0),Co()))}catch(l){O1(t)(l)}finally{t.reduce(Fe(oe.screenSharing,null))}}async function dJ(t,e,r){let o=De.get().strings;t.reduce(Fe(oe.screenSharing,o.stoppingScreenSharing)),await ue.lnsClient.stopScreenSharing(e,r).then(()=>NO(t,e)).catch(O1(t)).finally(()=>{t.reduce(Fe(oe.screenSharing,null))})}function mh({store:t,command:e,dialogMessage:r}){let o=t.screenSharingState;$e(o!=null,"store.screenSharing must be set");let{courseId:i,sessionId:s}=o,{presenter:a}=e;return r&&t.reduce(Fe(oe.screenSharing,r)),ue.lnsClient.updateScreenSharing(i,s,e).then(()=>{let l=[Fe(oe.screenSharing,null),Zi(Gv(s,i,e))];e.publisher===t.userInfo.user_id&&l.push(Ky(a!=null)),t.reduce(...l)}).catch(async l=>{throw t.reduce(Fe(oe.screenSharing,null)),l}).catch(yt.handleError).catch(async l=>{if(l instanceof Yr&&l.status===404){let c=await ue.lnsClient.getScreenSharingState(i);(c==null?void 0:c.publisher)===t.userInfo.user_id?await GA({store:t,courseId:i,command:e,presenter:a}):t.reduce(Zi(void 0),Co())}else throw l}).catch(O1(t))}async function uJ(t,e,r){let o=De.get().strings,i=t.screenSharingState;$e((i==null?void 0:i.fullscreen)!=null),$e(r!=null);let{publisher:s,anonymous:a,clientId:l,fullscreen:c}=i;$e(e===i.courseId);let{presentedQuizId:d,presentedAttendanceId:u,presentedWebURL:p,...h}=c,f=Nc({store:t,publisher:s,presenter:void 0,anonymous:a,clientId:l,fullscreen:{presentedWebURL:void 0,presentedQuizId:void 0,presentedAttendanceId:void 0,...h,...r}});try{await GA({store:t,courseId:e,command:f,presenter:void 0}),t.reduce(Ky(!1))}catch(m){t.reduce(Pe(oe.screenSharing,{title:o.couldntShareScreen,...Ht(m),okMessage:"OK",onOk:()=>t.reduce(Pe(oe.screenSharing,void 0))}))}}function NO(t,e){return ue.lnsClient.getScreenSharingState(e).then(r=>{var o,i;if(r){let s={action:"screen_sharing",...r};if(t.reduce(Op(e,s)),s.publisher===t.userInfo.user_id){let a=Gv(s.id,e,s);xi(s)&&(t.editor||((i=t.submissionAnswer)==null?void 0:i.id)===s.fullscreen.document)?t.reduce(Zi(a),EP(!0),Ky(s.presenter!=null)):Jx(s)&&t.submissionNumber!=null?t.reduce(Zi(a),EP(!0),Ky(!1),gu(s.comparison.items.sort((l,c)=>l.order-c.order).map(l=>l.document))):Fd({store:t,sessionId:s.id,courseId:e})}}else{let s=(o=t.screenSharingActionNotification[e])==null?void 0:o.id,a={id:s!=null?s:"",action:"screen_sharing",type:"end"};t.reduce(Op(e,a))}}).catch(yt.handleError).catch(r=>{r instanceof Yr||ge.error(r)})}function pJ(t,e,r,o){return ue.lnsClient.updateScreenSharingReadyStatus(e,r,o).catch(O1(t))}function O1(t){let e=De.get().strings;return r=>{yt.catchError(r)||t.reduce(Pe(oe.screenSharing,{title:e.screenSharingErrorOccurred,...Ht(r),okMessage:e.reload,onOk:()=>location.assign(location.href)}))}}async function hJ(t,e,r){await ue.lnsClient.keepScreenSharingAlive(e,r,15*60).catch(O1(t))}async function dC(t,e,r){if(t.screenSharingState&&e){let{publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:l}=t.screenSharingState,c=Object.assign(e,{presentedWebURL:r!=null?r:null}),d=Object.assign(l,c),u=Nc({store:t,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:d});await mh({store:t,command:u})}}async function gh(t,e,r){if(t.screenSharingState&&e){let{publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:l}=t.screenSharingState,c=Object.assign(e,{presentedQuizId:r!=null?r:null}),d=Object.assign(l,c),u=Nc({store:t,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:d});await mh({store:t,command:u})}}async function Md(t,e,r){if(t.screenSharingState&&e){let{publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:l}=t.screenSharingState,c=Object.assign(e,{presentedAttendanceId:r!=null?r:null}),d=Object.assign(l,c),u=Nc({store:t,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:d});await mh({store:t,command:u})}}async function Hv(t){let{store:e,editorRendererState:r,authorId:o,card:i,anonymous:s,presenter:a}=t,l=or(e);if(typeof l!="number"||!r)return;let c;if(i instanceof zr?c={presentedQuizId:i.content.quiz_id,presentedQuizPreset:i.content.preset}:c={presentedAttendanceId:i.content.attendance_id},e.screenSharingState){let{publisher:d,presenter:u,clientId:p,anonymous:h,fullscreen:f}=e.screenSharingState,m=Object.assign(r,c),g=Object.assign(f,m),v=Nc({store:e,publisher:d,presenter:u,clientId:p,anonymous:h,fullscreen:g});await mh({store:e,command:v})}else await MO({store:e,state:r,courseId:l,authorId:o,presenter:a,card:i,anonymous:s,...c})}async function VA(t,e,r){let o=Promise.all([ue.lnsClient.getCourseTeacherStatues(e),ue.lnsClient.getCourseUserStatues(e),ue.lnsClient.getScreenSharingReadyStatus(e,r)]);await bo(t,{fetchingId:wt.receiverStatus(e),promise:o,doneReducer:i=>{var u,p,h,f;let s=pu([i[0],i[1]]),a=(p=(u=i[2])==null?void 0:u.ready)!=null?p:[],l=(f=(h=i[2])==null?void 0:h.notReady)!=null?f:[],c=[IP(e,s)],d=s.map(m=>a.includes(m.id)?Yy(m.id,!0):l.includes(m.id)?Yy(m.id,!1):Yy(m.id,void 0));return c.push(...d),c}})}var WA=class{constructor(){this.cancelledTasks=new Set;this.pendingTasks=new Set;this.depth=0;this.maxTaskId=0;this.complete=()=>{this.depth--,this.depth===0&&(this.tail=void 0)}}queue(e,r){this.maxTaskId++;let o=this.maxTaskId,i;return this.tail?(this.pendingTasks.add(o),i=this.tail.then(()=>(this.pendingTasks.delete(o),this.cancelledTasks.has(o)?(this.cancelledTasks.delete(o),Promise.resolve(void 0)):e(r).catch(()=>{})))):i=e(r).catch(()=>{}),this.depth++,this.tail=i.then(this.complete).catch(this.complete),i}cancelAllPendingTasks(){for(let e of this.pendingTasks)this.cancelledTasks.add(e);this.pendingTasks.clear()}};function BO(t){return(t==null?void 0:t.type)==="fullscreen"}var U1=class{constructor(e,r){this.storeProvider=r;this.buffer=[];this.scheduler=new WA;this.body=e}pushPoint(e){this.buffer.push(...e),this.publish()}update(e){this.body=e,this.publish()}publish(){let e=this.body;this.scheduler.cancelAllPendingTasks(),this.scheduler.queue(()=>{let r=this.storeProvider(),{screenSharingState:o}=r;if(!o)return ge.warn("FullScreenSharingDistributor.distribute called without screenSharingState"),Promise.resolve();let{publisher:i,presenter:s,clientId:a,anonymous:l}=o,c=Nc({store:r,publisher:i,presenter:s,clientId:a,anonymous:l,fullscreen:e}),d=this.buffer;return this.buffer=[],d.length>0&&(c.pointer=d),mh({store:r,command:c}).catch(ge.error)})}},LO=class{constructor(e){this.storeProvider=e;this.scheduler=new WA;this.answers=[];this.buffer=[]}pushPoint(e){this.buffer.push(...e),this.publish()}update(e,r=[]){this.answers=e,this.buffer.push(...r),this.publish()}publish(){this.scheduler.cancelAllPendingTasks(),this.scheduler.queue(()=>{let e=this.storeProvider(),{screenSharingState:r}=e;if(!r)return ge.warn("ComparisonSharingDistributor.distribute called without screenSharingState"),Promise.resolve();let o=this.answers,i=this.buffer;this.buffer=[];let s=o1e(e,o),{anonymous:a}=r,l=s.items.map(d=>d.document),c=z1({store:e,anonymous:a,body:s,documentDependency:l});return i.length>0&&(c.pointer=i),mh({store:e,command:c}).catch(ge.error)})}};function fJ({store:t,type:e,presenter:r,publisher:o,clientId:i,anonymous:s}){return{type:e,clientId:i,publisher:o,presenter:r,ready:!0,device_id:t.deviceId,anonymous:s,screenWidth:t.screen.width,screenHeight:t.screen.height}}function Nc({store:t,presenter:e,publisher:r,clientId:o,anonymous:i,fullscreen:s}){return{...fJ({store:t,type:"fullscreen",presenter:e,publisher:r,clientId:o,anonymous:i}),fullscreen:s,documentDependency:[]}}function z1({store:t,anonymous:e,body:r,documentDependency:o}){let i=t.userInfo.user_id,s=t.deviceId;return{...fJ({store:t,type:"comparison",presenter:void 0,publisher:i,clientId:s,anonymous:e}),comparison:r,documentDependency:o}}function Gv(t,e,r){let{presenter:o,publisher:i,clientId:s,anonymous:a}=r;if(BO(r)){let{fullscreen:l}=r,{document:c,authorId:d,presentedWebURL:u,presentedQuizId:p,presentedAttendanceId:h}=l;return{sessionId:t,courseId:e,type:"fullscreen",presenter:o,publisher:i,clientId:s,anonymous:a===!0,fullscreen:{document:c,authorId:d,presentedWebURL:u,presentedQuizId:p,presentedAttendanceId:h}}}else return{sessionId:t,courseId:e,type:"comparison",presenter:o,publisher:i,clientId:s,anonymous:a===!0}}function o1e(t,e){var s;let r=[];for(let a=0;a<e.length;a++){let l=e[a];if(l==null)continue;let c=(s=t.submissionAnswerPageIndexStates[l])!=null?s:0,d=t.submissionAnswers.byId[l];r.push({document:l,page:c,authorId:d.author_id,order:a})}let{cols:o,rows:i}=NA(t.screen,Gt,320,e.length);return{columnCount:o,rowCount:i,height:t.screen.height,scrollOffset:0,items:r}}function mJ(t,e,r,o){let i,s=()=>{document.hasFocus()&&ue.lnsClient.keepScreenSharingAlive(e,r,o).catch(a=>{yt.catchError(a)&&OO(i)})};return i=window.setInterval(s,15*pr.sec),s(),i}function OO(t){window.clearInterval(t)}var jA=class{constructor(e,r){this.targetCardId=e;this.totalNumber=r;this.loadedCardIds=new Set}isTargetCard(e){return this.targetCardId===e.id}get count(){return this.loadedCardIds.size}addLoadedList(e){return e.id===this.targetCardId||e.isDescendantOf(this.targetCardId)?(this.loadedCardIds.add(e.id),!0):!1}isReady(){return this.count===this.totalNumber}},H1=class{constructor(e,r,o){this.store=e;this.sessionId=r;this.courseId=o;this.nextReadyState=!1;this.updating=!1}notifyReadyState(e){this.nextReadyState=e,!(this.updating||this.prevReadyState===e)&&(this.updating=!0,pJ(this.store,this.courseId,this.sessionId,e).then(()=>{this.updating=!1,this.prevReadyState=e,this.nextReadyState!==e&&this.notifyReadyState(this.nextReadyState)}))}};function $A(t,e,r){var l;let{submissionNumber:o}=t;$e(typeof o=="number");let i=ao(e,o),s=t.submissions.byKey[i];$e(s!=null);let a=[];for(let c=0;c<r.length;c++){let d=r[c];if(d==null)continue;let u=t.submissionAnswers.byId[d];a.push({document:d,page:(l=t.submissionAnswerPageIndexStates[d])!=null?l:0,authorId:u.author_id,order:c})}return a}var zO=X(on());function Wl(t,e=!1){let r=De.get().strings;if(e){let o=t.groupMemberCount();return(0,zO.sprintf)(r.confirmMultiCardGroupDelete,o)}else{let o=t.descendantsCount();return o>0?(0,zO.sprintf)(r.confirmMultiChildCardDelete,o):r.confirmCardDelete}}var Vv=class{constructor(){this.prevFps=0;this._fps=0;this._fis=0;this._et=0;this.elapsedTime=0,this.prev=this.startTime=new Date().getTime()/1e3,this.frameCount=0,this.deltaTime=0}get fps(){return this.prevFps}update(){let e=new Date().getTime()/1e3;return this.frameCount++,this.deltaTime=e-this.prev,this.elapsedTime+=this.deltaTime,this._et+=this.deltaTime,this._fps++,this.prev=e,this._et>=1&&(this.prevFps=this._fps,this._fps=this._fis,this._fps=0,this._et=0),{elapsedTime:this.elapsedTime,deltaTime:this.deltaTime}}};var gJ=60,vJ=class{constructor(){this.rows=[];this.idCellIndexMap=new Map;this.needReturn=(e,r)=>!!(e.column===KA-1||r.next||r.nextGroup||r.isFolded)}getLastCell(){for(let e=this.rows.length-1;e>=0;e--){let r=this.rows[e].getLastCell();if(r)return r}}add(e,r,o){let i=this.getLastCell();if(!i){this.rows.length===0&&(this.startPosition={x:r.x,y:r.y},this.rows.push(new UO),this.rows[0].add(0,e,r),this.idCellIndexMap.set(e,{row:0,column:0}));return}let s=this.idCellIndexMap.get(i.id);if(!s)return;let a=o.getCardSafe(i.id);if(!!a)if(this.needReturn(s,a)){if(!this.rows[s.row].getHighestCell())return;this.rows.push(new UO),this.rows[s.row+1].add(0,e,r),this.idCellIndexMap.set(e,{row:s.row+1,column:0})}else this.rows[s.row].add(s.column+1,e,r),this.idCellIndexMap.set(e,{row:s.row,column:s.column+1})}getNextCardPosition(e,r){if(!this.startPosition)return;let o=this.getLastCell();if(!o)return;let i=this.idCellIndexMap.get(o.id);if(!i)return;let s=r.getCardSafe(o.id);if(!s)return;let a={x:o.bounds.x,y:o.bounds.y};if(this.needReturn(i,s)){let l=this.rows[i.row].getHighestCell();if(!l)return;a.x=this.startPosition.x+e.width/2,a.y+=l.bounds.height+gJ+e.height/2}else a.x+=o.bounds.width+gJ+e.width/2,a.y=o.bounds.y+e.height/2;return a}remove(e){let r=this.idCellIndexMap.get(e);if(!r)return;let o=this.rows[r.row];!o||(o.remove(e),this.idCellIndexMap.delete(e),o.isEmpty()&&r.row===this.rows.length-1&&this.rows.splice(r.row,1))}clear(){this.rows=[],this.idCellIndexMap=new Map}clearIfInvisible(e,r){this.rows.some(o=>o.isCardsVisible(e,r))||this.clear()}},_n=new vJ,KA=4,UO=class{constructor(){this.cells=new Array(KA);this.cells.fill(null)}isEmpty(){return!this.cells.some(e=>e!==null)}getLastCell(){for(let e=KA-1;e>=0;e--){let r=this.cells[e];if(r)return r}}getHighestCell(){let e=0,r;for(let o of this.cells)o&&o.bounds.height>e&&(e=o.bounds.height,r=o);return r}add(e,r,o){e>=0&&e<KA&&!this.cells[e]&&(this.cells[e]={id:r,bounds:o})}remove(e){let r=this.cells.findIndex(o=>(o==null?void 0:o.id)===e);r<0||(this.cells[r]=null)}isCardsVisible(e,r){for(let o of this.cells){if(!o)continue;let i=r.getCardSafe(o.id);if(!!i&&!(i.isFolded&&i.id!==i.headGroup().id)&&_l(e,o.bounds))return!0}return!1}};function qA({fineCanvas:t,roughCanvas:e}){let r=nt(),o=nt(),i=new ft,s=new ft,a=!1,l=!1,c=1;function d(f){c=f}function u(){a=!0}function p(){l=!0}function h({ctx:f,mtx:m,delegate:g,roughScaleTransform:v,clip:y}){let S=f.canvas;if(S.width<=0||S.height<=0)return;f.save();let C=!1;if(c>0&&(c-=1,c<1&&(l=!0,C=!0)),!l){f.restore();return}l=!1;let b=m.invert(),x=t.getContext("2d"),w=e.getContext("2d");if(!x||!w)throw new fo;let k=nt(0,0,S.width,S.height),T=b.applied(k),A;if(C)t.width=S.width,t.height=S.height,g({ctx:x,mtx:m,rough:!1}),o=nt(T),i=m.clone();else{let F=m.a/i.a,z=m.e-i.e*F,L=m.f-i.f*F;A=new ft(F,0,0,F,z,L)}f.clearRect(0,0,S.width,S.height);let E=i.a<m.a/v.a;if(E||T.x<o.x||T.y<o.y||o.x+o.width<T.x+T.width||o.y+o.height<T.y+T.height){let F=!a&&_l(r,T);a=!1;let z;if(F){let L=m.a/s.a;if(L<=v.a){let R=m.e-s.e*L,N=m.f-s.f*L;z=v.clone().prepend(L,0,0,L,R,N)}else F=!1}if(!F){let L=m.clone().prependMatrix(v.invert());e.width=S.width,e.height=S.height,g({ctx:w,mtx:L,rough:!0,clip:y}),r=L.invert().applied(k),s=m.clone(),z=v.clone()}if(z){if(f.save(),f.transform(z.a,0,0,z.d,z.e,z.f),f.drawImage(e,0,0),f.restore(),E){f.restore();return}let L=nt(o.x*m.a+m.e,o.y*m.d+m.f,o.width*m.a,o.height*m.d);f.clearRect(L.x,L.y,L.width,L.height)}}A&&f.transform(A.a,0,0,A.d,A.e,A.f),f.drawImage(t,0,0),f.restore()}return{render:h,setFineRedrawCountDown:d,needsRoughRedraw(){u()},needsDisplay(){p()}}}var HO=class{constructor(e,r){this.layers=new ni(()=>Dr.create());this.zOrder=[];this._width=0;this._height=0;for(let o of e)this.layers.get(o);this.zOrder=e,r&&(this.width=r.width,this.height=r.height)}get width(){return this._width}set width(e){this._width!==e&&(this._width=e,this.forEach(r=>{r.width=e}))}get height(){return this._height}set height(e){this._height!==e&&(this._height=e,this.forEach(r=>{r.height=e}))}forEach(e){for(let r of this.zOrder)e(this.layers.get(r))}getLayer(e){return this.layers.get(e)}composite(e,r,o){e.save();for(let i of this.layerIterator())e.drawImage(i,r,o);e.restore()}*layerIterator(){for(let e of this.zOrder)yield this.layers.get(e)}};function bJ(t,e){return new YA(t).toRenderNode(e)}var YA=class{constructor(e,r){this.node=e;this.parent=r}get layer(){return this.node.layer==="inherit"?($e(this.parent!=null,"root node must not be inherit layer"),this.parent.layer):this.node.layer}toRenderNode(e){let{children:r,layer:o,...i}=this.node,s=r.map(a=>new YA(a,this).toRenderNode(e));return this.layer===e?{...i,layer:e,children:s}:{type:"container",children:s,globalMtx:i.globalMtx,layer:e,layout:{},localMtx:i.localMtx,styles:{},props:{},visible:!0}}};var GO=class{constructor(){this.layeredCanvas=new HO(["static","dynamic","hud"])}paint({mtx:e,state:r,node:o}){let i=["static","dynamic","hud"],{width:s,height:a}=r.canvas;this.layeredCanvas.width=s,this.layeredCanvas.height=a;for(let l of i){let d=this.layeredCanvas.getLayer(l).getContext2dForce();d.save(),d.clearRect(0,0,s,a),d.transform(e.a,e.b,e.c,e.d,e.e,e.f);let u=bJ(o,l);rC(d,u),d.restore()}}composite(e){this.layeredCanvas.composite(e,0,0)}};function uC(t){let{nextHover:e,root:r,pivot:o,shrinkManager:i,longHoverDetector:s,desktopScale:a,onHoverChanged:l}=t;!e||e.card===r||e.scale>=1?(s.clear(),i.emphasize(!!e&&e.card!==r),l(e==null?void 0:e.card),i.cancelShrink(o)):i.scale===e.scale?(i.unsetTranslucentEffect(),i.updateShrinkPivot(o)):i.scale>e.scale?(i.emphasize(!0),i.setTranslucentEffect(),s.hover({card:e.card,location:o,touchSlop:5*window.devicePixelRatio/a,onHoverCommitted:c=>{l(e.card),i.shrink({scale:e.scale,pivot:c})}}),i.updateShrinkPivot(o)):(l(e.card),i.relieveShrink({scale:e.scale,pivot:o}))}var $v=class{constructor(){this.currentScale=1;this.getCardRenderer=e=>Dt(e,Oi)}get scale(){return this.currentScale}heldUp(e){let{card:r,grouped:o}=e;this.held={card:r,grouped:o},this.currentScale=1}emphasize(e){if(!!this.held)if(this.held.grouped)for(let r of this.held.card.iterator())this.getCardRenderer(r).setEmphasizeEffect(e);else this.getCardRenderer(this.held.card).setEmphasizeEffect(e)}release(){this.removeAdoptionEffect(),this.emphasize(!1),this.held=void 0,this.currentScale=1}cancelShrink(e){this.held&&this.cancelAnimation({...this.held,pivot:e}),this.currentScale=1}shrink(e){if(!this.held)return;let{scale:r,pivot:o}=e;this.scale>=1?this.setScaleShrinkAnimation({...this.held,scale:r,pivot:o}):this.updateScaleChangeAnimation({...this.held,scale:r,pivot:o}),this.currentScale=r}updateShrinkPivot(e){!this.held||this.updateScaleChangeAnimation({...this.held,scale:this.scale,pivot:e})}relieveShrink(e){let{scale:r,pivot:o}=e;!this.held||this.scale>=1||this.scale>=r||(this.updateScaleChangeAnimation({...this.held,scale:r,pivot:o}),this.currentScale=r)}setTranslucentEffect(){if(!!this.held)if(this.held.grouped)for(let e of this.held.card.iterator())this.getCardRenderer(e).setTranslucentEffectByAdoption();else this.getCardRenderer(this.held.card).setTranslucentEffectByAdoption()}unsetTranslucentEffect(){if(!!this.held)if(this.held.grouped)for(let e of this.held.card.iterator())this.getCardRenderer(e).unsetTranslucentEffect();else this.getCardRenderer(this.held.card).unsetTranslucentEffect()}cancelAnimation(e){let{card:r,grouped:o,pivot:i}=e;if(o)for(let s of r.iterator())this.getCardRenderer(s).setAdoptionCancelAnimation(i);else this.getCardRenderer(r).setAdoptionCancelAnimation(i)}removeAdoptionEffect(){if(!!this.held)if(this.held.grouped)for(let e of this.held.card.iterator())this.getCardRenderer(e).removeAdoptionEffect();else this.getCardRenderer(this.held.card).removeAdoptionEffect()}setScaleShrinkAnimation(e){let{card:r,grouped:o,scale:i,pivot:s}=e;if(o)for(let a of r.iterator())this.getCardRenderer(a).setScaleShrinkAnimationByAdoption(i,s);else this.getCardRenderer(r).setScaleShrinkAnimationByAdoption(i,s)}updateScaleChangeAnimation(e){let{card:r,grouped:o,pivot:i,scale:s}=e;if(o)for(let a of r.iterator()){let l=this.getCardRenderer(a);l.hasScaleShrinkAnimation()?l.setScaleChangeAnimation(s,i):l.hasScaleChangeAnimation()&&l.updatePivotForScaleChangeAnimation(s,i)}else{let a=this.getCardRenderer(r);a.hasScaleShrinkAnimation()?a.setScaleChangeAnimation(s,i):a.hasScaleChangeAnimation()&&a.updatePivotForScaleChangeAnimation(s,i)}}};var Wv=class{constructor(e){this.durationMs=e;this.hoverTimeout=So()}clear(){this.timerLocation=void 0,this.lastLocation=void 0,this.hoverCard=void 0,this.hoverTimeout(()=>{},0)}startTimer(e,r,o){this.timerLocation=r,this.hoverCard=e,this.lastLocation=r,this.hoverTimeout(()=>this.lastLocation&&o(this.lastLocation),this.durationMs)}hover(e){var a;let{card:r,location:o,touchSlop:i,onHoverCommitted:s}=e;if(((a=this.hoverCard)==null?void 0:a.id)===r.id){let l=nt(o.x-i,o.y-i,i*2,i*2);if(this.timerLocation&&Si(l,this.timerLocation)){this.lastLocation=o;return}}this.clear(),this.startTimer(r,o,s)}};function xm(t,e){let r;for(let{cardId:o,translation:i}of t){let s=e(o);if(!s)continue;let a=i.to,l={x:a.x-s.size.width/2,y:a.y-s.size.height/2,width:s.size.width,height:s.size.height};r?Li(r,l):r=l}return r}function wm(t){let{viewport:e,inflate:r}=t,o=new go(Li(r,e)),i=o.width/e.width,s=o.height/e.height;return i>s?(o.height=e.height*i,o.y-=(o.bottom-r.bottom)/2):(o.width=e.width*s,o.x-=(o.right-r.right)/2),o}function Tm(t,e,r){let o=e.height-t.height,i=e.width-t.width;if(!Tl(o,0)&&!Tl(i,0)){let s=r.width*(t.x-e.x)/i,a=r.height*(t.y-e.y)/o;return{x:s,y:a}}}var G1=1,XA=30,VO=class{constructor(e){this.scrollX=0;this.scrollY=0;this.zoom=1;this.mtx=new ft;this.scroller=new Uu;this.zoomCommitter=So();this.zoomCommitted=()=>{let e=this.viewportRect();for(let r of this.callback.renderingOrderIterator())ks(e,r.bounds)&&this.getCardRenderer(r).invalidateMipmap(this.zoom)};this.handleWheel=e=>{e.stopPropagation(),e.preventDefault(),this.sar.setFineRedrawCountDown(XA),this.sar.needsDisplay(),this.zoomingAnimation&&(this.zoomingAnimation=void 0),this.scroller.abortAnimation(),this.applyTransform();let r=e.ctrlKey?this.store.userPreference.trackpadPinchZoomMultiplier:this.store.userPreference.mouseWheelMultiplier,{a:o,e:i,f:s}=this.mtx.prependMatrix(gm({ev:e,zoom:this.zoom,minZoom:this.minZoom(),maxZoom:this.maxZoom(),invert:this.store.userPreference.invertMouseWheel,multiplier:r}));this.zoom=o,this.scrollX=i,this.scrollY=s,this.prevZoomPivot={x:e.x*window.devicePixelRatio,y:e.y*window.devicePixelRatio},this.zoomCommitter(this.zoomCommitted,250),this.store.reduce(cr(!1),Pr(void 0))};this.handleDoubleMove=(e,r)=>{var c;if(this.zoomingAnimation)return;this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(XA);let{a:o,e:i,f:s}=this.mtx.prependMatrix(TA({ev1:e,ev2:r,minZoom:.01,maxZoom:this.maxZoom(),zoom:this.zoom})),a=Re(e.x+(r.x-e.x)/2,e.y+(r.y-e.y)/2),l=ti(a,(c=this.prevZoomPivot)!=null?c:a);this.prevZoomPivot=a,this.zoom=o,this.setScroll({x:i,y:s,allowOver:!0,velX:l.x,velY:l.y}),this.zoomCommitter(this.zoomCommitted,250),this.store.reduce(cr(!1),Pr(void 0))};this.handleFreeMove=e=>{var r,o;this.canvas.style.cursor="move";for(let i of this.callback.bubblingOrderIterator()){let a=this.getCardRenderer(i).getObjectUnderPoint({ev:e,mtx:this.applyTransform(),focused:i.id===((o=(r=this.store.desktop)==null?void 0:r.focusingCard)==null?void 0:o.id),root:void 0,toolVisible:!0});if(a){this.canvas.style.cursor=IA(i.pinned,a);break}}};this.singleHandler=(e,r)=>{vm(r)?this.handleRightSingle(e,r):this.handleLeftSingle(e,r)};this.handleLongPress=e=>{let r=this.applyTransform();for(let s of this.callback.bubblingOrderIterator())if(this.getCardRenderer(s).predictPointerEventResponse({ev:e,mtx:r,root:void 0,toolVisible:!0})===Mo.Handle)return this.store.reduce(Uo({id:s.id,pinned:s.pinned,favorite:s.favorite,canPin:s.canPin(),canRotate:s.canRotate(),canAlign:s.canAlign(),bounds:this.boundingBoxRectToScreen(s.bounds)}),Pr(void 0),cr(!0)),!0;let o=window.devicePixelRatio,i=Re(e.x/o,e.y/o);return this.store.reduce(cr(!1),Pr(i)),!1};this.updater=new Vv;this.closed=!1;var o;this.callback=e.callback,this.store=e.store,this.cardRendererCallback=e.cardRendererCallback,this.shrinkManager=new $v,this.longHoverDetector=new Wv(500),this.canvas=e.canvas,this.roughCanvas=Dr.create(e.canvas),this.fineCanvas=Dr.create(e.canvas),this.sar=qA({fineCanvas:this.fineCanvas,roughCanvas:this.roughCanvas}),this.layeredRenderer=new GO;let r=FA(this.callback.renderingOrderIterator())||nt(0,0,this.canvas.width,this.canvas.height);this._bounds=nt(),this.setBounds(r),this.mtx=$P({bounds:r,canvas:this.canvas,margins:Hn(50)}),this.zoom=this.mtx.a,this.scrollX=this.mtx.e,this.scrollY=this.mtx.f;for(let i of this.callback.renderingOrderIterator())this.getCardRenderer(i).invalidateMipmap(this.zoom);this.canvas.addEventListener("wheel",this.handleWheel),n9(),this.remotePointerManager=e.remotePointerManager,this.pointerSubscription=(o=this.remotePointerManager)==null?void 0:o.subscribe(()=>{this.sar.setFineRedrawCountDown(1)})}getZoom(){return this.zoom}getTransform(){return this.mtx.clone()}setBounds(e){let{x:r,y:o,width:i,height:s}=e;i<this.canvas.width&&(r-=(this.canvas.width-i)/2,i=this.canvas.width),s<this.canvas.height&&(o-=(this.canvas.height-s)/2,s=this.canvas.height),this._bounds={x:r,y:o,width:i,height:s}}get bounds(){return this._bounds}getCardRenderer(e){return Dt(e,this.cardRendererCallback)}screenToNote(e,r=!1){let o=this.applyTransform().clone().invert(),i=r?1:window.devicePixelRatio;return o.cross(e.x*i,e.y*i)}maxZoom(){return fc(Xt(this.canvas,window.devicePixelRatio))/fc(Gt)}minZoom(){return fc(this.canvas)/fc(this.bounds)/2}handleLeftSingle(e,r){var i,s,a,l,c;if(this.sar.needsDisplay(),e==="down"?this.scroller.forceFinished(!0):e==="up"&&this.sar.setFineRedrawCountDown(XA),(i=this.store.desktop)==null?void 0:i.positionPopoverOpen){let d=Fc(r),u=uo(r);(e==="move"&&d>5||e==="up"&&u)&&this.store.reduce(Pr(void 0))}let o=this.applyTransform();for(let d of this.callback.bubblingOrderIterator()){let u=this.getCardRenderer(d);if(e==="down"){let p=u.onDown({ev:r,mtx:o,focused:d.id===((a=(s=this.store.desktop)==null?void 0:s.focusingCard)==null?void 0:a.id),root:void 0,toolVisible:!0});if(p){if(this.sar.setFineRedrawCountDown(1),p==="card"||p==="foldHandle"||p==="bbLeftTop"){let h=(l=u.moveCardTarget)==null?void 0:l.card;h&&(this.cardRendererCallback.onHoverCard(h.parent),this.shrinkManager.heldUp({card:h,grouped:p==="foldHandle"||d.isFolded}));for(let f of[d,...d.parentsIterator()])this.callback.bringCardTreeToFront(f,f===d&&(d.isFolded||p==="foldHandle"))}return}}else if(e==="move"){let p=u.moveCardTarget,h=u.onMove(r,o);if(h){let f;(h==="card"||h==="foldHandle"||h==="bbLeftTop")&&p&&(f=this.publishFixedUIHitIfNeeded({ev:r,card:p.card,up:!1,grouped:h==="foldHandle"||d.isFolded,originState:p.originState}),_n.remove(d.id)),this.sar.setFineRedrawCountDown(G1),this.sar.needsRoughRedraw(),Fc(r)>fy&&this.store.reduce(cr(!1));let{heldCard:g}=this.store.desktop,v=g&&this.callback.getCard(g.head);if(v){let y=this.screenToNote(r,!0),S=o.a,C;f||(C=nC({cardHolder:this.callback,card:v,desktopScale:S,forHitTest:!0,pivot:y})),uC({nextHover:C,pivot:y,desktopScale:S,shrinkManager:this.shrinkManager,longHoverDetector:this.longHoverDetector,onHoverChanged:this.cardRendererCallback.onHoverCard})}return}}else if(e==="up"){let p=u.moveCardTarget,h=(c=this.store.desktop)==null?void 0:c.hoverCardId,f=u.onUp({ev:r,mtx:o});this.sar.setFineRedrawCountDown(G1);let m=uo(r);if(f){if(p&&!m){if(f==="card"||f==="bbLeftTop"){let g=o.invert().cross(r.x,r.y);this.rebuildTreeStateIfNeeded({card:p.card,hoverCardId:h,pointer:g,grouped:p.card.isFolded}),this.insertConnectionIfNeeded({ev:r,mtx:o,card:p.card}),this.publishFixedUIHitIfNeeded({ev:r,card:p.card,up:!0,grouped:d.isFolded,originState:p.originState}),this.longHoverDetector.clear(),this.shrinkManager.release()}else if(f==="foldHandle"){let g=o.invert().cross(r.x,r.y);this.rebuildTreeStateIfNeeded({card:p.card,hoverCardId:h,pointer:g,grouped:!0}),this.publishFixedUIHitIfNeeded({ev:r,card:p.card,up:!0,grouped:!0,originState:p.originState}),this.longHoverDetector.clear(),this.shrinkManager.release()}}else f==="connectorHandle"?this.onConnectorUp({from:d,ev:r,ignoreFoldHandle:!1,isClick:m}):f==="connection"&&this.onConnectorUp({from:d,ev:r,ignoreFoldHandle:m,isClick:m});return}}}if(e==="move")uo(r)||(this.setScroll({x:this.scrollX+r.dx,y:this.scrollY+r.dy,allowOver:!0,velX:r.dx,velY:r.dy}),Fc(r)>fy&&this.store.reduce(cr(!1)),this.sar.setFineRedrawCountDown(XA));else if(e==="up"){let{minX:d,minY:u,maxX:p,maxY:h}=this.maxScroll();this.zoom<this.minZoom()&&(this.zoomingAnimation=Ls({from:this.zoom,to:this.minZoom(),durationSec:.25,easing:Fo}));let f=Gu(r,.5);this.scroller.springBackOrFling(this.scrollX,this.scrollY,f.x,f.y,d,p,u,h),uo(r)&&this.store.reduce(lo())}}handleRightSingle(e,r){if(e==="up"&&uo(r)){let o=this.applyTransform(),i=!1;for(let s of this.callback.bubblingOrderIterator())if(this.getCardRenderer(s).getObjectUnderPoint({ev:r,mtx:o,focused:!1,toolVisible:!0})==="card"){this.store.reduce(Uo({id:s.id,pinned:s.pinned,favorite:s.favorite,canPin:s.canPin(),canRotate:s.canRotate(),canAlign:s.canAlign(),bounds:this.boundingBoxRectToScreen(s.bounds)}),Pr(void 0),cr(!0)),i=!0;break}if(!i){let s=window.devicePixelRatio,a=Re(r.x/s,r.y/s);this.store.reduce(cr(!1),Pr(a))}}}maxScroll(){let e=Tp(this.bounds,this.zoom),r=Or(e),o=this.canvas.width/2-r.x,i=this.canvas.height/2-r.y,[s,a]=[e.width/2,e.height/2];return{minX:o-s,maxX:o+s,minY:i-a,maxY:i+a}}setScroll({x:e,y:r,velX:o,velY:i,allowOver:s}){let{minX:a,minY:l,maxX:c,maxY:d}=this.maxScroll();e>c&&o>0?s?this.scrollX+=(e-this.scrollX)*.1:this.scrollX=c:e<a&&o<0?s?this.scrollX+=(e-this.scrollX)*.1:this.scrollX=a:this.scrollX=e,d<r&&i>0?s?this.scrollY+=(r-this.scrollY)*.1:this.scrollY=d:r<l&&i<0?s?this.scrollY+=(r-this.scrollY)*.1:this.scrollY=l:this.scrollY=r}boundingBoxRectToScreen(e){let r=window.devicePixelRatio,o=this.applyTransform().scale(1/r,1/r),i=em(o.a)/r,s=Mg(e,Hn(i));return o.applied(s)}publishFixedUIHitIfNeeded(e){if(this.store.editor)return;let{up:r,grouped:o,ev:i,card:s,originState:a}=e,l=o9(i);if(r){let c=[];if(l)if(l==="desktopTrashBox"){let d=Wl(s,o);confirm(d)?o?We(yu(s.id)):We(Ma(s.id)):pC({card:s,grouped:o,originState:a})}else if(l==="submitButton")if(this.store.submitting){let d=De.get().strings;c.push(Pe(oe.submitDocument,{title:d.submittingDocument,message:d.couldntSubmitWhileSubmittingOthers,okMessage:d.back,onOk:()=>{pC({card:s,grouped:o,originState:a}),this.store.reduce(Pe(oe.submitDocument,void 0))}}))}else c.push(iv({card:s,grouped:o,originState:a}));else l==="shareButton"?c.push(r0({card:s,grouped:o,originState:a})):l==="materialBox"&&c.push(Df({card:s,grouped:o,originState:a}));this.store.reduce(...c,nv(void 0))}else l!==this.store.fixedUIHit&&this.store.reduce(nv(l));return l}onNextStore(e){var r,o;if(this.store.screen!==e.screen?this.sar.setFineRedrawCountDown(G1):((r=this.store.desktop)==null?void 0:r.focusingCard)!==((o=e.desktop)==null?void 0:o.focusingCard)&&(this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(G1)),e.highlightedCardId&&this.store.highlightedCardId!==e.highlightedCardId){let i=this.callback.getCard(e.highlightedCardId);i.isFolded&&(i=i.head()),this.getCardRenderer(i).setHighlightAnimation()}this.store=e}onConnectorUp(e){var p;let{from:r,ev:o,ignoreFoldHandle:i,isClick:s}=e,{parent:a}=r,l=[...this.callback.renderingOrderIterator()].filter(h=>{let f=h.parent;return a&&f?a.id===f.id:a===f}),c=this.mtx.invert().cross(o.x,o.y),d=(p=this.store.desktop)==null?void 0:p.focusingCard,u=this.mtx;for(let h=l.length-1;h>=0;h--){let f=l[h];if(this.getCardRenderer(f).onConnectorUp({pt:c,from:r,root:void 0,ignoreFoldHandle:i,focused:(d==null?void 0:d.id)===f.id,mtx:u,isClick:s}))break}We(XP(r.id))}insertConnectionIfNeeded({ev:e,mtx:r,card:o}){var s;let i=o.parent?o.parent.children:this.callback.rootChildrenIterator();for(let a of i){if(a===o)continue;if(this.getCardRenderer(a).getObjectUnderPoint({ev:e,mtx:r,focused:!1,toolVisible:!0})==="connection"){let d=a.isFolded?a.tail():a,u=(s=d.next)!=null?s:d.nextGroup;if($e(u!=null),o.canBeConnectedFrom(d)&&u.canBeConnectedFrom(o)){We(QP(d,o,u));break}}}}rebuildTreeStateIfNeeded(e){var a;let{card:r,hoverCardId:o,pointer:i,grouped:s=!1}=e;if(o!==((a=r.parent)==null?void 0:a.id)){let l=this.shrinkManager.scale;We(vw({cardId:r.id,parentId:o!=null?o:null,grouped:s,resize:{scale:l,pivot:i}}))}}applyTransform(){return this.mtx.set(this.zoom,0,0,this.zoom,this.scrollX,this.scrollY)}schedule(){this.scheduleRender()}scheduleRender(){let e=this.canvas.getContext("2d");if(!e)throw new fo;let r=()=>{if(this.closed)return;this.updater.update();let{editor:o,submissionAnswer:i}=this.store;o||i||(this.update(this.updater.deltaTime),e.save(),this.render(e),e.restore(),this.store.logEnabled&&(e.save(),e.clearRect(20,this.canvas.height-40,40,20),e.fillStyle="red",e.font="20px Arial",e.textAlign="start",e.fillText(`${this.updater.fps}`,20,this.canvas.height-20),e.restore())),requestAnimationFrame(r)};requestAnimationFrame(r)}update(e){let r;if(this.scroller.computeScrollOffset()&&(this.sar.needsDisplay(),this.setScroll({x:this.scroller.currX,y:this.scroller.currY,velX:0,velY:0,allowOver:!1})),this.zoomingAnimation){this.sar.needsDisplay();let i=this.zoomingAnimation.update(e),s=this.prevZoomPivot?this.prevZoomPivot.x:0,a=this.prevZoomPivot?this.prevZoomPivot.y:0,l=(this.scrollX-s)*(i/this.zoom)+s,c=(this.scrollY-a)*(i/this.zoom)+a;this.scrollX=l,this.scrollY=c,this.zoom=i,this.zoomingAnimation.finished&&(this.zoomingAnimation=void 0)}let o=!1;for(let i of this.callback.renderingOrderIterator())if(this.getCardRenderer(i).update()&&(o=!0),r)Li(r,i.bounds);else{let{x:a,y:l,width:c,height:d}=i.bounds;r={x:a,y:l,width:c,height:d}}this.setBounds(r||nt()),o&&(this.sar.setFineRedrawCountDown(G1),this.sar.needsRoughRedraw())}adjustViewport(e){if(!e.transitions||e.transitions.length===0)return;let r=xm(e.transitions,d=>this.callback.getCard(d));if(!r)return;let o=new go(this.viewportRect()),i=wm({viewport:o,inflate:new go(r)}),s=Tm(o,i,this.canvas);if(!s)return;let a=100,l=Math.max(o.height/(i.height+a),o.width/(i.width+a)),c=Math.max(l*this.zoom,this.minZoom());this.prevZoomPivot=s,this.zoomingAnimation=Ls({from:this.zoom,to:c,durationSec:.3});for(let d of this.callback.renderingOrderIterator())d.parent||this.getCardRenderer(d).invalidateMipmap(this.zoom)}viewportRect(){let e=this.mtx.invert(),{x:r,y:o}=e.cross(0,0),{x:i,y:s}=e.cross(this.canvas.width,this.canvas.height);return nt(r,o,i-r,s-o)}render(e){e.save();let r=this.applyTransform();this.sar.render({ctx:e,mtx:r,roughScaleTransform:new ft(2,0,0,2,-this.canvas.width/2,-this.canvas.height/2),delegate:({ctx:o,mtx:i,rough:s})=>{this.renderInternal({ctx:o,mtx:i,rough:s})}}),e.restore()}renderInternal({ctx:e,mtx:r,rough:o}){var c,d,u,p,h;let i=[];((c=this.store.desktop)==null?void 0:c.heldCard)&&i.push(...this.store.desktop.heldCard.all);let s=[];((d=this.store.desktop)==null?void 0:d.hoverCardId)&&s.push(this.store.desktop.hoverCardId);let a=ch({canvas:e.canvas,viewport:js(),userId:this.store.userInfo.user_id,focusingCardId:(p=(u=this.store.desktop)==null?void 0:u.focusingCard)==null?void 0:p.id,assetUplaodStates:this.store.assetUploadStates,assetThumbUploadStates:this.store.assetThumbnailUploadStates,hoverCardIds:s,heldCardIds:i,visibleRect:o?void 0:this.viewportRect(),toolVisible:!0,dpr:devicePixelRatio,remotePointers:(h=this.remotePointerManager)==null?void 0:h.getPointers()}),l=K0({cards:this.callback.rootChildrenIterator(),callback:this.cardRendererCallback,state:a,mtx:r});this.layeredRenderer.paint({mtx:r,state:a,node:l}),e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.layeredRenderer.composite(e),e.restore()}close(){var e;this.canvas.removeEventListener("wheel",this.handleWheel),(e=this.pointerSubscription)==null||e.close(),this.closed=!0,ge.log("close")}};function pC(t){let{card:e,grouped:r}=t,{position:o,parentId:i}=t.originState,[s,a]=[o.x,o.y],[l,c]=[o.x-e.position.x,o.y-e.position.y];r?We(c0({topOfGroup:e.head().id,topX:s,topY:a,deltaX:l,deltaY:c})):We(av({cardId:e.id,x:s,y:a})),i&&We(vw({cardId:e.id,parentId:i,grouped:r}))}var yJ=X(on());function QA(t){let e=wt.courses(),r=De.get().strings;t.reduce(ui(e,"fetching")),bo(t,{fetchingId:wt.courses(),promise:ue.lnsClient.getCourses(t.userInfo.is_teacher),doneReducer:o=>()=>({courses:{byId:{$merge:nn(o.map(i=>[i.course_id,i]))},joinedCourseIds:{$set:o.map(i=>i.course_id)}}}),errorReducer:$l({store:t,id:oe.fetchCourse,title:r.couldntGetCourses})})}function CJ(t){let e=wt.closedYears(),r=ue.lnsClient.getClosedYears({school:t.userInfo.is_teacher,user:!0}),o=De.get().strings;bo(t,{fetchingId:e,promise:r,doneReducer:i=>()=>{let{user:s,school:a}=i;return s==null||s.sort((l,c)=>c-l),a==null||a.sort((l,c)=>c-l),{closedYears:{$set:{user:s,school:a}}}},errorReducer:$l({store:t,id:oe.fetchClosedYears,title:o.couldntGetPreviousYearsCourses})})}function SJ(t,e){let r=wt.closedCoursesByYear(e),o;t.userInfo.is_teacher?o=ue.lnsClient.getClosedCourses({year:e,target:{school:!0,user:!0}}):o=ue.lnsClient.getClosedCourses({year:e,target:{school:!1,user:!0}});let i=De.get().strings;bo(t,{fetchingId:r,promise:o,doneReducer:s=>{let a=Array(),l=Array(),c=Array(),d=Array(),u=t.userInfo.is_teacher?s.school.concat(s.user):s.user,p=s.user.map(f=>f.course.id),h=t.userInfo.is_teacher?s.school.map(f=>f.course.id):[];return u.forEach(f=>{d.push(f.course.id),c.push([f.course.id,{course_id:f.course.id,subject_id:f.subject.id,user_group_id:f.user_group.id,subject_name:f.course.name,user_group_name:f.user_group.name}]),a.push([f.user_group.id,{id:f.user_group.id,name:f.user_group.name}]),l.push([f.subject.id,{id:f.subject.id,name:f.course.name}])}),()=>({courses:{byId:{$merge:nn(c)},byYear:{[e]:{$set:{user:p,school:h}}}},subjects:{byId:{$merge:nn(l)}},userGroups:{byId:{$merge:nn(a)}}})},errorReducer:$l({store:t,id:oe.fetchCourse,title:i.couldntGetCourses})})}function xJ(t){let e=De.get().strings;bo(t,{fetchingId:wt.otherTeacherCourses(),promise:ue.lnsClient.getAllCourses(),doneReducer:r=>o=>{let i=r.filter(s=>!o.courses.joinedCourseIds.includes(s.course_id)).map(s=>s.course_id);return{courses:{byId:{$merge:nn(r.map(s=>[s.course_id,s]))},otherTeacherCourseIds:{$set:i}}}},errorReducer:$l({store:t,id:oe.fetchOtherTeacherCourses,title:e.couldntGetOtherTeachersCourses})})}function wJ(t,e){let r=De.get().strings,o=oe.deleteCourse,i=()=>{t.reduce(a=>{let l=a.courses.joinedCourseIds.indexOf(e.course_id);return{courses:{byId:{$unset:[e.course_id]},joinedCourseIds:{$splice:[[l,l>-1?1:0]]}}}},Fe(o,null))},s=()=>{t.reduce(Fe(o,null)),s1e(t,e.course_id)};t.reduce(Fe(o,(0,yJ.sprintf)(r.willDeleteGroupFromSubject,e.user_group_name,e.subject_name))),ue.lnsClient.deleteCourse(e.course_id).then(i).catch(yt.handleError).catch(a=>{let{message:l,unknownError:c}=Ht(a,{403:r.courseAccessDenied,404:r.courseDoesntExist});if(a instanceof Yr&&a.status===400){let d=JSON.parse(a.message);if(d){if(d.error.code===0){s();return}else if(d.error.code===1)l=r.couldntDeleteAsMaterialsExist;else if(d.error.code===2)l=r.couldntDeleteAsNotesExist;else if(d.error.code===3){i();return}}}ge.error(a),t.reduce(Fe(o,null),Pe(o,{title:r.couldntDeleteCourse,message:l,unknownError:c,okMessage:r.back,onOk:()=>t.reduce(Pe(o,void 0))}))})}function jl(t,e){let r=De.get().strings;t.reduce(ui(wt.courseAttributes(e),"fetching"),ui(wt.courseTemporaryTeachers(e),"fetching")),Promise.all([ue.lnsClient.getCourse(e),ue.lnsClient.getCourseTemporaryTeachers(e)]).then(o=>{let[i,s]=o;t.reduce(DP(e,i),$9(e,s),ui(wt.courseAttributes(e),"done"),ui(wt.courseTemporaryTeachers(e),"done"))}).catch(yt.handleError).catch(o=>{t.reduce(ui(wt.courseAttributes(e),o),ui(wt.courseTemporaryTeachers(e),o),$l({store:t,id:oe.fetchCourseAttributes,title:r.couldntGetCoursesAttributes,okMessage:r.okay})(o))})}function TJ(t,e){if(t.reduce(()=>({pageVisible:{$set:e}})),!e)ue.lnsClient.notifyEnterBackground().catch(ge.error);else{let r=Cf(t);r?ue.lnsClient.attendCourse(r).catch(ge.error):ue.lnsClient.leaveCourse().catch(ge.error)}}function i1e(t){let{store:e,courseId:r,onOk:o,onCancel:i}=t,s=De.get().strings;ue.lnsClient.getCourses(!0).then(a=>{let l=a.find(u=>u.course_id===r),c=[s.couldntDeleteAsOtherInCharge],d=a.filter(u=>u.subject_id===l.subject_id&&u.course_id!==r);if(d.length>0){let u=[s.relatedSubjectsMsg,...d.map(p=>`\u3000\u3000\u2022${p.user_group_name} ${p.subject_name}`)];c.push("","",...u)}e.reduce(Pe(oe.leaveSubject,{title:l.subject_name,message:c,okMessage:s.stopBeginInCharge,cancelMessage:s.cancel,onOk:()=>o(l),onCancel:i}))}).catch(a=>{e.reduce($l({store:e,id:oe.leaveSubject,title:s.couldntGetCourses})(a))})}function s1e(t,e){let r=De.get().strings;i1e({store:t,courseId:e,onOk:s=>{t.reduce(Pe(oe.leaveSubject,void 0),Fe(oe.leaveSubject,null)),ue.lnsClient.leaveSubject(s.subject_id).then(()=>{t.reduce(a=>{let l=a.courses.joinedCourseIds.indexOf(e);return{courses:{joinedCourseIds:{$splice:[[l,l>-1?1:0]]}}}})}).catch(a=>{t.reduce($l({store:t,id:oe.leaveSubject,title:r.errorOccurred})(a))})},onCancel:()=>{t.reduce(Pe(oe.leaveSubject,void 0),Fe(oe.leaveSubject,null))}})}var V1=X(on());var DJ=X(on()),JA=/^[\s\t]*$/;function bs(t,e){let r=window.prompt(t,e.defaultValue);if(r===null)return null;let o=a1e(r,e);return o!==null?(window.alert(o),null):r}function a1e(t,e){let r=De.get().strings;return t.match(JA)?r.inputCannotContainSpacesWarning:t.length>(e==null?void 0:e.maxLength)?(0,DJ.sprintf)(r.inputTooLongWarning,e.maxLength):null}var l1e=PJ(),c1e=Dm();function EJ(t,e){let r=new RegExp(`^${t}([A-Z])$`),o=As.today(),i=e.filter(a=>a.expiry&&c1e(a.expiry).isAfter(o)).map(a=>a.message.match(r)).filter(a=>a!==null).map(a=>a[1]).sort((a,l)=>a.localeCompare(l)),s=t+"A";if(i.length>0){let a="A".charCodeAt(0);for(let l=0;l<26;l++){let c=String.fromCharCode(a+l);if(!i.includes(c)){s=`${t}${c}`;break}}}return s}function jO(t,e){if(t.length===0)return{begin:0,end:0};let r=ht(e,0,t.length-1),i=new l1e().segment(t);if(i.length<1)return{begin:0,end:0};let s=[],a="";for(let u=0;u<i.length;u++){let p=i[u];JA.exec(p)?a+=p:(a.length>0&&(s.push(a),a=""),s.push(p))}a.length>0&&s.push(a);let l=e,c=l+1,d=0;for(let u=0;u<s.length;u++){let p=s[u];if(r===d&&u>0&&JA.exec(p)){let h=s[u-1];l=d-h.length,c=d;break}else if(d<=r&&r<d+p.length){l=d,c=d+p.length;break}d+=p.length}return{begin:l,end:c}}var _J=t=>Array.from(t).map(e=>e.replace(/[０-９]/g,String.fromCharCode(e.charCodeAt(0)-65248))).join("");async function AJ(t,{courseId:e,submissionNumber:r,withTeacher:o}){var l;let i=!0,s=[],a;for(;i;){let c=await t.getSubmissionAnswersV2({courseId:e,submissionNumber:r,withTeacher:o,afterAuthorId:a});s.push(...c.documents),i=c.has_more,a=(l=c.documents[c.documents.length-1])==null?void 0:l.author_id}return s}function eI(t){var a,l;let e=(a=t.desktop)==null?void 0:a.courseId;if(typeof e!="number")return;let r=Date.now(),i=((l=t.submissions.byCourseId[e])!=null?l:[]).map(c=>t.submissions.byKey[c]),s=Object.values(i).filter(c=>c.expiry?new Date(c.expiry).getTime()>r:!1);if(s.length===0)t.reduce(()=>({submissions:{byActiveInCourse:{[e]:{$set:void 0}}}}));else{s.sort((d,u)=>d.expiry.localeCompare(u.expiry));let c=s.map(d=>ao(e,d.submission_number));t.reduce(()=>({submissions:{byActiveInCourse:{[e]:{$set:c}}}}))}}var KO=class extends Error{constructor(e,r){super(r);this.threshold=e}};async function hC({store:t,courseId:e,beforeSubmissionID:r,enableFetchError:o}){let i=30;return bo(t,{fetchingId:wt.submissions(e),promise:ue.lnsClient.getSubmissions(e,i,r),doneReducer:s=>{if(o&&s.error&&s.error.error_code===1){let a=s.error;throw new KO(a.threshold,a.message)}return sV(e,s,i)},errorReducer:s=>{let a=oe.fetchSubmission,l=De.get().strings;if(s instanceof KO){let c={title:(0,V1.sprintf)(l.tasksFeatureIsUnavailable,s.threshold),color:"error",okMessage:l.back,onOk:()=>t.reduce(Pe(a,void 0))};return()=>({alerts:{[a]:{$set:c}},submissionsOldest:{byCourseId:{[e]:{$set:!0}}}})}return km({store:t,upid:a,e:s,errTitle:l.couldntGetSubmissions})}})}function IJ({store:t,courseId:e,submissionNumber:r}){return bo(t,{fetchingId:wt.submissions(e),promise:ue.lnsClient.getSubmissionInfo(e,r),doneReducer:o=>aw(e,r,o),errorReducer:o=>{let i=oe.fetchSubmission,s=De.get().strings;return o instanceof Yr&&o.status===404&&t.reduce(lw(e,r)),km({store:t,upid:i,e:o,errTitle:s.couldntGetSubmissions})}})}async function fC(t,{courseId:e,submissionNumber:r,opts:o}){let i=De.get().strings,s=oe.updateSubmission;return t.reduce(Fe(s,i.updatingSubmission)),await ue.lnsClient.updateSubmission(e,r,o).then(()=>{let a={};return o.submission_message!==void 0&&(a.message=o.submission_message),o.expiry!==void 0&&(a.expiry=o.expiry),o.hide_author!==void 0&&(a.hide_author=o.hide_author),o.reveal_answer!==void 0&&(a.reveal_answer=o.reveal_answer),t.reduce(RP(e,r,a),Fe(s,null)),!0}).catch(yt.handleError).catch(a=>{ge.error(a);let l=km({store:t,upid:s,e:a,errTitle:i.couldntUpdateSubmission});t.reduce(Fe(s,null),l)}),!1}async function mC(t,{courseId:e,submissionNumber:r,withTeacher:o}){let i=async()=>ue.lnsClient.getSubmissionInfo(e,r),s=()=>AJ(ue.lnsClient,{courseId:e,submissionNumber:r,withTeacher:o});return bo(t,{fetchingId:wt.submissionAnswers(e,r),promise:Promise.all([i(),s()]),doneReducer:a=>aV(e,r,a[0],a[1]),errorReducer:a=>{let l=De.get().strings;return km({store:t,upid:oe.fetchSubmissionAnswers,e:a,errTitle:l.couldNotGetSubmissionAnswers})}})}async function RJ(t,e){var c;let r=De.get().strings,o=oe.createSubmission;t.reduce(Fe(o,r.creatingTask));let i=new As().afterHours(1).toISOString(),s=(c=t.submissions.byCourseId[e])!=null?c:[],a=r.taskNameDefaultPrefix,l=EJ(a,s.map(d=>t.submissions.byKey[d]));await ue.lnsClient.createSubmission(e,{expiry:i,submission_message:l}).then(d=>{t.reduce(Lp(d.submission_number,l),Fe(o,null),aw(e,d.submission_number,{message:l,submission_number:d.submission_number,timestamp:new Date().toISOString(),hide_author:!1,reveal_answer:Bi.No,submitted:!1,submit_date:null,expiry:i}))}).catch(yt.handleError).catch(d=>{ge.error(d);let u=km({store:t,upid:o,e:d,errTitle:r.couldntCreateTask});t.reduce(Fe(o,null),u)})}async function FJ(t,e,r){let o=De.get().strings,i=oe.deleteSubmission,s=ao(e,r),a=t.submissions.byKey[s];t.reduce(Fe(i,(0,V1.sprintf)(o.deletingTask,a.message))),await ue.lnsClient.deleteSubmission(e,r).then(()=>{t.reduce(lw(e,r),iw(r),Fe(i,null))}).catch(yt.handleError).catch(l=>{ge.error(l);let c=De.get().strings,d=km({store:t,upid:i,e:l,errTitle:c.couldntDeleteTask});t.reduce(iw(r),Fe(i,null),d)})}async function MJ(t,e){$e(t.submittingDocument!=null,"submittingDocument must be set");let{card:r}=t.submittingDocument;t.reduce(iv(void 0),BP(!0));let o=xn(or(t)),i,s=De.get().strings,a=oe.submitDocument;try{await Sm(t,r);let l={id:t.userInfo.user_id,name:Ut(t.userInfo)};i=await aJ({card:r,courseId:o,submission_number:e,user:l})}catch(l){if(t.reduce(BP(!1)),yt.catchError(l))return;t.reduce(Pe(a,{title:s.couldntSubmitCards,...Ht(l),okMessage:s.okay,onOk(){t.reduce(Pe(a,void 0))}}));return}return ue.lnsClient.submitDocumentV2(i).then(()=>{t.reduce(Pn({type:"normal",text:s.didSubmitCards}),tV(o,e))}).catch(yt.handleError).catch(l=>{ge.error(l);let c=km({store:t,upid:a,e:l,errTitle:s.couldntSubmitCards});t.reduce(c)}).finally(()=>{t.reduce(BP(!1))})}async function NJ({documentId:t,pageCount:e,onFallback:r,fallback:o}){var s;let i=[];for(let a=0;a<e;a++)if(((s=To.forDocument("drawn",t,a).getLayerLoadState().get())==null?void 0:s.value)!=null){let d=await o(a,"document");i.push({document:d,annotation:null})}else i.push(null);return ue.lnsClient.replyToDocument({documentId:t,pageCount:e,thumbs:i}).then(async a=>{if(a!=="ok"){r();let l=Array.from({length:e}).map(()=>({document:null,annotation:null}));for(let c of a.document_thumbnail)l[c].document=await o(c,"document");for(let c of a.annotation_layer_thumbnail)l[c].annotation=await o(c,"annotation");await ue.lnsClient.replyToDocument({documentId:t,pageCount:e,thumbs:l})}})}async function BJ(t,{documentId:e,pageCount:r,fallback:o}){let i=De.get().strings,s=oe.replyToDocument,a=c=>{ge.error(c),t.reduce(Fe(s,null),Pe(s,{title:i.couldntSendBackDocument,...Ht(c),okMessage:i.back,onOk:()=>t.reduce(Pe(s,void 0))}))},l=()=>{t.reduce(Fe(s,null),qy(e,{done:!0,annotation_layer_updated:!1}),Pn({type:"normal",text:i.didSendBackDocument}))};t.reduce(Fe(s,i.sendingBackDocument)),await NJ({documentId:e,pageCount:r,onFallback:()=>{t.reduce(Fe(s,i.sendingThumbnails))},fallback:o}).then(l).catch(yt.handleError).catch(a)}async function LJ(t,{list:e}){let r=De.get().strings,o=oe.replyToDocument;t.reduce(Fe(o,`${r.sendingBackDocument}(0/${e.length})`));let i=[],s=0,a=(u,p)=>(s++,t.reduce(Fe(o,`(${s}/${e.length}) ${r.sendingBackDocument}`)),[u,p]);for(let{documentId:u,pageCount:p,fallback:h}of e)i.push(NJ({documentId:u,pageCount:p,fallback:h,onFallback:()=>{t.reduce(Fe(o,`(${s}/${e.length}) ${r.sendingThumbnails}`))}}).then(()=>a(u)).catch(f=>a(u,f)));let l=await Promise.all(i),c=l.filter(u=>u[1]==null).map(u=>qy(u[0],{annotation_layer_updated:!1,done:!0})),d=l.filter(u=>u[1]!=null);if(d.length>0){let u=De.get().pluralSafeSuffix(e.length),p=(0,V1.sprintf)(r.sendBackIncomplete,e.length,d.length,u);t.reduce(...c,Fe(o,null),Pe(o,{title:r.sendBackErrorOccurred,message:p,okMessage:r.back,onOk:()=>t.reduce(Pe(o,void 0))}))}else t.reduce(...c,Fe(o,null),Pn({type:"normal",text:r.didCompleteSendBack}))}async function OJ(t,e){await ue.lnsClient.getSubmissionMessage(e).then(r=>{t.reduce(()=>({submissionMessages:{byCourseId:{$set:nn(r.map(o=>[o.course_id,o]))}}}))}).catch(yt.handleError).catch(r=>{let o=De.get().strings,i=km({store:t,upid:oe.fetchSubmissionMessages,e:r,errTitle:o.couldntGetSubmissionMessage});t.reduce(i)})}function gC(t){t.reduce(jy(!1),fu(!t.desktop))}function km({store:t,upid:e,e:r,errTitle:o}){let i=De.get().strings,s=o,{message:a,unknownError:l}=Ht(r,{[400]:i.requestContainsInvalidID,[403]:i.accessDenied,[404]:i.subjectOrTaskDoesntExist}),c=a;if(r instanceof Yr&&r.status===403){try{let d=JSON.parse(r.message);d.error_code===1&&(s=(0,V1.sprintf)(i.tasksFeatureIsUnavailable,d.threshold),c=void 0)}catch(d){}try{JSON.parse(r.message).error_code===8&&(c=i.actionCannotBeCarriedOutOnClosedCourse)}catch(d){}}return Pe(e,{title:s,message:c,unknownError:l,okMessage:i.back,onOk:()=>t.reduce(Pe(e,void 0))})}function Pm(t,e,r){if(t.fetchStates[wt.mobilePushes()]!=="fetching")return bo(t,{fetchingId:wt.mobilePushes(),promise:ue.lnsClient.getUnreadMobilePushes(e),doneReducer:o=>{let i=[],s=[];for(let a of o)(a.type==="submit"||a.type==="share"||a.type==="distribute"||a.type==="comment_on_submission_answer"||a.type==="reveal_submission_answers")&&!(r==null?void 0:r.includes(a.type))?i.push(a):s.push(a.id);return s.length>0&&Em(s),d1e({entities:i,courseId:e})}})}function zJ({store:t,courseId:e}){var i;let r=["share","distribute","comment_on_submission_answer"],o=(i=t.mobilePushes.byCourseId[e])==null?void 0:i.filter(s=>{let a=t.mobilePushes.byId[s];return!!a&&r.includes(a.data.type)});if(!(!o||o.length<1))return Em(o,()=>{t.reduce(qO(e,o))})}function jv({store:t,courseId:e,submissionNumber:r,authors:o}){var a;if(r===void 0&&o)return;let i=(a=t.mobilePushes.byCourseId[e])==null?void 0:a.filter(l=>{var d,u;let c=t.mobilePushes.byId[l];return(c==null?void 0:c.type)==="submit"&&(r===void 0||((d=c==null?void 0:c.data)==null?void 0:d.submission_number)===r)&&(o===void 0||o.includes((u=c==null?void 0:c.data)==null?void 0:u.author_id))});if(!i||i.length<1)return;let s=De.get().strings;return Em(i,()=>{let l=[qO(e,i)];r===void 0&&l.push(Pn({type:"normal",text:s.markedAllSubmitsAsRead})),t.reduce(...l)})}function tI({store:t,courseId:e,submissionNumber:r}){var s;let o=(s=t.mobilePushes.byCourseId[e])==null?void 0:s.filter(a=>{var c;let l=t.mobilePushes.byId[a];return(l==null?void 0:l.type)==="reveal_submission_answers"&&(r===void 0||((c=l==null?void 0:l.data)==null?void 0:c.submission_number)===r)});if(!o||o.length<1)return;let i=De.get().strings;return Em(o,()=>{let a=[qO(e,o)];r===void 0&&a.push(Pn({type:"normal",text:i.markedAllRevealAnswersAsRead})),t.reduce(...a)})}function Em(t,e){return ue.lnsClient.readMobilePushes(t).then(e).catch(yt.handleError)}function d1e(t){let{courseId:e,entities:r}=t;if(e)return()=>{let o=r.filter(i=>i.data.course_id===e);if(!(o.length<1))return{mobilePushes:{byId:{$merge:nn(o.map(i=>[i.id,i]))},byCourseId:{[e]:{$set:o.map(i=>i.id)}}}}};{let o=Array.from(new Set(r.map(s=>s.data.course_id))),i=Object.create({});for(let s of o)i[s]=r.filter(a=>a.data.course_id===s).map(a=>a.id);return()=>({mobilePushes:{byId:{$set:nn(r.map(s=>[s.id,s]))},byCourseId:{$set:i}}})}}function qO(t,e){return r=>{let o=r.mobilePushes.byCourseId[t];if(!o)return;let i=o.filter(s=>!e.includes(s));return{mobilePushes:{byId:{$unset:e},byCourseId:i.length===0?{$unset:[t]}:{[t]:{$set:i}}}}}}function rI(t){return e=>{var i;let r=t.data.course_id,o=[...(i=e.mobilePushes.byCourseId[r])!=null?i:[]];return o.push(t.id),o=[...new Set(o)],{mobilePushes:{byId:{$merge:{[t.id]:t}},byCourseId:{$merge:{[r]:o}}}}}}function UJ(t){return e=>{let r=e.mobilePushMessages;return r.push(t),{mobilePushMessages:{$set:r}}}}function HJ(){return()=>({mobilePushMessages:{$set:[]}})}var YO=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,o))}}};function GJ(){return typeof indexedDB=="object"}function VJ(){return new Promise((t,e)=>{try{let r=!0,o="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(o);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(o),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}function $J(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}var u1e="FirebaseError",Kv=class extends Error{constructor(e,r,o){super(r);this.code=e,this.customData=o,this.name=u1e,Object.setPrototypeOf(this,Kv.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_m.prototype.create)}},_m=class{constructor(e,r,o){this.service=e,this.serviceName=r,this.errors=o}create(e,...r){let o=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?p1e(s,o):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Kv(i,l,o)}};function p1e(t,e){return t.replace(h1e,(r,o)=>{let i=e[o];return i!=null?String(i):`<${o}?>`})}var h1e=/\{\$([^}]+)}/g;function nI(t,e){if(t===e)return!0;let r=Object.keys(t),o=Object.keys(e);for(let i of r){if(!o.includes(i))return!1;let s=t[i],a=e[i];if(WJ(s)&&WJ(a)){if(!nI(s,a))return!1}else if(s!==a)return!1}for(let i of o)if(!r.includes(i))return!1;return!0}function WJ(t){return t!==null&&typeof t=="object"}var NQe=4*60*60*1e3;function oI(t){return t&&t._delegate?t._delegate:t}var Nd=class{constructor(e,r,o){this.name=e,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qv="[DEFAULT]";var jJ=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){let o=new YO;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:r});i&&o.resolve(i)}catch(i){}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;let o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m1e(e))try{this.getOrInitializeService({instanceIdentifier:qv})}catch(r){}for(let[r,o]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(r);try{let s=this.getOrInitializeService({instanceIdentifier:i});o.resolve(s)}catch(s){}}}}clearInstance(e=qv){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qv){return this.instances.has(e)}getOptions(e=qv){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:r={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:o,options:r});for(let[s,a]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(s);o===l&&a.resolve(i)}return i}onInit(e,r){var o;let i=this.normalizeInstanceIdentifier(r),s=(o=this.onInitCallbacks.get(i))!==null&&o!==void 0?o:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){let o=this.onInitCallbacks.get(r);if(!!o)for(let i of o)try{i(e,r)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:f1e(e),options:r}),this.instances.set(e,o),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch(i){}return o||null}normalizeInstanceIdentifier(e=qv){return this.component?this.component.multipleInstances?e:qv:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function f1e(t){return t===qv?void 0:t}function m1e(t){return t.instantiationMode==="EAGER"}var XO=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let r=new jJ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}};var g1e=[],Xo;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xo||(Xo={}));var v1e={debug:Xo.DEBUG,verbose:Xo.VERBOSE,info:Xo.INFO,warn:Xo.WARN,error:Xo.ERROR,silent:Xo.SILENT},b1e=Xo.INFO,y1e={[Xo.DEBUG]:"log",[Xo.VERBOSE]:"log",[Xo.INFO]:"info",[Xo.WARN]:"warn",[Xo.ERROR]:"error"},C1e=(t,e,...r)=>{if(e<t.logLevel)return;let o=new Date().toISOString(),i=y1e[e];if(i)console[i](`[${o}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},QO=class{constructor(e){this.name=e,this._logLevel=b1e,this._logHandler=C1e,this._userLogHandler=null,g1e.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xo))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v1e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xo.DEBUG,...e),this._logHandler(this,Xo.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xo.VERBOSE,...e),this._logHandler(this,Xo.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xo.INFO,...e),this._logHandler(this,Xo.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xo.WARN,...e),this._logHandler(this,Xo.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xo.ERROR,...e),this._logHandler(this,Xo.ERROR,...e)}};var KJ=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(S1e(r)){let o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}};function S1e(t){let e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}var JO="@firebase/app",qJ="0.7.9";var ZO=new QO("@firebase/app"),x1e="@firebase/app-compat",w1e="@firebase/analytics-compat",T1e="@firebase/analytics",D1e="@firebase/app-check-compat",k1e="@firebase/app-check",P1e="@firebase/auth",E1e="@firebase/auth-compat",_1e="@firebase/database",A1e="@firebase/database-compat",I1e="@firebase/functions",R1e="@firebase/functions-compat",F1e="@firebase/installations",M1e="@firebase/installations-compat",N1e="@firebase/messaging",B1e="@firebase/messaging-compat",L1e="@firebase/performance",O1e="@firebase/performance-compat",z1e="@firebase/remote-config",U1e="@firebase/remote-config-compat",H1e="@firebase/storage",G1e="@firebase/storage-compat",V1e="@firebase/firestore",$1e="@firebase/firestore-compat",W1e="firebase";var YJ="[DEFAULT]",j1e={[JO]:"fire-core",[x1e]:"fire-core-compat",[T1e]:"fire-analytics",[w1e]:"fire-analytics-compat",[k1e]:"fire-app-check",[D1e]:"fire-app-check-compat",[P1e]:"fire-auth",[E1e]:"fire-auth-compat",[_1e]:"fire-rtdb",[A1e]:"fire-rtdb-compat",[I1e]:"fire-fn",[R1e]:"fire-fn-compat",[F1e]:"fire-iid",[M1e]:"fire-iid-compat",[N1e]:"fire-fcm",[B1e]:"fire-fcm-compat",[L1e]:"fire-perf",[O1e]:"fire-perf-compat",[z1e]:"fire-rc",[U1e]:"fire-rc-compat",[H1e]:"fire-gcs",[G1e]:"fire-gcs-compat",[V1e]:"fire-fst",[$1e]:"fire-fst-compat","fire-js":"fire-js",[W1e]:"fire-js-all"};var $1=new Map,e4=new Map;function K1e(t,e){try{t.container.addComponent(e)}catch(r){ZO.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Am(t){let e=t.name;if(e4.has(e))return ZO.debug(`There were multiple attempts to register component ${e}.`),!1;e4.set(e,t);for(let r of $1.values())K1e(r,t);return!0}function W1(t,e){return t.container.getProvider(e)}var q1e={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},iI=new _m("app","Firebase",q1e);var XJ=class{constructor(e,r,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Nd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw iI.create("app-deleted",{appName:this._name})}};function QJ(t,e={}){typeof e!="object"&&(e={name:e});let r=Object.assign({name:YJ,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw iI.create("bad-app-name",{appName:String(o)});let i=$1.get(o);if(i){if(nI(t,i.options)&&nI(r,i.config))return i;throw iI.create("duplicate-app",{appName:o})}let s=new XO(o);for(let l of e4.values())s.addComponent(l);let a=new XJ(t,r,s);return $1.set(o,a),a}function t4(t=YJ){let e=$1.get(t);if(!e)throw iI.create("no-app",{appName:t});return e}function JJ(){return Array.from($1.values())}function Bd(t,e,r){var o;let i=(o=j1e[t])!==null&&o!==void 0?o:t;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ZO.warn(l.join(" "));return}Am(new Nd(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Y1e(t){Am(new Nd("platform-logger",e=>new KJ(e),"PRIVATE")),Bd(JO,qJ,t),Bd(JO,qJ,"esm2017"),Bd("fire-js","")}Y1e("");var X1e="firebase",Q1e="9.5.0";Bd(X1e,Q1e,"app");var eZ=X(r4()),tZ="@firebase/installations",n4="0.5.4";var rZ=1e4,nZ=`w:${n4}`,oZ="FIS_v2",J1e="https://firebaseinstallations.googleapis.com/v1",Z1e=60*60*1e3,eTe="installations",tTe="Installations";var rTe={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Yv=new _m(eTe,tTe,rTe);function iZ(t){return t instanceof Kv&&t.code.includes("request-failed")}function sZ({projectId:t}){return`${J1e}/projects/${t}/installations`}function aZ(t){return{token:t.token,requestStatus:2,expiresIn:oTe(t.expiresIn),creationTime:Date.now()}}async function lZ(t,e){let o=(await e.json()).error;return Yv.create("request-failed",{requestName:t,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function cZ({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nTe(t,{refreshToken:e}){let r=cZ(t);return r.append("Authorization",iTe(e)),r}async function dZ(t){let e=await t();return e.status>=500&&e.status<600?t():e}function oTe(t){return Number(t.replace("s","000"))}function iTe(t){return`${oZ} ${t}`}async function sTe(t,{fid:e}){let r=sZ(t),o=cZ(t),i={fid:e,authVersion:oZ,appId:t.appId,sdkVersion:nZ},s={method:"POST",headers:o,body:JSON.stringify(i)},a=await dZ(()=>fetch(r,s));if(a.ok){let l=await a.json();return{fid:l.fid||e,registrationStatus:2,refreshToken:l.refreshToken,authToken:aZ(l.authToken)}}else throw await lZ("Create Installation",a)}function uZ(t){return new Promise(e=>{setTimeout(e,t)})}function aTe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var lTe=/^[cdef][\w-]{21}$/,o4="";function cTe(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let r=dTe(t);return lTe.test(r)?r:o4}catch(t){return o4}}function dTe(t){return aTe(t).substr(0,22)}function aI(t){return`${t.appName}!${t.appId}`}var pZ=new Map;function hZ(t,e){let r=aI(t);fZ(r,e),uTe(r,e)}function fZ(t,e){let r=pZ.get(t);if(!!r)for(let o of r)o(e)}function uTe(t,e){let r=pTe();r&&r.postMessage({key:t,fid:e}),hTe()}var Xv=null;function pTe(){return!Xv&&"BroadcastChannel"in self&&(Xv=new BroadcastChannel("[Firebase] FID Change"),Xv.onmessage=t=>{fZ(t.data.key,t.data.fid)}),Xv}function hTe(){pZ.size===0&&Xv&&(Xv.close(),Xv=null)}var fTe="firebase-installations-database",mTe=1,Qv="firebase-installations-store",i4=null;function s4(){return i4||(i4=(0,eZ.openDb)(fTe,mTe,t=>{switch(t.oldVersion){case 0:t.createObjectStore(Qv)}})),i4}async function lI(t,e){let r=aI(t),i=(await s4()).transaction(Qv,"readwrite"),s=i.objectStore(Qv),a=await s.get(r);return await s.put(e,r),await i.complete,(!a||a.fid!==e.fid)&&hZ(t,e.fid),e}async function mZ(t){let e=aI(t),o=(await s4()).transaction(Qv,"readwrite");await o.objectStore(Qv).delete(e),await o.complete}async function cI(t,e){let r=aI(t),i=(await s4()).transaction(Qv,"readwrite"),s=i.objectStore(Qv),a=await s.get(r),l=e(a);return l===void 0?await s.delete(r):await s.put(l,r),await i.complete,l&&(!a||a.fid!==l.fid)&&hZ(t,l.fid),l}async function a4(t){let e,r=await cI(t,o=>{let i=gTe(o),s=vTe(t,i);return e=s.registrationPromise,s.installationEntry});return r.fid===o4?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function gTe(t){let e=t||{fid:cTe(),registrationStatus:0};return vZ(e)}function vTe(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Yv.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=bTe(t,r);return{installationEntry:r,registrationPromise:o}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:yTe(t)}:{installationEntry:e}}async function bTe(t,e){try{let r=await sTe(t,e);return lI(t,r)}catch(r){throw iZ(r)&&r.customData.serverCode===409?await mZ(t):await lI(t,{fid:e.fid,registrationStatus:0}),r}}async function yTe(t){let e=await gZ(t);for(;e.registrationStatus===1;)await uZ(100),e=await gZ(t);if(e.registrationStatus===0){let{installationEntry:r,registrationPromise:o}=await a4(t);return o||r}return e}function gZ(t){return cI(t,e=>{if(!e)throw Yv.create("installation-not-found");return vZ(e)})}function vZ(t){return CTe(t)?{fid:t.fid,registrationStatus:0}:t}function CTe(t){return t.registrationStatus===1&&t.registrationTime+rZ<Date.now()}async function STe({appConfig:t,platformLoggerProvider:e},r){let o=xTe(t,r),i=nTe(t,r),s=e.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());let a={installation:{sdkVersion:nZ}},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await dZ(()=>fetch(o,l));if(c.ok){let d=await c.json();return aZ(d)}else throw await lZ("Generate Auth Token",c)}function xTe(t,{fid:e}){return`${sZ(t)}/${e}/authTokens:generate`}async function l4(t,e=!1){let r,o=await cI(t.appConfig,s=>{if(!yZ(s))throw Yv.create("not-registered");let a=s.authToken;if(!e&&DTe(a))return s;if(a.requestStatus===1)return r=wTe(t,e),s;{if(!navigator.onLine)throw Yv.create("app-offline");let l=PTe(s);return r=TTe(t,l),l}});return r?await r:o.authToken}async function wTe(t,e){let r=await bZ(t.appConfig);for(;r.authToken.requestStatus===1;)await uZ(100),r=await bZ(t.appConfig);let o=r.authToken;return o.requestStatus===0?l4(t,e):o}function bZ(t){return cI(t,e=>{if(!yZ(e))throw Yv.create("not-registered");let r=e.authToken;return ETe(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function TTe(t,e){try{let r=await STe(t,e),o=Object.assign(Object.assign({},e),{authToken:r});return await lI(t.appConfig,o),r}catch(r){if(iZ(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await mZ(t.appConfig);else{let o=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await lI(t.appConfig,o)}throw r}}function yZ(t){return t!==void 0&&t.registrationStatus===2}function DTe(t){return t.requestStatus===2&&!kTe(t)}function kTe(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Z1e}function PTe(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ETe(t){return t.requestStatus===1&&t.requestTime+rZ<Date.now()}async function _Te(t){let e=t,{installationEntry:r,registrationPromise:o}=await a4(e.appConfig);return o?o.catch(console.error):l4(e).catch(console.error),r.fid}async function ATe(t,e=!1){let r=t;return await ITe(r.appConfig),(await l4(r,e)).token}async function ITe(t){let{registrationPromise:e}=await a4(t);e&&await e}function RTe(t){if(!t||!t.options)throw c4("App Configuration");if(!t.name)throw c4("App Name");let e=["projectId","apiKey","appId"];for(let r of e)if(!t.options[r])throw c4(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function c4(t){return Yv.create("missing-app-config-values",{valueName:t})}var CZ="installations",FTe="installations-internal",MTe=t=>{let e=t.getProvider("app").getImmediate(),r=RTe(e),o=W1(e,"platform-logger");return{app:e,appConfig:r,platformLoggerProvider:o,_delete:()=>Promise.resolve()}},NTe=t=>{let e=t.getProvider("app").getImmediate(),r=W1(e,CZ).getImmediate();return{getId:()=>_Te(r),getToken:i=>ATe(r,i)}};function BTe(){Am(new Nd(CZ,MTe,"PUBLIC")),Am(new Nd(FTe,NTe,"PRIVATE"))}BTe();Bd(tZ,n4);Bd(tZ,n4,"esm2017");var Jv=X(r4());var LTe="/firebase-messaging-sw.js",OTe="/firebase-cloud-messaging-push-scope",SZ="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zTe="https://fcmregistrations.googleapis.com/v1",xZ="google.c.a.c_id",UTe="google.c.a.c_l",HTe="google.c.a.ts",GTe="google.c.a.e",wZ;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(wZ||(wZ={}));var j1;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(j1||(j1={}));function vh(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function VTe(t){let e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),o=atob(r),i=new Uint8Array(o.length);for(let s=0;s<o.length;++s)i[s]=o.charCodeAt(s);return i}var d4="fcm_token_details_db",$Te=5,TZ="fcm_token_object_Store";async function WTe(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(d4))return null;let e=null;return(await(0,Jv.openDb)(d4,$Te,async o=>{var i;if(o.oldVersion<2||!o.objectStoreNames.contains(TZ))return;let s=o.transaction.objectStore(TZ),a=await s.index("fcmSenderId").get(t);if(await s.clear(),!!a){if(o.oldVersion===2){let l=a;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(i=l.createTime)!==null&&i!==void 0?i:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:vh(l.vapidKey)}}}else if(o.oldVersion===3){let l=a;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:vh(l.auth),p256dh:vh(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:vh(l.vapidKey)}}}else if(o.oldVersion===4){let l=a;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:vh(l.auth),p256dh:vh(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:vh(l.vapidKey)}}}}})).close(),await(0,Jv.deleteDb)(d4),await(0,Jv.deleteDb)("fcm_vapid_details_db"),await(0,Jv.deleteDb)("undefined"),jTe(e)?e:null}function jTe(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var KTe="firebase-messaging-database",qTe=1,Zv="firebase-messaging-store",u4=null;function p4(){return u4||(u4=(0,Jv.openDb)(KTe,qTe,t=>{switch(t.oldVersion){case 0:t.createObjectStore(Zv)}})),u4}async function DZ(t){let e=f4(t),o=await(await p4()).transaction(Zv).objectStore(Zv).get(e);if(o)return o;{let i=await WTe(t.appConfig.senderId);if(i)return await h4(t,i),i}}async function h4(t,e){let r=f4(t),i=(await p4()).transaction(Zv,"readwrite");return await i.objectStore(Zv).put(e,r),await i.complete,e}async function YTe(t){let e=f4(t),o=(await p4()).transaction(Zv,"readwrite");await o.objectStore(Zv).delete(e),await o.complete}function f4({appConfig:t}){return t.appId}var XTe={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},xa=new _m("messaging","Messaging",XTe);async function QTe(t,e){let r=await g4(t),o=PZ(e),i={method:"POST",headers:r,body:JSON.stringify(o)},s;try{s=await(await fetch(m4(t.appConfig),i)).json()}catch(a){throw xa.create("token-subscribe-failed",{errorInfo:a})}if(s.error){let a=s.error.message;throw xa.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw xa.create("token-subscribe-no-token");return s.token}async function JTe(t,e){let r=await g4(t),o=PZ(e.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(o)},s;try{s=await(await fetch(`${m4(t.appConfig)}/${e.token}`,i)).json()}catch(a){throw xa.create("token-update-failed",{errorInfo:a})}if(s.error){let a=s.error.message;throw xa.create("token-update-failed",{errorInfo:a})}if(!s.token)throw xa.create("token-update-no-token");return s.token}async function kZ(t,e){let r=await g4(t),o={method:"DELETE",headers:r};try{let s=await(await fetch(`${m4(t.appConfig)}/${e}`,o)).json();if(s.error){let a=s.error.message;throw xa.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw xa.create("token-unsubscribe-failed",{errorInfo:i})}}function m4({projectId:t}){return`${zTe}/projects/${t}/registrations`}async function g4({appConfig:t,installations:e}){let r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function PZ({p256dh:t,auth:e,endpoint:r,vapidKey:o}){let i={web:{endpoint:r,auth:e,p256dh:t}};return o!==SZ&&(i.web.applicationPubKey=o),i}var ZTe=7*24*60*60*1e3;async function eDe(t){let e=await nDe(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:vh(e.getKey("auth")),p256dh:vh(e.getKey("p256dh"))},o=await DZ(t.firebaseDependencies);if(o){if(oDe(o.subscriptionOptions,r))return Date.now()>=o.createTime+ZTe?rDe(t,{token:o.token,createTime:Date.now(),subscriptionOptions:r}):o.token;try{await kZ(t.firebaseDependencies,o.token)}catch(i){console.warn(i)}return EZ(t.firebaseDependencies,r)}else return EZ(t.firebaseDependencies,r)}async function tDe(t){let e=await DZ(t.firebaseDependencies);e&&(await kZ(t.firebaseDependencies,e.token),await YTe(t.firebaseDependencies));let r=await t.swRegistration.pushManager.getSubscription();return r?r.unsubscribe():!0}async function rDe(t,e){try{let r=await JTe(t.firebaseDependencies,e),o=Object.assign(Object.assign({},e),{token:r,createTime:Date.now()});return await h4(t.firebaseDependencies,o),r}catch(r){throw await tDe(t),r}}async function EZ(t,e){let o={token:await QTe(t,e),createTime:Date.now(),subscriptionOptions:e};return await h4(t,o),o.token}async function nDe(t,e){let r=await t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:VTe(e)})}function oDe(t,e){let r=e.vapidKey===t.vapidKey,o=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return r&&o&&i&&s}function _Z(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return iDe(e,t),sDe(e,t),aDe(e,t),e}function iDe(t,e){if(!e.notification)return;t.notification={};let r=e.notification.title;r&&(t.notification.title=r);let o=e.notification.body;o&&(t.notification.body=o);let i=e.notification.image;i&&(t.notification.image=i)}function sDe(t,e){!e.data||(t.data=e.data)}function aDe(t,e){if(!e.fcmOptions)return;t.fcmOptions={};let r=e.fcmOptions.link;r&&(t.fcmOptions.link=r);let o=e.fcmOptions.analytics_label;o&&(t.fcmOptions.analyticsLabel=o)}function lDe(t){return typeof t=="object"&&!!t&&xZ in t}AZ("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");AZ("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function AZ(t,e){let r=[];for(let o=0;o<t.length;o++)r.push(t.charAt(o)),o<e.length&&r.push(e.charAt(o));return r.join("")}function cDe(t){if(!t||!t.options)throw v4("App Configuration Object");if(!t.name)throw v4("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(let o of e)if(!r[o])throw v4(o);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function v4(t){return xa.create("missing-app-config-values",{valueName:t})}var IZ=class{constructor(e,r,o){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=cDe(e);this.firebaseDependencies={app:e,appConfig:i,installations:r,analyticsProvider:o}}_delete(){return Promise.resolve()}};async function dDe(t){try{t.swRegistration=await navigator.serviceWorker.register(LTe,{scope:OTe}),t.swRegistration.update().catch(()=>{})}catch(e){throw xa.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}async function uDe(t,e){if(!e&&!t.swRegistration&&await dDe(t),!(!e&&!!t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw xa.create("invalid-sw-registration");t.swRegistration=e}}async function pDe(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=SZ)}async function RZ(t,e){if(!navigator)throw xa.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw xa.create("permission-blocked");return await pDe(t,e==null?void 0:e.vapidKey),await uDe(t,e==null?void 0:e.serviceWorkerRegistration),eDe(t)}async function hDe(t,e,r){let o=fDe(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(o,{message_id:r[xZ],message_name:r[UTe],message_time:r[HTe],message_device_time:Math.floor(Date.now()/1e3)})}function fDe(t){switch(t){case j1.NOTIFICATION_CLICKED:return"notification_open";case j1.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function mDe(t,e){let r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===j1.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(_Z(r)):t.onMessageHandler.next(_Z(r)));let o=r.data;lDe(o)&&o[GTe]==="1"&&await hDe(t,r.messageType,o)}var FZ="@firebase/messaging",MZ="0.9.4";var gDe=t=>{let e=new IZ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>mDe(e,r)),e},vDe=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:o=>RZ(e,o)}};function bDe(){Am(new Nd("messaging",gDe,"PUBLIC")),Am(new Nd("messaging-internal",vDe,"PRIVATE")),Bd(FZ,MZ),Bd(FZ,MZ,"esm2017")}async function b4(){return typeof window!="undefined"&&GJ()&&await VJ()&&$J()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function yDe(t,e){if(!navigator)throw xa.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function NZ(t=t4()){return b4().then(e=>{if(!e)throw xa.create("unsupported-browser")},e=>{throw xa.create("indexed-db-unsupported")}),W1(oI(t),"messaging").getImmediate()}async function y4(t,e){return t=oI(t),RZ(t,e)}function BZ(t,e){return t=oI(t),yDe(t,e)}bDe();var CDe="push_message",LZ="LNS_FIREBASE";async function C4(){return await b4()}var K1=class{constructor(e,r,o){this.messaging=e;this.pushToken=r;this.options=o;this.handleForegroundMessageHandler=()=>e=>{var o,i;if(!(e==null?void 0:e.data))return;let r=e.data;if(r.type==="signed_in_alert")(o=this.loginAlertHandler)==null||o.call(this,r);else{let s=r.body,a=OZ(r);s&&a&&((i=this.foregroundHandler)==null||i.call(this,s,a))}};this.handleBackgroundMessageHandler=()=>e=>{var o,i;if(e.origin!==location.origin||e.data.type!==CDe)return;let r=e.data.payload;if(r.type==="signed_in_alert")(o=this.loginAlertHandler)==null||o.call(this,r);else{let s=OZ(r);e.data.link&&s&&((i=this.backgroundHandler)==null||i.call(this,e.data.link,s))}};this.kAppLoadedKey="app-loaded"}static async create(e){try{let{config:r,vapidKey:o,releaseStage:i,lang:s}=e;if(!await C4()||await Notification.requestPermission()!=="granted")return;let l=JJ().find(f=>f.name===LZ);l||(l=QJ(r,LZ));let c=NZ(l),d=await navigator.serviceWorker.register("/js/sw/fcm-sw.js",{scope:"/js/sw/fcm-scope"});await d.update();let u=await y4(c,{vapidKey:o,serviceWorkerRegistration:d});await ue.apiClient.setMobilePushToken(u),await ue.lnsClient.registerMobilePush({token:u,releaseStage:i,lang:s});let p={...e,serviceWorkerRegistration:d},h=new K1(c,u,p);return BZ(c,h.handleForegroundMessageHandler()),navigator.serviceWorker.addEventListener("message",h.handleBackgroundMessageHandler()),h}catch(r){throw yt.catchError(r),ge.log("FcmPushClient initialization failed: ",r),r}}async updateValidPushToken(){try{let e=await y4(this.messaging,this.options);if(this.pushToken!==e){let{releaseStage:r,lang:o}=this.options;await ue.apiClient.setMobilePushToken(e),await ue.lnsClient.registerMobilePush({token:e,releaseStage:r,lang:o}),this.pushToken=e}}catch(e){throw yt.catchError(e),ge.warn("could not get a push token",e),e}}set backgroundMobilePushesEntityHandler(e){this.backgroundHandler=e}set foregroundMobilePushesEntityHandler(e){this.foregroundHandler=e}set loginAlertMessageHandler(e){this.loginAlertHandler=e}notifyAppLoaded(){var e;(e=this.options.serviceWorkerRegistration.active)==null||e.postMessage(this.kAppLoadedKey)}};function OZ(t){let e=Number(t.id),r=t.type,o=Number(t.course_id);if(r==="notify_submission")return{id:e,type:"notify_submission",data:{type:"notify_submission",course_id:o,submission_number:Number(t.submission_number)}};if(r==="reveal_submission_answers")return{id:e,type:"reveal_submission_answers",data:{type:"reveal_submission_answers",course_id:o,submission_number:Number(t.submission_number)}};if(r==="submit")return{id:e,type:"submit",data:{type:"submit",course_id:o,author_id:Number(t.author_id),submission_number:Number(t.submission_number)}};if(r==="share")return{id:e,type:"share",data:{type:"share",course_id:o,author_id:Number(t.author_id),document_id:Number(t.document_id),timeline_entry_id:Number(t.timeline_entry_id)}};if(r==="distribute")return{id:e,type:"distribute",data:{type:"distribute",course_id:o,author_id:Number(t.author_id),document_id:Number(t.document_id),timeline_entry_id:Number(t.timeline_entry_id)}};if(r==="comment_on_submission_answer")return{id:e,type:"comment_on_submission_answer",data:{type:"comment_on_submission_answer",course_id:o,author_id:Number(t.author_id),submission_number:Number(t.submission_number),timeline_entry_id:Number(t.timeline_entry_id)}}}var SDe=So();function zZ(t){return e=>{var s;let r=t.current,o=r.userInfo.user_id,i=De.get().strings;if(e.action==="note_member_added"&&e.by_user_id!==o){let a=[Uy({noteId:e.note_id,adds:[e.user_id]})];$e(e.course_id!=null,"course_id must be set"),e.user_id===r.userInfo.user_id&&a.push(_s({experimentalFeatures:{enableSharedNote:{$set:!0}}}),ui(wt.notes(e.course_id),null)),r.reduce(...a)}else if(e.action==="note_member_deleted"&&e.by_user_id!==o){let a=[Uy({noteId:e.note_id,dels:[e.user_id]})];$e(e.course_id!=null,"course_id must be set"),e.user_id===r.userInfo.user_id&&(a.push(PP(e.course_id,e.note_id)),((s=r.desktop)==null?void 0:s.noteId)===e.note_id&&a.push(vd(),Ps(oe.alert,{title:i.removedFromSharedNoteMembers,color:"info",okMessage:i.okay,onOk:()=>r.reduce(Ps(oe.alert,void 0))}))),r.reduce(...a)}}}function UZ(t){return e=>{var i,s,a;let r=t.current,o=r.courseId;if(typeof o=="number"){if(e.action==="screen_lock"){if(r.reduce(wf(o,e.value)),e.expired_at){let l=new Date(e.expired_at),c=new Date;if(l.getTime()<=c.getTime())r.reduce(wf(o,!1));else{let d=l.getTime()-c.getTime();SDe(()=>{r.reduce(wf(o,!1))},d)}}}else if(_9(e))r.reduce(Op(o,e));else if(A9(e))r.reduce(Yy(e.user,e.state));else if(e.action==="enable_tunnel")r.reduce(sw(o,e.enabled));else if(e.action==="user_status_change")r.reduce(X9(o,e));else if(e.action==="submission")GZ(r,o,e);else if(e.action==="update_submission")VZ(r,o,e);else if(e.action==="submit")e.submission_number===r.submissionNumber&&mC(r,{courseId:o,submissionNumber:e.submission_number,withTeacher:!0}),r.userInfo.is_teacher&&r.pushTokenState!=="registered"&&Pm(r,o);else if(e.action==="document_annotation_layer_update"||e.action==="document_extension_layer_update"){let{action:l}=e,c=l==="document_annotation_layer_update"?"annotation":"drawn",d=Fp(e.document,e.index);c==="annotation"?r.reduce(_P(d,e),qy(e.document,{annotation_layer_updated:!0})):c==="drawn"&&r.reduce(AP(d,e),qy(e.document,{extension_layer_updated:!0}))}else if(e.action==="update_document_thumbnail"){let l=Iy(e.document,e.index);r.reduce(()=>({thumbUpdateNotifications:{document:{[l]:{$set:e}}}}))}else if(e.action==="update_annotation_layer_thumbnail"){let l=Iy(e.document,e.index);r.reduce(()=>({thumbUpdateNotifications:{annotations:{[l]:{$set:e}}}}))}else if(e.action==="share"){if(r.userInfo.user_id!==e.publisher&&e.share_user_ids.includes(r.userInfo.user_id)&&(r.pageVisible&&!!((i=r.desktop)==null?void 0:i.noteId)&&r.reduce(rB({id:e.file})),r.pushTokenState!=="registered")){let c=r.pageVisible&&!!((s=r.desktop)==null?void 0:s.noteId)?["share","distribute"]:void 0;Pm(r,o,c)}}else if(e.action==="reply"){let l=r.userInfo.user_id;l!==e.publisher&&e.to===l&&r.pageVisible&&!!((a=r.desktop)==null?void 0:a.noteId)&&(r.reduce(rB({id:e.file,snapshotId:e.snapshot_id})),r.pushTokenState!=="registered"&&Pm(r,o,["comment_on_submission_answer"]))}}}}function HZ(t){return e=>{var s;let r=t.current,o=(s=r.newSubmissionDialog)==null?void 0:s.courseId,i=Cf(r);!o||o===i||(e.action==="submission"?GZ(r,o,e):e.action==="update_submission"&&VZ(r,o,e))}}function GZ(t,e,r){if(r.submission_action==="new"){let o={submission_number:r.current_submission_number,expiry:r.expiry||null,hide_author:r.hide_author,reveal_answer:r.reveal_answer,message:r.submission_message||"",submit_date:null,submitted:!1,timestamp:new Date().toISOString()};t.reduce(aw(e,r.current_submission_number,o))}else r.submission_action==="delete"&&t.reduce(lw(e,r.submission_number),iw(r.submission_number))}function VZ(t,e,r){let o={};r.expiry!==void 0&&(o.expiry=r.expiry),r.reveal_answer!==void 0&&(o.reveal_answer=r.reveal_answer),r.hide_author!==void 0&&(o.hide_author=r.hide_author),r.message!==void 0&&(o.message=r.message),t.reduce(RP(e,r.submission_number,o))}var WZ=()=>{var v,y,S;let t=qe(),e=Cf(t);(0,po.useEffect)(()=>{un(e)&&jl(t,e)},[e]);let r=ew(t),o=md(t),i=HN(t);(0,po.useEffect)(()=>{r||o||i?GP(t):HP(t)},[r,o,i]),(0,po.useEffect)(()=>{t.materialBoxOpen?GP(t,()=>{t.reduce(Hp(!1))}):HP(t)},[t.materialBoxOpen]),(0,po.useEffect)(()=>{t.cameraDialogOpen?GP(t,()=>{t.reduce(Tf(!1))}):HP(t)},[t.cameraDialogOpen]),(0,po.useEffect)(()=>{eI(t)},[e,t.submissions.updatedAt]),(0,po.useEffect)(()=>{un(e)&&hC({store:t,courseId:e})},[e]);let s=(0,po.useRef)();(0,po.useEffect)(()=>{var C;OO(s.current),((C=t.screenSharingState)==null?void 0:C.sessionId)&&(s.current=mJ(t,t.screenSharingState.courseId,t.screenSharingState.sessionId,30))},[(v=t.screenSharingState)==null?void 0:v.sessionId]),(0,po.useEffect)(()=>{var C;if(!t.pageFocused&&((C=t.screenSharingState)==null?void 0:C.sessionId)){let{courseId:b,sessionId:x}=t.screenSharingState;hJ(t,b,x)}},[t.pageFocused]);let{screenSharingState:a}=t,l=(a==null?void 0:a.courseId)?t.screenSharingActionNotification[a.courseId]:void 0;(0,po.useEffect)(()=>{if(!a||!l)return;let{sessionId:C,courseId:b}=a;Mp(l)&&l.id===C&&t.reduce(Zi(void 0),Fe(oe.screenSharing,null),Op(b,void 0),Co())},[a,l]),(0,po.useEffect)(()=>{if(!t.screenSharingState)return;let{sessionId:C,courseId:b}=t.screenSharingState;return t.fetchStates[wt.receiverStatus(b)]!=="fetching"&&VA(t,b,C),()=>{t.reduce(Y9())}},[(y=t.screenSharingState)==null?void 0:y.sessionId]);let c=(0,po.useRef)(t);(0,po.useEffect)(()=>{c.current=t},[t]),(0,po.useEffect)(()=>{let C=zZ(c);ue.pushClient.subscribeUser(t.userInfo.user_id,C)},[]),(0,po.useEffect)(()=>{if(typeof e!="number")return;ge.log(`push: subscribe courses/${e}`);let C=UZ(c),b=ue.pushClient.subscribeCourse(e,C);return()=>{ge.log(`push: unsubscribe courses/${e}`),ue.pushClient.unsubscribeCourse(e,b)}},[e]),(0,po.useEffect)(()=>{var w;let C=(w=t.newSubmissionDialog)==null?void 0:w.courseId;if(!C||e===C)return;ge.log(`push: subscribe courses/${C}`);let b=HZ(c),x=ue.pushClient.subscribeCourse(C,b);return()=>{ge.log(`push: unsubscribe courses/${C}`),ue.pushClient.unsubscribeCourse(C,x)}},[(S=t.newSubmissionDialog)==null?void 0:S.courseId]);let{uploadingDocument:d,sendingDocument:u,submittingDocument:p}=t;(0,po.useEffect)(()=>()=>{d&&pC(d)},[d]),(0,po.useEffect)(()=>()=>{p&&pC(p)},[p]),(0,po.useEffect)(()=>()=>{u&&pC(u)},[u]);let{userPreference:h}=t;(0,po.useEffect)(()=>{D9(t.userInfo.user_id,h)},[h]),(0,po.useEffect)(()=>{typeof e=="number"&&NO(t,e)},[e]),(0,po.useEffect)(()=>{(async C=>{C?await ue.lnsClient.attendCourse(C):await ue.lnsClient.leaveCourse()})(e).catch(C=>{yt.catchError(C)||ge.error(C)})},[e]),(0,po.useEffect)(()=>{async function C(){if(!t.drawnAssetUploadTrigger)return;let b=t.drawnAssetUploadTrigger;for(let x of b){let{geometry:w,cardId:k}=x,{canvas:T}=w,A=gr.forCard(k),E,z=To.forCard("drawn",k).packContents();try{let R=await I_({canvas:T,contents:z});E=new File([R],"stroke.lnstroke",{type:"application/zip"})}catch(R){let N=oe.encodeDrawnData,V=De.get().strings;t.reduce(Pe(N,{title:V.couldntEncodeDrawnData,...Ht(R),okMessage:V.back,onOk:()=>t.reduce(Pe(N,void 0))}));return}let L=A.drawn.redrawThumbnails({geometry:w,contents:z});tJ({store:t,cardId:k,file:E,thumb:L,geometry:w})}}C()},[t.drawnAssetUploadTrigger]),(0,po.useEffect)(()=>{if(t.pushState){let{url:C,title:b,type:x}=t.pushState,w={...t};(x==="note-list"||x==="course-list")&&delete w.desktop;let k=Ry(w);location.pathname!==C&&(ge.log("pushState",t.pushState,k),window.history.pushState(k,b,C))}},[t.pushState]),(0,po.useEffect)(()=>{!t.pushState||(document.title=t.pushState.title)},[t.pushState]),(0,po.useEffect)(()=>{!t.assetThumbUploadTrigger||rJ({store:t,...t.assetThumbUploadTrigger})},[t.assetThumbUploadTrigger]),(0,po.useEffect)(()=>{if(!t.pageVisible)return;let C=c.current.pushTokenState;C==="registered"||C==="update failed"?ue.fcmPushClient.updateValidPushToken().catch(b=>{c.current.reduce(uw("update failed"))}):(!C||C==="register failed")&&K1.create({config:t.firebaseConfig,vapidKey:t.fcmVapidKey,releaseStage:t.fcmReleaseStage,enableLog:t.logEnabled,lang:C7(c.current.locale)}).then(b=>{if(!b){c.current.reduce(uw("unregistered"));return}b.foregroundMobilePushesEntityHandler=f,b.backgroundMobilePushesEntityHandler=m,b.loginAlertMessageHandler=g(),ue.fcmPushClient=b,c.current.reduce(uw("registered")),b.notifyAppLoaded()}).catch(b=>{c.current.reduce(uw("register failed"))})},[t.pageVisible]);let f=(C,b)=>{var x;((x=c.current.desktop)==null?void 0:x.courseId)===b.data.course_id?(b.type==="reveal_submission_answers"&&!c.current.editor&&!c.current.cameraDialogOpen&&t.reduce(Pn({type:"normal",text:C})),b.type==="submit"||b.type==="reveal_submission_answers"?t.reduce(rI(b)):Em([b.id])):(b.type!=="submit"&&t.reduce(UJ(C)),b.type==="share"||b.type==="distribute"||b.type==="comment_on_submission_answer"||b.type==="submit"||b.type==="reveal_submission_answers"?t.reduce(rI(b)):Em([b.id]))},m=async(C,b)=>{var A,E;let x=c.current,w=De.get().strings,k=b.data.course_id,T=[];if(b.type==="notify_submission")T.push(cV({courseId:k,submissionNumber:b.data.submission_number}));else if(b.type==="reveal_submission_answers"||b.type==="submit")if(k===((A=x.desktop)==null?void 0:A.courseId))T.push(n0(),hw(),q9(k,b.data.submission_number));else{let F=w.confirmCloseNoteForOtherSubmissionBox;if(!x.desktop||confirm(F)){location.href=C;return}}else if(b.type==="share"||b.type==="distribute"||b.type==="comment_on_submission_answer")if(k===((E=x.desktop)==null?void 0:E.courseId))T.push(n0(),hw(),eV(k,b.data.timeline_entry_id));else{let F=w.confirmCloseNoteForOtherTimeline;if(!x.desktop||confirm(F)){location.href=C;return}}b.type==="notify_submission"||b.type==="alert_submission_expiry"?Em([b.id]):T.push(rI(b)),x.reduce(...T)},g=()=>{let C=[];return b=>{let x=oe.signedInByOtherBrowser,w=De.get().strings;if(c.current.alerts[x]){C.push(b);return}let k=()=>{t.reduce(Ps(x,void 0));let E=C.pop();!E||setTimeout(()=>{t.reduce(Ps(x,{title:E.title,message:E.body,okMessage:w.okay,onOk:k,color:"info"}))},500)},{title:T,body:A}=b;t.reduce(Ps(x,{title:T,message:A,okMessage:w.okay,onOk:k,color:"info"}))}};return o0(()=>{let C=t.courseId;C&&t.reduce(ui(wt.notes(C),null))},[t.userPreference.experimentalFeatures.enableSharedNote]),(0,po.useEffect)(()=>{t.reduce(Co())},[t.assetUploadStates,t.assetThumbnailUploadStates]),$Z.createElement("div",{className:"storeObserver"})};var ls=X(he()),Z2=X(he());var dI=X(he()),S4=dI.default.createContext({popoverOpen:!1,courseId:0,noteId:0,isShared:!1});function ju(){return(0,dI.useContext)(S4)}var q1=X(he());var uI=X(he());var pI=({store:t})=>{if(!t.desktop)return null;let e=yf(t,t.desktop.courseId),r=t.notes.byId[t.desktop.noteId],o=r==null?void 0:r.name;return uI.createElement("div",{className:"userProfileCourse"},e&&uI.createElement("div",{className:"userProfileText"},e),o&&uI.createElement("div",{className:"userProfileText"},o))};var Ld=X(he()),Im=X(he());var x4=X(on());var jZ=X(he());var Fr=({src:t,srcSet:e,...r})=>(t&&(t=ue.res.src(t)),e&&(e=ue.res.srcSet(e)),jZ.createElement("img",{src:t,srcSet:e,...r}));var KZ=function({store:e}){let{courseId:r}=ju();if(typeof r!="number")return null;let o=e.submissions.byActiveInCourse[r];if(!o||o.length===0)return null;let i=o.map(u=>e.submissions.byKey[u]),s=i.find(u=>u!=null&&!u.submitted),a=i.find(u=>u!=null&&u.submitted),l=s!=null?s:a;if(!l)return null;let c=()=>{eI(e)},d=()=>{e.reduce(jy(!0),Lp(l.submission_number))};return Ld.createElement(xDe,{sub:l,count:o.length,onCountDown0:c,onClick:d})},xDe=function({sub:e,count:r,onCountDown0:o,onClick:i}){let[s,a]=(0,Im.useState)(void 0),l=(0,Im.useRef)(s),c=(0,Im.useRef)();(0,Im.useEffect)(()=>{if(!e.submitted){$e(e.expiry!=null);let p=new Date(e.expiry).getTime(),h=Date.now(),f=p-h;if(f>0)return a(f),clearInterval(c.current),c.current=setInterval(()=>{l.current?a(l.current-1e3):clearInterval(c.current)},1e3),()=>clearInterval(c.current);o()}},[e]),(0,Im.useEffect)(()=>{l.current=s,typeof s=="number"&&s<=0&&o()},[s]);let d=Te(),u=e.message;if(r>10)u+=(0,x4.sprintf)(d.others,r-1);else if(r>1){let p=De.get().pluralSafeSuffix(r-1);u+=(0,x4.sprintf)(d.openTaskCount,r-1,p)}return Ld.createElement("div",{className:"submissionBoard",role:"button",onClick:i},!e.submitted&&s!=null&&Ld.createElement(Ld.Fragment,null,Ld.createElement("div",{className:"submissionBoardTime"},new Gp(s).toRelativeString()),Ld.createElement("div",{style:{height:5,width:10,flexShrink:0}})),Ld.createElement("div",{className:"submissionBoardTitle"},e.submitted&&Ld.createElement(Fr,{src:"/svg/check_green.svg",alt:"submissionBoardStatusMark",className:"submissionBoardStatusMark"}),Ld.createElement("span",{className:"submissionBoardTitleInner"},u)))};var qZ=({store:t})=>q1.createElement("div",{className:"desktopHeader"},q1.createElement("div",{className:"desktopHeaderCenter"},t.screen.isMobile&&t.screen.width<480&&q1.createElement(pI,{store:t}),q1.createElement(KZ,{store:t})));var Qo=X(he()),Ka=X(he());var Vn=1e-6,Pi=typeof Float32Array!="undefined"?Float32Array:Array,Ku=Math.random;var CZe=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var hr={};SD(hr,{add:()=>ske,adjoint:()=>ADe,clone:()=>TDe,copy:()=>DDe,create:()=>wDe,determinant:()=>IDe,equals:()=>dke,exactEquals:()=>cke,frob:()=>ike,fromQuat:()=>YDe,fromQuat2:()=>$De,fromRotation:()=>UDe,fromRotationTranslation:()=>QZ,fromRotationTranslationScale:()=>KDe,fromRotationTranslationScaleOrigin:()=>qDe,fromScaling:()=>zDe,fromTranslation:()=>ODe,fromValues:()=>kDe,fromXRotation:()=>HDe,fromYRotation:()=>GDe,fromZRotation:()=>VDe,frustum:()=>XDe,getRotation:()=>jDe,getScaling:()=>JZ,getTranslation:()=>WDe,identity:()=>YZ,invert:()=>_De,lookAt:()=>rke,mul:()=>uke,multiply:()=>XZ,multiplyScalar:()=>ake,multiplyScalarAndAdd:()=>lke,ortho:()=>eke,orthoNO:()=>eee,orthoZO:()=>tke,perspective:()=>QDe,perspectiveFromFieldOfView:()=>ZDe,perspectiveNO:()=>ZZ,perspectiveZO:()=>JDe,rotate:()=>MDe,rotateX:()=>NDe,rotateY:()=>BDe,rotateZ:()=>LDe,scale:()=>FDe,set:()=>PDe,str:()=>oke,sub:()=>pke,subtract:()=>tee,targetTo:()=>nke,translate:()=>RDe,transpose:()=>EDe});function wDe(){var t=new Pi(16);return Pi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function TDe(t){var e=new Pi(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function DDe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function kDe(t,e,r,o,i,s,a,l,c,d,u,p,h,f,m,g){var v=new Pi(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=o,v[4]=i,v[5]=s,v[6]=a,v[7]=l,v[8]=c,v[9]=d,v[10]=u,v[11]=p,v[12]=h,v[13]=f,v[14]=m,v[15]=g,v}function PDe(t,e,r,o,i,s,a,l,c,d,u,p,h,f,m,g,v){return t[0]=e,t[1]=r,t[2]=o,t[3]=i,t[4]=s,t[5]=a,t[6]=l,t[7]=c,t[8]=d,t[9]=u,t[10]=p,t[11]=h,t[12]=f,t[13]=m,t[14]=g,t[15]=v,t}function YZ(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function EDe(t,e){if(t===e){var r=e[1],o=e[2],i=e[3],s=e[6],a=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=s,t[11]=e[14],t[12]=i,t[13]=a,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function _De(t,e){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],d=e[7],u=e[8],p=e[9],h=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15],S=r*l-o*a,C=r*c-i*a,b=r*d-s*a,x=o*c-i*l,w=o*d-s*l,k=i*d-s*c,T=u*g-p*m,A=u*v-h*m,E=u*y-f*m,F=p*v-h*g,z=p*y-f*g,L=h*y-f*v,R=S*L-C*z+b*F+x*E-w*A+k*T;return R?(R=1/R,t[0]=(l*L-c*z+d*F)*R,t[1]=(i*z-o*L-s*F)*R,t[2]=(g*k-v*w+y*x)*R,t[3]=(h*w-p*k-f*x)*R,t[4]=(c*E-a*L-d*A)*R,t[5]=(r*L-i*E+s*A)*R,t[6]=(v*b-m*k-y*C)*R,t[7]=(u*k-h*b+f*C)*R,t[8]=(a*z-l*E+d*T)*R,t[9]=(o*E-r*z-s*T)*R,t[10]=(m*w-g*b+y*S)*R,t[11]=(p*b-u*w-f*S)*R,t[12]=(l*A-a*F-c*T)*R,t[13]=(r*F-o*A+i*T)*R,t[14]=(g*C-m*x-v*S)*R,t[15]=(u*x-p*C+h*S)*R,t):null}function ADe(t,e){var r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],d=e[7],u=e[8],p=e[9],h=e[10],f=e[11],m=e[12],g=e[13],v=e[14],y=e[15];return t[0]=l*(h*y-f*v)-p*(c*y-d*v)+g*(c*f-d*h),t[1]=-(o*(h*y-f*v)-p*(i*y-s*v)+g*(i*f-s*h)),t[2]=o*(c*y-d*v)-l*(i*y-s*v)+g*(i*d-s*c),t[3]=-(o*(c*f-d*h)-l*(i*f-s*h)+p*(i*d-s*c)),t[4]=-(a*(h*y-f*v)-u*(c*y-d*v)+m*(c*f-d*h)),t[5]=r*(h*y-f*v)-u*(i*y-s*v)+m*(i*f-s*h),t[6]=-(r*(c*y-d*v)-a*(i*y-s*v)+m*(i*d-s*c)),t[7]=r*(c*f-d*h)-a*(i*f-s*h)+u*(i*d-s*c),t[8]=a*(p*y-f*g)-u*(l*y-d*g)+m*(l*f-d*p),t[9]=-(r*(p*y-f*g)-u*(o*y-s*g)+m*(o*f-s*p)),t[10]=r*(l*y-d*g)-a*(o*y-s*g)+m*(o*d-s*l),t[11]=-(r*(l*f-d*p)-a*(o*f-s*p)+u*(o*d-s*l)),t[12]=-(a*(p*v-h*g)-u*(l*v-c*g)+m*(l*h-c*p)),t[13]=r*(p*v-h*g)-u*(o*v-i*g)+m*(o*h-i*p),t[14]=-(r*(l*v-c*g)-a*(o*v-i*g)+m*(o*c-i*l)),t[15]=r*(l*h-c*p)-a*(o*h-i*p)+u*(o*c-i*l),t}function IDe(t){var e=t[0],r=t[1],o=t[2],i=t[3],s=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=t[9],p=t[10],h=t[11],f=t[12],m=t[13],g=t[14],v=t[15],y=e*a-r*s,S=e*l-o*s,C=e*c-i*s,b=r*l-o*a,x=r*c-i*a,w=o*c-i*l,k=d*m-u*f,T=d*g-p*f,A=d*v-h*f,E=u*g-p*m,F=u*v-h*m,z=p*v-h*g;return y*z-S*F+C*E+b*A-x*T+w*k}function XZ(t,e,r){var o=e[0],i=e[1],s=e[2],a=e[3],l=e[4],c=e[5],d=e[6],u=e[7],p=e[8],h=e[9],f=e[10],m=e[11],g=e[12],v=e[13],y=e[14],S=e[15],C=r[0],b=r[1],x=r[2],w=r[3];return t[0]=C*o+b*l+x*p+w*g,t[1]=C*i+b*c+x*h+w*v,t[2]=C*s+b*d+x*f+w*y,t[3]=C*a+b*u+x*m+w*S,C=r[4],b=r[5],x=r[6],w=r[7],t[4]=C*o+b*l+x*p+w*g,t[5]=C*i+b*c+x*h+w*v,t[6]=C*s+b*d+x*f+w*y,t[7]=C*a+b*u+x*m+w*S,C=r[8],b=r[9],x=r[10],w=r[11],t[8]=C*o+b*l+x*p+w*g,t[9]=C*i+b*c+x*h+w*v,t[10]=C*s+b*d+x*f+w*y,t[11]=C*a+b*u+x*m+w*S,C=r[12],b=r[13],x=r[14],w=r[15],t[12]=C*o+b*l+x*p+w*g,t[13]=C*i+b*c+x*h+w*v,t[14]=C*s+b*d+x*f+w*y,t[15]=C*a+b*u+x*m+w*S,t}function RDe(t,e,r){var o=r[0],i=r[1],s=r[2],a,l,c,d,u,p,h,f,m,g,v,y;return e===t?(t[12]=e[0]*o+e[4]*i+e[8]*s+e[12],t[13]=e[1]*o+e[5]*i+e[9]*s+e[13],t[14]=e[2]*o+e[6]*i+e[10]*s+e[14],t[15]=e[3]*o+e[7]*i+e[11]*s+e[15]):(a=e[0],l=e[1],c=e[2],d=e[3],u=e[4],p=e[5],h=e[6],f=e[7],m=e[8],g=e[9],v=e[10],y=e[11],t[0]=a,t[1]=l,t[2]=c,t[3]=d,t[4]=u,t[5]=p,t[6]=h,t[7]=f,t[8]=m,t[9]=g,t[10]=v,t[11]=y,t[12]=a*o+u*i+m*s+e[12],t[13]=l*o+p*i+g*s+e[13],t[14]=c*o+h*i+v*s+e[14],t[15]=d*o+f*i+y*s+e[15]),t}function FDe(t,e,r){var o=r[0],i=r[1],s=r[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function MDe(t,e,r,o){var i=o[0],s=o[1],a=o[2],l=Math.hypot(i,s,a),c,d,u,p,h,f,m,g,v,y,S,C,b,x,w,k,T,A,E,F,z,L,R,N;return l<Vn?null:(l=1/l,i*=l,s*=l,a*=l,c=Math.sin(r),d=Math.cos(r),u=1-d,p=e[0],h=e[1],f=e[2],m=e[3],g=e[4],v=e[5],y=e[6],S=e[7],C=e[8],b=e[9],x=e[10],w=e[11],k=i*i*u+d,T=s*i*u+a*c,A=a*i*u-s*c,E=i*s*u-a*c,F=s*s*u+d,z=a*s*u+i*c,L=i*a*u+s*c,R=s*a*u-i*c,N=a*a*u+d,t[0]=p*k+g*T+C*A,t[1]=h*k+v*T+b*A,t[2]=f*k+y*T+x*A,t[3]=m*k+S*T+w*A,t[4]=p*E+g*F+C*z,t[5]=h*E+v*F+b*z,t[6]=f*E+y*F+x*z,t[7]=m*E+S*F+w*z,t[8]=p*L+g*R+C*N,t[9]=h*L+v*R+b*N,t[10]=f*L+y*R+x*N,t[11]=m*L+S*R+w*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function NDe(t,e,r){var o=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+d*o,t[5]=a*i+u*o,t[6]=l*i+p*o,t[7]=c*i+h*o,t[8]=d*i-s*o,t[9]=u*i-a*o,t[10]=p*i-l*o,t[11]=h*i-c*o,t}function BDe(t,e,r){var o=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],l=e[2],c=e[3],d=e[8],u=e[9],p=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-d*o,t[1]=a*i-u*o,t[2]=l*i-p*o,t[3]=c*i-h*o,t[8]=s*o+d*i,t[9]=a*o+u*i,t[10]=l*o+p*i,t[11]=c*o+h*i,t}function LDe(t,e,r){var o=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],l=e[2],c=e[3],d=e[4],u=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+d*o,t[1]=a*i+u*o,t[2]=l*i+p*o,t[3]=c*i+h*o,t[4]=d*i-s*o,t[5]=u*i-a*o,t[6]=p*i-l*o,t[7]=h*i-c*o,t}function ODe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function zDe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function UDe(t,e,r){var o=r[0],i=r[1],s=r[2],a=Math.hypot(o,i,s),l,c,d;return a<Vn?null:(a=1/a,o*=a,i*=a,s*=a,l=Math.sin(e),c=Math.cos(e),d=1-c,t[0]=o*o*d+c,t[1]=i*o*d+s*l,t[2]=s*o*d-i*l,t[3]=0,t[4]=o*i*d-s*l,t[5]=i*i*d+c,t[6]=s*i*d+o*l,t[7]=0,t[8]=o*s*d+i*l,t[9]=i*s*d-o*l,t[10]=s*s*d+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function HDe(t,e){var r=Math.sin(e),o=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function GDe(t,e){var r=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function VDe(t,e){var r=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QZ(t,e,r){var o=e[0],i=e[1],s=e[2],a=e[3],l=o+o,c=i+i,d=s+s,u=o*l,p=o*c,h=o*d,f=i*c,m=i*d,g=s*d,v=a*l,y=a*c,S=a*d;return t[0]=1-(f+g),t[1]=p+S,t[2]=h-y,t[3]=0,t[4]=p-S,t[5]=1-(u+g),t[6]=m+v,t[7]=0,t[8]=h+y,t[9]=m-v,t[10]=1-(u+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function $De(t,e){var r=new Pi(3),o=-e[0],i=-e[1],s=-e[2],a=e[3],l=e[4],c=e[5],d=e[6],u=e[7],p=o*o+i*i+s*s+a*a;return p>0?(r[0]=(l*a+u*o+c*s-d*i)*2/p,r[1]=(c*a+u*i+d*o-l*s)*2/p,r[2]=(d*a+u*s+l*i-c*o)*2/p):(r[0]=(l*a+u*o+c*s-d*i)*2,r[1]=(c*a+u*i+d*o-l*s)*2,r[2]=(d*a+u*s+l*i-c*o)*2),QZ(t,e,r),t}function WDe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function JZ(t,e){var r=e[0],o=e[1],i=e[2],s=e[4],a=e[5],l=e[6],c=e[8],d=e[9],u=e[10];return t[0]=Math.hypot(r,o,i),t[1]=Math.hypot(s,a,l),t[2]=Math.hypot(c,d,u),t}function jDe(t,e){var r=new Pi(3);JZ(r,e);var o=1/r[0],i=1/r[1],s=1/r[2],a=e[0]*o,l=e[1]*i,c=e[2]*s,d=e[4]*o,u=e[5]*i,p=e[6]*s,h=e[8]*o,f=e[9]*i,m=e[10]*s,g=a+u+m,v=0;return g>0?(v=Math.sqrt(g+1)*2,t[3]=.25*v,t[0]=(p-f)/v,t[1]=(h-c)/v,t[2]=(l-d)/v):a>u&&a>m?(v=Math.sqrt(1+a-u-m)*2,t[3]=(p-f)/v,t[0]=.25*v,t[1]=(l+d)/v,t[2]=(h+c)/v):u>m?(v=Math.sqrt(1+u-a-m)*2,t[3]=(h-c)/v,t[0]=(l+d)/v,t[1]=.25*v,t[2]=(p+f)/v):(v=Math.sqrt(1+m-a-u)*2,t[3]=(l-d)/v,t[0]=(h+c)/v,t[1]=(p+f)/v,t[2]=.25*v),t}function KDe(t,e,r,o){var i=e[0],s=e[1],a=e[2],l=e[3],c=i+i,d=s+s,u=a+a,p=i*c,h=i*d,f=i*u,m=s*d,g=s*u,v=a*u,y=l*c,S=l*d,C=l*u,b=o[0],x=o[1],w=o[2];return t[0]=(1-(m+v))*b,t[1]=(h+C)*b,t[2]=(f-S)*b,t[3]=0,t[4]=(h-C)*x,t[5]=(1-(p+v))*x,t[6]=(g+y)*x,t[7]=0,t[8]=(f+S)*w,t[9]=(g-y)*w,t[10]=(1-(p+m))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function qDe(t,e,r,o,i){var s=e[0],a=e[1],l=e[2],c=e[3],d=s+s,u=a+a,p=l+l,h=s*d,f=s*u,m=s*p,g=a*u,v=a*p,y=l*p,S=c*d,C=c*u,b=c*p,x=o[0],w=o[1],k=o[2],T=i[0],A=i[1],E=i[2],F=(1-(g+y))*x,z=(f+b)*x,L=(m-C)*x,R=(f-b)*w,N=(1-(h+y))*w,V=(v+S)*w,W=(m+C)*k,me=(v-S)*k,ie=(1-(h+g))*k;return t[0]=F,t[1]=z,t[2]=L,t[3]=0,t[4]=R,t[5]=N,t[6]=V,t[7]=0,t[8]=W,t[9]=me,t[10]=ie,t[11]=0,t[12]=r[0]+T-(F*T+R*A+W*E),t[13]=r[1]+A-(z*T+N*A+me*E),t[14]=r[2]+E-(L*T+V*A+ie*E),t[15]=1,t}function YDe(t,e){var r=e[0],o=e[1],i=e[2],s=e[3],a=r+r,l=o+o,c=i+i,d=r*a,u=o*a,p=o*l,h=i*a,f=i*l,m=i*c,g=s*a,v=s*l,y=s*c;return t[0]=1-p-m,t[1]=u+y,t[2]=h-v,t[3]=0,t[4]=u-y,t[5]=1-d-m,t[6]=f+g,t[7]=0,t[8]=h+v,t[9]=f-g,t[10]=1-d-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XDe(t,e,r,o,i,s,a){var l=1/(r-e),c=1/(i-o),d=1/(s-a);return t[0]=s*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*c,t[6]=0,t[7]=0,t[8]=(r+e)*l,t[9]=(i+o)*c,t[10]=(a+s)*d,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*d,t[15]=0,t}function ZZ(t,e,r,o,i){var s=1/Math.tan(e/2),a;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(o-i),t[10]=(i+o)*a,t[14]=2*i*o*a):(t[10]=-1,t[14]=-2*o),t}var QDe=ZZ;function JDe(t,e,r,o,i){var s=1/Math.tan(e/2),a;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(o-i),t[10]=i*a,t[14]=i*o*a):(t[10]=-1,t[14]=-o),t}function ZDe(t,e,r,o){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(a+l),d=2/(i+s);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=-((a-l)*c*.5),t[9]=(i-s)*d*.5,t[10]=o/(r-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r/(r-o),t[15]=0,t}function eee(t,e,r,o,i,s,a){var l=1/(e-r),c=1/(o-i),d=1/(s-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+r)*l,t[13]=(i+o)*c,t[14]=(a+s)*d,t[15]=1,t}var eke=eee;function tke(t,e,r,o,i,s,a){var l=1/(e-r),c=1/(o-i),d=1/(s-a);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=d,t[11]=0,t[12]=(e+r)*l,t[13]=(i+o)*c,t[14]=s*d,t[15]=1,t}function rke(t,e,r,o){var i,s,a,l,c,d,u,p,h,f,m=e[0],g=e[1],v=e[2],y=o[0],S=o[1],C=o[2],b=r[0],x=r[1],w=r[2];return Math.abs(m-b)<Vn&&Math.abs(g-x)<Vn&&Math.abs(v-w)<Vn?YZ(t):(u=m-b,p=g-x,h=v-w,f=1/Math.hypot(u,p,h),u*=f,p*=f,h*=f,i=S*h-C*p,s=C*u-y*h,a=y*p-S*u,f=Math.hypot(i,s,a),f?(f=1/f,i*=f,s*=f,a*=f):(i=0,s=0,a=0),l=p*a-h*s,c=h*i-u*a,d=u*s-p*i,f=Math.hypot(l,c,d),f?(f=1/f,l*=f,c*=f,d*=f):(l=0,c=0,d=0),t[0]=i,t[1]=l,t[2]=u,t[3]=0,t[4]=s,t[5]=c,t[6]=p,t[7]=0,t[8]=a,t[9]=d,t[10]=h,t[11]=0,t[12]=-(i*m+s*g+a*v),t[13]=-(l*m+c*g+d*v),t[14]=-(u*m+p*g+h*v),t[15]=1,t)}function nke(t,e,r,o){var i=e[0],s=e[1],a=e[2],l=o[0],c=o[1],d=o[2],u=i-r[0],p=s-r[1],h=a-r[2],f=u*u+p*p+h*h;f>0&&(f=1/Math.sqrt(f),u*=f,p*=f,h*=f);var m=c*h-d*p,g=d*u-l*h,v=l*p-c*u;return f=m*m+g*g+v*v,f>0&&(f=1/Math.sqrt(f),m*=f,g*=f,v*=f),t[0]=m,t[1]=g,t[2]=v,t[3]=0,t[4]=p*v-h*g,t[5]=h*m-u*v,t[6]=u*g-p*m,t[7]=0,t[8]=u,t[9]=p,t[10]=h,t[11]=0,t[12]=i,t[13]=s,t[14]=a,t[15]=1,t}function oke(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ike(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function ske(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function tee(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function ake(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function lke(t,e,r,o){return t[0]=e[0]+r[0]*o,t[1]=e[1]+r[1]*o,t[2]=e[2]+r[2]*o,t[3]=e[3]+r[3]*o,t[4]=e[4]+r[4]*o,t[5]=e[5]+r[5]*o,t[6]=e[6]+r[6]*o,t[7]=e[7]+r[7]*o,t[8]=e[8]+r[8]*o,t[9]=e[9]+r[9]*o,t[10]=e[10]+r[10]*o,t[11]=e[11]+r[11]*o,t[12]=e[12]+r[12]*o,t[13]=e[13]+r[13]*o,t[14]=e[14]+r[14]*o,t[15]=e[15]+r[15]*o,t}function cke(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function dke(t,e){var r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],l=t[5],c=t[6],d=t[7],u=t[8],p=t[9],h=t[10],f=t[11],m=t[12],g=t[13],v=t[14],y=t[15],S=e[0],C=e[1],b=e[2],x=e[3],w=e[4],k=e[5],T=e[6],A=e[7],E=e[8],F=e[9],z=e[10],L=e[11],R=e[12],N=e[13],V=e[14],W=e[15];return Math.abs(r-S)<=Vn*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(o-C)<=Vn*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(i-b)<=Vn*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-x)<=Vn*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(a-w)<=Vn*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-k)<=Vn*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(c-T)<=Vn*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(d-A)<=Vn*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(u-E)<=Vn*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(p-F)<=Vn*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(h-z)<=Vn*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(f-L)<=Vn*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-R)<=Vn*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-N)<=Vn*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(v-V)<=Vn*Math.max(1,Math.abs(v),Math.abs(V))&&Math.abs(y-W)<=Vn*Math.max(1,Math.abs(y),Math.abs(W))}var uke=XZ,pke=tee;var Y1={};SD(Y1,{add:()=>vke,angle:()=>zke,bezier:()=>Ike,ceil:()=>bke,clone:()=>hke,copy:()=>mke,create:()=>ree,cross:()=>Eke,dist:()=>Kke,distance:()=>aee,div:()=>jke,divide:()=>see,dot:()=>dee,equals:()=>Vke,exactEquals:()=>Gke,floor:()=>yke,forEach:()=>Qke,fromValues:()=>fke,hermite:()=>Ake,inverse:()=>kke,len:()=>Yke,length:()=>nee,lerp:()=>_ke,max:()=>Ske,min:()=>Cke,mul:()=>Wke,multiply:()=>iee,negate:()=>Dke,normalize:()=>Pke,random:()=>Rke,rotateX:()=>Bke,rotateY:()=>Lke,rotateZ:()=>Oke,round:()=>xke,scale:()=>wke,scaleAndAdd:()=>Tke,set:()=>gke,sqrDist:()=>qke,sqrLen:()=>Xke,squaredDistance:()=>lee,squaredLength:()=>cee,str:()=>Hke,sub:()=>$ke,subtract:()=>oee,transformMat3:()=>Mke,transformMat4:()=>Fke,transformQuat:()=>Nke,zero:()=>Uke});function ree(){var t=new Pi(3);return Pi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function hke(t){var e=new Pi(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function nee(t){var e=t[0],r=t[1],o=t[2];return Math.hypot(e,r,o)}function fke(t,e,r){var o=new Pi(3);return o[0]=t,o[1]=e,o[2]=r,o}function mke(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function gke(t,e,r,o){return t[0]=e,t[1]=r,t[2]=o,t}function vke(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function oee(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function iee(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function see(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function bke(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function yke(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Cke(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Ske(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function xke(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function wke(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Tke(t,e,r,o){return t[0]=e[0]+r[0]*o,t[1]=e[1]+r[1]*o,t[2]=e[2]+r[2]*o,t}function aee(t,e){var r=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,o,i)}function lee(t,e){var r=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2];return r*r+o*o+i*i}function cee(t){var e=t[0],r=t[1],o=t[2];return e*e+r*r+o*o}function Dke(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function kke(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Pke(t,e){var r=e[0],o=e[1],i=e[2],s=r*r+o*o+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function dee(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Eke(t,e,r){var o=e[0],i=e[1],s=e[2],a=r[0],l=r[1],c=r[2];return t[0]=i*c-s*l,t[1]=s*a-o*c,t[2]=o*l-i*a,t}function _ke(t,e,r,o){var i=e[0],s=e[1],a=e[2];return t[0]=i+o*(r[0]-i),t[1]=s+o*(r[1]-s),t[2]=a+o*(r[2]-a),t}function Ake(t,e,r,o,i,s){var a=s*s,l=a*(2*s-3)+1,c=a*(s-2)+s,d=a*(s-1),u=a*(3-2*s);return t[0]=e[0]*l+r[0]*c+o[0]*d+i[0]*u,t[1]=e[1]*l+r[1]*c+o[1]*d+i[1]*u,t[2]=e[2]*l+r[2]*c+o[2]*d+i[2]*u,t}function Ike(t,e,r,o,i,s){var a=1-s,l=a*a,c=s*s,d=l*a,u=3*s*l,p=3*c*a,h=c*s;return t[0]=e[0]*d+r[0]*u+o[0]*p+i[0]*h,t[1]=e[1]*d+r[1]*u+o[1]*p+i[1]*h,t[2]=e[2]*d+r[2]*u+o[2]*p+i[2]*h,t}function Rke(t,e){e=e||1;var r=Ku()*2*Math.PI,o=Ku()*2-1,i=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=o*e,t}function Fke(t,e,r){var o=e[0],i=e[1],s=e[2],a=r[3]*o+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*o+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*o+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*o+r[6]*i+r[10]*s+r[14])/a,t}function Mke(t,e,r){var o=e[0],i=e[1],s=e[2];return t[0]=o*r[0]+i*r[3]+s*r[6],t[1]=o*r[1]+i*r[4]+s*r[7],t[2]=o*r[2]+i*r[5]+s*r[8],t}function Nke(t,e,r){var o=r[0],i=r[1],s=r[2],a=r[3],l=e[0],c=e[1],d=e[2],u=i*d-s*c,p=s*l-o*d,h=o*c-i*l,f=i*h-s*p,m=s*u-o*h,g=o*p-i*u,v=a*2;return u*=v,p*=v,h*=v,f*=2,m*=2,g*=2,t[0]=l+u+f,t[1]=c+p+m,t[2]=d+h+g,t}function Bke(t,e,r,o){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(o)-i[2]*Math.sin(o),s[2]=i[1]*Math.sin(o)+i[2]*Math.cos(o),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Lke(t,e,r,o){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(o)+i[0]*Math.cos(o),s[1]=i[1],s[2]=i[2]*Math.cos(o)-i[0]*Math.sin(o),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Oke(t,e,r,o){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(o)-i[1]*Math.sin(o),s[1]=i[0]*Math.sin(o)+i[1]*Math.cos(o),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function zke(t,e){var r=t[0],o=t[1],i=t[2],s=e[0],a=e[1],l=e[2],c=Math.sqrt(r*r+o*o+i*i),d=Math.sqrt(s*s+a*a+l*l),u=c*d,p=u&&dee(t,e)/u;return Math.acos(Math.min(Math.max(p,-1),1))}function Uke(t){return t[0]=0,t[1]=0,t[2]=0,t}function Hke(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Gke(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Vke(t,e){var r=t[0],o=t[1],i=t[2],s=e[0],a=e[1],l=e[2];return Math.abs(r-s)<=Vn*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-a)<=Vn*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(i-l)<=Vn*Math.max(1,Math.abs(i),Math.abs(l))}var $ke=oee,Wke=iee,jke=see,Kke=aee,qke=lee,Yke=nee,Xke=cee,Qke=function(){var t=ree();return function(e,r,o,i,s,a){var l,c;for(r||(r=3),o||(o=0),i?c=Math.min(i*r+o,e.length):c=e.length,l=o;l<c;l+=r)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],s(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}}();var bh={};SD(bh,{add:()=>rPe,ceil:()=>nPe,clone:()=>Jke,copy:()=>ePe,create:()=>uee,cross:()=>fPe,dist:()=>kPe,distance:()=>mee,div:()=>DPe,divide:()=>fee,dot:()=>hPe,equals:()=>xPe,exactEquals:()=>SPe,floor:()=>oPe,forEach:()=>APe,fromValues:()=>Zke,inverse:()=>uPe,len:()=>EPe,length:()=>vee,lerp:()=>mPe,max:()=>sPe,min:()=>iPe,mul:()=>TPe,multiply:()=>hee,negate:()=>dPe,normalize:()=>pPe,random:()=>gPe,round:()=>aPe,scale:()=>lPe,scaleAndAdd:()=>cPe,set:()=>tPe,sqrDist:()=>PPe,sqrLen:()=>_Pe,squaredDistance:()=>gee,squaredLength:()=>bee,str:()=>CPe,sub:()=>wPe,subtract:()=>pee,transformMat4:()=>vPe,transformQuat:()=>bPe,zero:()=>yPe});function uee(){var t=new Pi(4);return Pi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Jke(t){var e=new Pi(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Zke(t,e,r,o){var i=new Pi(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=o,i}function ePe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function tPe(t,e,r,o,i){return t[0]=e,t[1]=r,t[2]=o,t[3]=i,t}function rPe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function pee(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function hee(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function fee(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function nPe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function oPe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function iPe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function sPe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function aPe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function lPe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function cPe(t,e,r,o){return t[0]=e[0]+r[0]*o,t[1]=e[1]+r[1]*o,t[2]=e[2]+r[2]*o,t[3]=e[3]+r[3]*o,t}function mee(t,e){var r=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.hypot(r,o,i,s)}function gee(t,e){var r=e[0]-t[0],o=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return r*r+o*o+i*i+s*s}function vee(t){var e=t[0],r=t[1],o=t[2],i=t[3];return Math.hypot(e,r,o,i)}function bee(t){var e=t[0],r=t[1],o=t[2],i=t[3];return e*e+r*r+o*o+i*i}function dPe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function uPe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function pPe(t,e){var r=e[0],o=e[1],i=e[2],s=e[3],a=r*r+o*o+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=o*a,t[2]=i*a,t[3]=s*a,t}function hPe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function fPe(t,e,r,o){var i=r[0]*o[1]-r[1]*o[0],s=r[0]*o[2]-r[2]*o[0],a=r[0]*o[3]-r[3]*o[0],l=r[1]*o[2]-r[2]*o[1],c=r[1]*o[3]-r[3]*o[1],d=r[2]*o[3]-r[3]*o[2],u=e[0],p=e[1],h=e[2],f=e[3];return t[0]=p*d-h*c+f*l,t[1]=-(u*d)+h*a-f*s,t[2]=u*c-p*a+f*i,t[3]=-(u*l)+p*s-h*i,t}function mPe(t,e,r,o){var i=e[0],s=e[1],a=e[2],l=e[3];return t[0]=i+o*(r[0]-i),t[1]=s+o*(r[1]-s),t[2]=a+o*(r[2]-a),t[3]=l+o*(r[3]-l),t}function gPe(t,e){e=e||1;var r,o,i,s,a,l;do r=Ku()*2-1,o=Ku()*2-1,a=r*r+o*o;while(a>=1);do i=Ku()*2-1,s=Ku()*2-1,l=i*i+s*s;while(l>=1);var c=Math.sqrt((1-a)/l);return t[0]=e*r,t[1]=e*o,t[2]=e*i*c,t[3]=e*s*c,t}function vPe(t,e,r){var o=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*o+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*o+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*o+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*o+r[7]*i+r[11]*s+r[15]*a,t}function bPe(t,e,r){var o=e[0],i=e[1],s=e[2],a=r[0],l=r[1],c=r[2],d=r[3],u=d*o+l*s-c*i,p=d*i+c*o-a*s,h=d*s+a*i-l*o,f=-a*o-l*i-c*s;return t[0]=u*d+f*-a+p*-c-h*-l,t[1]=p*d+f*-l+h*-a-u*-c,t[2]=h*d+f*-c+u*-l-p*-a,t[3]=e[3],t}function yPe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function CPe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function SPe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function xPe(t,e){var r=t[0],o=t[1],i=t[2],s=t[3],a=e[0],l=e[1],c=e[2],d=e[3];return Math.abs(r-a)<=Vn*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-l)<=Vn*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=Vn*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-d)<=Vn*Math.max(1,Math.abs(s),Math.abs(d))}var wPe=pee,TPe=hee,DPe=fee,kPe=mee,PPe=gee,EPe=vee,_Pe=bee,APe=function(){var t=uee();return function(e,r,o,i,s,a){var l,c;for(r||(r=4),o||(o=0),i?c=Math.min(i*r+o,e.length):c=e.length,l=o;l<c;l+=r)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],s(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}}();var Nn={};SD(Nn,{add:()=>NPe,angle:()=>tEe,ceil:()=>BPe,clone:()=>IPe,copy:()=>FPe,create:()=>yee,cross:()=>KPe,dist:()=>dEe,distance:()=>wee,div:()=>cEe,divide:()=>xee,dot:()=>jPe,equals:()=>iEe,exactEquals:()=>oEe,floor:()=>LPe,forEach:()=>hEe,fromValues:()=>RPe,inverse:()=>$Pe,len:()=>sEe,length:()=>Dee,lerp:()=>qPe,max:()=>zPe,min:()=>OPe,mul:()=>lEe,multiply:()=>See,negate:()=>VPe,normalize:()=>WPe,random:()=>YPe,rotate:()=>eEe,round:()=>UPe,scale:()=>HPe,scaleAndAdd:()=>GPe,set:()=>MPe,sqrDist:()=>uEe,sqrLen:()=>pEe,squaredDistance:()=>Tee,squaredLength:()=>kee,str:()=>nEe,sub:()=>aEe,subtract:()=>Cee,transformMat2:()=>XPe,transformMat2d:()=>QPe,transformMat3:()=>JPe,transformMat4:()=>ZPe,zero:()=>rEe});function yee(){var t=new Pi(2);return Pi!=Float32Array&&(t[0]=0,t[1]=0),t}function IPe(t){var e=new Pi(2);return e[0]=t[0],e[1]=t[1],e}function RPe(t,e){var r=new Pi(2);return r[0]=t,r[1]=e,r}function FPe(t,e){return t[0]=e[0],t[1]=e[1],t}function MPe(t,e,r){return t[0]=e,t[1]=r,t}function NPe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Cee(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function See(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function xee(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function BPe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function LPe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function OPe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function zPe(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function UPe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function HPe(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function GPe(t,e,r,o){return t[0]=e[0]+r[0]*o,t[1]=e[1]+r[1]*o,t}function wee(t,e){var r=e[0]-t[0],o=e[1]-t[1];return Math.hypot(r,o)}function Tee(t,e){var r=e[0]-t[0],o=e[1]-t[1];return r*r+o*o}function Dee(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function kee(t){var e=t[0],r=t[1];return e*e+r*r}function VPe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function $Pe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function WPe(t,e){var r=e[0],o=e[1],i=r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function jPe(t,e){return t[0]*e[0]+t[1]*e[1]}function KPe(t,e,r){var o=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=o,t}function qPe(t,e,r,o){var i=e[0],s=e[1];return t[0]=i+o*(r[0]-i),t[1]=s+o*(r[1]-s),t}function YPe(t,e){e=e||1;var r=Ku()*2*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function XPe(t,e,r){var o=e[0],i=e[1];return t[0]=r[0]*o+r[2]*i,t[1]=r[1]*o+r[3]*i,t}function QPe(t,e,r){var o=e[0],i=e[1];return t[0]=r[0]*o+r[2]*i+r[4],t[1]=r[1]*o+r[3]*i+r[5],t}function JPe(t,e,r){var o=e[0],i=e[1];return t[0]=r[0]*o+r[3]*i+r[6],t[1]=r[1]*o+r[4]*i+r[7],t}function ZPe(t,e,r){var o=e[0],i=e[1];return t[0]=r[0]*o+r[4]*i+r[12],t[1]=r[1]*o+r[5]*i+r[13],t}function eEe(t,e,r,o){var i=e[0]-r[0],s=e[1]-r[1],a=Math.sin(o),l=Math.cos(o);return t[0]=i*l-s*a+r[0],t[1]=i*a+s*l+r[1],t}function tEe(t,e){var r=t[0],o=t[1],i=e[0],s=e[1],a=Math.sqrt(r*r+o*o)*Math.sqrt(i*i+s*s),l=a&&(r*i+o*s)/a;return Math.acos(Math.min(Math.max(l,-1),1))}function rEe(t){return t[0]=0,t[1]=0,t}function nEe(t){return"vec2("+t[0]+", "+t[1]+")"}function oEe(t,e){return t[0]===e[0]&&t[1]===e[1]}function iEe(t,e){var r=t[0],o=t[1],i=e[0],s=e[1];return Math.abs(r-i)<=Vn*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=Vn*Math.max(1,Math.abs(o),Math.abs(s))}var sEe=Dee,aEe=Cee,lEe=See,cEe=xee,dEe=wee,uEe=Tee,pEe=kee,hEe=function(){var t=yee();return function(e,r,o,i,s,a){var l,c;for(r||(r=2),o||(o=0),i?c=Math.min(i*r+o,e.length):c=e.length,l=o;l<c;l+=r)t[0]=e[l],t[1]=e[l+1],s(t,t,a),e[l]=t[0],e[l+1]=t[1];return e}}();var fEe=hr.create();function fn(){return hr.identity(fEe)}var hI=hr.create(),mEe=bh.create();function qu(t=0,e=0,r=0,o=0){return bh.set(mEe,t,e,r,o)}var EZe=Y1.create();var gEe=Nn.create();function Ei(t=0,e=0){return Nn.set(gEe,t,e)}var Kl=class{constructor(e,r={ignoreDevicePixelRatio:!1,invertTargetTransform:!0}){this.target=e;this.opts=r;this.onFreeMove=()=>{};this.downEvents=new Map;this.handleDown=e=>{let r=Hu(e)?e.pointerId:0;this.downEvents.set(r,!0)};this.handleMove=e=>{let r=Hu(e)?e.pointerId:0;if(this.downEvents.has(r))return;let o=this.target.getBoundingClientRect(),i=this.opts.invertTargetTransform?o.left:0,s=this.opts.invertTargetTransform?o.top:0,a=this.opts.ignoreDevicePixelRatio?1:window.devicePixelRatio;this.onFreeMove({x:(e.x-i)*a,y:(e.y-s)*a})};this.handleUp=e=>{let r=Hu(e)?e.pointerId:0;this.downEvents.delete(r)};window.onpointerdown!==void 0?(e.addEventListener("pointerdown",this.handleDown),window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleUp)):(e.addEventListener("mousedown",this.handleDown),window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))}unbind(){window.onpointerdown!==void 0?(this.target.removeEventListener("pointerdown",this.handleDown),window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleUp)):(this.target.removeEventListener("mousedown",this.handleDown),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp))}};var w4=class{constructor(e){this.target=e;this.pointerCount=2;this.downEvents=new Map;this.pointers=new Map;this.onDown=e=>{var o,i;let r=this.screenToTarget(e);this.pointers.size<this.pointerCount&&e.pointerType==="touch"&&((o=this.onAcceptDown)==null?void 0:o.call(this,r))&&(this.downEvents.set(e.pointerId,r),this.pointers.set(e.pointerId,r),this.pointerCount===this.pointers.size&&((i=this.onPointersReady)==null||i.call(this,this.sortedEvents())))};this.onMove=e=>{var s;if(!this.pointers.has(e.pointerId))return;let r=this.screenToTarget(e),o=this.downEvents.get(e.pointerId),i=this.pointers.get(e.pointerId);r.prev=i,i&&(r.dx=r.x-i.x,r.dy=r.y-i.y),r.down=o,this.pointers.set(e.pointerId,r),this.pointers.size===this.pointerCount&&((s=this.onPointersMove)==null||s.call(this,this.sortedEvents()))};this.onUp=e=>{var r;!this.pointers.has(e.pointerId)||(this.downEvents.delete(e.pointerId),this.pointers.delete(e.pointerId),this.pointers.size===0&&((r=this.onPointersGone)==null||r.call(this)))};this.onCancel=e=>{var r;!this.pointers.has(e.pointerId)||(this.downEvents.delete(e.pointerId),this.pointers.delete(e.pointerId),this.pointers.size===0&&((r=this.onPointersGone)==null||r.call(this)))};e.addEventListener("pointerdown",this.onDown),window.addEventListener("pointermove",this.onMove),window.addEventListener("pointerup",this.onUp),window.addEventListener("pointercancel",this.onCancel)}sortedEvents(){return Array.from(this.pointers).sort((e,r)=>e[0]-r[0]).map(e=>e[1])}unbind(){this.target.removeEventListener("pointerdown",this.onDown),window.removeEventListener("pointermove",this.onMove),window.removeEventListener("pointerup",this.onUp),window.removeEventListener("pointercancel",this.onCancel)}screenToTarget(e){return{x:e.x,y:e.y,dx:0,dy:0,timestamp:Date.now(),totalMovementX:0,totalMovementY:0,original:e,button:void 0,buttons:void 0,coalescedPoints:void 0}}};var T4=class{constructor(e){this.engine=e;this.singleResponders=[];this.processor=new Mn(this.engine.canvas,{ignoreDevicePixelRatio:!0,invertTargetTransform:!1});this.freeProcessor=new Kl(this.engine.canvas,{ignoreDevicePixelRatio:!0,invertTargetTransform:!1});this.multiTouchProc=new w4(this.engine.canvas);this.pointerEventQueue=[];this.multiTouchEventQueue=[];this.onAcceptTouchDown=e=>{let r=i=>i.responder.canAcceptMultiTouch(2),o=this.engine.root.findObjectUnderPoint(e.x,e.y,r);return o?this.multiTraget?this.multiTraget===o.responder:(this.multiTraget=o.responder,!0):!1};this.processor.onSingle=(r,o)=>{this.pointerEventQueue.push([r,o])},this.multiTouchProc.onAcceptDown=this.onAcceptTouchDown,this.multiTouchProc.onPointersReady=r=>{this.multiTouchEventQueue.push(["ready",r])},this.multiTouchProc.onPointersMove=r=>{this.multiTouchEventQueue.push(["move",r])},this.multiTouchProc.onPointersGone=()=>{this.multiTouchEventQueue.push(["gone",[]])},this.freeProcessor.onFreeMove=r=>{this.freeMovePos=r}}close(){this.processor.unbind(),this.freeProcessor.unbind(),this.multiTouchProc.unbind()}dispatchPointerEvents(){var e,r;for(let[o,i]of this.pointerEventQueue){if(o==="down"){let s=this.engine.root.getGestureTargetUnderPoint(i.x,i.y);s&&this.add(s.responder)}for(let s of this.singleResponders)s.handlePointerEvent(o,i);o==="up"&&this.clear()}for(let[o,i]of this.multiTouchEventQueue)(e=this.multiTraget)==null||e.handleMultiTouchEvent(o,i),o==="gone"&&(this.multiTraget=void 0);if(this.freeMovePos){let{x:o,y:i}=this.freeMovePos,s=c=>c.cursor!=null,a=this.engine.root.findObjectUnderPoint(o,i,s),l=(r=a==null?void 0:a.cursor)!=null?r:"default";this.engine.canvas.style.cursor=l}this.freeMovePos=void 0,this.pointerEventQueue.splice(0),this.multiTouchEventQueue.splice(0)}add(e){this.singleResponders.push(e)}clear(){this.singleResponders.splice(0)}},D4=class{constructor(e){this.view=e;this.list=[]}gestureRecognizers(){return this.list}hasGestureRecognizer(){return this.list.length>0}addGestureRecognizer(e){this.list.includes(e)||this.list.push(e)}removeGestureRecognizer(e){let r=this.list.indexOf(e);this.list.splice(r,1)}canAcceptMultiTouch(e){return this.list.some(r=>{var i,s;return((s=(i=r.acceptPointerCount)==null?void 0:i.call(r))!=null?s:1)>=e})}handlePointerEvent(e,r){for(let o of this.list)o.handlePointerEvent(e,r,this.view)}handleMultiTouchEvent(e,r){var o,i,s;for(let a of this.list)((i=(o=a.acceptPointerCount)==null?void 0:o.call(a))!=null?i:1)>=r.length&&((s=a.handleMultiTouchEvent)==null||s.call(a,e,r,this.view))}};var _r=class{constructor(){this.bounds={x:0,y:0,width:0,height:0};this.scaleX=1;this.scaleY=1;this.x=0;this.y=0;this.z=0;this.alpha=1;this.rotation=0;this.visible=!0;this.hitTestEnabled=!0;this._children=[];this._mtx=hr.create();this.responder=new D4(this);this.finalMtxCache=hr.create();this._initialized=!1;this.mMtxCache=hr.create()}get parent(){return this._parent}addChild(...e){for(let r of e)this.addChildAt(r,this._children.length)}addChildAt(e,r){if(e.removeFromParent(),e._parent=this,this._children.splice(r,0,e),!!this.initialized)for(let o of e.tree())o.initialized||o.init(this.engine)}removeChild(e){let r=this._children.indexOf(e);r>-1&&(this._children.splice(r,1),e._parent=void 0)}clearChildren(){for(let e of this._children)this.removeChild(e);this._children=[]}removeFromParent(){var e;(e=this._parent)==null||e.removeChild(this)}setChildIndex(e,r){let o=this._children.indexOf(e);o<0||(this._children.splice(o,1),this._children.splice(r,0,e))}sortChildren(e){this._children.sort(e)}getChildIndex(e){return this._children.indexOf(e)}indexInParent(){return this.parent?this.parent.getChildIndex(this):-1}*toRoot(){yield this,this.parent&&(yield*this.parent.toRoot())}*tree(){yield this;for(let e of this._children)yield*e.tree()}*filterTree(e){e(this)&&(yield this);for(let r of this._children)yield*r.filterTree(e)}get children(){return this._children}setMtx(e){this.scaleX=e[0],this.scaleY=e[5],this.x=e[12],this.y=e[13],this.z=e[14]}selfMtx(e=this._mtx){return hr.set(e,this.scaleX,0,0,0,0,this.scaleY,0,0,0,0,1,0,this.x,this.y,this.z,1),hr.rotateZ(e,e,this.rotation),e}modelViewMtx(e){let r=this.engine.camera.vMtx,o=this.rootToSelfModelMtx(e);return hr.mul(e,r,o)}rootToParentModelMtx(e){let r=this;for(;r=r.parent;)hr.mul(e,r.selfMtx(),e);return e}rootToSelfModelMtx(e){return hr.mul(e,this.rootToParentModelMtx(e),this.selfMtx())}boundsInScreen(e){return this.engine.camera.worldToScreenBounds(e,qu(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),this.rootToSelfModelMtx(fn()))}getObjectUnderPoint(e,r){return this.findObjectUnderPoint(e,r)}getGestureTargetUnderPoint(e,r){return this.findObjectUnderPoint(e,r,o=>o.responder.hasGestureRecognizer())}findObjectUnderPoint(e,r,o=()=>!0){if(!!this.visible){for(let i=this._children.length-1;i>=0;i--){let a=this._children[i].findObjectUnderPoint(e,r,o);if(a&&o(a))return a}if(o(this)&&this.hitTest(e,r))return this}}hitTest(e,r){if(!this.visible||!this.hitTestEnabled||this.bounds.width*this.bounds.height==0)return!1;let o=fn(),i=qu(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);this.engine.camera.worldToScreenBounds(i,i,this.rootToSelfModelMtx(o));let s=i[0],a=i[1],l=s+i[2],c=a+i[3];return s<=e&&e<l&&a<=r&&r<c}get initialized(){return this._initialized}get engine(){if(!this._engine)throw new Error("no engine. not initialzied yet");return this._engine}get camera(){return this.engine.camera}init(e){var r;this._initialized||(this._engine=e,(r=this.initInternal)==null||r.call(this,e),this._initialized=!0)}update(){}render({globalAlpha:e,vpMtx:r,mMtx:o}){var i;if(this.visible){this.engine.statManager.frame.numRenderedNodes++;let s=this.selfMtx(),a=o,l=hr.mul(this.mMtxCache,o,s);e*=this.alpha,(i=this.renderInternal)==null||i.call(this,{vpMtx:r,globalAlpha:e,mMtx:{toParent:a,toSelf:l}});for(let c of this._children)c.render({globalAlpha:e,vpMtx:r,mMtx:l})}}};var Od=class extends _r{constructor(){super(...arguments);this._children=[]}get children(){return this._children}addChild(...e){super.addChild(...e)}addChildAt(e,r){super.addChildAt(e,r)}removeChild(e){super.removeChild(e)}setChildIndex(e,r){super.setChildIndex(e,r)}getChildIndex(e){return super.getChildIndex(e)}sortChildren(e){this._children.sort(e)}};var Pee=`#version 300 es
in vec3 pos;
out vec4 color;
uniform mat4 uViewProjMtx;
uniform mat4 uModelMtx;
uniform vec4 uColor;

void main() {
  gl_Position = uViewProjMtx * uModelMtx * vec4(pos, 1);
  color = uColor;
}
`;var Eee=`#version 300 es
precision highp float;
in vec4 color;
out vec4 outColor;
uniform float uGlobalAlpha;
void main() {
  outColor = color;
  outColor.a *= uGlobalAlpha;
}
`;var _ee=`#version 300 es

uniform mat4 uViewProjMtx;
uniform mat4 uModelMtx;
out vec2 vTexcoord;

vec2[4] vertices =  vec2[](
  vec2(-0.5, 0.5),
  vec2(0.5, 0.5),
  vec2(0.5, -0.5),
  vec2(-0.5, -0.5)
);

vec2[4] uvs = vec2[](
  vec2(0, 1),
  vec2(1, 1),
  vec2(1, 0),
  vec2(0, 0)
);

int[6] indices = int[](
  0, 1, 3, 1, 2, 3
);

void main() {
  int i = indices[gl_VertexID];
  gl_Position = uViewProjMtx * uModelMtx * vec4(vertices[i], 0, 1);
  vTexcoord = uvs[i];
}
`;var Aee=`#version 300 es
precision mediump float;

in vec2 vTexcoord;
uniform sampler2D uTexture;
uniform vec4 uClip;
uniform float uGlobalAlpha;
out vec4 outColor;

void main() {
  float l = uClip.x;
  float t = uClip.y;
  float w = uClip.z;
  float h = uClip.w;
  if (l > vTexcoord.x || vTexcoord.x > l+w || t > vTexcoord.y || vTexcoord.y > t +h) {
    discard;
  } else {
    outColor = texture(uTexture, vTexcoord);
    outColor.a *= uGlobalAlpha;
  }
}
`;var Iee=`#version 300 es

uniform mat4 uViewProjMtx;
uniform mat4 uModelMtx;
uniform vec4 uColor;
out vec4 color;

vec2[4] vertices =  vec2[](
  vec2(-0.5, 0.5),
  vec2(0.5, 0.5),
  vec2(0.5, -0.5),
  vec2(-0.5, -0.5)
);

int[6] indices = int[](
  0, 1, 3, 1, 2, 3
);

void main() {
  int i = indices[gl_VertexID];
  gl_Position = uViewProjMtx * uModelMtx * vec4(vertices[i], 0, 1);
  color = uColor;
}
`;var Ree=`#version 300 es
in vec3 pos;
in vec3 dir; // xy => dir, z => is outer(1/0)

out vec4 color;
uniform mat4 uViewProjMtx;
uniform mat4 uModelMtx;
uniform mat4 uSelfMtx;
uniform float uWidth;
uniform vec4 uColor;
// Closed Path\u306E\u5834\u5408\u3001\u7DDA\u3092\u5916\u3001\u4E2D\u3001\u5185\u306E\u3069\u3053\u306B\u914D\u7F6E\u3059\u308B\u304B
// outer = 1, center = 0, inner = -1
uniform float uAlign;

void main() {
  vec4 selfPos = uSelfMtx * vec4(pos, 1);
  float outerSig = dir.z;
  float fact = 1.0;
  if (uAlign != 0.0 && outerSig != 0.0) {
    fact = abs(uAlign + outerSig);
  }
  vec2 sDir = fact * dir.xy * uWidth * 0.5;
  vec4 finalWorld = vec4(selfPos.xy + sDir, selfPos.z, 1);
  gl_Position = uViewProjMtx * uModelMtx * finalWorld;
  color = uColor;
}
`;var Bc={basic:{vert:Pee,frag:Eee},image:{vert:_ee,frag:Aee},quad:{vert:Iee},line:{vert:Ree}};var wEe=(t,e)=>t===e,fI=Symbol("none");function _i(t,e=wEe){let r,o=fI;return(...i)=>{if(o===fI)o=t.apply(null,i);else for(let s=0;s<i.length;s++)if(!e(r[s],i[s])){o=t.apply(null,i);break}return r=i,o}}function ii(t){let e=_i(t),r;return(...o)=>{let i=e.apply(null,o);r!==i&&(r==null||r(),r=i)}}function Fee(t){let e=fI;return r=>e===fI?e=t(r):e}var Hee=X(Oee());var na=class{constructor(e=0,r=0){this.x=0;this.y=0;typeof e=="number"?(this.x=e,this.y=r):(this.x=e.x,this.y=e.y)}static from(e){return new na(e.x,e.y)}clone(){return new na(this.x,this.y)}add(e){return this.x+=e.x,this.y+=e.y,this}added(e){return new na(this.x+e.x,this.y+e.y)}sub(e){return this.x-=e.x,this.y-=e.y,this}subbed(e){return new na(this.x-e.x,this.y-e.y)}dot(e){return this.x*e.x+this.y*e.y}rotated(e){let r=this.clone();return r.rotate(e),r}rotate(e){let r=Math.sin(e),o=Math.cos(e),[i,s]=[this.x*o-this.y*r,this.x*r+this.y*o];return this.x=i,this.y=s,this}normalize(){return this.scale(1/this.magnitude()),this}normalized(){let e=this.clone();return e.normalize(),e}scale(e,r=e){return this.x*=e,this.y*=r,this}scaled(e,r=e){let o=this.clone();return o.scale(e,r),o}magnitude(){return Math.hypot(this.x,this.y)}middleOf(e){return new na((this.x+e.x)/2,(this.y+e.y)/2)}angle(){return Math.atan2(this.y,this.x)}point(){return{x:this.x,y:this.y}}};function Ua(t){zEe(t);let e=[],r=[],o=0;for(let i=0;i<t.length;i++){let s=t[i],a=s.vertices[0].data.length/s.vertices[0].size;for(let l=0;l<s.vertices.length;l++){let c=s.vertices[l];r[l]||(r[l]={data:[],size:s.vertices[l].size}),r[l].data=r[l].data.concat(c.data)}e=e.concat(s.indices.map(l=>l+o)),o+=a}return{vertices:r,indices:e}}function zEe(t){let e=t[0],r=e.vertices.length,o=e.vertices.map(i=>i.size);for(let i=0;i<t.length;i++){let s=t[i];UEe(s);let a=s.vertices.length;if(r!=a)throw new Error("slot count mismatch");for(let l=0;l<s.vertices.length;l++)if(o[l]!==s.vertices[l].size)throw new Error(`vertex size[${l}] mismatch at [${i}]`)}}function UEe(t){let e=t.vertices[0].data.length/t.vertices[0].size;if(!Number.isInteger(e))throw new Error("insufficient vertices");for(let r of t.vertices){let o=r.data.length/r.size;if(e!==o)throw new Error("vertex count mismatch")}}function zee(t,e,r){let o=t.reduce((u,p)=>u+p,0),i=0,s=o,a=new Uee,l=0,c=0,d=(u,p)=>{let h=0,f=0;for(;h<u&&f<p;h++,f++)a.add(i+h,s+f);for(;h<u;h++)a.addOuter(i+h);for(;f<p;f++)a.addInner(s+f);i+=u,s+=p};for(;l<t.length&&c<e.length;l++,c++)d(t[l],e[c]);for(;l<t.length;l++)d(t[l],e[c]);for(;c<e.length;c++)d(t[l],e[c]);return r&&a.add(0,o),a.get()}function A4(t){let e=[];for(let r=1;r<t-1;r++)e.push(0,r,r+1);return e}var Uee=class{constructor(){this.out=[];this.inn=[];this.indices=[]}addOuter(e){this.out.push(e),this.commit()}addInner(e){this.inn.push(e),this.commit()}add(e,r){this.out.push(e),this.inn.push(r),this.commit()}commit(){let{out:e,inn:r}=this,[o,i]=[e.length,r.length];if(o===0||i===0||o+i<3)return;let s=0,a=0;for(;s<o-1&&a<i-1;s++,a++)this.indices.push(e[s],e[s+1],r[a],e[s+1],r[a],r[a+1]);for(;s<o-1;s++)this.indices.push(e[s],e[s+1],r[a]);for(;a<i-1;a++)this.indices.push(e[s],r[a],r[a+1]);this.out=this.out.slice(-1),this.inn=this.inn.slice(-1)}get(){return this.commit(),this.indices}};var I4={inner:-1,center:0,outer:1};function yI(t){let e=Sf(t,o=>[o.x,o.y,0]),r=(0,Hee.default)(e,[],3);return{vertices:[{data:e,size:3}],indices:r}}var R4=t=>[t.pos.x,t.pos.y,0],F4=t=>[t.dir.x,t.dir.y,t.outerSig];function Gee({points:t,cap:e,join:r,width:o,align:i="center",startVec:s,endVec:a}){let l=o/2,{body:c,capEnd:d,capStart:u}=Vee({points:t,cap:e,join:r,startVec:s,endVec:a}),p=[],h=I4[i],f=m=>{let g=[];for(let v=0;v<m.positions.length;v+=3){let y=m.positions[v]+m.directions[v]*l,S=m.positions[v+1]+m.directions[v+1]*l,C=m.positions[v+2],b=m.directions[v+2],x=1;h!==0&&b!==0&&(x=Math.abs(h+b)),g.push(y*x,S*x,C)}p.push({vertices:[{data:g,size:3}],indices:m.indices})};return f(c),u&&f(u),d&&f(d),Ua(p)}function CI({points:t,cap:e="butt",join:r="miter",startVec:o,endVec:i}){let{body:s,capEnd:a,capStart:l}=Vee({points:t,cap:e,join:r,startVec:o,endVec:i}),c=[],d=u=>{c.push({vertices:[{data:u.positions,size:3},{data:u.directions,size:3}],indices:u.indices})};return d(s),l&&d(l),a&&d(a),Ua(c)}function Vee({points:t,cap:e="butt",join:r="miter",startVec:o,endVec:i}){let s=e==="close",l=GEe(t)<0?-1:1,c=s?1:0,d=$ee({points:t,join:r,close:s,sig:l,outerSig:c,startVec:o,endVec:i}),u=$ee({points:t,join:r,close:s,sig:-l,outerSig:-c,startVec:o,endVec:i}),p=pu(d.concat(u)),h=Sf(p,R4),f=Sf(p,F4),m=zee(d.map(S=>S.length),u.map(S=>S.length),e==="close"),g={body:{positions:h,directions:f,indices:m}},v,y;if(e!=="close"){let S=new na(t[0]),C=new na(t[t.length-1]),b=o?S.added(o):t[1],x=i?C.subbed(i):t[t.length-2];v=Wee({edge:S,next:b,cap:e}),y=Wee({edge:C,next:x,cap:e})}return v&&(g.capStart={positions:Sf(v,R4),directions:Sf(v,F4),indices:A4(v.length)}),y&&(g.capEnd={positions:Sf(y,R4),directions:Sf(y,F4),indices:A4(y.length)}),g}function $ee({points:t,join:e,sig:r,outerSig:o,startVec:i,endVec:s,close:a=!1}){let l=[],c=t.length,d=(u,p,h)=>{let[f,m]=SI(u,p,r),[g,v]=SI(p,h,r),y=HEe(f,m,g,v);if(y){let S=f.subbed(m).magnitude(),C=y.subbed(f).magnitude();if(e==="miter"||C<S){let b=y.subbed(p);l.push([{pos:p,dir:b,outerSig:o}])}else if(e==="bevel")l.push([{pos:p,dir:m.subbed(p).point(),outerSig:o},{pos:p,dir:g.subbed(p).point(),outerSig:o}]);else if(e==="round"){let b=m.subbed(p),x=g.subbed(p),w=b.angle(),k=x.angle();Math.abs(k-w)>Math.PI&&(k+=Math.PI*2);let T=xI({startAngle:w,endAngle:k,radius:1,segment:3}),A=[];for(let E of T)A.push({pos:p,dir:E,outerSig:o});l.push(A)}}else{let S=m.subbed(p).point();l.push([{pos:p,dir:S,outerSig:o}])}};for(let u=1;u<c-1;u++){let p=t[u-1],h=t[u],f=t[u+1];d(p,h,f)}if(a&&c>2)d(t[c-2],t[c-1],t[0]),d(t[c-1],t[0],t[1]);else{let u=(y,S)=>{let C=S.subbed(y).point();return{pos:y,dir:C,outerSig:o}},p=new na(t[0]),h=new na(t[c-1]),f=i?p.added(i):t[1],m=s?h.subbed(s):t[c-2],[g]=SI(p,f,r);l.unshift([u(t[0],g)]);let v=SI(m,h,r);l.push([u(t[c-1],v[1])])}return l}function SI(t,e,r){let o=new na(t),i=new na(e),a=i.subbed(o).rotated(r*Math.PI/2).normalize(),l=o.added(a),c=i.added(a);return[l,c]}function xI({startAngle:t,endAngle:e,segment:r,anticlockwise:o,radius:i,includeStart:s=!0,includeEnd:a=!0,cx:l=0,cy:c=0}){let d=e-t;o&&(d*=-1);let u=[],p=s?0:1,h=a?r:r-1;for(let f=p;f<=h;f++){let m=f*d/r,g=l+i*Math.cos(t+m),v=c+i*Math.sin(t+m);u.push({x:g,y:v})}return u}function HEe(t,e,r,o){let i=(t.x-e.x)*(o.y-r.y)-(o.x-r.x)*(t.y-e.y);if(i===0)return;let s=((o.y-r.y)*(o.x-e.x)+(r.x-o.x)*(o.y-e.y))/i,a=s*t.x+(1-s)*e.x,l=s*t.y+(1-s)*e.y;return new na(a,l)}function Wee({edge:t,next:e,cap:r}){if(r==="butt")return[];if(r==="square"){let i=new na(t.x-e.x,t.y-e.y).normalized(),s=i.rotated(-Math.PI/2);return[{pos:t,dir:s.point(),outerSig:0},{pos:t,dir:i.added(s).point(),outerSig:0},{pos:t,dir:i.added(s.scaled(-1)).point(),outerSig:0},{pos:t,dir:s.scaled(-1).point(),outerSig:0}]}else{let i=new na(t.x-e.x,t.y-e.y).rotated(-Math.PI/2).angle();return xI({startAngle:i,endAngle:i+Math.PI,radius:1,segment:6}).map(a=>({pos:t,dir:a,outerSig:0}))}}function GEe(t){let e=0,r=(...o)=>{let[i,s,a]=o,l=Math.atan2(s.y-i.y,s.x-i.x);e+=Math.atan2(a.y-s.y,a.x-s.x)-l};for(let o=0;o<t.length-2;o++){let i=t[o],s=t[o+1],a=t[o+2];r(i,s,a)}return r(t[t.length-2],t[t.length-1],t[0]),e}var ys=class extends _r{constructor(){super(...arguments);this.width=1;this.color=[0,0,0,1];this.aligment="center";this.program=null;this.posLocation=null;this.dirLocation=null;this.viewProjMtxLoc=null;this.modelMtxLoc=null;this.selfMtxLocation=null;this.colorLocation=null;this.widthLocation=null;this.alignLocation=null;this.globalAlphaLocation=null;this.vao=_i((e,r,o,i)=>{if(!(!e||r==null||o==null))return e.createVao([r,o])});this.modelEffect=ii((e,r)=>{if(!!r)return()=>e.deleteVertexArray(r)});this.invalidation=0}static init({programManager:e}){e.compile({name:"line",vert:Bc.line.vert,frag:Bc.basic.frag})}initInternal({gl:e,programManager:r}){let o=r.get("line");this.posLocation=e.getAttribLocation(o,"pos"),this.dirLocation=e.getAttribLocation(o,"dir"),this.viewProjMtxLoc=e.getUniformLocation(o,"uViewProjMtx"),this.modelMtxLoc=e.getUniformLocation(o,"uModelMtx"),this.selfMtxLocation=e.getUniformLocation(o,"uSelfMtx"),this.colorLocation=e.getUniformLocation(o,"uColor"),this.widthLocation=e.getUniformLocation(o,"uWidth"),this.alignLocation=e.getUniformLocation(o,"uAlign"),this.globalAlphaLocation=e.getUniformLocation(o,"uGlobalAlpha"),this.program=o}setModel(e,r=!1){r&&this.invalidation++,this.model=e}renderInternal({globalAlpha:e,vpMtx:r,mMtx:o}){let i=this.vao(this.model,this.posLocation,this.dirLocation,this.invalidation),{gl:s}=this.engine;if(this.modelEffect(s,i),!i||!this.model)return;let a=this.model.indexCount;s.useProgram(this.program),s.uniformMatrix4fv(this.viewProjMtxLoc,!1,r),s.uniformMatrix4fv(this.modelMtxLoc,!1,o.toParent),s.uniformMatrix4fv(this.selfMtxLocation,!1,this.selfMtx()),s.uniform4fv(this.colorLocation,this.color),s.uniform1f(this.widthLocation,this.width),s.uniform1f(this.alignLocation,I4[this.aligment]),s.uniform1f(this.globalAlphaLocation,e),s.bindVertexArray(i),s.drawElements(s.TRIANGLES,a,s.UNSIGNED_SHORT,0),s.useProgram(null),s.bindVertexArray(null)}};var pl=class extends _r{constructor(){super(...arguments);this.viewProjMtxLoc=null;this.modelMtxLoc=null;this.colorLocation=null;this.posLocation=null;this.globalAlphaLocation=null;this.color=[0,0,0,1];this.vao=_i((e,r)=>{if(!(!e||r==null))return e.createVao([r])});this.indexCount=_i(e=>{var r;return(r=e==null?void 0:e.indexCount)!=null?r:0});this.modelEffect=ii((e,r)=>{if(!!r)return()=>e.deleteVertexArray(r)})}static init({programManager:e}){e.compile({name:"polygon",vert:Bc.basic.vert,frag:Bc.basic.frag})}initInternal({gl:e,programManager:r}){let o=r.get("polygon");this.viewProjMtxLoc=e.getUniformLocation(o,"uViewProjMtx"),this.modelMtxLoc=e.getUniformLocation(o,"uModelMtx"),this.colorLocation=e.getUniformLocation(o,"uColor"),this.posLocation=e.getAttribLocation(o,"pos"),this.globalAlphaLocation=e.getUniformLocation(o,"uGlobalAlpha")}renderInternal({globalAlpha:e,vpMtx:r,mMtx:o}){let{gl:i,programManager:s}=this.engine,a=this.vao(this.model,this.posLocation),l=this.indexCount(this.model);if(this.modelEffect(i,a),!a)return;let c=s.get("polygon");i.useProgram(c),i.uniformMatrix4fv(this.viewProjMtxLoc,!1,r),i.uniformMatrix4fv(this.modelMtxLoc,!1,o.toSelf),i.uniform4fv(this.colorLocation,this.color),i.uniform1f(this.globalAlphaLocation,e),i.bindVertexArray(a),i.drawElements(i.TRIANGLES,l,i.UNSIGNED_SHORT,0),i.useProgram(null),i.bindVertexArray(null)}};var yh=class extends _r{constructor(e=0,r=0){super();this.color=[1,1,1,1];this.sizeMtx=hr.create();this.program=null;this.viewProjMtxLoc=null;this.modelMtxLoc=null;this.colorLocation=null;this.globalAlphaLocation=null;this.width=e,this.height=r}get width(){return this.sizeMtx[0]}set width(e){this.sizeMtx[0]=e,this.bounds.x=-e/2,this.bounds.width=e}get height(){return this.sizeMtx[5]}set height(e){this.sizeMtx[5]=e,this.bounds.y=-e/2,this.bounds.height=e}static init({programManager:e}){e.compile({name:"quad",vert:Bc.quad.vert,frag:Bc.basic.frag})}initInternal({gl:e,programManager:r}){let o=r.get("quad");this.program=o,this.viewProjMtxLoc=e.getUniformLocation(o,"uViewProjMtx"),this.modelMtxLoc=e.getUniformLocation(o,"uModelMtx"),this.colorLocation=e.getUniformLocation(o,"uColor"),this.globalAlphaLocation=e.getUniformLocation(o,"uGlobalAlpha")}renderInternal({globalAlpha:e,mMtx:r,vpMtx:o}){let{gl:i}=this.engine;hr.mul(this.finalMtxCache,r.toSelf,this.sizeMtx),i.useProgram(this.program),i.uniformMatrix4fv(this.viewProjMtxLoc,!1,o),i.uniformMatrix4fv(this.modelMtxLoc,!1,this.finalMtxCache),i.uniform4fv(this.colorLocation,this.color),i.uniform1f(this.globalAlphaLocation,e),i.drawArrays(i.TRIANGLES,0,6),i.useProgram(null)}};function VEe(t){return t instanceof HTMLVideoElement?[t.videoWidth,t.videoHeight]:[t.width,t.height]}var Lc=class extends _r{constructor(e){super();this.image=e;this.program=null;this.texLocation=null;this.viewProjMtxLoc=null;this.modelMtxLoc=null;this.clipLocation=null;this.globalAlphaLocation=null;this.sizeMtx=hr.create();this.imageEffector=ii((e,r,o,i)=>{if(!r||!o)return;let{gl:s,textureManager:a}=e,l=a.get(r);s.bindTexture(s.TEXTURE_2D,l),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,o),s.generateMipmap(s.TEXTURE_2D),s.bindTexture(s.TEXTURE_2D,null)});this._clipRect=[0,0,1,1];this.invalidation=0;e&&this.setImage(e)}static init({programManager:e}){e.compile({name:"image",vert:Bc.image.vert,frag:Bc.image.frag})}get clipRect(){return this._clipRect}setClipRect(e,r,o,i){this._clipRect[0]=e,this._clipRect[1]=r,this._clipRect[2]=o,this._clipRect[3]=i}setImage(e,r=!1){let[o,i]=VEe(e);this.width=o,this.height=i,this.image=e,r&&this.invalidation++}get width(){return this.sizeMtx[0]}set width(e){this.sizeMtx[0]=e,this.bounds.x=-e/2,this.bounds.width=e}get height(){return this.sizeMtx[5]}set height(e){this.sizeMtx[5]=e,this.bounds.y=-e/2,this.bounds.height=e}initInternal(e){let{gl:r,textureManager:o,programManager:i}=e,s=i.get("image");this.program=s,this.texLocation=r.getUniformLocation(s,"uTexture"),this.viewProjMtxLoc=r.getUniformLocation(s,"uViewProjMtx"),this.modelMtxLoc=r.getUniformLocation(s,"uModelMtx"),this.clipLocation=r.getUniformLocation(s,"uClip"),this.globalAlphaLocation=r.getUniformLocation(s,"uGlobalAlpha"),this.textureId=o.register()}renderInternal({globalAlpha:e,mMtx:r,vpMtx:o}){let{gl:i,textureManager:s}=this.engine;if(this.imageEffector(this.engine,this.textureId,this.image,this.invalidation),!this.image)return;hr.mul(this.finalMtxCache,r.toSelf,this.sizeMtx);let a=s.get(this.textureId);i.useProgram(this.program),i.bindTexture(i.TEXTURE_2D,a),i.activeTexture(i.TEXTURE0),i.uniform1i(this.texLocation,0),i.uniformMatrix4fv(this.viewProjMtxLoc,!1,o),i.uniformMatrix4fv(this.modelMtxLoc,!1,this.finalMtxCache),i.uniform4fv(this.clipLocation,this._clipRect),i.uniform1f(this.globalAlphaLocation,e),i.drawArrays(i.TRIANGLES,0,6),i.useProgram(null),i.bindTexture(i.TEXTURE_2D,null)}};var M4=class{constructor(e){this.engine=e}frameBegin(e){this.engine.frameBegin(e)}beforeUpdate(){this.engine.statManager.frame.phaseBegin("beforeUpdate"),this.engine.beforeUpdate(),this.engine.statManager.frame.phaseEnd("beforeUpdate")}update(){this.engine.statManager.frame.phaseBegin("update"),this.engine.update(),this.engine.statManager.frame.phaseEnd("update")}render(){this.engine.statManager.frame.phaseBegin("render"),this.engine.render(),this.engine.statManager.frame.phaseEnd("render")}frameEnd(){this.engine.frameEnd()}};function jee(t,e,r,o,i){let s=Math.min(e[0],r[0],o[0],i[0]),a=Math.min(e[1],r[1],o[1],i[1]),l=Math.max(e[0],r[0],o[0],i[0]),c=Math.max(e[1],r[1],o[1],i[1]);return bh.set(t,s,a,l-s,c-a)}var Z1=class{constructor(e){this.pool=[];for(let r=0;r<e;r++)this.pool.push(this.create())}use(e){if(e>=this.pool.length)throw new Error("pool range error: "+e);return this.init(this.pool[e])}},eb=class extends Z1{create(){return hr.create()}init(e){return hr.identity(e)}};var eT=class extends Z1{create(){return Nn.create()}init(e){return Nn.zero(e)}},N4=class extends Z1{create(){return{width:0,height:0}}init(e){return e.width=0,e.height=0,e}},B4=class extends Z1{create(){return Hn()}init(e){return e.left=0,e.top=0,e.bottom=0,e.right=0,e}};var L4=class{constructor(e){this.pMtx=hr.create();this.vMtx=hr.create();this.screenToCanvasMtx=hr.create();this.canvasToScreenMtx=hr.create();this.mat4Pool=new eb(2);this.vec2Pool=new eT(4);this.updateViewport(e)}updateViewport(e){this.pMtx=$Ee(this.pMtx,e.width,e.height);let{left:r,top:o,width:i,height:s}=e.getBoundingClientRect();this.screenToCanvasMtx[0]=e.width/i,this.screenToCanvasMtx[5]=e.height/s,this.screenToCanvasMtx[12]=-r,this.screenToCanvasMtx[13]=-o,hr.invert(this.canvasToScreenMtx,this.screenToCanvasMtx)}screenToCanvasPoint(e,r,o){return Nn.set(e,r,o),Nn.transformMat4(e,e,this.screenToCanvasMtx)}screenToCanvasTransform(){return this.screenToCanvasMtx}screenToCanvasScale(){return this.screenToCanvasMtx[0]}screenToWorldPoint(e,r,o){let i=this.screenToWorldTransform(this.mat4Pool.use(0),o);return Nn.transformMat4(e,r,i)}screenToWorldScale(e,r){let o=this.mat4Pool.use(0);return this.screenToWorldTransform(o,r),Nn.set(e,o[0],o[5])}screenToWorldTransform(e,r){return hr.invert(e,this.worldToScreenTransform(e,r))}worldToScreenPoint(e,r,o){let i=this.worldToScreenTransform(this.mat4Pool.use(0),o);return Nn.transformMat4(e,r,i)}worldToScreenScale(e,r){let o=this.worldToScreenTransform(this.mat4Pool.use(0),r);return Nn.set(e,o[0],o[5])}worldToScreenBounds(e,r,o){let i=r[0],s=r[1],a=i+r[2],l=s+r[3],c=Nn.set(this.vec2Pool.use(0),i,s),d=Nn.set(this.vec2Pool.use(1),a,s),u=Nn.set(this.vec2Pool.use(2),i,l),p=Nn.set(this.vec2Pool.use(3),a,l),h=this.worldToScreenTransform(this.mat4Pool.use(0),o);return Nn.transformMat4(c,c,h),Nn.transformMat4(d,d,h),Nn.transformMat4(u,u,h),Nn.transformMat4(p,p,h),jee(e,c,d,u,p)}worldToScreenTransform(e,r){return hr.mul(e,this.vMtx,r),hr.mul(e,this.canvasToScreenMtx,e),e}get zoom(){return this.vMtx[0]}set zoom(e){this.vMtx[0]=e,this.vMtx[5]=e}get tx(){return this.vMtx[12]}set tx(e){this.vMtx[12]=e}get ty(){return this.vMtx[13]}set ty(e){this.vMtx[13]=e}};function $Ee(t,e,r){let o=2/e,i=-2/r,s=-1,a=1;return hr.set(t,o,0,0,0,0,i,0,0,0,0,1,0,s,a,0,1)}function Kee(t,e){let{drawElements:r,drawArrays:o,bufferData:i,bufferSubData:s,texImage2D:a,texSubImage2D:l,bindTexture:c}=t;return t.drawElements=function(d,u,p,h){r.call(t,d,u,p,h),e.statManager.frame.numDrawCall+=1,d===t.TRIANGLES&&(e.statManager.frame.numTriangles+=u/3)},t.drawArrays=function(d,u,p){o.call(t,d,u,p),e.statManager.frame.numDrawCall+=1,d===t.TRIANGLES&&(e.statManager.frame.numTriangles+=p/3)},t.bindTexture=function(d,u){c.call(t,d,u),u&&e.statManager.frame.useTexture(u)},t}function O4(t,e,r){let o=t.createShader(e);if(!o)throw new Error("failed to createShader");if(t.shaderSource(o,r),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;let s=t.getShaderInfoLog(o);throw t.deleteShader(o),new Error("Shader Compilation Error: "+s)}function qee(t,e){let r=t.createProgram();if(!r)throw new Error("failed to createProgram");if(e.forEach(s=>t.attachShader(r,s)),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS))return r;let i="Program Link Error: "+t.getProgramInfoLog(r);throw t.deleteProgram(r),new Error(i)}var z4=class{constructor(e){this.gl=e;this.programs=new Map}compile({name:e,vert:r,frag:o}){let{gl:i}=this;this.programs.set(e,new Yee(i,r,o))}get(e){let r=this.programs.get(e);if(!r)throw new Error("no progrram for: "+e);return r.prog}close(){for(let[e,r]of this.programs)r.destroy(this.gl)}},Yee=class{constructor(e,r,o){this.vertShader=O4(e,e.VERTEX_SHADER,r),this.fragShader=O4(e,e.FRAGMENT_SHADER,o),this.prog=qee(e,[this.vertShader,this.fragShader])}destroy(e){e.deleteShader(this.vertShader),e.deleteShader(this.fragShader),e.deleteProgram(this.prog)}};var U4=class{constructor(){this.frame=new Zee;this.engine=new Xee;this.recorder=new Jee}start(e){this.recorder.frame(e),this.frame.start()}end(){this.frame.end(),this.frame.record(this.recorder),this.frame.reset()}},Xee=class{},Qee=class{constructor(e){this.unit=e;this.values=[]}add(e){this.values.push(e)}calc(){let r=this.values.reduce((i,s)=>i+s,0)/this.values.length,o=Math.sqrt(this.values.reduce((i,s)=>i+(s-r))/this.values.length);return{avg:r,std:o,unit:this.unit,values:this.values}}},Jee=class{constructor(){this.records=new Map;this.frameCount=0;this.elapsedTime=0;this.frameTimes=[]}add(e,r,o){var i;this.records.has(e)||this.records.set(e,new Qee(o)),(i=this.records.get(e))==null||i.add(r)}clear(){this.records.clear(),this.frameCount=0,this.frameTimes=[]}calc(){let e=new Map;for(let[r,o]of this.records)e.set(r,o.calc());return e}frame(e){var i,s;let r=e-((i=this.prevTime)!=null?i:e),o=this.elapsedTime+r;if(this.frameCount+=1,this.frameTimes.push(r),o>1e3){this.elapsedTime=o%1e3;let a=this.calc();(s=this.onFps)==null||s.call(this,{fps:this.frameCount,frameTimes:this.frameTimes,records:a.entries()}),this.clear()}else this.elapsedTime=o;this.prevTime=e}},Zee=class{constructor(){this.numUpdatedNodes=0;this.numRenderedNodes=0;this.numDrawCall=0;this.numTriangles=0;this.textureRefs=new Map;this.startTime=0;this.endTime=0;this.phases=[]}get textureCount(){return this.textureRefs.size}get time(){return this.endTime-this.startTime}start(){this.reset(),this.startTime=performance.now()}end(){this.endTime=performance.now()}phaseBegin(e){this.phases.push(e),performance.mark("s-"+e)}phaseEnd(e){performance.mark("e-"+e)}useTexture(e){this.textureRefs.set(e)}reset(){this.numDrawCall=0,this.numTriangles=0,this.numUpdatedNodes=0,this.numRenderedNodes=0,this.textureRefs.clear(),this.phases=[],performance.clearMarks()}record(e){let{numDrawCall:r,numUpdatedNodes:o,numTriangles:i,numRenderedNodes:s,time:a}=this;e.add("Draw Calls",r,"count"),e.add("Fases",i,"count"),e.add("Updated Nodes",o,"count"),e.add("Rendered Nodes",s,"count"),e.add("Textures",this.textureCount,"count"),e.add("CPU Time",a,"time-ms");for(let l of this.phases){let c=`phase:${l}`;performance.measure(c,"s-"+l,"e-"+l);let u=performance.getEntriesByName(c)[0];e.add(`phase:${l}`,u.duration,"time-ms")}performance.clearMarks(),performance.clearMeasures()}};var H4=class{constructor(e){this.target=e;this.name="";this.closed=!1}schedule(){if(console.log(`[scheculer:${this.name}]scheduled`),this.closed)throw new Error(`[scheduler:${this.name}] already closed`);this.cancel();let e=r=>{if(this.closed){this.finalize();return}this.timer!==void 0&&(this.target.frameBegin(r),this.target.beforeUpdate(),this.target.update(),this.target.render(),this.target.frameEnd(),this.timer=requestAnimationFrame(e))};this.timer=requestAnimationFrame(e)}cancel(){this.timer!=null&&(console.log(`[scheculer:${this.name}]cancelled`),cancelAnimationFrame(this.timer),this.timer=void 0)}close(e){this.cancel(),this.finalizer=e,this.closed=!0}finalize(){var e;(e=this.finalizer)==null||e.call(this),this.finalizer=void 0}};var WEe=[yh,Lc,pl,ys],bC=class{constructor(e,r={}){this.canvas=e;this.root=new Od;this.mat4Pool=new eb(2);this._deltaTime=0;this.lazyClose=()=>{this.gestuerManager.close(),this.modelManager.close(),this.textureManager.close(),this.programManager.close(),console.log(`[engine:${this.name}] closing end`)};var a,l;let o=e.getContext("webgl2");if(!o)throw new Error("failed to get webgl2 context");this.gl=Kee(o,this),this.camera=new L4(e),this.programManager=new z4(o),this.textureManager=new TI(o),this.modelManager=new wI(o),this.statManager=new U4,this.gestuerManager=new T4(this);let i=(a=r.classes)!=null?a:[];WEe.concat(i).forEach(c=>c.init(this)),this.root.init(this);let s=r.debug?new M4(this):this;this.scheduler=new H4(s),this.name=(l=r.name)!=null?l:""}get deltaTime(){return this._deltaTime}start(){this.scheduler.schedule()}pause(){this.scheduler.cancel()}frameBegin(e){var r;this._deltaTime=e-((r=this.prevTime)!=null?r:e),this.statManager.start(e),this.prevTime=e}beforeUpdate(){this.camera.updateViewport(this.canvas),this.gestuerManager.dispatchPointerEvents()}update(){for(let e of this.root.tree())e.update(),this.statManager.frame.numUpdatedNodes++}render(){let{gl:e}=this;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,this.canvas.width,this.canvas.height);let r=hr.mul(this.mat4Pool.use(0),this.camera.pMtx,this.camera.vMtx),o=this.mat4Pool.use(1);this.root.render({globalAlpha:1,vpMtx:r,mMtx:o})}frameEnd(){this.statManager.end()}close(){this.scheduler.close(this.lazyClose),console.log(`[engine:${this.name}] closed`)}};var G4=class{constructor(e){this.name=e;this._models=[]}get models(){return this._models}addModel(e,r){this._models.push({zoom:e,model:r}),this._models.sort((o,i)=>o.zoom-i.zoom)}select(e){if(this._models.length===0)throw new Error("no model registered: "+this.name);for(let r=this._models.length-1;r>=0;r--){let o=this._models[r];if(o.zoom<=e)return o.model}return this._models[0].model}};var V4=class{constructor(e,r,o){this.gl=e;let i=e.createBuffer();if(!i)throw new Error("create buffer error");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.indices),e[o]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this._indexCount=r.indices.length;let s=[];for(let a of r.vertices){let l=e.createBuffer();if(!l)throw new Error("create buffer error");e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a.data),e[o]),e.bindBuffer(e.ARRAY_BUFFER,null),s.push({buffer:l,size:a.size})}this._vertexCount=r.vertices[0].data.length/r.vertices[0].size,this.ibo=i,this.vbos=s}get vertexCount(){return this._vertexCount}get indexCount(){return this._indexCount}updateData(e){let{gl:r}=this;for(let o=0;o<e.vertices.length;o++){let i=e.vertices[o],{buffer:s}=this.vbos[o];r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferSubData(r.ARRAY_BUFFER,0,new Float32Array(i.data)),r.bindBuffer(r.ARRAY_BUFFER,null)}r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.ibo),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,new Uint16Array(e.indices)),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),this._vertexCount=e.vertices[0].data.length/e.vertices[0].size,this._indexCount=e.indices.length}createVao(e){let r=this.gl,o=r.createVertexArray();if(!o)throw new Error("createVertexArray error");r.bindVertexArray(o);for(let i=0;i<e.length;i++){let s=e[i],a=this.vbos[i];r.bindBuffer(r.ARRAY_BUFFER,a.buffer),r.enableVertexAttribArray(s),r.vertexAttribPointer(s,a.size,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,null)}return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.ibo),r.bindVertexArray(null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),o}destroy(){this.vbos.forEach(e=>this.gl.deleteBuffer(e.buffer)),this.gl.deleteBuffer(this.ibo)}};var wI=class{constructor(e){this.gl=e;this.models=new Map;this.lodGroups=new Map}register(e,r,o="STATIC_DRAW"){let i=new V4(this.gl,r,o);return this.models.set(e,i),i}unregister(e){let r=this.models.get(e);!r||(this.models.delete(e),r.destroy())}get(e){let r=this.models.get(e);if(!r)throw new Error("no model registered for: "+e);return r}has(e){return this.models.has(e)}registerLod({name:e,minZoom:r,level:o,data:i}){let s=this.lodGroups.get(e);s||(s=new G4(e),this.lodGroups.set(e,s));let a=`${e}-level-${o}`;this.register(a,i),s.addModel(r,a)}selectLod(e,r){let o=this.lodGroups.get(e);if(!o)throw new Error("no lod group registered: "+e);let i=o.select(r);return this.get(i)}close(){for(let[e,r]of this.models)r.destroy()}};var TI=class{constructor(e){this.gl=e;this.textures=new Map;this.ids=1}register(){let{gl:e}=this,r=e.createTexture();if(!r)throw new Error("gl.createTexture() error");e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.bindTexture(e.TEXTURE_2D,null);let o=this.ids++;return this.textures.set(o,r),o}unregister(e){let r=this.textures.get(e);r&&(this.textures.delete(e),this.gl.deleteTexture(r))}get(e){let r=this.textures.get(e);if(!r)throw new Error("no texture registered");return r}close(){for(let[e]of this.textures)this.unregister(e)}};var DI=class{constructor({from:e,to:r,duration:o,easing:i}){this.elapsed=0;this.value=e,this.duration=o,this.from=e,this.to=r,this.easing=i}get finished(){return this.elapsed>=this.duration}current(){return this.value}update(e){return this.elapsed+=e,this.elapsed>=this.duration?this.value=this.to:this.value=this.easing(this.elapsed,this.duration,this.to-this.from,this.from),this.value}};var tT=class{constructor(){this._animations=new Map}set(e,r){this._animations.set(e,r)}get(e){return this._animations.get(e)}delete(e){this._animations.delete(e)}has(e){return this._animations.has(e)}update(e){for(let[r,o]of this._animations){if(o.finished){this._animations.delete(r);continue}o.update(e)}}animations(){return this._animations.entries()}};var ete=class{constructor(e,r){this.longPress=e;this.doubleClick=r}start(e){this.stop(),this.timer=setTimeout(()=>{e(this)},Mx)}stop(){clearTimeout(this.timer)}},tb=class{constructor(e){this.dispatcher=e;this.upCount=0;this.pendingEvents=[];this.handleSingle=(e,r)=>{e==="move"?this.move(r):e==="down"?this.down(r):this.up(r)};this.handleDoubleMove=(e,r)=>{this.abandonLongPress(),this.onDoubleMove&&this.onDoubleMove(e,r)};this.onLongPressTimer=e=>r=>{var o;this.longPressTimer=void 0,this.upCount===0&&r.longPress&&((o=this.onLongPress)==null?void 0:o.call(this,e))?this.pendingEvents=[]:this.sendPendingEvents()}}abandonLongPress(){this.stopTimer(),this.sendPendingEvents()}down(e){if(this.longPressTimer)this.pendingEvents.push({type:"down",ev:e});else{this.upCount=0;let r=this.dispatcher.shouldHandleLongPress(e),o=this.dispatcher.shouldHandleDoubleClick(e);(r||o)&&(this.longPressTimer=new ete(r,o),this.longPressTimer.start(this.onLongPressTimer(e))),this.sendPendingEvents(),this.send({type:"down",ev:e})}}move(e){this.longPressTimer?Fc(e)>5?(this.stopTimer(),this.sendPendingEvents(),this.send({type:"move",ev:e})):this.pendingEvents.push({type:"move",ev:e}):(this.sendPendingEvents(),this.send({type:"move",ev:e}))}up(e){let r={type:"up",ev:e};this.longPressTimer?(this.upCount++,this.longPressTimer.doubleClick&&this.onDoubleClick?this.upCount===1?this.pendingEvents.push(r):this.upCount===2&&(this.stopTimer(),this.onDoubleClick(e)?this.pendingEvents=[]:(this.sendPendingEvents(),this.send(r)),this.upCount=0):(this.stopTimer(),this.send(r),this.pendingEvents=[],this.upCount=0)):(this.stopTimer(),this.sendPendingEvents(),this.send({type:"up",ev:e}),this.upCount=0)}stopTimer(){this.longPressTimer&&(this.longPressTimer.stop(),this.longPressTimer=void 0)}send(e){var r;(r=this.onSingle)==null||r.call(this,e.type,e.ev)}sendPendingEvents(){this.pendingEvents.forEach(e=>{this.send(e)}),this.pendingEvents=[]}};var zd=class{constructor(){this.swipeThreshTime=500;this.pinchRecorder=new tte;this.onSingle=(e,r)=>{var i,s,a,l;if(e==="down"){(i=this.onDown)==null||i.handleDownGesture(r,this.view);return}let o=this.onTap!=null;if(this.onPan&&(!o||!uo(r))&&this.onPan.handlePanGesture(r,e==="up",this.view),e==="up"){if(o&&uo(r)&&((s=this.onTap)==null||s.handleTapGesture(r,this.view)),this.onSwipe){let c=Gu(r,this.swipeThreshTime/1e3);c.x!=0&&c.y!=0&&((a=this.onSwipe)==null||a.handleSwipeGesture(c.x,c.y,this.view))}(l=this.onUp)==null||l.handleUpGesture(r,this.view)}};this.router=new tb(this),this.router.onDoubleClick=e=>{var r;return(r=this.onDoubleTap)==null||r.handleDoubleTapGesture(e,this.view),!0},this.router.onLongPress=e=>{var r;return(r=this.onLongPress)==null||r.handleLongPressGesture(e,this.view),!0},this.router.onSingle=this.onSingle}shouldHandleLongPress(){return this.onLongPress!=null}shouldHandleDoubleClick(){return this.onDoubleTap!=null}handlePointerEvent(e,r,o){this.view=o,this.router.handleSingle(e,r)}acceptPointerCount(){return this.onPinch!=null?2:1}handleMultiTouchEvent(e,r,o){var i;this.pinchRecorder.handleMultiTouch(e,r,o),(i=this.onPinch)==null||i.handlePinchGesture(this.pinchRecorder,e==="gone",o)}},tte=class{constructor(){this.pivot=Nn.create();this.vec2Pool=new eT(2);this.dist=1;this.zoom=1;this.tx=0;this.ty=0}handleMultiTouch(e,r,o){let[i,s]=r;if(e==="ready"||e==="move"){let a=o.camera.screenToCanvasPoint(this.vec2Pool.use(0),i.x,i.y),l=o.camera.screenToCanvasPoint(this.vec2Pool.use(1),s.x,s.y),c=a[0]+(l[0]-a[0])/2,d=a[1]+(l[1]-a[1])/2,u=Math.hypot(s.x-i.x,s.y-i.y);if(e==="move"){let p=u/this.dist,h=c-this.pivot[0],f=d-this.pivot[1];this.zoom=p,this.tx=-c*p+c+h,this.ty=-d*p+d+f}Nn.set(this.pivot,c,d),this.dist=u}e==="gone"&&(this.zoom=1,this.tx=0,this.ty=0)}};function Yu(t,e){Oc(e,t)}function Oc({r:t,g:e,b:r,a:o},i=[]){return i[0]=t/255,i[1]=e/255,i[2]=r/255,i[3]=o/255,i}var $4=[Re(-.5,.5),Re(.5,.5),Re(.5,-.5),Re(-.5,-.5)];var rb=class{constructor(e,r){this.cardView=e;this.grouped=r}handlePanGesture({dx:e,dy:r},o,i){let{card:s,callback:a}=this.cardView,l=tC(s);if(!l)return;let c=i.camera.screenToWorldScale(Ei(),i.rootToParentModelMtx(fn()));e*=c[0],r*=c[1];let d=l.position.x+e,u=l.position.y+r;this.grouped||l.isFolded?a.onGroupMoved(l,{pos:{x:d,y:u},delta:{x:e,y:r}},o):a.onCardMoved(l,{x:d,y:u},o)}},rT=class{constructor(e,r){this.cardView=e;this.grouped=r;this.longHoverDetector=new Wv(500);this.shrinkManager=new $v;this.moveTarget=this.cardView.card}handlePointerEvent(e,r,o){var d,u;let{card:i,callback:s,rootView:a}=this.cardView,l=Ei(r.x,r.y);o.camera.screenToWorldPoint(l,l,o.rootToParentModelMtx(fn()));let c={x:l[0],y:l[1]};if(e==="down"){let p=(d=tC(i))!=null?d:i,h=this.grouped||p.isFolded;this.shrinkManager.heldUp({card:p,grouped:h}),this.moveTarget=p,a.note.bringCardTreeToFront(p,h);for(let f of p.parentsIterator())a.note.bringCardTreeToFront(f,!1);s.onCardHeld(p,h)}else if(e==="move"){for(let p of a.note.bubblingOrderIterator())if(_l(p.bounds,this.moveTarget.bounds)&&!this.moveTarget.isDescendantOf(p.id)){let h=o.camera.screenToWorldScale(Ei(),o.rootToParentModelMtx(fn()))[0],f=nC({cardHolder:a.note,card:this.moveTarget,desktopScale:h,forHitTest:!0,pivot:c});uC({nextHover:f,pivot:c,desktopScale:h,shrinkManager:this.shrinkManager,longHoverDetector:this.longHoverDetector,onHoverChanged:s.onHoverCard}),this.hoverCard=f==null?void 0:f.card}}else if(e==="up"){let p=this.grouped||this.moveTarget.isFolded;uo(r)||this.rebuildTreeStateIfNeeded({card:this.moveTarget,hoverCardId:(u=this.hoverCard)==null?void 0:u.id,pointer:c,grouped:p}),s.onCardHeld(void 0,p),this.longHoverDetector.clear(),this.shrinkManager.release(),this.hoverCard=void 0,this.moveTarget=i}}rebuildTreeStateIfNeeded(e){var a;let{card:r,hoverCardId:o,pointer:i,grouped:s=!1}=e;if(o!==((a=r.parent)==null?void 0:a.id)){let l=this.shrinkManager.scale;this.cardView.callback.treeStateChanged(r,o,s,{scale:l,pivot:i})}}},W4=class{constructor(e,r){this.card=e;this.callback=r}handleTapGesture(){this.card.groupMemberCount()>1&&this.callback.onGroupStateChanged(this.card,!this.card.isFolded)}},j4=class{constructor(e){this.view=e}handleLongPressGesture(){let e=this.view.card,r=this.view.boundsForPopoverInScreen(qu());this.view.callback.onShowBoundingBox(e,nt(r[0],r[1],r[2],r[3]))}};function rte(t,e){let r=t.x,o=t.y,i=t.x+t.width,s=t.y+t.height,a=t.x+t.width/2,l=t.y+t.height/2;switch(e){case"bbLeftBottom":return[r,s];case"bbRightBottom":return[i,s];case"bbLeftTop":return[r,o];case"bbRightTop":return[i,o];case"bbCenterTop":return[a,o];case"bbCenterBottom":return[a,s];case"bbRightMiddle":return[i,l];case"bbLeftMiddle":return[r,l]}}var K4=class{constructor(e,r){this.cardView=e;this.corner=r;this.mx=0;this.my=0}handlePointerEvent(e,r,o){let{card:i,callback:s,rootView:a}=this.cardView;if(e==="down")this.startBounds=nt(i.bounds),this.startContentSizeWithMargins=Ze(i.contentSizeWithMargins),this.mx=0,this.my=0;else{let l=o.camera.screenToWorldScale(Ei(),o.rootToParentModelMtx(fn()));this.mx+=r.dx*l[0],this.my+=r.dy*l[1];let c=rte(this.startBounds,this.corner),d=o.camera.worldToScreenScale(Ei(),a.rootToSelfModelMtx(fn()))[0];s.onContentMarginsChanged(ZP({card:i,point:{x:c[0]+this.mx,y:c[1]+this.my},corner:this.corner,committed:e==="up",startBounds:this.startBounds,startContentWithMargins:this.startContentSizeWithMargins,zoom:d}))}}},q4=class{constructor(e,r){this.cardView=e;this.corner=r;this.mx=0;this.my=0}handlePointerEvent(e,r,o){let{card:i,callback:s,rootView:a}=this.cardView;if(e==="down")this.startBounds=nt(i.bounds),this.mx=0,this.my=0;else{let l=o.camera.screenToWorldScale(Ei(),o.rootToParentModelMtx(fn()));this.mx+=r.dx*l[0],this.my+=r.dy*l[1];let c=rte(this.startBounds,this.corner),d=o.camera.worldToScreenScale(Ei(),a.rootToSelfModelMtx(fn()))[0];s.onCardSizesChanged(JP({card:i,point:{x:c[0]+this.mx,y:c[1]+this.my},corner:this.corner,grouped:i.isFolded,committed:e==="up",startBounds:this.startBounds,zoom:d}))}}},nT=class{constructor(e,r,o,i){this.tree=e;this.card=r;this.callback=o;this.handleDown=i}handlePointerEvent(e,r){let o=Ei(r.x,r.y),i=this.tree.screenToNoteTransform(fn()),[s,a]=Nn.transformMat4(o,o,i),l={x:s,y:a};if(this.handleDown&&e==="down"&&this.card.hasNextCardOrGroup&&this.callback.onConnectorDisconnected(this.card),this.callback.onConnectorMoved(this.card,l,e==="up"),e==="up"){let c=uo(r);this.onConnectorUp({from:this.card,worldPos:l,ignoreFoldHandle:c,isClick:c})}}onConnectorUp(e){let{from:r,worldPos:o,ignoreFoldHandle:i,isClick:s}=e,{parent:a}=r,l=[...this.tree.note.renderingOrderIterator()].filter(d=>{let u=d.parent;return a&&u?a.id===u.id:a===u}),c=new ft;for(let d=l.length-1;d>=0;d--){let u=l[d];if(Dt(u,this.callback).onConnectorUp({pt:o,from:r,root:void 0,ignoreFoldHandle:i,focused:!1,mtx:c,isClick:s}))break}this.callback.onConnectorDismissed(r)}},oT=class{constructor(e){this.view=e}handleTapGesture(e){var r;if(vm(e)){let o=qu();this.view.boundsForPopoverInScreen(o),this.view.callback.onShowBoundingBox(this.view.card,nt(o[0],o[1],o[2],o[3]))}else if(this.view.rootView.root)this.view.callback.onCardClicked(this.view.card,e);else{let i=(r=tC(this.view.card))!=null?r:this.view.card;this.view.callback.onCardClicked(i,e)}}};function nte(t,e,r,o,i){return Math.pow(1-i,3)*t+3*Math.pow(1-i,2)*i*e+3*(1-i)*i*i*r+Math.pow(i,3)*o}function ote(t,e,r,o,i){let s=nte(t.x,e.x,r.x,o.x,i),a=nte(t.y,e.y,r.y,o.y,i);return{x:s,y:a}}function ite(t,e,r,o){return(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*r}function ste(t,e,r,o){let i=ite(t.x,e.x,r.x,o),s=ite(t.y,e.y,r.y,o);return{x:i,y:s}}var ate={x:0,y:0},Ha=class{constructor(){this.lineJoin="miter";this.lineCap="butt";this.curveSegment=3;this.entries=[];this.curr=ate;this.points=[ate]}commit(e){if(this.points.length>1){let{lineCap:o,lineJoin:i,points:s,startVec:a,endVec:l}=this;this.entries.push({lineCap:o,lineJoin:i,points:s,closed:e,startVec:a,endVec:l})}let r={x:0,y:0};this.points=[r],this.curr=r}moveTo(e,r){this.commit(!1),this.curr={x:e,y:r},this.points[0]=this.curr}lineTo(e,r){this.points.push({x:e,y:r}),this.curr={x:e,y:r}}bezierCurveTo(e,r,o,i,s,a){let l={x:e,y:r},c={x:o,y:i},d={x:s,y:a};for(let u=1;u<=this.curveSegment;u++){let p=u/this.curveSegment,{x:h,y:f}=ote(this.curr,l,c,d,p);this.points.push({x:h,y:f})}}quadraticCurveTo(e,r,o,i){let s={x:e,y:r},a={x:o,y:i};for(let l=1;l<=this.curveSegment;l++){let c=l/this.curveSegment,{x:d,y:u}=ste(this.curr,s,a,c);this.points.push({x:d,y:u})}}arc(e,r,o,i,s,a=!1){this.commit(!1);let l=xI({startAngle:i,endAngle:s,cx:e,cy:r,anticlockwise:a,radius:o,segment:this.curveSegment,includeEnd:!1});this.points=l,this.commit(!0)}beginPath(){this.commit(!1)}closePath(){this.commit(!0)}stroke(){return this.commit(!1),Ua(this.entries.map(e=>CI({points:e.points,cap:e.closed?"close":e.lineCap,join:e.lineJoin,startVec:e.startVec,endVec:e.endVec})))}fillStroke({width:e,align:r}){return this.commit(!1),Ua(this.entries.map(o=>Gee({points:o.points,cap:o.closed?"close":o.lineCap,join:o.lineJoin,startVec:o.startVec,endVec:o.endVec,width:e,align:r})))}fill(){return this.commit(!1),Ua(this.entries.map(e=>yI(e.points)))}};var Xu={init({modelManager:t}){let e=yI($4);t.register("basic-primitive-quad",e);let r=CI({points:$4,cap:"close",join:"miter"});t.register("basic-primitive-quad-line",r)},quad({modelManager:t}){return t.get("basic-primitive-quad")},quadLine({modelManager:t}){return t.get("basic-primitive-quad-line")}},kI=[[0,16],[1,24],[2,32],[4,64]],nb={init({modelManager:t}){let e=KEe();for(let r=0;r<kI.length;r++){let[o,i]=kI[r],s=e.generateBack(i),a=e.generateFront(i);t.registerLod({name:"play-icon-back",level:r,minZoom:o,data:s}),t.registerLod({name:"play-icon-front",level:r,minZoom:o,data:a})}},back({modelManager:t},e){return t.selectLod("play-icon-back",e)},front({modelManager:t},e){return t.selectLod("play-icon-front",e)}},ob={init({modelManager:t}){let e=lte(!0),r=lte(!1);for(let o=0;o<kI.length;o++){let[i,s]=kI[o];t.registerLod({name:"fold-handle-open",minZoom:i,level:o,data:e(s)}),t.registerLod({name:"fold-handle-closed",minZoom:i,level:o,data:r(s)})}},open({modelManager:t},e){return t.selectLod("fold-handle-open",e)},closed({modelManager:t},e){return t.selectLod("fold-handle-closed",e)}},yC={init({modelManager:t}){let e=jEe();t.register("connector-handle",e)},get({modelManager:t}){return t.get("connector-handle")}},ib={init({modelManager:t}){let e=new Ha;e.curveSegment=32,e.arc(0,0,1,0,Math.PI*2),t.register("resize-handle",e.fill())},get({modelManager:t}){return t.get("resize-handle")}},sb={init({modelManager:t}){let e=new er(1,0),r=e,o=e.rotated(120),i=e.rotated(240),s=new Ha;s.beginPath(),s.moveTo(r.x,r.y),s.lineTo(o.x,o.y),s.lineTo(i.x,i.y),s.closePath(),t.register("margin-handle",s.fill())},get({modelManager:t}){return t.get("margin-handle")}};function jEe(){let t=yp,e=new er(1,-1).normalize(),r=e.scaled(t),o=V0+Mv,i=r.subbed(e.scaled(o)),{lineEnd:s,umbrellaTip1:a,umbrellaTip2:l}=iT({stemFrom:i,stemTo:r}),c=new Ha;return c.moveTo(0,0),c.lineTo(s.x,s.y),c.lineCap="round",Ua([c.stroke(),sT(a,s,l)])}function iT({stemFrom:t,stemTo:e}){let r=e.subbed(t),o=r.magnitude()/(V0+Mv)*Mv,i=new er(e).subbed(r.normalized().scaled(o)),s=r.magnitude()/(V0+Mv)*NX,a=r.normalized().rotate(90).scale(s*.5),l=Re(t.x+a.x,t.y+a.y),c=Re(t.x-a.x,t.y-a.y);return{lineEnd:i,umbrellaTip1:l,umbrellaTip2:c}}function sT(t,e,r){let o=new Ha;return o.moveTo(t.x,t.y),o.lineTo(e.x,e.y),o.lineTo(r.x,r.y),o.lineCap="round",o.lineJoin="miter",o.stroke()}function lte(t){let e=Oo,r=Xi,o=Vk,i=-r-e,s=new Ha;s.lineCap="round",s.beginPath(),s.moveTo(i-o,0),s.lineTo(i+o,0),t||(s.beginPath(),s.moveTo(i,-o),s.lineTo(i,o));let a=s.stroke();return l=>{let c=new Ha;return c.beginPath(),c.moveTo(0,0),c.lineTo(0-r,0),c.beginPath(),c.curveSegment=l,c.arc(i,0,e,0,Math.PI*2,!0),c.closePath(),Ua([c.stroke(),a])}}function KEe(){let t=21,e=new Ha,r=t*.75;e.beginPath(),e.moveTo(Math.cos(Math.PI/2)*r,Math.sin(Math.PI/2)*r),e.lineTo(Math.cos(Math.PI*7/6)*r,Math.sin(Math.PI*7/6)*r),e.lineTo(Math.cos(-Math.PI/6)*r,Math.sin(-Math.PI/6)*r),e.closePath();let o=e.fill();return{generateBack:i=>{let s=new Ha;return s.beginPath(),s.curveSegment=i,s.arc(0,0,t+2,0,Math.PI*2,!0),s.fill()},generateFront:i=>{let s=new Ha;return s.curveSegment=i,s.arc(0,0,t,0,Math.PI*2,!0),Ua([s.fillStroke({width:2}),o])}}}var CC=class extends _r{constructor(){super();this.canvas=Dr.create();this.updateTexture=ii((e,r,o,i,s)=>{e.width=r.size.width*o,e.height=r.size.height*i;let a=e.getContext2dForce();a.save(),a.scale(o,i),a.clearRect(0,0,e.width,e.height),r.draw(a),a.restore(),s.setImage(e,!0),s.width=r.size.width,s.height=r.size.height});this.sprite=new Lc,this.addChild(this.sprite)}layout({params:e,frame:r}){if(!!r){if(this.committedSx==null||this.committedSy==null||e.transformCommitted){let o=this.modelViewMtx(fn());this.committedSx=o[0],this.committedSy=o[5]}this.updateTexture(this.canvas,r,this.committedSx,this.committedSy,this.sprite)}}};var aT=class extends _r{constructor(){super();this.title=new CC;this.labels=new CC;this.underline=new pl;this.updateTitleFrame=_i(qEe);this.updateLabelsFrame=_i(YEe);this.addChild(this.title,this.underline,this.labels)}initInternal(e){this.underline.model=Xu.quad(e)}layout({layout:e,data:r,params:o}){let{title:i,labels:s,bounds:a,bgColorArgbHex:l}=r,c=Vt.regularFont.getOrFetch(),d=Vt.boldFont.getOrFetch(),u=Lx(Pt(l))?rn():qn(),p=yc(ab,a);if(!p)return;let h=this.updateTitleFrame(i,u.toRGBAHex(),c,d),f=this.updateLabelsFrame(s.join(`
`),u.toRGBAHex(),c,d,p);!h||!f||!p||(this.scaleX=p,this.scaleY=p,this.title.x=h.pathBox.x+h.pathBox.width/2,this.title.y=h.pathBox.y-h.pathBox.height/2,this.underline.x=this.title.x,this.underline.y=h.pathBox.y+5,this.underline.scaleX=h.pathBox.width,Yu(this.underline.color,u),this.labels.x=f.pathBox.x+f.pathBox.width/2,this.labels.y=ab.height/2-f.pathBox.height/2,this.title.layout({frame:h.frame,params:o}),this.labels.layout({frame:f.frame,params:o}))}},ab={width:480,height:360};function cte(){let t=-ab.width/2,e=-ab.height/2,r=ab.width,o=ab.height,i=t+r*.1,s=e+o*.4;return{x:i,y:s,width:r*.5,height:o*.2}}function qEe(t,e,r,o){if(!r||!o)return;let i=cte(),s=24,a={location:0,length:t.length},l=new Ro({text:t,attributes:[],attribute_ranges:[]});return l.addAttribute({attribute:{type:"font",value:{bold:!1,size:s}},range:a}),l.addAttribute({attribute:{type:"foreground_color",value:Pt(e).toARGBHex()},range:a}),{frame:new b1({text:l,size:i,fontSizeScale:1,hAlignment:"left",vAlignment:"bottom",vertical:!1,edgeInsets:Hn(),regularFont:r,boldFont:o}),pathBox:i}}function YEe(t,e,r,o,i){if(!r||!o)return;let s=cte(),a=11,l={location:0,length:t.length},c=new Ro({text:t,attributes:[],attribute_ranges:[]});return c.addAttribute({attribute:{type:"font",value:{bold:!1,size:a}},range:l}),c.addAttribute({attribute:{type:"foreground_color",value:Pt(e).toARGBHex()},range:l}),c.addAttribute({attribute:{type:"paragraph_style",value:{line_spacing:ab.height*i*.05}},range:l}),{frame:new b1({text:c,size:s,fontSizeScale:1,hAlignment:"left",vAlignment:"middle",vertical:!1,edgeInsets:Hn(),regularFont:r,boldFont:o}),pathBox:s}}var Y4=class extends _r{constructor(){super();this.cover=new aT;this.addChild(this.cover)}layout({layout:e,style:r,params:o}){this.cover.layout({layout:e,data:r.data,params:o})}};var lT=class extends _r{constructor(){super();this.width=0;this.height=0;this.sprite=new Lc;this.updateTexture=ii((e,r,o,i,s,a)=>{!e||o*i<=0||(e.width=o*s,e.height=i*a,r.setImage(e,!0),r.width=o,r.height=i)});this.addChild(this.sprite)}layout(e){if(this.committedSx==null||this.committedSy==null||e.transformCommitted){let i=this.modelViewMtx(fn());this.committedSx=i[0],this.committedSy=i[5]}let r=this.committedSx,o=this.committedSy;this.updateTexture(this.image,this.sprite,this.width,this.height,r,o)}};var X4=class extends _r{constructor(e){super();this.cardView=e;this.outline=new ys;this.top=new SC(e,Math.PI/2,"bbCenterTop"),this.top.cursor="n-resize",this.left=new SC(e,0,"bbLeftMiddle"),this.left.cursor="w-resize",this.right=new SC(e,Math.PI,"bbRightMiddle"),this.right.cursor="e-resize",this.bottom=new SC(e,-Math.PI/2,"bbCenterBottom"),this.bottom.cursor="s-resize",this.leftBottom=new cT(e,"bbLeftBottom"),this.leftBottom.cursor="sw-resize",this.rightBottom=new cT(e,"bbRightBottom"),this.rightBottom.cursor="se-resize",this.rightTop=new cT(e,"bbRightTop"),this.rightTop.cursor="ne-resize",this.expandHandle=new dte(e),this.addChild(this.outline,this.expandHandle,this.left,this.top,this.right,this.bottom,this.leftBottom,this.rightBottom,this.rightTop)}initInternal(e){this.outline.model=Xu.quadLine(e),this.outline.color=[.8666,.8666,.8666,1]}layout(e,r,o){if(!r.boundingBox)return;this.outline.scaleX=e.localBounds.width,this.outline.scaleY=e.localBounds.height,this.outline.width=e.borderScale*2.5;let i=this.engine.camera.worldToScreenScale(Ei(),this.rootToSelfModelMtx(fn()))[0],s=3.5/i,a=1/i,l=s*2/3*2,c=l-s,d=20/i;this.disableAll();let{corners:u,resizable:p}=r.boundingBox;for(let{x:h,y:f,type:m}of u){let g=this.getView(m);g.x=h,g.y=f,g.visible=!0,g instanceof SC?g.layout({roundRadius:l,offset:c,borderWidth:a,hitTargetRadius:d}):g instanceof cT?g.layout({roundRadius:s,borderWidth:a,hitTargetRadius:d}):g.layout({roundRadius:s,borderWidth:a,hitTargetRadius:d},o)}}disableAll(){for(let e of this.handles())e.visible=!1}*handles(){yield*this.marginHandles(),yield*this.resizeHandles()}*marginHandles(){yield this.top,yield this.bottom,yield this.left,yield this.right}*resizeHandles(){yield this.leftBottom,yield this.rightBottom,yield this.rightTop}getView(e){switch(e){case"bbCenterTop":return this.top;case"bbCenterBottom":return this.bottom;case"bbLeftMiddle":return this.left;case"bbRightMiddle":return this.right;case"bbLeftBottom":return this.leftBottom;case"bbRightBottom":return this.rightBottom;case"bbRightTop":return this.rightTop;case"bbLeftTop":return this.expandHandle}throw new Error("invalid type: "+e)}},dte=class extends _r{constructor(e){super();this.sprite=new lT;this.addChild(this.sprite),this.cursor="pointer";let r=new zd;r.onTap=new oT(e),r.onPan=new rb(e,!1);let o=new rT(e,!1);this.responder.addGestureRecognizer(r),this.responder.addGestureRecognizer(o)}initInternal(){}layout({roundRadius:e,hitTargetRadius:r},o){let i=Vt.fullScreenIcon.getOrLoad(),s=e*5*2,a=s/2-e/2;this.sprite.image=i,this.sprite.width=s,this.sprite.height=s,this.sprite.layout(o),Dp(this.bounds,-r,-r,r*2,r*2)}},SC=class extends _r{constructor(e,r,o){super();this.fg=new pl;this.bg=new pl;this.offsetVec=new er(-1,0);this.rotation=r,this.offsetVec.rotate(r),this.addChild(this.bg,this.fg);let i=new K4(e,o);this.responder.addGestureRecognizer(i)}initInternal(e){this.bg.model=sb.get(e),this.bg.color=[.8,.8,.8,1],this.fg.model=sb.get(e),this.fg.color=[1,1,1,1]}layout({roundRadius:e,borderWidth:r,offset:o,hitTargetRadius:i}){let s=e;this.fg.scaleX=s,this.fg.scaleY=s,this.bg.scaleX=s+r*2,this.bg.scaleY=s+r*2,this.x+=this.offsetVec.x*o,this.y+=this.offsetVec.y*o,Dp(this.bounds,-i,-i,i*2,i*2)}},cT=class extends _r{constructor(e,r){super();this.fg=new pl;this.bg=new pl;this.addChild(this.bg,this.fg);let o=new q4(e,r);this.responder.addGestureRecognizer(o)}initInternal(e){this.bg.model=ib.get(e),this.bg.color=[.8,.8,.8,1],this.fg.model=ib.get(e),this.fg.color=[1,1,1,1]}layout({roundRadius:e,borderWidth:r,hitTargetRadius:o}){let i=e;this.fg.scaleX=i,this.fg.scaleY=i,this.bg.scaleX=i+r*2,this.bg.scaleY=i+r*2,Dp(this.bounds,-o,-o,o*2,o*2)}};var Q4=class extends _r{constructor(e,r){super();this.holder=r;this.fgLine=new ys,this.bgLine=new ys,this.addChild(this.bgLine,this.fgLine);let o=new nT(e,r.card,r.callback,!1);this.responder.addGestureRecognizer(o),this.cursor="pointer"}initInternal(e){let r=yC.get(e);this.fgLine.model=r,this.fgLine.color=Oc(Ca),this.bgLine.model=r,this.bgLine.color=Oc(Ic)}layout({localBounds:e,accessoryScale:r},o){if(this.visible=o.connectorHandle,!o.connectorHandle)return;this.x=e.x+e.width,this.y=e.y;let i=Ns,s=i+dm;this.fgLine.width=i,this.bgLine.width=s,this.scaleX=r,this.scaleY=r,this.bounds=XEe(this.bounds)}};function XEe(t){let e=yp,r=e/(Math.sqrt(2)*2),o=r,i=-r;return Dp(t,o-e,i-e,e*2,e*2)}var J4=class extends _r{constructor(e){super();this.open=!1;this.openModel=_i(ob.open);this.closedModel=_i(ob.closed);this.fgLine=new ys,this.bgLine=new ys,this.fgLine.color=Oc(Ca),this.bgLine.color=Oc(Ic),this.addChild(this.bgLine,this.fgLine);let r=new zd;r.onPan=new rb(e,!0),r.onTap=new W4(e.card,e.callback),this.responder.addGestureRecognizer(r),this.cursor="pointer"}layout(e,r){if(this.visible=r.groupHandle!=null,!r.groupHandle)return;let{accessoryScale:o}=e,i=Ns,s=i+dm;this.x=e.localBounds.x,this.scaleX=o,this.scaleY=o,this.fgLine.width=i,this.bgLine.width=s,this.open=r.groupHandle.open;let a=Oo,l=Xi;this.bounds.x=-a*2-l,this.bounds.y=-a,this.bounds.width=a*2,this.bounds.height=a*2}renderInternal({}){let e=this.engine.camera.zoom,o=(this.open?this.openModel:this.closedModel)(this.engine,e);this.fgLine.model=o,this.bgLine.model=o}};var Z4=class extends _r{constructor(){super();this.back=new pl;this.front=new pl;this.frontModel=_i(nb.front);this.backModel=_i(nb.back);this.front.color=[1,1,1,1],this.front.rotation=Math.PI/6,this.back.color=[0,0,0,.3],this.addChild(this.back,this.front)}layout(e,r){if(this.visible=r.playable,!r.playable)return;let o={width:42,height:42},i=Rr(o)/Rr(Gt),s=Rr(e.bounds)*i,a=yc(o,s);if(a==null){this.visible=!1;return}this.scaleX=a,this.scaleY=a}renderInternal({}){let e=this.engine.camera.zoom;this.back.model=this.backModel(this.engine,e),this.front.model=this.frontModel(this.engine,e)}};var ez=class extends _r{constructor(){super();this.cover=new aT;this.addChild(this.cover)}layout({layout:e,style:r,params:o}){this.cover.layout({layout:e,data:r.data,params:o})}};var tz=class extends _r{constructor(e,r,o){super();this.rootView=e;this.card=r;this.callback=o;this.shade=new yh;this.background=new yh;this.outline=new ys;this.contentImage=new Lc;this.drawnImage=new Lc;this.annotImage=new Lc;this.text=new CC;this.playIcon=new Z4;this.childConatiner=new Od;this.pinImage=new lT;this.groupHandle=new J4(this);this.connectorHandle=new Q4(this.rootView,this);this.updateBoundingBox=ii(function(e,r){let o=r?new X4(e):void 0;return o&&e.addChild(o),e.boundingBox=o,()=>{o&&e.removeChild(o)}});if(this.outline.aligment="inner",this.addChild(this.shade,this.background,this.contentImage,this.text,this.playIcon,this.childConatiner,this.drawnImage,this.annotImage,this.groupHandle,this.outline,this.connectorHandle,this.pinImage),r instanceof zr){this.quiz=new ez;let a=this.getChildIndex(this.contentImage);this.addChildAt(this.quiz,a+1)}if(r instanceof an){this.atnd=new Y4;let a=this.getChildIndex(this.contentImage);this.addChildAt(this.atnd,a+1)}let i=new zd;i.onTap=new oT(this),i.onPan=new rb(this,!1),i.onLongPress=new j4(this),this.responder.addGestureRecognizer(i);let s=new rT(this,!1);this.responder.addGestureRecognizer(s)}initInternal(e){this.outline.model=Xu.quadLine(e),this.cursor="pointer"}layout({zoom:e,layout:r,params:o,style:i}){var m,g;let{width:s,height:a}=r.bounds,{scaleToParent:l,borderScale:c,localPosition:d,localBounds:u}=r;r9(this.bounds,r.localBounds);let p=Dt(this.card,this.callback);if(this.x=d.x,this.y=d.y,p.shouldAnimate(o.state.root)){let v=p.localTransform();this.x+=v.tx,this.y+=v.ty,this.scaleX=v.a,this.scaleY=v.d;let y=p.globalAlphaMultiplier();this.alpha=y}if(this.shade.visible=i.shade!=null,i.shade&&(this.shade.x=Ia*l,this.shade.y=Ia*l,Yu(this.shade.color,i.shade),this.shade.width=s,this.shade.height=a),this.background.visible=i.background!=null,this.background.width=s,this.background.height=a,i.background&&Yu(this.background.color,i.background),this.contentImage.visible=i.contentThumb!=null,i.contentThumb){let v=i.contentThumb.x,y=i.contentThumb.y,S=(m=i.contentThumb.width)!=null?m:i.contentThumb.image.width,C=(g=i.contentThumb.height)!=null?g:i.contentThumb.image.height;this.contentImage.setImage(i.contentThumb.image);let b=oP(u,nt(v,y,S,C));b?this.contentImage.setClipRect((b.x-v)/S,(b.y-y)/C,b.width/S,b.height/C):this.contentImage.visible=!1,this.contentImage.x=i.contentThumb.x+S/2,this.contentImage.y=i.contentThumb.y+C/2,i.contentThumb.width&&(this.contentImage.width=i.contentThumb.width),i.contentThumb.height&&(this.contentImage.height=i.contentThumb.height)}this.quiz&&i.quiz&&this.quiz.layout({style:i.quiz,layout:r,params:o}),this.atnd&&i.attendance&&this.atnd.layout({style:i.attendance,layout:r,params:o});let h=p.textFrame;if(this.text.layout({params:o,frame:h}),this.playIcon.layout(r,i),this.drawnImage.visible=i.strokes.drawn!=null,i.strokes.drawn){let{thumb:v}=i.strokes.drawn;v&&ute(this.drawnImage,v)}if(this.annotImage.visible=i.strokes.annotation!=null,i.strokes.annotation){let{thumb:v}=i.strokes.annotation;v&&ute(this.annotImage,v)}this.connectorHandle.layout(r,i),this.groupHandle.layout(r,i);let f=i.border!=null||i.emphasize||i.favorite;if(this.outline.visible=f,f&&(this.outline.scaleX=u.width,this.outline.scaleY=u.height),i.emphasize){let v=3/e;Yu(this.outline.color,Zk),this.outline.width=v}else if(i.favorite){let v=2*c;Yu(this.outline.color,Jk),this.outline.width=v}else if(i.border){let v=Math.min(1/e,1);Yu(this.outline.color,i.border),this.outline.width=v}if(this.pinImage.visible=i.pinned,i.pinned){let v=Vt.pinIcon.get();if(v){this.pinImage.image=v;let y=20*l,S=20*l;this.pinImage.width=y,this.pinImage.height=S,this.pinImage.x=y*.1,this.pinImage.y=u.y-S*.5+S*.3,this.pinImage.layout(o)}}this.updateBoundingBox(this,i.boundingBox!=null),this.boundingBox&&(this.boundingBox.z=-1,this.boundingBox.layout(r,i,o))}boundsForPopoverInScreen(e){let r=this.card.size,o=this.rootToSelfModelMtx(fn()),i=this.engine.camera.worldToScreenScale(Ei(),o)[0],s=20/i;return bh.set(e,-r.width/2-s,-r.height/2-s,r.width+s*2,r.height+s*2),this.engine.camera.worldToScreenBounds(e,e,o)}hitTest(e,r){return this.card.pinned?!1:super.hitTest(e,r)}};function ute(t,e){var a,l;t.setImage(e.image);let{x:r,y:o}=e,i=(a=e.width)!=null?a:e.image.width,s=(l=e.height)!=null?l:e.image.height;t.x=r+i/2,t.y=o+s/2,t.width=i,t.height=s}var QEe=Fee(()=>Dr.create()),rz=class extends _r{constructor(e,r,o,i,s){super();this.rootView=e;this.from=r;this.to=o;this.asDifferentGroup=i;this.callback=s;this.connectorModel=_i(JEe,pte);this.connectorHitPath=_i(function(e){if(!e)return;let{p0:r,p1:o,cp0:i,cp1:s,toPoint:a}=e,l=new Path2D;return l.moveTo(r.x,r.y),l.bezierCurveTo(i.x,i.y,s.x,s.y,o.x,o.y),l.lineTo(a.x,a.y),l},pte);this.modelEffect=ii(({modelManager:e},r,o,i)=>{if(!i){o.model=void 0;return}let s;e.has(r)?(s=e.get(r),s.updateData(i)):s=e.register(r,i,"DYNAMIC_DRAW"),o.model=s});this.calcBounds=_i(function({points:e,lineWidth:r}){if(!e)return{x:0,y:0,width:0,height:0};let{p0:o,cp0:i,cp1:s,p1:a}=e;return T1.boundingBox(r,o,i,s,a)},(e,r)=>JSON.stringify(e)===JSON.stringify(r));this.line=new ys,this.line.color=Oc(Ca),this.name=`connector-${this.from.id}-${this.to.id}`,this.addChild(this.line),this.responder.addGestureRecognizer(new nT(e,r,s,!0)),this.cursor="pointer"}calcOrbitPoints({state:e}){let{visibleRect:r,toolVisible:o,root:i}=e,s=i===this.from,a=this.from,l=a,c=a.next||a.nextGroup;if(s||!c)return;let d=e.cards[c.id],u=(d==null?void 0:d.focused)===!0,p=this.camera.worldToScreenScale(Ei(),this.rootView.rootToSelfModelMtx(fn()))[0],h=hh({card:this.to,zoom:p,dpr:1,focused:u}),f=Dt(l,this.callback),m=Dt(c,this.callback);l.isFolded&&(l=a.head(),f=Dt(l,this.callback));let g=f.localTransform(),v=m.localTransform();if(!(c.isVisibleInCardTree(i)&&!f.isMovingInCardTree(i)&&!m.isMovingInCardTree(i)))return;fA({sourceItem:this.from,outletItem:this.to,keepOutletOut:!1,handleScale:h});let S=cO({from:{card:l,mtx:g},to:{card:c,mtx:v},asDifferentGroup:c===a.nextGroup,handleScale:h,isGroupGripHidden:!o});for(let C of Object.values(S))C.x-=l.position.x,C.y-=l.position.y;return S}layout(e){var c;let{state:r}=e,{camera:o}=this.engine,s=!!((c=r.cards[this.from.id])!=null?c:{}).focused,a=qo(this.from);this.line.width=Ns*a;let l=this.calcOrbitPoints(e);this.modelData=this.connectorModel(l),this.hitPath=this.connectorHitPath(l),this.bounds=this.calcBounds({lineWidth:this.line.width,points:l}),this.modelEffect(this.engine,this.name,this.line,this.modelData)}hitTest(e,r){if(!this.hitPath)return!1;let o=QEe(),i=this.from.isFolded?this.from.head():this.from,s=o.getContext2dForce();s.save();let a=this.engine.camera.screenToWorldScale(Ei(),this.rootView.rootToSelfModelMtx(fn()))[0];s.translate(i.position.x,i.position.y),s.lineWidth=pA*a;let l=Ei(e,r),c=this.rootView.screenToNoteTransform(fn());Nn.transformMat4(l,l,c);let d=s.isPointInStroke(this.hitPath,l[0],l[1]);return s.restore(),d}},pte=(t,e)=>!t&&!e?!0:!t||!e?!1:vf(t.p0,e.p0)&&vf(t.cp0,e.cp0)&&vf(t.cp1,e.cp1)&&vf(t.p1,e.p1)&&vf(t.toPoint,e.toPoint);function JEe(t){if(!t)return;let{p0:e,p1:r,cp0:o,cp1:i,fromPoint:s,toPoint:a}=t,{lineEnd:l,umbrellaTip1:c,umbrellaTip2:d}=iT({stemFrom:new er(r),stemTo:new er(a)}),u=new Ha;u.startVec={x:s.x,y:s.y},u.curveSegment=32,u.moveTo(e.x,e.y),u.bezierCurveTo(o.x,o.y,i.x,i.y,r.x,r.y),u.lineTo(l.x,l.y);let p=sT(c,l,d);return Ua([u.stroke(),p])}var PI=class extends _r{constructor(e){super();this.card=e;this.bg=new ys;this.fg=new ys;this.connectorModelData=_i(function(e,r,o,i,s,a,l){if(s===void 0||a===void 0)return;o+=e,s+=e,i+=r,a+=r;let d=new er(s-o,a-i).normalized().scale(($0+Nv)*l),u=new er(s-d.x,a-d.y),{lineEnd:p,umbrellaTip1:h,umbrellaTip2:f}=iT({stemFrom:u,stemTo:new er(s,a)}),m=new Ha;m.lineCap="round",m.moveTo(o,i),m.lineTo(p.x,p.y);let g=sT(h,p,f);return Ua([m.stroke(),g])});this.connectorModel=_i(function(e,r,o){if(!o)return;let i;return e.modelManager.has(r)?(i=e.modelManager.get(r),i.updateData(o)):i=e.modelManager.register(r,o,"DYNAMIC_DRAW"),i});this.addChild(this.bg,this.fg),this.modelName="dashed-connector-"+this.card.id}initInternal(){this.fg.color=Oc(Ca),this.bg.color=Oc(Ic)}layout(e){var p,h;this.fg.width=Ns*e.scaleToParent,this.bg.width=(Ns+dm*2)*e.accessoryScale;let r=this.card.isFolded?this.card.head():this.card,o=-r.position.x,i=-r.position.y,s=r.bounds.x+r.bounds.width,a=r.bounds.y,l=(p=this.card.dashedConnectorPosition)==null?void 0:p.x,c=(h=this.card.dashedConnectorPosition)==null?void 0:h.y,d=this.connectorModelData(o,i,s,a,l,c,e.accessoryScale),u=this.connectorModel(this.engine,this.modelName,d);this.fg.model=u,this.bg.model=u}};function Fm(t,e){return hr.set(t,e.a,e.b,0,0,e.c,e.d,0,0,0,0,1,0,e.e,e.f,0,1)}function Ga(t){return new ft(t[0],t[1],t[4],t[5],t[12],t[13])}var nz=class extends _r{constructor(e,r,o){super();this.rootView=e;this.card=r;this.callback=o;this.updateConnector=ii(function(e,r,o,i,s){let a=o?new rz(e.rootView,r,o,i,s):void 0;return a&&e.addChild(a),e.connector=a,()=>{a&&e.removeChild(a)}});this.updateDashedConnector=ii(function(e,r,o){let i=o?new PI(r):void 0;return i&&e.addChild(i),e.dashedConnector=i,()=>{i&&e.removeChild(i)}});this.view=new tz(e,r,o),this.dashedConnector=new PI(r),this.addChild(this.view,this.dashedConnector)}get childLayer(){return this.view.childConatiner}update(){let{card:e}=this,r=e.next||e.nextGroup;this.updateConnector(this,e,r,r!=null&&r===e.nextGroup,this.callback),this.updateDashedConnector(this,e,e.dashedConnectorPosition!=null)}layout(e){var F;let{camera:r}=this.engine,{state:o}=e,{card:i}=this,{root:s,userId:a,visibleRect:l,cards:c}=o,u=!!((F=c[i.id])!=null?F:{}).focused,p=s===i,h=Dt(i,this.callback),f=h.shouldRenderInCardTree({root:s,ignoreTransition:p}),m=new ki;for(let z of i.familyIterator()){let L=Dt(z,this.callback);m.add(L.getViewRect({userId:a}))}let g=m.rect,v=!0;l&&(v=ks(g,l));let y=f&&(!l||v),S=Ga(this.rootToSelfModelMtx(fn()));h.shouldAnimate(s)&&S.prependMatrix(h.localTransform()),S.prepend(r.zoom,0,0,r.zoom,r.tx,r.ty);let C=S.a,b=qo(i),x=hh({card:i,zoom:C,focused:u,dpr:o.dpr}),w=_g(o.viewport),k=g_(i.size,C,w),T={position:i.position,localPosition:i.localPosition,bounds:i.bounds,localBounds:i.localBounds,localContentBounds:i.contentLocalBounds,scaleToParent:b,accessoryScale:x,borderScale:k,coverSizeClass:pm(o.canvas,i),canvasScale:P1(o.canvas,i)},A=SA({card:i,rend:h,mtx:S,state:o});this.view.layout({params:e,zoom:C,layout:T,style:A}),this.view.visible=y,this.view.hitTestEnabled=!p;let E=i.isFolded?i.head():i;this.connector&&(this.connector.x=E.localPosition.x,this.connector.y=E.localPosition.y,this.connector.layout(e),this.connector.hitTestEnabled=!i.isFolded),this.dashedConnector&&(this.dashedConnector.x=E.localPosition.x,this.dashedConnector.y=E.localPosition.y,this.dashedConnector.z=-1,this.dashedConnector.layout(T))}};var Ch=class extends _r{constructor(e,r,o){super();this.root=e;this.note=r;this.callback=o;this.cardLayer=new Od;this.hudLayer=new Od;this.cards=new Map;this.prevCards=new Set;this.applyCardDiffs=ii(function(e,r){let o=new Set(r.note.renderingOrderIterator()),i=new Set,s=new Set;for(let a of r.prevCards)o.has(a)||i.add(a);for(let a of o)r.prevCards.has(a)||s.add(a);s.forEach(a=>r.insertCard(a)),s.forEach(a=>r.onTreeStateChanged(a)),i.forEach(a=>r.deleteCard(a.id)),r.prevCards=o});this.applyZOrders=ii(function(e,r){function o(i,s){i.sortChildren((a,l)=>s.indexOf(a.card)-s.indexOf(l.card))}o(r.cardLayer,Array.from(r.note.rootChildrenIterator()));for(let i of r.note.renderingOrderIterator()){let s=r.cards.get(i.id);!s||o(s.childLayer,i.children)}});this.addChild(this.cardLayer,this.hudLayer)}update(){this.applyCardDiffs(this.note.cardsIntegrity(),this),this.applyZOrders(this.note.zOrderIntegrity(),this)}layout(e){for(let r of this.note.renderingOrderIterator()){let o=this.cards.get(r.id);if(!o)throw new Error("no view for card");o.layout(e)}}insertCard(e){let r=new nz(this,e,this.callback);this.cardLayer.addChild(r),this.cards.set(e.id,r)}deleteCard(e){let r=this.cards.get(e);!r||(r.removeFromParent(),this.cards.delete(e))}onTreeStateChanged(e,r=!1){var i,s;let o=r?e.iterator():[e];if(this.root){if(e===this.root)return;if(!e.parent||!e.isDescendantOf(this.root.id))for(let a of o)(i=this.cards.get(a.id))==null||i.removeFromParent();else{let a=this.cards.get(e.parent.id);if(!a)throw new Error("no parent view");for(let l of o){let c=this.cards.get(l.id);if(!c)throw new Error("no member view");a.childLayer.addChild(c)}}}else{let a=e.parent?(s=this.cards.get(e.parent.id))==null?void 0:s.childLayer:this.cardLayer;if(!a)throw new Error("no parent view");for(let l of o){let c=this.cards.get(l.id);if(!c)throw new Error("no member view");a.addChild(c)}}}screenToNoteTransform(e){return this.camera.screenToWorldTransform(e,this.rootToSelfModelMtx(e))}screenToNotePoint(e){let r=this.screenToNoteTransform(fn());return Nn.transformMat4(e,e,r)}hitTest(){return!0}};var dT=class extends _r{constructor(e){super();this.holder=e}update(){this.holder.layout()}};var Mm=class extends _r{constructor({emitter:e,store:r,note:o,canvas:i,callback:s}){super();this.scroller=new Uu;this.animator=new tT;this.handleWheel=e=>{e.stopPropagation(),e.preventDefault(),this.animator.delete("zoom"),this.scroller.abortAnimation();let r=gm({ev:e,zoom:this.camera.zoom,minZoom:this.minZoom(),maxZoom:this.maxZoom(),invert:this.store.userPreference.invertMouseWheel,multiplier:this.store.userPreference.mouseWheelMultiplier});hr.mul(this.camera.vMtx,Fm(fn(),r),this.camera.vMtx),this.zoomCommitter(this.zoomCommitted,250),this.store.reduce(cr(!1),Pr(void 0))};this.handleLongPress=()=>!1;this.handleFreeMove=()=>{};this.sar={setFineRedrawCountDown(e){}};this._maxScroll=Hn();this.zoomCommitter=So();this.transformMaker=Ac(!0);this.zoomCommitted=()=>{let e=this.viewportRect();for(let r of this.note.renderingOrderIterator())ks(e,r.bounds)&&Dt(r,this.callback).invalidateMipmap(this.camera.zoom);this.transformMaker.mark()};this._viewportRect=nt();this._viewport=nt();this.emitter=e,this.store=r,this.note=o;let a=new bC(i,{name:"desktop",debug:r.logEnabled,classes:[Xu,nb,ob,yC,ib,sb]});this.canvas=i,this.callback=s,this.glNote=new Ch(null,o,s),this.layouter=new dT(this),this.addChild(this.glNote,this.layouter),a.root.addChild(this)}setBounds(e){let{x:r,y:o,width:i,height:s}=e;i<this.canvas.width&&(r-=(this.canvas.width-i)/2,i=this.canvas.width),s<this.canvas.height&&(o-=(this.canvas.height-s)/2,s=this.canvas.height),Dp(this.bounds,r,o,i,s)}getEngine(){return this.engine}initInternal(){let e=FA(this.note.renderingOrderIterator())||nt(0,0,this.canvas.width,this.canvas.height);this.setBounds(e),this.engine.camera.vMtx=Fm(this.engine.camera.vMtx,$P({bounds:e,canvas:this.canvas,margins:Hn(50)}));for(let o of this.note.renderingOrderIterator())Dt(o,this.callback).invalidateMipmap(this.camera.zoom);this.canvas.addEventListener("wheel",this.handleWheel);let r=new zd;r.onDown=this,r.onSwipe=this,r.onTap=this,r.onDoubleTap=this,r.onLongPress=this,r.onPan=this,r.onPinch=this,this.responder.addGestureRecognizer(r)}handleDownGesture(){this.scroller.forceFinished(!0)}handlePanGesture({x:e,y:r,dx:o,dy:i},s,a){let l=a.camera.screenToCanvasTransform();o*=l[0],i*=l[5],this.setScroll(this.camera.tx+o,this.camera.ty+i,o,i,!0),this.store.reduce(cr(!1))}handleTapGesture(){this.store.reduce(lo(),Pr(void 0))}handleDoubleTapGesture(e){this.emitter.emitTextCardInserted(new sl({color:qn(),backcolor:rn(),position:{x:e.x,y:e.y}}))}handleLongPressGesture(e){let r={x:e.x,y:e.y};this.store.reduce(cr(!1),Pr(r))}handleSwipeGesture(e,r){let o=this.maxScroll();this.scroller.springBackOrFling(this.camera.tx,this.camera.ty,e,r,o.left,o.right,o.top,o.bottom)}handlePinchGesture(e,r){if(this.animator.has("zoom"))return;let o=fn();o[0]=e.zoom,o[5]=e.zoom,o[12]=e.tx,o[13]=e.ty,hr.mul(o,o,this.camera.vMtx);let i=Math.max(.01,Math.min(this.maxZoom(),o[0]));this.camera.zoom=i,this.prevZoomPivot={x:e.pivot[0],y:e.pivot[1]},this.setScroll(o[12],o[13],e.tx,e.ty,!0),this.zoomCommitter(this.zoomCommitted,250),this.store.reduce(cr(!1),Pr(void 0)),r&&this.camera.zoom<this.minZoom()&&this.animator.set("zoom",new DI({from:this.camera.zoom,to:this.minZoom(),duration:250,easing:Fo}))}get camera(){return this.engine.camera}setScroll(e,r,o,i,s){let{left:a,top:l,right:c,bottom:d}=this.maxScroll();e>c&&o>0?s?this.camera.tx+=(e-this.camera.tx)*.1:this.camera.tx=c:e<a&&o<0?s?this.camera.tx+=(e-this.camera.tx)*.1:this.camera.tx=a:this.camera.tx=e,d<r&&i>0?s?this.camera.ty+=(r-this.camera.ty)*.1:this.camera.ty=d:r<l&&i<0?s?this.camera.ty+=(r-this.camera.ty)*.1:this.camera.ty=l:this.camera.ty=r}maxScroll(){let e=this.camera.zoom,r=e*this.bounds.width/2,o=e*this.bounds.height/2,i=this.bounds.x*e+r,s=this.bounds.y*e+o,a=this.canvas.width/2-i,l=this.canvas.height/2-s,c=a-r,d=a+r,u=l-o,p=l+o;return E_(this._maxScroll,c,u,d,p)}maxZoom(){return Math.sqrt(this.canvas.width*this.canvas.height)/fc(Gt)}screenToNote(e){let r=Ei(e.x,e.y);return this.camera.screenToWorldPoint(r,r,hI),{x:r[0],y:r[1]}}boundingBoxRectToScreen(e){let{width:r,height:o}=e,i=this.rootToSelfModelMtx(fn()),s=this.engine.camera.worldToScreenScale(Ei(),i)[0],a=20/s,l=qu(-r/2-a,-o/2-a,r+a*2,o+a*2);return this.engine.camera.worldToScreenBounds(l,l,i),nt(l[0],l[1],l[2],l[3])}viewportRect(){let e=hr.invert(fn(),this.camera.vMtx),r=Ei(0,0),[o,i]=Nn.transformMat4(r,r,e),s=Ei(this.canvas.width,this.canvas.height),[a,l]=Nn.transformMat4(s,s,e);return Dp(this._viewportRect,o,i,a-o,l-i)}adjustViewport(e){if(!e.transitions||e.transitions.length===0)return;let r=xm(e.transitions,d=>this.note.getCard(d));if(!r)return;let o=new go(this.viewportRect()),i=wm({viewport:o,inflate:new go(r)}),s=Tm(o,i,this.canvas);if(!s)return;let a=100,l=Math.max(o.height/(i.height+a),o.width/(i.width+a)),c=Math.max(l*this.camera.zoom,this.minZoom());this.prevZoomPivot=s,this.animator.set("zoom",new DI({from:this.camera.zoom,to:c,duration:300,easing:J0}))}minZoom(){return fc(this.canvas)/fc(this.bounds)/2}applyTransform(){return Ga(this.camera.vMtx)}onNextStore(e){this.store=e}getZoom(){return this.camera.zoom}update(){let e=new ki;for(let o of this.note.renderingOrderIterator())Dt(o,this.callback).update(),e.add(o.bounds);e.rect&&this.setBounds(e.rect),this.animator.update(this.engine.deltaTime),this.scroller.computeScrollOffset()&&this.setScroll(this.scroller.currX,this.scroller.currY,0,0,!1);let r=this.animator.get("zoom");if(r!=null){let o=this.prevZoomPivot?this.prevZoomPivot.x:0,i=this.prevZoomPivot?this.prevZoomPivot.y:0,s=fn(),a=r.current()/this.camera.zoom;s[0]=a,s[5]=a,s[12]=-o*a+o,s[13]=-i*a+i,hr.mul(this.camera.vMtx,s,this.camera.vMtx)}}layout(){var i,s,a,l;let e=[];((i=this.store.desktop)==null?void 0:i.heldCard)&&e.push(...this.store.desktop.heldCard.all);let r=[];((s=this.store.desktop)==null?void 0:s.hoverCardId)&&r.push(this.store.desktop.hoverCardId);let o=ch({canvas:this.canvas,viewport:js(this._viewport),userId:this.store.userInfo.user_id,focusingCardId:(l=(a=this.store.desktop)==null?void 0:a.focusingCard)==null?void 0:l.id,assetUplaodStates:this.store.assetUploadStates,assetThumbUploadStates:this.store.assetThumbnailUploadStates,hoverCardIds:r,heldCardIds:e,visibleRect:this.viewportRect(),toolVisible:!0,dpr:devicePixelRatio});this.glNote.layout({state:o,transformCommitted:this.transformMaker.drain()})}hitTest(){return!0}schedule(){this.engine.start()}close(){this.engine.close()}};var Nz=X(on()),Nre=X(Cc());var ZEe=1e9;function Nm(t,e,r=ZEe){for(let o of e)if(o.size>r){let i=oe.uploadAsset,s=De.get().strings;return t.reduce(Pe(i,{title:s.fileTooBigTitle,message:s.fileTooBigMessage,onOk:()=>t.reduce(Pe(i,void 0)),okMessage:s.back})),!1}return!0}var xC=X(on());var Bm=X(on());function EI({store:t,targetId:e,courseId:r,onOk:o}){return i=>{t.reduce(Pe(oe.openDocument,zc({error:i,isDocument:!0,targetId:e,courseId:r,okMessage:De.get().strings.closeThisScreen,onOk:o})))}}function zc({error:t,courseId:e,targetId:r,okMessage:o,title:i,onOk:s,isDocument:a}){let l=De.get().strings,c=a?l.material:l.note;if(i=i!=null?i:(0,Bm.sprintf)(l.couldntOpenItem,c),t instanceof Sp)return{title:i,message:l.couldntGet_CheckInternetConnection,okMessage:o,onOk:s};if(t instanceof om)return{title:i,message:(0,Bm.sprintf)(l.brokenNoteErrorMsg,c,t.type,e,r),okMessage:o,onOk:s};if(t instanceof a1)return{title:i,message:(0,Bm.sprintf)(l.unsupportedNoteVerErrorMsg,c,t.version),okMessage:o,onOk:s};if(t instanceof F_)return{title:i,message:(0,Bm.sprintf)(l.unsupportedNoteFeatErrorMsg,c,t.version,t.features.toString()),okMessage:o,onOk:s};if(t instanceof Yr)switch(t.status){case 202:return{title:i,message:(0,Bm.sprintf)(l.api202ErrorMsg,c),okMessage:o,onOk:s};case 403:return{title:i,message:(0,Bm.sprintf)(l.api403ErrorMsg,c),okMessage:o,onOk:s};case 404:return{title:i,message:(0,Bm.sprintf)(l.api404ErrorMsg,c),okMessage:o,onOk:s};default:return{title:i,message:`${t.status}: ${l.unknownApiErrorMsg}`,okMessage:o,onOk:s}}else return{title:i,message:l.unknownApiErrorMsg,okMessage:o,onOk:s}}var Ur;(function(w){w.Analysis="ThinkingToolAnalysisChart",w.Butterfly="ThinkingToolButterflyChart",w.Candy="ThinkingToolCandy",w.Circle="ThinkingToolConcentricCircles",w.Coord="ThinkingToolCoordinate1Axis",w.Coord2="ThinkingToolCoordinate2Axes",w.DataChart="ThinkingToolDataChart",w.Diamond="ThinkingToolDiamondRanking",w.FishBone="ThinkingToolFishBone",w.Fork="ThinkingToolFork",w.JellyFish="ThinkingToolJellyfish",w.PMI="ThinkingToolPMI",w.PlotDiagramLeft="ThinkingToolPlotDiagramLeft",w.PlotDiagramRight="ThinkingToolPlotDiagramRight",w.PyramidChart="ThinkingToolPyramidChart",w.Sheet="ThinkingToolSheet",w.Venn2="ThinkingToolVennDiagram2",w.Venn3="ThinkingToolVennDiagram3",w.W="ThinkingToolWChart",w.Webbing="ThinkingToolWebbing",w.X="ThinkingToolXChart",w.Y="ThinkingToolYChart"})(Ur||(Ur={}));var hte=[Ur.Sheet,Ur.Venn2,Ur.Venn3,Ur.Y,Ur.X,Ur.W,Ur.Butterfly,Ur.PyramidChart,Ur.PMI,Ur.FishBone,Ur.PlotDiagramLeft,Ur.PlotDiagramRight,Ur.Candy,Ur.Webbing,Ur.Fork,Ur.DataChart,Ur.JellyFish,Ur.Coord,Ur.Coord2,Ur.Circle,Ur.Analysis,Ur.Diamond],e_e={[Ur.Sheet]:"ttSheet",[Ur.Venn2]:"ttVenn2",[Ur.Venn3]:"ttVenn3",[Ur.Y]:"ttYChart",[Ur.X]:"ttXChart",[Ur.W]:"ttWChart",[Ur.Butterfly]:"ttButterfly",[Ur.PyramidChart]:"ttPyramid",[Ur.PMI]:"ttPMI",[Ur.FishBone]:"ttFishbone",[Ur.PlotDiagramLeft]:"ttPlotLeft",[Ur.PlotDiagramRight]:"ttPlotRight",[Ur.Candy]:"ttCandy",[Ur.Webbing]:"ttWebbing",[Ur.Fork]:"ttRake",[Ur.DataChart]:"ttDataChart",[Ur.JellyFish]:"ttJellyfish",[Ur.Coord]:"ttOneAxis",[Ur.Coord2]:"ttTwoAxes",[Ur.Circle]:"ttCircles",[Ur.Analysis]:"ttAnalysis",[Ur.Diamond]:"ttDiamond"};function fte(t){return e_e[t]}function Lm(t){return`/img/${t.toString()}.png`}function lb(t){return`/img/${t.toString()}.pdf`}var t_e=5,r_e=30*1024*1024;function Om(t,e,r=t_e,o=r_e){let i=t.size*8/e.duration/(1024*1024);return ge.log(`uploading-video mbps: ${i}`),i>r&&t.size>o}var uT=class{constructor(e){this.manager=e}get store(){return this.manager.store}get note(){return this.manager.note}get renderer(){return this.manager.renderer}onNextStore(e){if(this.manager.store.arrivedDocument!==e.arrivedDocument&&e.arrivedDocument)if(this.manager.context.isShared())this.store.reduce(iV());else{let{id:o,snapshotId:i}=e.arrivedDocument;this.insertSharedCard(o,i)}}onEvent(e){e instanceof lu||e instanceof Og?this.emitWebCardInserted(e):e instanceof Ux?this.emitPictureCardInserted(e):e instanceof Hx?this.emitQuizCardInserted(e):e instanceof Gx?this.emitAttendanceCardInserted(e):e instanceof wy||e instanceof Bg?this.emitSheetInserted(e):e instanceof Ep?this.emitCardsCopied(e):e instanceof jg?this.emitCardReused(e):e instanceof Kg?this.emitTextCardCopied(e):e instanceof jx?this.emitSheetChanged(e):e instanceof Pp||e instanceof bf?this.emitLocalFileInserted(e):e instanceof Vx?this.emitCapturedPhotoInserted(e):e instanceof $x?this.emitCapturedVideoInserted(e):e instanceof sl||e instanceof dd?this.emitTextCardInserted(e):e instanceof kp?this.handleTextCardIsDragging(e):e instanceof Ty||e instanceof Dy?this.emitFileDocumentInserted(e):e instanceof Wx&&this.emitSubmissionsDocumentInserted(e)}emitCapturedPhotoInserted(e){let r=De.get().strings;this.store.reduce(Fe(oe.insertDocument,r.insertingPhoto)),this.emitCapturedPhotoInsertedInternal(e).then(()=>{this.store.reduce(Fe(oe.insertDocument,null),Pn({type:"normal",text:r.didInsertPhoto}))}).catch(o=>{this.store.reduce(Fe(oe.insertDocument,null),Pe(oe.insertDocument,{title:r.couldntInsertPhoto,...Ht(o),okMessage:r.back,onOk:()=>this.store.reduce(Pe(oe.insertDocument,void 0))}))}).finally(()=>{URL.revokeObjectURL(e.url)})}async emitCapturedPhotoInsertedInternal(e){let{url:r,type:o,startPosition:i}=e;if(o!==hd)throw new Error(`cannot yet handle files of type "${o}"`);let s=await $o.fromObjectURL(r,o),[a]=s.getLayoutSize(),l=this.createNextCardInsertedPosition(a),c=this.manager.renderer.screenToNote(i),d=s.getMetadata(),u=s.insert({position:l,startPosition:c,user:this.store.userInfo}),[p]=u.cards,h=u.cards.map(w=>w.id),f=p.metadata.layout_size,{left:m,top:g}=p.metadata.position,v=nt(m-f.width/2,g-f.height/2,f.width,f.height),{contentType:y,image:S,name:C}=s;if(y!==hd)throw new Error(`cannot yet handle files of type "${o}"`);let b=await xo(S,y,C),x=no.get(hi(b));_n.add(p.id,v,this.note),eo(this.store,{file:b,metadata:d,extension:x,cardIdList:h,thumbnailsGenerator:()=>s.generateThumbnails()}),We(u)}emitCapturedVideoInserted(e){let r=De.get().strings;this.store.reduce(Fe(oe.insertDocument,r.insertingVideo)),this.emitCapturedVideoInsertedInternal(e).then(()=>{this.store.reduce(Fe(oe.insertDocument,null),Pn({type:"normal",text:r.didInsertVideo}))}).catch(o=>{ge.error(o),this.store.reduce(Fe(oe.insertDocument,null),Pe(oe.insertDocument,{title:r.couldntInsertVideo,...Ht(o),okMessage:r.back,onOk:()=>this.store.reduce(Pe(oe.insertDocument,void 0))}))}).finally(()=>{URL.revokeObjectURL(e.url)})}async emitCapturedVideoInsertedInternal(e){let{url:r,type:o,startPosition:i}=e;if(!al(o))throw new Error(`cannot yet handle files of type "${o}"`);let s=await zi.fromObjectUrl(r,o),[a]=s.getLayoutSize(),l=this.createNextCardInsertedPosition(a),c=this.renderer.screenToNote(i),d=s.getMetadata(),u=s.insert({position:l,startPosition:c,user:this.store.userInfo}),[p]=u.cards,h=[p.id],f=p.metadata.layout_size,{left:m,top:g}=p.metadata.position,v=nt(m-f.width/2,g-f.height/2,f.width,f.height);if(!al(s.contentType))throw new Error(`cannot yet handle files of type "${s.contentType}"`);let y=await Wf(r,s.name,s.contentType),S=aP.get(y.type);_n.add(p.id,v,this.note),eo(this.store,{file:y,metadata:d,extension:S,cardIdList:h,thumbnailsGenerator:()=>s.generateThumbnails()}),We(u)}emitLocalFileInserted(e){if(!Nm(this.store,e.files))return;let r=De.get().strings;this.store.reduce(Fe(oe.insertDocument,r.insertingFile)),this.emitLocalFileInsertedInternal(e).then(()=>{this.store.reduce(Fe(oe.insertDocument,null),Pn({type:"normal",text:r.didInsertFile}))}).catch(o=>{if(o instanceof mc)return this.store.reduce(Fe(oe.insertDocument,null));let i=r.couldntInsertFile,{message:s,unknownError:a}=Ht(o);o instanceof Ec?(i=r.unsupportedContentType,s=(0,xC.sprintf)(r.unsupportedFileErrorMsg,o.type,o.extension)):o instanceof Bl&&(i=r.unsupportedContentType,s=r.unsupportedFileErrorWithoutOptMsg),this.store.reduce(Fe(oe.insertDocument,null),Pe(oe.insertDocument,{title:i,message:s,unknownError:a,okMessage:r.back,onOk:()=>this.store.reduce(Pe(oe.insertDocument,void 0))}))})}async emitLocalFileInsertedInternal(e){let r;e instanceof bf&&(r=this.renderer.screenToNote(e.startPosition));let o=await Vf(e.files),i=await Promise.all(o.map(Pu));if(i.some((l,c)=>{if(l instanceof zi){let d=e.files[c];return Om(d,l)}})){let l=De.get().strings;if(!confirm(l.exceedVideoQuality))throw new mc("abort video-file uploading.")}let a=this.store.userInfo;for(let l=0;l<o.length;l++){let c=i[l],d;if(e instanceof Pp&&l===0)d=this.renderer.screenToNote(e.position);else{let[S]=c.getLayoutSize();d=this.createNextCardInsertedPosition(S)}let u=c.getMetadata(),p=c.insert({position:d,startPosition:r,user:a}),[h]=p.cards,f=p.cards.map(S=>S.id),m=h.metadata.layout_size,{left:g,top:v}=h.metadata.position,y=nt(g-m.width/2,v-m.height/2,m.width,m.height);e instanceof Pp&&l===0&&_n.clear(),_n.add(h.id,y,this.note),eo(this.store,{file:o[l],metadata:u,extension:c.extension,cardIdList:f,thumbnailsGenerator:()=>c.generateThumbnails()}),We(p)}}async emitFileDocumentInserted(e){var a;let r=De.get().strings,o=oe.insertDocument,i=e.documentInfo,s={docInfo:i};e instanceof Ty?s.startPosition=e.startPosition:s.position=e.position;try{this.store.reduce(Fe(o,r.insertingMaterials));let l=i.extension.toLowerCase();e instanceof Dy&&_n.clear();let c;if(i.asset_proxy){c=await this.insertDocumentFile(s),We(c);let[d]=c.cards,{left:u,top:p}=d.metadata.position,{width:h,height:f}=d.metadata.layout_size,m=nt(u-h/2,p-f/2,h,f);_n.add(d.id,m,this.note)}else if(Xg(l)){c=await this.insertDocument(s),We(c);let[d]=c.cards,u=this.note.getCardSafe(d.id);if(u)for(let p of u.connectedGroupHeadCards())_n.add(p.id,p.bounds,this.note)}else{ge.error(`This extension ${l} is invalid format.`),this.store.reduce(Fe(o,null));return}this.store.reduce(Fe(o,null),Pn({type:"normal",text:r.didInsertMaterials}))}catch(l){if(yt.catchError(l))return;ge.error(l);let c=this.manager.courseId,d="documents/"+s.docInfo.id,u=zc({error:l,isDocument:!0,targetId:d,courseId:c,title:(0,xC.sprintf)(r.couldntInsertItemTitle,(a=s.docInfo.name)!=null?a:r.material),okMessage:r.goBackToDesktop,onOk:()=>this.store.reduce(Pe(o,void 0))});this.store.reduce(Fe(o,null),Pe(o,u));return}}async emitSubmissionsDocumentInserted(e){let r=De.get().strings,o=oe.insertDocument,i=e.documentInfoList,s=0,a=()=>{s++,this.store.reduce(Fe(o,`${r.insertingMaterials}(${s}/${i.length})`))},l=async p=>{var h;try{return await this.downloadBuildDocument(p)}catch(f){if(yt.catchError(f))return;ge.error(f);let m=this.manager.courseId,g="documents/"+p.id;return zc({error:f,isDocument:!0,targetId:g,courseId:m,title:(0,xC.sprintf)(r.couldntInsertItemTitle,(h=p.name)!=null?h:r.material),okMessage:r.goBackToDesktop,onOk:()=>this.store.reduce(Pe(o,void 0))})}finally{a()}};a();let c=[],d=[];if((await Promise.all(i.map(l))).forEach(p=>{p instanceof wi?c.push(p):p&&d.push(p)}),d.length>0){let p=()=>{let h=d.shift();!h||(d.length>0&&(h.cancelMessage=r.close,h.okMessage=r.seeNextError,h.onCancel=()=>this.store.reduce(Pe(o,void 0)),h.onOk=p),this.store.reduce(Pe(o,h)))};p(),this.store.reduce(Fe(o,null))}else c.forEach(p=>{let h=this.createDocumentInsertion({head:p,startPosition:e.startPosition});We(h);let f=this.note.getCardSafe(p.id);if(f)for(let m of f.connectedGroupHeadCards())_n.add(m.id,m.bounds,this.note)}),this.store.reduce(Fe(o,null),Pn({type:"normal",text:r.didInsertMaterials}))}async insertDocumentFile({docInfo:e,position:r,startPosition:o}){let i=Uk(e.asset_proxy),s=this.store.assetMetadata[i];if(s||(s=await LA(this.store,i,e.extension.toLowerCase()===".pdf")),!s)throw new Error(`unsupported file: ${e.extension}`);let a,l;if(r)a=this.renderer.screenToNote(r);else if(o){let d=Dl(s[0])?xr(s[0],Gt):Gt;a=this.createNextCardInsertedPosition(d),l=this.renderer.screenToNote(o)}else throw new Error("invalid state");let c={id:this.store.userInfo.user_id,name:Ut(this.store.userInfo)};if(e.author_id){let d=this.store.users.byId[e.author_id];d&&(c={id:e.author_id,name:Ut(d)})}return Wj({doc:e,author:c,metadata:s,position:a,startPosition:l})}async downloadBuildDocument(e){let{lnsClient:r}=ue,o=await r.downloadDocument(e.id).then(ta).then(i=>{let s;return e.author_id?s=Qi(this.store,e.author_id):s=Qi(this.store,this.store.userInfo.user_id),ra({id:e.id,snapshotId:e.comment_snapshot_id,file:i,remapIds:!0,overrideAuthor:!e.author_id,author:s})}).then(_O);return await RO({lnsClient:r,docId:e.id,snapshotId:e.comment_snapshot_id,head:o}),o}createDocumentInsertion({head:e,position:r,startPosition:o}){let i,s;if(r)i=this.renderer.screenToNote(r);else if(o)i=this.createNextCardInsertedPosition(e.size),s=this.renderer.screenToNote(o);else throw new Error("invalid state");return CB({head:e,destPosition:i,startPosition:s})}async insertDocument({docInfo:e,position:r,startPosition:o}){let i=await this.downloadBuildDocument(e);return this.createDocumentInsertion({head:i,position:r,startPosition:o})}insertSharedCard(e,r){Uv(()=>ue.lnsClient.downloadDocument(e),async({error:o,retryCount:i})=>{if(o instanceof Yr&&o.status===202){if(i>3)throw o;return{unit:pr.sec,delay:wv}}throw o}).then(ta).then(o=>ra({id:e,snapshotId:r,file:o,remapIds:!0,author:Qi(this.store,this.store.userInfo.user_id)})).then(_O).then(async o=>{var u;let i=(u=Kx("shareButton"))!=null?u:nt(),s=Or(i),a=this.renderer.screenToNote(s);r&&await RO({lnsClient:ue.lnsClient,docId:e,snapshotId:r,head:o});let l=this.createNextCardInsertedPosition(o.size),c=CB({head:o,destPosition:l,startPosition:a});We(c);let d=this.note.getCardSafe(c.cards[0].id);if(d)for(let p of d.connectedGroupHeadCards())_n.add(p.id,p.bounds,this.note);this.store.reduce(nB(e))}).catch(yt.handleError).catch(o=>{ge.error(o);let i=De.get().strings;this.store.reduce(Pn({type:"error",text:(0,xC.sprintf)(i.couldntInsertItemTitle,i.material)}),nB(e))})}emitTextCardInserted(e){let r=Gt,{userInfo:o}=this.store,i=Ut(o),s,a,l,c=e.params.text;e instanceof dd?(s=this.createNextCardInsertedPosition(r),a=this.renderer.screenToNote(e.params.startPosition)):(s=this.renderer.screenToNote(e.params.position),l=this.store.desktop.hoverCardId);let d=FV({position:s,author:{id:o.user_id,name:i},textColor:e.params.color.toARGBHex(),backColor:e.params.backcolor.toARGBHex(),size:r,startPosition:a,hoverId:l,text:c}),u=d.cards[0],p={x:u.metadata.position.left-u.metadata.layout_size.width/2,y:u.metadata.position.top-u.metadata.layout_size.height/2,...u.metadata.layout_size};e instanceof dd?_n.add(u.id,p,this.note):(_n.clear(),_n.add(u.id,p,this.note),this.store.reduce(Uo({id:u.id,favorite:!1,pinned:!1,canPin:!0,canAlign:!1,canRotate:!1,bounds:this.renderer.boundingBoxRectToScreen(p)}),cr(!1),Pr(void 0),rv(void 0))),We(d)}async emitWebCardInserted(e){let r=this.store.userInfo,o,i;e instanceof lu?(o=this.renderer.screenToNote(e.startPosition),i=this.createNextCardInsertedPosition(Gt)):i=this.renderer.screenToNote(e.position);let s=e.webCardContentBase,a,l;(s==null?void 0:s.thumbnailFile)&&(a=await $o.fromFile(s.thumbnailFile),[l]=a.getLayoutSize());let c=_V({author:{id:r.user_id,name:Ut(r)},position:i,startPosition:o,url:s==null?void 0:s.url,contentSize:l}),d=c.cards[0],u={x:d.metadata.position.left-d.metadata.layout_size.width/2,y:d.metadata.position.top-d.metadata.layout_size.height/2,...d.metadata.layout_size};if(_n.add(d.id,u,this.note),(s==null?void 0:s.thumbnailFile)&&a){let p=no.get(hi(s.thumbnailFile));eo(this.store,{file:s.thumbnailFile,metadata:a.getMetadata(),description:s==null?void 0:s.title,extension:p,cardIdList:[d.id],thumbnailsGenerator:()=>a.generateThumbnails()})}We(c)}async emitPictureCardInserted(e){let r=this.store.userInfo,o=this.renderer.screenToNote(e.startPosition),i=this.createNextCardInsertedPosition(Gt),s=await $o.fromFile(e.file),[a]=s.getLayoutSize(),l=no.get(hi(e.file)),c=u0({author:{id:r.user_id,name:Ut(r)},position:i,startPosition:o,contentSize:a,asset:{description:s.name,extension:l}}),d=c.cards[0],u={x:d.metadata.position.left-d.metadata.layout_size.width/2,y:d.metadata.position.top-d.metadata.layout_size.height/2,...d.metadata.layout_size};_n.add(d.id,u,this.note),eo(this.store,{file:e.file,metadata:s.getMetadata(),extension:l,cardIdList:[d.id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(c)}emitQuizCardInserted(e){let r=this.store.userInfo,o=this.renderer.screenToNote(e.startPosition),i=this.createNextCardInsertedPosition(Gt),s=e.quizContentBase,a=AV({user:r,position:i,startPosition:o,quizContentBase:s}),l=a.cards[0],c={x:l.metadata.position.left-l.metadata.layout_size.width/2,y:l.metadata.position.top-l.metadata.layout_size.height/2,...l.metadata.layout_size};_n.add(l.id,c,this.note),We(a)}emitAttendanceCardInserted(e){let r=this.store.userInfo,o=this.renderer.screenToNote(e.startPosition),i=this.createNextCardInsertedPosition(Gt),s=e.contentBase,a=IV({user:r,position:i,startPosition:o,contentBase:s}),l=a.cards[0],c={x:l.metadata.position.left-l.metadata.layout_size.width/2,y:l.metadata.position.top-l.metadata.layout_size.height/2,...l.metadata.layout_size};_n.add(l.id,c,this.note),We(a)}async emitSheetChanged(e){let r=De.get().strings,o=i=>{let s=oe.changeThinkingTool;this.store.reduce(Pe(s,{title:r.couldntChangeTool,...Ht(i),onOk:()=>{this.store.reduce(Pe(s,void 0))},okMessage:r.back}))};try{let i=lb(e.type),s=i.split("/").slice(-1)[0],a={description:s,extension:".pdf"},l=this.note.getCard(e.srcId);l.pinned&&We(qs(l.id,!1));let c=BV(l,a),[d]=c.cards;this.store.reduce(Up({type:"content",cardIdList:[d.id],state:"saving"})),We(c);let u=await fetch(i);if(u.status!==200)throw new hs(r.couldntFetchData);let p=await u.arrayBuffer(),h=new File([p],s,{type:"application/pdf"}),f=await Is.fromFile(h);await eo(this.store,{file:h,metadata:[di],extension:".pdf",cardIdList:[d.id],thumbnailsGenerator:()=>f.generateThumbnailsWithOptions({imageType:"image/png"})})}catch(i){o(i)}}async emitSheetInserted(e){let r=di,o=this.store.userInfo,i=".pdf",s;e instanceof wy&&(s=this.renderer.screenToNote(e.startPosition));let a;e instanceof Bg?a=this.renderer.screenToNote(e.position):a=this.createNextCardInsertedPosition(r);let l={description:e.toolType,extension:".pdf"},c=p0({author:{id:o.user_id,name:Ut(o)},asset:l,position:a,pageSizeList:[r],cardArea:Rr(r),startPosition:s,usage:"thinking_tool"}),d,u=()=>{let v=De.get().strings,y=oe.fetchThinkingTool;this.store.reduce(Pe(y,{title:(0,xC.sprintf)(v.couldntInsertItemTitle,v.thinkingTool),message:v.couldntFetchData,okMessage:v.back,onOk:()=>{this.store.reduce(Pe(y,void 0))}}))};try{let v=await fetch(lb(e.toolType));v.status!==200?u():d=await v.arrayBuffer()}catch(v){u()}if(!d)return;let p=c.cards[0],h=new File([d],`${e.toolType}.pdf`,{type:"application/pdf"}),f=new Is(h,[r]);eo(this.store,{file:h,metadata:[{...Cp}],extension:i,cardIdList:[p.id],thumbnailsGenerator:()=>f.generateThumbnailsWithOptions({imageType:"image/png"})});let m=p.metadata.layout_size,g={x:p.metadata.position.left-m.width/2,y:p.metadata.position.top-m.height/2,...m};e instanceof Bg&&_n.clear(),_n.add(p.id,g,this.note),We(c)}emitCardsCopied(e){let r=this.note.getCardSafe(e.cardId);if(r===void 0)return;e.isRootCard&&e.target==="single"&&r.pinned&&We(qs(r.id,!1));let o=NV({card:r,target:e.target,isRootCard:e.isRootCard});We(o);let i=this.note.getCardSafe(o.cards[0].id);i&&!e.isRootCard&&this.store.reduce(Uo({id:i.id,favorite:i.favorite,pinned:i.pinned,canPin:i.canPin(),canAlign:i.canAlign(),canRotate:i.canRotate(),bounds:this.renderer.boundingBoxRectToScreen(i.bounds)}))}emitCardReused(e){let r=this.note.getCardSafe(e.cardId);!r||!(r instanceof zr)&&!(r instanceof an)||(this.store.reduce(Fe(oe.reuseCard,"")),e.isRootCard&&r.pinned&&We(qs(r.id,!1)),OV({store:this.store,card:r,isRootCard:e.isRootCard}).then(o=>{We(o);let i=this.note.getCardSafe(o.cards[0].id);i&&!e.isRootCard&&this.store.reduce(Uo({id:i.id,favorite:i.favorite,pinned:i.pinned,canPin:i.canPin(),canAlign:i.canAlign(),canRotate:i.canRotate(),bounds:this.renderer.boundingBoxRectToScreen(i.bounds)}))}).catch(o=>{let i=De.get().strings;this.store.reduce(Pe(oe.reuseCard,{title:i.couldntReuseCard,okMessage:i.back,onOk:()=>this.store.reduce(Pe(oe.reuseCard,void 0))}))}).finally(()=>{this.store.reduce(Fe(oe.reuseCard,null))}))}createNextCardInsertedPosition(e){_n.clearIfInvisible(this.renderer.viewportRect(),this.note);let r=_n.getNextCardPosition(e,this.note);return r||(r=this.getInitialInsertedCardPosition(e)),r}getInitialInsertedCardPosition(e){let r,o=xp(this.store.screen);return this.store.screen.width<=480&&o==="portrait"?r=this.renderer.screenToNote({x:this.store.screen.width/2,y:this.store.screen.height*.8}):r=this.renderer.screenToNote({x:e.width/2*this.renderer.getZoom()+400,y:e.height/2*this.renderer.getZoom()+200}),r}handleTextCardIsDragging(e){if(e.finished)this.store.reduce(rv(void 0));else{let{hoverCardId:r}=this.store.desktop,{width:o,height:i}=Gt,{x:s,y:a}=this.renderer.screenToNote(e.position),l={x:s,y:a,width:o,height:i},c=HQ(this.note,{id:"dummy",bounds:l}),d=c&&c.id;d!==r&&this.store.reduce(rv(d))}this.renderer.sar.setFineRedrawCountDown(1)}emitTextCardCopied(e){let r=this.manager.note.getCard(e.cardId),o={id:this.store.userInfo.user_id,name:Ut(this.store.userInfo)};e.isRootCard&&r.pinned&&We(qs(r.id,!1)),We(LV(o,r,e.isRootCard))}};var oz=class{constructor(e,r){this.context=e;this.canvas=r;this.handleDoubleClick=e=>{let r=window.devicePixelRatio,o={x:e.x/r,y:e.y/r};return this.emitter.emitTextCardInserted(new sl({color:qn(),backcolor:rn(),position:o})),!0};let o=e.getStore(),i=o.desktop;if(!i)throw new Error("store.desktop must be defined!");this.courseId=i.courseId,this.noteId=i.noteId,this.storeSubscription=cu(s=>{s instanceof Ng?this.context.onEmitCommand(s.command):this.emitter.onEvent(s)}),this.context=e,this.emitter=new uT(this),this.cardRendererCallback=tE(this.context),this.renderer=new Mm({emitter:this.emitter,note:this.note,callback:this.cardRendererCallback,store:o,canvas:r})}get note(){return this.context.getNote()}get store(){return this.context.getStore()}shouldHandleLongPress(e){let r=this.renderer.applyTransform();for(let o of this.note.bubblingOrderIterator()){let s=Dt(o,this.cardRendererCallback).predictPointerEventResponse({ev:e,mtx:r,root:void 0,toolVisible:!0});if(s===Mo.Never)return!1;if(s===Mo.Handle)return!0;if(s===Mo.Ignore)return!0}return!1}shouldHandleDoubleClick(e){let r=this.renderer.applyTransform();for(let o of this.note.bubblingOrderIterator())if(Dt(o,this.cardRendererCallback).predictPointerEventResponse({ev:e,mtx:r,toolVisible:!1})!==Mo.Ignore)return!1;return!0}onNextStore(e){this.emitter.onNextStore(e),this.renderer.onNextStore(e)}getCardRenderer(e){return Dt(e,this.cardRendererCallback)}onCardCommand({cmd:e,fromUserId:r}){var s,a,l;let{note:o}=this,i=o.handleCommand(e);if(e.type==="groupStateChanged"){let c=this.note.getCard(e.topOfGroup);for(let p of c.fromTailIterator())this.note.bringCardTreeToFront(p),this.getCardRenderer(p).doFold(c,e.isFolded);let d=c.next;for(;d;)_n.remove(d.id),d=d.next;let u=(a=(s=this.store.desktop)==null?void 0:s.focusingCard)==null?void 0:a.id;if(u&&this.note.hasCard(u)){let p=this.note.getCard(u);c.id===u||!c.containsInGroup(p)?this.store.reduce(cr(!1)):this.store.reduce(lo())}}else if(e.type==="cardsInserted"||e.type==="cardsCopied"){for(let d of e.cards)this.getCardRenderer(this.note.getCard(d.id)).invalidateMipmap(this.renderer.getZoom());let c=!1;if(e.type==="cardsCopied"&&(c=e.activateTextEditor),e.transitions&&e.transitions.length>0)for(let{cardId:d,translation:u}of e.transitions){let p=this.note.getCard(d),h=this.getCardRenderer(p),{from:f,to:m,duration:g}=u;h.doInsert({insert:{from:f,to:m},duration:g,activateTextEditor:c})}r||this.renderer.adjustViewport(e)}else if(e.type==="cardMoved"||e.type==="groupMoved"){if(e.transition){let c=e.type==="cardMoved"?e.cardId:e.topOfGroup,d=this.note.getCardSafe(c);if(d){this.getCardRenderer(d).invalidateMipmap(this.renderer.getZoom());for(let{translation:p}of e.transition){let h=this.getCardRenderer(d),{from:f,to:m,duration:g}=p;h.doInsert({insert:{from:f,to:m},duration:g})}}}}else if(e.type==="cardDeleted")_n.remove(e.cardId);else if(e.type==="groupDeleted")_n.remove(e.topOfGroup);else if(e.type==="cardSizesChanged"){for(let c of e.changes)if(_n.remove(c.cardId),c.transition&&e.firedCardId===c.cardId){let d=this.note.getCard(c.cardId);this.getCardRenderer(d).setResizeAnimation(c)}}else e.type==="cardMarginsChanged"?_n.remove(e.cardId):r&&e.type==="assetThumbnailUploadStateChanged"?this.note.useCard(e.cardId,c=>{let d=Dt(c,this.cardRendererCallback);e.state==="uploading"?d.setLoading(!0):e.state==="error"?(d.setLoadState("error"),d.setLoading(!1)):e.assetType!=="drawn"&&(gr.get(c)[e.assetType].clear(),d.invalidateMipmap(this.renderer.getZoom()),d.setLoading(!1))}):r&&e.type==="cardEdited"?"gadgets.drawn.asset"in e.replacement&&this.note.useCard(e.cardId,c=>{let d=Dt(c,this.cardRendererCallback),u=gr.get(c).drawn,p=wo.getLevel(c.size,this.renderer.getZoom());d.setLoadState("loading"),d.setLoading(!0),u.clear(),u.load(p,c).then(()=>{d.setLoadState("loaded"),d.setLoading(!1)}).catch(()=>{d.setLoadState("error"),d.setLoading(!1)})}):r&&e.type==="pointerMoved"&&((l=this.context.getRemotePointerManager())==null||l.setPointer(e));if(this.renderer.sar.setFineRedrawCountDown(1),i&&(Nt(new _p(e,i,r)),this.renderer instanceof Mm&&e.type==="treeStateChanged")){let c=this.note.getCardSafe(e.cardId);c&&this.renderer.glNote.onTreeStateChanged(c,e.grouped)}return i!=null}scheduleSaveDrawnData(){this.saveDrawnDataTimer=setInterval(()=>{document.hasFocus()&&this.saveDrawnData()},20*pr.sec)}saveDrawnData(){let e=[...Object.entries(this.store.assetUploadStates)];if(e.length===0)return;let r=[],o=[];for(let[i,s]of e){let a=s.drawn;if(!a||a==="saving")continue;let l=this.note.getCardSafe(i);l?r.push({cardId:l.id,geometry:l.drawnGeometry("drawn")}):o.push(i)}this.store.reduce(Qy(r),Jy(o,"drawn"))}schedule(){this.scheduleSaveDrawnData(),this.renderer.schedule()}close(){this.storeSubscription.close(),this.renderer.close(),clearInterval(this.saveDrawnDataTimer),_n.clear(),gr.reset(),To.reset()}};var iz=class{constructor(e,r){this.context=e;this.canvas=r;this.handleDoubleClick=e=>{let r=window.devicePixelRatio,o={x:e.x/r,y:e.y/r};return this.emitter.emitTextCardInserted(new sl({color:qn(),backcolor:rn(),position:o})),!0};let o=e.getStore(),i=o.desktop;if(!i)throw new Error("store.desktop must be defined!");this.courseId=i.courseId,this.noteId=i.noteId,this.storeSubscription=cu(s=>{s instanceof Ng?this.context.onEmitCommand(s.command):this.emitter.onEvent(s)}),this.context=e,this.emitter=new uT(this),this.cardRendererCallback=tE(this.context),this.renderer=new VO({callback:this.note,cardRendererCallback:this.cardRendererCallback,store:o,canvas:r,remotePointerManager:this.context.getRemotePointerManager()}),this.processor=new Mn(r),this.pointerEventRouter=new tb(this),this.pointerEventRouter.onSingle=this.renderer.singleHandler,this.pointerEventRouter.onLongPress=this.renderer.handleLongPress,this.pointerEventRouter.onDoubleMove=this.renderer.handleDoubleMove,this.pointerEventRouter.onDoubleClick=this.handleDoubleClick,this.processor.onSingle=this.pointerEventRouter.handleSingle,this.processor.onDoubleMove=this.pointerEventRouter.handleDoubleMove,this.freeMoveProcessor=new Kl(r),this.freeMoveProcessor.onFreeMove=this.renderer.handleFreeMove}get note(){return this.context.getNote()}get store(){return this.context.getStore()}shouldHandleLongPress(e){let r=this.renderer.applyTransform();for(let o of this.note.bubblingOrderIterator()){let s=Dt(o,this.cardRendererCallback).predictPointerEventResponse({ev:e,mtx:r,root:void 0,toolVisible:!0});if(s===Mo.Never)return!1;if(s===Mo.Handle)return!0;if(s===Mo.Ignore)return!0}return!1}shouldHandleDoubleClick(e){let r=this.renderer.applyTransform();for(let o of this.note.bubblingOrderIterator())if(Dt(o,this.cardRendererCallback).predictPointerEventResponse({ev:e,mtx:r,toolVisible:!1})!==Mo.Ignore)return!1;return!0}onNextStore(e){this.emitter.onNextStore(e),this.renderer.onNextStore(e)}onCardCommand({cmd:e,fromUserId:r}){var s,a,l;let{note:o}=this,i=o.handleCommand(e);if(e.type==="groupStateChanged"){let c=this.note.getCard(e.topOfGroup);for(let p of c.fromTailIterator())this.note.bringCardTreeToFront(p),this.renderer.getCardRenderer(p).doFold(c,e.isFolded);let d=c.next;for(;d;)_n.remove(d.id),d=d.next;let u=(a=(s=this.store.desktop)==null?void 0:s.focusingCard)==null?void 0:a.id;if(u&&this.note.hasCard(u)){let p=this.note.getCard(u);c.id===u||!c.containsInGroup(p)?this.store.reduce(cr(!1)):this.store.reduce(lo())}}else if(e.type==="cardsInserted"||e.type==="cardsCopied"){for(let d of e.cards)this.renderer.getCardRenderer(this.note.getCard(d.id)).invalidateMipmap(this.renderer.getZoom());let c=!1;if(e.type==="cardsCopied"&&(c=e.activateTextEditor),e.transitions&&e.transitions.length>0)for(let{cardId:d,translation:u}of e.transitions){let p=this.note.getCard(d),h=this.renderer.getCardRenderer(p),{from:f,to:m,duration:g}=u;h.doInsert({insert:{from:f,to:m},duration:g,activateTextEditor:c})}r||this.renderer.adjustViewport(e)}else if(e.type==="cardMoved"||e.type==="groupMoved"){if(e.transition){let c=e.type==="cardMoved"?e.cardId:e.topOfGroup,d=this.note.getCardSafe(c);if(d){this.renderer.getCardRenderer(d).invalidateMipmap(this.renderer.getZoom());for(let{translation:p}of e.transition){let h=this.renderer.getCardRenderer(d),{from:f,to:m,duration:g}=p;h.doInsert({insert:{from:f,to:m},duration:g})}}}}else if(e.type==="cardDeleted")_n.remove(e.cardId);else if(e.type==="groupDeleted")_n.remove(e.topOfGroup);else if(e.type==="cardSizesChanged"){for(let c of e.changes)if(_n.remove(c.cardId),c.transition&&e.firedCardId===c.cardId){let d=this.note.getCard(c.cardId);this.renderer.getCardRenderer(d).setResizeAnimation(c)}}else e.type==="cardMarginsChanged"?_n.remove(e.cardId):r&&e.type==="assetThumbnailUploadStateChanged"?this.note.useCard(e.cardId,c=>{let d=Dt(c,this.cardRendererCallback);e.state==="uploading"?d.setLoading(!0):e.state==="error"?(d.setLoadState("error"),d.setLoading(!1)):e.assetType!=="drawn"&&(gr.get(c)[e.assetType].clear(),d.invalidateMipmap(this.renderer.getZoom()),d.setLoading(!1))}):r&&e.type==="cardEdited"?"gadgets.drawn.asset"in e.replacement&&this.note.useCard(e.cardId,c=>{let d=Dt(c,this.cardRendererCallback),u=gr.get(c).drawn,p=wo.getLevel(c.size,this.renderer.getZoom());d.setLoadState("loading"),d.setLoading(!0),u.clear(),u.load(p,c).then(()=>{d.setLoadState("loaded"),d.setLoading(!1)}).catch(()=>{d.setLoadState("error"),d.setLoading(!1)})}):r&&e.type==="pointerMoved"&&((l=this.context.getRemotePointerManager())==null||l.setPointer(e));return this.renderer.sar.setFineRedrawCountDown(1),i&&Nt(new _p(e,i,r)),i!=null}scheduleSaveDrawnData(){this.saveDrawnDataTimer=setInterval(()=>{document.hasFocus()&&this.saveDrawnData()},20*pr.sec)}saveDrawnData(){let e=[...Object.entries(this.store.assetUploadStates)],r=[],o=[];for(let[i,s]of e){let a=s.drawn;if(!a||a==="saving")continue;let l=this.note.getCardSafe(i);if(l){let c=l.createDrawnGeometry("drawn");r.push({cardId:l.id,geometry:c})}else o.push(i)}this.store.reduce(Qy(r),Jy(o,"drawn"))}schedule(){this.scheduleSaveDrawnData(),this.renderer.schedule()}close(){this.storeSubscription.close(),this.renderer.close(),this.processor.unbind(),this.freeMoveProcessor.unbind(),clearInterval(this.saveDrawnDataTimer),_n.clear(),gr.reset(),To.reset()}};function _I(t,e,r){return t.useWebGlRenderer?new oz(e,r):new iz(e,r)}var sz=class{constructor(){this.bus=Ip();this.pointers=new Map;this.pointerTimers=new Map}getPointers(){return Array.from(this.pointers.values())}setPointer(e){let{id:r}=e.user,o=this.pointerTimers.get(r);o&&clearTimeout(o),this.pointers.set(r,e),this.pointerTimers.set(r,setTimeout(()=>{this.pointers.delete(r),this.pointerTimers.delete(r),this.bus.publish()},2*pr.sec)),this.bus.publish()}subscribe(e){return this.bus.subscribe(e)}};var mT=X(Ire()),Olt=mT.default.Manager,zlt=mT.default.Socket;var Sh="0.1.0",gT="0-0",vT=class{constructor({url:e,issuer:r,noteId:o}){this._connectionState="connecting";this.requestBuffer=[];this.messageBuffer=[];r.mustIssue("loilonote-share").then(i=>{this.sock=mT.default(e,{transports:["websocket"],query:{noteId:String(o),appToken:i.app_token}}),this.sock.on("message",s=>this.onMessage(s)),this.sock.on("connect",()=>{this.setConnectionState("connected")}),this.sock.on("reconnecting",()=>{this.setConnectionState("connecting")}),this.sock.on("disconnect",()=>{this.setConnectionState("disconnected")}),this.sock.on("reconnect_error",()=>{this.setConnectionState("disconnected")}),this.sock.on("connect_error",()=>{this.setConnectionState("disconnected")}),this.sock.on("reconnect_failed",()=>{this.setConnectionState("disconnected")}),this.flushClientMessage()}).catch(ge.error)}get id(){var e;return(e=this.sock)==null?void 0:e.id}get connected(){return this._connectionState==="connected"}connectionState(){return this._connectionState}static forNote({issuer:e,noteId:r}){let o=e.mustGetEndpoint("loilonote-share");return new vT({url:o+"/note",issuer:e,noteId:r})}emit(e){this.sock?this.sock.emit("message",e):this.requestBuffer.push(e)}close(){var e;(e=this.sock)==null||e.disconnect()}onMessage(e){this.messageBuffer.push(e),this.flushServerMessage()}setMessageHandler(e){this._handler=e,this.flushServerMessage()}setConnectionStateListener(e){this._connListener=e}setConnectionState(e){var r;ge.log("setConnectionState",e),this._connectionState=e,(r=this._connListener)==null||r.call(this,e)}flushClientMessage(){let e;for(;e=this.requestBuffer.shift();)this.emit(e)}flushServerMessage(){if(this._handler){let e=this.messageBuffer;this.messageBuffer=[];for(let r of e)this._handler(r)}}};function Rre({now:t,intervalMs:e,index:r,total:o}){let i=e*o,s=e*r,a=t%i,l=t-a+s;return l<=t?l+i:l}function Fre(t){if(!/^\d+?-\d+$/.test(t))throw new Error("invalid revision: "+t);return t.split("-").map(e=>parseInt(e))}function Mre(t,e){let[r,o]=Fre(t),[i,s]=Fre(e);return Math.sign(r!==i?r-i:o-s)}var bT=class{constructor({store:e,canvas:r,note:o,revision:i,socketClient:s}){this.remotePointerManager=new sz;this.saving=!1;this.onMessage=e=>{if(e.type==="command"){let r=e.sender,o=e.payload;if(o.revision)if(Mre(this.revision,o.revision)<0)this.revision=o.revision;else{ge.warn(`"previous revision: curr=${this.revision}, recv=${o.revision}"`);return}r.id!==this.socketClient.id&&this.manager.onCardCommand({cmd:e.payload.payload,fromUserId:r.user.id})}else e.type==="connected"?(ge.log(e),this.getStore().reduce(z9(this.note.id,e.payload.sessions))):e.type==="userLeft"?(ge.log(e),this.getStore().reduce(H9(this.note.id,e.payload.id))):e.type==="userJoined"?(ge.log(e),this.getStore().reduce(U9(this.note.id,e.payload))):e.type==="snapshotSaved"?ge.log(e):e.type==="error"&&ge.error(e.type,e.payload)};this.onConnectionStateChange=e=>{ge.log("onConnectionStateChange",e),this.getStore().reduce(wP(e))};this.store=e,this.note=o,this.revision=i,this.lastSavedRevision=null,this.socketClient=s,this.socketClient.setMessageHandler(this.onMessage),this.socketClient.setConnectionStateListener(this.onConnectionStateChange),this.manager=_I(e,this,r),ue.pushClient.subscribeNote(o.id,a=>this.onChannelMessage(a))}getStore(){return this.store}static create({store:e,canvas:r,noteId:o,file:i,commands:s}){var d,u;let a=aC(o,i.note),l=(u=(d=i.share_metadata)==null?void 0:d.revision)!=null?u:gT;for(let p of s)a.handleCommand(p.payload),l=p.revision;let c=vT.forNote({noteId:o,issuer:Zn});return new bT({store:e,canvas:r,note:a,revision:l,socketClient:c})}isShared(){return!0}noteId(){return this.note.id}getNote(){return this.note}getManager(){return this.manager}getRenderer(){return this.manager.renderer}getRemotePointerManager(){return this.remotePointerManager}schedule(){this.manager.schedule(),this.scheduleSave()}scheduleSave(){var a;let e=this.getStore().sharedNoteSessions.byNoteId[this.noteId()],r=(a=this.socketClient)==null?void 0:a.id;if(!e||!r){ge.log("scheduleSave: not prepared");return}let o=Array.from(e).sort().indexOf(r),i=20*pr.sec;ge.log(`scheduledSave: interval=${i}, index=${o}, total=${e.length}`),clearTimeout(this.saveSnapshotTimer);let s=()=>{let l=Date.now(),c=Rre({now:l,intervalMs:i,index:o,total:e.length});this.saveSnapshotTimer=setTimeout(()=>{!this.saving&&this.revision!==this.lastSavedRevision&&this.saveNote(),s()},c-l)};s()}async saveNote(){var o;let{lnsClient:e}=ue;this.saving=!0;let r=this.revision;try{ge.log(`saving: revision=${r}`);let i=this.note.toJSON(),s=this.getStore().notes.byId[this.noteId()],a=(o=s==null?void 0:s.version)!=null?o:1,l=this.getStore(),c=await s1({note:i,version:a,header:{format:"note",format_version:i.version,updater:{id:l.userInfo.user_id,device_id:l.deviceId}},share_metadata:{revision:r,protocol_version:Sh}}),d=await e.createNoteSnapshot({noteId:this.note.id,commandRevision:r,protocolVersion:Sh,noteFile:new File([c],"note.lnnote",{type:"application/zip"})});this.lastSavedRevision=r,l.reduce(Hy(this.note.id,{updated_at:new Date().toISOString()}))}catch(i){if(yt.catchError(i))return;let s=De.get().strings,{message:a,unknownError:l}=Ht(i),c=s.back,d=!1;i instanceof Yr&&(i.status===403?(d=!0,a=(0,Nz.sprintf)(s.api403ErrorMsg,s.note)):i.status===404?(d=!0,a=(0,Nz.sprintf)(s.xIsDeleted,s.note)):a=`${i.status}: ${a}`,c=s.closeNote),this.getStore().reduce(Pe(oe.saveNote,{title:s.couldntSaveNote,message:a,unknownError:l,okMessage:c,onOk:()=>{let u=[Pe(oe.saveNote,void 0)];d&&u.push(vd()),this.getStore().reduce(...u)}})),ge.error(i)}finally{this.saving=!1}}onChannelMessage(e){e.action==="note_snapshot_created"&&(this.lastSavedRevision=e.revision)}onNextStore(e){this.manager.onNextStore(e),this.store.sharedNoteSessions.byNoteId[this.noteId()]!==e.sharedNoteSessions.byNoteId[this.noteId()]&&queueMicrotask(()=>this.scheduleSave()),this.store=e}onEmitCommand(e){let r=(0,Nre.default)(),o=new Date().toISOString();this.socketClient.emit({type:"command",protocolVersion:"0.1.0",localId:r,localTimestamp:o,payload:{shouldSave:EV(e),baseRevision:this.revision,payload:e}}),this.manager.onCardCommand({cmd:e})}close(){var e;(e=this.socketClient)==null||e.close(),this.manager.close(),clearTimeout(this.saveSnapshotTimer),ue.pushClient.unsubscribeNote(this.noteId())}};var IC=X(on());function LAe(t){return`app.loilonote:${t}`}var Bre=LAe("backedUpNotes");function Lre(t){if(localStorage){let e=localStorage.getItem(Bre),r=[];return e&&(r=JSON.parse(e)),r.push(t),localStorage.setItem(Bre,JSON.stringify(r)),r.length}return 0}function yT(t,e){let r=De.get().strings;if(e==="self-study")return bo(t,{fetchingId:wt.notes(e),promise:ue.lnsClient.getSelfStudyNotes(),doneReducer:o=>oB(e,o),errorReducer:$l({store:t,id:oe.fetchNote,title:r.couldntGetNote})});{let o=t.userPreference.experimentalFeatures.enableSharedNote?ue.lnsClient.getMixedNotes(e):ue.lnsClient.getNotes(e);return bo(t,{fetchingId:wt.notes(e),promise:o,doneReducer:i=>oB(e,i),errorReducer:$l({store:t,id:oe.fetchNote,title:r.couldntGetNote})})}}async function Ore(t,{courseId:e,noteId:r,version:o,note:i,assets:s}){let a=De.get().strings;t.reduce(Bp(r,{saveState:"saving"}));let l={format:"note",format_version:i.version,updater:{id:t.userInfo.user_id,device_id:t.deviceId}};await ue.lnsClient.uploadNote({courseId:e,noteId:r,version:o,note:i,header:l,assets:s}).then(c=>{if(c instanceof Ag)t.reduce(Bp(r,{saveState:c}));else{let d=new Date;t.reduce(Bp(r,{saveState:"done",lastSavedDate:d,version:o}),Hy(r,{updated_at:d.toISOString()}))}ge.log("saved")}).catch(yt.handleError).catch(c=>{ge.error(c),t.reduce(Bp(r,{saveState:"unsaved"}),Pe(oe.saveNote,{title:a.couldntUploadNotes,...Ht(c),okMessage:a.back,onOk:()=>t.reduce(Pe(oe.saveNote,void 0))}))})}async function zre(t,{courseId:e,note:r,name:o,baseNoteId:i}){let s=De.get().strings;t.reduce(Fe(oe.saveNote,s.savingNoteWithOtherName));let a={format:"note",format_version:r.version,updater:{id:t.userInfo.user_id,device_id:t.deviceId}};await ue.lnsClient.createNote({courseId:e,name:o,note:r,header:a,version:1}).then(l=>{t.reduce(zp(e,[{id:l.id,user_id:t.userInfo.user_id,name:o,version:1,is_shared:!1,is_deleted:!1,updated_at:new Date().toISOString()}]),Bp(i,{saveState:"done"}),SP(l.id,{saveState:"done",version:1,lastSavedDate:new Date}),Fe(oe.saveNote,null),Xy({courseId:e,noteId:l.id,popoverOpen:!1,isShared:!1}),Gy({courseId:e,noteId:l.id,pushState:!0,name:o}),xP(l.id,{version:1,note:r,header:a}))}).catch($re(t,{courseId:e,note:r,name:o}))}function Ure(t,e){let r=De.get().strings;t.reduce(Fe(oe.saveNote,r.overwritingNote));let o={format:"note",format_version:e.note.version,updater:{id:t.userInfo.user_id,device_id:t.deviceId}};ue.lnsClient.uploadNote({header:o,...e}).then(()=>{t.reduce(Bp(e.noteId,{version:e.version,saveState:"done"}),Fe(oe.saveNote,null))}).catch($re(t,e))}async function KI(t,{name:e,courseId:r,note:o}){let i=De.get().strings,s=oe.createNote,a=(0,IC.sprintf)(i.creatingNote,e);t.reduce(Fe(s,a));try{let l=1,c={format:"note",format_version:o.version,updater:{id:t.userInfo.user_id,device_id:t.deviceId}},d=await ue.lnsClient.createNote({courseId:r,name:e,note:o,version:l,header:c}),u=d.id,p={id:d.id,user_id:t.userInfo.user_id,version:1,name:e,is_shared:!1,is_deleted:!1,updated_at:new Date().toISOString()};t.reduce(zp(r,[p]),Fe(s,null),Xy({courseId:r,noteId:d.id,popoverOpen:!1,isShared:!1}),xP(d.id,{note:o,version:1,header:c}),SP(d.id,{saveState:"done",lastSavedDate:new Date,version:1}),Gy({courseId:r,noteId:u,pushState:!0,name:e}))}catch(l){if(yt.catchError(l))return;ge.error(l),t.reduce(Fe(s,null),Pe(s,{title:i.couldntCreateNote,...Ht(l),okMessage:i.back,onOk:()=>{t.reduce(Pe(s,void 0))}}))}}async function Hre(t,{noteId:e,prevName:r,nextName:o}){let i=De.get().strings,s=oe.renameNote,a=(0,IC.sprintf)(i.renamingNote,r,o);t.reduce(Fe(s,a));try{await ue.lnsClient.renameNote({noteId:e,noteName:o}),t.reduce(()=>({notes:{byId:{[e]:{name:{$set:o}}}}}),Fe(s,null))}catch(l){ge.error(l),t.reduce(Fe(s,null),Pe(s,{title:i.couldntRenameNote,...Ht(l),okMessage:i.back,onOk:()=>{t.reduce(Pe(s,void 0))}}))}}async function Gre(t,{noteId:e,courseId:r,title:o}){var c;let i=De.get().strings,s=oe.deleteNote,a=(0,IC.sprintf)(i.deletingNote,o);t.reduce(Fe(s,a));let l=((c=t.desktop)==null?void 0:c.noteId)===e;try{await ue.lnsClient.deleteNote(e);let d=[PP(r,e),Fe(s,null)];l&&d.push(vd()),t.reduce(...d)}catch(d){t.reduce(Fe(s,null),Pe(s,{title:(0,IC.sprintf)(i.couldntDeleteNote,o),...Ht(d),okMessage:i.back,onOk:()=>t.reduce(Pe(s,void 0))}))}}async function RC(t,{noteId:e,courseId:r,pushState:o}){let i=De.get().strings;t.reduce(Fe(oe.openNote,i.openingNote));try{let s=await ue.lnsClient.downloadNote(e),a=await O0(s,Qi(t,t.userInfo.user_id)),l=[Xy({courseId:r,noteId:e,popoverOpen:!1,isShared:!1}),xP(e,a),Gy({courseId:r,noteId:e,pushState:o}),Fe(oe.openNote,null)];l.push(SP(xn(e),{saveState:"done",lastSavedDate:new Date,version:a.version})),t.reduce(...l)}catch(s){if(yt.catchError(s))return;ge.error(s);let a=()=>{t.reduce(fu(!0),Pe(oe.openNote,void 0))},l=zc({error:s,courseId:r,targetId:`notes/${e}`,okMessage:i.goBackToNoteList,isDocument:!1,onOk:a});t.reduce(Fe(oe.openNote,null),Pe(oe.openNote,l))}}async function Vre(t,{noteIds:e,destCourseId:r,suffix:o}){let i=De.get().strings;t.reduce(Fe(oe.copyNote,i.copyingNote));try{await ue.lnsClient.copyNotes({noteIds:e,destCourseId:r,suffix:o}),t.reduce(Fe(oe.copyNote,null),Pn({type:"normal",text:i.copied}))}catch(s){t.reduce(Fe(oe.copyNote,null),Pe(oe.copyNote,{title:i.couldntCopyNote,...Ht(s),okMessage:i.back,onOk:()=>t.reduce(Pe(oe.copyNote,void 0))}))}}function $re(t,e){let r=De.get().strings;return o=>{if(yt.catchError(o))return;let i=Lre(e),s=r.couldntSaveNote,a=De.get().pluralSafeSuffix(i);ge.error(o),t.reduce(Fe(oe.saveNote,null),Pe(oe.saveNote,{title:s,...Ht(o,{default:(0,IC.sprintf)(r.didBackupUnsavedChanges,i,a)}),okMessage:r.closeNote,onOk:()=>{t.reduce(vd(),Pe(oe.saveNote,void 0))}}))}}async function Wre(t){let{store:e,noteId:r,showDialog:o}=t,i=e.noteStates[r];o&&e.reduce(XN(!0));let s=await ue.lnsClient.getNoteHeader(r).catch(yt.handleError).catch(ge.error).finally(()=>e.reduce(XN(!1)));!s||i.version<s.version&&e.reduce(TP(r,!0))}var Bz=class{constructor({store:e,canvas:r,note:o}){this.note=o,this.store=e,this.manager=_I(e,this,r)}getStore(){return this.store}getManager(){return this.manager}getRemotePointerManager(){}isShared(){return!1}noteId(){return this.note.id}getRenderer(){return this.manager.renderer}getNote(){return this.note}schedule(){this.manager.schedule(),this.scheduleSaveNote(),this.scheduleCheckNote()}scheduleSaveNote(){this.saveNoteTimer=setInterval(()=>{document.hasFocus()&&this.saveNote()},20*pr.sec)}scheduleCheckNote(){this.checkNoteVersionTimer=setInterval(()=>{document.hasFocus()&&this.checkIfNoteVersionOld()},10*pr.sec)}onNextStore(e){let r=this.store;this.manager.onNextStore(e),r.saveNoteTrigger!==e.saveNoteTrigger&&this.saveNote();let o=HE();r.pageFocused!==e.pageFocused&&o&&this.onVisibilityChanged(e.pageFocused),r.pageVisible!==e.pageVisible&&(o||this.onVisibilityChanged(e.pageVisible)),this.store=e}onVisibilityChanged(e){e?this.checkIfNoteVersionOld(!0):(this.manager.saveDrawnData(),this.saveNote())}onEmitCommand(e){if(this.manager.onCardCommand({cmd:e})){let o=this.note.id;this.getStore().noteStates[o].saveState==="done"&&this.getStore().reduce(Bp(o,{saveState:"unsaved"}))}}checkIfNoteVersionOld(e){let r=xn(this.manager.noteId),o=this.getStore();o.noteStates[r].saveState==="done"&&Wre({store:o,noteId:r,showDialog:e})}saveNote(){if(this.getRenderer()instanceof Mm)return;let{courseId:e}=this.manager,r=xn(this.manager.noteId),o=this.getStore(),i=o.noteStates[r];if(i.saveState==="saving"){ge.log("still saving. skip");return}if(i.saveState instanceof Error){ge.log("error occurred while saving. skip");return}let s=o.noteNeedsReload[r];if(i.saveState==="done"||s){ge.log("not modified. skip saving");return}ge.log("saving...");let a=i.version+1,l=this.manager.note,c=l.toJSON();hf(c,__);let d=Wu([...l.iterator()].map(u=>u.toJSON()));Ore(o,{courseId:e,noteId:r,note:c,version:a,assets:d})}close(){this.saveNote(),this.manager.close(),clearInterval(this.saveNoteTimer),clearInterval(this.checkNoteVersionTimer)}};async function jre(t,e){let r=oe.createNote,o=De.get().strings;t.reduce(Fe(r,""));let{courseId:i,name:s}=e,a=sC(0).toJSON();try{let l={format:"note",format_version:a.version,updater:{id:t.userInfo.user_id,device_id:t.deviceId}},d=(await ue.lnsClient.createNote({courseId:i,name:s,note:a,version:1,header:l})).id;await ue.lnsClient.makeNoteShared(d,Sh);let u=qre({courseId:i,noteId:d,name:s,pushState:!0,upid:r,file:{header:l,note:a,share_metadata:{protocol_version:Sh,revision:gT},version:1},commands:[]});t.reduce(zp(e.courseId,[{id:d,is_deleted:!1,is_shared:!0,name:s,user_id:t.userInfo.user_id,version:1,updated_at:new Date().toISOString()}]),...u)}catch(l){if(yt.catchError(l))return;let c=o.errorOccurred;l instanceof Yr&&(c=`${l.status}: ${c}`),t.reduce(Fe(r,null),Pe(r,{title:c,okMessage:o.back,onOk:()=>t.reduce(Pe(r,void 0))}))}}async function Kre(t,{noteId:e,members:r}){let o=oe.shareNote,i=De.get().strings;t.reduce(Fe(o,""));try{await ue.lnsClient.makeNoteShared(e,Sh);for(let s of r)await ue.lnsClient.addNoteMember(e,s);return t.reduce(Fe(o,null),Hy(e,{is_shared:!0}),Uy({noteId:e,adds:r})),{type:"success",value:void 0}}catch(s){if(yt.catchError(s))return{type:"error",error:s};let{message:a,unknownError:l}=Ht(s);return t.reduce(Fe(o,null),Pe(o,{title:a,unknownError:l,okMessage:i.back,onOk:()=>t.reduce(Pe(o,void 0))})),{type:"error",error:s}}}async function FC(t,{courseId:e,noteId:r,pushState:o}){let i=De.get().strings,s=oe.openNote;t.reduce(Fe(s,i.openingNote));try{let{file:a,commands:l}=await OAe(r,Qi(t,t.userInfo.user_id)),c=qre({file:a,commands:l,courseId:e,noteId:r,pushState:o,upid:s});t.reduce(...c)}catch(a){if(yt.catchError(a))return;ge.error(a);let l=()=>{t.reduce(fu(!0),vd(),Pe(s,void 0))},c=zc({error:a,courseId:e,targetId:`notes/${r}`,okMessage:i.goBackToNoteList,isDocument:!1,onOk:l});t.reduce(Fe(s,null),Pe(s,c))}}function qre({upid:t,file:e,commands:r,courseId:o,noteId:i,pushState:s,name:a}){return[Xy({courseId:o,noteId:i,isShared:!0}),L9(i,{file:e,commands:r}),Gy({courseId:o,noteId:i,pushState:s,name:a}),Fe(t,null),wP("connecting")]}async function OAe(t,e){let{shareClient:r,lnsClient:o}=ue,i=await o.downloadSnapshot({noteId:t,protocolVersion:Sh}).then(d=>O0(d,e)),s="+";i.share_metadata||(i.share_metadata={revision:gT,protocol_version:Sh});let a=i.share_metadata.revision,l=!0,c=[];for(;l;){let d=100,u=await r.listCommands(t,{end:s,start:a,count:d});u.length>0&&(a=u[u.length-1].revision),c=c.concat(u),l=u.length===d}return{commands:c,file:i}}async function Yre(t,{noteId:e}){let r=De.get().strings;return bo(t,{fetchingId:wt.sharedNoteMembers(e),promise:ue.lnsClient.listNoteMembers(e),doneReducer:o=>O9(e,o),errorReducer:$l({store:t,id:oe.fetchNoteMembers,title:r.couldntFetchSharedNoteMembers})})}async function Xre(t,{adds:e=[],dels:r=[],noteId:o}){let i=De.get().strings,s=oe.editNoteMembers;t.reduce(Fe(s,""));let a=[],l=[],c=!1;for(let u of e)try{await ue.lnsClient.addNoteMember(o,u),a.push(u)}catch(p){if(yt.catchError(p))return;ge.error(p),c=!0}for(let u of r)try{await ue.lnsClient.deleteNoteMember(o,u),l.push(u)}catch(p){if(yt.catchError(p))return;ge.error(p),c=!0}let d=[Fe(s,null),Uy({noteId:o,adds:a,dels:l})];c&&d.push(Pe(s,{title:i.couldntAddMember,okMessage:i.back,onOk:()=>t.reduce(Pe(s,void 0))})),t.reduce(...d)}var Vc=X(he()),lne=X(he());var Gi=X(he()),Zu=X(he());var mb=X(he()),Kz=X(he());function CT(){return CT=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},CT.apply(this,arguments)}function ST(t,e){if(t==null)return{};var r={},o=Object.keys(t),i,s;for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function xT(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Adt=X(Lz());function Oz(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function zz(t,e){t.classList?t.classList.add(e):Oz(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function one(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Uz(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=one(t.className,e):t.setAttribute("class",one(t.className&&t.className.baseVal||"",e))}var $z=X(he());var xdt=X(Lz()),wT=X(he()),qI=X(Lk());var Hz={disabled:!1};var ine=X(he()),Gz=ine.default.createContext(null);var TT="unmounted",pb="exited",hb="entering",MC="entered",Vz="exiting",xh=function(t){xT(e,t);function e(o,i){var s;s=t.call(this,o,i)||this;var a=i,l=a&&!a.isMounting?o.enter:o.appear,c;return s.appearStatus=null,o.in?l?(c=pb,s.appearStatus=hb):c=MC:o.unmountOnExit||o.mountOnEnter?c=TT:c=pb,s.state={status:c},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var a=i.in;return a&&s.status===TT?{status:pb}:null};var r=e.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var s=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==hb&&a!==MC&&(s=hb):(a===hb||a===MC)&&(s=Vz)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,s,a,l;return s=a=l=i,i!=null&&typeof i!="number"&&(s=i.exit,a=i.enter,l=i.appear!==void 0?i.appear:a),{exit:s,enter:a,appear:l}},r.updateStatus=function(i,s){i===void 0&&(i=!1),s!==null?(this.cancelNextCallback(),s===hb?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===pb&&this.setState({status:TT})},r.performEnter=function(i){var s=this,a=this.props.enter,l=this.context?this.context.isMounting:i,c=this.props.nodeRef?[l]:[qI.default.findDOMNode(this),l],d=c[0],u=c[1],p=this.getTimeouts(),h=l?p.appear:p.enter;if(!i&&!a||Hz.disabled){this.safeSetState({status:MC},function(){s.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:hb},function(){s.props.onEntering(d,u),s.onTransitionEnd(h,function(){s.safeSetState({status:MC},function(){s.props.onEntered(d,u)})})})},r.performExit=function(){var i=this,s=this.props.exit,a=this.getTimeouts(),l=this.props.nodeRef?void 0:qI.default.findDOMNode(this);if(!s||Hz.disabled){this.safeSetState({status:pb},function(){i.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Vz},function(){i.props.onExiting(l),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:pb},function(){i.props.onExited(l)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},r.setNextCallback=function(i){var s=this,a=!0;return this.nextCallback=function(l){a&&(a=!1,s.nextCallback=null,i(l))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(i,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:qI.default.findDOMNode(this),l=i==null&&!this.props.addEndListener;if(!a||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===TT)return null;var s=this.props,a=s.children,l=s.in,c=s.mountOnEnter,d=s.unmountOnExit,u=s.appear,p=s.enter,h=s.exit,f=s.timeout,m=s.addEndListener,g=s.onEnter,v=s.onEntering,y=s.onEntered,S=s.onExit,C=s.onExiting,b=s.onExited,x=s.nodeRef,w=ST(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wT.default.createElement(Gz.Provider,{value:null},typeof a=="function"?a(i,w):wT.default.cloneElement(wT.default.Children.only(a),w))},e}(wT.default.Component);xh.contextType=Gz;xh.propTypes={};function NC(){}xh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:NC,onEntering:NC,onEntered:NC,onExit:NC,onExiting:NC,onExited:NC};xh.UNMOUNTED=TT;xh.EXITED=pb;xh.ENTERING=hb;xh.ENTERED=MC;xh.EXITING=Vz;var fb=xh;var HAe=function(e,r){return e&&r&&r.split(" ").forEach(function(o){return zz(e,o)})},Wz=function(e,r){return e&&r&&r.split(" ").forEach(function(o){return Uz(e,o)})},jz=function(t){xT(e,t);function e(){for(var o,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return o=t.call.apply(t,[this].concat(s))||this,o.appliedClasses={appear:{},enter:{},exit:{}},o.onEnter=function(l,c){var d=o.resolveArguments(l,c),u=d[0],p=d[1];o.removeClasses(u,"exit"),o.addClass(u,p?"appear":"enter","base"),o.props.onEnter&&o.props.onEnter(l,c)},o.onEntering=function(l,c){var d=o.resolveArguments(l,c),u=d[0],p=d[1],h=p?"appear":"enter";o.addClass(u,h,"active"),o.props.onEntering&&o.props.onEntering(l,c)},o.onEntered=function(l,c){var d=o.resolveArguments(l,c),u=d[0],p=d[1],h=p?"appear":"enter";o.removeClasses(u,h),o.addClass(u,h,"done"),o.props.onEntered&&o.props.onEntered(l,c)},o.onExit=function(l){var c=o.resolveArguments(l),d=c[0];o.removeClasses(d,"appear"),o.removeClasses(d,"enter"),o.addClass(d,"exit","base"),o.props.onExit&&o.props.onExit(l)},o.onExiting=function(l){var c=o.resolveArguments(l),d=c[0];o.addClass(d,"exit","active"),o.props.onExiting&&o.props.onExiting(l)},o.onExited=function(l){var c=o.resolveArguments(l),d=c[0];o.removeClasses(d,"exit"),o.addClass(d,"exit","done"),o.props.onExited&&o.props.onExited(l)},o.resolveArguments=function(l,c){return o.props.nodeRef?[o.props.nodeRef.current,l]:[l,c]},o.getClassNames=function(l){var c=o.props.classNames,d=typeof c=="string",u=d&&c?c+"-":"",p=d?""+u+l:c[l],h=d?p+"-active":c[l+"Active"],f=d?p+"-done":c[l+"Done"];return{baseClassName:p,activeClassName:h,doneClassName:f}},o}var r=e.prototype;return r.addClass=function(i,s,a){var l=this.getClassNames(s)[a+"ClassName"],c=this.getClassNames("enter"),d=c.doneClassName;s==="appear"&&a==="done"&&d&&(l+=" "+d),a==="active"&&i&&i.scrollTop,l&&(this.appliedClasses[s][a]=l,HAe(i,l))},r.removeClasses=function(i,s){var a=this.appliedClasses[s],l=a.base,c=a.active,d=a.done;this.appliedClasses[s]={},l&&Wz(i,l),c&&Wz(i,c),d&&Wz(i,d)},r.render=function(){var i=this.props,s=i.classNames,a=ST(i,["classNames"]);return $z.default.createElement(fb,CT({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}($z.default.Component);jz.defaultProps={classNames:""};jz.propTypes={};var si=jz;var Vr=function({open:e,onClose:r,onExited:o,className:i="",transition:s="fade",children:a,overlay:l,textEditing:c,container:d="default",backDropStatic:u=!1}){let[p,h]=(0,Kz.useState)(!1),f=b=>{b.currentTarget===b.target?h(!0):h(!1)},m=()=>{h(!1)},g=b=>{if(b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement){b.stopPropagation();return}b.preventDefault(),h(!1),b.currentTarget!==b.target&&b.stopPropagation()},[v,y]=(0,Kz.useState)(!1),S=b=>{b.currentTarget===b.target&&(y(!0),c&&b.preventDefault())},C=()=>{e&&v&&!u&&r(),y(!1)};return mb.createElement(sne,{container:d},mb.createElement(si,{in:e,appear:e,timeout:250,classNames:"fade",unmountOnExit:!0},mb.createElement("div",{className:"fadeModalBg fade","data-overlay":l&&!p,onMouseDown:S})),mb.createElement(si,{timeout:250,unmountOnExit:!0,in:e,appear:e,classNames:s,onMouseDown:S,onExited:o},mb.createElement("div",{onMouseDown:S,className:`fadeModal ${i} ${s}`,onClick:C,onDragOver:f,onDragLeave:m,onDrop:g},a)))},wa=function({children:e,in:r}){return mb.createElement(si,{in:r,timeout:250,unmountOnExit:!0,classNames:"fade"},e)};var ane=X(Lk());var qz=10,gb=10,jt=t=>{let e=(0,Zu.useRef)(null),r=bc();(0,Zu.useEffect)(()=>{r()},[e.current]);let o=e.current;return Gi.createElement(Gi.Fragment,null,Gi.createElement("div",{ref:e}),Gi.createElement(Vr,{open:t.open,onClose:t.onClose,container:t.container,textEditing:!!t.textEditing},o&&Gi.createElement(wh,{...t,getParentBounds:function(){var i;return(i=t.parentBounds)!=null?i:o.parentElement.getBoundingClientRect()}})))},wh=({children:t,arrowColor:e="#fff",anchor:r="bottomCenter",className:o,getParentBounds:i,triOffset:s})=>{var m;let a=(0,Zu.useRef)(null),[l,c]=wn({pos:{left:-9999,top:-9999},triPos:{left:-9999},alignFlags:{}}),d=i(),u=(m=a.current)==null?void 0:m.getBoundingClientRect();(0,Zu.useEffect)(()=>{var k,T;let g=a.current.getBoundingClientRect(),v=d.left+d.width/2,y=d.top+d.height/2,S=qz,C={},b={},x={},w=nt(0,0,g.width,g.height);r==="bottomCenter"?(w.x=C.left=v-g.width/2,w.y=C.top=d.bottom,b.left=g.width/2-S):r==="topCenter"?(w.x=C.left=v-g.width/2,C.bottom=window.innerHeight-d.top,w.y=d.top-g.height,b.left=g.width/2-S):r==="middleLeft"?(C.right=window.innerWidth-d.left,w.x=d.left-g.width,w.y=C.top=y-g.height/2,b.top=g.height/2-S):r==="middleRight"&&(w.x=C.left=d.right,w.y=C.top=y-g.height/2,b.top=g.height/2-S),w.x+w.width>window.innerWidth-S?(b.right=window.innerWidth-v-(S+gb),b.right<=S&&(b.right=0,x.right=!0),C.right=S,delete C.left,delete b.left):w.x<S&&(b.left=v-(S+gb),b.left<=S&&(b.left=0,x.left=!0),delete b.right,delete C.right,C.left=S),w.y+w.height>window.innerHeight-S?(C.bottom=S,b.bottom=window.innerHeight-y-(S+gb),b.bottom<=S&&(b.bottom=0,x.bottom=!0),delete b.top,delete C.top):w.y<S&&(C.top=S,b.top=0,x.top=!0,delete C.bottom,delete b.bottom),b.top!=null?b.top+=(k=s==null?void 0:s.top)!=null?k:0:b.top==null&&(b.top=(T=s==null?void 0:s.top)!=null?T:void 0),c({pos:C,triPos:b,alignFlags:x})},[a.current,u==null?void 0:u.width,u==null?void 0:u.height,d.x,d.y,d.width,d.height,window.innerWidth]);let p={};r==="bottomCenter"?p={borderBottom:`10px solid ${e}`}:r==="topCenter"?p={borderTop:`10px solid ${e}`}:r==="middleLeft"?p={borderLeft:`10px solid ${e}`}:r==="middleRight"&&(p={borderRight:`10px solid ${e}`});let h=Gi.createElement("div",{className:"uiPopoverTri","data-anchor":r},Gi.createElement("div",{className:"uiPopoverTriInner","data-anchor":r,style:{...p,...l.triPos}})),f=o?` ${o}`:"";return Gi.createElement("div",{className:`uiPopoverWrapper${f}`,"data-anchor":r,style:{position:"fixed",...l.pos}},(r==="bottomCenter"||r==="middleRight")&&h,Gi.createElement("div",{className:"uiPopover","data-anchor":r,"data-aligned-left":l.alignFlags.left,"data-aligned-right":l.alignFlags.right,"data-aligned-top":l.alignFlags.top,"data-aligned-bottom":l.alignFlags.bottom},Gi.createElement("div",{ref:a},t)),(r==="topCenter"||r==="middleLeft")&&h)},vb=({className:t="",children:e})=>Gi.createElement("div",{className:"uiPopoverItems "+t},e),Tn=({className:t="",disabled:e,children:r,...o})=>Gi.createElement("div",{className:"uiPopoverItem "+t,role:"button","data-disabled":e,...o},r),DT=({children:t,className:e="",...r})=>Gi.createElement("a",{role:"button",className:"uiPopoverItem "+e,...r},t),YI="popoverLayer",GAe=()=>typeof document!="undefined"?document.getElementById(YI):null,sne=({children:t,container:e})=>{if(typeof window!="undefined"){let r;if(e==="none")return Gi.createElement(Gi.Fragment,null,t);if(e==="default"){let o=GAe();if(!o)return null;r=o}else r=e;return r?(0,ane.createPortal)(Gi.createElement(Gi.Fragment,null,t),r):Gi.createElement(Gi.Fragment,null,t)}else return(0,Zu.useContext)(XI).push(t),null},XI=(0,Zu.createContext)([]);var cne=({store:t,noteContext:e})=>{var L,R;if(((L=t.desktop)==null?void 0:L.popoverOpen)!==!0)return null;let r=(R=t.desktop)==null?void 0:R.focusingCard;if(!r||!e.getNote().hasCard(r.id))return null;let o=Te(),i=e.getNote().getCard(r.id),s=r.favorite,a=r.pinned,l=!r.pinned,c=r.canPin,d=r.canAlign,u=e.getNote().hasCard(r.id),p=r.canRotate&&i instanceof Rd,[h,f]=(0,lne.useState)(!1),m=!h&&i.contentAssetId()!==void 0,g=Array.from(i.isFolded?i.memberAndChildrenIterator():i.familyIterator()).map(N=>N.id),v=!h&&Cm(t,g)===void 0,y=!i.isFolded&&(i instanceof zr||i instanceof an),S=()=>{We($V(r.id,!s)),t.reduce(cr(!1))},C=()=>{let N=Wl(i,i.isFolded);!confirm(N)||(i.isFolded?We(yu(i.id)):We(Ma(i.id)),t.reduce(lo()))},b=()=>{if(!!v){if(y)Nt(new jg(i.id,!1));else{let N=i.isFolded?"group":"single";Nt(new Ep(i.id,N,!1))}t.reduce(cr(!1))}},x=()=>{We(qs(r.id,!r.pinned)),t.reduce(cr(!1))},w=N=>{let V=qo(N),W=Rr(Gt)*V**2,me=Rr(N.bounds),ie=1e-10,Z=me<W+ie,P=Z?o.expand:o.shrink,_;if(Math.abs(me-W)<ie){let $;N.parent?$=Rr(N.parent.bounds)/9:$=Rr(di),_=ts(N.bounds,$)}else _=ts(N.bounds,W);let I=Xt(N.bounds,_),U=.6;return(N.parent||Z)&&(U=.4),[P,()=>{We(GV({card:N,size:I,duration:U,grouped:N.isFolded})),We(_f(N.id,t.userInfo)),t.reduce(cr(!1))}]},k=()=>{$e(i!=null,"card must be defined"),f(!0),$Ae(t,i).finally(()=>f(!1))},T=()=>{let N=e.getRenderer().viewportRect();bV({card:i,visibleRect:N}),t.reduce(lo())},A=r.bounds,E=new DOMRect(A.x,A.y-10,A.width,A.height),[F,z]=i?w(i):[];return Vc.createElement(wh,{className:"fade",anchor:"topCenter",arrowColor:"#323232",getParentBounds:()=>E},Vc.createElement("div",{className:"cardPopover"},Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:S},Vc.createElement("div",{className:"cardPopoverStarIcon cardPopoverIcon"}),s&&o.release),c&&Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:x},Vc.createElement("div",{className:"cardPopoverPinIcon cardPopoverIcon"}),a&&o.release),d&&Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:T},o.arrange),l&&F&&Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:z},F),p&&Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:m?k:void 0,"data-disabled":!m},o.rotate),Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:b,"data-disabled":!v},y?o.reuse:o.duplicate),u&&Vc.createElement("div",{role:"button",className:"cardPopoverItem",onClick:C},o.delete)))};function VAe(t){if(t.image_rotation==null)return 270;switch(t.image_rotation){case 0:return 270;case 90:return 0;case 180:return 90;case 270:return 180}throw new Error("invalid image rotation: "+t.image_rotation)}async function $Ae(t,e){var x,w,k,T;$e(e instanceof Rd,"must be picture card");let r=e.contentAssetId();$e(r!=null,"must have asset");let o=e.content,i=String((x=e.content.image_rotation)!=null?x:0),s=VAe(o),a=Ze(o.size),l=Ze(o.size.height,o.size.width),c=e.id,d=Hn(e.content.margins),u=WQ(e),p=Ze(e.size),h=[["content.image_rotation",s],["content.size",l],["content.margins",u]],f=(w=o.rotated_image_archive)==null?void 0:w[i],m=(k=o.rotated_image_archive)==null?void 0:k[s];f||h.push([`content.rotated_image_archive.${i}`,{...o.asset}]);let g=Ze(l.width+u.left+u.right,l.height+u.top+u.bottom),v=e.size.width/e.contentSizeWithMargins.width,y=e.size.height/e.contentSizeWithMargins.height,S=Ze(g.width*v,g.height*y),C={type:"cardSizesChanged",firedCardId:e.id,committed:!0,changes:[{cardId:c,position:e.position,layoutSize:S}]};We(C),We(Sn(c,nn(h)));let b=gr.forCard(c).content;if(b.rotate("left"),m==null?void 0:m.remote_id)We(Sn(c,{"content.asset.remote_id":m.remote_id}));else{let A=await ue.lnsClient.downloadAsset(r).then(A0).then(N=>YE(N,"left")),E=((T=o.asset)==null?void 0:T.extension)===".jpg"?"image/jpeg":"image/png",F=E==="image/jpeg"?".jpg":".png",z=dl(A,xr(A,Bx)),L=dl(A,xr(A,Cp)),R=await xo(A,E,"image"+F);try{await eo(t,{file:R,metadata:[Ze(A)],cardIdList:[c],thumbnailsGenerator:async function*(){yield{high:A,medium:L,small:z,contentType:E}},extension:F}),b.setThumbs({small:z,medium:L,high:A})}catch(N){ge.error(N);let V={type:"cardSizesChanged",firedCardId:e.id,committed:!0,changes:[{cardId:c,position:e.position,layoutSize:p}]};We(V),We(Sn(c,{"content.size":a,"content.image_rotation":i,"content.asset.remote_id":r,"content.margins":d})),b.rotate("right")}}}var kT=X(he());var Yz=X(he());var oo=function({children:e,...r}){return Yz.createElement(Vr,{className:"centerModal",overlay:!0,...r},Yz.createElement("div",{className:"centerDialogInner"},e))};var Xz=X(he()),Qz=({status:t})=>Xz.createElement("div",{className:"uiStatusBadge","data-state":t}),BC=({status:t})=>{let e="gray";return t==="reconnecting"?e="yellow":t==="error"?e="red":t==="connected"&&(e="green"),Xz.createElement(Qz,{status:e})};var fl=X(he()),pne=X(on());var ko=X(he());var gi=({children:t})=>ko.createElement("div",{className:"listViewCellBody"},t),QI=({children:t})=>ko.createElement("div",{className:"listCellDualBody"},t),JI=({children:t})=>ko.createElement("div",{className:"listCellDualTitle ellipsisText"},t),ZI=({children:t})=>ko.createElement("div",{className:"listCellDualDesc ellipsisText"},t);var Xn=({className:t,onClick:e,onDragStart:r,showArrow:o,expandable:i,border:s,checked:a,highlight:l,selectOpts:c,deleteOpts:d,role:u="button",disabled:p=!1,draggable:h=!1,children:f})=>{let m=()=>{p||(c?c.onSelect(!c.selected):d?d.deleting?d.onDeleting(!1):d.onDeleting(!0):e&&e())},g={};if(s){let y="1px solid #e0e0e0";s.top&&(g.borderTop=y),s.left&&(g.borderLeft=y),s.right&&(g.borderRight=y)}let v=Te();return ko.createElement("div",{onClick:m,"data-disabled":p,"data-highlight":l,style:g,role:u,className:"listViewCell "+(t||""),draggable:h,onDragStart:r},ko.createElement("div",{className:"listViewCellInner","data-deleting":d==null?void 0:d.deleting},c&&ko.createElement($n,null,ko.createElement("div",{className:"listViewSelectable","data-select-type":c.selectionType||"normal","data-checked":c.selected})),i&&ko.createElement($n,null,ko.createElement("div",{className:"listViewExpandableArrowMark","data-expanded":i.expanded})),d&&ko.createElement($n,null,ko.createElement("div",{className:"listViewDeleteMark"})),f,a&&ko.createElement($n,null,ko.createElement("div",{className:"listViewCheckMark"})),o&&ko.createElement($n,null,ko.createElement("div",{className:"listViewArrowMark"}))),d&&ko.createElement(si,{timeout:250,in:d.deleting,unmountOnExit:!0,classNames:"listViewDeleteButton"},ko.createElement("div",{className:"listViewDeleteButton",onClick:()=>d.onDelete()},v.delete)))},$n=({children:t})=>ko.createElement("div",{className:"listCellItem"},t),yo=({title:t,titleColor:e,children:r})=>ko.createElement("div",null,t!=null&&ko.createElement(WAe,{style:{color:e}},t),ko.createElement("div",{className:"listViewSectionList"},r)),WAe=({children:t,className:e,...r})=>ko.createElement("div",{className:"listViewSectionTitle "+(e||""),...r},t),e2=({children:t})=>ko.createElement("div",{className:"uiListRow"},t),Vd=({children:t,...e})=>ko.createElement("div",{className:"uiListDesc",...e},t),Th=({children:t,...e})=>ko.createElement(qr,{className:"listViewRoundButton",...e},ko.createElement("div",{className:"listViewRoundButtonInner"},t));var Wo=X(he()),t2=X(he());var $r=({className:t="",round:e=!1,children:r,...o})=>Wo.createElement("div",{className:"nav "+t,...o,"data-round":e},r),dr=({children:t,round:e=!1,inPopover:r=!1,className:o="",...i})=>Wo.createElement("div",{className:"navHeader "+o,"data-round":e,"data-in-popover":r,...i},t),to=({className:t="",disablePopover:e,lineClamp:r,children:o,container:i,...s})=>{let[a,l]=(0,t2.useState)(!1),c=typeof o=="string"?o:void 0,d={};!!r&&r>1?d={display:"-webkit-box",overflow:"hidden",WebkitLineClamp:r,WebkitBoxOrient:"vertical"}:t="ellipsisText "+t;let u=e?void 0:()=>l(!0);return(0,t2.useEffect)(()=>{e&&l(!1)},[e]),Wo.createElement(Wo.Fragment,null,Wo.createElement("div",{className:t,title:c,role:e?"":"button",style:d,onClick:u,...s},o),!e&&Wo.createElement(jt,{open:a,onClose:()=>l(!1),arrowColor:"#000",container:i},Wo.createElement("div",{className:"ellipsisTextPopover",style:{maxWidth:Math.min(480*.9,1e3)}},o)))},fr=({children:t})=>Wo.createElement("div",{className:"navHeaderGrid"},t),kr=({children:t})=>Wo.createElement("div",{className:"navHeaderGridCellCenter"},t),$c=({enablePopover:t,children:e})=>Wo.createElement(to,{className:"navHeaderDualTitleSub",disablePopover:!t},e),Wc=({enablePopover:t,children:e})=>Wo.createElement(to,{className:"navHeaderDualTitleMain",disablePopover:!t},e),jc=({children:t})=>Wo.createElement("div",{className:"ellipsisTextOuter navHeaderDualTitle"},t),wr=({children:t})=>Wo.createElement("div",{className:"navHeaderGridCellRight"},t),mr=({children:t})=>Wo.createElement("div",{className:"navHeaderGridCellLeft"},t),mn=({round:t=!1,className:e="",children:r,...o})=>Wo.createElement("div",{className:"navBody "+e,"data-round":t,...o},r),LC=({className:t="",children:e,...r})=>Wo.createElement("div",{className:"navFooter "+t,...r},e),OC=({onClick:t})=>Wo.createElement(qr,{className:"navHeaderCloseIcon",onClick:t}),dne=()=>Wo.createElement("div",{className:"navHeaderSpacer"}),Mt=({className:t,children:e,...r})=>Wo.createElement(qr,{className:"navHeaderButton "+(t||""),...r},e),une=t=>{let e=Te();return Wo.createElement(Mt,{...t},Wo.createElement("div",{className:"navHeaderBackButtonIcon"}),Wo.createElement("span",null,e.back))},Um=t=>Wo.createElement(qr,{className:"navHeaderButton",...t},Wo.createElement("div",{className:"navHeaderMoreIcon"}));var Os=X(he());var r2=({message:t,onClickUser:e,selectedIds:r,statusForUser:o,sections:i})=>Os.default.createElement("div",{className:"sendUserPickerBody"},t&&Os.default.createElement("div",{className:"sendUserPickerDesc"},t),i.filter(s=>s[1].length>0).map(([s,a])=>Os.default.createElement(jAe,{key:s,title:s,list:a,onClick:e,statusForUser:o,selectedIds:r}))),n2=({disableReleaseAll:t,disableSelectAll:e,onClickReleaseAll:r,onClickSelectAll:o})=>{let i=Te();return Os.default.createElement("div",{className:"sendUserPickerSection"},Os.default.createElement("div",{className:"sendUserPickerButtons"},Os.default.createElement(qr,{style:{width:"50%",justifyContent:"center"},onClick:o,disabled:e,className:"primaryTextButton"},i.selectAll),Os.default.createElement(qr,{style:{width:"50%",justifyContent:"center"},onClick:r,disabled:t,className:"primaryTextButton"},i.releaseAll)))},jAe=({title:t,list:e,statusForUser:r,selectedIds:o,onClick:i})=>{let s=64,a=18,l=qe(),c=l.screen.isMobile?l.screen.width-40:410,d=Math.max(1,Math.floor(c/s)),u=a,p=f=>{if(f<=1)return[1,a];let m=(c-f*s)/(f-1);return m<a?p(f-1):[f,m]};[d,u]=p(d);let h=N9(e,d);return Os.default.createElement("div",{className:"sendUserPickerSection sendUserPickerSectionHr"},Os.default.createElement("div",{className:"sendUserPickerSectionTitle"},t),Os.default.createElement("div",{className:"sendUserPickerContent"},h.map((f,m)=>Os.default.createElement("div",{key:`row-${m}`,className:"sendUserPickerContentRow",style:{marginBottom:m===h.length-1?0:u}},f.map((g,v)=>{if(!g)return Os.default.createElement("div",{key:`empty-${v}`,className:"sendUserPickerEmptyCell"});let y=Ut(g),S=r==null?void 0:r(g.id);return Os.default.createElement("div",{className:"sendUserPickerCell relative",key:"user-"+g.id,role:"button",onClick:()=>i(g.id),"data-teacher":g.is_teacher,"data-selected":o.includes(g.id)},Os.default.createElement("span",{className:"sendUserPickerCellName",title:y},Array.from(KAe(y))),S&&Os.default.createElement("div",{style:{position:"absolute",left:2,bottom:2}},Os.default.createElement(BC,{status:S})))})))))};function*KAe(t){let e=t.split(/[\s　]/);for(let r=0;r<e.length;r++)yield e[r],r<e.length-1&&(yield Os.default.createElement("br",{key:"br"+r}))}var vi=he(),o2=vi.createContext({state:{selectedIds:[],saving:!1},dispatch:()=>{},diffs:{adds:[],dels:[],changed:!1},noteId:0,onClose(){},async onSave(){},saveButtonTitle:"",fetchState:null,isOwner:!1,memberIds:[],participants:{teachers:[],students:[],allIds:[]},forNew:!1}),hne=({courseId:t,noteId:e,onClose:r})=>{let o=Te(),i=qe(),s=i.notes.byId[e],a=[i.userInfo.user_id],l=i.fetchStates[wt.courseAttributes(t)],c=i.fetchStates[wt.courseTemporaryTeachers(t)],d=mne([l,c]);(0,fl.useEffect)(()=>{(!l||!c)&&jl(i,t)},[l,c]);let u=(0,fl.useMemo)(()=>tv({store:i,courseId:t,includeSelf:!0}),[t,i.users]);return vi.createElement(fne,{memberIds:a,courseId:t,noteId:e,title:(0,pne.sprintf)(o.shareXXX,s.name),fetchState:d,participants:u,saveButtonTitle:o.convertToSharedNote,onSave:async p=>{if(!confirm(o.confirmShareNote))return;(await Kre(i,{noteId:e,members:p.members.adds})).type==="success"&&r("done")},onClose:()=>r("cancel"),forNew:!0})},i2=({courseId:t,noteId:e,onClose:r})=>{var h;let o=Te(),i=qe(),s=i.notes.byId[e];(0,fl.useEffect)(()=>{Yre(i,{noteId:e})},[]);let a=(h=i.sharedNoteMembers[e])!=null?h:[],l=i.fetchStates[wt.courseAttributes(t)],c=i.fetchStates[wt.courseTemporaryTeachers(t)],d=i.fetchStates[wt.sharedNoteMembers(e)];(0,fl.useEffect)(()=>{(!l||!c)&&jl(i,t)},[l,c]);let u=(0,fl.useMemo)(()=>tv({store:i,courseId:t,includeSelf:!0}),[t,i.users]),p=mne([l,c,d]);return vi.createElement(fne,{memberIds:a,courseId:t,noteId:e,title:s.name,participants:u,saveButtonTitle:o.save,onSave:async f=>Xre(i,{adds:f.members.adds,dels:f.members.dels,noteId:e}),fetchState:p,onClose:r,forNew:!1})},fne=({fetchState:t,participants:e,noteId:r,title:o,memberIds:i,saveButtonTitle:s,onSave:a,onClose:l,forNew:c})=>{let d=qe(),u=Te(),p=!d.screen.isMobile,h=d.notes.byId[r],[f,m]=wn({selectedIds:i,saving:!1});(0,fl.useEffect)(()=>{m({selectedIds:[...i]})},[i.join(",")]);let g=d.userInfo.user_id===h.user_id,v=()=>{$e(h!=null);let C=e.allIds.filter(b=>b===h.user_id);m({selectedIds:C})},y=()=>{let C=[...e.allIds];m({selectedIds:C})},S=(0,fl.useMemo)(()=>{let C=new Set(f.selectedIds);i.forEach(x=>C.delete(x));let b=new Set(i);return f.selectedIds.forEach(x=>b.delete(x)),{adds:[...C],dels:[...b],changed:C.size>0||b.size>0}},[f.selectedIds,i]);return vi.createElement(o2.Provider,{value:{state:f,dispatch:m,isOwner:g,memberIds:i,noteId:h.id,onSave:a,saveButtonTitle:s,participants:e,diffs:S,fetchState:t,onClose:l,forNew:c}},vi.createElement($r,{className:"sharedNoteMemberDialog",round:p},vi.createElement(dr,null,vi.createElement(fr,null,vi.createElement(mr,null,vi.createElement(qAe,null)),vi.createElement(kr,null,vi.createElement(to,null,o)),vi.createElement(wr,null,vi.createElement(YAe,null))),t==="fetching"&&vi.createElement(ur,{absolute:"bottom"})),vi.createElement(mn,{className:"sharedNoteMemberBody"},t instanceof Error&&vi.createElement(Vd,null,u.errorOccurred),i.length>0&&vi.createElement(XAe,null)),g&&vi.createElement(LC,null,vi.createElement(n2,{disableSelectAll:f.selectedIds.length===e.allIds.length,disableReleaseAll:f.selectedIds.length===0,onClickSelectAll:y,onClickReleaseAll:v}))))},mne=t=>{if(t.some(r=>r==="fetching"))return"fetching";if(t.every(r=>r==="done"))return"done";let e=t.find(r=>r instanceof Error);return e||null},qAe=()=>{let t=Te(),{onClose:e,forNew:r,dispatch:o,memberIds:i,diffs:s}=(0,fl.useContext)(o2),a=()=>{o({selectedIds:[...i]})};return!r&&s.changed?vi.createElement(Mt,{onClick:a},t.cancel):vi.createElement(Mt,{onClick:e},t.close)},YAe=()=>{let{state:t,dispatch:e,forNew:r,saveButtonTitle:o,onSave:i,isOwner:s,diffs:a,fetchState:l}=(0,fl.useContext)(o2),{changed:c}=a,d=Te();return s?vi.createElement(Mt,{disabled:l!=="done"||t.saving||!r&&!c,onClick:()=>{e({saving:!0}),i({members:a}).finally(()=>e({saving:!1}))}},o):null},XAe=()=>{var g;let{memberIds:t,noteId:e,participants:r,state:o,dispatch:i,isOwner:s}=(0,fl.useContext)(o2),a=Te(),l=qe(),c=t.map(v=>l.users.byId[v]);c=Yx(c);let u=((g=l.sharedNoteSessions.byNoteId[e])!=null?g:[]).map(v=>l.sharedNoteSessions.byId[v]),p=new Set(u.map(v=>v.user.id)),h=v=>p.has(v)?"connected":"disconnected",f=(0,fl.useMemo)(()=>{let v=l.notes.byId[e],y=[],S=[],C=[],b=[...r.teachers,...r.students];for(let x of b)x.id===v.user_id?y.push(x):x.is_teacher?S.push(x):C.push(x);return{owners:y,teachers:S,students:C}},[l.notes,r]);return vi.createElement(r2,{onClickUser:v=>{!s||f.owners.some(y=>y.id===v)||(o.selectedIds.includes(v)?i({selectedIds:o.selectedIds.filter(y=>y!==v)}):i({selectedIds:o.selectedIds.concat([v])}))},statusForUser:h,message:a.chooseUsersToBeShared,selectedIds:o.selectedIds,sections:[[a.administrator,f.owners],[a.teacher,f.teachers],[a.student,f.students]]})};var Hm=he(),gne=()=>{var p,h;let[t,e]=(0,kT.useState)(!1),{courseId:r,noteId:o}=ju(),i=qe(),[s,a]=(0,kT.useState)(!1);o0(()=>{s&&setTimeout(()=>a(!1),300)},[s]);let l=((p=i.sharedNoteSessions.byNoteId[o])!=null?p:[]).map(f=>i.sharedNoteSessions.byId[f]),c=new Set(l.map(f=>f.user.id)).size,d=(h=i.sharedNoteConnectionState)!=null?h:"unknown";return(0,kT.useEffect)(()=>{a(!0)},[c]),i.editor!==void 0?null:Hm.createElement("div",{className:"sharedNoteSessionButtonWrapper"},Hm.createElement(qr,{className:"sharedNoteSessionButton",onClick:()=>{e(!0)}},c>0&&Hm.createElement("div",{className:"sharedNoteSessionCountBadge","data-animate":s},c),Hm.createElement("div",{className:"sharedNoteConnectionState"},Hm.createElement(BC,{status:d})),Hm.createElement("div",{className:"sharedNoteSessionButtonIcon"})),Hm.createElement(oo,{open:t,onClose:()=>e(!1)},Hm.createElement(i2,{courseId:xn(r),noteId:o,onClose:()=>e(!1)})))};var s8=X(he());var Ss=X(he());var Ge;(function(i){i[i.Finger=0]="Finger",i[i.Draw=1]="Draw",i[i.Text=2]="Text",i[i.Recording=3]="Recording"})(Ge||(Ge={}));var PT=class{constructor(){this.fineCanvasMap=new ni(()=>Dr.create());this.fineCurrentCanvasMap=new ni(()=>Dr.create());this.isCurrentEraser=!1;this.useTempCanvas=QAe()}useFineCanvas(e){return this.fineCanvasMap.get(e)}useCurrentFineCanvas(e){return this.fineCurrentCanvasMap.get(e)}clear(e){let r=this.useFineCanvas(e),o=r.getContext("2d");o==null||o.clearRect(0,0,r.width,r.height)}clearCurrent(e){let r=this.useCurrentFineCanvas(e),o=r.getContext("2d");o==null||o.clearRect(0,0,r.width,r.height)}appendStroke({stroke:e,mtx:r,card:o,canvasSize:i,isEraser:s,type:a,rectUpdated:l}){let c=this.useCurrentFineCanvas(a),d=c.getContext("2d");if(!d)throw new fo;let u=Math.ceil(i.width),p=Math.ceil(i.height);(c.width!==u||c.height!==p)&&(l=void 0,c.width=u,c.height=p),l===void 0&&d.clearRect(0,0,c.width,c.height),d.save(),d.transform(r.a,r.b,r.c,r.d,r.e,r.f);let h=o.drawnLocalBounds(a),{canvas:f}=o.drawnGeometry(a),m=1/pi(f.width,f.height,o.contentLocalBounds.width,o.contentLocalBounds.height);d.translate(h.x,h.y),d.scale(m,m);let g=Cn(i,o.contentLocalBounds),v=r.a/g;if(l){let y=Hn(1),S=nt(l),C=Mg(S,y);l=Mg(C,y),d.clearRect(S.x,S.y,S.width,S.height),d.beginPath(),d.rect(C.x,C.y,C.width,C.height),d.clip()}e.draw({ctx:d,resolutionScale:v,rectUpdated:l}),d.restore(),this.isCurrentEraser=s}bitbltFineCanvas({ctx:e,mtx:r,type:o}){let i=r.invert();e.save(),e.transform(i.a,i.b,i.c,i.d,i.e,i.f);let s=this.useFineCanvas(o),a=this.useCurrentFineCanvas(o);if(this.isCurrentEraser){let l=this.useTempCanvas();l.width=s.width,l.height=s.height;let c=l.getContext2dForce();c.save(),c.clearRect(0,0,l.width,l.height),c.drawImage(s,0,0),c.globalCompositeOperation="destination-out",c.drawImage(a,0,0),c.restore(),e.drawImage(l,0,0)}else e.drawImage(s,0,0),e.drawImage(a,0,0);e.restore()}commitCurrent(e){let r=this.useFineCanvas(e),o=this.useCurrentFineCanvas(e),i=r.getContext2dForce(),s=o.getContext2dForce();i.save(),this.isCurrentEraser&&(i.globalCompositeOperation="destination-out"),i.drawImage(o,0,0),i.restore(),s.clearRect(0,0,o.width,o.height)}redrawFineThumbnail({canvasSize:e,mtx:r,contents:o,type:i,geometry:s,drawnLocalBounds:a,contentLocalBounds:l}){let c=this.useFineCanvas(i);c.width=Math.ceil(e.width),c.height=Math.ceil(e.height);let d=c.getContext2dForce();d.save(),d.transform(r.a,r.b,r.c,r.d,r.e,r.f);let u=a,p=1/pi(s.canvas.width,s.canvas.height,l.width,l.height);d.translate(u.x,u.y),d.scale(p,p);let h=Cn(d.canvas,l),f=r.a/h;w_(d,{canvas:s.canvas,contents:o},f,{drawEraserAsStroke:!1}),d.restore()}};function QAe(){let t;return()=>(t||(t=Dr.create()),t)}function s2(){let t,e=[];function r(){return t}function o(l){return!!e.find(c=>c===l.id)}function i(l){t=l.rootParent(),t.document||(t=l),e=[...t.iteratorOverGroup()].map(c=>c.id)}function s(l){e.some(c=>c===l.id)&&(t=l)}function a(){t=void 0,e=[]}return{set:i,get:r,update:s,clear:a,rootCards:o}}var bb=t=>t.releaseStage==="local"||t.releaseStage==="development";var $d=class{constructor(e){this.minZoom=.1;this.fitZoom=Math.sqrt(1/2);this.maxZoom=16;this.fineRedrawStrategy="redraw";this._mtx=new ft;this.shouldHandleEvent=!1;this.handleSingle=(e,r)=>{if(this.sar.needsDisplay(),vm(r))this.state.editorStore.selectedTool!==Ge.Draw&&this.handleRightSingle(e,r);else if(DA(r)){if(this.state.editorStore.selectedTool===Ge.Draw)return this.handlePointerDraw(e,r);this.handleLeftSingle(e,r)}};this.handledDoubleFinger=!1;this.handleDoubleMove=(e,r)=>{let o=30;if(this.state.editorStore.selectedTool===Ge.Draw){let d=this.strokeManager.cancelStroke();d?this.endDrawn(d):(this.fineStrokeRenderer.clearCurrent(this.role.drawnType),o=1)}let i=this.mtx.clone();this.handledDoubleFinger=!0,this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(o),this.fineRedrawStrategy="redraw",i.prependMatrix(TA({ev1:e,ev2:r,minZoom:this.minZoom,maxZoom:this.maxZoom,zoom:i.a})),i.a<1&&(i.tx=this.width/2,i.ty=this.height/2);let{minTx:s,maxTx:a,minTy:l,maxTy:c}=this.getScrollLimit(i.a);i.tx=ht(i.tx,s,a),i.ty=ht(i.ty,l,c),this.mtx=i,this.updateFullScreenSharing(),this.zoomTimer.set(this.zoomCommitted,250),this.state.store.reduce(cr(!1),Pr(void 0))};this.zoomTimer=fw();this.handleWheel=e=>{if(e.stopPropagation(),e.preventDefault(),this.abortBounceAnimation(),this.hasAnimation()||this.state.editorStore.selectedTool===Ge.Draw&&this.strokeManager.currentStroke)return;let r=this.mtx.clone();this.sar.setFineRedrawCountDown(30),this.sar.needsDisplay(),this.fineRedrawStrategy="redraw";let o=e.ctrlKey?this.state.store.userPreference.trackpadPinchZoomMultiplier:this.state.store.userPreference.mouseWheelMultiplier,i=gm({ev:e,minZoom:this.fitZoom*.9,maxZoom:this.maxZoom,zoom:r.a,invert:this.state.store.userPreference.invertMouseWheel,multiplier:o});r.prependMatrix(i);let{minTx:s,maxTx:a,minTy:l,maxTy:c}=this.getScrollLimit(r.a);r.tx=ht(r.tx,s,a),r.ty=ht(r.ty,l,c),this.mtx=r,this.updateFullScreenSharing(),this.zoomTimer.set(this.zoomCommitted,250),this.state.store.reduce(cr(!1),Pr(void 0))};this.zoomCommitted=()=>{let e=this.fitZoom+(1-this.fitZoom)/2,r=this.mtx.a;r<=e?this.zoomAnimation=Ls({from:r,to:this.fitZoom,easing:Fo,durationSec:.25}):r<=1&&(this.zoomAnimation=Ls({from:r,to:1,easing:Fo,durationSec:.25})),this.state.editorStore.setZoom(r),this.invalidateMipmap()};this.parentStack=[];this.rootCardMonitor=s2();this.fineStrokeRenderer=new PT;this.prevLoading=!0;this._updater=new Vv;this.closed=!1;this.laserPointerConsumer=this.createLaserPointerConsumer();var s;this.state=e.state,this.canvas=e.canvas,this.playManager=e.playManager,this._decorateFavorites=e.decorateFavorites,this.role=e.role;let r=Dr.create(e.canvas),o=Dr.create(e.canvas);this.sar=qA({roughCanvas:o,fineCanvas:r}),this.callback=e.callback,this.shrinkManager=new $v,this.longHoverDetector=new Wv(500),this.documentPagerDelegate=e.documentPagerDelegate,this.canvas.addEventListener("wheel",this.handleWheel),this.card=e.state.card,this.layout=new sv(this.card);let i=Xt(e.state.screen,window.devicePixelRatio);this.setCard({card:this.card,mtx:new ft(1,0,0,1,i.width/2,i.height/2),forceInit:!0}),this.restoreParentStack(this.state.viewStack),this.onNextState(e.state,this.mtx),this.remotePointerManager=e.remotePointerManager,this.pointerSubscription=(s=this.remotePointerManager)==null?void 0:s.subscribe(()=>this.setNeedsDisplay())}get strokeManager(){let e=this.role.drawnType;return To.get(e,this.card)}get width(){return this.canvas.width}get height(){return this.canvas.height}getCardSizeOnCanvas(e,r){let o=Cn(this.canvas,e.size)*r;return Xt(e.size,o)}get mtx(){return this._mtx}set mtx(e){let r=!this._mtx.equals(e);this._mtx=new ft(e.a,e.b,e.c,e.d,e.e,e.f),r&&this.callback.onZoomScroll(e.clone())}initialMatrix(){return new ft(1,0,0,1,this.width/2,this.height/2)}set decorateFavorite(e){this._decorateFavorites=e}createCardsInsertionCommand(e,r){let o=this.getCardTransform(),i=Ut(r),s={id:r.user_id,name:i};return jP({mtx:o,ev:e,author:s,firedCard:this.card})}onTextCardDroppedInSelf(e){let r=this.createCardsInsertionCommand(e,this.state.store.userInfo),o=r.cards[0].id;if(this.cardInsertionEvent={cardId:o,type:"inside"},We(r),e.unmodified){let i=this.card.getCard(o);if(i){let{id:s,lastModified:a}=i;this.modificationMonitoredCard={id:s,lastModified:a}}}}createDroppedSheet(e){let r=this.state.store,o=Lm(e.sheetType),[i]=o.split("/").splice(-1,1),[s,a]=i.split("."),l=window.devicePixelRatio,c=this.getCardTransform().invert().cross(e.position.x*l,e.position.y*l),d=xr(di,Gt);return Rl({author:{id:r.userInfo.user_id,name:Ut(r.userInfo)},asset:{description:s,extension:a},position:c,pageIndex:0,pageSize:{...di},layoutSize:d,usage:"thinking_tool"})}onSheetDropped(e){this.cardInsertionEvent={cardId:e.id,type:"inside"};let r=e.metadata.position.left,o=e.metadata.position.top;We(Pf({creator:this.card,card:e,type:"inside",position:{x:r,y:o},ignoreTransition:!0}))}onCardInsertedInSelf(e){this.cardInsertionEvent={cardId:e.card.id,type:e.type};let r=this.layout.add(e.card.metadata.layout_size,!1),o=Or(r);this.card.pinned&&e.type==="next"&&We(qs(this.card.id,!1)),We(Pf({creator:this.card,card:e.card,type:e.type,position:o}))}adjustViewport(e){if(!this.callback.getCardOnNote||!e.transitions||e.transitions.length===0)return;let r=xm(e.transitions,this.callback.getCardOnNote);if(!r)return;let o=new go(this.viewportRect()),i=wm({viewport:o,inflate:new go(r)}),s=Tm(o,i,this.canvas);if(!s)return;let a=Ho(this.card.bounds),l=100*a,c=Math.max(o.height/(i.height+l),o.width/(i.width+l)),d=Math.max(this.mtx.a*c,this.minZoom);this.zoomAnimPivot=s,this.zoomAnimation=Ls({from:this.mtx.a,to:d,durationSec:.3}),this.invalidateMipmap()}viewportRect(){let e=Cn(this.canvas,this.card.size),r=new ft().translate(-this.card.position.x,-this.card.position.y).scale(e).prependMatrix(this.mtx).invert(),o=nt(0,0,this.canvas.width,this.canvas.height);return r.applied(o)}async onWebCardInserted(e){let{store:r}=this.state,{url:o,thumbnailFile:i}=e,s=await $o.fromFile(i),a=no.get(hi(i)),[l]=s.getLayoutSize(),c,d;if(e instanceof Al){let h=window.devicePixelRatio;c=this.getCardTransform().invert().cross(e.position.x*h,e.position.y*h),d=!1}else{let h=this.layout.add(l,!1);c=Or(h),d=!0}let u=r.userInfo,p=KP({creator:this.card,author:{id:u.user_id,name:Ut(u)},url:o,position:c,contentSize:l,isTransition:d});this.cardInsertionEvent={cardId:p.cards[0].id,type:"inside"},eo(r,{file:i,metadata:s.getMetadata(),description:e.title,extension:a,cardIdList:[p.cards[0].id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(p)}async onWebCardInsertedFromQr(e){let{store:r}=this.state,{created:o,type:i,thumbnail:s}=e,[a]=s.getLayoutSize(),l=this.layout.add(a,!1),c=Or(l);this.card.pinned&&i==="next"&&We(qs(this.card.id,!1));let d=Pf({creator:this.card,card:o,position:c,type:i});this.cardInsertionEvent={cardId:d.cards[0].id,type:i};let u=no.get(hi(s.file));eo(r,{file:s.file,metadata:s.getMetadata(),extension:u,cardIdList:[d.cards[0].id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(d)}async onPictureCardCreateFromExtension(e){let{store:r}=this.state,o=r.userInfo,i=e.file,s=await $o.fromFile(i),a=no.get(hi(i)),[l]=s.getLayoutSize(),c=this.layout.add(l,!1),d=Or(c),u=qP({creator:this.card,author:{id:o.user_id,name:Ut(o)},position:d,asset:{description:s.name,extension:a},contentSize:l});this.cardInsertionEvent={cardId:u.cards[0].id,type:"inside"},eo(r,{file:i,metadata:s.getMetadata(),extension:a,cardIdList:[u.cards[0].id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(u)}async onLocalFileInserted(e){let{store:r}=this.state,[o]=e.file.getLayoutSize(),i=e.file instanceof Is,s=this.layout.add(o,i),a=Or(s);this.card.pinned&&e.type==="next"&&We(qs(this.card.id,!1));let l=d0({creator:this.card,type:e.type,position:a,user:r.userInfo,file:e.file}),c=e.file.getMetadata();eo(r,{file:e.original,metadata:c,extension:e.file.extension,cardIdList:l.cards.map(d=>d.id),thumbnailsGenerator:()=>e.file.generateThumbnails()}),this.cardInsertionEvent={cardId:l.cards[0].id,type:e.type},We(l)}async onLocalFilePasted(e){let r=await Vf(e.files),o=await Promise.all(r.map(Pu));if(o.some((l,c)=>{if(l instanceof zi){let d=e.files[c];return Om(d,l)}})){let l=De.get().strings;if(!confirm(l.exceedVideoQuality))throw new mc("abort video-file uploading.")}let s=this.state.store.userInfo,a=this.state.store;for(let l=0;l<r.length;l++){let c=o[l],[d]=c.getLayoutSize(),u;if(l===0&&e.position){let g=window.devicePixelRatio,v=this.getCardTransform().invert().cross(e.position.x*g,e.position.y*g);u=this.layout.set(v,d)}else{let g=c instanceof Is&&c.pageSizes.length>1;u=this.layout.add(d,g)}let p=Or(u),h=d0({creator:this.card,type:"inside",file:c,user:s,position:p,ignoreTransition:e.position!==void 0}),f=c.getMetadata(),m=h.cards.map(g=>g.id);eo(a,{file:r[l],metadata:f,extension:c.extension,cardIdList:m,thumbnailsGenerator:()=>c.generateThumbnails()}),We(h)}}onNoteEffect(e){var i,s;let r=e.command,o=e.byOtherUserId==null;if(r.type==="cardsInserted"){let[a]=r.cards;if(this.cardInsertionEvent&&a.id===this.cardInsertionEvent.cardId){let l=this.cardInsertionEvent;if(this.cardInsertionEvent=void 0,l.type==="inside"){let{left:c,top:d}=a.metadata.position,{width:u,height:p}=a.metadata.layout_size;this.state.store.reduce(Uo({id:a.id,favorite:!1,pinned:!1,canPin:!0,canAlign:!1,canRotate:a.type==="picture",bounds:this.boundingBoxRectToScreen({x:c-u/2,y:d-p/2,width:u,height:p})}),cr(!1),Pr(void 0)),this.adjustViewport(r)}else this.startPager({dir:"forward"})}else((i=r.transitions)==null?void 0:i.some(l=>l.cardId===this.card.id))&&this.layout.reset()}else if(r.type==="cardDeleted")if(r.cardId===this.card.id)if(r.toCardId&&this.callback.getCardOnNote){let a=this.callback.getCardOnNote(r.toCardId);if(!a)throw new Error("can not found card on note");this.setCard({card:a}),this.callback.onCardSelected(a)}else this.popPage(!0);else this.card.isDescendantOf(r.cardId)&&this.popPage(!0);else if(r.type==="groupDeleted")(e.effect.deleted.includes(this.card.id)||e.effect.deleted.some(a=>this.card.isDescendantOf(a)))&&this.popPage(!0);else if(r.type==="cardMoved")!o&&r.cardId===this.card.id&&this.layout.reset();else if(r.type==="groupMoved")!o&&r.topOfGroup===this.card.head().id&&this.layout.reset();else if(r.type==="cardsCopied"){if(!o){((s=r.transitions)==null?void 0:s.some(l=>l.cardId===this.card.id))&&this.layout.reset();return}let a=this.card.getCard(r.srcCardId);r.isRootCard?r.grouped?this.popPage(!1):a.pinned?this.popPage(!1):this.startPager({dir:"forward",activateTextEditor:r.activateTextEditor}):this.adjustViewport(r)}else r.type==="cardSizesChanged"?!o&&r.firedCardId===this.card.id&&this.layout.reset():r.type==="cardMarginsChanged"?!o&&r.cardId===this.card.id&&this.layout.reset():r.type==="groupStateChanged";this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(1)}clearCardModificationMonitor(){let e=this.modificationMonitoredCard;return this.modificationMonitoredCard=void 0,e}getCardTransformInTransform(e,r){let o=new ft;return o.scale(Cn(this.canvas,e.size)),o.e=-e.position.x*o.a,o.f=-e.position.y*o.d,o.prependMatrix(r),o}getCardTransform(){return this.getCardTransformInTransform(this.card,this.mtx)}handleLeftSingle(e,r){var a,l,c,d;if(this.state.editorStore.narrationRecording||(e==="down"&&(this.shouldHandleEvent=!0,this.abortBounceAnimation()),!this.shouldHandleEvent||this.translateAnimation))return;e==="up"&&(this.shouldHandleEvent=!1,this.sar.setFineRedrawCountDown(30));let o=this.handleEventOnCard(e,r);if((a=this.state.store.desktop)==null?void 0:a.positionPopoverOpen){let u=Fc(r),p=uo(r);(e==="move"&&u>5||e==="up"&&p)&&this.state.store.reduce(Pr(void 0))}if(o&&!this.moveMode){if(e==="down"){this.touchDownCardPosition=Re(o.renderer.card.position);let p=(l=o.renderer.moveCardTarget)==null?void 0:l.card;p&&(this.callback.onHoverCard(p.parent),this.shrinkManager.heldUp({card:p,grouped:p.isFolded||o.target==="foldHandle"}))}else if(e==="move"){let p=(c=this.state.store.desktop)==null?void 0:c.heldCard,h=p&&this.card.getCard(p.head);if(h){let f=this.getCardTransform(),m=f.a,g=f.invert().cross(r.x,r.y),v=nC({cardHolder:this.card,card:h,desktopScale:m,forHitTest:!0,pivot:g,rootCard:this.card});uC({nextHover:v,root:this.card,pivot:g,desktopScale:m,shrinkManager:this.shrinkManager,longHoverDetector:this.longHoverDetector,onHoverChanged:this.callback.onHoverCard})}}this.sar.setFineRedrawCountDown(1),this.sar.needsRoughRedraw();let u=o.target;(u==="card"||u==="foldHandle"||u==="bbLeftTop")&&this.publishTrashBoxInIfNeeded({ev:r,renderer:o.renderer,grouped:u==="foldHandle"||o.renderer.card.isFolded,up:e==="up"});return}if(this.quizButtonState&&this.handleEventOnCoverButton(r,e,this.quizButtonState,u=>{var p,h;return(h=(p=this.callback).onQuizButtonClicked)==null?void 0:h.call(p,u)})||this.attendanceButtonState&&this.handleEventOnCoverButton(r,e,this.attendanceButtonState,u=>{var p,h;return(h=(p=this.callback).onAttendanceButtonClicked)==null?void 0:h.call(p,u)}))return;let i;e==="move"?(this.moveMode||(this.moveMode=this.judgeMoveMode(r)),this.updateMtxTransition(r),this.moveMode==="horizontal"||this.moveMode==="vertical"?this.sar.setFineRedrawCountDown(1):this.sar.setFineRedrawCountDown(30),Fc(r)>5&&((d=this.state.store.desktop)==null?void 0:d.popoverOpen)&&this.state.store.reduce(cr(!1))):e==="up"&&(uo(r)&&(this.shouldExitTextEditingOnMouseUp(r)&&(this.state.editorStore.setTool(Ge.Finger),this.state.store.reduce(lo())),this.updateFullScreenSharing()),i=this.setAnimation(r),this.sar.setFineRedrawCountDown(1),this.handledDoubleFinger=!1,this.moveMode=void 0);let s=this.moveMode;i instanceof ul?s="vertical":i instanceof Gl&&(s="horizontal"),this.state.editorStore.setEditorMoveMode(s)}shouldExitTextEditingOnMouseUp(e){var i;if(this.state.editorStore.selectedTool!==Ge.Text)return!1;let r=this.getCardUnderPoint(e);if(r===void 0)return!0;let o=(i=this.state.store.desktop)==null?void 0:i.focusingCard;return!o||o.id===this.card.id?!1:r===this.card}handleRightSingle(e,r){var i;if(e!=="up"||!uo(r))return;if(!this.state.editorStore.toolVisible){this.state.editorStore.setToolVisible(!0),this.state.store.reduce(zo(!0));return}if(!this.role.enableRightClick||!!((i=this.state.store.screenSharingState)==null?void 0:i.sessionId))return;let o=this.getCardUnderPoint(r);if(!o||o===this.card){if(this.state.editorStore.selectedTool===Ge.Text)this.state.editorStore.setTool(Ge.Finger);else{let s=window.devicePixelRatio,a=Re(r.x/s,r.y/s);this.state.store.reduce(Pr(a),cr(!1))}return}else!fi(o)&&this.state.editorStore.selectedTool===Ge.Text&&this.state.editorStore.setTool(Ge.Finger);this.state.store.reduce(Uo({id:o.id,pinned:o.pinned,favorite:o.favorite,canPin:o.canPin(),canRotate:o.canRotate(),canAlign:o.canAlign(),bounds:this.boundingBoxRectToScreen(o.bounds)}),Pr(void 0),cr(!0)),this.sar.setFineRedrawCountDown(1)}judgeMoveMode(e){if(!e.down)return;let r=window.devicePixelRatio,o=e.x-e.down.x,i=e.y-e.down.y,s=5*r;if(Math.abs(o)<s&&Math.abs(i)<s)return;let{selectedTool:a}=this.state.editorStore;if(Math.abs(o)<Math.abs(i)&&i>0&&a!==Ge.Text){if(this.mtx.a<=1)return this.canLeave()?"vertical":"horizontal"}else{if(Math.abs(o)<Math.abs(i)||!this.role.canLeave)return"free";{let l=this.getOverScrollAmount(this.mtx.tx+o,this.mtx.ty+i,this.mtx.a);if(l.left>0&&o>0&&this.hasPrev||l.right>0&&o<0&&this.hasNext)return"horizontal"}}return"free"}canLeave(){let e=this.role.canLeave;return e&&ev(this.state.store)&&(e=!this.rootCardMonitor.rootCards(this.card)),e}get hasPrev(){var e,r;return this.card.hasPrevCardOrGroup||((r=(e=this.documentPagerDelegate)==null?void 0:e.hasPreviousDocument())!=null?r:!1)}get hasNext(){var e,r;return this.card.hasNextCardOrGroup||((r=(e=this.documentPagerDelegate)==null?void 0:e.hasNextDocument())!=null?r:!1)}getScrollLimit(e){let r=this.getCardSizeOnCanvas(this.card,e),o=window.devicePixelRatio,i={width:this.width,height:this.height-this.state.screen.keyboardHeight*o},s,a;i.width<r.width?(s=i.width-r.width/2,a=r.width/2):s=a=i.width/2;let l,c;return i.height<r.height?(l=i.height-r.height/2,c=r.height/2):l=c=i.height/2,{minTx:s,minTy:l,maxTx:a,maxTy:c}}getOverScrollAmount(e,r,o){let{minTx:i,maxTx:s,minTy:a,maxTy:l}=this.getScrollLimit(o),c=Math.max(0,e-s),d=Math.max(0,i-e),u=Math.max(0,r-l),p=Math.max(0,a-r);return{left:c,top:u,right:d,bottom:p}}updateMtxTransition(e){let r=this.mtx.clone();if(this.moveMode==="horizontal")r.tx+=e.dx,this.mtx=r;else if(this.moveMode==="vertical")r.ty+=e.dy,r.ty<this.height/2&&(r.ty=this.height/2),this.mtx=r;else if(this.moveMode==="free"){let o=this.getOverScrollAmount(r.tx+e.dx,r.ty+e.dy,r.a),i;o.left===0&&o.right===0?i=1:i=.2;let s;o.top===0&&o.bottom===0?s=1:s=.2,r.tx+=e.dx*i,r.ty+=e.dy*s,this.mtx=r,i===1&&s===1&&this.updateFullScreenSharing()}}setAnimation(e){let r=e.timestamp-e.down.timestamp,o=Math.abs(e.x-e.down.x),i=window.devicePixelRatio,s=!this.handledDoubleFinger&&r<500&&o>2*i,a=this.getOverScrollAmount(this.mtx.tx,this.mtx.ty,this.mtx.a);if(this.role.canLeave)if(this.moveMode==="horizontal"){let l=s||a.left>=this.width/2||a.right>=this.width/2;l&&a.right>0&&this.hasNext?this.startPager({dir:"forward"}):l&&a.left>0&&this.hasPrev&&this.startPager({dir:"backward"})}else this.moveMode==="vertical"&&this.mtx.a<=1&&(s||a.top>=this.height/2)&&this.startPopStackAnimation();if(!this.translateAnimation&&!this.state.documentLoading){let l=Gu(e,.5);this.startBounceAnimation(l)}return this.translateAnimation}startPager(e){let{dir:r,activateTextEditor:o,byKey:i}=e;this.state.editorStore.setEditorMoveMode("horizontal"),r==="forward"?($e(this.hasNext),this.card.hasNextCardOrGroup?this.startCardPager({dir:r,activateTextEditor:o,byKey:i}):this.startDocumentPager(r)):($e(this.hasPrev),this.card.hasPrevCardOrGroup?this.startCardPager({dir:r,activateTextEditor:o,byKey:i}):this.startDocumentPager(r))}startCardPager(e){let{dir:r,activateTextEditor:o,byKey:i}=e,s=.5,a=Re(this.mtx.tx,this.mtx.ty),l=this.height/2;if(r==="forward"){let c=this.card.next||this.card.nextGroup;if(!c)return;if(i){this.forwardPage();return}let d=this.width/2-this.getDistanceToAdjacentCard(c),u=Re(d,l),p=ea(a,u,s,Fo);this.translateAnimation=new Gl(p,r,!!o)}else if(r==="backward"){let c=this.card.prev||this.card.prevGroup;if(!c)return;if(i){this.backwardPage();return}let d=this.width/2+this.getDistanceToAdjacentCard(c),u=Re(d,l),p=ea(a,u,s,Fo);this.translateAnimation=new Gl(p,r,!!o)}}startDocumentPager(e){var r,o;e==="forward"?(r=this.documentPagerDelegate)==null||r.onDocumentSelected("next"):e==="backward"&&((o=this.documentPagerDelegate)==null||o.onDocumentSelected("prev"))}getDistanceToAdjacentCard(e){let r=this.getCardSizeOnCanvas(this.card,this.mtx.a),o=this.getCardSizeOnCanvas(e,1),{width:i}=this.canvas,s=20*window.devicePixelRatio,a=Math.max(s,(i-r.width)/2),l=Math.max(s,(i-o.width)/2),c=Math.max(0,a+l);return r.width/2+c+o.width/2}startPopStackAnimation(){if(!this.canLeave())return;this.state.store.reduce(zo(!0)),this.card.parent&&this.state.editorStore.setToolVisible(!0),this.state.editorStore.setEditorMoveMode("vertical");let e=this.height*1.5;this.translateAnimation=new ul(ea(Re(this.mtx.tx,this.mtx.ty),Re(this.mtx.tx,e),.25,Fo))}startBounceAnimation(e){if(this.translateAnimation)return;let r=this.mtx.clone(),o=this.getOverScrollAmount(r.tx,r.ty,r.a),i=.25,s=r.tx,a=r.ty;if(o.left>0?s=r.tx-o.left:o.right>0&&(s=r.tx+o.right),o.top>0?a=r.ty-o.top:o.bottom>0&&(a=r.ty+o.bottom),s!==r.tx||a!==r.ty)this.translateAnimation=ea(Re(this.mtx.tx,this.mtx.ty),Re(s,a),i,Fo);else{let l=Re(this.mtx.tx,this.mtx.ty),{minTx:c,minTy:d,maxTx:u,maxTy:p}=this.getScrollLimit(this.mtx.a);this.translateAnimation=Z0({start:l,velocity:e,minX:c,minY:d,maxX:u,maxY:p})}}abortBounceAnimation(){this.translateAnimation instanceof Gl||this.translateAnimation instanceof ul||(this.translateAnimation=void 0)}handleEventOnCard(e,r){var s,a,l,c,d,u,p;let o=this.getCardTransform(),i=this.state.editorStore.toolVisible;for(let h of this.card.bubblingOrderIterator()){if(this.card===h){if(e!=="up")continue;if(uo(r))switch(this.state.editorStore.selectedTool){case Ge.Finger:!((s=this.state.store.desktop)==null?void 0:s.focusingCard)&&!((a=this.state.store.desktop)==null?void 0:a.positionPopoverOpen)&&(this.state.editorStore.setToolVisible(!i),this.state.store.reduce(zo(!i)));break;case Ge.Text:h.gadgets.title&&h.gadgets.title.text.length>0&&this.callback.onCardClicked(h,r);break}else IQ(r)&&(i||(this.state.editorStore.setToolVisible(!0),this.state.store.reduce(zo(!0))));continue}let f=bb(this.state.store)||!((l=this.state.store.screenSharingState)==null?void 0:l.sessionId);if(!i||!f)continue;let m=Dt(h,this.callback);if(e==="down"){let g=m.onDown({ev:r,mtx:o,focused:((d=(c=this.state.store.desktop)==null?void 0:c.focusingCard)==null?void 0:d.id)===h.id,root:this.card,toolVisible:i});if(g)return{renderer:m,target:g}}else if(e==="move"){let g=m.onMove(r,o);if(g)return Fc(r)>5&&this.state.store.reduce(cr(!1)),{target:g,renderer:m}}else if(e==="up"){let g=this.card,v=(u=m.moveCardTarget)==null?void 0:u.card,y=(p=this.state.store.desktop)==null?void 0:p.hoverCardId,S=m.onUp({ev:r,mtx:o,root:this.card});if(S){let C=uo(r),b=o.invert().cross(r.x,r.y);return v&&!C?S==="card"||S==="bbLeftTop"?(this.rebuildTreeStateIfNeeded({root:g,card:v,hoverCardId:y,pointer:b,grouped:v.isFolded}),this.insertConnectionIfNeeded({ev:r,mtx:o,card:v}),this.longHoverDetector.clear(),this.shrinkManager.release()):S==="foldHandle"&&(this.rebuildTreeStateIfNeeded({root:g,card:v,hoverCardId:y,pointer:b,grouped:!0}),this.longHoverDetector.clear(),this.shrinkManager.release()):S==="connectorHandle"?this.onConnectorUp({from:h,pt:b,ignoreFoldHandle:!1,isClick:C}):S==="connection"&&this.onConnectorUp({from:h,pt:b,ignoreFoldHandle:C,isClick:C}),{target:S,renderer:m}}}}if(e==="down")for(let h of this.card.bubblingOrderIterator())Dt(h,this.callback).resetHandlingComponent();else e==="up"&&this.state.editorStore.selectedTool!==Ge.Text&&uo(r)&&this.state.store.reduce(lo())}handleEventOnCoverButton(e,r,o,i){if(!uo(e))return this.resetCoverButtonInteraction(o),!1;let l=this.getCardTransform().invert().cross(e.x,e.y),c;for(let d of o){let{state:u}=d;if(!!u.bounds&&Si(u.bounds,l)){c=d;break}}if(r==="up"){let d=o.find(u=>u.state.interaction==="pushed");if(this.resetCoverButtonInteraction(o),c&&c===d)return this.playManager.pause(this.state.editorStore),i(c.role),!0}else if(r==="move"){if(o.some(d=>d.state.interaction!=="none"))return!0}else if(r==="down"&&c){for(let d of o)d.state.interaction=d===c?"pushed":"none";return this.sar.setFineRedrawCountDown(1),!0}return!1}resetCoverButtonInteraction(e){let r=!1;e.forEach(o=>{o.state.interaction==="pushed"&&(o.state.interaction="none",r=!0)}),r&&this.sar.setFineRedrawCountDown(1)}hideTool(e){this.timeOutId&&clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.closed||this.state.editorStore.setToolVisible(!1)},e)}setToolVisible(e){this.timeOutId&&clearTimeout(this.timeOutId),this.state.editorStore.setToolVisible(e)}ensureTextCaretVisible(e){let r=this.mtx.clone(),o=window.devicePixelRatio,i=20/o,s=Tp(nt(e.x-i,e.y-i,e.width+2*i,e.height+2*i),o),a=nt(0,0,this.width,Math.max(this.height-this.state.screen.keyboardHeight*o,0));if(_l(a,s))return;let c;s.x<a.x?c=a.x-s.x:a.x+a.width<s.x+s.width?c=a.x+a.width-(s.x+s.width):c=0;let d;s.y<a.y?d=a.y-s.y:a.y+a.height<s.y+s.height?d=a.y+a.height-(s.y+s.height):d=0;let u=.25;this.abortBounceAnimation(),!this.translateAnimation&&(c!==0||d!==0)&&(this.translateAnimation=ea(Re(r.tx,r.ty),Re(r.tx+c,r.ty+d),u,Fo))}get editingCard(){var r,o;let e=(o=(r=this.state.store.desktop)==null?void 0:r.focusingCard)==null?void 0:o.id;if(e){let i=this.card.getCard(e);if(i)return i}return this.card}get textEditingCard(){if(this.state.editorStore.selectedTool===Ge.Text)return this.editingCard}onConnectorUp(e){var p;let{from:r,pt:o,ignoreFoldHandle:i,isClick:s}=e,{parent:a}=r,l=[...this.card.familyIterator()].filter(h=>{let f=h.parent;return a&&f?a.id===f.id:a===f}),c=this.card,d=this.mtx,u=(p=this.state.store.desktop)==null?void 0:p.focusingCard;for(let h=l.length-1;h>=0&&!Dt(l[h],this.callback).onConnectorUp({pt:o,from:r,root:c,ignoreFoldHandle:i,focused:(u==null?void 0:u.id)===l[h].id,mtx:d,isClick:s});h--);this.callback.onConnectorDismissed(r)}rebuildTreeStateIfNeeded(e){var l;let{root:r,card:o,hoverCardId:i,pointer:s,grouped:a=!1}=e;if(!i)o.parent!==r&&this.callback.treeStateChanged(o,r.id,a);else if(i!==((l=o.parent)==null?void 0:l.id)){let d={scale:this.shrinkManager.scale,pivot:s};this.callback.treeStateChanged(o,i,a,d)}}insertConnectionIfNeeded({ev:e,mtx:r,card:o}){var i;$e(o.parent!==void 0);for(let s of o.parent.children){if(s===o)continue;if(Dt(s,this.callback).getObjectUnderPoint({ev:e,mtx:r,focused:!1,toolVisible:!0})==="connection"){let c=s.isFolded?s.tail():s,d=(i=c.next)!=null?i:c.nextGroup;if($e(d!=null),o.canBeConnectedFrom(c)&&d.canBeConnectedFrom(o)){this.callback.onConnectorInserted(c,o,d);break}}}}drawToolPref(){let{prefs:e,activeTool:r,activePen:o}=this.card.document?this.state.store.userPreference.documentDrawToolPrefs:this.state.store.userPreference.cardDrawToolPrefs;return{penType:r==="pen"?o:r,pref:e[r]}}initDrawn(e,r,o){let i=r==="eraser"?this.mtx.a:1,s=o.width/i,a=o.colors[o.activeColor];e.beginStroke({penType:r,width:s,color:pn(a),isRuler:o.activeRuler}),this.fineStrokeRenderer.clearCurrent(this.role.drawnType)}addDrawn({ev:e,sm:r,penType:o}){var u;let i=0;(o==="pen"||o==="brush")&&(Hu(e.original)?i=e.original.pressure:eC(e.original)&&(i=e.original.force));let s=this.strokeManager.unsafeCurrentStroke(),a=new ki,l=(u=e.coalescedPoints)!=null?u:[e];for(let p=0;p<l.length;p++){let h=l[p],f=r.addPoint(h.x,h.y,i);f&&a.add(f)}let c=Cn(this.canvas,this.card.size),d=new ft().scale(c).prependMatrix(this.mtx);this.fineStrokeRenderer.appendStroke({canvasSize:this.canvas,mtx:d,card:this.card,type:this.role.drawnType,stroke:s,isEraser:s.type==="eraser",rectUpdated:a.rect})}endDrawn(e){let r=this.strokeManager;this.fineStrokeRenderer.commitCurrent(this.role.drawnType),this.state.editorStore.setExecutableStrokeOperation(r.canUndo(),r.canRedo(),r.canClearAllStroke());let o=gr.get(this.card),i=this.card.createDrawnGeometry(this.role.drawnType),s=o[this.role.drawnType].redrawThumbnails({geometry:i,contents:r.packContents()});this.callback.onDrawnMarkedAsUnsaved({card:this.card,op:e,thumbs:s})}handlePointerDraw(e,r){let o=!1,i=this.strokeManager;i.updateTransformMatrix({canvasSize:Ze(this.canvas),mtx:this.mtx.clone(),card:this.card});let{penType:s,pref:a}=this.drawToolPref(),l=this.getCardTransform().invert().cross(r.x,r.y);if(e==="down"&&(this.initDrawn(i,s,a),this.addDrawn({ev:r,sm:i,penType:s}),o=!1,We(xB(this.card.id,this.state.store.userInfo,l))),!this.strokeManager.cancelled){if(e==="move")this.addDrawn({ev:r,sm:i,penType:s}),o=!0,We(xB(this.card.id,this.state.store.userInfo,l));else if(e==="up"){let c=this.strokeManager.endStroke();c&&(this.endDrawn(c),o=!0)}o&&(this.sar.setFineRedrawCountDown(1),this.sar.needsRoughRedraw(),this.fineRedrawStrategy="bitblt")}}handleLongPress(e){this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1);let r=this.getCardTransform(),{toolVisible:o}=this.state.editorStore,{teacherToolVisible:i}=this.state.store;this.quizButtonState&&this.resetCoverButtonInteraction(this.quizButtonState),this.attendanceButtonState&&this.resetCoverButtonInteraction(this.attendanceButtonState);for(let s of this.card.bubblingOrderIterator()){if(s===this.card||!o)continue;if(Dt(s,this.callback).predictPointerEventResponse({ev:e,mtx:r,root:this.card,toolVisible:o&&i})===Mo.Handle)return!fi(s)&&this.state.editorStore.selectedTool===Ge.Text&&this.state.editorStore.setTool(Ge.Finger),this.state.store.reduce(Uo({id:s.id,pinned:s.pinned,favorite:s.favorite,canPin:s.canPin(),canRotate:s.canRotate(),canAlign:s.canAlign(),bounds:this.boundingBoxRectToScreen(s.bounds)}),cr(!0),Pr(void 0)),!0}if(this.state.editorStore.selectedTool===Ge.Text)this.state.editorStore.setTool(Ge.Finger);else{let s=window.devicePixelRatio,a=Re(e.x/s,e.y/s);this.state.store.reduce(cr(!1),Pr(a))}return!1}rectEditorToScreen(e){return this.transformEditorToScreen.applied(e)}boundingBoxRectToScreen(e){let r=this.transformEditorToScreen,o=em(this.transformEditorToScreen.a)/window.devicePixelRatio;return r.applied(Mg(e,Hn(o)))}get transformEditorToScreen(){let e=window.devicePixelRatio;return this.getCardTransform().scale(1/e)}shouldHandleLongPress(e){let{selectedTool:r,toolVisible:o,narrationRecording:i}=this.state.editorStore,{teacherToolVisible:s,screenSharingState:a}=this.state.store;switch(r){case Ge.Text:break;case Ge.Recording:if(i)return!1;break;case Ge.Draw:return!1;case Ge.Finger:if(!o||a)return!1;break;default:ge.warn("\u672A\u77E5\u306E EditorTool. \u5B9F\u88C5\u304C\u4E0D\u5B8C\u5168\u3067\u3059");break}let l=this.getCardTransform();for(let c of this.card.bubblingOrderIterator()){if(c===this.card)continue;let u=Dt(c,this.callback).predictPointerEventResponse({ev:e,mtx:l,root:this.card,toolVisible:o&&s});if(u===Mo.Never)return!1;if(u===Mo.Handle)return!0}return!0}handleDoubleClick(e){let r=this.getCardTransform(),{toolVisible:o}=this.state.editorStore,{teacherToolVisible:i}=this.state.store;for(let s of this.card.bubblingOrderIterator()){let a=Dt(s,this.callback);if(a.predictPointerEventResponse({ev:e,mtx:r,root:this.card,toolVisible:o&&i})===Mo.Handle)return this.onDoubleClick(s),{renderer:a}}}shouldHandleDoubleClick(e){let{selectedTool:r,toolVisible:o,narrationRecording:i}=this.state.editorStore,{teacherToolVisible:s,screenSharingState:a}=this.state.store;if(r===Ge.Draw||i||!!(a==null?void 0:a.sessionId))return!1;let l=this.getCardTransform();for(let d of this.card.bubblingOrderIterator()){if(d===this.card)continue;let p=Dt(d,this.callback).predictPointerEventResponse({ev:e,mtx:l,root:this.card,toolVisible:o&&s});if(p===Mo.Never)return!1;if(p===Mo.Handle)return!!(this.editingCard===d&&fi(d))}let c=this.getObjectUnderPoint(e);return c?!Gq(c.eventTarget)&&!Vq(c.eventTarget):!0}onDoubleClick(e){let{selectedTool:r}=this.state.editorStore;if(this.state.editorStore.setToolVisible(!0),r===Ge.Text)if(fi(e)){let i=this.editingCard;if(i.id!==e.id){let s=Dt(i,this.callback);s.setTextSelectedRange(void 0),s.setTextCompositionRange(void 0)}}else this.state.editorStore.setTool(Ge.Finger);let o=this.card.id!==e.id&&r!==Ge.Text&&!(e instanceof zr)&&!(e instanceof an);this.state.store.reduce(Uo({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:this.boundingBoxRectToScreen(e.bounds)}),cr(o),zo(!0)),this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1)}getObjectUnderPoint(e){var d,u;let{toolVisible:r,selectedTool:o,narrationRecording:i}=this.state.editorStore,{teacherToolVisible:s,desktop:a}=this.state.store,l=this.getCardTransform();if(!i&&o!==Ge.Draw){if(this.quizButtonState){let p=l.invert().cross(e.x,e.y);for(let h of this.quizButtonState){let{state:f,role:m}=h;if(!!f.bounds&&Si(f.bounds,p))return{eventTarget:jX(m)}}}if(this.attendanceButtonState){let p=l.invert().cross(e.x,e.y);for(let h of this.attendanceButtonState){let{state:f,role:m}=h;if(!!f.bounds&&Si(f.bounds,p))return{eventTarget:XX(h.role)}}}}let c=bb(this.state.store)||!((d=this.state.store.screenSharingState)==null?void 0:d.sessionId);if(!(!r||!c))for(let p of this.card.bubblingOrderIterator()){if(p.id===this.card.id)continue;let f=Dt(p,this.callback).getObjectUnderPoint({ev:e,mtx:l.clone(),focused:((u=a==null?void 0:a.focusingCard)==null?void 0:u.id)===p.id,root:this.card,toolVisible:r&&s});if(f)return o===Ge.Draw||i?void 0:{card:p,eventTarget:f}}}getCardUnderPoint(e){var s,a,l,c;let r=this.getCardTransform();for(let d of this.card.bubblingOrderIterator()){if(d.id===this.card.id)continue;if(Dt(d,this.callback).getObjectUnderPoint({ev:e,mtx:r.clone(),focused:((a=(s=this.state.store.desktop)==null?void 0:s.focusingCard)==null?void 0:a.id)===d.id,root:this.card,toolVisible:this.state.editorStore.toolVisible&&this.state.store.teacherToolVisible}))return d}if(Dt(this.card,this.callback).getObjectUnderPoint({ev:e,mtx:r.clone(),focused:((c=(l=this.state.store.desktop)==null?void 0:l.focusingCard)==null?void 0:c.id)===this.card.id,root:this.card,toolVisible:this.state.editorStore.toolVisible&&this.state.store.teacherToolVisible}))return this.card}startEnterAnimation(e,r){let o=nt(r.applied(e.bounds)),i=nt(0,0,this.canvas.width,this.canvas.height),s=ti(Or(i),Or(o)),a=this.mtx.tx-s.x,l=this.mtx.ty-s.y,c=nt(a-o.width/2,l-o.height/2,o.width,o.height),d=Cn(this.canvas,c);this.enterAnimation=new A1({fromPos:Or(c),toPos:Or(i),fromScale:1/d,toScale:1,durationSec:.3})}startExitAnimation(e,r){this.exitAnimation=new I1({card:e,baseMtx:r,fromScale:1,toScale:.75,durationSec:.3})}handleKey(e){if(this.strokeManager.currentStroke||this.zoomTimer.isSet())return!1;let r=E0(),o=r&&e.metaKey||!r&&e.ctrlKey,i=this.state.editorStore.selectedTool===Ge.Draw;return e.key==="ArrowRight"&&this.hasNext?(this.startPager({dir:"forward",byKey:!0}),!0):e.key==="ArrowLeft"&&this.hasPrev?(this.startPager({dir:"backward",byKey:!0}),!0):e.key==="ArrowDown"&&this.mtx.a<=1?(this.startPopStackAnimation(),!0):i&&this.state.editorStore.canUndoStroke&&e.key==="z"&&o&&!e.shiftKey?(this.undo(),!0):i&&this.state.editorStore.canRedoStroke&&e.key.toLowerCase()==="z"&&o&&e.shiftKey?(this.redo(),!0):!1}publishTrashBoxInIfNeeded(e){if(this.mtx.a>=1)return;let{up:r,grouped:o,ev:i,renderer:s}=e,a=iP(i);if(r&&a==="editorTrashBox"){let l=Wl(s.card,o);if(confirm(l))o?this.callback.onGroupDeleted(s.card):this.callback.onCardDeleted(s.card);else if(this.touchDownCardPosition){let{x:c,y:d}=this.touchDownCardPosition;if(o){let u=s.card.position,[p,h]=[c-u.x,d-u.y];this.callback.onGroupMoved(s.card.head(),{pos:Re(c,d),delta:Re(p,h)},!0)}else this.callback.onCardMoved(s.card,{x:c,y:d},!0)}this.hitFixedUI=void 0,this.callback.onTrashBoxHit(!1)}else r?(this.hitFixedUI=void 0,this.callback.onTrashBoxHit(!1)):a!==this.hitFixedUI&&(this.hitFixedUI=a,this.callback.onTrashBoxHit(a!==void 0))}restoreParentStack(e){if(this.callback.getCardOnNote)for(let r=0;r<e.length-1;r++){let o=this.callback.getCardOnNote(e[r].cardId);o&&this.parentStack.push({card:o,mtx:this.initialMatrix()})}}onNextState(e,r){var l,c,d,u;let o=this.state;this.state=e,this.onPlaySyncStatusChanged(),this.role.enableFullScreenSharing&&this.onSharingStateChanged(o.store,this.state.store),il(o.screen,e.screen)||(r=r!=null?r:this.mtxKeepVisualCenter(o.screen,e.screen),this.updateFullScreenSharing(r)),r&&!r.equals(this.mtx)&&(this.mtx=r,this.abortBounceAnimation(),(ev(this.state.store)||!md(this.state.store)&&!this.state.store.screenSharingForPresenter)&&this.startBounceAnimation(new er(0,0)),this.sar.setFineRedrawCountDown(1));let i=Dt(this.card,this.callback);i.player=e.editorStore.mediaPlayer;let s=this.card;if(o===e)e.viewStack[e.viewStack.length-1].animate&&this.startEnterAnimation(e.card,this.state.noteMtx),this.setCard({card:e.card,mtx:r});else if(o.viewStack.length>e.viewStack.length){this.playManager.pause(this.state.editorStore),this.startExitAnimation(this.card,this.mtx.clone());let p=o.viewStack.length-e.viewStack.length,h;for(let f=0;f<p;f++)h=(l=this.parentStack.pop())==null?void 0:l.mtx;this.setCard({card:e.card,mtx:h})}else o.viewStack.length<e.viewStack.length?(this.parentStack.push({mtx:this.mtx.clone(),card:this.card}),this.playManager.pause(this.state.editorStore),e.viewStack[e.viewStack.length-1].animate&&this.startEnterAnimation(e.card,this.getCardTransform()),this.setCard({card:e.card,mtx:r})):s!==e.card&&this.setCard({card:e.card,mtx:r});e.editorStore.continuePlaying()&&e.editorStore.nextCardId!==this.card.id&&(md(e.store)?((c=e.store.screenSharingState)==null?void 0:c.presenter)===e.store.userInfo.user_id&&this.forwardPage():this.forwardPage()),e.store.editorNeedsDisplayTrigger>o.store.editorNeedsDisplayTrigger&&this.setNeedsDisplay(),e.documentLoading!==o.documentLoading&&this.setNeedsDisplay();let a=(u=(d=this.card)==null?void 0:d.document)==null?void 0:u.id;a&&this.handleDocumentLayerUpdateNotification(a,o.store,e.store)}onPlaySyncStatusChanged(){var r;let{editorStore:e}=this.state;this.playManager.getAndClearNeedsUpdateFullScreenSharing()&&this.updateFullScreenSharing(),e.avEnded&&this.playManager.playEnded(),this.playManager.seeking&&this.updateFullScreenSharing(),((r=this.playManager)==null?void 0:r.rewind)&&this.playManager.endRewind(e)}onSharingStateChanged(e,r){var d,u,p,h,f,m;let o=(d=r.screenSharingState)==null?void 0:d.fullscreen,i=(u=r.screenSharingState)==null?void 0:u.sessionId,s=(p=r.screenSharingState)==null?void 0:p.presenter,a=(h=r.screenSharingState)==null?void 0:h.type,l=(f=e.screenSharingState)==null?void 0:f.sessionId,c=(m=e.screenSharingState)==null?void 0:m.type;if(i&&o&&(i!==l||a!==c||!s&&!this.fullScreenSharingProvider)&&this.initScreenSharing(o),l&&!i&&(this.rootCardMonitor.clear(),this.fullScreenSharingProvider=void 0,this.playManager.clearRemoteStatus()),r.screenSharingState){let g=r.screenSharingState.courseId,v=e.screenSharingActionNotification[g],y=r.screenSharingActionNotification[g];y&&(!v||v&&!Object.is(v,y))&&this.handleScreenSharingNotification(y)}e.screenSharingForPresenter&&!r.screenSharingForPresenter&&this.updateFullScreenSharing()}screenSharingRootCards(e){return this.rootCardMonitor.rootCards(e)}initScreenSharing(e){let r=this.state.editorStore;(r.selectedTool===Ge.Recording||r.selectedTool===Ge.Text)&&r.setTool(Ge.Finger),this.rootCardMonitor.set(this.card);let o=this.getFullScreenSharingState(),i={...e,...o};this.fullScreenSharingProvider=new U1(i,()=>this.state.store),this.playManager.setRemoteStatus(r,!0,o.isPlaying,o.playToken)}handleScreenSharingNotification(e){var r,o,i;if(xi(e)&&this.role.shouldSyncPlayController(this.state.store,e)){let{isPlaying:s,playToken:a}=e.fullscreen,l=e.fullscreen.zoom;l&&l.id===this.card.id&&(s=l.isPlaying,a=l.playToken),(r=this.playManager)==null||r.setRemoteStatus(this.state.editorStore,!0,s,a)}Mp(e)&&e.id===((o=this.state.store.screenSharingState)==null?void 0:o.sessionId)&&((i=this.playManager)==null||i.clearRemoteStatus(),this.rootCardMonitor.clear(),this.fullScreenSharingProvider=void 0,this.state.store.reduce(Zi(void 0),Co()))}handleDocumentLayerUpdateNotification(e,r,o){for(let i=0;i<this.card.memberCountOverGroup();i++){let s=Fp(e,i),a=r.documentAnnotationLayerUpdateNotification[s],l=o.documentAnnotationLayerUpdateNotification[s];a!==l&&l&&this.updateLayerAndThumb("annotation",l);let c=r.documentExtensionLayerUpdateNotification[s],d=o.documentExtensionLayerUpdateNotification[s];c!==d&&d&&this.updateLayerAndThumb("drawn",d)}}updateLayerAndThumb(e,r){var c,d;let{document:o,index:i,data:s}=r,a=To.forDocument(e,o,i),l=(c=a.getLayerMetadata())==null?void 0:c.generation;if(!l||s.generation>l){ge.log("updateLayerAndThumb:begin",e);let u=this.card.memberAt(i);((d=u==null?void 0:u.document)==null?void 0:d.id)===o&&a.updateDocumentLayer().then(p=>{ge.log("updateLayerAndThumb:done",p),p==="updated"&&(gr.forDocument(o,i,void 0)[e].redrawThumbnails({geometry:u.drawnGeometry(e),contents:a.packContents()}),this.state.store.reduce(Co()))})}}mtxKeepVisualCenter(e,r){let o=window.devicePixelRatio,i=Xt(e,o),s=Xt(r,o),a=yc(this.card.size,r),l=yc(this.card.size,e);if(a==null||l==null)return this.mtx;let c=l!==0?a/l:0,d=this.mtx.tx*c+(s.width-i.width*c)/2,u=this.mtx.ty*c+(s.height-i.height*c)/2;return new ft(this.mtx.a,0,0,this.mtx.d,d,u)}initPdfRenderer(e){var r;(r=this.finePdfRenderer)==null||r.close(),this.finePdfRenderer=void 0,e instanceof Bs&&(this.finePdfRenderer=new yw({card:e,signalRedraw:()=>{this.sar.setFineRedrawCountDown(1)}}))}setCard(e){var c,d;let{card:r,mtx:o,forceInit:i}=e,s=this.card;this.card=r;let a=(c=s.document)==null?void 0:c.id,l=(d=r.document)==null?void 0:d.id;a&&l&&a!==l?this.rootCardMonitor.set(r):this.rootCardMonitor.update(r),(i||s!==r)&&setTimeout(()=>{this.state.editorStore.setEditorMoveMode(void 0),this.state.editorStore.uninitializeAvSource(),this.playManager.playEnded();let u=Dt(s,this.callback);u.player=void 0,this.state.editorStore.initializeAvSource(r,this.state.store),this.playManager.pageChanged(this.state.editorStore,r),this.updateFullScreenSharing()},0),this.initPdfRenderer(r),r.gadgets.drawn||this.callback.onEnsureDrawnGadget(r),this.initStrokeManager(r),this.layout=new sv(r),this.invalidateMipmap(),this.initQuizButtonState(r),this.initAttendanceButtonState(r),this.state.store.reduce(lo()),this.mtx=o!=null?o:this.initialMatrix()}initStrokeManager(e){let r=this.strokeManager,o=()=>{let a=e.drawnGeometry(this.role.drawnType),l=r.packContents();this.fineStrokeRenderer.redrawFineThumbnail({mtx:this.getCardTransform(),canvasSize:Ze(this.canvas),contents:l,geometry:a,type:this.role.drawnType,contentLocalBounds:this.card.contentLocalBounds,drawnLocalBounds:this.card.drawnLocalBounds(this.role.drawnType)}),this.state.editorStore.setExecutableStrokeOperation(r.canUndo(),r.canRedo(),r.canClearAllStroke()),this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(1)};r.updateTransformMatrix({canvasSize:this.canvas,mtx:this.mtx.clone(),card:this.card});let i=gr.get(e),s=["drawn","annotation"];for(let a of s)i[a].load("high",this.card).then(o)}invalidateMipmap(){Dt(this.card,this.callback).invalidateMipmapWithLevel("high");let e=this.mtx.a*Cn(this.canvas,this.card.size);for(let r of this.card.familyIterator({withoutSelf:!0}))Dt(r,this.callback).invalidateMipmap(e)}initQuizButtonState(e){if(this.role.enableQuizCoverButtons){let r=this.state.store;this.quizButtonState=KX({card:e,store:r})}else this.quizButtonState=void 0}initAttendanceButtonState(e){if(this.role.enableAttendanceCoverButtons){let r=this.state.store;this.attendanceButtonState=QX({card:e,store:r})}else this.attendanceButtonState=void 0}forwardPage(){var e;if(this.card.hasNextCardOrGroup){let r=this.card,o=(e=r.next)!=null?e:r.nextGroup;$e(o),this.callback.onCardSelected(o)}}backwardPage(){var e;if(this.card.hasPrevCardOrGroup){let r=this.card,o=(e=r.prev)!=null?e:r.prevGroup;$e(o),this.callback.onCardSelected(o)}}popPage(e){this.callback.onPop(e)}alpha(){if(this.enterAnimation)return this.enterAnimation.current().alpha;if(this.mtx.a>1||this.moveMode!=="vertical"&&!(this.translateAnimation instanceof ul))return 1;let e=this.state.viewStack.length>1?.5:1;return 1-(this.mtx.ty-this.height/2)/this.height*e}get toolOpacity(){return this.mtx.a>1||this.moveMode!=="vertical"&&!(this.translateAnimation instanceof ul)||this.state.viewStack.length>1?1:1-(this.mtx.ty-this.height/2)/this.height}hasAnimation(){return!!(this.translateAnimation||this.zoomAnimation||this.enterAnimation||this.exitAnimation)}update(e){let r=!1;this.hasAnimation()&&(this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1));let o=this.mtx.clone(),i=this.translateAnimation;if(i){let c=i.update(e);o.tx=c.x,o.ty=c.y,i.finished&&(this.translateAnimation=void 0,i instanceof Gl?(i.direction==="forward"?this.forwardPage():this.backwardPage(),i.activateTextEditor&&this.state.editorStore.setTool(Ge.Text),o.set(1,0,0,1,this.width/2,this.height/2)):i instanceof ul?(this.popPage(!1),o.set(this.mtx.a,this.mtx.b,this.mtx.c,this.mtx.d,this.mtx.e,this.mtx.f)):this.updateFullScreenSharing(o),this.closed||this.state.editorStore.setEditorMoveMode(void 0))}if(this.zoomAnimation){let c=this.zoomAnimation.update(e);if(this.zoomAnimPivot){let d=this.mtx.a,u=new ft().translate(-this.zoomAnimPivot.x,-this.zoomAnimPivot.y).scale(c/d).translate(this.zoomAnimPivot.x,this.zoomAnimPivot.y);o.prependMatrix(u);let{minTx:p,maxTx:h,minTy:f,maxTy:m}=this.getScrollLimit(o.a);o.tx=ht(o.tx,p,h),o.ty=ht(o.ty,f,m)}else o.a=o.d=c;this.zoomAnimation.finished&&(this.zoomAnimation=void 0,this.zoomAnimPivot=void 0)}if(this.enterAnimation){let c=this.enterAnimation.update(e);o.a=c.scale,o.d=c.scale,o.tx=c.pos.x,o.ty=c.pos.y,this.enterAnimation.finished&&(this.enterAnimation=void 0,this.updateFullScreenSharing(o))}this.exitAnimation&&(this.exitAnimation.update(e),this.exitAnimation.finished&&(this.exitAnimation=void 0,this.updateFullScreenSharing())),this.mtx.a!==o.a&&(this.state.editorStore.setZoom(o.a),this.updateFullScreenSharing(o)),this.mtx=o;let s=this.card.prev||this.card.prevGroup,a=this.card.next||this.card.nextGroup,l=!1;for(let c of[s,this.card,a])if(!!c)for(let d of c.familyIterator()){let u=Dt(d,this.callback);u.update()&&(r=!0),c===this.card&&(l=l||u.shouldDisplayLoading(this.card===d))}if(this.prevLoading&&!l&&(r=!0),this.prevLoading=l,this.card instanceof Bs){let c=Ze(this.width,this.height),d=new ft().scale(Cn(c,this.card.size)).prependMatrix(this.mtx);this.finePdfRenderer.prepare(c,d)}r&&(this.sar.setFineRedrawCountDown(1),this.sar.needsRoughRedraw())}scheduleRender(){let e=()=>{};e=()=>{if(this.closed||!this.canvas)return;let r=this.canvas.getContext("2d");if(!r)throw new fo;this._updater.update(),this.update(this._updater.deltaTime),this.render(r),requestAnimationFrame(e)},requestAnimationFrame(e)}setNeedsDisplay(){this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1)}render(e){e.save();let r=this.mtx.clone(),o=new ft(2,0,0,2,-this.width/2,-this.height/2),i=this.clipRenderingRegion(e);this.sar.render({ctx:e,mtx:r,roughScaleTransform:o,delegate:s=>{this.renderInternal(s)},clip:i}),e.restore(),this.state.store.logEnabled&&this.renderDebug(e)}clipRenderingRegion(e){if(this.playManager.remotePlaying||this.hasAnimation())return;let r=To.get("drawn",this.card),o=r.getUpdatedCanvasClipRect();return o&&(e.beginPath(),e.rect(o.x,o.y,o.width,o.height),e.closePath(),e.clip(),r.clearUpdatedRect()),o}renderDebug(e){e.save();let r="white";this.prevFrameFineRedrawStrategy==="redraw"?r="red":this.prevFrameFineRedrawStrategy==="bitblt"&&(r="orange"),this.prevFrameFineRedrawStrategy=void 0,e.clearRect(this.canvas.width-10,this.canvas.height-10,10,10),e.fillStyle=r,e.fillRect(this.canvas.width-10,this.canvas.height-10,10,10),e.restore(),e.save(),e.fillStyle="red",e.font="20px Arial",e.textAlign="start";let o=window.devicePixelRatio,i=this.state.store.screen.width*o,s=this.state.store.screen.height*o;e.fillText(this._updater.fps+"",i-50,s-50),e.restore()}renderInternal({ctx:e,mtx:r,rough:o,clip:i}){e.save(),i&&(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.closePath(),e.clip()),e.clearRect(0,0,e.canvas.width,e.canvas.height);let{width:s,height:a}=e.canvas,l=this.alpha();if(l<1&&this.parentStack.length>0){let{card:m,mtx:g}=this.parentStack[this.parentStack.length-1];e.save(),e.beginPath(),e.fillStyle="#13254c",e.fillRect(0,0,s,a),e.transform(g.a,g.b,g.c,g.d,g.e,g.f),this.renderCardTreeInternal({ctx:e,card:m,mtx:g}),e.restore()}e.save(),e.globalAlpha*=l,e.beginPath(),e.fillStyle="#13254c",e.fillRect(0,0,s,a),e.restore(),e.transform(r.a,r.b,r.c,r.d,r.e,r.f);let c=this.moveMode==="horizontal"||this.translateAnimation instanceof Gl,d=this.state.screen.keyboardHeight,u=this.card.prev||this.card.prevGroup;if(this.role.canLeave&&u&&c){e.save();let m=this.getDistanceToAdjacentCard(u);e.setTransform(1,0,0,1,r.e-m,a/2-d);let g=r.clone().translate(-m,0);this.renderCardTreeInternal({ctx:e,mtx:g,card:u}),e.restore()}let p=new Map,h=["drawn","annotation"];for(let m of h)m===this.role.drawnType?p.set(m,this.fineRedrawStrategy):p.set(m,"redraw");this.state.documentLoading||this.renderCardTreeInternal({ctx:e,mtx:r,fineRedrawStrategies:p,card:this.card});let f=this.card.next||this.card.nextGroup;if(this.role.canLeave&&f&&c){e.save();let m=this.getDistanceToAdjacentCard(f);e.setTransform(1,0,0,1,r.e+m,a/2-d);let g=r.clone().translate(m,0);this.renderCardTreeInternal({ctx:e,mtx:g,card:f}),e.restore()}if(this.exitAnimation){let{card:m,baseMtx:g}=this.exitAnimation,{scale:v,alpha:y}=this.exitAnimation.current();e.save(),e.setTransform(1,0,0,1,0,0),e.globalAlpha=y,e.transform(g.a,g.b,g.c,g.d,g.e,g.f),e.scale(v,v),this.renderCardTreeInternal({ctx:e,mtx:g,card:m}),e.restore()}this.prevFrameFineRedrawStrategy=this.fineRedrawStrategy,this.fineRedrawStrategy="redraw",e.restore()}renderCardTreeInternal({ctx:e,mtx:r,card:o,fineRedrawStrategies:i}){var p,h,f,m,g,v;let s=Cn(this.canvas,o.size),a=new ft().scale(s).prependMatrix(r);e.save(),e.scale(s,s);let{desktop:l}=this.state.store,c=[];(l==null?void 0:l.hoverCardId)&&c.push(l.hoverCardId);let d=[];(l==null?void 0:l.heldCard)&&d.push(...l.heldCard.all);let u;((p=this.finePdfRenderer)==null?void 0:p.card)===o&&(u=this.finePdfRenderer),fh({ctx:e,card:o,canvas:e.canvas,viewport:js(),mtx:a,root:o,visibleRect:void 0,finePdfRenderer:u,cardRendererCallback:this.callback,fineRedrawStrategies:i,fineStrokeRenderer:this.fineStrokeRenderer,focusingCardId:(f=(h=this.state.store.desktop)==null?void 0:h.focusingCard)==null?void 0:f.id,textEditingCardId:(m=this.textEditingCard)==null?void 0:m.id,hoverCardIds:c,heldCardIds:d,assetUplaodStates:this.state.store.assetUploadStates,assetThumbUploadStates:this.state.store.assetThumbnailUploadStates,toolVisible:this.role.enableCardEditTool&&this.state.editorStore.toolVisible&&!((g=this.state.store.screenSharingState)==null?void 0:g.sessionId),ignoreFavorites:this._decorateFavorites===!1||!this.state.editorStore.toolVisible,ignoreAnnotations:this.state.editorStore.hideAnnotation,quizButtons:this.quizButtonState,attendanceButtons:this.attendanceButtonState,dpr:devicePixelRatio,remotePointers:(v=this.remotePointerManager)==null?void 0:v.getPointers()}),e.restore()}close(){var e,r;(e=this.finePdfRenderer)==null||e.close(),this.state.editorStore.uninitializeAvSource(),(r=this.pointerSubscription)==null||r.close(),this.closed=!0}runStrokeOperation(e){let o=((i,s)=>{switch(s){case"undo":return i.undo();case"redo":return i.redo();case"clearAll":return i.clearAllStroke();case"clearHistory":i.clearHistory()}})(this.strokeManager,e);if(o){let i=gr.get(this.card),s=this.strokeManager.packContents(),a=this.card.createDrawnGeometry(this.role.drawnType),l=i[this.role.drawnType].redrawThumbnails({geometry:a,contents:s});this.fineStrokeRenderer.clear(this.role.drawnType),this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(1),this.fineRedrawStrategy="redraw",this.callback.onDrawnMarkedAsUnsaved({card:this.card,op:o,thumbs:l})}this.state.editorStore.setExecutableStrokeOperation(this.strokeManager.canUndo(),this.strokeManager.canRedo(),this.strokeManager.canClearAllStroke())}clear(){this.runStrokeOperation("clearAll")}redo(){this.runStrokeOperation("redo")}undo(){this.runStrokeOperation("undo")}createLaserPointerConsumer(){let e=this;return{pushPoint(r){var o;(o=e.fullScreenSharingProvider)==null||o.pushPoint(r)}}}updateFullScreenSharing(e){var c;if(!this.fullScreenSharingProvider||!((c=this.state.store.screenSharingState)==null?void 0:c.fullscreen)||this.state.documentLoading||this.state.store.screenSharingForPresenter||this.hasAnimation())return;let r=this.getFullScreenSharingState(e),{document:o,authorId:i,presentedWebURL:s,presentedQuizId:a,presentedAttendanceId:l}=this.state.store.screenSharingState.fullscreen;this.fullScreenSharingProvider.update({document:o,authorId:i,presentedWebURL:s,presentedQuizId:a,presentedAttendanceId:l,...r})}getFullScreenSharingState(e){var a;let r=(l,c)=>{var w,k,T,A;let d=c.indexOverGroup(),u=l.a,p=this.getCardSizeOnCanvas(c,l.a),{width:h,height:f}=this.state.screen,m=window.devicePixelRatio,g={x:(h*m/2-(l.e-p.width/2))/p.width,y:(f*m/2-(l.f-p.height/2))/p.height},v=(k=(w=this.playManager)==null?void 0:w.remotePlaying)!=null?k:!1,y=(A=(T=this.playManager)==null?void 0:T.playToken)!=null?A:void 0,S=this.state.editorStore.avSeekTime,C=this.state.editorStore.avEnded,b=this.state.editorStore.avSpeedScale,x=this.state.editorStore.toolVisible;return{page:d,scale:u,center:g,isPlaying:v,playToken:y,currentTime:S,needsDecorateFavorite:x,isPlayEnded:C,playbackRate:b,zoom:void 0}},o=this.rootCardMonitor.get();if(!o){let l=this.card.rootParent();o=l.document?l:this.card}let i=(a=this.parentStack.find(l=>l.card.id===(o==null?void 0:o.id)))==null?void 0:a.mtx;i||(i=e!=null?e:this.mtx);let s=r(i,o);if(this.card.id!==o.id){let l=e!=null?e:this.mtx,{page:c,zoom:d,...u}=r(l,this.card);s.zoom={id:this.card.id,...u},s.currentTime=0,s.playToken=void 0,s.isPlaying=!1,s.playbackRate=1,s.isPlayEnded=!1}return s}updateFullScreenSharingDocument(e){var a,l,c,d;if(!this.fullScreenSharingProvider)return;let{document:r,page:o,authorId:i}=e,s={page:o,scale:1,center:{x:.5,y:.5},isPlaying:(l=(a=this.playManager)==null?void 0:a.remotePlaying)!=null?l:!1,playToken:(d=(c=this.playManager)==null?void 0:c.playToken)!=null?d:void 0,currentTime:0,needsDecorateFavorite:this.state.editorStore.toolVisible,isPlayEnded:!1};this.fullScreenSharingProvider.update({document:r,authorId:i,presentedWebURL:void 0,presentedQuizId:void 0,presentedAttendanceId:void 0,...s})}};function Kc(t={}){let e=!1,r=!1,o=1,i=1,s=0,a=1,l=!1,c=!0,d,u=new Vw;u.onTimeChange=m=>{if(!d.avPlaying)return;if((()=>m<d.avEndTime?!1:!(d.narrationRecording&&d.isUnlimitedRecordingTime))()){let v=d.continuousPlayback();h({avSeekTime:d.avEndTime,avPlaying:!1,slideshowPlaying:v,avEnded:!v})}else h({avSeekTime:m})},u.onEnded=()=>{if(!d.avPlaying||d.narrationRecording&&d.isUnlimitedRecordingTime)return;let m=d.continuousPlayback();h({avPlaying:!1,slideshowPlaying:m,avSeekTime:d.avEndTime,avEnded:!m})};let p=Ip(),h=(m,g=!1)=>{let v={...d,...m};d=v,p.publish(v),u.apply(v,{syncTime:g})},f={selectedTool:Ge.Finger,toolVisible:!0,avSeekTime:s,avEndTime:0,avPlaying:e,avEnded:!1,avInitialized:r,avReady:!1,avSpeedScale:o,avVolume:a,avMuted:l,zoom:1,narrationRecording:!1,narrationVolume:i,isUnlimitedRecordingTime:c,mediaPlayer:void 0,canUndoStroke:!1,canRedoStroke:!1,canClearStroke:!1,textCanUndo:!1,textCanRedo:!1,slideshowPlaying:!1,typingAttributes:{color:qn(),bold:!1,fontSize:40,lineSpacing:0,list:void 0},addCardDialogOpen:!1,addUrlDialogOpen:!1,activeFingerTool:"finger",hideAnnotation:!1,...t};return d={...f,subscribe(m){p.subscribe(m)},setZoom(m){h({zoom:m})},rewind(m){let g=d.avSeekTime-1;if(m instanceof Ao||m instanceof Yo){let v=m.content.in_point;g<=v&&v<=d.avSeekTime&&(g=v)}h({avSeekTime:Math.max(0,g)},!0)},setPlaying(m){let g=d.slideshowPlaying;return h({slideshowPlaying:m,avPlaying:m,avEnded:!1}),g},continuousPlayback(){return d.slideshowPlaying&&d.selectedTool===Ge.Finger&&d.activeFingerTool==="finger"&&!!d.nextCardId&&d.moveMode!=="vertical"},continuePlaying(){return d.avSeekTime===d.avEndTime&&d.slideshowPlaying&&!d.avPlaying},setAvSeekTime(m,g){h({avSeekTime:m,avEnded:!1},g)},setAvEndTime(m){h({avEndTime:m})},setAvSpeedScale(m){h({avSpeedScale:m})},setAvVolume(m){h({avVolume:m})},setAvMuted(m){h({avMuted:m})},setNarration(m){let g={},v=!1;if(m.card){u.setNarration(m.card);let{startSeconds:y}=vs(m.card);g.avPlaying=!1,g.slideshowPlaying=!1,g.avSeekTime=y,v=!0}m.duration&&u.setNarrationDuration(m.duration),m.recording!==void 0&&(g.narrationRecording=m.recording),m.volume!==void 0&&(g.narrationVolume=m.volume),m.unlimited!==void 0&&(g.isUnlimitedRecordingTime=m.unlimited),h(g,v)},initializeAvSource(m,g){var x,w,k,T;(m instanceof Yo||m instanceof Ao)&&!ga(m.duration)&&(u.onDurationChange=A=>{var F;u.onDurationChange=void 0,We(Sn(m.id,{"metadata.duration":A,"content.out_point":A}));let E=(F=m.content.asset)==null?void 0:F.remote_id;if(E){let z=Object.assign({},m.size,{duration:A});g.reduce(e0(E,[z]))}}),u.onReady=()=>{h({avReady:!0})},u.initialize(m);let{startSeconds:v,endSeconds:y}=vs(m),S=ht(d.avSeekTime,v,y),C=VE(m),b=EA(m);h({cardId:m.id,mediaPlayer:u.player,avPlaying:d.slideshowPlaying,nextCardId:(T=(k=(x=m.next)==null?void 0:x.id)!=null?k:(w=m.nextGroup)==null?void 0:w.id)!=null?T:void 0,avInitialized:!0,avSeekTime:S,avVolume:C,avSpeedScale:m.playbackRate,isUnlimitedRecordingTime:b},!0)},uninitializeAvSource(){!d.avInitialized||(u.uninitialize(),h({mediaPlayer:void 0,avPlaying:!1,avSeekTime:0,avInitialized:!1,avEnded:!1}))},setTool(m){let g=m!==Ge.Finger?!0:f.toolVisible;h({selectedTool:m,toolVisible:g})},setToolVisible(m){h({toolVisible:m})},setExecutableStrokeOperation(m,g,v){h({canUndoStroke:m,canRedoStroke:g,canClearStroke:v})},setTextHistoryTool({canUndo:m,canRedo:g}){h({textCanUndo:m,textCanRedo:g})},setTypingAttributes(m){h({typingAttributes:m})},setAddCardDialogOpen(m){h({addCardDialogOpen:m})},setAddUrlDialogOpen(m){h({addUrlDialogOpen:m})},setQuizView(m){if(m===void 0)h({quizView:void 0});else{let{card:g,mode:v}=m;h({quizView:{cardId:g.id,mode:v}})}},setAttendanceView(m){if(m){let{card:g,mode:v}=m;h({attendanceView:{cardId:g.id,mode:v}})}else h({attendanceView:void 0})},setActiveFingerTool(m){h({activeFingerTool:m})},setEditorMoveMode(m){h({moveMode:m})},setHideAnnotation(m){h({hideAnnotation:m})},dispatch:h}}var Vi=X(he());var Jz=16,Zz=class extends Vi.Component{constructor(){super(...arguments);this.state={tx:0,inTx:void 0,outTx:void 0,narrationRecording:!1};this.eventTargetRef=Vi.createRef();this.controlRef=Vi.createRef();this.inPointRef=Vi.createRef();this.outPointRef=Vi.createRef();this.onSingle=(e,r)=>{let o=this.duration;if(!ga(o)){this.mouseDown=void 0;return}let{playManager:i,editorStore:s,card:a}=this.props,l=r.x-Jz;if(e==="down"){i.beginSeek(s);let u=this.state.tx-l,p;Math.abs(u)>Jz?p=0:p=u,this.mouseDown={offset:p}}else if(this.mouseDown===void 0)return;let c=l+this.mouseDown.offset,d=ht(this.timeFromX(c),0,this.maxSeekTime);i.seek(s,d),e==="up"&&(i.endSeek(s,a),this.mouseDown=void 0),this.setState({tx:c})}}componentDidMount(){this.processor=new Mn(this.eventTargetRef.current,{ignoreDevicePixelRatio:!0}),this.processor.onSingle=this.onSingle}componentWillUnmount(){var e;(e=this.processor)==null||e.unbind()}xFromTime(e){if(this.props.screenSharing){let{startSeconds:r,duration:o}=vs(this.props.card);return o<=0?0:(e-r)/o*this.sliderWidth}return e/this.duration*this.sliderWidth}timeFromX(e){if(this.props.screenSharing){let{startSeconds:r,duration:o}=vs(this.props.card);return e/this.sliderWidth*o+r}return e/this.sliderWidth*this.duration}get duration(){var e,r;return(r=(e=this.props.editorStore.mediaPlayer)==null?void 0:e.duration)!=null?r:this.props.card.duration}get maxSeekTime(){let e=this.props.screenSharing?vs(this.props.card).endSeconds:this.duration;return(1-Number.EPSILON)*e}get sliderWidth(){return this.eventTargetRef.current.getBoundingClientRect().width-Jz*2}componentDidUpdate(e,r,o){let{avSeekTime:i,narrationRecording:s}=this.props.editorStore,a=0,l,c,d=this.getDefaultInOut();d&&(a=ht(this.xFromTime(i),0,this.sliderWidth),d.inTx>0&&(l=d.inTx),vp(this.xFromTime(this.maxSeekTime),d.outTx)&&(c=d.outTx)),!(a===this.state.tx&&l===this.state.inTx&&c===this.state.outTx&&s===this.state.narrationRecording)&&this.setState({tx:a,inTx:l,outTx:c,narrationRecording:s})}getDefaultInOut(){if(!this.eventTargetRef.current||!ga(this.duration))return;let{startSeconds:e,endSeconds:r}=vs(this.props.card),o=this.sliderWidth,i=ht(this.xFromTime(e),0,o),s=ht(this.xFromTime(r),0,o);return{inTx:i,outTx:s}}render(){let{tx:e,inTx:r,outTx:o,narrationRecording:i}=this.state,s=!i&&this.props.editorStore.avReady,a=this.getDefaultInOut(),l=2,c=0,d="100%";if(a&&!this.props.screenSharing){let u=this.sliderWidth-2*l;c=ht(r!=null?r:a.inTx-l,0,u),d=ht(o!=null?o:a.outTx-l,0,u)-c}return Vi.createElement("div",{className:"editorSliderWrapper"},Vi.createElement("div",{className:"editorAvSlider","data-enable":s},Vi.createElement("div",{ref:this.eventTargetRef,className:"editorAvSliderBarWrapper"},Vi.createElement("div",{className:"editorAvSliderBarInner"},Vi.createElement("div",{className:"editorAvSliderBar","data-enable":s},Vi.createElement("div",{className:"editorAvSliderBodyRangeBar",style:{left:c,width:d},"data-enable":s}),e>=c&&un(d)&&Vi.createElement("div",{className:"editorAvSliderPlayedRangeBar",style:{left:c,width:ht(e-c,0,d)},"data-enable":s})))),r!==void 0&&Vi.createElement("div",{ref:this.inPointRef,className:"editorAvSliderInOutPointWrapper",style:{transform:`translateX(${r}px)`}},Vi.createElement("div",{className:"editorAvSliderInPoint"})),o!==void 0&&Vi.createElement("div",{ref:this.outPointRef,className:"editorAvSliderInOutPointWrapper",style:{transform:`translateX(${o}px)`}},Vi.createElement("div",{className:"editorAvSliderOutPoint"})),Vi.createElement("div",{className:"editorAvSliderControlWrapper",ref:this.controlRef,style:{transform:`translateX(${e}px)`},"data-enable":s},Vi.createElement("div",{className:"editorAvSliderControl","data-enable":s}))))}};var Xr=X(he()),AT=X(he());var eU=X(he()),a2=X(he());var zC=({store:t,disappearProgress:e=1,type:r})=>{let o={},i=1;e<1&&(o={transform:`scale(${.5+e/2})`},i=e*.5);let s=t.fixedUIHit===r?"enter":"exit",a=(0,a2.useRef)(null);(0,a2.useEffect)(()=>{if(a.current){let c=a.current.getBoundingClientRect();qg(r,nt(c.left,c.top,c.width,c.height))}});let l=t.fixedUIHit===r?"/img/TrashFull@2x.png":"/img/Trash@2x.png";return eU.createElement("div",{className:"trashBox",ref:a,style:{opacity:i,display:e>0?"flex":"none"}},eU.createElement(Fr,{className:"trashBoxImg "+s,style:o,src:l,alt:r}))};var yne=X(he()),Wd=X(he());var tU="#b3b3b3ff",vne=1,JAe="#ffff00ff",ZAe=3,rU="#ffffff99",eIe="#d6d6d6ff",nU=class{constructor(e){this.scrollX=0;this.handleSingle=(e,r)=>{var s,a;let o=window.devicePixelRatio,{minScrollX:i}=UC(this.props);if(this.dirtyMark.mark(),e==="down"&&(this.transition=void 0),e==="move"&&i<0){let l=tIe(this.scrollX+r.dx,i)?.5:1;this.scrollX+=r.dx*l}if(e==="up")if(uo(r)){let l=this.getItemUnderPoint(r);l instanceof wi?this.onCardSelected(l):l==="prevButton"?(s=this.onPagerButtonClicked)==null||s.call(this,"prev"):l==="nextButton"&&((a=this.onPagerButtonClicked)==null||a.call(this,"next"))}else{let l=Gu(r,.5);this.transition=Z0({start:Re(this.scrollX,0),velocity:l,minX:i*o,minY:0,maxX:0,maxY:0})}};this.handleFreeMove=e=>{this.getItemUnderPoint(e)?this.canvas.style.cursor="pointer":this.canvas.style.cursor="default"};this.dirtyMark=Ac();this.prevLoading=!1;this.props={screen:e.screen,card:e.card,store:e.store,hasNext:e.hasNext,hasPrev:e.hasPrev},this.canvas=e.canvas,this.rootMipmapType=e.rootMipmapType,this.eventProcessor=new Mn(this.canvas),this.eventProcessor.onSingle=this.handleSingle,this.freeMoveProcessor=new Kl(this.canvas),this.freeMoveProcessor.onFreeMove=this.handleFreeMove,this.onCardSelected=e.onCardSelected,this.onPagerButtonClicked=e.onPagerButtonClicked,this.seekTimeDelegate=e.seekTimeDelegate,this.cardRendererCallback=e.cardRendererCallback,this.onNextProps(this.props),this.scrollToReveal(e.card),this.applyScale()}unbind(){this.freeMoveProcessor.unbind(),this.eventProcessor.unbind()}getItemUnderPoint(e){let r=window.devicePixelRatio,o=au(e,1/r);for(let{item:i,bounds:s}of ET({offset:this.offset,...this.props}))if(i!=="separator"&&Si(s,o))return i}get offset(){return Re(this.scrollX/window.devicePixelRatio,0)}scrollToReveal(e){let r=[...ET({offset:this.offset,...this.props})].find(g=>g.item instanceof wi?g.item.id===e.id:!1);if(!r)return;let o=r.bounds,{bounds:i,origin:s}=UC(this.props),a=window.devicePixelRatio,l=o.x,c=l+o.width,d=s.x,u=i.width;if(d<=l&&c<=u)return;let p=(d-l)*a,h=(u-c)*a,f=Re(this.scrollX,0),m=.25;p>0?this.transition=ea(f,Re(this.scrollX+p,0),m,Fo):h<0&&(this.transition=ea(f,Re(this.scrollX+h,0),m,Fo))}onNextProps(e){let r=this.props.card;this.props=e,r!==e.card&&(this.applyScale(),this.scrollToReveal(e.card),this.prevSeekTime=void 0),this.dirtyMark.mark()}applyScale(){let{thumbSize:e}=UC(this.props),{card:r}=this.props;for(let o of r.iteratorOverGroup()){let i=Cn(e,o.size);if(o.document)Dt(o,this.cardRendererCallback).invalidateMipmap(i);else for(let s of o.familyIterator())Dt(s,this.cardRendererCallback).invalidateMipmap(i)}this.dirtyMark.mark()}setSeekTimeDelegate(e){this.seekTimeDelegate=e}update(e){let r=!1;if(this.transition){let s=this.transition.update(e);this.scrollX=s.x,this.transition.finished&&(this.transition=void 0),r=!0}let o=!1;for(let{item:s}of ET({offset:this.offset,...this.props}))if(s instanceof wi)for(let a of s.familyIterator()){let l=Dt(a,this.cardRendererCallback);l.update()&&(r=!0),o=o||l.shouldDisplayLoading(!0)}this.prevLoading&&!o&&(r=!0),this.prevLoading=o;let i=this.seekTimeDelegate(this.props.card.id);return i!==this.prevSeekTime&&(r=!0),this.prevSeekTime=i,r||this.dirtyMark.drain()}setNeedsDisplay(){this.dirtyMark.mark()}render(e){e.save(),e.imageSmoothingEnabled=!1,e.clearRect(0,0,this.canvas.width,this.canvas.height);let r=window.devicePixelRatio;e.scale(r,r);for(let{item:o,bounds:i}of ET({offset:this.offset,...this.props}))if(o==="separator")e.save(),e.strokeStyle=eIe,e.lineWidth=2,e.beginPath(),e.moveTo(i.x+i.width/2,i.y),e.lineTo(i.x+i.width/2,i.y+i.height),e.stroke(),e.restore();else if(o==="nextButton"||o==="prevButton"){e.save(),e.translate(i.x+i.width/2,i.y+i.height/2);let s=-i.width/2,a=-i.height/2,l=i.width,c=i.height;e.fillStyle=rU,e.fillRect(s,a,l,c),e.strokeStyle=tU,e.lineWidth=vne,e.strokeRect(s,a,l,c);let u=Math.min(i.width,i.height)*.5*.5;e.fillStyle=rU,e.beginPath(),e.ellipse(0,0,u,u,0,0,2*Math.PI),e.fill();let p=u*.5,h=o==="prevButton"?1:-1;e.beginPath(),e.moveTo(h*p*.5,-p),e.lineTo(-h*p*.5,0),e.lineTo(h*p*.5,p),e.lineWidth=2,e.strokeStyle=tU,e.stroke(),e.restore()}else{let s=o;e.save(),e.translate(i.x+i.width/2,i.y+i.height/2);let a=-i.width/2,l=-i.height/2,c=i.width,d=i.height,u=s===this.props.card,p,h;u?(p=ZAe,h=JAe):(p=vne,h=tU);let f=p*.5;e.save(),e.beginPath(),e.rect(a+f,l+f,c-2*f,d-2*f),e.clip(),e.beginPath(),e.fillStyle=rU,e.fillRect(a,l,c,d);let m=Cn(i,s.size);if(e.scale(m,m),e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="medium",fh({ctx:e,card:s,viewport:js(),canvas:e.canvas,mtx:new ft().scale(m),rootMipmapType:this.rootMipmapType,root:s,assetThumbUploadStates:this.props.store.assetThumbnailUploadStates,assetUplaodStates:this.props.store.assetUploadStates,cardRendererCallback:this.cardRendererCallback,toolVisible:!1,dpr:r}),e.restore(),e.imageSmoothingEnabled=!1,u){let g=this.seekTimeDelegate(s.id),{startSeconds:v,endSeconds:y}=vs(s),S=(g-v)/(y-v);e.beginPath(),e.fillStyle="rgba(0, 0, 255, 0.5)",e.fillRect(a,l,c*ht(S,0,1),d),e.beginPath(),e.strokeStyle=h,bne(e,a,l,c,d,p);let C=l2,b=Re(0,l-C.height),x=C.height+1,w=x*(C.width/C.height),k=rIe(b.x-w/2,b.y,w,x);e.fillStyle=h,e.fill(k)}else e.beginPath(),e.strokeStyle=h,bne(e,a,l,c,d,p);e.restore()}e.restore()}};function tIe(t,e){let r=window.devicePixelRatio;return ht(t,e*r,0)!==t}function bne(t,e,r,o,i,s){t.lineWidth=s,t.strokeRect(e+s/2,r+s/2,o-s,i-s)}function rIe(t,e,r,o){let i=new Path2D;return i.moveTo(t+r/2,e),i.lineTo(t+r,e+o),i.lineTo(t,e+o),i.closePath(),i}var Cne=({card:t,rootMipmapType:e,store:r,screen:o,onCardSelected:i,onPagerButtonClicked:s,seekTimeDelegate:a,cardRendererCallback:l})=>{let c=(0,Wd.useRef)(null),[d,u]=(0,Wd.useState)(void 0),p=Oy(r,t),h=!!(p==null?void 0:p.prev),f=!!(p==null?void 0:p.next);(0,Wd.useEffect)(()=>{let v=c.current,y=o.width*window.devicePixelRatio;v.width!==y&&(v.width=y);let S=new nU({screen:o,canvas:v,store:r,card:t,hasPrev:h,hasNext:f,rootMipmapType:e,onCardSelected:i,onPagerButtonClicked:s,seekTimeDelegate:a,cardRendererCallback:l}),C=v.getContext("2d");if(!C)throw new fo;let b=!1,x=new Vv,w=()=>{b||(x.update(),S.update(x.deltaTime)&&S.render(C),requestAnimationFrame(w))};return requestAnimationFrame(w),u(S),()=>{b=!0,S.unbind()}},[]),(0,Wd.useEffect)(()=>{d==null||d.onNextProps({screen:o,card:t,hasNext:f,hasPrev:h,store:r})},[o,t,f,h,r]),(0,Wd.useEffect)(()=>{let v=c.current,y=v.width,{width:S}=v.getBoundingClientRect();v.width=S*window.devicePixelRatio,y!==v.width&&(d==null||d.applyScale())},[o]),(0,Wd.useEffect)(()=>{d==null||d.setSeekTimeDelegate(a)},[a]),(0,Wd.useEffect)(()=>{d==null||d.setNeedsDisplay()},[t,d,r.assetUploadStates,r.assetThumbnailUploadStates]),(0,Wd.useEffect)(()=>{let v=cu(y=>{d==null||d.setNeedsDisplay()});return()=>{v.close()}},[]);let m=window.devicePixelRatio,{bounds:g}=UC({screen:o,card:t,store:r,hasPrev:h,hasNext:f});return yne.createElement("canvas",{ref:c,style:{position:"absolute",left:`${g.x}px`,top:`${g.y}px`,width:`${g.width}px`,height:`${g.height}px`},width:g.width*m,height:g.height*m})},nIe=5/6,l2=Ze(8,5);function UC(t){let{screen:e,card:r,hasPrev:o,hasNext:i}=t,s=l2.height,a=e.isMobile?44:70,l=e.isMobile?10:20,c=Gt.width/Gt.height,d=window.devicePixelRatio,u=(a-s)*c,p=Math.round(u*d)/d,h=p/c,f=0,m=0;for(let R of r.connectedGroupHeadCards())f+=R.groupMemberCount(),m++;let g=0;if(f>1||bm(r)){let R,N;e.isMobile?(R=yy(8),N=5):(R=48,N=15),R+=2*2;let W=3;g=N+R*W+N*(W-1)+N}let v=g,y=f,S=m-1,C=0;o&&(y++,S++,C=p+l,v+=C),i&&(y++,S++);let b=p*y+l*S,x=h,w=v+p*f+l*(m-1),k,T,A,E,F=(v+w)/2,z=e.width/2;g<=z-(F-v+C)&&w<=e.width?(k=z-(F-v+C),T=k+b,A=Re(0,s),E=0):g<=z-b/2?(k=e.width/2-b/2,T=k+b,A=Re(0,s),E=0):b<=e.width-g?(k=g,T=k+b,A=Re(0,s),E=0):(k=0,T=e.width,A=Re(g,s),E=e.width-g-b);let L=T-k;return{bounds:nt(k,0,L,a),contentSize:Ze(b,x),thumbSize:Ze(p,h),origin:A,minScrollX:E,groupSeparatorWidth:l}}function*ET(t){let{card:e,offset:r,hasPrev:o,hasNext:i}=t,{thumbSize:s,origin:a,groupSeparatorWidth:l,bounds:c}=UC(t),d=a.x+r.x,u=a.y+r.y,p=l2,h=nIe,f=c.height-2*p.height,m=f*h,g=m*4/3,v=C=>{let x=Re(d+C+s.width/2,u+s.height/2).x-g*.5,w=u+(f-m)*.5;return nt(x,w,g,m)},y=C=>{let b=d+C,x=(s.height-2*p.height)*h,w=u+s.height/2-x/2;return nt(b,w,l,x)},S=0;if(o){let C=v(S);S+=s.width,yield{item:"prevButton",bounds:C};let b=y(S);S+=l,yield{item:"separator",bounds:b}}for(let C of e.connectedGroupHeadCards())for(let b of C.iterator()){let x=Re(d+S+s.width/2,u+s.height/2);if(e===b){let w=nt(x.x-s.width/2,x.y-s.height/2,s.width,s.height);S+=s.width,yield{item:b,bounds:w}}else{let w=v(S);S+=s.width,yield{item:b,bounds:w}}if(b.next===void 0&&b.nextGroup){let w=y(S);S+=l,yield{item:"separator",bounds:w}}}if(i){let C=y(S);S+=l,yield{item:"separator",bounds:C};let b=v(S);yield{item:"nextButton",bounds:b}}}var ia=X(he()),c2=X(he());var HC=({onChange:t,volume:e,contentClassName:r,knobDiameter:o})=>{let i=(0,c2.useRef)(0),s=ht(e,0,2),a=(l,c)=>{c==="down"?i.current=l:t(l,i.current,c)};return ia.createElement("div",{className:r!=null?r:"editorVolumePopup"},ia.createElement(oU,{knobDiameter:o,onChange:a,step:.1,min:0,mid:1,max:2,value:s,enable:!0}))},Sne=({onChangeDuration:t,onChangeUnlimited:e,duration:r,unlimitedRecording:o})=>ia.createElement("div",{className:"editorDurationPopup"},ia.createElement(oU,{onChange:(s,a)=>{s<1&&(s=parseFloat((.9+s*.1).toFixed(1))),t(s,a)},step:1,min:-8,mid:60,max:600,value:r,enable:!o}),ia.createElement(oIe,{checked:o,onChange:e})),oIe=({checked:t,onChange:e})=>{let r=Te();return ia.createElement("div",{className:"durationAutoCheckbox"},ia.createElement("input",{type:"checkbox",id:"sliderCheckbox",className:"durationAutoCheckboxInput",checked:t,onChange:()=>{e(!t)}}),ia.createElement("label",{htmlFor:"sliderCheckbox"},r.automatic))},oU=class extends ia.Component{constructor(){super(...arguments);this.ref=(0,c2.createRef)();this.kDefaultKnobDiameter=30;this.kSliderWidth=150;this.knobTouchOffset=0;this.handleEvent=(e,r)=>{let{value:o,onChange:i}=this.props,s=this.knobTouchDiameter;if(e==="down"){let l=this.xFromValue(o);l<=r.x&&r.x<=l+s?this.knobTouchOffset=l+s/2-r.x:this.knobTouchOffset=0}let a=this.valueFromX(r.x-s/2+this.knobTouchOffset);i(a,e)}}componentDidMount(){let e=this.ref.current,r=new Mn(e,{ignoreDevicePixelRatio:!0});r.onSingle=this.handleEvent,this.pointerEventProcessor=r}componentWillUnmount(){this.pointerEventProcessor&&(this.pointerEventProcessor.unbind(),this.pointerEventProcessor=void 0)}get knobDiameter(){return this.props.knobDiameter||this.kDefaultKnobDiameter}get knobTouchDiameter(){return Math.max(this.knobDiameter,this.kDefaultKnobDiameter)}valueFromX(e){let{step:r,min:o,mid:i,max:s}=this.props,a=this.kSliderWidth/2,l;if(e<a){let u=e/a;l=o+u*(i-o)}else{let u=(e-a)/a;l=i+u*(s-i)}let c=Math.floor((l-o)/r),d=o+c*r;return ht(d,o,s)}xFromValue(e){let{min:r,mid:o,max:i}=this.props,{kSliderWidth:s}=this,a=s/2;if(e<o){let l=(e-r)/(o-r)*a;return ht(l,0,a)}else{let l=a+(e-o)/(i-o)*a;return ht(l,a,s)}}render(){let{value:e,enable:r}=this.props,{kSliderWidth:o}=this,i=this.knobDiameter,s=this.knobTouchDiameter,a=this.xFromValue(e),l="#E2E2E6";return ia.createElement("div",{className:"inputRange"},ia.createElement("div",{className:"inputRangeBar",style:{backgroundColor:r?"#0075f6":l,width:`${a}px`}}),ia.createElement("div",{className:"inputRangeControlWrapper",style:{width:`${s}px`,height:`${s}px`,transform:`translateX(${a-s/2}px)`}},ia.createElement("div",{className:"inputRangeControl",style:{width:`${i}px`,height:`${i}px`}})),ia.createElement("div",{className:"inputRangeBar",style:{backgroundColor:l,width:`${o-a}px`}}),ia.createElement("div",{className:"inputRangeTouchArea",ref:this.ref,style:{left:`${-s/2}px`,width:`${o+s}px`,height:`${s}px`}}))}};var Dne=X(on());var qc=X(he()),xne=X(on());var os=[{speedScale:.5,knobPosition:0},{speedScale:2/3,knobPosition:.16},{speedScale:.8,knobPosition:.33},{speedScale:1,knobPosition:.5},{speedScale:1.25,knobPosition:.625},{speedScale:1.5,knobPosition:.75},{speedScale:2,knobPosition:.875},{speedScale:2.5,knobPosition:1}];function iU(t){let e=ht(t,os[0].speedScale,os[os.length-1].speedScale);for(let r=0;r<os.length-1;r++){let o=os[r],i=os[r+1];if(o.speedScale<=e&&e<i.speedScale)return o.knobPosition+(i.knobPosition-o.knobPosition)*(e-o.speedScale)/(i.speedScale-o.speedScale)}return os[os.length-1].knobPosition}function iIe(t){let e=ht(t,0,1);for(let r=0;r<os.length-1;r++){let o=os[r],i=os[r+1];if(o.knobPosition<=e&&e<i.knobPosition)return o.speedScale+(i.speedScale-o.speedScale)*(e-o.knobPosition)/(i.knobPosition-o.knobPosition)}return os[os.length-1].speedScale}function wne(t){let e=ht(t,0,1);for(let r=0;r<os.length-1;r++){let o=os[r],i=os[r+1],s=(e-o.knobPosition)/(i.knobPosition-o.knobPosition);if(0<=s&&s<.5)return o;if(.5<=s&&s<=1)return i}return os[os.length-1]}var _T=class extends qc.Component{constructor(e){super(e);this.touchPad=qc.createRef();this.onSingle=(e,r)=>{let o=18,i=204,s=(r.x-o)/i,a=iIe(s),l=wne(s);this.props.onChange(l.speedScale,e),this.setState({speedScale:e==="up"?l.speedScale:a})};this.state={speedScale:e.speedScale}}componentDidMount(){this.processor=new Mn(this.touchPad.current,{ignoreDevicePixelRatio:!0}),this.processor.onSingle=this.onSingle}componentWillUnmount(){var e;(e=this.processor)==null||e.unbind()}render(){let e=wne(iU(this.state.speedScale)),r=`calc(var(--editorAvSpeedScaleRailWidth) * ${iU(this.state.speedScale)})`;return qc.createElement("div",{className:"editorSpeedScalePopup"},qc.createElement("div",{className:"editorSpeedScaleSliderRail"}),qc.createElement("div",{className:"editorSpeedScaleSliderRailToCurrent",style:{width:r}}),os.map((o,i)=>{let a={left:`calc(var(--editorAvSpeedScalePadding) - var(--editorAvSpeedScaleLabelWidth) / 2 + var(--editorAvSpeedScaleRailWidth) * ${o.knobPosition})`},l=(0,xne.sprintf)("%.02f",o.speedScale);l.endsWith("0")&&(l=l.substr(0,l.length-1));let c=o.speedScale===e.speedScale?"true":"false";return qc.createElement("div",{className:"editorSpeedScaleLabel",...{key:i,style:a},"data-active":c},l)}),os.map((o,i)=>{let s=o.speedScale===1?"var(--editorAvSpeedScaleCenterKnobRadius)":"var(--editorAvSpeedScaleSmallKnobRadius)",a=o.speedScale===1?"editorSpeedScaleCenterKnob":"editorSpeedScaleSmallKnob",l=`calc(var(--editorAvSpeedScalePadding) - ${s} + var(--editorAvSpeedScaleRailWidth) * ${o.knobPosition})`,c=o.speedScale<=this.state.speedScale?"true":"false";return qc.createElement("div",{...{className:a,key:i},style:{left:l},"data-active":c})}),qc.createElement("div",{className:"editorSpeedScaleLargeKnob",style:{left:`calc(var(--editorAvSpeedScalePadding) - var(--editorAvSpeedScaleLargeKnobRadius) + var(--editorAvSpeedScaleRailWidth) * ${iU(this.state.speedScale)}`}}),qc.createElement("div",{className:"editorAvSliderTouchPad",ref:this.touchPad}))}};var Tne=X(he()),Nr=({children:t,...e})=>Tne.createElement("div",{onMouseDown:r=>{r.preventDefault()},...e},t);function sU(t){let e=(0,Dne.sprintf)("x%.2f",t);return e.endsWith("0")&&(e=e.substr(0,e.length-1)),e}var ep=({card:t,store:e,editorStore:r,screen:o,cardRendererCallback:i,editable:s,onCardSelected:a,onPagerButtonClicked:l,opacity:c,playManager:d,authorPageNumState:u,popoverContainer:p})=>{let h=()=>{d.togglePlayPause(r,t)},f=()=>{d.beginRewind(r,t)},{zoom:m,avPlaying:g,slideshowPlaying:v,avSeekTime:y,avSpeedScale:S}=r,{startSeconds:C,endSeconds:b}=vs(t),x=t instanceof Ao||t instanceof Yo,w=!!e.screenSharingState,k=r.selectedTool===Ge.Draw,T=r.narrationRecording,A=(m-Math.SQRT1_2)/(1-Math.SQRT1_2),E=ht(1-A,0,1),[F,z]=(0,AT.useState)(!1),L=()=>z(!0),R=()=>z(!1),[N,V]=(0,AT.useState)(!1),W=()=>V(!0),me=()=>V(!1);(0,AT.useEffect)(()=>{r.moveMode&&(V(!1),z(!1))},[r.moveMode]);let ie=bc(),Z=()=>{let ae={"content.in_point":y};b<y&&(ae["content.out_point"]=y),We(Sn(t.id,ae)),g||ie()},P=()=>Math.abs(t.duration-y)<1e-5,_=()=>{d.pause(r);let ae={"content.out_point":P()?t.duration:y};y<C&&(ae["content.in_point"]=y),We(Sn(t.id,ae)),g||ie()},I=ae=>ae===t.id?r.avSeekTime:0,U=(ae,le,xe)=>{r.setAvVolume(ae),x&&xe==="up"&&We(Sn(t.id,{"content.source_volume":ae}))},M=(ae,le)=>{le==="down"&&d.beginSpeedScaling(r),r.setAvSpeedScale(ae),le==="up"&&d.endSpeedScaling(r),s&&We(Sn(t.id,{"metadata.playback_rate":ae}))},$=Te(),H=(()=>k?!1:bm(t)?!0:r.narrationRecording&&!t.unlimitedRecordingTime)(),Y=bb(e)?!0:s&&!w;return Xr.createElement(wa,{in:r.toolVisible},Xr.createElement("div",{className:"editorFooter fade",style:{opacity:c<1?c:void 0}},Xr.createElement("div",{className:"editorFooterInner"},s&&!w&&Xr.createElement("div",{className:"editorTrashBoxWrapper"},Xr.createElement("div",{className:"editorTrashBox"},Xr.createElement(zC,{disappearProgress:E,store:e,type:"editorTrashBox"}))),H&&Xr.createElement("div",{className:"editorFooterContent"},s&&!w&&x&&!T&&Xr.createElement("div",{className:"editorButton editorWhiteCircleButton inOutButton editorFooterItem","data-disabled":!r.avReady},Xr.createElement("div",{className:"editorButtonIcon inOutButtonIcon "+$.inButtonIconClass,role:"button",onClick:Z})),Xr.createElement(Zz,{card:t,editorStore:r,playManager:d,screenSharing:!!e.screenSharingState}),Xr.createElement("div",{className:"editorAvPlayTimeText"},s0(y)),s&&!w&&x&&!T&&Xr.createElement(Xr.Fragment,null,Xr.createElement("div",{className:"editorButton editorWhiteCircleButton inOutButton editorFooterItem","data-disabled":!r.avReady},Xr.createElement("div",{className:"editorButtonIcon inOutButtonIcon "+$.outButtonIconClass,role:"button",onClick:_})),Xr.createElement("div",{className:"relative"},Xr.createElement("div",{className:"editorButton editorWhiteCircleButton animeVolumeButton",role:"button",onClick:L},Xr.createElement("div",{className:"editorButtonIcon volumeButtonIcon"})),Xr.createElement(jt,{open:F,onClose:R,anchor:"topCenter",container:p},Xr.createElement(HC,{onChange:U,volume:r.avVolume}))))),!T&&Xr.createElement("div",{className:"editorFooterContent"},(t.hasConnectedCardOrGroup||bm(t))&&Xr.createElement(Xr.Fragment,null,Xr.createElement(Nr,{onClick:h,className:"editorButton editorWhiteCircleButton editorFooterItem","data-disabled":!r.avReady},v?Xr.createElement("div",{className:"editorButtonIcon pauseButtonIcon"}):Xr.createElement("div",{className:"editorButtonIcon playButtonIcon"})),Xr.createElement(Nr,{className:"editorButton editorWhiteCircleButton editorFooterItem",onClick:f,"data-disabled":!r.avReady},Xr.createElement("div",{className:"editorButtonIcon rewindButtonIcon"}))),Y&&bm(t)&&Xr.createElement("div",{className:"editorWhiteCircleButton editorFooterItem"},Xr.createElement("div",{className:"relative"},Xr.createElement(Nr,{className:"editorButton editorButtonIcon editorAvSpeedScaleButtonIcon",onClick:W,"data-disabled":!r.avReady},sU(S)),Xr.createElement(jt,{open:N,onClose:me,anchor:"topCenter",container:p},Xr.createElement(_T,{onChange:M,speedScale:r.avSpeedScale})))),Xr.createElement("div",{className:"editorFooterThumbnailBar"},Xr.createElement(Cne,{store:e,screen:o,card:t,rootMipmapType:s||k?"content":void 0,onCardSelected:a,onPagerButtonClicked:l,seekTimeDelegate:I,cardRendererCallback:i}))),u&&Xr.createElement(sIe,{state:u}))))},sIe=({state:t})=>{let{authorName:e,pageIndex:r,pageCount:o,anonymous:i}=t,s;return r!==void 0&&o!==void 0&&(s=r+1+"/"+o),Xr.createElement("div",{className:"editorAuthorNamePageNumberWrapper"},Xr.createElement("div",{className:"editorAuthorNamePageNumber"},!i&&Xr.createElement("span",null,e),!i&&s&&Xr.createElement("span",{style:{margin:"0px 2.5px"}}),Xr.createElement("span",null,s)))};var dn=X(he()),Hoe=X(he());var cn=X(he()),tp=X(he());var ss=X(he());var VC=X(he()),Une=X(he());var bi=X(he()),lU=X(he()),_ne=X(on());var d2=X(L0());async function aU({noteId:t,signal:e,lnsClient:r}){let o=await r.downloadNote(t,e).then(O0),i=Wu(o.note.data.frames);return await r.exportNote({noteId:t,assetUUIDs:i,signal:e})}async function kne({lnsClient:t,notes:e,signal:r,onProgress:o,appVersion:i}){if(e.length===0)return{type:"error",error:new Error("notes empty")};try{let s=1,a=e.length,l=[];for(let{id:p}of e){o(s++,a);let h=await aU({noteId:p,signal:r,lnsClient:t});l.push([p,h])}let c=new d2.default;for(let[p,h]of l)c.file(`${p}.loilonote`,h);let d={creator:{app:"web",version:i},notes:e.map(({id:p,name:h})=>({id:p,name:h}))};c.file("structure.json",JSON.stringify(d));let u=await c.generateAsync({type:"blob"});return{type:"success",value:u}}catch(s){return(r==null?void 0:r.aborted)?{type:"cancelled"}:{type:"error",error:s}}}async function Pne(t){var r,o;let e=[];for(let i of t)if(i.name.endsWith(".loilonote")){let a=await((r=(await d2.default.loadAsync(i)).file("metadata"))==null?void 0:r.async("string"));if(!a)throw new Error("metadata not found");let l=JSON.parse(a);e.push({filename:l.name,load:()=>Promise.resolve(i)})}else if(i.name.endsWith(".loilonotes")){let s=await d2.default.loadAsync(i),a=await((o=s.file("structure.json"))==null?void 0:o.async("string"));if(!a)throw new Error("structure.json not found");let l=JSON.parse(a);for(let{id:c,name:d}of l.notes){let u=`${c}.loilonote`,p=s.file(u);p&&e.push({filename:d,load:()=>p.async("blob")})}}return e}async function Ene({lnsClient:t,courseId:e,importers:r,signal:o,onProgress:i,onImported:s}){let a=1,l=[];try{for await(let c of r){i(a++);let d=await c.load(),u=await t.importNote({courseId:e,file:d,signal:o});l.push(u),s(u)}return{type:"success",value:l}}catch(c){return(o==null?void 0:o.aborted)?{type:"cancelled"}:{type:"error",error:c}}}var Dh=X(he());var GC=({title:t,message:e,cancelMessage:r,onCancel:o})=>Dh.createElement(by,null,Dh.createElement("div",{className:"uiDialogContent"},Dh.createElement(ur,null),Dh.createElement("div",{className:"uiDialogTitle"},t),e&&Dh.createElement("div",{className:"uiDialogMessage"},Dh.createElement("div",{className:"uiDialogSection"},e)),Dh.createElement(El,null,r&&o&&Dh.createElement(ma,{className:"uiDialogCancelButton",onClick:o},r))));var u2=({courseId:t,files:e,onImported:r,onClose:o,onFinish:i})=>{let s=Te(),[a,l]=wn({ctrl:new AbortController,count:1});(0,lU.useEffect)(()=>()=>a.ctrl.abort(),[]);let c=u=>{l({importingNotes:u.length}),Ene({lnsClient:ue.lnsClient,courseId:t,importers:u,signal:a.ctrl.signal,onProgress:p=>l({count:p}),onImported:r}).then(i)},d=()=>a.ctrl.abort();return bi.createElement(bi.Fragment,null,bi.createElement(oo,{open:!a.importingNotes,onClose:o},bi.createElement(aIe,{onClose:o,files:e,onImport:c}),";"),a.importingNotes&&bi.createElement(GC,{title:`${s.importingNotes}
(${a.count}/${a.importingNotes})`,cancelMessage:s.cancel,onCancel:d}))},aIe=({files:t,onClose:e,onImport:r})=>{let[o,i]=wn({selections:[]}),s=Te(),a=qe();(0,lU.useEffect)(()=>{Pne(t).then(d=>{i({importers:d,selections:d})}).catch(d=>{var u;a.reduce(Pe(oe.importNote,{title:s.errorOccurred,message:(u=d==null?void 0:d.message)!=null?u:"",okMessage:s.close,onOk:()=>a.reduce(Pe(oe.importNote,void 0))})),e()})},[t]);let l=d=>({selected:o.selections.includes(d),onSelect:u=>{let p=u?o.selections.concat(d):o.selections.filter(h=>h!==d);i({selections:p})}}),c=o.selections.length>0?(0,_ne.sprintf)(s.importNotes,o.selections.length,De.get().pluralSafeSuffix(o.selections.length)):s.chooseNoteToImport;return bi.createElement($r,{round:!a.screen.isMobile},bi.createElement(dr,null,bi.createElement(fr,null,bi.createElement(mr,null,bi.createElement(Mt,{onClick:e},s.cancel)),bi.createElement(kr,null,s.import),bi.createElement(wr,null,bi.createElement(Mt,{disabled:o.selections.length===0,onClick:()=>r(o.selections)},s.start)))),bi.createElement(mn,null,o.importers!=null&&bi.createElement(bi.Fragment,null,bi.createElement(Vd,{style:{color:"black"}},c),bi.createElement(Vd,null,bi.createElement(Mt,{style:{paddingLeft:15},onClick:()=>{o.selections.length>0?i({selections:[]}):i({selections:o.importers})}},o.selections.length>0?s.releaseAll:s.selectAll)),bi.createElement(yo,null,o.importers.map((d,u)=>bi.createElement(Xn,{selectOpts:l(d),key:u},d.filename))))))};function Ane(t,e,r){var c;let o=wt.notes(e),i=t.fetchStates[o],s=e==="self-study"?t.notes.selfStudyIds:t.notes.byCourseId[e],a=(c=s==null?void 0:s.map(d=>t.notes.byId[d]))!=null?c:[],l=De.get().strings;return{courseId:e,fetchState:i,notes:a,onCopy({destCourseId:d,noteIds:u,copySuffix:p}){Vre(t,{noteIds:u,destCourseId:d,suffix:p}).then(()=>{yT(t,d),r({copyModalOpen:!1,editMode:void 0,selectedItems:[]})})},onCreateStandard(d){let u=sC(0).toJSON();KI(t,{name:d,courseId:e,note:u})},onCreateShared(d){$e(typeof e=="number"),jre(t,{name:d,courseId:e})},isEditable(d,u){let p=t.userInfo.user_id;switch(u){case"rename":case"delete":return d.user_id===p;case"manage-member":return d.is_shared;case"share":case"export":return!d.is_shared;default:return!0}},onDelete(d){Gre(t,{noteId:d.id,title:d.name,courseId:e})},onFetch(){yT(t,e)},onOpen(d){let u=d.id;d.is_shared?($e(e!=="self-study"),FC(t,{courseId:e,noteId:u,pushState:!0})):RC(t,{courseId:e,noteId:u,pushState:!0})},onRename(d){Hre(t,d)},onExport(d){if(r({exportingNotes:void 0,selectedItems:[],editMode:void 0}),d.type!=="cancelled")if(d.type==="error")p2(t,oe.exportNote,d.error);else{let u=URL.createObjectURL(d.value);try{let p=document.createElement("a");p.download=d.value.name,p.href=u,p.click()}finally{URL.revokeObjectURL(u)}}},onImport(d){let u=oe.importNote;r({importingNotes:void 0});let p=De.get().strings;d.type==="success"?t.reduce(Pn({type:"normal",text:p.imported})):d.type==="error"&&p2(t,u,d.error)}}}function p2(t,e,r){let o=De.get().strings;if(yt.catchError(r))return;ge.error(r);let{message:i,unknownError:s}=Ht(r,{default:o.errorOccurred,[403]:o.api403ErrorMsg,[404]:o.api404ErrorMsg});t.reduce(Fe(e,null),Pe(e,{title:o.errorOccurred,message:i,unknownError:s,okMessage:o.okay,onOk:()=>t.reduce(Pe(e,void 0))}))}var Qr=X(he()),One=X(he());var zne=X(gU()),AIe=1e3;function Vm(t){let e=(0,zne.default)(t,{protocols:["http","https"],require_protocol:!0});try{decodeURI(t)}catch(r){e=!1}return e}var $m;(function(r){r[r.Menu=0]="Menu",r[r.Edit=1]="Edit"})($m||($m={}));var g2=({store:t,invokeType:e,onDismiss:r,onCreate:o})=>{let[i,s]=Qr.useState(""),[a,l]=Qr.useState(!1),[c,d]=Qr.useState(""),[u,p]=Qr.useState(void 0),[h,f]=Qr.useState(void 0),[m,g]=Qr.useState(!1),v=w=>{let k=w.target;l(Vm(k.value)),s(k.value)},y=()=>{a&&u&&(o(u),r())};(0,One.useEffect)(()=>{if(a){h&&clearTimeout(h);let w=setTimeout(()=>{(async()=>{g(!0);let k=await ue.apiClient.getOgpMetadata(i);S(k)})()},AIe);f(w)}},[i,a]);let S=async w=>{let k=await N1({author:{id:t.userInfo.user_id,name:t.userInfo.username},decodedUrl:decodeURI(w.url),title:w.title,description:w.description}),T=URL.createObjectURL(k);d(T),p({url:w.url,title:w.title,thumbnailFile:k}),g(!1)},C=w=>{w.currentTarget===w.target&&r()},b=Te(),x=window.screen.height<=480;return Qr.createElement("div",{className:"addWebCardDialog",onClick:C},!x&&Qr.createElement(Qr.Fragment,null,Qr.createElement("div",{className:"addWebCardDialogHeader"},Qr.createElement(dr,{round:!0,inPopover:!0},Qr.createElement(fr,null,Qr.createElement(mr,null,Qr.createElement(Mt,{onClick:r},b.cancel)),Qr.createElement(wr,null)))),Qr.createElement("div",{className:"addWebCardDialogMain"},Qr.createElement("div",{className:"addUrlInputWrap"},Qr.createElement("input",{type:"url",placeholder:"https://...",minLength:1,onChange:v,value:i}),Qr.createElement("div",{className:"addUrlInvalidMessage"},i!=""&&!a&&Qr.createElement("div",{className:"addUrlInvalidHelp"},b.invalidUrlHelp))),Qr.createElement("div",{className:"webCardPreviewWrapper"},!m&&!u&&Qr.createElement("div",{className:"urlPasteMessageBalloon"},b.pasteCopiedUrl),(m||u)&&Qr.createElement("div",{className:"webCardPreviewContainer"},m&&Qr.createElement(ur,null),!m&&Qr.createElement("img",{id:"webCardPreviewThumbnail",src:c}))),Qr.createElement("button",{className:"createWebCardButton",disabled:!a||!u,onClick:y,role:"button"},e==0?b.createCard:b.updateCard))),x&&Qr.createElement("div",{className:"addWebCardDialogCompactUI"},Qr.createElement("div",{className:"addWebCardDialogCompactHeader"},Qr.createElement(Mt,{onClick:r,className:"addUrlInlineCloseButton"},b.cancel),Qr.createElement("div",{className:"addUrlInputWrap"},Qr.createElement("input",{type:"url",placeholder:"https://...",minLength:1,onChange:v,value:i})),Qr.createElement("button",{className:"createWebCardButton",disabled:!a||!u,onClick:y,role:"button"},e==0?b.createCard:b.updateCard)),Qr.createElement("div",{className:"addUrlInvalidMessage"},i!=""&&!a&&Qr.createElement("div",{className:"addUrlInvalidHelp"},b.invalidUrlHelp)),Qr.createElement("div",{className:"addWebCardDialogMain"},Qr.createElement("div",{className:"webCardPreviewWrapper"},!m&&!u&&Qr.createElement("div",{className:"urlPasteMessageBalloon"},b.pasteCopiedUrl),(m||u)&&Qr.createElement("div",{className:"webCardPreviewContainer"},m&&Qr.createElement(ur,null),!m&&Qr.createElement("img",{id:"webCardPreviewThumbnail",src:c}))))))};var No;(function(s){s.Files="Files",s.TextCard="application/x-loilo-text-card-drag",s.Sheet="application/x-loilo-sheet-drag",s.FileDocument="application/x-loilo-file-document",s.PlainText="text/plain"})(No||(No={}));var Hne=function({children:e,store:r}){var v,y;let{desktop:o,editor:i}=r,s=i==null?void 0:i[i.length-1].cardId,[a,l]=(0,Une.useState)(),c=(y=r.courseId)!=null?y:(v=r.desktop)==null?void 0:v.courseId,d=De.get().strings,u=async S=>{if(!c)return;if(S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement){S.stopPropagation();return}S.preventDefault();let C={x:S.pageX,y:S.pageY},b=S.dataTransfer.types;if(!!o&&b.includes(No.TextCard)){let x=S.dataTransfer.getData(No.TextCard),w=JSON.parse(x);if(!s)Nt(new sl({color:Fn(w.color),backcolor:Fn(w.backcolor),position:C})),Nt(new kp({x:S.pageX,y:S.pageY},!0));else{let{backcolor:k,color:T,...A}=w;w.isTransparent&&(k=Ra.toARGBHex()),Nt(new Fa({cardId:s,color:Fn(T),backcolor:Fn(k),...A,position:C}))}}else if(!!o&&b.includes(No.Sheet)){let x=S.dataTransfer.getData(No.Sheet),w=JSON.parse(x);s?Nt(new Lg(s,w.type,C)):Nt(new Bg(w.type,C))}else if(b.includes(No.Files)){let{loilonotes:x,others:w}=IIe(S.dataTransfer.files);x.length>0&&l(x),!!o&&w.length>0&&(s?Nt(new ud(w,C)):Nt(new Pp(w,C)))}else if(!!o&&b.includes(No.FileDocument)){let x=S.dataTransfer.getData(No.FileDocument),w=JSON.parse(x);Nt(new Dy(w,C))}else if(!!o&&b.includes(No.PlainText)){let x=S.dataTransfer.getData("text");if(Vm(x)){let w={id:r.userInfo.user_id,name:r.userInfo.username},k=oe.createWebCard;r.reduce(Fe(k,d.creatingWebCard));let T=await oC(x,w);r.reduce(Fe(k,null)),s?Nt(new Al(s,C,x,T.title,T.thumbnailFile)):Nt(new Og(C,{url:x,thumbnailFile:T.thumbnailFile,title:T.title}));return}s?Nt(new Fa({cardId:s,color:qn(),backcolor:rn(),position:C,text:x})):Nt(new sl({color:qn(),backcolor:rn(),position:C,text:x}));return}},p=S=>{if(!c){S.preventDefault();return}if(S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement){S.stopPropagation();return}S.preventDefault(),S.dataTransfer.dropEffect="copy";let C=S.dataTransfer.types;!!o&&C.includes(No.TextCard)&&(i||Nt(new kp({x:S.pageX,y:S.pageY},!1)))},h=S=>{if(!c)return;let C=S.dataTransfer.types;!!o&&C.includes(No.TextCard)&&(i||Nt(new kp({x:S.pageX,y:S.pageY},!0)))},f=S=>C=>{r.reduce(zp(S,[C]))},m=()=>{l(void 0)},g=S=>{m();let C=De.get().strings;S.type==="success"?r.reduce(Pn({type:"normal",text:C.imported})):S.type==="error"&&p2(r,oe.importNote,S.error)};return VC.createElement(VC.Fragment,null,VC.createElement("div",{onDragOver:p,onDragEnter:p,onDrop:u,onDragLeave:h},e),!!c&&a!==void 0&&VC.createElement(u2,{courseId:c,files:a,onImported:f(c),onClose:m,onFinish:g}))},IIe=t=>{let e=[],r=[];for(let o of t)[".loilonote",".loilonotes"].includes(Xs(o.name))?e.push(o):r.push(o);return{loilonotes:e,others:r}};var RIe=({type:t,draggable:e,onClick:r})=>{let i=Te()[fte(t)],s=l=>{l.dataTransfer.clearData();let c={type:t};l.dataTransfer.setData(No.Sheet,JSON.stringify(c)),l.dataTransfer.effectAllowed="copy"},a=ue.res.src(Lm(t));return ss.createElement("div",{className:"thinkingToolModalCell",onClick:r},ss.createElement("div",{className:"thinkingToolModalCellImage",onDragStart:e?s:void 0,draggable:e,style:{backgroundImage:`url("${a}")`}}),ss.createElement("div",{className:"thinkingToolModalCellDesk"},ss.createElement("span",null,i)))},$C=({className:t="thinkingToolModal",onSelect:e,onDismiss:r,draggable:o,dismissOnSelect:i,inPopover:s=!1})=>{let a=Te(),l=c=>()=>{e(c),i&&r()};return ss.createElement($r,{className:t},ss.createElement(dr,{inPopover:s},ss.createElement(fr,null,ss.createElement(mr,null,ss.createElement(Mt,{onClick:r},a.back)),ss.createElement("div",null),ss.createElement("div",null))),ss.createElement(mn,{className:"thinkingToolModalBody"},ss.createElement("div",{className:"thinkingToolModalBanner"},ss.createElement("div",{className:"thinkingToolModalBannerImg"},ss.createElement(Fr,{style:{maxWidth:"100%"},alt:a.learnAboutThinkingTools,src:"/img/ThinkingToolHeaderBanner.png"})),ss.createElement("div",{className:"thinkingToolModalUsageLink"},ss.createElement("a",{href:a.thinkingToolHelpPageUrl,target:"_blank"},a.learnAboutThinkingTools))),ss.createElement("div",{className:"thinkingToolModalContent"},hte.map((c,d)=>ss.createElement(RIe,{key:d,type:c,draggable:o,onClick:l(c)})))))};var Gne={camera:"cameraIcon",web:"svgWebIcon",tt:"thinkingToolIcon",file:"fileIcon"},FIe={camera:"camera",web:"web",file:"file",tt:"thinkingTool"},vU=({type:t,onClick:e})=>{let r=FIe[t],i=Te()[r];return cn.createElement("div",{className:"addCardButton",onClick:e,role:"button"},cn.createElement("div",{className:Gne[t]+" addCardIcon"}),cn.createElement("div",{className:"addCardButtonDesc","data-is-tt":t==="tt"},i))},MIe=({onInput:t,desc:e})=>{let r=(0,tp.useRef)(null),o=()=>{let a=r.current;a instanceof HTMLInputElement&&(a.click(),a.onchange=()=>{!a.files||a.files.length===0||t(a.files[0])})},i=[...no.keys(),...Ey.keys()].join(", "),s=Te();return cn.createElement("div",{className:"addCardButton",onClick:o,role:"button"},cn.createElement("div",{className:Gne.file+" addCardIcon"}),cn.createElement("div",{className:"addCardButtonDesc"},s.file),cn.createElement("input",{ref:r,hidden:!0,type:"file",accept:i}))},NIe=({subColor:t,textColor:e,backcolor:r,onClick:o,isTransparent:i})=>cn.createElement("div",{className:"addTextCardButton",draggable:!0,onClick:o,onDragStart:s=>{let a=JSON.stringify({name:"addTextCard",backcolor:r.toARGBHex(),color:e.toARGBHex(),isTransparent:i});s.dataTransfer.setData(No.TextCard,a),s.dataTransfer.effectAllowed="copy"},"data-is-transparent":i,style:{backgroundColor:r.toCSSRGBA(),borderColor:t.toCSSRGBA()}}),BIe=[{backcolor:Pt("#ffccdcFF"),subColor:Pt("#ED7DA1FF"),textColor:Pt("#000000FF"),isTransparent:!1},{backcolor:Pt("#caefd1ff"),subColor:Pt("#87D089FF"),textColor:Pt("#000000FF"),isTransparent:!1},{subColor:Pt("#002663FF"),backcolor:Pt("#b3ddfcff"),textColor:Pt("#000000FF"),isTransparent:!1},{backcolor:Pt("#FFFFFFFF"),subColor:Pt("#CED7E0FF"),textColor:Pt("#000000FF"),isTransparent:!1},{backcolor:Pt("#F1F5F8FF"),subColor:Pt("#93A3BEFF"),textColor:Pt("#FFFFFFFF"),isTransparent:!0}],Vne=({store:t,onClose:e})=>{let r=t.editor,o=r[r.length-1].cardId,i=Te(),[s,a]=(0,tp.useState)([{mode:"menu"}]),l=(0,tp.useRef)(null),c=(0,tp.useRef)(null),d=(0,tp.useRef)(null),{user_id:u}=t.userInfo,p={id:u,name:Ut(t.userInfo)},h=x=>{a(s.concat({mode:"selector",addingCard:x}))},f=async x=>{let w=await Na({url:ue.res.src("/svg/web_card_placeholder.svg")}),k=lv({author:p,url:x});h({card:k,thumb:w})},m=x=>()=>{x==="camera"?(t.reduce(Tf(!0)),e()):x==="web"?f():x==="tt"&&a(s.concat({mode:"tt"}))},g=x=>async()=>{let w=x.textColor.toARGBHex(),k=x.backcolor.toARGBHex();x.isTransparent&&(k=Ra.toARGBHex());let T;x.isTransparent&&(T=await Na({url:ue.res.src("/svg/transparent_card_placeholder.svg")}));let A=Sd({backcolor:k,color:w,author:p});h({card:A,thumb:T})},v=()=>{let x=[...s];x.pop(),a(x)},y=async x=>{let w=Lm(x),k=await Na({url:w}),[T]=w.split("/").splice(-1,1),[A,E]=T.split("."),F=Rl({author:{id:t.userInfo.user_id,name:Ut(t.userInfo)},asset:{description:A,extension:E},position:Re(),pageIndex:0,pageSize:{...di},layoutSize:xr(di,Gt),usage:"thinking_tool"});l.current=x,h({card:F,thumb:k})},S=x=>w=>{let k=w?"inside":"next";if(c.current){let{original:T,file:A}=c.current;Nt(new Gg(T,A,k,o)),c.current=null}else x.type==="pdf"&&l.current?(Nt(new Hg(o,l.current,x,k)),l.current=null):Nt(new Ap({cardId:o,card:x,type:k}));e()},C=async x=>{let w=oe.loadFile,k=x.name.toLowerCase().endsWith(".pdf");k&&t.reduce(Fe(w,i.loadingFile));try{let A=pd(Xs(x.name))?(await Vf([x]))[0]:x,E=await Pu(A);if(!Nm(t,[x])){k&&t.reduce(Fe(w,null)),e();return}if(E instanceof zi){let L=Om(A,E),R=De.get().strings;if(L&&!confirm(R.exceedVideoQuality)){e();return}}let F=await E.generateHeadThumbnail(),[z]=E.toCards({position:Re(),user:t.userInfo});h({card:z,thumb:F}),k&&t.reduce(Fe(w,null)),c.current={original:A,file:E}}catch(T){ge.error(T),t.reduce(Fe(w,null),Pe(w,{title:i.couldntLoadFileTitle,...Ht(T),okMessage:i.back,onOk:()=>t.reduce(Pe(w,void 0))}))}},b=s[s.length-1];return cn.createElement(cn.Fragment,null,b.mode==="menu"&&cn.createElement("div",{className:"addCardDialog",ref:d},cn.createElement("div",{className:"addCardDialogInner"},cn.createElement("div",{className:"addCardRow"},cn.createElement(vU,{type:"camera",onClick:m("camera")}),cn.createElement(vU,{type:"web",onClick:m("web")}),cn.createElement(MIe,{desc:i.file,onInput:C}),cn.createElement(vU,{type:"tt",onClick:m("tt")})),cn.createElement("div",{className:"addCardDialogBr"}),cn.createElement("div",{className:"addTextCardRow"},BIe.map((x,w)=>cn.createElement(NIe,{onClick:g(x),key:w,...x}))))),b.mode==="tt"&&cn.createElement(LIe,{onSelect:y,onBack:v}),b.mode==="selector"&&cn.createElement("div",{className:"addCardDialog",ref:d},cn.createElement(bU,{store:t,onBack:v,onClick:S(b.addingCard.card),thumb:b.addingCard.thumb,card:b.addingCard.card})))},LIe=({onBack:t,onSelect:e})=>cn.createElement("div",{className:"addSheetDialogWrapper"},cn.createElement($C,{className:"",onSelect:e,onDismiss:t,dismissOnSelect:!1,draggable:!0,inPopover:!0})),bU=({store:t,onBack:e,onClick:r,thumb:o,card:i,forCamera:s})=>{let a=Fn(i.content.backcolor),l=Te(),c=(0,tp.useRef)(null);(0,tp.useEffect)(()=>{let h=c.current.getContext("2d");if(!h)throw new fo;OIe({ctx:h,thumb:o,backcolor:a.toCSSRGBA()})},[t.screen]);let d=window.devicePixelRatio,u=s?Math.min(480,A7(100)-20):Math.min(480,yy(100)-20);return cn.createElement("div",{className:"addCardTypeSelectorWrapper"},cn.createElement($r,{round:!0},cn.createElement(dr,{inPopover:!s},cn.createElement(fr,null,cn.createElement(mr,null,cn.createElement(Mt,{onClick:e},s?l.cancel:l.back)),cn.createElement(kr,null,l.addCardDialogTitle),cn.createElement(wr,null))),cn.createElement(mn,{className:"addCardTypeSelector"},cn.createElement("div",{className:"addCardTypeContentWrapper"},cn.createElement("div",{className:"addCardTypeContent",role:"button",onClick:()=>r(!0)},cn.createElement("div",{className:"addCardTypeDesc"},l.inThisCard)),cn.createElement("div",{className:"addCardTypeContent",role:"button",onClick:()=>r(!1)},cn.createElement("div",{className:"addCardTypeDesc"},l.asNextCard))),cn.createElement("canvas",{width:u*d,height:164*d,style:{position:"absolute",pointerEvents:"none",width:u,height:164},ref:c}))))};function OIe({ctx:t,backcolor:e,thumb:r}){let o=window.devicePixelRatio,i=t.canvas,s=i.width/o/480;if(t.save(),t.clearRect(0,0,i.width,i.height),t.scale(o,o),t.save(),t.scale(s,s),t.fillStyle="#fff",t.fillRect(40,20,Gt.width,Gt.height),t.shadowColor="rgba(0,0,0,0.4)",t.shadowBlur=8,t.shadowOffsetX=4,t.shadowOffsetY=4,r){let c=ts(r,60*45);t.drawImage(r,60,40,r.width*c,r.height*c)}else t.fillStyle=e,t.fillRect(60,40,60,45);t.restore(),t.save(),t.fillStyle="#fff",t.rect(i.width/(2*o),0,i.width/(2*o),i.height),t.clip(),t.translate(i.width/(2*o),i.height/(2*o)-45/2);let a=-40;t.fillRect(-40,0,60,45),a+=60+22,t.save(),t.shadowColor="rgba(0,0,0,0.4)",t.shadowBlur=8,t.shadowOffsetX=4,t.shadowOffsetY=4;let l=60;if(r){let c=ts(r,60*45),d=(45-r.height*c)/2,[u,p]=[r.width*c,r.height*c];t.drawImage(r,a,d,u,p),l=u}else t.fillStyle=e,t.fillRect(a,0,60,45);a+=l+22,t.restore(),t.fillRect(a,0,60,45),t.save(),t.translate(0,45/2),$ne(t,20,20+20),$ne(t,20+22+l,20+22+l+20),t.restore(),t.restore(),t.restore()}function $ne(t,e,r){t.save(),t.strokeStyle=Ca.toCSSRGBA(),t.lineWidth=2,t.save(),t.beginPath(),t.moveTo(e,0),t.lineTo(r,0),t.stroke(),t.restore(),t.save(),t.lineCap="round",t.lineJoin="round";let o=new er(-1,0);o.rotate(-45),t.beginPath(),t.moveTo(r,0),t.lineTo(r+o.x*4,o.y*4),t.stroke(),o.rotate(90),t.beginPath(),t.moveTo(r,0),t.lineTo(r+o.x*4,o.y*4),t.stroke(),t.restore(),t.restore()}var Po=X(he()),WC=X(he());var zIe=Cc(),yU=class{constructor(e){this.res=e;this.chunks=[];this.workerFetcher=Fl(async()=>{let r=await Vt.zlibWorkerScript.fetch();if(!r)throw new Error("Failed to fetch worker script");return new Worker(r,{name:"zlib.worker"})})}async deflate(e){let r=await this.workerFetcher.fetch();if(!r)throw new Error("unsupported");return new Promise((o,i)=>{r.onmessage=s=>o(s.data),r.onerror=()=>i(new Error("Failed to deflate")),r.postMessage(e,[e.buffer])})}inflate(e){throw new Error("unsupported")}write(e){this.chunks.push(e)}loadDrawnData(e,r){let o=To.get(r,e).packContents();return Promise.resolve(o)}loadBitmapGlyph(e){let r=Dr.create(100,100),o=r.getContext2dForce();return o.beginPath(),o.font="50px Arial",o.textAlign="start",o.textBaseline="alphabetic",o.fillText(e,50,50),this.createThumbData(r)}async loadDrawnThumb(e,r,o){let i=gr.get(e)[r],s=i.get("high");if(s||(await i.load("high",e),s=i.getUnderLevel("high")),!!s)return this.createThumbData(s,o)}async loadThumb(e,r){let o=gr.get(e),i=wo.getMaxLevelForCard(e),s=o.content.get(i);if(s||(await o.content.load(i,e),s=o.content.getUnderLevel(i)),!!s)return this.createThumbData(s,r)}async loadPdfThumb(e,r){let o=this.res.assetUrl(e.contentAssetId());if(!o)return;let i=await nE({urlOrData:o,pageIndexList:[e.content.page_index],pageSize:r});return this.createThumbData(i[0])}async generateLackingGlyphTexture(e,r,o){let i=240/72,s=Xt(r,i),a=Dr.create(s),l=a.getContext2dForce();return L1(l,e,c=>{c.save(),c.beginPath(),c.translate(-e.size.width/2,-e.size.height/2),o.draw(c,{onlyLackingGlyphs:!0}),c.restore()}),this.createThumbData(a)}toBlob(){let e=this.chunks.reduce((i,s)=>i+s.byteLength,0),r=new Uint8Array(e),o=0;for(let i of this.chunks)r.set(i,o),o+=i.byteLength;return new Blob([r],{type:"application/pdf"})}close(){var e;(e=this.workerFetcher.get())==null||e.terminate()}async createThumbData(e,r){let o=!1,i=1,s=Ze(e);r&&(e.width>=r.width||e.height>=r.height)&&(i=Cn(r,e),s=r);let{width:a,height:l}=s,d=Dr.create(a,l).getContext2dForce();d.scale(i,i),d.drawImage(e,0,0);let u=d.getImageData(0,0,a,l),p=a*l,h=new Uint8Array(p*3),f=new Uint8Array(p);for(let v=0;v<p;v=v+1|0){let y=u.data[v*4],S=u.data[v*4+1],C=u.data[v*4+2],b=u.data[v*4+3];h[v*3]=y,h[v*3+1]=S,h[v*3+2]=C,f[v]=b,!o&&b<255&&(o=!0)}let g={image:await this.deflate(h),width:a,height:l,name:zIe()};return o&&(g.alphaChannel=await this.deflate(f)),g}};var BT=class{constructor(e){this.ctx=e.ctx,this.regularFont=e.regularFont,this.boldFont=e.boldFont}prepare(){let{regularFont:e,boldFont:r}=this,o=new yU(this.ctx.res),i=new iO({dest:o}),s=new dO({doc:i,adapter:o,regularFont:e,boldFont:r});return{adapter:o,doc:i,renderer:s}}async exportCardAsPdf(e){let{adapter:r,doc:o,renderer:i}=this.prepare();await i.renderCardGroup(e),o.end();try{return r.toBlob()}finally{r.close()}}async exportDocumentsAsPdf({documents:e,onProgress:r,printAuthor:o}){let{adapter:i,doc:s,renderer:a}=this.prepare(),{lnsClient:l}=this.ctx;async function*c(){for(let{id:d,author:u}of e)yield await l.downloadDocument(d).then(ta).then(h=>ra({id:d,file:h,author:u})).then(async h=>{for(let f of h.memberAndChildrenIteratorOverGroup()){let m=gr.get(f),g=wo.getMaxLevelForCard(f);await Promise.all([m.content.load(g,f),m.drawn.load("high",f),m.annotation.load("high",f)])}return{card:h,author:u.name}})}try{return await a.renderCardsAsync({cards:c(),printAuthor:o,onProgress:r}),s.end(),i.toBlob()}finally{i.close()}}};var eoe=X(Zne());function kh(t,e,{replacement:r="_",max:o=255}={}){let i=(0,eoe.default)(t,{replacement:r}).slice(0,o-e.length);if(i.length+e.length>o)throw new Error("ext too long");return i+e}var Ph=({iconSrc:t,text:e,onClick:r,showArrow:o})=>Po.createElement(Tn,{className:"uiPopoverItem editorOtherDialogCell",role:"button",onClick:r},Po.createElement("div",{className:"editorOtherDialogCellIcon"},Po.createElement(Fr,{src:t})),Po.createElement("div",{className:"editorOtherDialogCellText"},e),o&&Po.createElement("div",{className:"listViewArrowMark"})),toe=t=>{let[e,r]=(0,WC.useState)(!1);return e?Po.createElement(ZIe,{...t,onBack:()=>r(!1)}):Po.createElement(JIe,{...t,onClickExport:()=>r(!0)})},JIe=({store:t,editorStore:e,card:r,focusingCard:o,onClose:i,onClickExport:s})=>{let a=Te(),[l,c]=(0,WC.useState)(!1),d=()=>{let S=r===o,C=Array.from(r.familyIterator()).map(x=>x.id),b=Cm(t,C);if(b){alert(b==="saving"?a.cardHasUnsavedAttachments:a.cardHasUploadFailedAttachments);return}for(let x of r.familyIterator()){let w=Dt(x,Oi);w.setTextSelectedRange(void 0),w.setTextCompositionRange(void 0)}Nt(new jg(o.id,S)),i()},u=S=>{let C=r===o,b;if(S){if(!confirm(a.confirmDuplicateAllConnectedCards))return;b=Array.from(r.memberAndChildrenIterator()).map(k=>k.id)}else b=Array.from(r.familyIterator()).map(k=>k.id);let x=Cm(t,b);if(x){alert(x==="saving"?a.cardHasUnsavedAttachments:a.cardHasUploadFailedAttachments);return}for(let k of r.familyIterator()){let T=Dt(k,Oi);T.setTextSelectedRange(void 0),T.setTextCompositionRange(void 0)}let w=S?"all":"single";Nt(new Ep(o.id,w,C)),i()},p=()=>{var S,C,b,x,w;if(o.id===((C=(S=t.desktop)==null?void 0:S.focusingCard)==null?void 0:C.id)&&o.id!==r.id){let k=Wl(o,o.isFolded);if(!confirm(k))return;o.isFolded?We(yu(o.id)):We(Ma(o.id)),t.reduce(lo())}else{let k=Wl(r,!1);if(!confirm(k))return;let T=(w=(x=(b=r.prev)!=null?b:r.prevGroup)!=null?x:r.next)!=null?w:r.nextGroup;We(Ma(r.id,T==null?void 0:T.id)),r.isFolded&&(T==null?void 0:T.groupMemberCount())===1&&We(l0(T.id,!1))}i()},h=()=>{e.setTool(Ge.Finger),c(!0)},f=S=>{Nt(new jx(r.id,S)),c(!1),i()},{hideAnnotation:m}=e,g=()=>{e.setHideAnnotation(!e.hideAnnotation),t.reduce(Co()),i()},v=m?"/svg/show_annotation.svg":"/svg/hide_annotation.svg",y=()=>{e.setTool(Ge.Finger),s()};return Po.createElement(vb,{className:"editorOtherDialogCellContainer"},o instanceof zr&&Po.createElement(Ph,{iconSrc:"/svg/reuse_icon.svg",text:a.reuseThisTestCard,onClick:d}),o instanceof an&&Po.createElement(Ph,{iconSrc:"/svg/reuse_icon.svg",text:a.reuseThisAttendanceCard,onClick:d}),!(o instanceof zr)&&!(o instanceof an)&&Po.createElement(Ph,{iconSrc:"/svg/copy_icon.svg",text:a.duplicateThisCard,onClick:()=>u(!1)}),Po.createElement(Ph,{iconSrc:"/svg/copy_all_icon.svg",text:a.duplicateAllConnectedCards,onClick:()=>u(!0)}),Po.createElement(Ph,{iconSrc:"/svg/tt_switch.svg",text:a.changeTools,onClick:h}),r.gadgets.annotations&&Po.createElement(Ph,{iconSrc:v,text:m?a.showAnnotation:a.hideAnnotation,onClick:g}),Po.createElement(Ph,{iconSrc:"/img/dustboxMenuIcon@2x.png",text:a.delete,onClick:p}),Po.createElement(Ph,{iconSrc:"/img/ExportMenuIcon@2x.png",onClick:y,text:a.exportCard+" (\u03B2)",showArrow:!0}),Po.createElement(Vr,{open:l,onClose:()=>c(!1),transition:"slide-left",overlay:!0},Po.createElement($C,{onSelect:f,onDismiss:()=>c(!1),dismissOnSelect:!0,draggable:!1})))},ZIe=({store:t,card:e,onBack:r})=>{let o=Te(),i=ju(),[s,a]=(0,WC.useState)();(0,WC.useEffect)(()=>{if(s)return()=>URL.revokeObjectURL(s)},[s]);let l=()=>{let c=oe.exportCard;t.reduce(Fe(c,o.exportingCardAsPdf));let d=Vt.regularFont.getOrFetch(),u=Vt.boldFont.getOrFetch();if(!d||!u)throw new kl;new BT({ctx:ue,regularFont:d,boldFont:u}).exportCardAsPdf(e).then(h=>{t.reduce(Fe(c,null));let f=URL.createObjectURL(h),m=document.createElement("a");m.href=f;let g=yf(t,i.courseId),v=Ut(t.userInfo),y=t.notes.byId[i.noteId].name;m.download=kh(`${g}_${v}_${y}`,".pdf"),m.click(),a(s)}).catch(h=>{let f=De.get().strings;t.reduce(Pe(c,{title:f.couldntExportCard,message:h.message,onOk:()=>t.reduce(Pe(c,void 0)),okMessage:f.back}),Fe(c,null))})};return Po.createElement(vb,{className:"editorOtherDialogCellContainer"},Po.createElement(dr,{inPopover:!0},Po.createElement(fr,null,Po.createElement(mr,null,Po.createElement(une,{onClick:r})),Po.createElement(kr,null,o.exportCard),Po.createElement(wr,null))),Po.createElement("div",null,Po.createElement(Ph,{iconSrc:"/svg/pdf.svg",onClick:l,text:o.pdfFile})))};var Zr=X(he()),UT=X(he());var Wm=X(he());var Eh=({children:t,active:e})=>{let r=Array.isArray(t)?t:[t];return Wm.createElement(Wm.Fragment,null,r.filter(Boolean).map((o,i)=>Wm.createElement(si,{timeout:350,unmountOnExit:!0,classNames:"editorCollapseIcon",key:i,in:e,appear:!0},Wm.createElement("div",{className:"editorCollapseIcon"},o))))},v2=({active:t,width:e,padding:r={left:!1,right:!1},children:o})=>{let i={width:0,opacity:0},s={entering:{width:e,opacity:1,transition:`width 0.25s 0s, opacity 0.1s 0.25s ${r?", padding 0.25s 0s":""}`},entered:{width:e,opacity:1},exiting:{width:0,opacity:0,transition:"width 0.25s 0s"},exited:{width:0,opacity:0},unmounted:{}},{left:a,right:l}=r,c=d=>{let u="0";return r&&(d==="entering"||d==="entered")&&(u=`0 ${l?"4px":"0"} 0 ${a?"4px":"0"}`),{...i,...s[d],padding:u}};return Wm.createElement(fb,{in:t,unmountOnExit:!0,appear:!0,timeout:250},d=>Wm.createElement("div",{style:c(d)}," ",o," "))};var b2=X(he());var e2e=["left","center","right"],t2e=["top","middle","bottom"];function CU({h:t,v:e,vertical:r}){let o="align_";return o+=r?"v_":"h_",o+=t[0],o+=e[0],o+=".svg",o}var roe=({hAlignment:t,vAlignment:e,vertical:r,onClick:o})=>b2.createElement(Nr,{className:"textAlignmentDialog"},t2e.map(i=>e2e.map((s,a)=>b2.createElement(Nr,{onClick:()=>o(s,i),className:"textAlignmentDialogCell",style:{backgroundColor:i===e&&s===t?"#9FCBEE":"white"},key:`${s}-${a}`},b2.createElement(Fr,{className:"textAlignmentDialogCellIcon",src:`/svg/alignment-dialog/${CU({h:s,v:i,vertical:r})}`})))));var Cs=X(he()),_h=X(he());function SU(t,e,r,o=0){if(t<=0||isNaN(t)||!isFinite(t))return[];if(e<0||isNaN(e)||!isFinite(e))return[];let i=[];r&&t>r&&(t=r);for(let s of r2e(t))if(r&&s>r||(o<s&&i.push(s),i.length>=e+1))break;for(let s of n2e(t)){if(o&&s<o)break;if(!(i[0]<=s)){if(i.length>=2*e+1)break;i.splice(0,0,s)}}return i}var Ai=[1,1.2,1.4,1.6,1.8,2,3,4,5,6,7,8,9];function*r2e(t){if(t<=0||isNaN(t)||!isFinite(t))return;let e=10**Math.floor(Math.log10(t)),r=0;for(let o=0;o<Ai.length;o++){let i=Ai[o],s=o+1<Ai.length?Ai[o+1]:Ai[0]*10;if(i*e<=t&&t<s*e){r=o;break}}for(;;)yield Ai[r]*e,r++,r===Ai.length&&(r=0,e*=10)}function*n2e(t){if(t<=0||isNaN(t)||!isFinite(t))return;let e=10**Math.floor(Math.log10(t)),r=0;for(let o=0;o<Ai.length;o++){let i=Ai[o],s=o+1<Ai.length?Ai[o+1]:Ai[0]*10;if(i*e<=t&&t<s*e){r=o;break}}for(;;)yield Ai[r]*e,r--,r<0&&(r=Ai.length-1,e/=10)}function jm(t,e=!1){if(t<=0||isNaN(t)||!isFinite(t))return`${t}`;let r=e?i2e(t):o2e(t);if(0<r&&r<1){let o=Math.round(Math.log10(r))*-1;if(0<o&&o<100)return t.toFixed(o)}return t.toFixed()}function o2e(t){if(t<=0||isNaN(t)||!isFinite(t))return 1;let e=y2(t),r=C2(t);if(!e||!r)return 1;let o=Math.max(e-t,t-r);return 10**Math.round(Math.log10(o))}function i2e(t){if(t<=0||isNaN(t)||!isFinite(t))return 1;let e=xU(t);if(!e)return 1;let r=10**e.scaleIndex*Ai[e.pivotIndex],[o,i,s]=SU(r,1),a=Math.max(s-i,i-o);return 10**Math.floor(Math.log10(a))}function xU(t){if(t<=0||isNaN(t)||!isFinite(t))return;let e=Math.floor(Math.log10(t)),r=10**e,o=0;for(let i=0;i<Ai.length;i++){let s=Ai[i],a=i+1<Ai.length?Ai[i+1]:Ai[0]*10;if(s*r<=t&&t<a*r){o=i;break}}return{scaleIndex:e,pivotIndex:o}}var wU=class{constructor(e,r,o){this._currentSize=e;this.min=r;this.max=o}increment(){let e=y2(this._currentSize);e&&e<=this.max&&(this._currentSize=e)}decrement(){let e=C2(this._currentSize);e&&e>=this.min&&(this._currentSize=e)}get currentSize(){return this._currentSize}setCurrentSize(e){this._currentSize=e}};function y2(t){let e=xU(t);if(!e)return;let r=10**e.scaleIndex*Ai[e.pivotIndex],o=10**(Math.floor(Math.log10(t))-1),s=Math.round((t-r)/o)+1,a=r+o*s;return noe(a-t,o)&&(s-=1),r+o*s}function C2(t){if(t<=Number.EPSILON)return;let e=xU(t);if(!e)return;let r=10**e.scaleIndex*Ai[e.pivotIndex],o=10**(Math.floor(Math.log10(t))-1);s2e(t,o*10)&&(o/=10);let s=Math.round((t-r)/o)-1,a=r+o*s;return noe(t-a,o)&&(s+=1),r+o*s}function s2e(t,e){return Math.abs(t-e)<=Number.EPSILON}function noe(t,e){return Math.abs(t-e)<=1e-5?!1:t-e>0}var S2=X(he());var LT=({open:t,onClose:e,popoverAnchor:r,getParentBounds:o,shadow:i,enableArrow:s=!0,children:a})=>{let l=qe(),c=l.screen.height*.5,d=s?"#fff":"transparent";return S2.createElement(Vr,{open:t,onClose:e,textEditing:!0},l.screen.isMobile&&S2.createElement("div",{className:"editorTextAttributeDialog",style:{top:`${c}px`},"data-shadow":i},a),!l.screen.isMobile&&S2.createElement(wh,{anchor:r,arrowColor:d,getParentBounds:o},a))};var a2e=({size:t,selected:e,exact:r,onClick:o})=>Cs.createElement(Nr,{onClick:()=>o(t),className:"textSizeDialogCell","data-selected":e,"data-exact":r},jm(t,!0)),ooe=1,TU=.01,l2e=50,c2e=200,d2e=50,u2e=3,OT=Math.sqrt(Rr(z0)/Rr(Gt)),DU=class extends Cs.Component{constructor(e){super(e);this.inputRef=(0,_h.createRef)();this.fontSizeChanged=Ac();this.firstScrollTo=(0,_h.createRef)();this.onMouseDownTextSizeInput=e=>{var i;let{textActionDispatcher:r,setMode:o}=this.props;r.fontSizeInputWillFocus(),this.isFontSizeEditable&&((i=this.inputRef.current)==null||i.focus()),o("opaque")};this.onBlurTextSizeInput=e=>{this.notifyFontSizeFromInput(!1),this.props.textActionDispatcher.fontSizeInputDidBlurred()};this.onTextSizeChanged=e=>{this.notifyFontSizeFromInput(!1)};this.onKeyDownTextSizeInput=e=>{let{onClose:r,setMode:o}=this.props,{key:i}=e;switch(i){case"Enter":case"Escape":this.notifyFontSizeFromInput(!1),r();return;case"ArrowUp":{e.preventDefault(),this.stepper.decrement(),this.updateFontSizeInput();break}case"ArrowDown":{e.preventDefault(),this.stepper.increment(),this.updateFontSizeInput();break}}o("transparent")};this.onKeyUpTextSizeInput=e=>{let{key:r}=e;switch(r){case"ArrowUp":case"ArrowDown":this.notifyFontSizeFromInput(!1);break}};this.onCellsContainerClicked=e=>{let{mode:r,onClose:o}=this.props;r==="transparent"&&o()};this.onSizeCellClicked=e=>{this.stepper.setCurrentSize(e),this.fontSizeDidChanged(e,!1),this.updateFontSizeInput(),this.props.setMode("transparent"),this.setState({universalTextSize:e})};this.stopLongPressTimer=e=>{if(e.preventDefault(),this.longPressTimer===void 0)return;this.stopTimer();let r=this.stepper.currentSize;this.fontSizeDidChanged(r,!1),this.updateFontSizeInput(),this.setState({universalTextSize:r})};this.state={universalTextSize:e.universalTextSize},this.presets=this.calcTextSizePresets(e.universalTextSize);let r=this.calcTextSizeLimit();this.stepper=new wU(e.universalTextSize,r.min,r.max),this.textSizeInputLimit={max:C2(r.max),min:y2(r.min)}}render(){let{screen:e,mode:r,setMode:o}=this.props,{universalTextSize:i}=this.state,s=yP(this.presets,i,(d,u)=>d-u),a=jm(i),l=this.isFontSizeEditable;return Cs.createElement(Nr,{className:"textSizeDialog","data-transparent":r==="transparent",onMouseEnter:()=>o("opaque"),onMouseDown:d=>{d.target instanceof HTMLInputElement||d.preventDefault()}},Cs.createElement("div",{className:"textSizeDialogControlsContainer","data-editable":l},Cs.createElement(Nr,{className:"textSizeDialogChangeButtonsContainer"},Cs.createElement("div",{className:"textSizeDialogChangeButton textSizeDialogChangeButtonMinus",onPointerDown:this.startLongPressTimer(d=>{d.decrement()}),onPointerUp:this.stopLongPressTimer,onPointerCancel:this.stopLongPressTimer,onPointerLeave:this.stopLongPressTimer,"data-editable":l}),Cs.createElement("div",{className:"textSizeDialogChangeButton textSizeDialogChangeButtonPlus",onPointerDown:this.startLongPressTimer(d=>{d.increment()}),onPointerUp:this.stopLongPressTimer,onPointerCancel:this.stopLongPressTimer,onPointerLeave:this.stopLongPressTimer,"data-editable":l})),Cs.createElement("div",{className:"textSizeDialogLabelContainer",onPointerDown:()=>o("opaque")},Cs.createElement("input",{className:"textSizeDialogSizeLabel",type:"text",defaultValue:a,onChange:this.onTextSizeChanged,onMouseDown:this.onMouseDownTextSizeInput,onPointerDown:this.onMouseDownTextSizeInput,onBlur:this.onBlurTextSizeInput,onKeyDown:this.onKeyDownTextSizeInput,onKeyUp:this.onKeyUpTextSizeInput,ref:this.inputRef,"data-editable":l}))),Cs.createElement(Nr,{className:"textSizeDialogCellsContainerScroller"},Cs.createElement("div",{className:"textSizeDialogCellsContainer",style:{maxHeight:`calc(${e.height}px - var(--textSizeDialogLabelContainerHeight) - var(--textSizeDialogMargin) - ${qz}px - 2 * ${gb}px)`},onScroll:p2e(),onClick:this.onCellsContainerClicked},this.presets.map((d,u)=>Cs.createElement("div",{ref:u===s?this.firstScrollTo:null,key:u},Cs.createElement(a2e,{size:d,exact:Tl(d,i),selected:u===s,onClick:this.onSizeCellClicked}))))))}componentDidMount(){var e;(e=this.firstScrollTo.current)==null||e.scrollIntoView({block:"center"})}componentDidUpdate(e,r,o){var i;if(this.props.mode==="opaque"&&e.mode==="transparent"&&((i=this.firstScrollTo.current)==null||i.scrollIntoView({block:"center"})),this.props.focusingCard!==e.focusingCard){let{universalTextSize:s}=this.props;this.stepper.setCurrentSize(s)}}componentWillUnmount(){this.fontSizeChanged.drain()&&this.notifyFontSizeFromInput(!0),this.props.textActionDispatcher.fontSizeInputDidBlurred(),this.stopTimer()}get isFontSizeEditable(){return this.props.screen.keyboardHeight===0}calcTextSizePresets(e){let r=Math.max(this.props.card.size.height,this.props.card.size.width),o=r*ooe*OT,i=r*TU*OT;return SU(e,l2e,o,i)}calcTextSizeLimit(){let e=Math.max(this.props.card.size.height,this.props.card.size.width),r=e*ooe*OT,o=e*TU*OT,s=Math.max(this.props.focusingCard.size.height,this.props.focusingCard.size.width)*TU*OT;return{max:r,min:Math.min(s,o)}}notifyFontSizeFromInput(e){let r=parseFloat(this.inputRef.current.value);Number.isNaN(r)||!Number.isFinite(r)||r<=0||r===this.state.universalTextSize&&!e||(this.textSizeInputLimit.max&&r>this.textSizeInputLimit.max?r=this.textSizeInputLimit.max:this.textSizeInputLimit.min&&r<this.textSizeInputLimit.min&&(r=this.textSizeInputLimit.min),this.fontSizeDidChanged(r,e),this.setState({universalTextSize:r}))}updateFontSizeInput(){let e=jm(this.stepper.currentSize);this.inputRef.current.value=e}fontSizeDidChanged(e,r){this.props.textActionDispatcher.fontSizeDidChanged(e,r),this.fontSizeChanged.mark()}startLongPressTimer(e){return r=>{r.preventDefault(),this.props.mode==="opaque"&&this.props.setMode("transparent"),this.stopTimer();let o=()=>{e(this.stepper);let s=this.stepper.currentSize;this.fontSizeDidChanged(s,!1),this.updateFontSizeInput(),this.setState({universalTextSize:s})};o();let i=0;this.longPressTimer=window.setInterval(()=>{o(),i+=1,i===u2e&&(window.clearInterval(this.longPressTimer),this.longPressTimer=window.setInterval(()=>{o()},d2e))},c2e)}}stopTimer(){this.longPressTimer!==void 0&&(window.clearInterval(this.longPressTimer),this.longPressTimer=void 0)}},ioe=({card:t,focusingCard:e,open:r,onClose:o,popoverAnchor:i,getParentBounds:s,universalTextSize:a,textActionDispatcher:l,screen:c})=>{let[d,u]=(0,_h.useState)("opaque"),p=d==="opaque";return(0,_h.useEffect)(()=>{r&&u("opaque")},[r]),Cs.createElement(LT,{open:r,onClose:o,popoverAnchor:i,getParentBounds:s,enableArrow:p},Cs.createElement(DU,{card:t,focusingCard:e,universalTextSize:a,textActionDispatcher:l,screen:c,onClose:o,mode:d,setMode:u}))},soe=({card:t,focusingCard:e,open:r,onClose:o,universalTextSize:i,textActionDispatcher:s,screen:a})=>{let[l,c]=(0,_h.useState)("opaque");return(0,_h.useEffect)(()=>{r&&c("opaque")},[r]),Cs.createElement(jt,{open:r,onClose:o,textEditing:!0,anchor:"bottomCenter"},Cs.createElement(DU,{card:t,focusingCard:e,universalTextSize:i,textActionDispatcher:s,screen:a,onClose:o,mode:l,setMode:c}))};function p2e(t){if(!!t)return P0()?e=>{let{scrollTop:r,clientHeight:o,scrollHeight:i}=e.currentTarget;r===0?e.currentTarget.scrollTop=1:r+o===i&&(e.currentTarget.scrollTop=r-1),t(e)}:t}var AU=X(he()),hoe=X(he());var Ql=X(he());var Va=X(he()),zT=X(he());var Ah=X(he());var aoe=({store:t,forDocument:e,enableClear:r,isActive:o,isOpenPopover:i,drawToolDispatcher:s,onClick:a,onClosePopover:l})=>{let{lastTool:c}=e?t.userPreference.documentDrawToolPrefs:t.userPreference.cardDrawToolPrefs,d=()=>{!r||(s.clear(),l(),t.reduce(bd({forDocument:e,tool:c})))},u=Te();return Ah.createElement(Km,{showTriangle:o},Ah.createElement("div",{className:"editorSvgButtonIcon editorDrawToggleButton eraserIcon",role:"button",onClick:a,"data-active":o}),Ah.createElement(jt,{open:i,onClose:l,container:"none"},Ah.createElement("div",{className:"popoverDialog"},Ah.createElement("div",{className:"editorDrawToolPopoverInner"},Ah.createElement("div",{className:"editorDrawToolClearButton",onClick:d},Ah.createElement("div",{className:"editorSvgButtonIcon drawnClearIcon","data-enable":r}),Ah.createElement("div",{style:{color:r?"#0075f6":"#cccccc"}},u.clearAll))))))};var Jr=X(he());var loe=({store:t,forDocument:e,isToolActive:r,isOpenPopover:o,onClick:i,onClosePopover:s})=>{let{activeTool:a,prefs:l,activePen:c}=e?t.userPreference.documentDrawToolPrefs:t.userPreference.cardDrawToolPrefs,d=l.pen,u=a==="pen",p="transparent",h="penToolIcon";r&&(p=pn(d.colors[d.activeColor]).toRGBAHex(),h=`${c}Icon`);let f=So(),m=v=>()=>{t.reduce(bd({forDocument:e,tool:"pen",pen:v})),f(()=>s(),200)},g=Te();return Jr.createElement(Km,{showTriangle:r&&u},Jr.createElement("div",{className:"editorButton drawButton relative",role:"button",onClick:i,"data-active":u},Jr.createElement("div",{className:`editorSvgButtonIcon ${h}`}),r&&Jr.createElement(PU,{type:c,color:p})),Jr.createElement(jt,{open:o&&u,onClose:s,container:"none"},Jr.createElement("div",{className:"popoverDialog"},Jr.createElement("div",{className:"editorDrawToolPopoverInner"},Jr.createElement("div",{className:"editorDrawToolPopoverTitle"},g.penType),Jr.createElement("div",{className:"penTypeGroup"},Jr.createElement(kU,{type:"pencil",isSelected:c==="pencil",onClick:m}),Jr.createElement(kU,{type:"brush",isSelected:c==="brush",onClick:m}),Jr.createElement(kU,{type:"pen",isSelected:c==="pen",onClick:m}))))))},kU=({type:t,isSelected:e,onClick:r})=>{let o=250,i={transition:`background-position-y ${o}ms ease-in-out`,backgroundPositionY:20},s={entering:{backgroundPositionY:0},entered:{backgroundPositionY:0},exiting:{backgroundPositionY:20},exited:{backgroundPositionY:20},unmounted:{}};return Jr.createElement("div",{className:"selectPenTypeButton",onClick:r(t)},e&&Jr.createElement("div",{className:"selectPenTypeButtonDot"}),Jr.createElement(fb,{in:e,timeout:o},a=>Jr.createElement("div",{className:`selectPenTypeIcon ${t}TypeIcon`,style:{...i,...s[a]}})))},PU=({color:t,type:e})=>Jr.createElement("div",{className:"editorDrawToolPenColorIcon",style:{fill:t}},Jr.createElement("svg",{version:"1.1",viewBox:"0 0 53.333 53.333",xmlns:"http://www.w3.org/2000/svg"},e==="pen"&&Jr.createElement(h2e,null),e==="pencil"&&Jr.createElement(f2e,null),e==="brush"&&Jr.createElement(m2e,null),e==="highlighter"&&Jr.createElement(g2e,null))),h2e=()=>Jr.createElement("g",{transform:"matrix(1.3333,0,0,-1.3333,0,53.333)"},Jr.createElement("g",{transform:"translate(15.427,15.427)"},Jr.createElement("path",{d:"m0 0c-0.082 0.082-0.142 0.177-0.184 0.277l-2.933-2.933c-0.135-0.235-0.266-0.456-0.384-0.644l0.201-0.201c0.188 0.118 0.408 0.249 0.643 0.383l2.934 2.934c-0.1 0.042-0.195 0.102-0.277 0.184"})),Jr.createElement("g",{transform:"translate(24.772,27.871)"},Jr.createElement("path",{d:"m0 0-3.446-3.871 2.674-2.673 3.871 3.445z"}))),f2e=()=>Jr.createElement("g",{transform:"matrix(1.3333 0 0 -1.3333 0 53.333)"},Jr.createElement("g",{transform:"translate(14.07 12.448)"},Jr.createElement("path",{d:"m0 0-1.594 1.594-0.794-2.388z"})),Jr.createElement("g",{transform:"translate(19.781 15.474)"},Jr.createElement("path",{d:"m0 0 7e-3 1.192-2.618 0.475-0.476 2.619-1.191-7e-3 8.934 8.935 4.28-4.278z"}))),m2e=()=>Jr.createElement("g",{transform:"matrix(1.3333,0,0,-1.3333,0,53.333)"},Jr.createElement("g",{transform:"translate(13.052,13.462)"},Jr.createElement("path",{d:"M 0,0 C -0.477,0 -0.925,0.019 -1.335,0.049 -0.065,0.942 0.714,1.767 1.283,2.5 1.427,2.229 1.632,1.949 1.93,1.776 2.263,1.584 2.641,1.556 3.054,1.694 3.806,1.944 4.198,1.376 4.3,1.196 4.383,1.048 4.431,0.892 4.445,0.75 3.324,0.265 1.805,0 0,0"})),Jr.createElement("g",{transform:"translate(26.338,22.932)"},Jr.createElement("path",{d:"m0 0-0.047-0.039-2.606 2.606 0.039 0.049 1.75 1.75 2.615-2.615z"}))),g2e=()=>Jr.createElement("g",{transform:"matrix(1.3333 0 0 -1.3333 0 53.333)"},Jr.createElement("g",{transform:"translate(22.149 17.619)"},Jr.createElement("path",{d:"m0 0 6.528 6.529-4.418 4.418-6.529-6.529z"})),Jr.createElement("g",{transform:"translate(12.493 13.418)"},Jr.createElement("path",{d:"m0 0-1.591-1.59 1.772-0.303 0.856 0.856z"})));var Xl=X(he()),Ih=X(he());var Ii=[1,2,6,12,30];function coe(t,e,r){t.lineWidth=e,t.beginPath(),r?(t.lineJoin="miter",t.lineCap="square",t.moveTo(20,40),t.lineTo(50,20),t.lineTo(75,30),t.lineTo(100,40),t.lineTo(130,20)):(t.lineJoin="round",t.lineCap="round",t.moveTo(20,40),t.quadraticCurveTo(30,20,50,20),t.quadraticCurveTo(60,20,75,30),t.quadraticCurveTo(90,40,100,40),t.quadraticCurveTo(110,40,130,20)),t.stroke()}function v2e(t,e,r){t.lineWidth=e,t.beginPath(),r?(t.lineJoin="miter",t.lineCap="square",t.moveTo(20,40),t.lineTo(70,10),t.lineTo(90,50),t.lineTo(130,30)):(t.lineJoin="round",t.lineCap="round",t.moveTo(20,40),t.quadraticCurveTo(76,0,80,30),t.quadraticCurveTo(85,65,130,30)),t.stroke()}function b2e({canvas:t,store:e,forDocument:r,onClose:o}){let{prefs:i,activeTool:s}=r?e.userPreference.documentDrawToolPrefs:e.userPreference.cardDrawToolPrefs,a=i[s],l=a.activeRuler,c=t.height/5,d=a.width,u=new Mn(t),p=!1;function h(){c=t.height/5}let f=C=>{if(C===0)return Ii[0];if(C===t.height-c)return Ii[Ii.length-1];let b=Math.floor(C/(t.height/5)),x=c*(b+1),w=(c-(x-C))/c;return 0<=b&&b<Ii.length-1?Ii[b]+(Ii[b+1]-Ii[b])*w:Math.max(Math.min(Ii[4],d),Ii[0])},m=C=>{for(let b=0;b<Ii.length-1;b++)if(Ii[b]<=C&&C<Ii[b+1]){let x=Ii[b+1]-Ii[b],w=(C-Ii[b])/x;return Math.round(c*b+c*w)}return t.height-c},g=m(d);u.onSingle=(C,b)=>{if(C!=="down"){if(C==="move")!p&&Math.abs(b.down.y-b.y)>5&&(p=!0,g=b.y-c/2),p&&(g=Math.min(t.height-c,Math.max(0,g+b.dy)),d=f(g));else if(C==="up"){if(Math.abs(b.y-b.down.y)<=5){let x=Math.floor(b.y/c);d=Ii[x],g=x*c}else d=Math.min(Ii[Ii.length-1],Math.max(Ii[0],d));p=!1,e.reduce(vu({forDocument:r,part:{width:d}})),o()}}};let v=!1;function y(){let C=t.getContext("2d");if(!C)throw new fo;let b=t.width/150,x=t.height/5;C.save(),C.clearRect(0,0,t.width,t.height),C.lineWidth=2,C.strokeStyle="#000",C.save(),C.strokeStyle="#0075f6",C.strokeRect(1,g+1,t.width-2,x-2),C.restore(),(Ii.indexOf(d)<0||p)&&(C.save(),C.translate(0,g),C.scale(b,b),coe(C,d,l),C.restore()),C.scale(b,b);for(let w=0;w<5;w++){let k=x*w;C.save(),C.translate(0,k/b),(Ii.indexOf(d)<0||p)&&(C.strokeStyle="rgba(0,0,0,0.4)"),coe(C,Ii[w],l),C.restore()}C.restore()}function S(){h(),y(),v||requestAnimationFrame(S)}return requestAnimationFrame(S),{close(){v=!0,u.unbind()},onNextState(C){e=C.store;let b=r?e.userPreference.documentDrawToolPrefs:e.userPreference.cardDrawToolPrefs;s=b.activeTool,i=b.prefs,d=i[s].width,g=m(d)}}}var y2e=({store:t,forDocument:e,isEraser:r,onClose:o})=>{let i=(0,Ih.useRef)(null),[s,a]=(0,Ih.useState)(void 0);(0,Ih.useEffect)(()=>{let f=i.current;if(f){let m=b2e({canvas:f,store:t,forDocument:e,onClose:o});a(m)}return()=>{s&&s.close()}},[]),(0,Ih.useEffect)(()=>{s==null||s.onNextState({store:t})},[t]);let{width:l,height:c}=t.screen,d=Math.min(l,c),u=t.screen.isMobile?d*.5:200,p=u/2,h=Te();return Xl.createElement("div",{className:"popoverDialog"},Xl.createElement("div",{className:"editorDrawToolPopoverInner"},Xl.createElement("div",{className:"editorDrawToolPopoverTitle"},r?h.eraserSize:h.penThickness),Xl.createElement("canvas",{width:p*window.devicePixelRatio,height:u*window.devicePixelRatio,style:{width:p,height:u},ref:i})))},doe=({store:t,forDocument:e,isOpenPopover:r,onClick:o,onClosePopover:i})=>{let{prefs:s,activeTool:a}=e?t.userPreference.documentDrawToolPrefs:t.userPreference.cardDrawToolPrefs,l=s[a].width,c=s[a].activeRuler,d=(0,Ih.useRef)(null);(0,Ih.useEffect)(()=>{u(c,l)},[a,c,l]);let u=(f,m)=>{let g=d.current;if(!g)return;let v=g.getContext("2d");if(!v)throw new fo;let y=g.width*.6,S=y/150,C=60*S;v.save(),v.clearRect(0,0,g.width,g.height),v.strokeStyle="#000";let b=g.width/2-y/2,x=g.height/2-C/2;v.translate(b,x),v.scale(S,S),v2e(v,m*.55+3.4,f),v.restore()},p=Math.min(t.screen.width,t.screen.height),h=t.screen.isMobile?p*.08:48;return Xl.createElement(Xl.Fragment,null,Xl.createElement(Km,{showTriangle:!0},Xl.createElement("div",{className:"editorDrawToolButton",onClick:o},Xl.createElement("canvas",{width:h*window.devicePixelRatio,height:h*window.devicePixelRatio,style:{width:h,height:h},ref:d}))),Xl.createElement(jt,{open:r,onClose:i,container:"none"},Xl.createElement(y2e,{store:t,forDocument:e,isEraser:a==="eraser",onClose:i})))};var EU=X(he());var uoe=({pref:t,isActive:e,onClick:r})=>{let o=pn(t.colors[t.activeColor]).toRGBAHex();return EU.createElement("div",{className:"editorSvgButtonIcon editorDrawToggleButton highlighterIcon relative",role:"button",onClick:r,"data-active":e},EU.createElement(PU,{type:"highlighter",color:o}))};var Rh=({store:t,editorStore:e,drawToolDispatcher:r,forDocument:o})=>{let i=e.selectedTool===Ge.Draw,{activeTool:s,lastTool:a,prefs:l}=o?t.userPreference.documentDrawToolPrefs:t.userPreference.cardDrawToolPrefs,c=l[s],[d,u]=(0,zT.useState)(),p=()=>{u(void 0)};(0,zT.useEffect)(()=>{e.moveMode&&u(void 0)},[e.moveMode]),(0,zT.useEffect)(()=>{i&&t.reduce(bd({forDocument:o,tool:a})),u(void 0)},[i]);let h=()=>{if(!i){e.setTool(Ge.Draw);return}if(d){u(void 0);return}if(s==="pen")if(c.activeRuler){let b={activeRuler:!1};t.reduce(vu({forDocument:o,part:b}))}else u("pen");else t.reduce(bd({forDocument:o,tool:"pen"}))},f=()=>{if(!(!i||s==="highlighter")){if(d){u(void 0);return}t.reduce(bd({forDocument:o,tool:"highlighter"}))}},m=()=>{if(!!i)if(s==="pen"||s==="highlighter"){let b={activeRuler:!c.activeRuler};t.reduce(vu({forDocument:o,part:b}))}else{let b=a,x=a==="pen"?"pencil":void 0;t.reduce(bd({forDocument:o,tool:b,pen:x}),vu({forDocument:o,tool:b,part:{activeRuler:!0}}))}},g=b=>()=>{if(!i)return;if(d){u(void 0);return}let x={activeColor:b};if(s==="eraser"){t.reduce(bd({forDocument:o,tool:a}),vu({forDocument:o,tool:a,part:x}));return}c.activeColor===b?u("color"):t.reduce(vu({forDocument:o,part:x}))},v=()=>{!i||!e.canUndoStroke||r.undo()},y=()=>{!i||!e.canRedoStroke||r.redo()},S=()=>{if(!!i){if(d){u(void 0);return}s==="eraser"?u("eraser"):t.reduce(bd({forDocument:o,tool:"eraser"}))}},C=()=>{if(!!i){if(d){u(void 0);return}u("width")}};return Va.createElement("div",{className:"editorButtonWrapper editorDrawTools editorHeaderItem","data-active":i},Va.createElement(loe,{store:t,forDocument:o,isToolActive:i,isOpenPopover:d==="pen",onClick:h,onClosePopover:p}),Va.createElement(Eh,{active:i},Va.createElement(uoe,{pref:l.highlighter,isActive:s==="highlighter",onClick:f}),Va.createElement(aoe,{store:t,forDocument:o,enableClear:e.canClearStroke,isActive:s==="eraser",isOpenPopover:d==="eraser",drawToolDispatcher:r,onClick:S,onClosePopover:p}),Va.createElement("div",{className:"editorSvgButtonIcon editorDrawToggleButton rulerIcon",role:"button",onClick:m,"data-active":c.activeRuler}),Va.createElement(doe,{store:t,forDocument:o,isOpenPopover:d==="width",onClick:C,onClosePopover:p}),Va.createElement(x2,{store:t,forDocument:o,isOpenPopover:d==="color",index:1,onClick:g(1),onClosePopover:p}),Va.createElement(x2,{store:t,forDocument:o,isOpenPopover:d==="color",index:2,onClick:g(2),onClosePopover:p}),Va.createElement(x2,{store:t,forDocument:o,isOpenPopover:d==="color",index:3,onClick:g(3),onClosePopover:p}),Va.createElement("div",{className:"editorSvgButtonIcon editorDrawToolButton undoIcon",role:"button",onClick:v,"data-enable":e.canUndoStroke}),Va.createElement("div",{className:"editorSvgButtonIcon editorDrawToolButton redoIcon",role:"button",onClick:y,"data-enable":e.canRedoStroke})))},Km=({showTriangle:t,enableActiveBgColor:e=!0,children:r})=>Va.createElement(Nr,{className:"editorDrawToolPopoverButton","data-enable":e},r,t&&Va.createElement("div",{className:"editorDrawToolPopoverButtonTriangle"})),poe=200,jC=({store:t,isScreenSharing:e,isFingerMode:r=!1,isFocusWebCard:o=!1,bounds:i=1120,boundsForScreenSharing:s=860})=>{i=o?i:i-60;let a=t.screen.isMobile;return r?e?!1:(i=i-360,a?t.screen.width<i-poe:t.screen.width<i):(i=e?s:i,a?t.screen.width<i-poe:t.screen.width<i)};var C2e=["#E53935FF","#FE7914FF","#FFD600FF","#12AD50FF","#004CBAFF","#B71A86FF","#71411DFF","#131313FF","#F48A9CFF","#FFA877FF","#FFE55CFF","#9EE864FF","#54B7EDFF","#E59ED6FF","#C29874FF","#AEB5BAFF","#FF6CC0FF","#FFAD40FF","#FFFF00FF","#37F091FF","#0AD8FEFF","#D483FFFF","#FFDEC2FF","#FFFFFFFF"].map(Pt),x2=({store:t,forDocument:e,isOpenPopover:r,index:o,onClick:i,onClosePopover:s})=>{let{activeTool:a,lastTool:l,prefs:c}=e?t.userPreference.documentDrawToolPrefs:t.userPreference.cardDrawToolPrefs,d=c[a==="eraser"?l:a],u=d.activeColor===o&&a!=="eraser",p=pn(d.colors[o]).toRGBAHex(),h=m=>{let g=d.colors;g[o]=m,t.reduce(vu({forDocument:e,part:{colors:g}})),s()},f=Te();return Ql.createElement(Km,{showTriangle:u,enableActiveBgColor:!1},Ql.createElement("div",{className:"editorDrawToolColorButton",role:"button",onClick:i},Ql.createElement("div",{className:"editorDrawToolColorButtonOuter",style:{backgroundColor:u?"white":"transparent"}},Ql.createElement("div",{className:"editorDrawToolColorButtonInner",style:{backgroundColor:p}}))),Ql.createElement(jt,{open:r&&u,onClose:s,container:"none"},Ql.createElement("div",{className:"popoverDialog"},Ql.createElement(_U,{title:a==="highlighter"?f.highlighterColor:f.penColor,colors:C2e,onClick:h,numRows:3}))))},S2e=({color:t,onClick:e})=>Ql.createElement("div",{className:"editorDrawToolColorPicker",onClick:e,style:{backgroundColor:t.toCSSRGBA()}}),_U=({title:t,colors:e,numRows:r,onClick:o})=>{let i=Math.ceil(e.length/r),s=Array.from({length:r},(a,l)=>l);return Ql.createElement("div",{className:"editorDrawToolPopoverInner"},t&&Ql.createElement("div",{className:"editorDrawToolPopoverTitle"},t),s.map(a=>Ql.createElement("div",{className:"editorDrawToolColorPickerInner",key:a},e.slice(a*i,a*i+i).map((l,c)=>Ql.createElement(S2e,{color:l,onClick:()=>o(l),key:c})))))};var x2e=["#ED1E14FF","#CE579BFF","#09A318FF","#007AB7FF","#000000FF","#E58339FF","#FF9FACFF","#A4C520FF","#6EB7DBFF","#70411CFF","#F3C008FF","#FAE4D4FF","#FFE600FF","#FFFFFFFF","#AAAAAAFF"].map(Pt),w2=({onClick:t})=>{let[e,r]=(0,hoe.useState)();return AU.createElement(Nr,{className:"popoverDialog"},AU.createElement(_U,{colors:x2e,numRows:3,onClick:i=>{(e==null?void 0:e.equals(i))||t(i),r(i)}}))};var IU=X(he()),foe=({text:t,fontSize:e,color:r,maxNormalTextLength:o})=>IU.createElement("svg",{width:"100%",height:"100%"},IU.createElement("text",{fill:r!=null?r:"black",x:"50%",y:"50%",width:"100%",height:"100%",fontSize:e,textLength:o<t.length?"100%":void 0,lengthAdjust:"spacingAndGlyphs",textAnchor:"middle",dominantBaseline:"central"},t));var T2=X(he());var D2=({current:t,onClick:e})=>{let r=1,o=2,i=[r,1.15,1.5,o],s=ht(t,r,o),a=yP(i,s,(l,c)=>l-c);return T2.createElement(Nr,{className:"lineHeightDialog"},i.map((l,c)=>T2.createElement(Nr,{onClick:()=>e(l),key:c},T2.createElement("div",{className:"lineHeightSelectorCell","data-checked":c===a},l))))};var RU=({card:t,focusingCard:e,editorStore:r,textActionDispatcher:o,onClick:i})=>{var R,N,V,W;let s=bc(),a=qe(),l=Te(),[c,d]=wn({}),u=()=>d({modal:void 0}),{title:p}=e.gadgets,h=r.selectedTool===Ge.Text,f=(R=p==null?void 0:p.vertical)!=null?R:!1,{color:m,fontSize:g,bold:v,list:y,lineHeightMultiple:S}=r.typingAttributes,C=$p({card:e,clipLocalFontSize:g}),b=jm(C),[x,w]=(0,UT.useState)({h:(N=p==null?void 0:p.h_alignment)!=null?N:"left",v:(V=p==null?void 0:p.v_alignment)!=null?V:"top"}),k=(me,ie)=>{(me!==x.h||ie!==x.v)&&(o.changeAlignment(me,ie),w({h:me,v:ie}))},T=CU({h:x.h,v:x.v,vertical:f}),A=ue.res.src(`/svg/alignment-dialog/${T}`);(0,UT.useEffect)(()=>{let me=e.gadgets.title;!me||w({h:me.h_alignment,v:me.v_alignment})},[e]),(0,UT.useEffect)(()=>{!h&&c.modal!==void 0&&d({modal:void 0})},[h,c.modal]);let E=()=>{o==null||o.toggleVertical(),s()},{v:F}=Cy(Pt("#faecbaff")),{v:z}=Cy(m),L=Math.abs(F-z)<.02;return Zr.createElement("div",{className:"editorButtonWrapper editorTextTool editorHeaderItem","data-active":h},Zr.createElement(Nr,{onClick:i},!h&&Zr.createElement("div",{className:"editorButton textButton"},Zr.createElement("div",{className:`editorButtonIcon ${l.textButtonIconClass}`})),h&&Zr.createElement("div",{className:"relative"},Zr.createElement(Nr,{onClick:()=>d({modal:"alignment"})},Zr.createElement("div",{className:"editorSvgButtonIcon textAlignIcon",style:{backgroundImage:`url("${A}")`}})),Zr.createElement(jt,{open:c.modal==="alignment",onClose:u,textEditing:!0},Zr.createElement(roe,{onClick:k,vertical:f,hAlignment:x.h,vAlignment:x.v})))),Zr.createElement(Eh,{active:h},Zr.createElement("div",{className:"relative"},Zr.createElement(Nr,{onClick:()=>d({modal:"size"})},Zr.createElement("div",{className:"editorSvgButtonIcon textSizeIcon"},Zr.createElement(foe,{text:`${b}pt`,fontSize:a.screen.isMobile?yy(3):16,maxNormalTextLength:6}))),Zr.createElement(soe,{card:t,focusingCard:e,open:c.modal==="size",onClose:u,universalTextSize:C,textActionDispatcher:o,screen:a.screen})),Zr.createElement(Nr,{onClick:()=>o.toggleBoldface()},Zr.createElement("div",{className:"editorSvgButtonIcon textBoldIcon","data-bold":v},"B")),Zr.createElement("div",{className:"relative"},Zr.createElement(Nr,{onClick:()=>d({modal:"color"})},Zr.createElement("div",{className:"editorSvgButtonIcon textColorIcon"},Zr.createElement("div",{className:"editorTextColorButtonLabel"},"A"),Zr.createElement("div",{className:"editorTextColorButtonTextColor",style:{backgroundColor:m.toCSSRGBA()},"data-shadow":L}))),Zr.createElement(jt,{open:c.modal==="color",onClose:u,textEditing:!0},Zr.createElement(w2,{onClick:me=>o.changeColor(me)}))),Zr.createElement(Nr,{onClick:E},Zr.createElement("div",{className:"verticalTextButton","data-vertical":f},Zr.createElement("div",{className:"verticalTextButtonTitle","data-multiple-lines":l.verticalWritingBtnLabel.includes(`
`)},l.verticalWritingBtnLabel.split(`
`).map((me,ie)=>Zr.createElement("div",{key:ie},me))),Zr.createElement("div",{className:"verticalTextButtonIcon"}))),Zr.createElement(Nr,{onClick:()=>o.changeListStyle()},Zr.createElement("div",{className:"editorSvgButtonIcon textList","data-list":(W=U0(y))!=null?W:"none"})),Zr.createElement("div",{className:"relative"},Zr.createElement(Nr,{onClick:()=>d({modal:"lineSpacing"})},Zr.createElement("div",{className:"editorSvgButtonIcon textLineSpacing"})),Zr.createElement(jt,{open:c.modal==="lineSpacing",onClose:u,textEditing:!0},Zr.createElement(D2,{current:S!=null?S:1,onClick:me=>o.changeLineHeightMultiple(me)}))),Zr.createElement(Nr,{onClick:()=>o.undo()},Zr.createElement("div",{className:"editorSvgButtonIcon undoIcon","data-enable":r.textCanUndo?"true":"false"})),Zr.createElement(Nr,{onClick:()=>o.redo()},Zr.createElement("div",{className:"editorSvgButtonIcon redoIcon","data-enable":r.textCanRedo?"true":"false"})),Zr.createElement(Nr,{onClick:()=>o.copyTextCard(e.id)},Zr.createElement("div",{className:"editorSvgButtonIcon newCardIcon"}))))};var KC=X(he()),FU=X(he());var qm=({editorStore:t})=>{let e=t.selectedTool===Ge.Finger,r=t.activeFingerTool;return(0,FU.useEffect)(()=>{t.setActiveFingerTool("finger")},[e]),(0,FU.useEffect)(()=>{!t.toolVisible&&t.activeFingerTool==="laser"&&t.setActiveFingerTool("finger")},[t.toolVisible,t.activeFingerTool]),KC.createElement("div",{className:"editorButtonWrapper editorFingerTool editorHeaderItem","data-finger-tool":e},KC.createElement("div",{className:"editorButton fingerButton",role:"button",onClick:()=>{e?t.setActiveFingerTool("finger"):t.setTool(Ge.Finger)},"data-finger-tool-type":r},KC.createElement("div",{className:"editorSvgButtonIcon fingerButtonIcon"})),KC.createElement(Eh,{active:e},KC.createElement("div",{className:"editorSvgButtonIcon fingerToggleButton laserIcon",role:"button",onClick:()=>{t.setActiveFingerTool("laser")},"data-finger-tool-type":r})))};var Eo=X(he()),Jl=X(he());var Yc=X(he()),rp=X(he());var w2e=[{type:"video",container:"webm",codecs:["vp8","opus"]},{type:"video",container:"webm",codecs:["vp9","opus"]},{type:"video",container:"webm",codecs:["vp8","vorbis"]},{type:"video",container:"webm",codecs:["vp9","vorbis"]},{type:"video",container:"mp4"}],T2e=[{type:"audio",container:"webm"},{type:"audio",container:"mp4"}],moe={small:600,medium:960},HT={small:125e4,medium:25e5,large:4e6},GT=128e3,goe="audio/mp4",D2e="video/mp4";function k2e({type:t,container:e,codecs:r}){let o=`${t}/${e}`;return r?`${o};codecs=${r.join(",")}`:o}var P2e=()=>{if(typeof MediaRecorder!="undefined"){if(MediaRecorder.isTypeSupported)return MediaRecorder.isTypeSupported;if(Td())return t=>t===goe||t===D2e}};function k2(t){let e=P2e();return e?(t==="audio"?T2e:w2e).map(k2e).find(e):void 0}var P2=t=>{let e=t.split(";")[0];return e.split("/")[1]==="webm"?new boe(e):new voe(e)},voe=class{constructor(e){this.chunks=[];this.mimeType=e}add(e){this.chunks.push(e)}async close(){return new Promise(e=>{let r=new Blob(this.chunks,{type:this.mimeType});this.chunks=[];let o=this.mimeType===goe?new Audio:document.createElement("video");o.onloadedmetadata=i=>{e({blob:r,duration:i.currentTarget.duration}),o.onloadedmetadata=null,GE(o)},o.src=URL.createObjectURL(r)})}},boe=class{constructor(e){this.editor=new D0(e)}add(e){this.editor.add(e)}async close(){return await this.editor.close()}};var yoe=({card:t,store:e,editorStore:r,playManager:o})=>{let i=Te(),[s,a]=(0,rp.useState)("00:00"),[l,c]=(0,rp.useState)(),d=(0,rp.useRef)(null),u=(0,rp.useRef)(),p=S=>{a(s0(S))},h=async S=>{let{format:C,devices:b}=await MU(),x=e.userPreference.recordingDeviceId,w=NU(x,b),k=await S.init({mimeType:C,deviceId:w,updateTime:p,uploadAsset:f});c(k),requestAnimationFrame(m)},f=(S,C,b)=>{var T,A;let x;EA(t)&&(x=b);let w=0;(t instanceof Yo||t instanceof Ao)&&(w=t.content.in_point);let k=(A=(T=t.gadgets.naration)==null?void 0:T.source_volume)!=null?A:1;eJ(e,{cardId:t.id,file:S,extension:C,recordedDuration:b,cardDuration:x,volume:k,start:w}).finally(()=>{r.setNarration({card:t,volume:k,recording:!1})})},m=()=>{let S=u.current;if(!S||S.state()!=="recording")return;let C=d.current;if(!C)return;let b=C.getContext("2d");if(!b)throw new fo;_2e(b,S.volume()),requestAnimationFrame(m)},g=S=>C=>{C.name==="NotAllowedError"?e.reduce(Pe(oe.deviceInit,{title:i.couldntStartAudioRecording,message:i.micPermissionDeniedErrorMsg,okMessage:i.getHelp,onOk:()=>{e.reduce(Pe(oe.deviceInit,void 0)),window.open(e.screen.isMobile?i.helpPageLinkToPermitCameraAndMicForAndroid:i.helpPageLinkToPermitCameraAndMic)},cancelMessage:i.close,onCancel:()=>e.reduce(Pe(oe.deviceInit,void 0))})):e.reduce(Pe(oe.deviceInit,{title:i.couldntStartAudioRecording,message:C.message,okMessage:i.close,onOk:()=>e.reduce(Pe(oe.deviceInit,void 0))})),o.pause(r),S&&We(Sn(t.id,{"gadgets.naration":S})),r.setNarration({card:t,recording:!1})};if((0,rp.useEffect)(()=>{var S,C;((S=u.current)==null?void 0:S.state())==="recording"&&((C=u.current)==null||C.stop(!1)),r.setNarration({recording:!1})},[t.id]),(0,rp.useEffect)(()=>{if(r.narrationRecording){let S=t.gadgets.naration;!!(S&&S.asset)&&(We(Sn(t.id,{"gadgets.naration":null})),r.setNarration({card:t}));let{startSeconds:b,endSeconds:x}=vs(t);o.beginSeek(r),o.seek(r,b),o.endSeek(r,t),r.setAvSpeedScale(1),r.setAvEndTime(x),a("00:00");let w;t instanceof Ao||t instanceof Yo?w=t.duration:w=t.unlimitedRecordingTime?600:t.duration;let k=new Coe(w);u.current=k,h(k).then(()=>{o.play(r)}).catch(g(S))}return()=>{var S,C;((S=u.current)==null?void 0:S.state())==="recording"&&((C=u.current)==null||C.stop(!1)),u.current=void 0}},[r.narrationRecording]),(0,rp.useEffect)(()=>{var S,C;if(r.narrationRecording&&!r.avPlaying){(S=u.current)==null||S.stop(!0);let b=(C=t.metadata.playback_rate)!=null?C:1;r.setAvSpeedScale(b)}},[r.avPlaying]),!r.narrationRecording)return null;let v=window.devicePixelRatio;return Yc.createElement("div",{className:"editorHeaderInner"},Yc.createElement("div",{className:"editorHeaderButtonGroup recordingMicWrapper"},Yc.createElement("div",{className:"editorButtonWrapper editorNarrationTool"},Yc.createElement("div",{className:"editorRecordingVolumeMeter"},Yc.createElement("canvas",{ref:d,...((S,C)=>({width:S*v,height:C*v,style:{width:S,height:C}}))(120,20)})),Yc.createElement("div",{className:"editorRecordingTime"},s),Yc.createElement("div",{className:"editorRecordingTextButton editorRecordingEndButton",role:"button",onClick:()=>{u.current?u.current.stop():r.setNarration({recording:!1})}},i.end)),l&&Yc.createElement(E2e,{label:l})))},E2e=({label:t})=>Yc.createElement("div",{className:"recordingMicContainer blinkAnimation",title:t},Yc.createElement("div",{className:"recordingMicIcon"}),Yc.createElement("span",{className:"recordingMicLabel"},t)),Coe=class{constructor(e){this.shouldUpload=!0;this.recordedTime=0;this.duration=e}async init({mimeType:e,deviceId:r,updateTime:o,uploadAsset:i}){let s=P2(e),a=await navigator.mediaDevices.getUserMedia({video:!1,audio:{deviceId:r,sampleRate:44100,channelCount:2}});this.recorder=new MediaRecorder(a,{mimeType:e,audioBitsPerSecond:GT});let l=100,c;this.recorder.ondataavailable=p=>{if(!this.recorder)throw new Error("recorder is not initialized");c||(c=p.timeStamp-l);let h=p.data;if(h.size>0&&s.add(h),this.recordedTime=(p.timeStamp-c)/1e3,this.recorder.state==="recording")if(this.recordedTime>=this.duration)this.recorder.stop();else{let f=Math.floor(this.recordedTime);o(f)}},this.recorder.onstop=()=>{a.getTracks().forEach(p=>{p.stop()}),!!this.shouldUpload&&s.close().then(p=>{let{blob:h,duration:f}=p,m=Py.get(e),g=new File([h],`narration${m}`,{type:e});i(g,m,f)})};let d=new AudioContext,u=d.createMediaStreamSource(a);return this.analyser=d.createAnalyser(),this.analyser.fftSize=2048,u.connect(this.analyser),this.buffer=new Uint8Array(this.analyser.frequencyBinCount),this.recorder.start(l),a.getAudioTracks()[0].label}stop(e=!0){var r;((r=this.recorder)==null?void 0:r.state)==="recording"&&(this.shouldUpload=e,this.recorder.stop())}state(){if(!!this.recorder)return this.recorder.state}volume(){if(!this.buffer||this.buffer.length<1||!this.analyser)return 0;this.analyser.getByteFrequencyData(this.buffer);let e=this.buffer.reduce((o,i)=>o+i),r=Math.max(e/(this.analyser.frequencyBinCount*255),0);return Math.log(r*Math.E+1)}};function _2e(t,e){let r=t.canvas.width,o=t.canvas.height;t.save(),t.clearRect(0,0,r,o),t.fillStyle="#496c6c",t.fillRect(0,0,r,o),e<=.4?(t.fillStyle="green",t.fillRect(0,0,e*r,o)):e<=.75?(t.fillStyle="green",t.fillRect(0,0,.4*r,o),t.fillStyle="yellow",t.fillRect(.4*r,0,(e-.4)*r,o)):(t.fillStyle="green",t.fillRect(0,0,.4*r,o),t.fillStyle="yellow",t.fillRect(.4*r,0,.35*r,o),t.fillStyle="red",t.fillRect(.75*r,0,(e-.75)*r,o));let i=r/20;t.lineWidth=1,t.strokeStyle="white",t.beginPath();for(let s=0;s<20;s++)t.rect(i*s,0,i,o);t.stroke(),t.restore()}async function MU(){let t=De.get().strings,e=k2("audio");if(!e||!navigator.mediaDevices)throw new hs(t.browserDoesntSupportAudioRecording);let r=await BU();if(r.length===0)throw new hs(t.noMicFoundErrorMsg);return{format:e,devices:r}}function NU(t,e){let r=e.find(o=>o.deviceId===t);return r?r.deviceId:"default"}async function BU(){return(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind==="audioinput")}var LU=({card:t,editorStore:e,playManager:r})=>{let o=Te(),i=e.selectedTool===Ge.Recording,s=t.gadgets.naration,a=!!(s&&s.asset),l=t instanceof Ao||t instanceof Yo,[c,d]=(0,Jl.useState)(t.duration),[u,p]=(0,Jl.useState)(t.unlimitedRecordingTime),[h,f]=(0,Jl.useState)(s?s.source_volume:1),[m,g]=(0,Jl.useState)(!1),[v,y]=(0,Jl.useState)(!1);(0,Jl.useEffect)(()=>{d(t.duration),p(t.unlimitedRecordingTime),f(s?s.source_volume:1)},[t,t.duration]),(0,Jl.useEffect)(()=>{e.moveMode&&(g(!1),y(!1))},[e.moveMode]);let S=()=>{if(!i){e.setTool(Ge.Recording);return}r.pause(e),!(a&&!confirm(o.confirmAudioRecordingOverwrite))&&e.setNarration({recording:!0})},C=()=>{!i||(r.pause(e),y(!0))},b=()=>{y(!1)},x=(N,V)=>{if(u)return;d(N);let W=Math.max(0,N);V==="up"&&t.duration!==W&&(We(Sn(t.id,{"metadata.duration":W})),e.setNarration({duration:W}))},w=N=>{l||u===N||(p(N),We(Sn(t.id,{"metadata.unlimited_recording_time":N})),e.setNarration({unlimited:N}))},k=()=>{!i||g(!0)},T=()=>{g(!1)},A=(N,V,W)=>{!a||(f(N),e.setNarration({volume:N}),W==="up"&&s.source_volume!==N&&We(Sn(t.id,{"gadgets.naration.source_volume":N})))},E=()=>{if(!a||!confirm(o.confirmDeleteAudioRecording))return;let N={"gadgets.naration":null},V={card:t};!l&&t.unlimitedRecordingTime&&t.duration!==Id&&(d(Id),N={...N,"metadata.duration":Id},V={...V,duration:Id}),We(Sn(t.id,N)),e.setNarration(V)},F=o.automatic;u||(F=(c>=1?Math.floor(c):parseFloat(c.toFixed(1)))+o.secondTimeUnit);let z=qe().locale,L="3em";z==="en-US"?L="4em":z==="ja-Hira"&&(L="7em");let R=u?"4em":"5em";return!u&&z==="ja-Hira"&&(R="6em"),Eo.createElement("div",{className:"editorButtonWrapper editorRecordingTool editorHeaderItem","data-active":i},Eo.createElement(Nr,{className:"editorButton recordingButton",role:"button","data-disabled":i&&t.duration<1&&!t.unlimitedRecordingTime?"true":"false",onClick:S},Eo.createElement("div",{className:"editorButtonIcon recordingButtonIcon","data-has-narration":a&&!i?"true":"false"}),Eo.createElement(v2,{active:i,width:"2em"},Eo.createElement("div",{className:"recordingButtonText"},o.audioRecordBtnLabel))),!l&&Eo.createElement(v2,{active:i,width:R,padding:{left:!0,right:!1}},Eo.createElement("div",{className:"relative"},Eo.createElement("div",{className:"editorRecordingTextButton editorRecordingToolButton",role:"button",onClick:C},Eo.createElement("div",{className:"editorRecordingToolButtonDuration"}),F),Eo.createElement(jt,{open:v,onClose:b},Eo.createElement(Sne,{onChangeDuration:x,onChangeUnlimited:w,duration:c,unlimitedRecording:u})))),a&&Eo.createElement(v2,{active:i,width:L,padding:{left:l,right:!1}},Eo.createElement("div",{className:"relative"},Eo.createElement("div",{className:"editorRecordingTextButton editorRecordingToolButton",role:"button",onClick:k},o.volume),Eo.createElement(jt,{open:m,onClose:T},Eo.createElement(HC,{onChange:A,volume:h})))),a&&Eo.createElement(Eh,{active:i},Eo.createElement("div",{className:"editorSvgButtonIcon editorRecordingToolButton recordingDeleteButtonIcon",role:"button",onClick:E})),Eo.createElement(A2e,{active:i}))},A2e=({active:t})=>{let e=qe(),r=Te(),[o,i]=(0,Jl.useState)([]),[s,a]=(0,Jl.useState)(!1),[l,c]=(0,Jl.useState)(e.userPreference.recordingDeviceId),d=v=>{v instanceof Error&&(v.message===r.micPermissionDeniedErrorMsg||v.name==="NotAllowedError")?e.reduce(Pe(oe.deviceInit,{title:r.couldntGetDeviceInfo,message:r.micPermissionDeniedErrorMsg,okMessage:r.getHelp,onOk:()=>{e.reduce(Pe(oe.deviceInit,void 0)),window.open(e.screen.isMobile?r.helpPageLinkToPermitCameraAndMicForAndroid:r.helpPageLinkToPermitCameraAndMic)},cancelMessage:r.close,onCancel:()=>e.reduce(Pe(oe.deviceInit,void 0))})):e.reduce(Pe(oe.deviceInit,{title:r.couldntGetDeviceInfo,...Ht(v),okMessage:r.close,onOk:()=>{e.reduce(Pe(oe.deviceInit,void 0))}}))},u=async()=>{let v;try{await MU(),v=await navigator.mediaDevices.getUserMedia({video:!1,audio:{sampleRate:44100,channelCount:2}}),await p(),a(!0)}catch(y){d(y)}finally{v==null||v.getTracks().forEach(y=>y.stop())}},p=async()=>{let v=await BU();h(v);let y=[...v];y.find(C=>C.deviceId==="default")||y.unshift({deviceId:"default",label:r.default});let S=NU(e.userPreference.recordingDeviceId,v);c(S),i(y)},h=v=>{if(v.find(y=>!y.label))throw new hs(r.micPermissionDeniedErrorMsg)},f=async()=>{try{await p()}catch(v){d(v)}};(0,Jl.useEffect)(()=>{if(!!s)return navigator.mediaDevices.addEventListener("devicechange",f),()=>{navigator.mediaDevices.removeEventListener("devicechange",f)}},[s]);let m=()=>{a(!1)},g=v=>()=>{c(v.deviceId),e.reduce(OP({...e.userPreference,recordingDeviceId:v.deviceId})),m()};return Eo.createElement(Eh,{active:t},Eo.createElement("div",{className:"relative"},Eo.createElement("div",{className:"editorSvgButtonIcon editorRecordingToolButton recordingMicSelectButtonIcon",role:"button",onClick:u}),Eo.createElement(jt,{open:s,onClose:m},Eo.createElement(vb,null,o.map((v,y)=>Eo.createElement(Tn,{className:"editorRecordingSelectedMarkCell",title:v.label,key:y,role:"button",onClick:g(v)},Eo.createElement("div",{className:"editorRecordingSelectedMark","data-selected":v.deviceId===l}),Eo.createElement("span",{className:"editorRecordingMicLabel"},v.label)))))))};var YC=X(he()),Foe=X(he());var VT=X(he());var I2e=({color:t,selected:e,onClick:r})=>{let o=e?"1px solid #3579F6":"1px solid #FFFFFF00",i="1px solid #FFFFFF00";(t.isTransparent()||t.isWhite())&&(i="1px solid #859FAC");let s="changeBackgroundColorCellInner";return t.isTransparent()&&(s+=" crossLineBackgroundImage"),VT.createElement(Nr,{onClick:r,style:{border:o},className:"changeBackgroundColorCell"},VT.createElement("div",{className:s,style:{backgroundColor:t.toRGBAHex(),border:i}}))},R2e=["#ffccdcFF","#c73532ff","#fff7a8ff","#f6c607ff","#caefd1ff","#02855dff","#b3ddfcff","#0a3b8fff","#FFFFFF00","#19335eFF","#FFFFFFFF","#000000FF"].map(Pt),Soe=({color:t,onClick:e})=>VT.createElement("div",{className:"changeBackgroundColorDialog"},R2e.map((r,o)=>VT.createElement(I2e,{color:r,selected:r.toRGBAHex()===t.toRGBAHex(),onClick:()=>e(r),key:o})));var zs=X(he()),$T=X(he());var sa=X(he()),Ym=X(he());function E2(t,e){let r=Promise.all([ue.lnsClient.getCourseTeacherStatues(e),ue.lnsClient.getCourseUserStatues(e)]);bo(t,{fetchingId:wt.courseUserStatus(e),promise:r,doneReducer:o=>{let i=pu(o);return IP(e,i)}})}function xoe(t,e){bo(t,{fetchingId:wt.courseAttributes(e),promise:ue.lnsClient.getCourse(e),beforeReducers:[Vy("fetching")],doneReducer:r=>[DP(e,r),Vy("done")],errorReducer:r=>Vy(Pl(r))})}function woe(t,{courseId:e,before:r,locked:o}){let i=De.get().strings,s=oe.lockScreen,a=o?i.lockingScreens:i.unlockingScreens;t.reduce(wf(e,o),Fe(s,a)),(o?ue.lnsClient.lockScreen(e):ue.lnsClient.unlockScreen(e)).then(()=>{t.reduce(Fe(s,null),wf(e,o))}).catch(yt.handleError).catch(c=>{ge.error(c),t.reduce(wf(e,r),Fe(s,null),Pe(s,{title:i.couldntChangeScreenLock,...Ht(c),okMessage:i.back,onOk:()=>t.reduce(Pe(s,void 0))}))})}function Toe(t,e,r,o){let i=De.get().strings,s=oe.enableTunnel,a=o?i.unlockingStudentSharing:i.lockingStudentSharing;t.reduce(sw(e,o),Fe(s,a)),ue.lnsClient.enableTunnel(e,o).then(()=>{t.reduce(Fe(s,null))}).catch(yt.handleError).catch(l=>{ge.error(l),t.reduce(sw(e,r),Fe(s,null),Pe(s,{title:i.couldntChangeStudentSharingLock,...Ht(l),okMessage:i.back,onOk:()=>t.reduce(Pe(s,void 0))}))})}var yb=X(on());async function Doe(t){let e=Promise.all([ue.lnsClient.getUserGroups(),ue.lnsClient.getSubjects(),ue.lnsClient.getAllCourses()]);await bo(t,{fetchingId:wt.prepareForAddCourse(),promise:e,doneReducer:([r,o,i])=>()=>({userGroups:{byId:{$set:nn(r.map(s=>[s.id,s]))}},subjects:{byId:{$set:nn(o.map(s=>[s.id,s]))}},courses:{byId:{$set:nn(i.map(s=>[s.course_id,s]))}}}),errorReducer:r=>{let o=De.get().strings,i=oe.prepareForAddCourse;return Pe(i,{title:o.groupFetchErrorOccurred,...Ht(r),okMessage:o.close,onOk:()=>t.reduce(Pe(i,void 0))})}})}async function koe(t,e){let r=De.get().strings,o=oe.createUserGroup,i=(0,yb.sprintf)(r.creatingGroup,e);t.reduce(Fe(o,i)),await ue.lnsClient.createUserGroup(e).then(({id:s,code:a})=>{t.reduce(()=>({userGroups:{byId:{[s]:{$set:{id:s,name:e}}},recentlyCreated:{$set:{id:s,code:a}}}}),Fe(o,null),Ps(o,{title:r.createCourseAfterUserGroupCreation,message:r.createCourseAfterUserGroupCreationDesc,okMessage:r.close,onOk:()=>{t.reduce(Ps(o,void 0))},color:"info"}))}).catch(yt.handleError).catch(s=>{ge.error(s),t.reduce(Fe(o,null),Pe(o,{title:r.couldntCreateGroup,...Ht(s),okMessage:r.back,onOk:()=>t.reduce(Pe(o,void 0))}))})}async function Poe(t,e){let r=De.get().strings,o=oe.deleteUserGroup,i=(0,yb.sprintf)(r.deletingGroup,e.name);t.reduce(Fe(o,i));try{await ue.lnsClient.deleteUserGroup(e.id),t.reduce(()=>({userGroups:{byId:{$unset:[e.id]}}}),Fe(o,null))}catch(s){ge.error(s);let a=Ht(s,{400:l=>{let c=l.asJson(),d={0:r.couldntDeleteAsUsersExist,1:r.groupAlreadyDeleted,2:r.couldntDeleteArchivedGroup,3:r.groupUnavailable,4:r.couldntDeleteAsSubjectsExist,5:r.couldntDeleteClosedGroup};return(c==null?void 0:c.error)&&d[c.error.code]?d[c.error.code]:r.invalidRequest},403:r.groupDeletionDenied,404:r.groupDoesntExist});t.reduce(Fe(o,null),Pe(o,{title:r.couldntDeleteGroup,...a,okMessage:r.back,onOk:()=>t.reduce(Pe(o,void 0))}))}}async function Eoe(t,e,r){let o,i;typeof e=="string"?(i=e,o=ue.lnsClient.createCourse({subject_name:e,user_group_id:r.id})):(i=e.name,o=ue.lnsClient.linkCourse({subject_id:e.id,user_group_id:r.id}));let s=De.get().strings,a=oe.createCourse,l=(0,yb.sprintf)(s.creatingSubjectForGroup,i,r.name);t.reduce(Fe(a,l));try{let c=await o;t.reduce(()=>{let d={course_id:c.course_id,subject_id:c.subject_id,subject_name:i,user_group_id:r.id,user_group_name:r.name},u;return typeof e=="string"?u={id:c.subject_id,name:e}:u=e,{courses:{byId:{[d.course_id]:{$set:d}},joinedCourseIds:{$push:[d.course_id]}},subjects:{byId:{[u.id]:{$set:u}}}}},Fe(a,null))}catch(c){t.reduce(Fe(a,null),Pe(a,{title:s.couldntCreateSubject,...Ht(c),okMessage:s.back,onOk:()=>t.reduce(Pe(a,void 0))}))}}async function _oe(t,e){let r=De.get().strings,o=oe.joinCourse,i=(0,yb.sprintf)(r.joiningSubject,e.name);t.reduce(Fe(o,i));try{let s=await ue.lnsClient.joinSubject(e.id);t.reduce(()=>({courses:{joinedCourseIds:{$push:s.courses.map(a=>a.id)}}}),Fe(o,null))}catch(s){ge.error(s),t.reduce(Fe(o,null),Pe(o,{title:r.couldntJoinSubject,...Ht(s),okMessage:r.back,onOk:()=>t.reduce(Pe(o,void 0))}))}}function _2(t,e){let r=wt.userGroupCode(e.id);bo(t,{fetchingId:r,promise:ue.lnsClient.getUserGroupCode(e.id),doneReducer:o=>()=>({userGroupJoinCode:{$set:{code:o,userGroup:e}}})})}function A2(t,e){let r=wt.userGroupAttendances(e);bo(t,{fetchingId:r,promise:ue.lnsClient.getUserGroupAttendances(e),doneReducer:o=>()=>({userGroups:{attendancesById:{[e]:{$set:o}}}})})}async function Aoe(t){let e=De.get().strings,r=oe.fetchCourse,o=prompt(e.enterGroupCode);if(o!=null){if(o=_J(o),!o.match(/^\d+?$/)){alert(e.invalidGroupCode);return}t.reduce(Fe(r,e.joiningGroup)),await ue.lnsClient.getUserGroupInfoByCode(o).then(async i=>{let s=(0,yb.sprintf)(e.confirmGroupJoin,i.name);confirm(s)?(await ue.lnsClient.joinUserGroup(i.id),t.reduce(Pn({type:"normal",text:(0,yb.sprintf)(e.didJoinGroup,i.name)}),Fe(r,null)),QA(t)):t.reduce(Fe(r,null))}).catch(yt.handleError).catch(i=>{ge.log(i);let{message:s,unknownError:a}=Ht(i,{400:l=>{var d;let c=l.asJson();return((d=c==null?void 0:c.error)==null?void 0:d.includes("already"))?e.alreadyJoinedGroup:e.invalidRequest},403:l=>{let c=l.asJson();return(c==null?void 0:c.error_code)===0?e.accessIsNotAllowed:(c==null?void 0:c.error_code)===5?e.insufficientPermissionToJoin:(c==null?void 0:c.error_code)===8?e.classHasEnded:(c==null?void 0:c.error_code)===9?e.onlyStudentsAllowedToJoin:(c==null?void 0:c.error_code)===10?e.graduatesNotAllowedToJoinClass:e.accessIsNotAllowed},404:e.groupNoLongerExists});t.reduce(Fe(r,null),Pe(r,{title:e.couldntJoinGroup,message:s,unknownError:a,onOk:()=>t.reduce(Pe(r,void 0)),okMessage:e.back}))})}}function qC(t,e){let r=wt.user(e);t.fetchStates[r]!=="fetching"&&bo(t,{fetchingId:r,promise:ue.lnsClient.getUser(e),doneReducer:o=>V9(e,o)})}var Ioe=()=>{let t=qe(),[e,r]=(0,Ym.useState)([]),[o,i]=(0,Ym.useState)(!0),[s,a]=(0,Ym.useState)([]),l=xn(or(t)),c=t.fetchStates[wt.courseUserStatus(l)],d=c instanceof Error,p=c==="fetching"&&o,h=e.length,f=e.filter(y=>y.status==="good").length,m=()=>{i(!0)};(0,Ym.useEffect)(()=>{let y=()=>{E2(t,l),jl(t,l)},S;return o?y():S=window.setInterval(y,10*pr.sec),()=>{S&&clearTimeout(S)}},[o]);let g=t.courseAttributes.byId[l];(0,Ym.useEffect)(()=>{let y=t.userStatuses.byCourseId[l];if(!y)return;let S=y.map(T=>t.userStatuses.byKey[T]).filter(T=>T.id!==t.userInfo.user_id).map(T=>[T.id,T]),C=new Map(S),b=[],x=[];for(let[T]of C){let A=t.users.byId[T];A?x.push(A):b.push(T)}let k=E9(x).map(T=>{let A=C.get(T.id);return $e(A!=null,"status must exist in statusMap"),{...A,displayName:Ut(T)}});r([...k]),i(!1),a(b)},[t.userStatuses,t.users]),(0,Ym.useEffect)(()=>{s.map(y=>{qC(t,y)})},[s.join(",")]);let v=Te();return sa.createElement("div",{className:"userStatusList"},sa.createElement($r,{round:!0},sa.createElement(dr,{inPopover:!0},sa.createElement(fr,null,sa.createElement(mr,null,sa.createElement("div",{className:"userStatusListHeaderTitle"},(e==null?void 0:e.length)>0&&`${f} / ${h}`)),sa.createElement(kr,null,sa.createElement(Mt,{disabled:!g||wt.userGroupAttendances(g==null?void 0:g.user_group_id)==="fetching",onClick:()=>{$e(g!=null),_2(t,{id:g.user_group_id,name:g.user_group_name})}},v.groupCode)),sa.createElement(wr,null,sa.createElement(Mt,{onClick:m},v.update))),p&&sa.createElement(ur,{absolute:"bottom"})),sa.createElement(mn,null,d&&v.statusFetchErrorOccurred,e.length>0&&!d&&e.map(y=>sa.createElement(F2e,{key:y.id,status:y})))))},F2e=({status:t})=>{var i,s;let e=Te(),r="",o="";if(t.status==="logged_out"||t.status==="is_client_background")r=e.notAttending,o="userStatusRed";else if(t.status==="no_course")r=e.choosingCourse,o="userStatusYellow";else if(t.status==="invalid_course")r=e.attendingOtherCourse,o="userStatusRed";else if(t.status==="good"){let a=(s=(i=t.browsing_web_page)==null?void 0:i.trim())!=null?s:"";t.is_web_browsing&&a.length>0?r=e.browsingWeb+a:r=e.attending,o="userStatusWhite"}return sa.createElement("div",{className:"userStatusListCell "+o},sa.createElement("div",{className:"ellipsisText"},t.displayName),sa.createElement("div",{className:"ellipsisText"},r))};var Roe=()=>{let t=qe(),e=or(t),r=Te();if((0,$T.useEffect)(()=>{t.teacherToolOpen&&typeof e!="number"&&t.reduce(hu(!1))},[e,t.teacherToolOpen]),!t.userInfo.is_teacher||typeof e!="number")return null;let o=t.screenLockStates[e],i=t.tunnelStates[e],s=()=>{t.reduce(hu(!t.teacherToolOpen))},a=()=>{Toe(t,e,i,!i)},l=()=>{woe(t,{courseId:e,before:o,locked:!o})},c=()=>{t.reduce(qN(!t.userStatusListOpen))};return zs.createElement(si,{timeout:250,classNames:"teacherTool",in:t.teacherToolOpen,unmountOnExit:!1},zs.createElement("div",{className:"teacherTool","data-visible":t.teacherToolVisible},zs.createElement("div",{className:"teacherToolContainer"},zs.createElement("div",{className:"teacherToolHandleWrapper"},zs.createElement("div",{className:"teacherToolBorder"}),zs.createElement(qr,{className:"teacherToolHandle",onClick:s}),zs.createElement("div",{className:"teacherToolBorder"})),zs.createElement("div",{className:"teacherToolInner"},zs.createElement(OU,{classes:"teacherToolTunnelButton firstTeacherToolButton",title:r.studentSharing,locked:!i,onClick:a}),zs.createElement(OU,{classes:"teacherToolLockScreenButton",locked:o,title:r.screenLock,onClick:l}),zs.createElement("div",{className:"relative"},zs.createElement(OU,{classes:"teacherToolAttendancesButton",title:r.checkAttendance,locked:!1,onClick:c}),zs.createElement(jt,{open:t.userStatusListOpen,container:"none",arrowColor:"#efeef3",onClose:()=>t.reduce(qN(!1)),anchor:"middleLeft"},zs.createElement(Ioe,null)))))))},OU=({title:t,locked:e,onClick:r,classes:o})=>zs.createElement("div",{className:"teacherToolButtonWrapper"},zs.createElement(qr,{"data-locked":e,onClick:r,className:"teacherToolButton "+o}),zs.createElement("div",{className:"teacherToolButtonDesc"},t));function $a(t,e,r=e){let[o,i]=(0,$T.useState)(e);return(0,$T.useEffect)(()=>{let a=o&&t.teacherToolOpen?r:o;i(a)},[t.teacherToolOpen]),[o,a=>{a&&t.teacherToolOpen&&t.reduce(hu(!1)),i(a)}]}var Moe=({store:t,editorStore:e,card:r,playManager:o})=>{let i=bc(),[s,a]=$a(t,!1);(0,Foe.useEffect)(()=>{e.moveMode&&a(!1)},[e.moveMode]);let l=()=>{t.reduce(t0(!1)),a(!0),o.pause(e)},c=()=>{a(!1)},d=f=>{We(Sn(r.id,{"content.backcolor":f.toARGBHex()})),i()},u=Fn(r.content.backcolor),p=u.a===0?"#7FA0AF":"#FFFFFF00",h=e.selectedTool===Ge.Text;return YC.createElement("div",{className:"editorButtonWrapper relative",style:{borderColor:"white"}},YC.createElement(Nr,{onClick:l,className:"editorButton",style:{border:"none"}},YC.createElement("div",{className:"backgroundColorButtonIcon",style:{backgroundColor:u.toRGBAHex(),border:`1px solid ${p}`}})),YC.createElement(jt,{open:s,onClose:c,textEditing:h},YC.createElement(Soe,{color:u,onClick:d})))};var Wa=X(he());var XC=X(he());var Zl=({store:t,courseId:e,sessionId:r,publisher:o,editorRendererState:i,forStudent:s})=>{let a=t.userInfo.is_teacher,l=Te();if(!a)return null;let c=()=>{var m;Fd({store:t,courseId:e,sessionId:(m=t.screenSharingState)==null?void 0:m.sessionId,showDialog:!0,forStudent:s})},d=()=>{let m=t.screenSharingState,g=i==null?void 0:i();$e(m!=null),$e(g!=null),uJ(t,m.courseId,g)},u=()=>{dJ(t,e,r)},p;o===t.userInfo.user_id?t.screenSharingForSelf&&t.screenSharingForPresenter?p=d:p=c:p=u;let h=!s&&o===t.userInfo.user_id,f=s&&o===t.userInfo.user_id?[l.endPresentationLine1,l.endPresentationLine2]:[l.endSharingLine1,l.endSharingLine2];return XC.createElement("div",{className:"screenSharingStopButtonWrapper editorButtonWrapper editorHeaderItem","data-active":h},XC.createElement("div",{className:"screenSharingStopButton editorButton editorTextButton","data-active":h,onClick:p},XC.createElement(Cb,{lines:f})))},Cb=({lines:t})=>XC.createElement("div",{className:"multiLineButtonText"},t.map((e,r)=>XC.createElement("div",{key:r},e)));var zU=X(he()),Noe=X(he());var Boe=({store:t,editorStore:e,editorRendererState:r,card:o,authorId:i,anonymous:s,presenter:a,onPopoverOpened:l,playManager:c})=>{let[d,u]=$a(t,!1);(0,Noe.useEffect)(()=>{e.moveMode&&u(!1)},[e.moveMode]);let p=()=>{t.reduce(lo(),Pr(void 0),Co()),t.submissionAnswer&&c.pause(e),t.screenSharingForPresenter||(l(),u(!0))},h=()=>{u(!1),c.pause(e);let{startSeconds:v,endSeconds:y}=vs(o),S=ht(e.avSeekTime,v,y);c.beginSeek(e),c.seek(e,S),c.endSeek(e,o),e.hideAnnotation&&(e.setHideAnnotation(!1),t.reduce(Co()));let C=or(t);if(typeof C!="number"||!r)return;let b=r();if(!b)return;let x=()=>MO({store:t,state:b,courseId:C,authorId:i,presenter:a,card:o,anonymous:s}),w=()=>{$e((t==null?void 0:t.screenSharingState)!=null);let k={...t.screenSharingState,presenter:a};$e(k.fullscreen!=null);let T=Nc({store:t,publisher:k.publisher,presenter:k.presenter,anonymous:k.anonymous,clientId:k.clientId,fullscreen:{...k.fullscreen,...b}});mh({store:t,command:T})};!t.screenSharingForSelf&&!t.screenSharingForPresenter?x():t.screenSharingForSelf&&!t.screenSharingForPresenter&&w()},f=Te(),m=a?[f.requestPresentationLine1,f.requestPresentationLine2]:[f.startSharingLine1,f.startSharingLine2],g=!!a&&i===t.userInfo.user_id||!e.avReady;return zU.createElement(I2,{disabled:g,confirmMessage:a?f.confirmStartPresentation:f.confirmStartScreenSharing,onClick:p,onClickStart:h,popoverOpen:d,setPopoverOpen:u},zU.createElement(Cb,{lines:m}))};var UU=X(he());var Loe=({store:t,answerTable:e,onPopoverOpened:r})=>{let[o,i]=$a(t,!1),s=t.screenSharingState,a=()=>{s||(r(),i(!0))},l=()=>{i(!1);let{submissionNumber:d}=t,u=or(t);$e(typeof u=="number"),$e(typeof d=="number");let p=ao(u,d),h=t.submissions.byKey[p];$e(h!=null),HA({store:t,anonymous:h.hide_author,answers:e})},c=Te();return UU.createElement(I2,{disabled:!1,onClick:a,onClickStart:l,confirmMessage:c.confirmStartScreenSharing,popoverOpen:o,setPopoverOpen:i},UU.createElement(Cb,{lines:[c.startSharingLine1,c.startSharingLine2]}))};var I2=({disabled:t,popoverOpen:e,confirmMessage:r,onClick:o,onClickStart:i,setPopoverOpen:s,children:a})=>Wa.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Wa.createElement("div",{className:"editorButton editorTextButton","data-disabled":t,onClick:o},a),Wa.createElement(HU,{onStart:i,confirmMessage:r,open:e,onClose:()=>s(!1)})),HU=({onStart:t,open:e,onClose:r,confirmMessage:o})=>{let i=Te();return Wa.createElement(jt,{open:e,onClose:r},Wa.createElement("div",{className:"popoverDialog"},Wa.createElement("div",{className:"popoverDialogInner"},Wa.createElement("div",{className:"popoverDialogConfirmMessage"},o),Wa.createElement("div",{className:"popoverDialogButtonGroup"},Wa.createElement("div",{role:"button",className:"popoverDialogButton popoverDialogCancelButton",onClick:r},i.cancel),Wa.createElement("div",{role:"button",className:"popoverDialogButton popoverDialogOkButton",onClick:t},i.start)))))},WT=({store:t,editorStore:e,card:r,authorId:o,anonymous:i,presenter:s,editorRendererState:a,onPopoverOpened:l,playManager:c})=>{var u;if(!t.userInfo.is_teacher||typeof or(t)!="number")return null;if(!t.screenSharingState||!((u=t.screenSharingState)==null?void 0:u.presenter)&&s)return Wa.createElement(Boe,{store:t,editorStore:e,card:r,authorId:o,anonymous:i,presenter:s,editorRendererState:a,onPopoverOpened:l,playManager:c});{let{courseId:p,publisher:h,sessionId:f}=t.screenSharingState;return Wa.createElement(Zl,{store:t,courseId:p,sessionId:f,publisher:h,forStudent:!!s,editorRendererState:a})}},Ooe=({store:t,answerTable:e,onPopoverOpened:r})=>{if(!t.userInfo.is_teacher)return null;if(t.screenSharingState){let{courseId:i,publisher:s,sessionId:a}=t.screenSharingState;return Wa.createElement(Zl,{store:t,courseId:i,sessionId:a,publisher:s,forStudent:!1})}else return Wa.createElement(Loe,{store:t,answerTable:e,onPopoverOpened:r})};var R2=X(he()),F2=X(he());var Fh=({store:t,sharingState:e})=>{let[r,o]=wn({receiverCount:0,readiedCount:0}),i=(0,F2.useRef)(!1),{courseId:s,sessionId:a}=e,l=t.screenSharingReadyStates,c=t.userStatuses,d=t.fetchStates[wt.receiverStatus(s)],u=()=>{let h=0,f=0;for(let m in l){let g=Number(m);if(g===t.userInfo.user_id)continue;let v=l[m];if(v===void 0)continue;let y=du(s,g),S=c.byKey[y];(S==null?void 0:S.status)==="good"&&(v&&h++,f++)}o({readiedCount:h,receiverCount:f})};if((0,F2.useEffect)(()=>{d==="fetching"?i.current=!0:i.current&&d==="done"||d instanceof Error?(i.current=!1,VA(t,s,a)):d==="done"&&(i.current=!1,u())},[l,c,a]),r.receiverCount<=0)return null;let p=r.readiedCount===r.receiverCount;return R2.createElement("div",{className:"screenSharingReceiverStatus"},R2.createElement("div",{className:"screenSharingReceiverRotate screenSharingReceiverRotateIcon loadingLoop","data-loaded":p}),R2.createElement("div",{className:"screenSharingReceiverCount","data-loaded":p},r.readiedCount+" / "+r.receiverCount))};var zoe="webCardExtensionLeadingDate",M2e=pr.day*14;function Uoe(){let t=ue.localStorage.get(zoe);return t==null?!0:new Date().getTime()-new Date(t).getTime()>=M2e}function M2(){let t=new Date;ue.localStorage.put(zoe,t.toISOString())}function QC(t){if(Vm(t)){let r=decodeURI(t);return window.open(r,"_blank")}let e=De.get().strings;return alert(e.invalidOpenUrl),null}function N2(t){let e=De.get().strings;window.open(e.schoolLoiloTVUrl),t.setAddUrlDialogOpen(!0)}var GU=X(he()),B2=X(he());var Xm=({card:t,onClick:e,onClickWithNoUrl:r,onClickWithShare:o,closedWindowCallback:i})=>{let s=(0,B2.useRef)(null),a=()=>{t.content.uri?(s.current=QC(t.content.uri),o==null||o()):r==null||r(),e==null||e()};return(0,B2.useEffect)(()=>{let l=setInterval(()=>{var c;((c=s.current)==null?void 0:c.closed)&&(i==null||i(),clearInterval(l))},500);return()=>{clearInterval(l)}},[s.current]),GU.createElement("div",{className:"editorButton editorWhiteCircleButton editorHeaderItem mapWebButton",role:"button",onClick:a},GU.createElement("div",{className:"editorButtonIcon webButtonIcon"}))};var L2=({store:t,card:e,focusingCard:r,editorStore:o,drawToolDispatcher:i,textActionDispatcher:s,editorHeaderDispatcher:a,getEditorRenderer:l,opacity:c,playManager:d,onBack:u})=>{let p=Te(),[h,f]=$a(t,!1);(0,Hoe.useEffect)(()=>{o.moveMode&&(f(!1),o.setAddCardDialogOpen(!1))},[o.moveMode]);let m=()=>{o.setTool(Ge.Finger),o.setAddCardDialogOpen(!0),d.pause(o)},g=()=>{o.setAddCardDialogOpen(!1)},v=()=>{let{selectedTool:z}=o;z==Ge.Recording&&o.setTool(Ge.Finger),t.reduce(cr(!1),Pr(void 0)),f(!0),d.pause(o)},y=()=>{f(!1)},S=!!t.screenSharingState,C=()=>{a.onTextButtonClicked()},b=z=>{let L=l==null?void 0:l().getFullScreenSharingState();!L||dC(t,L,z)},x=o.selectedTool,w=jC({store:t,isScreenSharing:S,isFingerMode:x===Ge.Finger,isFocusWebCard:r instanceof ri}),k=w?x!==Ge.Finger:!0,T=w?x!==Ge.Text:!0,A=w?x!==Ge.Recording:!0,E=w?x!==Ge.Draw:!0;S&&!(l==null?void 0:l().screenSharingRootCards(e))&&(E=!1);let F=x===Ge.Text;return dn.createElement(wa,{in:o.toolVisible},dn.createElement("div",{className:"editorHeader fade",style:{opacity:c<1?c:void 0}},!o.narrationRecording&&dn.createElement("div",{className:"editorHeaderMultiInner"},dn.createElement("div",{className:"editorHeaderInner"},dn.createElement("div",{className:"editorHeaderButtonGroup"},dn.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},dn.createElement("div",{className:"editorButton",role:"button",onClick:()=>u(!1)},dn.createElement("div",{className:"editorButtonIcon backButtonIcon"}))),!S&&dn.createElement("div",{className:"editorSquareButtonWrapper editorHeaderSquareItem relative"},dn.createElement("div",{className:"editorSquareButton",role:"button",onClick:m},dn.createElement("div",{className:"editorSvgButtonIcon plusButtonIcon"})),dn.createElement(jt,{open:o.addCardDialogOpen,onClose:g},dn.createElement(Vne,{store:t,onClose:g})))),dn.createElement("div",{className:"editorHeaderSpacer"}),dn.createElement("div",{className:"editorHeaderButtonGroup"},k&&dn.createElement(qm,{editorStore:o}),E&&dn.createElement(Rh,{store:t,editorStore:o,forDocument:!1,drawToolDispatcher:i}),t.screenSharingForSelf&&e instanceof ri&&e.content.uri&&dn.createElement(Xm,{card:e,onClick:()=>d.pause(o),onClickWithShare:()=>b(e.content.uri),closedWindowCallback:()=>b(void 0)}),!S&&dn.createElement(dn.Fragment,null,T&&dn.createElement(RU,{card:e,focusingCard:r,editorStore:o,textActionDispatcher:s,onClick:C}),A&&dn.createElement(LU,{card:e,editorStore:o,playManager:d}),r instanceof ri&&dn.createElement(Xm,{card:r,onClick:()=>d.pause(o),onClickWithNoUrl:()=>{N2(o)}}),dn.createElement(Moe,{store:t,editorStore:o,card:r,playManager:d}))),dn.createElement("div",{className:"editorHeaderSpacer"}),dn.createElement("div",{className:"editorHeaderButtonGroup"},!S&&dn.createElement("div",{className:"editorButtonWrapper relative editorHeaderItem"},dn.createElement(Nr,{className:"editorButton",role:"button",onClick:v},dn.createElement("div",{className:"editorButtonIcon othersButtonIcon"})),dn.createElement(jt,{open:h,onClose:y,textEditing:F},dn.createElement(toe,{store:t,editorStore:o,card:e,focusingCard:r,onClose:y}))),t.screenSharingState&&dn.createElement(Fh,{store:t,sharingState:t.screenSharingState}),dn.createElement(WT,{store:t,editorStore:o,card:e,authorId:t.userInfo.user_id,anonymous:!1,editorRendererState:()=>l==null?void 0:l().getFullScreenSharingState(),onPopoverOpened:y,playManager:d}))),w&&dn.createElement("div",{className:"editorHeaderInner"},dn.createElement("div",{className:"editorHeaderButtonGroup"},x===Ge.Finger&&dn.createElement(qm,{editorStore:o}),x===Ge.Draw&&dn.createElement(Rh,{store:t,editorStore:o,forDocument:!1,drawToolDispatcher:i}),x===Ge.Text&&dn.createElement(RU,{card:e,focusingCard:r,editorStore:o,textActionDispatcher:s,onClick:C}),x===Ge.Recording&&dn.createElement(LU,{card:e,editorStore:o,playManager:d})))),dn.createElement(yoe,{card:e,store:t,editorStore:o,playManager:d})))};var ho=X(he());function N2e(t,e){return t.color.equals(e.color)&&t.fontSize===e.fontSize&&t.bold===e.bold&&t.lineSpacing===e.lineSpacing&&t.lineHeightMultiple===e.lineHeightMultiple&&t.list===e.list}function B2e(){return{color:qn(),bold:!1,fontSize:40,lineSpacing:0,lineHeightMultiple:1,list:void 0}}function L2e(){return{vertical:!1,hAlignment:"left",vAlignment:"top",foreColor:qn().toARGBHex(),fontSize:$k}}function O2e(t){return{vertical:t.vertical,hAlignment:t.h_alignment,vAlignment:t.v_alignment,foreColor:t.forecolor,fontSize:t.font_size}}var VU=class{constructor(){this._text=Zs("");this.gadgetTypingAttribute=L2e();this.selectionBegin=hn(0);this.selectionEnd=hn(0);this._cursorTypingAttributes=B2e();this.isComposing=!1}get text(){return this._text}updateText(e){this._text=Ro.fromTitleGadget(e);let r=O2e(e);this.gadgetTypingAttribute=r;let o;e.text.length<1?o={fontSize:r.fontSize,color:Fn(r.foreColor),bold:!1,lineSpacing:0,lineHeightMultiple:1}:o=this.pickupCursorTypingAttributes(),this.updateCursorTypingAttributes(o)}handleCompositionStart(e){this.lastCompositionText=void 0,this.isComposing=!0,this.compositionOffset=e;let{begin:r}=this.selectedRange;this.updateCompositionText({text:"",range:{location:r,length:0}})}handleCompositionEnd(e){if(this.isComposing=!1,this.updateSelectedRange({begin:this.selectionEnd}),!(this._compositingText&&O2(this._compositingText)&&this.convertKatakanaMiddleDotToBulletedList(this.selectionBegin.location))){if(e.data.endsWith(`
`)){let r=this.makeTypingText(e.data.substr(0,e.data.length-1)),{begin:o,end:i}=this.selectedRange;this._text.remove({location:o,length:i-o}),this._text.insert({string:r,location:this.selectionEnd.location}),this.selectionBegin=hn(o+r.length),this.selectionEnd=hn(o+r.length),this.consumeEnter()}this.updateCompositionText(void 0),this.notifyTextChanged({selection:{begin:this.selectionEnd}})}}updateCompositionText(e){var r,o;this._compositingText=e==null?void 0:e.text,this._compositionRange=e==null?void 0:e.range,(r=this.onCompositionTextChanged)==null||r.call(this,this._compositingText),(o=this.onSelectionChanged)==null||o.call(this,{needsDismissPopover:!0})}get compositingText(){return this._compositingText}get compositionRange(){return this._compositionRange}consumeInput(e){var u;let r;if(e.data)r=e.data;else if(e.isComposing)r="";else if(e.inputType!=="insertText"&&e.target instanceof HTMLTextAreaElement)r=e.target.value;else return!1;let o=this.makeTypingText(r),i=e.inputType,{begin:s,end:a}=this.selectedRange,{selectionStart:l,selectionEnd:c}=e.target,d={location:((u=this.compositionOffset)!=null?u:0)+l,length:c-l};switch(i){case"insertText":{if(s!==a&&this._text.remove({location:s,length:a-s}),/^\s$/.test(r)&&this.consumeInputSpace())return!0;this._text.insert({string:o,location:s});let p=hn(s+o.length,"backward");return O2(r)&&this.convertKatakanaMiddleDotToBulletedList(p.location)||(this.notifyTextChanged({selection:{begin:p},committed:!this.isComposing}),this.isComposing?this.updateCompositionText({text:r,range:d}):this._compositingText=void 0),!0}case"insertCompositionText":{let p=s;return e.isComposing===!1?(e.data===""&&this.lastCompositionText!==void 0&&(this._text.remove({location:a-this.lastCompositionText.length,length:this.lastCompositionText.length}),this.notifyTextChanged({selection:{begin:hn(a-this.lastCompositionText.length)}})),!0):(this.compositingText?(p=a-this.compositingText.length,this._text.remove({location:p,length:this.compositingText.length})):this._text.remove({location:s,length:a-s}),this._text.insert({string:o,location:p}),this.lastCompositionText=r,this.notifyTextChanged({selection:{begin:hn(p,"forward"),end:hn(p+o.length,"backward")},committed:!this.isComposing}),this.updateCompositionText({text:r,range:d}),!0)}case"insertFromComposition":{let p=s;this.compositingText&&(p=a-this.compositingText.length,this._text.remove({location:p,length:this.compositingText.length})),this._text.insert({string:o,location:p});let h=hn(p+o.length,"backward");return O2(r)&&this.convertKatakanaMiddleDotToBulletedList(h.location)||(this.notifyTextChanged({selection:{begin:h}}),this.updateCompositionText(void 0)),!0}case"deleteCompositionText":return this.compositingText&&this._text.remove({location:s,length:a-s}),this.notifyTextChanged({selection:{begin:hn(s,"backward")}}),this.updateCompositionText(void 0),!0;case"insertReplacementText":{let p=s;return this.compositingText&&(p=a-this.compositingText.length,this._text.remove({location:p,length:this.compositingText.length})),this._text.insert({string:o,location:p}),this.notifyTextChanged({selection:{begin:hn(p+o.length,"backward")},committed:!1}),this.updateCompositionText({text:r,range:d}),!0}case"deleteContentBackward":{let p=this._text.advance({location:a,byComposedCharacterOffset:-1});if(p===void 0&&(p=Math.max(a-1,0)),this._text.remove({location:p,length:a-p}),this.compositingText){let h=this.compositingText.substring(0,this.compositingText.length-(a-p)),f=h.length===0;f?this.updateCompositionText(void 0):this.updateCompositionText({text:h,range:d}),this.notifyTextChanged({selection:{begin:hn(p,"backward")},committed:f})}else this.notifyTextChanged({selection:{begin:hn(p,"backward")}});return!0}default:return!1}}consumeInputSpace(){let{begin:e,end:r}=this.selectedRange,o=ya({string:this._text,location:r});if(o===void 0){let i=oh({text:this._text.text,location:r});if(i===void 0)return!1;if(i.location===e-1&&["*","-"].includes(this._text.text.substr(e-1,1))){this._text.remove({location:e-1,length:1});let s=am("bulleted"),a=this.makeTypingText(s);return this._text.insert({string:a,location:e-1}),this.notifyTextChanged({selection:{begin:hn(e-1+s.length)}}),!0}else if(i.location===e-2&&this._text.text.substr(e-2,2)==="1."){this._text.remove({location:e-2,length:2});let s=am("numbered"),a=this.makeTypingText(s);this._text.insert({string:a,location:e-2}),this.selectionBegin=hn(e-2+s.length),this.selectionEnd=hn(e-2+s.length);let l=this.makeFormatter();return this.applyFormatted(l),!0}else{if(i.location!==e)return!1;let s=oh({text:this._text.text,location:i.location-1});if(s===void 0)return!1;let a=ya({string:this._text,location:s.location});if(a===void 0)return!1;let l=this.makeFormatter();return l.toggle({style:a.style,typingAttributes:this.cursorTypingAttributesArray}),l.indent({delta:a.indentRange.length,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(l),!0}}else if(co(o.markerRange)<=e&&r<=oi(o.markerRange)){let i=this.makeFormatter();return i.indent({delta:1,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(i),!0}else return!1}consumeKeyDown(e){let{begin:r,end:o}=this.selectedRange,i=Ol({begin:r,end:o});if(e.key==="Backspace"&&this.compositingText===void 0)if(r===o){if(r===0)return!1;let s=ya({string:this._text,location:r});if(s!==void 0&&co(s.markerRange)<r&&r<=oi(s.markerRange)){let a=this.makeFormatter();return s.indentRange.length===0?a.deleteListMarker(s):a.indent({delta:-1,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(a),!0}else{let a=this._text.advance({location:r,byComposedCharacterOffset:-1});return a===void 0&&(a=r-1),this._text.remove({location:a,length:r-a}),this.notifyTextChanged({selection:{begin:hn(a)}}),!0}}else return this.removeSelectedText(),!0;else if(e.key==="Delete")if(r===o){let s=ya({string:this._text,location:r});if(s!==void 0&&Q_(s.markerRange,r)){let a=this.makeFormatter();return a.deleteListMarker(s),this.applyFormatted(a),!0}else{let a=this._text.advance({location:r,byComposedCharacterOffset:1});return a===void 0||a<=r?!1:(this._text.remove({location:r,length:a-r}),this.notifyTextChanged(),!0)}}else return this.removeSelectedText(),!0;else if(e.key==="Tab"){if(e.preventDefault(),ya({string:this._text,location:this.selectionEnd.location})===void 0&&!e.shiftKey){let a=this.makeTypingText("	");this._text.remove(i),this._text.insert({string:a,location:i.location}),this.notifyTextChanged({selection:{begin:hn(i.location+"	".length,"backward")}})}else{let a=new h1({string:this._text,selectedRange:i});if(!a.indent({delta:e.shiftKey?-1:1,typingAttributes:this.cursorTypingAttributesArray}))return!1;this.applyFormatted(a)}return!0}return!1}consumeKeyPress(e){return e.key==="Enter"?(this.consumeEnter(),!0):!1}consumeEnter(){if(ya({string:this._text,location:this.selectionBegin.location})===void 0){let r=this.makeTypingText(`
`);this._text.insert({string:r,location:this.selectionBegin.location});let o=hn(this.selectionBegin.location+r.length);this.notifyTextChanged({selection:{begin:o}})}else{let{begin:r,end:o}=this.selectedRange,i=Ol({begin:r,end:o}),s=this.makeFormatter();s.replaceWithNewLine({range:i,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(s)}}makeFormatter(){let{begin:e,end:r}=this.selectedRange;return new h1({string:this._text,selectedRange:Ol({begin:e,end:r})})}applyFormatted(e){let r=e.retrieveSelectedRange();this._text=e.retrieveString(),this.notifyTextChanged({selection:{begin:hn(r.location),end:hn(r.location+r.length,"backward")}})}convertKatakanaMiddleDotToBulletedList(e){let r=oh({text:this._text.text,location:e});if(!r||r.location!==e-1)return!1;let o=this._text.substr({location:e-1,length:1});if(!O2(o.text))return!1;this._text.remove({location:e-1,length:1});let i=am("bulleted"),s=this.makeTypingText(i);return this._text.insert({string:s,location:e-1}),this.updateCompositionText(void 0),this.notifyTextChanged({selection:{begin:hn(e-1+i.length)}}),!0}updateSelectedRange({begin:e,end:r=void 0,needsDismissPopover:o=!0}){var s;if(r||(r=hn(e.location,e.affinity)),X3(e,this.selectionBegin)&&X3(r,this.selectionEnd))return;this.selectionBegin=e,this.selectionEnd=r,(s=this.onSelectionChanged)==null||s.call(this,{needsDismissPopover:o});let i=this.pickupCursorTypingAttributes();this.updateCursorTypingAttributes(i)}pickupCursorTypingAttributes(){let e={},{begin:r,end:o}=this.selectedRange,i;if(r===o){let u=Math.max(this.selectionBegin.location-1,0);this._text.text.substr(u,1)===`
`?i=u+1:i=u}else i=r;let s=this._text.attributeAt({location:i,type:"font"});s&&(e.fontSize=s.value.size,e.bold=s.value.bold);let a=this._text.attributeAt({location:i,type:"foreground_color"});a&&(e.color=Fn(a.value));let l=this._text.attributeAt({location:i,type:"paragraph_style"}),c;if(l){let u=oh({text:this._text.text,location:i}),p=Vt.boldFont.getOrFetch(),h=Vt.regularFont.getOrFetch();if(u&&p&&h){let f=this._text.substr(u),m=z3({line:f,boldFont:p,regularFont:h});m&&(c=ah(l.value.line_spacing+m,m)),e.lineSpacing=l.value.line_spacing}}e.lineHeightMultiple=c;let d=L3({string:this._text,range:{location:r,length:o-r}});return e.list=d==null?void 0:d.style,e}get selectedRange(){let e=Math.min(this.selectionBegin.location,this.selectionEnd.location),r=Math.max(this.selectionBegin.location,this.selectionEnd.location);return{begin:e,end:r}}get editRange(){let{begin:e,end:r}=this.selectedRange;if(e===r)return{begin:0,end:this._text.length};{let o=this._text.text;return r<o.length&&o.substr(r,1)===`
`&&(r+=1),{begin:e,end:r}}}get cursorTypingAttributes(){return this._cursorTypingAttributes}get cursorTypingAttributesArray(){let{bold:e,fontSize:r,lineSpacing:o,color:i}=this._cursorTypingAttributes;return[{type:"font",value:{bold:e,size:r}},{type:"paragraph_style",value:{line_spacing:o}},{type:"foreground_color",value:i.toARGBHex()}]}updateCursorTypingAttributes(e){var o;let r=Object.assign({},this._cursorTypingAttributes,e);N2e(this._cursorTypingAttributes,r)||(this._cursorTypingAttributes=r,(o=this.onCursorTypingAttributesChanged)==null||o.call(this,this._cursorTypingAttributes))}makeTypingText(e){let r=this.cursorTypingAttributesArray,o={location:0,length:e.length},i=r.map((s,a)=>({index:a,range:o}));return new Ro({text:e,attributes:r,attribute_ranges:i})}removeSelectedText(){let{begin:e,end:r}=this.selectedRange;e!==r&&(this._text.remove({location:e,length:r-e}),this.notifyTextChanged({selection:{begin:hn(e)}}))}insert(e){let{begin:r,end:o}=this.selectedRange;r!==o&&this._text.remove({location:r,length:o-r}),this._text.insert({string:e,location:r}),this.notifyTextChanged({selection:{begin:hn(r+e.length)}})}toggleBoldface(){let{begin:e,end:r}=this.editRange,o={location:e,length:r-e},i=!1;for(let a=e;a<r;a++){let l=this._text.attributeAt({location:a,type:"font"});if(!!l&&l.value.bold){i=!0;break}}let s=this._text.substr(o);s.attributes=s.attributes.map(a=>a.type==="font"?{type:"font",value:{bold:!i,size:a.value.size}}:a),this._text.remove(o),this._text.insert({string:s,location:o.location}),this._text=new Ro(this._text.pack()),this.notifyTextChanged(),this.updateCursorTypingAttributes({bold:!i})}changeTextSize(e,r){let{begin:o,end:i}=this.editRange,s={location:o,length:i-o},a=this._text.substr(s);a.attributes=a.attributes.map(l=>l.type==="font"?{type:"font",value:{bold:l.value.bold,size:e}}:l),this._text.remove(s),this._text.insert({string:a,location:s.location}),this._text=new Ro(this._text.pack()),o===0&&i===this._text.length&&(this.gadgetTypingAttribute.fontSize=e),this.notifyTextChanged({committed:r,needsDismissPopover:r}),this.updateCursorTypingAttributes({fontSize:e})}changeLineSpacing(e,r){let{begin:o,end:i}=this.editRange,s=o;for(;;){let a=oh({text:this._text.text,location:s});if(!a)break;let l=this._text.substr(a),c=z3({line:l,regularFont:r.regular,boldFont:r.bold}),d=0;if(c&&(d=Math.max(0,c*(e-1))),this._text.addAttribute({attribute:{type:"paragraph_style",value:{line_spacing:d}},range:a}),s=a.location+l.length+1,i<s)break}this._text=new Ro(this._text.pack()),this.notifyTextChanged({needsDismissPopover:!1}),this.updateCursorTypingAttributes({lineHeightMultiple:e})}changeColor(e){let{begin:r,end:o}=this.editRange;this._text.addAttribute({attribute:{type:"foreground_color",value:e.toARGBHex()},range:{location:r,length:o-r}}),r===0&&o===this._text.length&&(this.gadgetTypingAttribute.foreColor=e.toARGBHex()),this.notifyTextChanged(),this.updateCursorTypingAttributes({color:e})}changeListStyle(){let{begin:e,end:r}=this.selectedRange,o=L3({string:this._text,range:{location:e,length:r-e}}),i=U0(o==null?void 0:o.style),s=new h1({string:this._text,selectedRange:{location:e,length:r-e}});s.setTextList({style:i,typingAttributes:this.cursorTypingAttributesArray}),this._text=s.retrieveString();let a=s.retrieveSelectedRange();this.notifyTextChanged({selection:{begin:hn(a.location),end:hn(a.location+a.length,"backward")},needsDismissPopover:!1})}notifyTextChanged({selection:e=void 0,committed:r=!0,needsDismissPopover:o=!0}={}){var i;(i=this.onTextChanged)==null||i.call(this,{committed:r&&!this.isComposing,needsDismissPopover:o}),e&&this.updateSelectedRange({begin:e.begin,end:e.end,needsDismissPopover:o})}};function O2(t){return t==="\u30FB"||t===u1}function $U(t,e,r){let o={cardId:r.cardId};return r.hAlignment&&(o.hAlignment=t.h_alignment),r.vAlignment&&(o.vAlignment=t.v_alignment),r.vertical!==void 0&&(o.vertical=t.vertical),r.string&&(o.string=new Ro({text:t.text,attributes:t.attributes,attribute_ranges:t.attribute_ranges})),r.foreColor&&(o.foreColor=t.forecolor),r.fontSize&&(o.fontSize=t.font_size),{replacement:o,selection:e}}function jT(t){let e={};if(t.hAlignment&&(e["gadgets.title.h_alignment"]=t.hAlignment),t.vAlignment&&(e["gadgets.title.v_alignment"]=t.vAlignment),t.vertical!==void 0&&(e["gadgets.title.vertical"]=t.vertical),t.string){let{text:r,attributes:o,attribute_ranges:i}=t.string.pack();e["gadgets.title.text"]=r,e["gadgets.title.attributes"]=o,e["gadgets.title.attribute_ranges"]=i}return t.foreColor&&(e["gadgets.title.forecolor"]=t.foreColor),t.fontSize&&(e["gadgets.title.font_size"]=t.fontSize),Sn(t.cardId,e)}var WU=class{constructor(){this._undo=[];this._redo=[]}push(e,r,o){let i=$U(e,r,o);return this._undo.push(i),this._redo=[],jT(o)}get canUndo(){return this._undo.length>0}get canRedo(){return this._redo.length>0}undo({currentTitle:e,currentSelection:r}){if(!this.canUndo)return;let o=this._undo.pop(),i=$U(e,r,o.replacement);return this._redo.push(i),{command:jT(o.replacement),selection:o.selection}}redo({currentTitle:e,currentSelection:r}){if(!this.canRedo)return;let o=this._redo.pop(),i=$U(e,r,o.replacement);return this._undo.push(i),{command:jT(o.replacement),selection:o.selection}}};var Ri=X(he()),Voe=X(he());var jU=X(he());var Goe=({duration:t,editorStore:e})=>{let{avSeekTime:r}=e,o=ht(r/t*100,0,100);return jU.createElement("div",{className:"editorFooterTextToolAvProgressBar"},jU.createElement("div",{className:"editorFooterTextToolAvProgressBarIndicator",style:{width:`${o}%`}}))};var $oe=({rootCard:t,focusingCard:e,store:r,editorStore:o,playManager:i})=>{var C,b;let s=e.gadgets.title,{avSpeedScale:a,slideshowPlaying:l,typingAttributes:c,zoom:d}=o;if(!s||!c)return null;let[u,p]=(0,Voe.useState)(!1),h=()=>{i.togglePlayPause(o,t)},f=()=>{i.beginRewind(o,t),i.endRewind(o)},m=(x,w)=>{w==="down"&&i.beginSpeedScaling(o),o.setAvSpeedScale(x),w==="up"&&i.endSpeedScaling(o),We(Sn(t.id,{"metadata.playback_rate":x}))},g=bm(t),v=0;for(let x of d1((b=(C=e.gadgets.title)==null?void 0:C.text)!=null?b:""))v++;let y=(d-Math.SQRT1_2)/(1-Math.SQRT1_2),S=ht(1-y,0,1);return Ri.createElement(wa,{in:o.toolVisible},Ri.createElement("div",{className:"editorFooterTextTool fade",style:{top:r.screen.height}},Ri.createElement("div",{className:"editorFooterTextToolTrashBoxWrapper"},Ri.createElement("div",{className:"editorTrashBox"},Ri.createElement(zC,{disappearProgress:S,store:r,type:"editorTrashBox"}))),g&&Ri.createElement(Goe,{duration:t.duration,editorStore:o}),Ri.createElement("div",{className:"editorFooterTextToolAvButtonsContainer"},(t.hasConnectedCardOrGroup||g)&&Ri.createElement(Ri.Fragment,null,Ri.createElement(Nr,{onClick:h,className:"editorButton editorWhiteCircleButton editorFooterItem","data-disabled":!o.avReady},l?Ri.createElement("div",{className:"editorButtonIcon pauseButtonIcon"}):Ri.createElement("div",{className:"editorButtonIcon playButtonIcon"})),Ri.createElement(Nr,{className:"editorButton editorWhiteCircleButton editorFooterItem",onClick:f,"data-disabled":!o.avReady},Ri.createElement("div",{className:"editorButtonIcon rewindButtonIcon"}))),g&&Ri.createElement("div",{className:"editorButton editorWhiteCircleButton editorFooterItem"},Ri.createElement("div",{className:"relative"},Ri.createElement(Nr,{className:"editorButtonIcon editorAvSpeedScaleButtonIcon",onClick:()=>p(!0),"data-disabled":!o.avReady},sU(a)),Ri.createElement(jt,{open:u,onClose:()=>p(!1),anchor:"topCenter"},Ri.createElement(_T,{onChange:m,speedScale:o.avSpeedScale}))))),v>0&&Ri.createElement("div",{className:"editorFooterTextToolTextLengthLabel"},v)))};var Qm=X(he()),Woe=X(he());var joe=class{constructor(e,r){this.config=e;this.bounds=r;this.page=0}},z2e=new k1,U2e=Dr.create(),H2e=16,G2e=15,Koe=38,V2e=38;function qoe(t,e){let{menuItems:r}=t;if(r.length<1)return{menuItems:[],numPages:0};let o=U2e.getContext2dForce(),i=r.map(f=>{let m=2*G2e;return f.title&&f.title.length>0&&(m+=z2e.measure({ctx:o,fontName:e.regularWtFontName,fontSize:H2e,text:f.title}).width),f.icon&&(m+=V2e),{width:m,height:Koe}}),s=[],a=0;for(let f=0;f<r.length;f++){let m=r[f],g=i[f];s.push(new joe(m,{x:a,y:0,...g})),a+=g.width}let l=window.innerWidth-2*gb;if(s.reduce((f,m)=>f+m.bounds.width,0)<=l)return{menuItems:s,numPages:1};let d=0,u=0,p=Koe,h=[];for(let f=0;f<s.length;f++){let m=s[f];d+m.bounds.width+p>l&&(u++,d=p),m.bounds={x:d,y:0,width:m.bounds.width,height:m.bounds.height},m.page=u,h.push(m),d+=m.bounds.width}return{menuItems:h,numPages:u+1}}var Yoe=t=>{let e=Te(),[r,o]=wn({...qoe(t,e),currentPage:0});(0,Woe.useEffect)(()=>{let s=qoe(t,e),a=ht(r.currentPage,0,s.numPages-1);o({currentPage:a,...s})},[t.menuItems]);let i=s=>{let a=ht(r.currentPage+s,0,r.numPages-1);o({currentPage:a})};return Qm.createElement("div",{className:"editorTextPopoverMenu","data-multipage":r.numPages>1},r.numPages>1&&r.currentPage-1>=0&&Qm.createElement(Nr,{role:"button",className:"editorTextPopoverMenuItem editorTextPopoverPagerContainer",onClick:()=>i(-1)},Qm.createElement("div",{className:"editorTextPopoverPagerLeft"})),r.menuItems.filter(s=>s.page===r.currentPage).map((s,a)=>Qm.createElement(Nr,{key:a,role:"button",className:"editorTextPopoverMenuItem",onClick:s.config.onClick},s.config.icon,Qm.createElement("span",null,s.config.title))),r.numPages>1&&r.currentPage+1<r.numPages&&Qm.createElement(Nr,{role:"button",className:"editorTextPopoverMenuItem editorTextPopoverPagerContainer",onClick:()=>i(1)},Qm.createElement("div",{className:"editorTextPopoverPagerRight"})))};var Xoe=OL(),KU=class{constructor(e){this.changed=e;this.onResize=Qoe(this.changed,!0);this.onRotate=Qoe(this.changed,!1);let r=window.visualViewport;r&&r.addEventListener("resize",this.onResize),window.addEventListener("resize",this.onResize),window.addEventListener("orientationchange",this.onRotate)}close(){let e=window.visualViewport;e&&e.removeEventListener("resize",this.onResize),window.removeEventListener("resize",this.onResize),window.removeEventListener("orientationchange",this.onRotate)}};function z2(t){let e=t.innerHeight,r=t.visualViewport;r&&(e=Math.floor(r.height));let o=t.innerHeight-e;return Xoe.product==="iPad"&&Xoe.name==="Chrome Mobile"&&o>0&&(o+=44),o}function Qoe(t,e){let r=So();return()=>{let o=z2(window),i=Ze(window.innerWidth,Math.max(window.innerHeight-o,0));e?r(()=>t(i,o),100):t(i,o)}}var JC=class{get copied(){return this.copiedText!==void 0}copy(e,r){let o=$p({card:e,clipLocalFontSize:1});this.copiedText=JC.scaleAttributedString(r,o)}paste(e){if(!this.copiedText)return;let r=_A({card:e,universalFontSize:1});return JC.scaleAttributedString(this.copiedText,r)}static scaleAttributedString(e,r){let o=e.clone();return o.attributes.forEach(i=>{if(i.type==="font"){let s=i;s.value.size=s.value.size*r}else if(i.type==="paragraph_style"){let s=i;s.value.line_spacing=s.value.line_spacing*r}}),o}};var Joe=class{constructor(e,r){this.frame=e;this.scale=r}get size(){return Xt(this.frame.size,this.scale)}textRects(e){return this.frame.textRects(e).map(r=>Tp(r,this.scale))}closestPosition(e){let r=au(e,1/this.scale);return this.frame.closestPosition(r)}position({from:e,direction:r,offset:o}){return this.frame.position({from:e,direction:r,offset:o})}hitTest(e){let r=au(e,1/this.scale);return this.frame.hitTest(r)}get vertical(){return this.frame.vertical}cursorAt(e){let r=this.frame.cursorAt(e);if(r!==void 0)return Tp(r,this.scale)}shouldRefresh(e){let{vertical:r,hAlignment:o,vAlignment:i}=e.gadgetTypingAttribute;return this.frame.vertical!==r||this.frame.hAlignment!==o||this.frame.vAlignment!==i||!this.frame.text.equals(e.text)}},ZC=class extends ho.Component{constructor(e){super(e);this.textInput=ho.createRef();this.caret=ho.createRef();this.caretInner=ho.createRef();this.textCopy=new JC;this.histories=new Map;this.focusOwner="editor";this.softwareKeyboardUsed=void 0;this.changeColor=e=>{this.processor.changeColor(e)};this.toggleBoldface=()=>{this.processor.toggleBoldface()};this.changeListStyle=()=>{this.processor.changeListStyle()};this.presentPopover=()=>{if(this.state.currentModal==="popover_menu")return;let{begin:e,end:r}=this.processor.selectedRange,o=e!==r;this.setState({currentModal:"popover_menu",enableCopyMenu:o})};this.dismissPopover=()=>{this.state.currentModal!==void 0&&this.setState({currentModal:void 0})};this.copyMenuClicked=()=>{this.emitCopyEvent(),this.dismissPopover()};this.cutMenuClicked=()=>{this.cutSelectedText(),this.dismissPopover()};this.pasteMenuClicked=()=>{let e=De.get().strings;if(eie())this.promiseReadClipboard().then(r=>{this.pasteText(r)}).catch(()=>{let r=oe.clipboard;this.props.store.reduce(Pe(r,{title:e.accessNotPermitted,message:e.giveClipboardAccess,okMessage:e.okay,onOk:()=>{this.props.store.reduce(Pe(r,void 0))}}))});else if(this.textCopy.copied){let r=this.textCopy.paste(this.props.card);r&&this.processor.insert(r)}this.dismissPopover()};this.selectMenuClicked=()=>{let{begin:e,end:r}=this.processor.selectedRange;if(e===r){let o=jO(this.processor.text.text,e);this.processor.updateSelectedRange({begin:{location:o.begin,affinity:"forward"},end:{location:o.end,affinity:"backward"},needsDismissPopover:!1}),this.setState({enableCopyMenu:o.begin!==o.end})}};this.selectAllMenuClicked=()=>{let e=this.processor.text.length,r={location:0,affinity:"backward"},o={location:e,affinity:"forward"};this.processor.updateSelectedRange({begin:r,end:o,needsDismissPopover:!1}),this.setState({enableCopyMenu:r.location!==o.location})};this.handlePasteEvent=e=>{if(e.clipboardData){let r=e.clipboardData.getData("text/plain");this.pasteText(r)}else{let r=this.textCopy.paste(this.props.card);r&&this.processor.insert(r)}};this.lineHeightMenuClicked=()=>{this.setState({currentModal:"line_height"})};this.colorMenuClicked=()=>{this.setState({currentModal:"color"})};this.sizeMenuClicked=()=>{this.setState({currentModal:"size"})};this.duplicateCardMenuClicked=()=>{let e=this.props.card.isFolded?"group":"single";Nt(new Ep(this.props.card.id,e,!1)),this.dismissPopover()};this.deleteCardClicked=()=>{let e=this.props.card,r=Wl(e,e.isFolded);!confirm(r)||(this.dismissPopover(),e.isFolded?We(yu(e.id)):We(Ma(e.id)))};this.dismissLineHeightDialog=()=>{this.dismissPopover()};this.changeLineHeightMultiple=e=>{let r=Vt.regularFont.getOrFetch(),o=Vt.boldFont.getOrFetch();!r||!o||this.processor.changeLineSpacing(e,{regular:r,bold:o})};this.pinCardClicked=()=>{let e=this.props.card.id,r=!this.props.card.pinned;We(qs(e,r)),this.forceUpdate(),this.dismissPopover()};this.handleCopyEvent=e=>{let o=this.props.card.gadgets.title;if(!o)return;let i=Ro.fromTitleGadget(o),{begin:s,end:a}=this.processor.selectedRange,l=i.substr({location:s,length:a-s});this.textCopy.copy(this.props.card,l),e.clipboardData.setData("text/plain",l.text)};this.handleKeyPress=e=>{this.processor.consumeKeyPress(e)&&e.preventDefault()};this.handleInput=e=>{this.processor.consumeInput(e)};this.handleKeyDown=e=>{let o=this.props.card.gadgets.title;if(!o||!this.textInput.current||this.composingCardId!==void 0)return;if(this.processor.consumeKeyDown(e)){e.preventDefault();return}let s=E0(),a=s&&e.metaKey||!s&&e.ctrlKey;if(s&&e.key.toLowerCase()==="a"&&e.ctrlKey||e.key==="Home"){let l=this.textFrame;if(l===void 0)return;let c=this.currentCaretRect;if(c===void 0)return;let d;l.vertical?d=Re(c.x+c.width/2,0):d=Re(0,c.y+c.height/2);let u=l.closestPosition(d);if(u===void 0)return;let p=e.shiftKey?this.processor.selectionBegin:u;this.processor.updateSelectedRange({begin:p,end:u})}else if(s&&e.key.toLowerCase()==="e"&&e.ctrlKey||e.key==="End"){let l=this.textFrame;if(l===void 0)return;let c=this.currentCaretRect;if(c===void 0)return;let d;l.vertical?d=Re(c.x+c.width/2,l.size.height):d=Re(l.size.width,c.y+c.height/2);let u=l.closestPosition(d);if(u===void 0)return;let p=e.shiftKey?this.processor.selectionBegin:u;this.processor.updateSelectedRange({begin:p,end:u})}else if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(e.key)>=0){let l=this.textFrame;if(l===void 0)return;let c;e.key==="ArrowLeft"?c="left":e.key==="ArrowRight"?c="right":e.key==="ArrowUp"?c="up":c="down";let d=l.position({from:this.processor.selectionEnd.location,direction:c,offset:1});if(d===void 0)return;e.shiftKey?this.processor.updateSelectedRange({begin:this.processor.selectionBegin,end:d}):this.processor.updateSelectedRange({begin:d})}else if(e.key==="a"&&a)e.preventDefault(),this.processor.updateSelectedRange({begin:hn(0,"backward"),end:hn(o.text.length,"forward")}),this.presentPopover();else if(e.key==="x"&&a){if(e.preventDefault(),this.processor.selectionBegin.location===this.processor.selectionEnd.location)return;this.cutSelectedText()}else e.key==="c"&&a?this.emitCopyEvent():e.key==="Escape"?this.dismissPopover():e.key.toLowerCase()==="z"&&a&&e.shiftKey?(e.preventDefault(),this.redo()):e.key==="z"&&a&&(e.preventDefault(),this.undo())};this.handleCompositionEnd=e=>{this.props.card.id===this.composingCardId&&this.processor.handleCompositionEnd(e),this.composingCardId=void 0};this.handleCompositionStart=e=>{this.composingCardId=this.props.card.id;let{begin:r}=this.processor.selectedRange,o=r-this.textInput.current.selectionStart;this.processor.handleCompositionStart(o)};this.fontSizeInputWillFocus=()=>{this.focusOwner="fontSizeDialog"};this.fontSizeInputDidBlurred=()=>{var e;this.focusOwner="editor",(e=this.textInput.current)==null||e.focus()};this.fontSizeDidChanged=(e,r)=>{let o=_A({card:this.props.card,universalFontSize:e});this.changeTextSize(o,r)};this.handleFocus=()=>{if(this.softwareKeyboardUsed===void 0){if(z2(window)>0){this.softwareKeyboardUsed=!0;return}setTimeout(()=>{let e=z2(window);this.softwareKeyboardUsed=e>0||this.softwareKeyboardUsed===!0,this.updateTextInputBounds()},900)}};this.handleBlur=()=>{this.active&&this.focusOwner==="editor"&&this.props.callback.onTextBlur()};this.handleContextMenu=e=>{e.preventDefault(),this.focus()};this.onSelectionChanged=({needsDismissPopover:e})=>{this.updateTextInputBounds();let{selectedRange:r,compositionRange:o}=this.processor,{begin:i,end:s}=r,a=this.currentCaretRect;if(!a)return;let l=tie(a,Re(this.bounds.x,this.bounds.y));if(i===s)this.props.callback.onTextSelectionChange({caretRect:l});else{let c={location:i,length:s-i};this.props.callback.onTextSelectionChange({caretRect:l,selectionRange:c,compositionRange:o})}e&&this.dismissPopover()};this.onCursorTypingAttributesChanged=e=>{let r=this.caret.current;r&&(r.style.backgroundColor=e.color.toRGBAHex()),this.props.callback.onTypingAttributeChange(e)};this.onTextChanged=({committed:e,needsDismissPopover:r})=>{let{text:o,gadgetTypingAttribute:i}=this.processor,{vertical:s,hAlignment:a,vAlignment:l,foreColor:c,fontSize:d}=i;this.textFrame=this.makeTextFrame(o,s,a,l),this.updateTextInputBounds();let u=this.props.card,p={cardId:u.id,string:o,foreColor:c,fontSize:d};if(e){let h=this.history(u.id),f=h.push(this.committed,{begin:this.processor.selectionBegin,end:this.processor.selectionEnd},p);We(f),this.props.callback.onTextUndoHistoryChange({canUndo:h.canUndo,canRedo:h.canRedo}),this.committed=KT(u.gadgets.title)}else{let h=jT(p);We(h)}r&&this.dismissPopover()};this.onCompositionTextChanged=e=>{e===void 0&&(this.textInput.current.value="")};this.processor=new VU,this.processor.onSelectionChanged=this.onSelectionChanged,this.processor.onCursorTypingAttributesChanged=this.onCursorTypingAttributesChanged,this.processor.onTextChanged=this.onTextChanged,this.processor.onCompositionTextChanged=this.onCompositionTextChanged,this.state={currentModal:void 0,enableCopyMenu:!1},this.committed=KT(e.card.gadgets.title)}initialize(){this.histories.clear(),this.reset()}reset(){this.dismissPopover(),this.processor.updateSelectedRange({begin:hn(0)}),this.composingCardId&&this.terminateActiveComposition(this.composingCardId),this.updateTextInputBounds()}componentDidMount(){let e=this.textInput.current;e&&(e.addEventListener("keypress",this.handleKeyPress),e.addEventListener("input",this.handleInput),e.addEventListener("keydown",this.handleKeyDown),e.addEventListener("compositionend",this.handleCompositionEnd),e.addEventListener("compositionstart",this.handleCompositionStart),e.addEventListener("focus",this.handleFocus),e.addEventListener("blur",this.handleBlur),e.addEventListener("copy",this.handleCopyEvent),e.addEventListener("paste",this.handlePasteEvent)),window.addEventListener("contextmenu",this.handleContextMenu);let r=this.props.card.gadgets.title;if(r){let s=hn(r.text.length);this.processor.updateSelectedRange({begin:s})}let{canUndo:o,canRedo:i}=this.history(this.props.card.id);this.props.callback.onTextUndoHistoryChange({canUndo:o,canRedo:i}),this.props.callback.onTypingAttributeChange(this.processor.cursorTypingAttributes)}componentWillUnmount(){let e=this.textInput.current;e&&(e.removeEventListener("keypress",this.handleKeyPress),e.removeEventListener("input",this.handleInput),e.removeEventListener("keydown",this.handleKeyDown),e.removeEventListener("compositionstart",this.handleCompositionStart),e.removeEventListener("compositionend",this.handleCompositionEnd),e.removeEventListener("focus",this.handleFocus),e.removeEventListener("blur",this.handleBlur),e.removeEventListener("copy",this.handleCopyEvent),e.removeEventListener("paste",this.handlePasteEvent)),window.removeEventListener("contextmenu",this.handleContextMenu)}componentDidUpdate(e,r,o){let i=this.textInput.current,{card:s,callback:a,store:l}=this.props;if(e.card.id!==s.id){let{canUndo:c,canRedo:d}=this.history(s.id);a.onTextUndoHistoryChange({canUndo:c,canRedo:d}),this.composingCardId&&this.terminateActiveComposition(e.card.id),this.committed=KT(s.gadgets.title)}l.screen.keyboardHeight>0&&(this.softwareKeyboardUsed=!0),Td()&&this.active&&this.focusOwner==="editor"&&(i==null||i.focus()),this.updateTextFrameIfNeeded(),this.state.currentModal===void 0&&(this.popoverAnchorBounds=void 0)}terminateActiveComposition(e){let r=this.textInput.current;$e(r);let o={cardId:e,string:this.processor.text},i=this.history(e),s={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},a=i.push(this.committed,s,o);We(a),r.removeEventListener("blur",this.handleBlur),r.blur(),r.value="",r.focus(),r.addEventListener("blur",this.handleBlur),this.composingCardId=void 0}get bounds(){return this.props.delegate.renderRect()}get active(){let{card:e,editorStore:r,store:o}=this.props;return e.gadgets.title?r.selectedTool===Ge.Text&&!Ks(o):!1}updateTextFrameIfNeeded(){let r=this.props.card.gadgets.title;if(!!r){if(this.processor.updateText(r),this.textFrame&&!this.textFrame.shouldRefresh(this.processor)&&Math.abs(Zoe(this.textFrame.size)-Zoe(this.bounds))<1e-8){let{frameScale:o}=this.textInputGeometry();this.textFrame.scale=o}else{let{vertical:o,hAlignment:i,vAlignment:s}=this.processor.gadgetTypingAttribute;this.textFrame=this.makeTextFrame(this.processor.text,o,i,s)}this.updateTextInputBounds()}}render(){var u;let e=this.props.store.editor;if(!e||e.length<1)return null;let r=e[e.length-1].cardId;if(!this.props.card.rootParent().getCard(r))return null;let i=this.state.currentModal==="popover_menu",s=new DOMRect;if(this.caret.current){let p=this.caret.current.getBoundingClientRect();s.x=p.x+p.width*.5,s.y=p.y,s.width=0,s.height=p.height}let a=W2e(s);i&&this.popoverAnchorBounds===void 0&&(this.popoverAnchorBounds=s);let{fontSize:l}=this.props.editorStore.typingAttributes,c=$p({card:this.props.card,clipLocalFontSize:l}),d=this.popoverMenuItems;return ho.createElement("div",{className:"textInputContainer",style:{display:this.active?"block":"none"}},ho.createElement("div",{ref:this.caret,className:"textCaret"},ho.createElement("div",{ref:this.caretInner,className:"textCaretInner"})),ho.createElement(Vr,{open:this.state.currentModal==="popover_menu",onClose:this.dismissPopover,textEditing:!0},ho.createElement(wh,{anchor:"topCenter",getParentBounds:()=>{var p;return(p=this.popoverAnchorBounds)!=null?p:s},arrowColor:"#323232"},ho.createElement(Yoe,{menuItems:d,screen:this.props.store.screen,onDismiss:this.dismissPopover}))),ho.createElement(LT,{open:this.state.currentModal==="line_height",onClose:this.dismissLineHeightDialog,popoverAnchor:a,getParentBounds:()=>{var p;return(p=this.popoverAnchorBounds)!=null?p:s},shadow:!0},ho.createElement(D2,{current:(u=this.processor.cursorTypingAttributes.lineHeightMultiple)!=null?u:1,onClick:this.changeLineHeightMultiple})),ho.createElement(LT,{open:this.state.currentModal==="color",onClose:this.dismissPopover,popoverAnchor:a,getParentBounds:()=>{var p;return(p=this.popoverAnchorBounds)!=null?p:s},shadow:!0},ho.createElement(w2,{onClick:this.changeColor})),ho.createElement(ioe,{card:this.props.rootCard,focusingCard:this.props.card,open:this.state.currentModal==="size",onClose:this.dismissPopover,popoverAnchor:a,getParentBounds:()=>{var p;return(p=this.popoverAnchorBounds)!=null?p:s},universalTextSize:c,textActionDispatcher:this,screen:this.props.store.screen}),ho.createElement("textarea",{ref:this.textInput,className:"textInput",spellCheck:!1,autoCapitalize:"none"}),this.props.editorStore.selectedTool===Ge.Text&&ho.createElement($oe,{rootCard:this.props.rootCard,focusingCard:this.props.card,store:this.props.store,editorStore:this.props.editorStore,playManager:this.props.playManager}))}focus(){var e;this.focusOwner="editor",(e=this.textInput.current)==null||e.focus(),this.props.callback.onTextSelectionChange({caretRect:this.currentCaretRect})}blur(){var e;this.dismissPopover(),this.processor.updateSelectedRange({begin:this.processor.selectionEnd}),(e=this.textInput.current)==null||e.blur()}undo(){let e=this.props.card;if(!e.gadgets.title)return;this.composingCardId&&this.terminateActiveComposition(e.id);let r=this.history(e.id),o={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},i=r.undo({currentTitle:e.gadgets.title,currentSelection:o});if(!i)return;We(i.command);let s=e.gadgets.title.text.length,{begin:a,end:l}=i.selection;this.processor.updateSelectedRange({begin:hn(ht(a.location,0,s),a.affinity),end:hn(ht(l.location,0,s),l.affinity)}),this.props.callback.onTextUndoHistoryChange({canUndo:r.canUndo,canRedo:r.canRedo}),this.committed=KT(e.gadgets.title)}redo(){let e=this.props.card;if(!e.gadgets.title)return;this.composingCardId&&this.terminateActiveComposition(e.id);let r=this.history(e.id),o={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},i=r.redo({currentTitle:e.gadgets.title,currentSelection:o});if(!i)return;We(i.command);let s=e.gadgets.title.text.length,{begin:a,end:l}=i.selection;this.processor.updateSelectedRange({begin:hn(ht(a.location,0,s),a.affinity),end:hn(ht(l.location,0,s),l.affinity)}),this.props.callback.onTextUndoHistoryChange({canUndo:r.canUndo,canRedo:r.canRedo}),this.committed=KT(e.gadgets.title)}toggleVertical(){let e=this.props.card,r=e.gadgets.title;if(!r)return;let o=this.history(e.id),i={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},s={cardId:e.id,vertical:!r.vertical},a=o.push(r,i,s);We(a),this.props.callback.onTextUndoHistoryChange({canUndo:o.canUndo,canRedo:o.canRedo})}changeAlignment(e,r){let o=this.props.card,i={cardId:o.id,hAlignment:e,vAlignment:r},s=this.history(o.id),a=s.push(o.gadgets.title,{begin:this.processor.selectionBegin,end:this.processor.selectionEnd},i);We(a),this.props.callback.onTextUndoHistoryChange({canUndo:s.canUndo,canRedo:s.canRedo})}changeTextSize(e,r){this.processor.changeTextSize(e,r)}copyTextCard(e){this.props.callback.copyTextCard(e)}selectWordAt(e){let{textFrame:r}=this;if(!r)return;let o=this.canvasToEditorLocal(e),i=r.closestPosition(o),{begin:s,end:a}=jO(this.processor.text.text,i.location);this.processor.updateSelectedRange({begin:{location:s,affinity:"forward"},end:{location:a,affinity:"backward"}}),this.presentPopover()}history(e){let r=this.histories.get(e);if(r)return r;let o=new WU;return this.histories.set(e,o),o}get popoverMenuItems(){var m;let{pinned:e,isFolded:r}=this.props.card,o=this.props.store.editor;if(!o)return[];let i=o[o.length-1].cardId,s=i===this.props.card.id,a=this.context,{color:l,fontSize:c,list:d}=this.props.editorStore.typingAttributes,u=this.props.card.rootParent().getCard(i);if(!u)return[];let p=$p({card:this.props.card,clipLocalFontSize:c}),h=`${jm(p)}pt`,f=[];if(this.state.enableCopyMenu?(f.push({title:a.cut,onClick:this.cutMenuClicked}),f.push({title:a.copy,onClick:this.copyMenuClicked})):(f.push({title:a.select,onClick:this.selectMenuClicked}),f.push({title:a.selectAll,onClick:this.selectAllMenuClicked})),f.push({title:a.paste,onClick:this.pasteMenuClicked}),f.push({title:h,onClick:this.sizeMenuClicked},{icon:ho.createElement("div",{className:"editorTextPopoverMenuItemIcon editorTextPopoverBold"},"B"),onClick:this.toggleBoldface},{onClick:this.colorMenuClicked,icon:ho.createElement(ho.Fragment,null,ho.createElement("div",{className:"editorTextPopoverTextColorLabelContainer"},ho.createElement("div",{className:"editorTextPopoverTextColorLabel"},"A")),ho.createElement("div",{className:"editorTextPopoverMenuItemIcon editorTextPopoverTextColor",style:{backgroundColor:l.toCSSRGBA()}}))}),f.push({onClick:this.changeListStyle,icon:ho.createElement("div",{className:"editorTextPopoverMenuItemIcon editorTextPopoverList","data-list":(m=U0(d))!=null?m:"none"})},{onClick:this.lineHeightMenuClicked,icon:ho.createElement("div",{className:"editorTextpopOverMenuItemIcon editorTextPopoverLineSpacing"})}),!r&&!s&&f.push({title:e?a.release:"",onClick:this.pinCardClicked,icon:ho.createElement("div",{className:"editorTextPopoverMenuItemIcon editorTextPopoverPinIcon"})}),u.id!==this.props.card.id){let g=Array.from(this.props.card.isFolded?this.props.card.memberAndChildrenIterator():this.props.card.familyIterator()).map(y=>y.id);Cm(this.props.store,g)===void 0&&f.push({title:a.duplicate,onClick:this.duplicateCardMenuClicked}),f.push({title:a.delete,onClick:this.deleteCardClicked})}return f}promiseReadClipboard(){return eie()?navigator.clipboard.readText():Promise.reject()}pasteText(e){let r=e.replace(/\r/g,""),o=this.textCopy.paste(this.props.card);if(o&&o.text===r)this.processor.insert(o);else{let i=this.processor.makeTypingText(r);this.processor.insert(i)}}textInputGeometry(){let e=this.bounds,r=xr(e,Rr(z0)),o=this.props.card,i=M3(o.contentSize,o.content.margins,r),s=e.height/r.height;return{fontScale:i,frameScale:s}}updateTextInputBounds(){let r=this.props.card.gadgets.title;if(!r)return;let o=this.textInput.current;if(!o)return;let i=this.caret.current;if(!i)return;let s=this.caretInner.current;if(!s)return;let a=Vt.regularFont.getOrFetch(),l=Vt.boldFont.getOrFetch();if(!a||!l)return;let{fontScale:c,frameScale:d}=this.textInputGeometry(),u=c*d,p=this.bounds,h=this.currentCaretRect;if(!h)return;let f=Re(p.x,p.y),m=this.softwareKeyboardUsed===!1?f.y+h.y:0;r.vertical?(o.style.left=`${f.x+h.x+h.width}px`,o.style.top=`${m}px`,o.style.width=`${h.width}px`,o.style.height=`${p.height}px`):(o.style.left=`${f.x+h.x}px`,o.style.top=`${m}px`,o.style.width=`${p.width}px`,o.style.height=`${h.height}px`);let{x:g,y:v,width:y,height:S}=tie(h,f);i.style.left=`${g}px`,i.style.top=`${v}px`,i.style.width=`${y}px`,i.style.height=`${S}px`;let C=this.processor.cursorTypingAttributes,b=C.bold?l.family:a.family;o.style.font=`${C.fontSize*u}px '${b}'`,o.style.color="transparent",s.style.backgroundColor=C.color.toRGBAHex()}setCaretVisible(e){let r=this.caret.current;!r||(r.style.visibility=e?"visible":"hidden")}emitCopyEvent(){let e=this.textInput.current;if(!e)return;let o=this.props.card.gadgets.title;if(!o)return;let{begin:i,end:s}=this.processor.selectedRange,l=Ro.fromTitleGadget(o).substr({location:i,length:s-i});e.value=l.text,e.select(),this.textCopy.copy(this.props.card,l),document.execCommand("copy")}cutSelectedText(){this.emitCopyEvent(),this.processor.removeSelectedText()}makeTextFrame(e,r,o,i){let{fontScale:s,frameScale:a}=this.textInputGeometry(),l=this.bounds,c=Xt(l,1/a),d=sh({text:e,size:c,vertical:r,fontSizeScale:s,hAlignment:o,vAlignment:i});if(d!==void 0)return new Joe(d,a)}handleSingle(e,r){var s,a;let o=this.textInput.current,i=this.textFrame;if(!o||!i||this.props.editorStore.selectedTool!==Ge.Text)return!1;if(vm(r))return e==="up"&&this.presentPopover(),!0;if(e==="down")return this.moveCaretTo(r),this.hitTestTextBody({pointInCanvas:r})?eC(r.original)?this.pointerEventCapture=this.createPanCaptureToMoveCaret(!1):this.pointerEventCapture=this.createPanCaptureToSelectText({textFrame:i,start:this.processor.selectionBegin,byLongPress:!1}):this.pointerEventCapture=this.createPanCaptureToMoveCaret(!0),!0;if(e==="move"){let l=((s=this.pointerEventCapture)==null?void 0:s.consume(e,r))||!1;return l||(this.pointerEventCapture=void 0),l}else{let l=((a=this.pointerEventCapture)==null?void 0:a.consume(e,r))||!1;return this.pointerEventCapture=void 0,this.clearCaretBounceAnimation(),l}}handleLongPress(e){let r=this.textInput.current,o=this.textFrame;if(!r||!o||this.props.editorStore.selectedTool!==Ge.Text)return;let i=this.canvasToEditorLocal(e),s=o.closestPosition(i);this.pointerEventCapture=this.createPanCaptureToSelectText({textFrame:o,start:s,byLongPress:!0}),this.clearCaretBounceAnimation();let a=this.caretInner.current;if(a){a.offsetWidth;let l=this.processor.gadgetTypingAttribute.vertical?"textCaretBounceX":"textCaretBounceY";a.classList.add(l)}}clearCaretBounceAnimation(){let e=this.caretInner.current;!e||e.classList.remove("textCaretBounceX","textCaretBounceY")}moveCaretTo(e){let r=this.textFrame;if(!r)return!1;let o=this.canvasToEditorLocal(e),i=r.closestPosition(o);if(!i)return!1;this.processor.updateSelectedRange({begin:i})}canvasToEditorLocal(e){let r=au(e,1/window.devicePixelRatio);return ti(r,this.bounds)}createPanCaptureToMoveCaret(e){let r=o=>{var s;return e?o.timestamp-(((s=o.down)==null?void 0:s.timestamp)||o.timestamp)>50?!0:!uo(o):!1};return new qU({changed:o=>r(o)?!1:(this.moveCaretTo(o),!0),ended:o=>(this.moveCaretTo(o),!0)})}createPanCaptureToSelectText({textFrame:e,start:r,byLongPress:o}){return new qU({began:i=>(this.processor.updateSelectedRange({begin:r}),!0),changed:i=>{let s=this.canvasToEditorLocal(i),a=e.closestPosition(s),{selectionBegin:l}=this.processor;return this.processor.updateSelectedRange({begin:l,end:a}),!0},ended:i=>{let s=this.canvasToEditorLocal(i),a=e.closestPosition(s),{selectionBegin:l,selectionEnd:c}=this.processor;return this.processor.updateSelectedRange({begin:l,end:a}),!o&&l.location===c.location?!1:(this.presentPopover(),!0)}})}hitTestTextBody(e){let{pointInCanvas:r}=e,o=this.canvasToEditorLocal(r);if(!this.textInput.current)return;let s=this.textFrame;if(s!==void 0&&s.hitTest(o))return{cursor:s.vertical?"vertical-text":"text"}}cursorRect(e){let o=this.props.card.gadgets.title;if(o==null)return;let i=Vt.regularFont.getOrFetch();if(i==null)return;if(o.text.length===0){let{fontScale:a,frameScale:l}=this.textInputGeometry(),c=this.bounds;return $2e({title:o,fontSizeScale:a*l,regularFont:i,textFrameSize:Ze(c.width,c.height),edgeInsets:tA})}let s=this.textFrame;if(s!==void 0)return s.cursorAt(e)}get currentCaretRect(){return this.cursorRect(this.processor.selectionEnd)}};ZC.contextType=su;var qU=class{constructor({began:e,changed:r,ended:o}){this.began=e,this.changed=r,this.ended=o}consume(e,r){if(e==="down"){if(this.began)return this.began(r)}else if(e==="move"){if(this.changed)return this.changed(r)}else if(this.ended)return this.ended(r);return!1}};function Zoe(t){return t.width/t.height}function $2e(t){let{title:e,fontSizeScale:r,regularFont:o,textFrameSize:i,edgeInsets:s}=t,a=o.font.unitsPerEm||1e3,l=1/a*e.font_size*r,c=(o.font.ascender-o.font.descender)*l,d=P_(s,r),u=0,p=0;if(e.vertical){let h=c+d.right+d.left,f=ht(i.width/h,0,1),m=c*f;return e.h_alignment==="left"?u=d.left*f:e.h_alignment==="right"?u=i.width-d.right*f-m:u=i.width/2-m/2,e.v_alignment==="top"?p=d.top*f:e.v_alignment==="bottom"?p=i.height-d.bottom*f:p=i.height/2,nt(u,p,m,0)}else{let h=c+d.top+d.bottom,f=ht(i.height/h,0,1),m=c*f;return e.h_alignment==="left"?u=d.left*f:e.h_alignment==="right"?u=i.width-d.right*f:u=i.width/2,e.v_alignment==="top"?p=d.top*f:e.v_alignment==="bottom"?p=i.height-d.bottom*f-m:p=i.height/2-m/2,nt(u,p,0,m)}}function eie(){var t;return typeof((t=navigator.clipboard)==null?void 0:t.readText)=="function"}function W2e(t){if(!t)return"topCenter";let e=t.y+t.height/2,r=window.innerHeight/2;return e<r?"bottomCenter":"topCenter"}function KT(t){return Object.assign({},t)}function tie(t,e){let r=2,{x:o,y:i,width:s,height:a}=t;return{x:e.x+o-r/2,y:e.y+i-r/2,width:s+r,height:a+r}}var ZU=X(he()),jd=X(he());var j2e=3,YU=class{constructor(){this.histories=[]}filter(e){if(this.histories.length>=j2e&&this.histories.shift(),this.histories.push(e),this.histories.length<=1)return e;let r=0,o=0;for(let i=0;i<this.histories.length;i++)r+=this.histories[i].x/this.histories.length,o+=this.histories[i].y/this.histories.length;return{x:r,y:o}}get lastPoint(){return this.histories[this.histories.length-1]}};function rie(t,e,r,o){if(e<=0)return o;let i=Math.max(0,Math.min(1,t/e))-1;return-(o-r)*(i*i*i*i-1)+r}function XU(t,e,r,o){if(e<=0)return o;let i=Math.max(0,Math.min(1,t/e));return(o-r)*i*i+r}var eS=class{constructor(e,r,o,i,s){this.id=e;this.type=r;this.center=o;this.timestamp=i;this.color=s;r==="stroke"?(this.durationMs=3200,this.pivotRadius=5,this.rangeRadius=5):(this.durationMs=2e3,this.pivotRadius=5,this.rangeRadius=50)}},nie=class{constructor(e,r){this.startTime=e;this.points=[];this.firstPointTimestamp=r.timestamp,this.points.push(new U2(e,r)),this.color=r.color.toARGBHex()}get isEmpty(){return this.points.length===0}append(e){let r=e.timestamp-this.firstPointTimestamp,o=this.startTime+r;this.points.push(new U2(o,e))}update(e){let r=!1;for(let o=this.points.length-1;o>=0;o--){let i=this.points[o].isEnd(e),s=this.points[o].isStarted(e);i?(this.points.splice(o,1),r=!0):!r&&s&&(r=!0)}return r}draw(e,r,o){let i={id:"",color:this.color,type:"laser",width:0,points:this.convertStrokePoints(r,o)};S_({ctx:e,content:i,resolutionScale:o})}convertStrokePoints(e,r){let o=[];for(let i=0;i<this.points.length;i++){let s={x:this.points[i].x*r,y:this.points[i].y*r,width:this.getCurWidth(this.points[i],e)*r};o.push(s)}return o}getCurWidth(e,r){let o=e.durationMs,i=e.getElapsedTime(r),s=window.devicePixelRatio;return XU(i,o,e.pivotRadius*2*s,0)}},oie=class{constructor(e,r){this.point=new U2(e,r)}get isEmpty(){return this.point==null}update(e){var o,i;let r=!1;return((o=this.point)==null?void 0:o.isEnd(e))?(r=!0,this.point=void 0):((i=this.point)==null?void 0:i.isStarted(e))&&(r=!0),r}draw(e,r,o){var m;if(!((m=this.point)==null?void 0:m.isStarted(r)))return;let i=this.point.durationMs,s=this.point.getElapsedTime(r),a=XU(s,i,1,0),l=window.devicePixelRatio,c=this.point.pivotRadius*o,d=this.point.rangeRadius*o,u=rie(s,i,c,d),p=this.point.pivotRadius*o*.8;e.save(),e.beginPath();let h=this.point.x*o,f=this.point.y*o;e.arc(h,f,u*l,0,2*Math.PI,!1),e.strokeStyle=this.point.color.toCSSRGBA(),e.globalAlpha=a,e.lineWidth=p*2*l,e.stroke(),e.restore()}},U2=class{constructor(e,r){this.startTime=e;this.point=r}get x(){return this.point.center.x}get y(){return this.point.center.y}get pivotRadius(){return this.point.pivotRadius}get rangeRadius(){return this.point.rangeRadius}get color(){return this.point.color}get durationMs(){return this.point.durationMs}get endTime(){return this.startTime+this.point.durationMs}isStarted(e){return e>=this.startTime}isEnd(e){return e>this.endTime}getElapsedTime(e){return e-this.startTime}},iie=class{constructor(e,r,o){this.curTime=e;this.strokes=r;this.ovals=o}},QU=class{getStrokes(){var e;return(e=this.data)==null?void 0:e.strokes}constructor(){this.inputs=[],this.lastPoint=void 0}push(e){this.lastPoint&&sie(this.lastPoint,e)||(this.inputs.push(e),this.lastPoint=e)}pushPoints(e){if(!(this.lastPoint&&sie(this.lastPoint,e[0]))){for(let r=0;r<e.length;r++)this.inputs.push(e[r]);this.lastPoint=e[0]}}invalidate(){this.inputs=[],this.data=void 0}update(e){var s,a,l,c;let r=(a=(s=this.data)==null?void 0:s.strokes)!=null?a:new Map,o=(c=(l=this.data)==null?void 0:l.ovals)!=null?c:new Map,i=!1;for(let d of r.keys()){let u=r.get(d);i=u.update(e),i&&u.isEmpty&&r.delete(d)}for(let d of o.keys()){let u=o.get(d);i=u.update(e),i&&u.isEmpty&&o.delete(d)}for(;this.inputs.length!==0;){let d=this.inputs.shift();d.type==="stroke"?r.has(d.id)?r.get(d.id).append(d):r.set(d.id,new nie(e,d)):o.set(d.id,new oie(e,d)),i=!0}return this.data=new iie(e,r,o),i}draw(e,r,o){var a,l;if(!this.data)return;e.clearRect(0,0,e.canvas.width,e.canvas.height);let i=this.data.strokes;for(let c of i.keys())(a=i.get(c))==null||a.draw(e,r,o);let s=this.data.ovals;for(let c of s.keys())(l=s.get(c))==null||l.draw(e,r,o)}};function sie(t,e){return t.id===e.id&&t.center.x===e.center.x&&t.center.y===e.center.y&&t.durationMs===e.durationMs&&t.pivotRadius===e.pivotRadius&&t.rangeRadius===e.rangeRadius&&t.timestamp==e.timestamp&&t.type===e.type}var tS=class{constructor(e,r){this.point=e;this.timestamp=r}},G2=class{constructor(e,r){this.id=e;this.startPoint=r;this.pendings=[];this.smoother=new YU;this.pendings.push(r)}get lastPoint(){return this.smoother.lastPoint}pushPending(e){this.pendings.push(e)}popPendings(){let e=this.pendings;return this.pendings=[],e}makeStrokePoint(e){let r=this.smoother.filter(e.point),o;return this.startTimestamp?o=e.timestamp-this.startTimestamp:(this.startTimestamp=e.timestamp,o=0),new eS(this.id,"stroke",r,o,G2.kColor)}makeOvalPoint(e){return new eS(this.id,"oval",e.point,e.timestamp,G2.kColor)}},JU=G2;JU.kColor=pn({a:255,r:255,g:0,b:0});var V2=class{constructor(){this.state="idle"}static nextId(){return V2.id++}get isDisabled(){return this.state==="disabled"}setDisabled(){this.state="disabled"}onPointerStarted(e){this.initializeStroke(e)}onPointerMoved(e){if(!!this.stroke){if(this.state==="pending"){if(this.detectStroke(e)){let o=this.stroke,i=e.timestamp;o.popPendings().forEach(s=>{let a=new tS(s.point,i);return o.makeStrokePoint(a)})}}else if(this.state==="stroke"){let r={x:e.x,y:e.y},o=new tS(r,e.timestamp);return this.stroke.makeStrokePoint(o)}}}onPointerEnded(e){if(!this.stroke)return;let r={x:e.x,y:e.y},o;if(this.state==="pending"){let i=new tS(r,e.timestamp);o=this.stroke.makeOvalPoint(i)}return this.resetStroke(),o}initializeStroke(e){let r={x:e.x,y:e.y},o=e.timestamp;if(this.stroke)return;let i=V2.nextId(),s=new tS(r,o);this.stroke=new JU(i,s),this.state="pending"}detectStroke(e){if(!this.stroke)return!1;let r={x:e.x,y:e.y};this.stroke.pushPending(new tS(r,e.timestamp));let o=window.devicePixelRatio,i=e.totalMovementX/o,s=e.totalMovementY/o;return Math.hypot(i,s)>5?(this.state="stroke",!0):!1}resetStroke(){this.stroke=void 0,this.state="idle"}},H2=V2;H2.id=0;var ml=({canvasSize:t,notification:e,scale:r,callback:o,consumer:i})=>{let s=qe(),a=(0,jd.useRef)(null),l=(0,jd.useRef)(new QU).current;if(e==null?void 0:e.pointer){let f=q2e(e==null?void 0:e.pointer);l.pushPoints(f)}let c=e==null?void 0:e.screenWidth,d=e==null?void 0:e.screenHeight,u=(0,jd.useRef)(s);(0,jd.useEffect)(()=>{u.current=s},[s]);let p=(0,jd.useRef)(),h=!!s.screenSharingState;return(0,jd.useEffect)(()=>{if(!h||!i)return;p.current=K2e(i);let f=window.setInterval(p.current.flush,100);return()=>{p.current=void 0,window.clearInterval(f)}},[h]),(0,jd.useEffect)(()=>{let f=a.current;o&&f.addEventListener("wheel",o.onHandleWheel);let m=new Mn(f),g=new H2;return m.onSingle=(v,y)=>{var C,b,x;if(o==null||o.onHandleSingle(v,y),!i||!DA(y))return;v==="down"&&g.onPointerStarted(y);let S;v==="move"&&(S=g.onPointerMoved(y),S&&((C=p.current)==null||C.push(X2e([S])))),v==="up"&&(S=g.onPointerEnded(y),(S==null?void 0:S.type)==="oval"&&((b=p.current)==null||b.push(Y2e(S))),(x=p.current)==null||x.flush()),S&&l.push(S)},m.onDoubleMove=(v,y)=>{o==null||o.onHandleDoubleMove(v,y),g==null||g.setDisabled()},()=>{m.unbind(),o&&f.removeEventListener("wheel",o.onHandleWheel)}},[o]),(0,jd.useEffect)(()=>{let f=a.current,m=f.getContext("2d");if(!m)throw new fo;m.clearRect(0,0,f.width,f.height),l.invalidate()},[c,d]),(0,jd.useEffect)(()=>{let f=!1,m=()=>{let g=performance.now(),v=a.current;if(!(f||!v)){if(l.update(g)){let y=v.getContext("2d");if(!y)throw new fo;l.draw(y,g,r||1)}requestAnimationFrame(m)}};return requestAnimationFrame(m),()=>{if(f=!0,!e){l.invalidate();let g=a.current;if(!g)return;let v=g.getContext("2d");v==null||v.clearRect(0,0,g.width,g.height)}}},[t.width,t.height]),ZU.createElement("div",{className:"laserLayer"},ZU.createElement("canvas",{ref:a,style:{width:`${t.width/window.devicePixelRatio}px`,height:`${t.height/window.devicePixelRatio}px`},width:t.width,height:t.height}))};function K2e(t){let e=[];return{push:i=>{e.push(...i)},flush:()=>{let i=[...e];e.splice(0,e.length),i.length>0&&t.pushPoint(i)}}}function q2e(t){let e=[];for(let r=0;r<t.length;r++){let o=t[r],i=Q2e(o.points),s="stroke";o.type==="spotlight"&&(s="oval");let a=Fn(o.color);for(let l=0;l<i.length;l++){let c=new eS(Number(o.id),s,i[l].point,i[l].timestamp/10,a);e.push(c)}}return e}function Y2e(t){let{id:e,rangeRadius:r,pivotRadius:o,durationMs:i,color:s}=t;return[{id:`${e}`,type:"spotlight",rangeRadius:r,pivotRadius:o,points:aie([t]),color:s.toARGBHex(),duration:i/1e3}]}function X2e(t){let{id:e,pivotRadius:r,durationMs:o,color:i}=t[0];return[{id:`${e}`,points:aie(t),type:"laserPointer",color:i.toARGBHex(),radius:r,duration:o/1e3}]}function aie(t){let e=new ArrayBuffer(4*3*t.length),r=new Uint8Array(e),o=new DataView(e),i=0,s=window.devicePixelRatio;for(let a of t)o.setFloat32(i,a.center.x/s,!0),o.setFloat32(i+4,a.center.y/s,!0),o.setUint32(i+8,a.timestamp*10,!0),i+=12;return btoa(String.fromCharCode(...r))}function Q2e(t){let e=[],r=atob(t),o=new DataView(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)o.setInt8(a,r.charCodeAt(a));let i=window.devicePixelRatio,s=r.length/4/3;for(let a=0;a<s;a++){let l=o.getFloat32(a*12,!0)*i,c=o.getFloat32(a*12+4,!0)*i,d=o.getInt32(a*12+8,!0);e.push({point:{x:l,y:c},timestamp:d})}return e}var qT=X(on());function Jm({store:t,drawnType:e,uploadThumb:r}){let{lnsClient:o}=ue,i=So(),s=0,a=new Map;async function l({documentId:h,index:f,card:m,op:g,thumbs:v}){var F,z;let y=De.get().strings,S=To.forDocument(e,h,f),C=S.getLayerMetadata(),b=g.ignore_base;(C==null?void 0:C.ignore_base)===!0&&(b=!0);let x=((F=C==null?void 0:C.generation)!=null?F:0)+1,w={version:"1.1.0.0",index:f,garbage:g.deleted.map(L=>L.id),generation:x,ignore_base:b,canvas:(z=C==null?void 0:C.canvas)!=null?z:m.drawnGeometry(e).canvas},k=C_(g.strokes.map(L=>L.content)),T;if(e==="annotation")try{T=await o.updateDocumentAnnotation({documentId:h,index:f,document_comment:{...w,contents:k}})}catch(L){$2(t,oe.updateDocumentAnnotation,(0,qT.sprintf)(y.couldntSave,y.annotation))(L);return}else try{T=await o.updateDocumentExtension({documentId:h,index:f,document_comment:{...w,contents:k}})}catch(L){$2(t,oe.updateDocumentExtension,(0,qT.sprintf)(y.couldntSave,y.drawn))(L);return}let A=T.generation,E=v;if(T.generation>x){ge.log(`forward generation: req=${x} res=${T.generation}`),await S.updateDocumentLayer({afterGeneration:x-1});let L=gr.get(m),R=m.drawnGeometry(e);A=S.getLayerMetadata().generation,E=L[e].redrawThumbnails({geometry:R,contents:S.packContents()})}else S.setLayerMetadata(w);r&&c(f,{documentId:h,index:f,generation:A,thumbs:E,card:m})}function c(h,f){a.set(h,f),s=i(d,3*pr.sec)}async function d(){let h=Array.from(a.values()).map(u);a=new Map,await Promise.all(h)}async function u(h){let f=De.get().strings,{index:m,documentId:g,generation:v,thumbs:y,card:S}=h;if(e==="annotation")try{let C=await xo(y.medium,"image/png","thumb.png");await o.uploadDocumentAnnotationThumbnail({generation:v,index:m,documentId:g,data:C})}catch(C){$2(t,oe.updateDocumentAnnotationThumbnail,(0,qT.sprintf)(f.couldntSave,f.annotationThumbnail))(C)}else try{let C=await FO(S),b=await xo(C,"image/png","thumb.png");await o.uploadDocumentThumbnail({documentId:g,index:m,generation:v,data:b})}catch(C){$2(t,oe.updateDocumentThumbnail,(0,qT.sprintf)(f.couldntSave,f.documentThumbnail))(C)}}function p(){clearTimeout(s),d()}return{update:l,close:p}}function $2(t,e,r){return o=>{if(yt.catchError(o))return;ge.error(o);let i=De.get().strings,{message:s}=Ht(o,{400:l=>{let c=l.asJson();return(c==null?void 0:c.error)==="generation error"?i.newerDataExistsOnServer:i.status400Msg},403:i.status403AccessDenied,404:i.status404ItemNotFound}),a={title:r,message:s,okMessage:i.back,onOk:()=>t.reduce(Pe(e,void 0))};t.reduce(Pe(e,a))}}var lie=Cc(),cie=.1,die=class{constructor(){this.isDistributor=!1;this._needsUpdateFullScreenSharing=!1;this.session={playing:!1,id:0};this._seeking=!1;this._rewind=!1;this._speedScaling=!1;this.remotePlayingAccepted=!1;this._playToken=lie()}get needsUpdateFullScreenSharing(){return this._needsUpdateFullScreenSharing}set needsUpdateFullScreenSharing(e){this._needsUpdateFullScreenSharing=e}get seeking(){return this._seeking}get rewind(){return this._rewind}get speedScaling(){return this._speedScaling}get playToken(){return this._playToken}get userPlaying(){return!this._rewind&&!this._seeking&&this.session.playing}get remotePlaying(){return this.userPlaying&&!this._speedScaling}get localPlaying(){return this.isDistributor?this.remotePlaying&&this.remotePlayingAccepted:this.userPlaying}nextSession(e){return{playing:e,id:e?this.session.id+1:this.session.id}}newSession(){return{playing:this.session.playing,id:this.session.id+1}}setUserStatus(e){var i,s,a,l;let r=this.remotePlaying;this._seeking=(i=e.seeking)!=null?i:this._seeking,this._rewind=(s=e.rewind)!=null?s:this._rewind,this._speedScaling=(a=e.speedScaling)!=null?a:this._speedScaling;let o=(l=e.session)!=null?l:this.session;this.session.id!==o.id&&(this._playToken=lie(),this.remotePlayingAccepted=!1),this.session=o,r!==this.remotePlaying&&(this.needsUpdateFullScreenSharing=!0)}setRemoteStatus(e,r,o){let i=this.remotePlaying;this.isDistributor=e,e&&r&&this._playToken===o&&(this.remotePlayingAccepted=!0,i!==this.remotePlaying&&(this.needsUpdateFullScreenSharing=!0))}},ec=class{constructor(){this._status=new die}get remotePlaying(){return this._status.remotePlaying}get localPlaying(){return this._status.localPlaying}get playToken(){return this._status.playToken}get seeking(){return this._status.seeking}get rewind(){return this._status.rewind}getAndClearNeedsUpdateFullScreenSharing(){let e=this._status.needsUpdateFullScreenSharing;return this._status.needsUpdateFullScreenSharing=!1,e}updateStatusPlay(e){return this._status.setUserStatus({session:this._status.nextSession(!0)}),this._status.localPlaying&&e.avInitialized}updateStatusPause(){this._status.setUserStatus({session:this._status.nextSession(!1)})}updateRewindState(e){this._status.setUserStatus({rewind:e})}updateSeekState(e){this._status.setUserStatus({seeking:e})}updateSpeedScaleState(e){this._status.setUserStatus({speedScaling:e})}newSession(){this._status.setUserStatus({session:this._status.newSession()})}setRemoteStatus(e,r,o,i){this._status.setRemoteStatus(r,o,i),e.setPlaying(o)}clearRemoteStatus(){this._status.setRemoteStatus(!1,!1,void 0)}play(e){var o;let r=(o=this.updateStatusPlay(e))!=null?o:!0;e.setPlaying(r)}pause(e){this._status.setUserStatus({session:this._status.nextSession(!1)}),e.setPlaying(!1)}playEnded(){this._status.setUserStatus({session:this._status.nextSession(!1)})}pageChanged(e,r){let o=e8(e,r);if(e.setAvEndTime(o),e.slideshowPlaying){let i=this.updateStatusPlay(e);i&&e.setPlaying(i)}else this.newSession()}beginSeek(e){this.updateSeekState(!0),e.setPlaying(!1)}seek(e,r){e.setAvSeekTime(r,!0)}endSeek(e,r){var s;this.updateSeekState(!1),this.newSession();let o=(s=this.localPlaying)!=null?s:!0,i=e8(e,r);e.setAvEndTime(i),e.setPlaying(o)}beginRewind(e,r){this.updateRewindState(!0),e.rewind(r)}endRewind(e){this.updateRewindState(!1);let r=this.updateStatusPlay(e);e.setPlaying(r)}beginSpeedScaling(e){this.updateSpeedScaleState(!0);let r=this.localPlaying;e.setPlaying(r)}endSpeedScaling(e){this.updateSpeedScaleState(!1),this.newSession();let r=this.localPlaying;e.setPlaying(r)}togglePlayPause(e,r){var l;let o=!e.avPlaying,{startSeconds:i,endSeconds:s}=vs(r),a=cie;if(o){Math.abs(e.avSeekTime-s)<a&&r.duration>1&&e.setAvSeekTime(i,!0),r.duration-a<=e.avSeekTime&&e.setAvSeekTime(i,!0);let c=e8(e,r);e.setAvEndTime(c),o=(l=this.updateStatusPlay(e))!=null?l:o}else this.updateStatusPause();e.setPlaying(o)}};function e8(t,e){let{endSeconds:r}=vs(e),{avSeekTime:o}=t;return o>r+cie?e.duration:r}var r8=X(on());var $i=X(he()),t8=X(he());var uie=1,np=t=>{let{card:e,store:r,editorRendererState:o,onClosing:i,onDismiss:s,viewMode:a,updateCoverDataBeforeUnload:l}=t,[c,d]=$i.useState(""),u=r.lnsEndpoint,p=Zn.getEndpoint("loilonote-quiz");if(!p)return null;let h=`${p}`,f=e.content.quiz_id,m=e.content.preset,g=or(r),[v,y]=$i.useState(!1),[S,C]=$i.useState(!1);es(()=>(r.reduce(zo(!0)),window.addEventListener("message",x),()=>{window.removeEventListener("message",x)})),kf(()=>{l&&!S&&b()}),(0,t8.useEffect)(()=>{if(!un(g))return;let N=r.screenSharingActionNotification[g],V=N&&N.type!=="end";v&&!V&&s(),y(V)},[g,r.screenSharingActionNotification]);let b=async()=>{let N=await Zn.issue("loilonote-quiz");if(!N)return;let W=await new zv({lnsEndpoint:u,lnqEndpoint:p,logEnabled:r.logEnabled}).getCoverData(f,N.app_token),me=J2e({card:e,data:W});me&&We(me)},x=N=>{if(N.origin!==h)return;let V=N.data;if(V.version!==uie)return;let W=V.command;W==="ready"?C(!0):V.command==="upload-completed"?l?b().finally(()=>{s()}):s():W==="handshake-request"&&F("handshake-response")};(0,t8.useEffect)(()=>{a===void 0||a==="closing"||Zn.issue("loilonote-quiz").then(N=>{hc(N==null?void 0:N.app_token)&&d(Z2e(p,f,a,N==null?void 0:N.app_token,u,g,r.locale))})},[a]);let w=(()=>{if(!v)return!0;if(r.screenSharingForPresenter)return!1;if(r.screenSharingForSelf||!un(g))return!0;let N=r.screenSharingActionNotification[g];return!N||!xi(N)?!0:N.presenter===r.userInfo.user_id})(),k=(()=>v?r.userInfo.is_teacher?r.screenSharingForPresenter?!0:!r.screenSharingForSelf:!1:!0)(),T=w||k,A;typeof g=="number"&&(A=r.screenSharingActionNotification[g]);let E=$i.useRef(null),F=N=>{var W,me;let V={command:N,version:uie};(me=(W=E.current)==null?void 0:W.contentWindow)==null||me.postMessage(V,h)},z=()=>{S?(F("will-unmount"),i()):s()},L=Te(),R;if(a==="closing")R=L.saving;else switch(m){case"survey":R=L.preparingQuestionnaire;break;case"test":R=L.preparingTest;break}return $i.createElement("div",{className:"testCardContainer","data-type":`quiz-${m}`},$i.createElement("div",{className:"testCardLoadingProgressLabel"},R),$i.createElement(ur,{style:{position:"absolute",top:"30%",left:"25%",width:"50%"}}),$i.createElement("iframe",{className:"testCardFrame",sandbox:"allow-scripts allow-forms allow-modals allow-same-origin allow-downloads",allowFullScreen:!0,allow:"fullscreen",src:c,ref:E,style:{visibility:a==="closing"?"hidden":"visible"}}),T&&$i.createElement("div",{className:"testCardTopBarContainer"},$i.createElement("div",{className:"testCardTopBarContainerInner"},$i.createElement("div",{className:"editorHeaderButtonGroup"},w?$i.createElement("div",{className:"editorButtonWrapper"},$i.createElement("div",{className:"editorButton",onClick:z},$i.createElement("div",{className:"editorButtonIcon backButtonIcon"}))):$i.createElement("div",{className:"editorHeaderFixedSpacer"})),$i.createElement("div",{className:"editorHeaderSpacer"}),k&&un(g)&&xi(A)&&$i.createElement("div",{className:"editorHeaderButtonGroup"},$i.createElement(Zl,{store:r,courseId:g,sessionId:A.id,publisher:A.publisher,forStudent:A.publisher===r.userInfo.user_id,editorRendererState:o})))))};function J2e(t){var a,l;let{card:e,data:r}=t,{content:o}=e,i={};o.title!==r.title&&(i["content.title"]=r.title),o.question_count!==r.questionCount&&(i["content.question_count"]=r.questionCount);let s=PA(r);if(o.isAnswered!==s&&(i["content.isAnswered"]=s),((a=o.quiz_author)==null?void 0:a.id)!==r.author.id&&(i["content.quiz_author.id"]=r.author.id),((l=o.quiz_author)==null?void 0:l.name)!==r.author.name&&(i["content.quiz_author.name"]=r.author.name),Object.keys(i).length>0)return Sn(e.id,i)}function Z2e(t,e,r,o,i,s,a){return`${t}/quiz/${e}?${r==="preview"?"viewMode=preview&":r==="result"?"viewMode=result&":""}app_token=${o}&lns_endpoint=${i}&course_id=${s}&language_type=${Kk(a)}`}var ja=X(he()),rS=X(he());var op=({card:t,editorRendererState:e,viewMode:r,onDismiss:o,updateCoverDataBeforeUnload:i})=>{let s=qe(),[a,l]=(0,rS.useState)(""),[c,d]=(0,rS.useState)(!1),u=Zn.getEndpoint("loilonote-attendance");if(!u)return null;let p=or(s),h=Te();es(()=>{s.reduce(zo(!0))}),kf(()=>{i&&f()}),(0,rS.useEffect)(()=>{if(!un(p))return;let C=s.screenSharingActionNotification[p],b=C&&C.type!=="end";c&&!b&&o(),d(b)},[p,s.screenSharingActionNotification]);let f=async()=>{let C=await Zn.issue("loilonote-attendance");if(!C)return;let b=s.lnsEndpoint,w=await new Ov({lnsEndpoint:b,lnaEndpoint:u,logEnabled:s.logEnabled}).getCoverData(t.content.attendance_id,C.app_token),k=eRe({card:t,data:w});k&&We(k)};(0,rS.useEffect)(()=>{if(!r)return;let C=Zn.getEndpoint("loilonote-attendance");!C||Zn.issue("loilonote-attendance").then(b=>{if((b==null?void 0:b.app_token)===void 0)return;let x=`${C}/attendance/${t.content.attendance_id}?app_token=${b.app_token}&lns_endpoint=${s.lnsEndpoint}&language_type=${Kk(s.locale)}`;l(x)})},[r]);let m=()=>{o()},g=(()=>{if(!c)return!0;if(s.screenSharingForPresenter)return!1;if(s.screenSharingForSelf||!un(p))return!0;let C=s.screenSharingActionNotification[p];return!C||!xi(C)?!0:C.presenter===s.userInfo.user_id})(),v=(()=>c?s.userInfo.is_teacher?s.screenSharingForPresenter?!0:!s.screenSharingForSelf:!1:!0)(),y=g||v,S;return typeof p=="number"&&(S=s.screenSharingActionNotification[p]),ja.createElement("div",{className:"testCardContainer","data-type":"attendance"},ja.createElement("div",{className:"testCardLoadingProgressLabel"},h.preparingAttendance),ja.createElement(ur,{style:{position:"absolute",top:"30%",left:"25%",width:"50%"}}),ja.createElement("iframe",{className:"testCardFrame",sandbox:"allow-scripts allow-forms allow-modals allow-same-origin allow-downloads",src:a}),y&&ja.createElement("div",{className:"testCardTopBarContainer"},ja.createElement("div",{className:"testCardTopBarContainerInner"},ja.createElement("div",{className:"editorHeaderButtonGroup"},g?ja.createElement("div",{className:"editorButtonWrapper"},ja.createElement("div",{className:"editorButton",onClick:m},ja.createElement("div",{className:"editorButtonIcon backButtonIcon"}))):ja.createElement("div",{className:"editorHeaderFixedSpacer"})),ja.createElement("div",{className:"editorHeaderSpacer"}),v&&un(p)&&xi(S)&&ja.createElement("div",{className:"editorHeaderButtonGroup"},ja.createElement(Zl,{store:s,courseId:p,sessionId:S.id,publisher:S.publisher,forStudent:S.publisher===s.userInfo.user_id,editorRendererState:e})))))};function eRe(t){var s,a;let{card:e,data:r}=t,{content:o}=e,i={};if(o.title!==r.title&&(i["content.title"]=r.title),((s=o.attendance_author)==null?void 0:s.id)!==r.author.id&&(i["content.attendance_author.id"]=r.author.id),((a=o.attendance_author)==null?void 0:a.name)!==r.author.name&&(i["content.attendance_author.name"]=r.author.name),Object.keys(i).length>0)return Sn(e.id,i)}var YT=class{constructor(){this.history=[]}push(e){if(this.history.length>0&&this.history[this.history.length-1]===e)return;let r=this.history.findIndex(o=>o===e);r>-1&&this.history.splice(r,1),this.history.push(e)}lastTargeted(e){if(this.cleanupExpired(e),!(this.history.length<1)){let r=this.history[this.history.length-1];return e.getCard(r)}}cleanupExpired(e){this.history=this.history.filter(r=>e.getCard(r)!==void 0)}};var tRe={enableRightClick:!0,enableCardEditTool:!0,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,canLeave:!0,drawnType:"drawn",shouldSyncPlayController(t,e){return e.publisher===t.userInfo.user_id&&t.screenSharingForSelf}},W2=class extends Ss.Component{constructor(e){super(e);this.textEditingTargetHistory=new YT;this.onKeyDown=e=>{var l;let{selectedTool:r,addUrlDialogOpen:o,quizView:i,attendanceView:s,narrationRecording:a}=this.state.store;r===Ge.Text||o||a||i!==void 0||s!==void 0||Ks(this.props.store)||(l=this.editorRenderer)==null||l.handleKey(e)};this.onPaste=async e=>{if(!pie(this.props.store,this.state.store)||!this.editorRenderer)return;let{clipboardData:o}=e;!o||!o.types.includes("Files")||o.files.length<1||Nt(new ud(o.files,void 0))};this.onCommandMessage=e=>{var o,i,s,a,l,c,d,u;let r=(o=this.editorRenderer)==null?void 0:o.card.id;if(e instanceof _p)this.onNoteEffect(e);else if(e instanceof Fa)e.cardId===r&&((i=this.editorRenderer)==null||i.onTextCardDroppedInSelf(e),this.state.store.setAddCardDialogOpen(!1));else if(e instanceof Lg){if(e.cardId===r){let p=this.editorRenderer.createDroppedSheet(e);this.uploadSheetAsset(e.sheetType,p).then(()=>{var h;(h=this.editorRenderer)==null||h.onSheetDropped(p),this.state.store.setAddCardDialogOpen(!1)})}}else if(e instanceof Ap)e.creatorCardId===r&&((s=this.editorRenderer)==null||s.onCardInsertedInSelf(e));else if(e instanceof $g)e.cardId===r&&((a=this.editorRenderer)==null||a.onWebCardInsertedFromQr(e));else if(e instanceof Al||e instanceof Vg)e.cardId===r&&((l=this.editorRenderer)==null||l.onWebCardInserted(e));else if(e instanceof Wg)e.cardId===r&&((c=this.editorRenderer)==null||c.onPictureCardCreateFromExtension(e));else if(e instanceof zg)e.creatorCardId===r&&this.onCapturedPhotoInserted(e);else if(e instanceof Ug)e.creatorCardId===r&&this.onCapturedVideoInserted(e);else if(e instanceof Hg)e.creatorCardId===r&&this.uploadSheetAsset(e.sheetType,e.card).then(()=>{var p;(p=this.editorRenderer)==null||p.onCardInsertedInSelf(e)});else if(e instanceof Gg)e.cardId===r&&((d=this.editorRenderer)==null||d.onLocalFileInserted(e));else if(e instanceof ud){let p=this.context;if(!Nm(this.props.store,e.files))return;this.props.store.reduce(Fe(oe.insertDocument,p.insertingFile)),(u=this.editorRenderer)==null||u.onLocalFilePasted(e).catch(h=>{if(!(h instanceof mc))if(h instanceof Ec||h instanceof Bl){let f=h.message;h instanceof Ec?f=(0,r8.sprintf)(p.unsupportedFileErrorMsg,h.type,h.extension):h instanceof Bl&&(f=p.unsupportedFileErrorWithoutOptMsg),this.props.store.reduce(Pe(oe.insertDocument,{title:p.couldntLoadFileTitle,message:f,okMessage:p.back,onOk:()=>{this.props.store.reduce(Pe(oe.insertDocument,void 0))}}))}else throw h}).finally(()=>{this.props.store.reduce(Fe(oe.insertDocument,null))})}};this.onWebcardCreateInEditor=e=>{var a;ge.log("onWebcardCreateInEditor"),this.state.store.setTool(Ge.Finger),this.state.store.setAddUrlDialogOpen(!1);let r=De.get().strings;if(!pie(this.props.store,this.state.store)){alert(r.failedCreateWebCardFromExtension);return}let o=e.detail,i=I0(o.imageStr),s;o.url?s=new Vg(this.props.card.id,o.url,(a=o.title)!=null?a:r.webCard,i):s=new Wg(this.props.card.id,i),Nt(s)};this.onStoreChanged=e=>{let r=e.selectedTool===Ge.Finger&&e.toolVisible,o=[];this.props.store.teacherToolVisible!==r&&o.push(zo(r));let i=this.state.store.selectedTool;if(e.selectedTool===Ge.Text){let s=this.selectTextEditableCard(),a=this.editorRenderer;a&&s&&o.push(Uo({id:s.id,pinned:s.pinned,favorite:s.favorite,canPin:s.canPin(),canRotate:s.canRotate(),canAlign:s.canAlign(),bounds:a.boundingBoxRectToScreen(s.bounds)}),cr(!1),Pr(void 0))}else i===Ge.Text&&this.deleteUnmodifiedEmptyCard();e.moveMode&&o.push(cr(!1)),this.setState({store:e}),this.props.store.reduce(...o)};this.onCardSelected=e=>{let r=this.state.store;r.selectedTool===Ge.Text&&[...e.familyIterator()].every(i=>!fi(i))&&r.setTool(Ge.Finger);let o=!r.slideshowPlaying;!!this.props.store.screenSharingState&&this.editorRenderer&&(o=this.editorRenderer.screenSharingRootCards(e)),this.props.store.reduce(xf(e.id,o))};this.onDrawnUpdate=({card:e,op:r,thumbs:o})=>{var s;let{store:i}=this.props;if(i.reduce(Up({cardIdList:[e.id],type:"drawn",state:"unsaved"})),(s=i.screenSharingState)==null?void 0:s.fullscreen){let{document:a}=i.screenSharingState.fullscreen;this.layerUpdater.update({documentId:a,index:e.indexOverGroup(),card:e,thumbs:o,op:r})}};this.handleSingle=(e,r)=>{this.pointerEventRouter.handleSingle(e,r)};this.handleDoubleMove=(e,r)=>{this.pointerEventRouter.handleDoubleMove(e,r)};this.handleFreeMove=e=>{var d,u,p,h,f;let r=this.canvas.current,o=this.editorRenderer.getObjectUnderPoint(e),i=this.state.store.selectedTool===Ge.Text,s=!!this.props.store.screenSharingState;if(!o){let m="default",g=this.props.card;if(i)if(this.editingCard.id===g.id){let v=this.editorText.current,y=v==null?void 0:v.hitTestTextBody({pointInCanvas:e});m=(d=y==null?void 0:y.cursor)!=null?d:m}else g.gadgets.title&&g.gadgets.title.text.length>0&&!s&&(m=((u=g.gadgets.title)==null?void 0:u.vertical)?"vertical-text":"text");r.style.cursor=m;return}let{card:a,eventTarget:l}=o;if(a&&fi(a)&&!a.isFolded&&l==="card"&&!s){let m=((p=a.gadgets.title)==null?void 0:p.vertical)?"vertical-text":"text";if(i&&this.editingCard.id===a.id){let g=this.editorText.current,v=g==null?void 0:g.hitTestTextBody({pointInCanvas:e});m=(h=v==null?void 0:v.cursor)!=null?h:"default"}r.style.cursor=m;return}if(a&&i&&(!fi(a)||(a==null?void 0:a.isFolded))&&l==="card"){r.style.cursor="default";return}let c=((f=o.card)==null?void 0:f.pinned)==!0;r.style.cursor=IA(c,l)};this.onSingle=(e,r)=>{var i,s,a,l;e==="down"&&this.updatePointerEventTarget(r);let o=(i=this.pointerEventTarget)==null?void 0:i.handleSingle(e,r);e==="move"&&!o&&this.pointerEventTarget===this.editorText.current&&r.down&&(this.editorRenderer.handleSingle("down",r.down),this.editorRenderer.handleSingle("move",r),this.pointerEventTarget=this.editorRenderer),e==="move"&&this.pointerEventTarget!==this.editorText.current&&((s=this.editorText.current)==null||s.setCaretVisible(!1)),e==="up"&&(this.state.store.selectedTool===Ge.Text&&this.focusEditingTextCard(),this.pointerEventTarget=void 0,(a=this.editorText.current)==null||a.setCaretVisible(!0),(l=this.editorText.current)==null||l.updateTextFrameIfNeeded())};this.onDoubleMove=(e,r)=>{this.editorRenderer.handleDoubleMove(e,r)};this.onLongPress=e=>{var o,i,s;let r=this.editorText.current;if(r&&this.state.store.selectedTool===Ge.Text){let a=this.props.card,l=(o=this.editorRenderer)==null?void 0:o.getCardUnderPoint(e);if(l){if(l.id===this.editingCard.id)return r.handleLongPress(e),!0;if(l.id===a.id&&fi(a))return this.onEditableTextCardClicked(a,e),r.handleLongPress(e),!0;if(fi(l))return this.onEditableTextCardClicked(l,e),r.handleLongPress(e),!0}else if(fi(a))return this.onEditableTextCardClicked(a,e),r.handleLongPress(e),!0}return(s=(i=this.editorRenderer)==null?void 0:i.handleLongPress(e))!=null?s:!1};this.onDoubleClick=e=>{var a,l,c,d,u,p;let r=this.editorRenderer.handleDoubleClick(e),o=this.props.store.editor;if(!r||!this.editorRenderer||!o)return!1;let i=o[o.length-1].cardId,s=r.renderer.card;if(fi(s))this.state.store.selectedTool===Ge.Text&&((l=(a=this.props.store.desktop)==null?void 0:a.focusingCard)==null?void 0:l.id)===s.id?(c=this.editorText.current)==null||c.selectWordAt(e):(this.state.store.setTool(Ge.Text),(d=this.editorText.current)==null||d.moveCaretTo(e));else if(s instanceof zr){let{store:h}=this.props;((u=s.content.quiz_author)==null?void 0:u.id)===String(h.userInfo.user_id)?this.state.store.setQuizView({card:s,mode:"create"}):this.state.store.setQuizView({card:s,mode:"answer"})}else if(s instanceof ri){let h=s.content.uri;h?QC(h):N2(this.state.store)}else if(s instanceof an)this.state.store.setAttendanceView({card:s,mode:"open"});else if(s.id===i){let h=window.devicePixelRatio,f=au(e,1/h),m=new Fa({cardId:i,color:rn(),backcolor:Ra,position:f,unmodified:!0});this.editorRenderer.onTextCardDroppedInSelf(m),this.state.store.setTool(Ge.Text),(p=this.editorText.current)==null||p.reset()}return r.renderer.resetHandlingComponent(),r!==void 0};this.onTextButtonClickedInHeader=()=>{if(this.selectTextEditableCard()===void 0){let r=this.editorRenderer;if(!r)return;let o=this.props.store.screen,[i,s]=[o.width/2,o.height/2],a=new Fa({cardId:this.props.card.id,color:rn(),backcolor:Ra,position:{x:i,y:s},unmodified:!0});r.onTextCardDroppedInSelf(a)}this.state.store.setTool(Ge.Text)};this.onQuizButtonClicked=e=>{let r=this.editorRenderer;if(!r)return;let{store:o}=this.props,i=this.state.store,s=r.card;if(s instanceof zr&&s.content.quiz_author!==void 0&&s.content.quiz_author.id!=="")switch(i.setTool(Ge.Finger),e){case Wr.EDIT:i.setQuizView({card:s,mode:"create"});break;case Wr.ANSWER:i.setQuizView({card:s,mode:"answer"});break;case Wr.RESULT:i.setQuizView({card:s,mode:"result"});break;case Wr.ANSWER_TOGETHER:i.setQuizView({card:s,mode:"result"});let a=r.getFullScreenSharingState();Hv({store:o,editorRendererState:a,authorId:o.userInfo.user_id,card:s,anonymous:!1});break;case Wr.HELP:let l=XT(s.content.preset,this.context);window.open(l);break}};this.onQuizCardFrameContainerDismiss=()=>{this.state.store.setQuizView(void 0);let{store:e}=this.props;if(!e.screenSharingState)return;let r=this.editorRenderer;!r||gh(e,r.getFullScreenSharingState(),void 0)};this.onAttendanceButtonClicked=e=>{let r=this.editorRenderer;if(!r)return;let o=r.card;if(!(o instanceof an))return;let i=this.state.store,{store:s}=this.props;switch(i.setTool(Ge.Finger),e){case Do.OPEN:case Do.ANSWER:if(i.setAttendanceView({card:o,mode:"open"}),s.screenSharingForSelf){let d=r.getFullScreenSharingState(),u=o.content.attendance_id;Md(s,d,u)}break;case Do.HELP:let a=s.userInfo.is_teacher,l=this.context,c=QT(a,l);window.open(c);break}};this.onAttendanceCardFrameContainerDismiss=()=>{this.state.store.setAttendanceView(void 0);let{store:e}=this.props;if(!e.screenSharingState)return;let r=this.editorRenderer;!r||Md(e,r.getFullScreenSharingState(),void 0)};this.canvas=Ss.createRef(),this.editorText=Ss.createRef();let r=Kc();r.subscribe(this.onStoreChanged);let{onCardInsertionCompleted:o,onCardClicked:i,onCardFullscreenButtonClicked:s,onCardHeld:a,...l}=this.props.cardRendererCallback;this.layerUpdater=Jm({store:this.props.store,drawnType:"drawn",uploadThumb:!1}),this.cardRendererCallback={onCardInsertionCompleted:(c,d)=>{d.activateTextEditor&&(this.props.store.reduce(Uo({id:c.id,pinned:c.pinned,favorite:c.favorite,canPin:c.canPin(),canRotate:c.canRotate(),canAlign:c.canAlign(),bounds:this.editorRenderer.boundingBoxRectToScreen(c.bounds)}),cr(!1),Pr(void 0)),this.state.store.setTool(Ge.Text))},onCardClicked:(c,d)=>{this.props.store.screenSharingState!==void 0?i(Mc(c,this.props.card)||c,d):fi(c)&&(c.id===this.props.card.id||!c.isFolded)?this.onEditableTextCardClicked(c,d):(this.state.store.selectedTool!==Ge.Text&&i(Mc(c,this.props.card)||c,d),this.state.store.setTool(Ge.Finger),this.props.store.reduce(lo()))},onCardFullscreenButtonClicked:c=>{var d;(d=this.editorRenderer)==null||d.clearCardModificationMonitor(),this.state.store.setTool(Ge.Finger),s(Mc(c,this.props.card)||c)},onCardHeld:(c,d)=>{if(a(c,d),c&&!this.props.store.screenSharingState)for(let u of[c,...c.parentsIterator()])this.props.noteRendererCallback.bringCardTreeToFront(u,u===c&&(c.isFolded||d))},...l},this.state={store:r}}componentDidMount(){let{store:e}=this.props,r=this.canvas.current;this.processor=new Mn(r),this.processor.onSingle=this.handleSingle,this.processor.onDoubleMove=this.handleDoubleMove,this.freeMoveProcessor=new Kl(r),this.freeMoveProcessor.onFreeMove=this.handleFreeMove,this.pointerEventRouter=new tb(this),this.pointerEventRouter.onLongPress=this.onLongPress,this.pointerEventRouter.onSingle=this.onSingle,this.pointerEventRouter.onDoubleClick=this.onDoubleClick,this.pointerEventRouter.onDoubleMove=this.onDoubleMove;let o=this.props.store.editor.length,i=this.props.card;this.editorRenderer=new $d({canvas:r,state:{store:this.props.store,card:this.props.card,editorStore:this.state.store,screen:this.props.store.screen,viewStack:this.props.store.editor,noteMtx:this.props.noteMtx,documentLoading:!1},role:tRe,playManager:new ec,callback:{onCardSelected:this.onCardSelected,onPop:s=>this.onBack(s),onTrashBoxHit:s=>{e.reduce(nv(s?"editorTrashBox":void 0))},onDrawnMarkedAsUnsaved:this.onDrawnUpdate,onEnsureDrawnGadget:s=>{let a=s.drawnGeometry("drawn");We(Sn(s.id,{"gadgets.drawn":a}))},onZoomScroll:s=>{var a,l;this.state.store.setZoom(s.a),(a=this.editorText.current)==null||a.updateTextFrameIfNeeded(),(l=this.editorText.current)==null||l.updateTextInputBounds()},getCardOnNote:s=>{if(!!this.props.noteRendererCallback.hasCard(s))return this.props.noteRendererCallback.getCard(s)},onQuizButtonClicked:this.onQuizButtonClicked,onAttendanceButtonClicked:this.onAttendanceButtonClicked,...this.cardRendererCallback},remotePointerManager:this.props.remotePointerManager}),this.subscription=cu(this.onCommandMessage),this.initialize({editorSize:o,card:i}),this.loadFontIfNeeded(i),this.editorRenderer.scheduleRender(),this.laserLayerCallback={onHandleSingle:()=>{},onHandleDoubleMove:this.editorRenderer.handleDoubleMove,onHandleWheel:this.editorRenderer.handleWheel},window.addEventListener("keydown",this.onKeyDown),window.addEventListener("webcardcreate",this.onWebcardCreateInEditor),document.addEventListener("paste",this.onPaste)}loadFontIfNeeded(e){(e instanceof zr||e instanceof an)&&Promise.all([Vt.regularFont.fetch(),Vt.boldFont.fetch()]).then(()=>{this.props.store.reduce(Co())})}async uploadSheetAsset(e,r){let o=await fetch(lb(e)),i=this.context,s=a=>{this.props.store.reduce(Pe(oe.insertDocument,{title:i.couldntLoadFileTitle,message:a,okMessage:i.back,onOk:()=>this.props.store.reduce(Pe(oe.insertDocument,void 0))}))};if(o.status!==200)return s((0,r8.sprintf)(i.couldntDownloadFileErrorMsg,o.status));try{let a=new File([await o.arrayBuffer()],"file.pdf",{type:"application/pdf"}),l=[{width:r.content.page_size.width,height:r.content.page_size.height}],c=await Is.fromFile(a);eo(this.props.store,{file:a,metadata:l,extension:".pdf",cardIdList:[r.id],thumbnailsGenerator:()=>c.generateThumbnailsWithOptions({imageType:"image/png"})})}catch(a){ge.error(a),s(i.corruptFileErrorMsg)}}async updateWebcardUrlAndThumbnail(e,r){if(r.thumbnailFile){let o=await $o.fromFile(r.thumbnailFile),i=no.get(hi(r.thumbnailFile));eo(this.props.store,{file:r.thumbnailFile,metadata:o.getMetadata(),description:r.title,extension:i,cardIdList:[e.id],thumbnailsGenerator:()=>o.generateThumbnails()})}We(Sn(e.id,{"content.uri":r.url}))}onCapturedPhotoInserted(e){this.onCapturedPhotoInsertedInternal(e).finally(()=>{URL.revokeObjectURL(e.url)})}async onCapturedPhotoInsertedInternal(e){let{card:r,imageFile:o}=e,{contentType:i,image:s,name:a,extension:l}=o;if(i!==hd)throw new Error(`cannot yet handle files of type "${i}`);let c=await xo(s,i,a),d=o.getMetadata();eo(this.props.store,{file:c,metadata:d,extension:l,cardIdList:[r.id],thumbnailsGenerator:()=>o.generateThumbnails()}),this.editorRenderer.onCardInsertedInSelf(e)}onCapturedVideoInserted(e){this.onCapturedVideoInsertedInternal(e).finally(()=>{URL.revokeObjectURL(e.url)})}async onCapturedVideoInsertedInternal(e){let{card:r,videoFile:o}=e,{contentType:i,video:s,name:a,extension:l}=o;if(!al(i))throw new Error(`cannot yet handle files of type "${i}"`);let c=s.src,d=await Wf(c,a,i),u=o.getMetadata();eo(this.props.store,{file:d,metadata:u,extension:l,cardIdList:[r.id],thumbnailsGenerator:()=>o.generateThumbnails()}),this.editorRenderer.onCardInsertedInSelf(e)}onNoteEffect(e){this.editorRenderer.onNoteEffect(e)}deleteUnmodifiedEmptyCard(){var r;let e=(r=this.editorRenderer)==null?void 0:r.clearCardModificationMonitor();if(e){let o=this.props.card.getCard(e.id);(o==null?void 0:o.lastModified.getTime())===e.lastModified.getTime()&&We(Ma(e.id))}}componentWillUnmount(){let{store:e}=this.props;this.reset(),e.reduce(zo(!0)),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("webcardcreate",this.onWebcardCreateInEditor),document.removeEventListener("paste",this.onPaste)}componentDidUpdate(e,r,o){var m,g;let{card:i,store:s}=this.props,{card:a,store:l}=e,c=(m=l.desktop)==null?void 0:m.focusingCard,d=(g=s.desktop)==null?void 0:g.focusingCard;if(d&&(c==null?void 0:c.id)!==d.id&&r.store.selectedTool===Ge.Text&&this.state.store.selectedTool===Ge.Text&&this.deleteUnmodifiedEmptyCard(),i!==a){let v=this.props.store.editor;this.initialize({card:this.props.card,editorSize:v.length})}a.isDescendantOf(i.id)&&(this.state.store.selectedTool!==Ge.Finger||this.state.store.activeFingerTool!=="finger")&&(this.state.store.setTool(Ge.Finger),this.state.store.setActiveFingerTool("finger")),Ks(this.props.store)&&(this.state.store.avPlaying&&this.editorRenderer.playManager.pause(this.state.store),this.state.store.selectedTool===Ge.Text&&this.onTextBlur());let u=s.screen,p=l.screen;this.editorRenderer.onNextState({card:i,store:s,editorStore:this.state.store,viewStack:s.editor,screen:u,noteMtx:this.props.noteMtx,documentLoading:!1}),this.updateTextEditorFocus(this.state.store.selectedTool,r.store.selectedTool),this.state.store.selectedTool===Ge.Text&&(u.keyboardHeight!==p.keyboardHeight&&this.ensureTextCaretVisible(),il(u,p)||s.reduce(Co())),r.store.selectedTool!==this.state.store.selectedTool&&s.reduce(cr(!1),Pr(void 0));let h=!this.state.store.slideshowPlaying&&r.store.slideshowPlaying,f=!this.props.store.screenSharingState&&!!e.store.screenSharingState;(h||f)&&s.reduce(xf(i.id))}initialize(e){this.editorText.current&&this.editorText.current.initialize(),this.state.store.setTextHistoryTool({canUndo:!1,canRedo:!1}),this.state.store.setHideAnnotation(!1),this.editorRenderer.runStrokeOperation("clearHistory"),this.processor.onSingle=this.handleSingle,this.processor.onDoubleMove=this.handleDoubleMove,this.freeMoveProcessor.onFreeMove=this.handleFreeMove}stopScreenSharing(e){var i;let r=(i=e.screenSharingState)==null?void 0:i.sessionId,o=or(e);r&&typeof o=="number"&&Fd({courseId:o,sessionId:r,store:e,showDialog:!1})}get editingCard(){var r,o;let e=(o=(r=this.props.store.desktop)==null?void 0:r.focusingCard)==null?void 0:o.id;if(e){let i=this.props.card.getCard(e);if(i)return i}return this.props.card}selectTextEditableCard(){var a;let e=this.props.card;if(!this.props.store.desktop||!this.editorRenderer)return;let r=(a=this.props.store.desktop.focusingCard)==null?void 0:a.id,o=this.editorRenderer.getCardTransform().a/devicePixelRatio,i=l=>fi(l)&&l.isVisibleInCardTree(e)&&hm(l,o).resizable;if(r){let l=this.props.card.getCard(r);if(l&&i(l))return this.textEditingTargetHistory.push(l.id),l}let s=this.textEditingTargetHistory.lastTargeted(e);if(s&&!i(s)&&(s=void 0),s||fi(this.props.card)&&(s=this.props.card),!s){for(let l of this.props.card.rflatTree())if(i(l)){s=l;break}}return s&&this.textEditingTargetHistory.push(s.id),s}updatePointerEventTarget(e){let r=this.editorRenderer;if(!r){this.pointerEventTarget=void 0;return}let o=this.editorText.current;if(!o){this.pointerEventTarget=this.editorRenderer;return}let{selectedTool:i}=this.state.store;if(i!==Ge.Text){this.pointerEventTarget=this.editorRenderer;return}let s=this.editingCard,a=this.props.card,l=r.getCardUnderPoint(e);if(l===a)a===s?this.pointerEventTarget=o:this.pointerEventTarget=r;else if(l===s){let c=r.getObjectUnderPoint(e);(c==null?void 0:c.eventTarget)==="card"?this.pointerEventTarget=o:this.pointerEventTarget=r}else this.pointerEventTarget=r}focusEditingTextCard(){var r;if(((r=this.props.store.desktop)==null?void 0:r.focusingCard)!==void 0)return;let e=this.textEditingTargetHistory.lastTargeted(this.props.card);!e||e.id!==this.props.card.id&&this.props.store.reduce(Uo({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:this.editorRenderer.boundingBoxRectToScreen(e.bounds)}))}shouldHandleLongPress(e){return this.editorRenderer.shouldHandleLongPress(e)}shouldHandleDoubleClick(e){return this.editorRenderer.shouldHandleDoubleClick(e)}reset(){var e,r,o,i;this.canvas.current&&((e=this.processor)==null||e.unbind(),(r=this.freeMoveProcessor)==null||r.unbind()),(o=this.editorRenderer)==null||o.close(),(i=this.subscription)==null||i.close(),this.layerUpdater.close()}onBack(e){var o;let r=!this.props.store.screenSharingState;((o=this.editorRenderer)==null?void 0:o.screenSharingRootCards(this.props.card))&&(r=!0,this.stopScreenSharing(this.props.store)),this.props.store.reduce(lo(),Pr(void 0),$y({deleted:e,updateEditorState:r}))}render(){var c,d,u,p;let e=window.innerWidth,r=window.innerHeight,o=this.state.store.selectedTool===Ge.Finger&&this.state.store.activeFingerTool==="laser",i=this.selectTextEditableCard(),s=(d=(c=this.editorRenderer)==null?void 0:c.toolOpacity)!=null?d:1,a=this.state.store.quizView&&this.props.card.getCard(this.state.store.quizView.cardId),l=this.state.store.attendanceView&&this.props.card.getCard(this.state.store.attendanceView.cardId);return Ss.createElement("div",{style:{position:"fixed",top:0,left:0,minWidth:"100%",minHeight:"100%",background:pn({...Sy,a:s*255}).toRGBAHex()}},Ss.createElement("canvas",{ref:this.canvas,className:"canvas",style:{width:`${e}px`,height:`${r}px`},width:e*window.devicePixelRatio,height:r*window.devicePixelRatio}),o&&this.canvas.current&&Ss.createElement(ml,{canvasSize:this.canvas.current,callback:this.laserLayerCallback,consumer:(u=this.editorRenderer)==null?void 0:u.laserPointerConsumer}),i&&this.editorRenderer&&Ss.createElement(ZC,{ref:this.editorText,store:this.props.store,editorStore:this.state.store,callback:this,rootCard:this.props.card,card:i,delegate:{renderRect:()=>this.renderRect(i)},playManager:this.editorRenderer.playManager}),Ss.createElement(Vr,{className:"centralizedModalWrapper",open:this.state.store.addUrlDialogOpen,overlay:!0,onClose:()=>this.state.store.setAddUrlDialogOpen(!1)},Ss.createElement(g2,{store:this.props.store,invokeType:$m.Edit,onCreate:h=>{this.updateWebcardUrlAndThumbnail(this.editingCard,h)},onDismiss:()=>this.state.store.setAddUrlDialogOpen(!1)})),this.editorRenderer&&Ss.createElement(Ss.Fragment,null,Ss.createElement(L2,{store:this.props.store,editorStore:this.state.store,card:this.props.card,focusingCard:this.editingCard,drawToolDispatcher:this.editorRenderer,textActionDispatcher:this.editorText.current||rRe(),getEditorRenderer:()=>this.editorRenderer,opacity:s,playManager:this.editorRenderer.playManager,editorHeaderDispatcher:{onTextButtonClicked:this.onTextButtonClickedInHeader},onBack:h=>this.onBack(h)}),this.state.store.quizView&&a instanceof zr&&Ss.createElement(np,{card:a,store:this.props.store,editorRendererState:()=>{var h;return(h=this.editorRenderer)==null?void 0:h.getFullScreenSharingState()},onClosing:()=>this.state.store.setQuizView({card:a,mode:"closing"}),onDismiss:this.onQuizCardFrameContainerDismiss,viewMode:this.state.store.quizView.mode,updateCoverDataBeforeUnload:((p=a.content.quiz_author)==null?void 0:p.id)===String(this.props.store.userInfo.user_id)}),this.state.store.attendanceView&&l instanceof an&&Ss.createElement(op,{card:l,editorRendererState:()=>{var h;return(h=this.editorRenderer)==null?void 0:h.getFullScreenSharingState()},onDismiss:this.onAttendanceCardFrameContainerDismiss,viewMode:this.state.store.attendanceView.mode,updateCoverDataBeforeUnload:this.props.store.userInfo.is_teacher}),this.state.store.selectedTool!==Ge.Text&&this.state.store.quizView===void 0&&this.state.store.attendanceView===void 0&&Ss.createElement(ep,{card:this.props.card,editorStore:this.state.store,store:this.props.store,screen:this.props.store.screen,editable:!0,onCardSelected:h=>{this.props.store.reduce(xf(h.id))},opacity:s,cardRendererCallback:this.cardRendererCallback,playManager:this.editorRenderer.playManager})))}renderRect(e){let r=new ft;if(this.editorRenderer){let o=window.devicePixelRatio;r=this.editorRenderer.getCardTransform().scale(1/o)}return r.applied(e.bounds)}onTextSelectionChange({caretRect:e,selectionRange:r,compositionRange:o}){let i=this.editorRenderer;if(!i||!Dt(i.card,i.callback))return;let a=this.editingCard,l=Dt(a,i.callback);if(!!l&&(l.setTextSelectedRange(r),l.setTextCompositionRange(o),this.ensureTextCaretVisible(),this.state.store.selectedTool===Ge.Text&&e)){let c=i.getCardTransform().scale(1/window.devicePixelRatio).invert().applied(e);We(eE(a.id,this.props.store.userInfo,c))}}onTextUndoHistoryChange({canUndo:e,canRedo:r}){this.state.store.setTextHistoryTool({canUndo:e,canRedo:r})}onTextBlur(){this.state.store.setTool(Ge.Finger)}onTypingAttributeChange(e){this.state.store.setTypingAttributes(e)}copyTextCard(e){var o,i;(o=this.editorRenderer)==null||o.clearCardModificationMonitor();let r=this.props.card.id===e;(i=this.editorText.current)==null||i.reset(),Nt(new Kg(e,r))}updateTextEditorFocus(e,r){let o=this.editorText.current;if(!!o&&e!==r)if(e===Ge.Text)o.focus();else{for(let i of this.props.card.familyIterator()){let s=Dt(i,this.cardRendererCallback);s.setTextSelectedRange(void 0),s.setTextCompositionRange(void 0)}o.blur()}}ensureTextCaretVisible(){let e=this.editorText.current,r=this.editorRenderer;if(!e||!r||this.state.store.selectedTool!==Ge.Text)return;let o=e.currentCaretRect;if(!o)return;let i=this.editingCard,s=r.rectEditorToScreen(nt(i.bounds.x,i.bounds.y)),a=nt(o.x+s.x,o.y+s.y,o.width,o.height);r.ensureTextCaretVisible(a)}onEditableTextCardClicked(e,r){var i;if(e.id!==this.editingCard.id){let s=Dt(this.editingCard,this.cardRendererCallback);s.setTextSelectedRange(void 0),s.setTextCompositionRange(void 0)}let o=this.editorRenderer.boundingBoxRectToScreen(e.bounds);this.props.store.reduce(Uo({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:o}),cr(!1),Pr(void 0)),this.state.store.setTool(Ge.Text),(i=this.editorText.current)==null||i.moveCaretTo(r)}};W2.contextType=su;function XT(t,e){switch(t){case"test":return e.helpPageLinkForQuizCardTest;case"survey":return e.helpPageLinkForQuizCardSurvey}}function QT(t,e){return t?e.helpPageLinkForAttendanceCardTeacher:e.helpPageLinkForAttendanceCardStudent}function rRe(){return{toggleVertical(){},undo(){},redo(){},changeColor(t){},toggleBoldface(){},changeListStyle(){},changeLineHeightMultiple(t){},changeAlignment(t,e){},changeTextSize(t,e){},copyTextCard(t){},selectWordAt(t){},fontSizeInputWillFocus(){},fontSizeInputDidBlurred(){},fontSizeDidChanged(t,e){}}}function pie(t,e){let{selectedTool:r,narrationRecording:o,addCardDialogOpen:i,addUrlDialogOpen:s,quizView:a,attendanceView:l}=e;return!(r!==Ge.Finger&&r!==Ge.Recording||o||i||s||a||l||Ks(t)||Ly(t)||t.screenSharingState)}var as=X(he());var i8=X(on());var Sb=class{constructor(e,r){this.note=e;this.root=r}getCard(e){return this.root.getCard(e)}renderingOrderIterator(){return this.root.renderingOrderIterator()}bubblingOrderIterator(){return this.root.bubblingOrderIterator()}*rootChildrenIterator(){yield this.root}bringCardTreeToFront(e,r){this.note.bringCardTreeToFront(e,r)}cardsIntegrity(){return this.note.cardsIntegrity()}zOrderIntegrity(){return this.note.zOrderIntegrity()}};var JT=class{constructor({from:e,to:r,pivot:o,duration:i,easing:s}){this.mat=hr.create();this.duration=0;this.elapsed=0;this.from=e,this.to=r,this.pivot=o,this.duration=i,this.easing=s,this.zoom=e}update(e){this.elapsed+=e;let r=this.elapsed;this.elapsed>=this.duration&&(r=this.duration);let o=this.easing(r,this.duration,this.to-this.from,this.from),i=o/this.zoom,s=-this.pivot.x*i+this.pivot.x,a=-this.pivot.y*i+this.pivot.y;return this.mat[0]=i,this.mat[5]=i,this.mat[12]=s,this.mat[13]=a,this.zoom=o,this.mat}current(){return this.mat}get finished(){return this.elapsed>=this.duration}};var n8=class extends yh{initInternal(e){super.initInternal(e),Yu(this.color,Sy)}layout(e){let r=this.engine.camera,o=hr.copy(fn(),r.vMtx);o[12]-=e.width/2,o[13]-=e.height/2,this.setMtx(hr.invert(o,o)),this.width=e.width,this.height=e.height}};var j2=new eb(5),o8=class extends _r{constructor(e){super();this.cardLayer=new Od;this.layouter=new dT(this);this.minZoom=.1;this.fitZoom=Math.sqrt(1/2);this.maxZoom=16;this.parentView=void 0;this.prevCardView=void 0;this.parentBgView=new n8;this.scroller=new Uu;this.animator=new tT;this.rootCardMonitor=s2();this.parentStack=[];this.zoomMarker=Ac();this.gestureRecognizer=new zd;this.closed=!1;this.fineStrokeRenderer=new PT;this.sizePool=new N4(5);this.insetsPool=new B4(5);this.zoomTimer=fw();this.toolbarTimer=fw();this.fineRedrawStrategy="redraw";this.swipeHandled=!1;this.updateCardView=ii(function(e,r,o){var g,v;let i=r.prevCardOrGroup,s=r.nextCardOrGruop,a=r.parent,l=o.prevCardOrGroup,c=o.nextCardOrGruop,d=o.parent;function u(){l?e.prevCardView=new Ch(l,new Sb(e.note,l),e.callback):e.prevCardView=void 0}function p(){e.cardView=new Ch(o,new Sb(e.note,o),e.callback)}function h(){c?e.nextCardView=new Ch(c,new Sb(e.note,c),e.callback):e.nextCardView=void 0}if(o===i){(g=e.nextCardView)==null||g.removeFromParent();let{cardView:y,prevCardView:S}=e;u(),e.cardView=S,e.nextCardView=y}else if(o===s){(v=e.prevCardView)==null||v.removeFromParent();let{nextCardView:y,cardView:S}=e;e.prevCardView=S,e.cardView=y,h()}else d===r?e.parentView=e.cardView:o===a&&(d?e.parentView=new Ch(d,new Sb(e.note,d),e.callback):e.parentView=void 0),u(),p(),h();e.cardLayer.clearChildren();let f=0,m=[e.parentView,e.parentBgView,e.prevCardView,e.nextCardView,e.cardView];for(let y of m)!y||e.cardLayer.addChildAt(y,f++)});this.currentViewEffect=ii(function(e,r){return r.responder.addGestureRecognizer(e.gestureRecognizer),()=>r.responder.removeGestureRecognizer(e.gestureRecognizer)});this._viewportSize=Ze();this.rootCardEffect=ii(function(e,r,o){o?e.rootCardMonitor.set(r):e.rootCardMonitor.update(r)});this.handleWheel=e=>{e.stopPropagation(),e.preventDefault(),this.animator.delete("zoom"),this.scroller.abortAnimation();let r=gm({ev:e,minZoom:this.fitZoom*.9,maxZoom:this.maxZoom,zoom:this.camera.zoom,invert:this.state.store.userPreference.invertMouseWheel,multiplier:this.state.store.userPreference.mouseWheelMultiplier}),o=fn();hr.mul(o,Fm(o,r),this.camera.vMtx);let{left:i,right:s,top:a,bottom:l}=this.getScrollLimit(this.insetsPool.use(0),this.camera.zoom);this.camera.zoom=o[0],this.camera.tx=ht(o[12],i,s),this.camera.ty=ht(o[13],a,l),this.zoomTimer.set(this.zoomCommitted,250),this.state.store.reduce(cr(!1),Pr(void 0))};this.zoomCommitted=()=>{let e=this.fitZoom+(1-this.fitZoom)/2,r=this.camera.zoom;r<=e?this.animator.set("zoom",new JT({from:r,to:this.fitZoom,easing:Fo,duration:250,pivot:{x:0,y:0}})):r<=1&&this.animator.set("zoom",new JT({from:r,to:1,easing:Fo,duration:250,pivot:{x:0,y:0}})),this.state.editorStore.setZoom(r),this.zoomMarker.mark(),this.invalidateMipmap()};this.note=e.note,this.playManager=e.playManager;let r=this;this.laserPointerConsumer={pushPoint(i){var s;(s=r.fullScreenSharingProvider)==null||s.pushPoint(i)}};let o=e.state.card;this._card=o,this.callback=e.callback,this.cardPlacer=new sv(this.card),this.cardView=new Ch(o,new Sb(e.note,o),e.callback),this._state=e.state,this.role=e.role}get card(){return this._card}get canvas(){return this.engine.canvas}get strokeManager(){let e=this.role.drawnType;return To.get(e,this.card)}get width(){return this.canvas.width}get height(){return this.canvas.height}initInternal(){this.addChild(this.cardLayer,this.layouter),this.updateCardView(this,this.card,this.card),this.resetTransform(),this.engine.canvas.addEventListener("wheel",this.handleWheel),this.gestureRecognizer.onPan=this,this.gestureRecognizer.onUp=this,this.gestureRecognizer.onSwipe=this,this.gestureRecognizer.onTap=this,this.gestureRecognizer.onDoubleTap=this,this.gestureRecognizer.onLongPress=this,this.setCard({card:this.card,mtx:new ft(1,0,0,1,this.width/2,this.height/2),forceInit:!0}),this.restoreParentStack(this.state.viewStack),this.onNextState(this.state)}resetTransform(){this.camera.tx=this.width/2,this.camera.ty=this.height/2}handleTapGesture(e){this.state.store.reduce(lo(),Pr(void 0))}handleLongPressGesture(e){let r={x:e.x,y:e.y};this.state.store.reduce(cr(!1),Pr(r))}handleDoubleTapGesture(e){var o,i;let r=this.state.store.editor;if(!!r)if(fi(this.card))this.state.editorStore.selectedTool===Ge.Text&&((i=(o=this.state.store.desktop)==null?void 0:o.focusingCard)==null?void 0:i.id)===this.card.id||this.state.editorStore.setTool(Ge.Text);else{let s=r[r.length-1].cardId,a=new Fa({cardId:s,color:rn(),backcolor:Ra,position:Re(e.x,e.y),unmodified:!0});this.onTextCardDroppedInSelf(a),this.state.editorStore.setTool(Ge.Text)}}handlePanGesture(e,r,o){var a;this.moveMode||(this.moveMode=this.judgeMoveMode(e));let i=o.camera.screenToCanvasScale();this.updateMtxTransition(e.dx*i,e.dy*i),Math.hypot(e.totalMovementX,e.totalMovementY)>5&&((a=this.state.store.desktop)==null?void 0:a.popoverOpen)&&this.state.store.reduce(cr(!1))}handleSwipeGesture(){this.handlePagerOnTouchUp(!0),this.swipeHandled=!0}handleUpGesture(e){if(this.swipeHandled||this.handlePagerOnTouchUp(!1),!this.animator.has("translate")&&!this.state.documentLoading){let r=Gu(e,.5);this.startBounceAnimation(r)}this.swipeHandled=!1,this.moveMode=void 0}handlePagerOnTouchUp(e){let r=this.getOverScrollAmount(this.camera.tx,this.camera.ty,this.camera.zoom);if(this.moveMode==="horizontal"){let o=e||r.left>=this.width/2||r.right>=this.width/2;o&&r.right>0&&this.hasNext?this.startPager({dir:"forward"}):o&&r.left>0&&this.hasPrev&&this.startPager({dir:"backward"})}else this.moveMode==="vertical"&&(e||this.camera.zoom<=1&&r.top>=this.height/2)&&this.startPopStackAnimation()}layout(){let{desktop:e}=this.state.store,r=this.backgroundAlpha();this.parentBgView.layout(this.canvas),this.parentBgView.visible=this.parentView!=null,this.parentBgView.alpha=r;let o=[];(e==null?void 0:e.hoverCardId)&&o.push(e.hoverCardId);let i=[];(e==null?void 0:e.heldCard)&&i.push(...e.heldCard.all);let s=this.zoomMarker.drain(),a=(f,m,g)=>{var b,x,w,k;let y={state:ch({canvas:this.engine.canvas,viewport:this.viewportSize(),root:m,visibleRect:void 0,cardRendererCallback:this.callback,fineRedrawStrategies:void 0,fineStrokeRenderer:this.fineStrokeRenderer,focusingCardId:(x=(b=this.state.store.desktop)==null?void 0:b.focusingCard)==null?void 0:x.id,textEditingCardId:(w=this.textEditingCard)==null?void 0:w.id,hoverCardIds:o,heldCardIds:i,assetUplaodStates:this.state.store.assetUploadStates,assetThumbUploadStates:this.state.store.assetThumbnailUploadStates,toolVisible:this.role.enableCardEditTool&&this.state.editorStore.toolVisible&&!((k=this.state.store.screenSharingState)==null?void 0:k.sessionId),ignoreFavorites:this.decorateFavorites===!1||!this.state.editorStore.toolVisible,ignoreAnnotations:this.state.editorStore.hideAnnotation,dpr:devicePixelRatio}),transformCommitted:s},S=Cn(this.engine.canvas,m.bounds),C=j2.use(0);C[0]=S,C[5]=S,C[12]=-m.localPosition.x*S,C[13]=-m.localPosition.y*S,hr.mul(C,g,C),f.setMtx(C),f.layout(y)},l=this.card.prevCardOrGroup,c=this.card.nextCardOrGruop,d=this.card.parent,u=()=>{let{mtx:f}=this.parentStack[this.parentStack.length-1],m=j2.use(2);return hr.invert(m,this.camera.vMtx),hr.mul(m,m,Fm(fn(),f)),m},p=1/this.camera.zoom,h=f=>{let m=j2.use(2);m[0]=p,m[5]=p;let g=j2.use(3);return g[12]=f,g[13]=this.height/2-this.camera.ty,hr.mul(m,m,g),m};if(this.parentView&&d){let f=u();a(this.parentView,d,f)}if(this.prevCardView&&l){let f=this.getDistanceToAdjacentCard(l),m=h(-f);a(this.prevCardView,l,m)}if(this.cardView&&a(this.cardView,this.card,hI),this.nextCardView&&c){let f=this.getDistanceToAdjacentCard(c),m=h(f);a(this.nextCardView,c,m)}}viewportSize(){return js(this._viewportSize)}get state(){return this._state}getCardSizeOnCanvas(e,r,o){let i=Cn(this.engine.canvas,r.size)*o;return Fx(e,r.size.width*i,r.size.height*i)}initialMatrix(){return new ft(1,0,0,1,this.width/2,this.height/2)}createCardsInsertionCommand(e,r){let o=this.getCardTransform(),i=Ut(r),s={id:r.user_id,name:i};return jP({mtx:o,ev:e,author:s,firedCard:this.card})}onTextCardDroppedInSelf(e){let r=this.createCardsInsertionCommand(e,this.state.store.userInfo),o=r.cards[0].id;if(this.cardInsertionEvent={cardId:o,type:"inside"},We(r),e.unmodified){let i=this.card.getCard(o);if(i){let{id:s,lastModified:a}=i;this.modificationMonitoredCard={id:s,lastModified:a}}}}createDroppedSheet(e){let r=this.state.store,o=Lm(e.sheetType),[i]=o.split("/").splice(-1,1),[s,a]=i.split("."),l=window.devicePixelRatio,c=this.getCardTransform().invert().cross(e.position.x*l,e.position.y*l),d=xr(di,Gt);return Rl({author:{id:r.userInfo.user_id,name:Ut(r.userInfo)},asset:{description:s,extension:a},position:c,pageIndex:0,pageSize:{...di},layoutSize:d,usage:"thinking_tool"})}onSheetDropped(e){this.cardInsertionEvent={cardId:e.id,type:"inside"};let r=e.metadata.position.left,o=e.metadata.position.top;We(Pf({creator:this.card,card:e,type:"inside",position:{x:r,y:o},ignoreTransition:!0}))}onCardInsertedInSelf(e){this.cardInsertionEvent={cardId:e.card.id,type:e.type};let r=this.cardPlacer.add(e.card.metadata.layout_size,!1),o=Or(r);this.card.pinned&&e.type==="next"&&We(qs(this.card.id,!1)),We(Pf({creator:this.card,card:e.card,type:e.type,position:o}))}adjustViewport(e){if(!this.callback.getCardOnNote||!e.transitions||e.transitions.length===0)return;let r=xm(e.transitions,this.callback.getCardOnNote);if(!r)return;let o=new go(this.viewportRect()),i=wm({viewport:o,inflate:new go(r)}),s=Tm(o,i,this.canvas);if(!s)return;let a=Ho(this.card.bounds),l=100*a,c=Math.max(o.height/(i.height+l),o.width/(i.width+l)),d=Math.max(this.camera.zoom*c,this.minZoom);this.animator.set("zoom",new JT({from:this.camera.zoom,to:d,duration:300,pivot:s,easing:Fo})),this.invalidateMipmap()}viewportRect(){let e=Cn(this.canvas,this.card.size),r=new ft().translate(-this.card.position.x,-this.card.position.y).scale(e).prependMatrix(Ga(this.camera.vMtx)).invert(),o=nt(0,0,this.canvas.width,this.canvas.height);return r.applied(o)}async onWebCardInserted(e){let{store:r}=this.state,{url:o,thumbnailFile:i}=e,s=await $o.fromFile(i),a=no.get(hi(i)),[l]=s.getLayoutSize(),c,d;if(e instanceof Al){let h=window.devicePixelRatio;c=this.getCardTransform().invert().cross(e.position.x*h,e.position.y*h),d=!1}else{let h=this.cardPlacer.add(l,!1);c=Or(h),d=!0}let u=r.userInfo,p=KP({creator:this.card,author:{id:u.user_id,name:Ut(u)},url:o,position:c,contentSize:l,isTransition:d});this.cardInsertionEvent={cardId:p.cards[0].id,type:"inside"},eo(r,{file:i,metadata:s.getMetadata(),description:e.title,extension:a,cardIdList:[p.cards[0].id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(p)}async onWebCardInsertedFromQr(e){let{store:r}=this.state,{created:o,type:i,thumbnail:s}=e,[a]=s.getLayoutSize(),l=this.cardPlacer.add(a,!1),c=Or(l);this.card.pinned&&i==="next"&&We(qs(this.card.id,!1));let d=Pf({creator:this.card,card:o,position:c,type:i});this.cardInsertionEvent={cardId:d.cards[0].id,type:i};let u=no.get(hi(s.file));eo(r,{file:s.file,metadata:s.getMetadata(),extension:u,cardIdList:[d.cards[0].id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(d)}async onPictureCardCreateFromExtension(e){let{store:r}=this.state,o=r.userInfo,i=e.file,s=await $o.fromFile(i),a=no.get(hi(i)),[l]=s.getLayoutSize(),c=this.cardPlacer.add(l,!1),d=Or(c),u=qP({creator:this.card,author:{id:o.user_id,name:Ut(o)},position:d,asset:{description:s.name,extension:a},contentSize:l});this.cardInsertionEvent={cardId:u.cards[0].id,type:"inside"},eo(r,{file:i,metadata:s.getMetadata(),extension:a,cardIdList:[u.cards[0].id],thumbnailsGenerator:()=>s.generateThumbnails()}),We(u)}async onLocalFileInserted(e){let{store:r}=this.state,[o]=e.file.getLayoutSize(),i=e.file instanceof Is,s=this.cardPlacer.add(o,i),a=Or(s);this.card.pinned&&e.type==="next"&&We(qs(this.card.id,!1));let l=d0({creator:this.card,type:e.type,position:a,user:r.userInfo,file:e.file}),c=e.file.getMetadata();eo(r,{file:e.original,metadata:c,extension:e.file.extension,cardIdList:l.cards.map(d=>d.id),thumbnailsGenerator:()=>e.file.generateThumbnails()}),this.cardInsertionEvent={cardId:l.cards[0].id,type:e.type},We(l)}async onLocalFilePasted(e){let r=await Vf(e.files),o=await Promise.all(r.map(Pu));if(o.some((l,c)=>{if(l instanceof zi){let d=e.files[c];return Om(d,l)}})){let l=De.get().strings;if(!confirm(l.exceedVideoQuality))throw new mc("abort video-file uploading.")}let s=this.state.store.userInfo,a=this.state.store;for(let l=0;l<r.length;l++){let c=o[l],[d]=c.getLayoutSize(),u;if(l===0&&e.position){let g=window.devicePixelRatio,v=this.getCardTransform().invert().cross(e.position.x*g,e.position.y*g);u=this.cardPlacer.set(v,d)}else{let g=c instanceof Is&&c.pageSizes.length>1;u=this.cardPlacer.add(d,g)}let p=Or(u),h=d0({creator:this.card,type:"inside",file:c,user:s,position:p,ignoreTransition:e.position!==void 0}),f=c.getMetadata(),m=h.cards.map(g=>g.id);eo(a,{file:r[l],metadata:f,extension:c.extension,cardIdList:m,thumbnailsGenerator:()=>c.generateThumbnails()}),We(h)}}onNoteEffect(e){var i,s;let r=e.command,o=e.byOtherUserId==null;if(r.type==="cardsInserted"){let[a]=r.cards;if(this.cardInsertionEvent&&a.id===this.cardInsertionEvent.cardId){let l=this.cardInsertionEvent;if(this.cardInsertionEvent=void 0,l.type==="inside"){let{left:c,top:d}=a.metadata.position,{width:u,height:p}=a.metadata.layout_size;this.state.store.reduce(Uo({id:a.id,favorite:!1,pinned:!1,canPin:!0,canAlign:!1,canRotate:a.type==="picture",bounds:this.boundingBoxRectToScreen(nt(c-u/2,d-u/2,u,p))}),cr(!1),Pr(void 0)),this.adjustViewport(r)}else this.startPager({dir:"forward"})}else((i=r.transitions)==null?void 0:i.some(l=>l.cardId===this.card.id))&&this.cardPlacer.reset()}else if(r.type==="cardDeleted")if(r.cardId===this.card.id)if(r.toCardId&&this.callback.getCardOnNote){let a=this.callback.getCardOnNote(r.toCardId);if(!a)throw new Error("can not found card on note");this.setCard({card:a}),this.callback.onCardSelected(a)}else this.popPage(!0);else this.card.isDescendantOf(r.cardId)&&this.popPage(!0);else if(r.type==="groupDeleted")(e.effect.deleted.includes(this.card.id)||e.effect.deleted.some(a=>this.card.isDescendantOf(a)))&&this.popPage(!0);else if(r.type==="cardMoved")!o&&r.cardId===this.card.id&&this.cardPlacer.reset();else if(r.type==="groupMoved")!o&&r.topOfGroup===this.card.head().id&&this.cardPlacer.reset();else if(r.type==="cardsCopied"){if(!o){((s=r.transitions)==null?void 0:s.some(l=>l.cardId===this.card.id))&&this.cardPlacer.reset();return}let a=this.card.getCard(r.srcCardId);r.isRootCard?r.grouped?this.popPage(!1):a.pinned?this.popPage(!1):this.startPager({dir:"forward",activateTextEditor:r.activateTextEditor}):this.adjustViewport(r)}else r.type==="cardSizesChanged"?!o&&r.firedCardId===this.card.id&&this.cardPlacer.reset():r.type==="cardMarginsChanged"?!o&&r.cardId===this.card.id&&this.cardPlacer.reset():r.type==="groupStateChanged"}clearCardModificationMonitor(){let e=this.modificationMonitoredCard;return this.modificationMonitoredCard=void 0,e}getCardTransformInTransform(e,r){let o=new ft;return o.scale(Cn(this.engine.canvas,e.size)),o.e=-e.position.x*o.a,o.f=-e.position.y*o.d,o.prependMatrix(r),o}getCardTransform(){return this.getCardTransformInTransform(this.card,Ga(this.camera.vMtx))}judgeMoveMode(e){if(!e.down)return;let r=this.camera.screenToCanvasScale(),o=e.x-e.down.x,i=e.y-e.down.y,s=5*r;if(Math.abs(o)<s&&Math.abs(i)<s)return;let{selectedTool:a}=this.state.editorStore;if(Math.abs(o)<Math.abs(i)&&i>0&&a!==Ge.Text){if(this.camera.zoom<=1)return this.canLeave()?"vertical":"horizontal"}else{if(Math.abs(o)<Math.abs(i)||!this.role.canLeave)return"free";{let l=this.getOverScrollAmount(this.camera.tx+o,this.camera.ty+i,this.camera.zoom);if(l.left>0&&o>0&&this.hasPrev||l.right>0&&o<0&&this.hasNext)return"horizontal"}}return"free"}canLeave(){let e=this.role.canLeave;return e&&ev(this.state.store)&&(e=!this.rootCardMonitor.rootCards(this.card)),e}get hasPrev(){var e,r;return this.card.hasPrevCardOrGroup||((r=(e=this.documentPagerDelegate)==null?void 0:e.hasPreviousDocument())!=null?r:!1)}get hasNext(){var e,r;return this.card.hasNextCardOrGroup||((r=(e=this.documentPagerDelegate)==null?void 0:e.hasNextDocument())!=null?r:!1)}getScrollLimit(e,r){let o=this.getCardSizeOnCanvas(this.sizePool.use(0),this.card,r),i=this.camera.screenToCanvasTransform()[0],s=Fx(this.sizePool.use(1),this.width,this.height-this.state.screen.keyboardHeight*i),a,l;s.width<o.width?(a=s.width-o.width/2,l=o.width/2):a=l=s.width/2;let c,d;return s.height<o.height?(c=s.height-o.height/2,d=o.height/2):c=d=s.height/2,E_(e,a,c,l,d)}getOverScrollAmount(e,r,o){let{left:i,right:s,top:a,bottom:l}=this.getScrollLimit(this.insetsPool.use(0),o),c=Math.max(0,e-s),d=Math.max(0,i-e),u=Math.max(0,r-l),p=Math.max(0,a-r);return{left:c,top:u,right:d,bottom:p}}updateMtxTransition(e,r){let{tx:o,ty:i,zoom:s}=this.camera;if(this.moveMode==="horizontal")o+=e,this.camera.tx=o;else if(this.moveMode==="vertical")i+=r,i<this.height/2&&(i=this.height/2),this.camera.ty=i;else if(this.moveMode==="free"){let a=this.getOverScrollAmount(o+e,i+r,s),l;a.left===0&&a.right===0?l=1:l=.2;let c;a.top===0&&a.bottom===0?c=1:c=.2,o+=e*l,i+=r*c,this.camera.tx=o,this.camera.ty=i,l===1&&c===1&&this.updateFullScreenSharing()}}startPager(e){let{dir:r,activateTextEditor:o,byKey:i}=e;this.state.editorStore.setEditorMoveMode("horizontal"),r==="forward"?($e(this.hasNext),this.card.hasNextCardOrGroup?this.startCardPager({dir:r,activateTextEditor:o,byKey:i}):this.startDocumentPager(r)):($e(this.hasPrev),this.card.hasPrevCardOrGroup?this.startCardPager({dir:r,activateTextEditor:o,byKey:i}):this.startDocumentPager(r))}startCardPager(e){let{dir:r,activateTextEditor:o,byKey:i}=e,s=500,a=Re(this.camera.tx,this.camera.ty),l=this.height/2;if(r==="forward"){let c=this.card.next||this.card.nextGroup;if(!c)return;if(i){this.forwardPage();return}let d=this.width/2-this.getDistanceToAdjacentCard(c),u=Re(d,l),p=ea(a,u,s,Fo);this.animator.set("translate",new Gl(p,r,!!o))}else if(r==="backward"){let c=this.card.prev||this.card.prevGroup;if(!c)return;if(i){this.backwardPage();return}let d=this.width/2+this.getDistanceToAdjacentCard(c),u=Re(d,l),p=ea(a,u,s,Fo);this.animator.set("translate",new Gl(p,r,!!o))}}startDocumentPager(e){var r,o;e==="forward"?(r=this.documentPagerDelegate)==null||r.onDocumentSelected("next"):e==="backward"&&((o=this.documentPagerDelegate)==null||o.onDocumentSelected("prev"))}getDistanceToAdjacentCard(e){let r=this.getCardSizeOnCanvas(this.sizePool.use(0),this.card,this.camera.zoom),o=this.getCardSizeOnCanvas(this.sizePool.use(1),e,1),i=this.camera.screenToCanvasScale(),{width:s}=this.engine.canvas,a=20*i,l=Math.max(a,(s-r.width)/2),c=Math.max(a,(s-o.width)/2),d=Math.max(0,l+c);return r.width/2+d+o.width/2}startPopStackAnimation(){if(!this.canLeave())return;this.state.store.reduce(zo(!0)),this.card.parent&&this.state.editorStore.setToolVisible(!0),this.state.editorStore.setEditorMoveMode("vertical");let e=this.height*1.5;this.animator.set("translate",new ul(ea(Re(this.camera.tx,this.camera.ty),Re(this.camera.tx,e),250,Fo)))}startBounceAnimation(e){if(this.animator.has("translate"))return;let{tx:r,ty:o,zoom:i}=this.camera,s=this.getOverScrollAmount(r,o,i),a=250,l=r,c=o;if(s.left>0?l=r-s.left:s.right>0&&(l=r+s.right),s.top>0?c=o-s.top:s.bottom>0&&(c=o+s.bottom),l!==r||c!==o)this.animator.set("translate",ea(Re(this.camera.tx,this.camera.ty),Re(l,c),a,Fo));else{let d=Re(this.camera.tx,this.camera.ty),{left:u,right:p,top:h,bottom:f}=this.getScrollLimit(this.insetsPool.use(0),this.camera.zoom);this.animator.set("translate",Z0({start:d,velocity:e,minX:u,minY:h,maxX:p,maxY:f}))}}abortBounceAnimation(){let e=this.animator.get("translate");e instanceof Gl||e instanceof ul||this.animator.delete("translate")}hideTool(e){this.toolbarTimer.clear(),this.toolbarTimer.set(()=>{this.closed||this.state.editorStore.setToolVisible(!1)},e)}setToolVisible(e){this.toolbarTimer.clear(),this.state.editorStore.setToolVisible(e)}ensureTextCaretVisible(e){let r=this.camera.screenToCanvasScale(),o=20/r,i=nt(e.x-o,e.y-o,e.width+2*o,e.height+2*o),s=nt(0,0,this.width,Math.max(this.height-this.state.screen.keyboardHeight*r,0));if(_l(s,i))return;let l;i.x<s.x?l=s.x-i.x:s.x+s.width<i.x+i.width?l=s.x+s.width-(i.x+i.width):l=0;let c;i.y<s.y?c=s.y-i.y:s.y+s.height<i.y+i.height?c=s.y+s.height-(i.y+i.height):c=0;let d=.25;this.abortBounceAnimation(),!this.animator.has("translate")&&(l!==0||c!==0)&&this.animator.set("translate",ea(Re(this.camera.tx,this.camera.ty),Re(this.camera.tx+l,this.camera.ty+c),d,Fo))}get editingCard(){var r,o;let e=(o=(r=this.state.store.desktop)==null?void 0:r.focusingCard)==null?void 0:o.id;if(e){let i=this.card.getCard(e);if(i)return i}return this.card}get textEditingCard(){if(this.state.editorStore.selectedTool===Ge.Text)return this.editingCard}insertConnectionIfNeeded({ev:e,mtx:r,card:o}){var i;$e(o.parent!==void 0);for(let s of o.parent.children){if(s===o)continue;if(Dt(s,this.callback).getObjectUnderPoint({ev:e,mtx:r,focused:!1,toolVisible:!0})==="connection"){let c=s.isFolded?s.tail():s,d=(i=c.next)!=null?i:c.nextGroup;if($e(d!=null),o.canBeConnectedFrom(c)&&d.canBeConnectedFrom(o)){this.callback.onConnectorInserted(c,o,d);break}}}}drawToolPref(){let{prefs:e,activeTool:r,activePen:o}=this.card.document?this.state.store.userPreference.documentDrawToolPrefs:this.state.store.userPreference.cardDrawToolPrefs;return{penType:r==="pen"?o:r,pref:e[r]}}initDrawn(e,r,o){let i=r==="eraser"?this.camera.zoom:1,s=o.width/i,a=o.colors[o.activeColor];e.beginStroke({penType:r,width:s,color:pn(a),isRuler:o.activeRuler}),this.fineStrokeRenderer.clearCurrent(this.role.drawnType)}addDrawn({ev:e,sm:r,penType:o}){var u;let i=0;(o==="pen"||o==="brush")&&(Hu(e.original)?i=e.original.pressure:eC(e.original)&&(i=e.original.force));let s=this.strokeManager.unsafeCurrentStroke(),a=new ki,l=(u=e.coalescedPoints)!=null?u:[e];for(let p=0;p<l.length;p++){let h=l[p],f=r.addPoint(h.x,h.y,i);f&&a.add(f)}let c=Cn(this.canvas,this.card.size),d=new ft().scale(c).prependMatrix(Ga(this.camera.vMtx));this.fineStrokeRenderer.appendStroke({canvasSize:this.canvas,mtx:d,card:this.card,type:this.role.drawnType,stroke:s,isEraser:s.type==="eraser",rectUpdated:a.rect})}endDrawn(e){let r=this.strokeManager;this.fineStrokeRenderer.commitCurrent(this.role.drawnType),this.state.editorStore.setExecutableStrokeOperation(r.canUndo(),r.canRedo(),r.canClearAllStroke());let o=gr.get(this.card),i=this.card.createDrawnGeometry(this.role.drawnType),s=o[this.role.drawnType].redrawThumbnails({geometry:i,contents:r.packContents()});this.callback.onDrawnMarkedAsUnsaved({card:this.card,op:e,thumbs:s})}boundingBoxRectToScreen(e){let{x:r,y:o,width:i,height:s}=e,a=qu(r,o,i,s);return this.camera.worldToScreenBounds(a,a,this.cardView.rootToSelfModelMtx(fn())),nt(a[0],a[1],a[2],a[3])}startEnterAnimation(e,r){let o=nt(r.applied(e.bounds)),i=nt(0,0,this.canvas.width,this.canvas.height),s=ti(Or(i),Or(o)),a=this.width/2-s.x,l=this.height/2-s.y,c=nt(a-o.width/2,l-o.height/2,o.width,o.height),d=Cn(this.canvas,c);this.animator.set("enter",new A1({fromPos:Or(c),toPos:Or(i),fromScale:1/d,toScale:1,durationSec:300}))}startExitAnimation(e,r){this.animator.set("exit",new I1({card:e,baseMtx:r,fromScale:1,toScale:.75,durationSec:.3}))}handleKey(e){if(this.strokeManager.currentStroke||this.zoomTimer.isSet())return!1;let r=E0(),o=r&&e.metaKey||!r&&e.ctrlKey,i=this.state.editorStore.selectedTool===Ge.Draw;return e.key==="ArrowRight"&&this.hasNext?(this.startPager({dir:"forward",byKey:!0}),!0):e.key==="ArrowLeft"&&this.hasPrev?(this.startPager({dir:"backward",byKey:!0}),!0):e.key==="ArrowDown"&&this.camera.zoom<=1?(this.startPopStackAnimation(),!0):i&&this.state.editorStore.canUndoStroke&&e.key==="z"&&o&&!e.shiftKey?(this.undo(),!0):i&&this.state.editorStore.canRedoStroke&&e.key.toLowerCase()==="z"&&o&&e.shiftKey?(this.redo(),!0):!1}publishTrashBoxInIfNeeded(e){if(this.camera.zoom>=1)return;let{up:r,grouped:o,ev:i,renderer:s}=e,a=iP(i);if(r&&a==="editorTrashBox"){let l=Wl(s.card,o);confirm(l)&&(o?this.callback.onGroupDeleted(s.card):this.callback.onCardDeleted(s.card)),this.hitFixedUI=void 0,this.callback.onTrashBoxHit(!1)}else r?(this.hitFixedUI=void 0,this.callback.onTrashBoxHit(!1)):a!==this.hitFixedUI&&(this.hitFixedUI=a,this.callback.onTrashBoxHit(a!==void 0))}restoreParentStack(e){if(this.callback.getCardOnNote)for(let r=0;r<e.length-1;r++){let o=this.callback.getCardOnNote(e[r].cardId);o&&this.parentStack.push({card:o,mtx:this.initialMatrix()})}}onNextState(e,r){var l,c,d,u;let o=this.state;this._state=e,this.onPlaySyncStatusChanged(),this.role.enableFullScreenSharing&&this.onSharingStateChanged(o.store,this.state.store),il(o.screen,e.screen)||(r=r!=null?r:this.mtxKeepVisualCenter(o.screen,e.screen),this.updateFullScreenSharing(r)),r&&!r.equals(Ga(this.camera.vMtx))&&(this.camera.vMtx=Fm(this.camera.vMtx,r),this.abortBounceAnimation(),(ev(this.state.store)||!md(this.state.store)&&!this.state.store.screenSharingForPresenter)&&this.startBounceAnimation(new er(0,0)));let i=Dt(this.card,this.callback);i.player=e.editorStore.mediaPlayer;let s=this.card;if(o===e)e.viewStack[e.viewStack.length-1].animate&&this.startEnterAnimation(e.card,this.state.noteMtx),this.setCard({card:e.card,mtx:r});else if(o.viewStack.length>e.viewStack.length){this.playManager.pause(this.state.editorStore),this.startExitAnimation(this.card,Ga(this.camera.vMtx));let p=o.viewStack.length-e.viewStack.length,h;for(let f=0;f<p;f++)h=(l=this.parentStack.pop())==null?void 0:l.mtx;this.setCard({card:e.card,mtx:h})}else o.viewStack.length<e.viewStack.length?(this.parentStack.push({mtx:Ga(this.camera.vMtx),card:this.card}),this.playManager.pause(this.state.editorStore),e.viewStack[e.viewStack.length-1].animate&&this.startEnterAnimation(e.card,this.getCardTransform()),this.setCard({card:e.card,mtx:r})):s!==e.card&&this.setCard({card:e.card,mtx:r});e.editorStore.continuePlaying()&&e.editorStore.nextCardId!==this.card.id&&(md(e.store)?((c=e.store.screenSharingState)==null?void 0:c.presenter)===e.store.userInfo.user_id&&this.forwardPage():this.forwardPage());let a=(u=(d=this.card)==null?void 0:d.document)==null?void 0:u.id;a&&this.handleDocumentLayerUpdateNotification(a,o.store,e.store)}onPlaySyncStatusChanged(){var r;let{editorStore:e}=this.state;this.playManager.getAndClearNeedsUpdateFullScreenSharing()&&this.updateFullScreenSharing(),e.avEnded&&this.playManager.playEnded(),this.playManager.seeking&&this.updateFullScreenSharing(),((r=this.playManager)==null?void 0:r.rewind)&&this.playManager.endRewind(e)}onSharingStateChanged(e,r){var d,u,p,h,f,m;let o=(d=r.screenSharingState)==null?void 0:d.fullscreen,i=(u=r.screenSharingState)==null?void 0:u.sessionId,s=(p=r.screenSharingState)==null?void 0:p.presenter,a=(h=r.screenSharingState)==null?void 0:h.type,l=(f=e.screenSharingState)==null?void 0:f.sessionId,c=(m=e.screenSharingState)==null?void 0:m.type;if(i&&o&&(i!==l||a!==c||!s&&!this.fullScreenSharingProvider)&&this.initScreenSharing(o),l&&!i&&(this.rootCardMonitor.clear(),this.fullScreenSharingProvider=void 0,this.playManager.clearRemoteStatus()),r.screenSharingState){let g=r.screenSharingState.courseId,v=e.screenSharingActionNotification[g],y=r.screenSharingActionNotification[g];y&&(!v||v&&!Object.is(v,y))&&this.handleScreenSharingNotification(y)}e.screenSharingForPresenter&&!r.screenSharingForPresenter&&this.updateFullScreenSharing()}screenSharingRootCards(e){return this.rootCardMonitor.rootCards(e)}initScreenSharing(e){let r=this.state.editorStore;(r.selectedTool===Ge.Recording||r.selectedTool===Ge.Text)&&r.setTool(Ge.Finger),this.rootCardMonitor.set(this.card);let o=this.getFullScreenSharingState(),i={...e,...o};this.fullScreenSharingProvider=new U1(i,()=>this.state.store),this.playManager.setRemoteStatus(r,!0,o.isPlaying,o.playToken)}handleScreenSharingNotification(e){var r,o,i;if(xi(e)&&this.role.shouldSyncPlayController(this.state.store,e)){let{isPlaying:s,playToken:a}=e.fullscreen,l=e.fullscreen.zoom;l&&l.id===this.card.id&&(s=l.isPlaying,a=l.playToken),(r=this.playManager)==null||r.setRemoteStatus(this.state.editorStore,!0,s,a)}Mp(e)&&e.id===((o=this.state.store.screenSharingState)==null?void 0:o.sessionId)&&((i=this.playManager)==null||i.clearRemoteStatus(),this.rootCardMonitor.clear(),this.fullScreenSharingProvider=void 0,this.state.store.reduce(Zi(void 0),Co()))}handleDocumentLayerUpdateNotification(e,r,o){for(let i=0;i<this.card.memberCountOverGroup();i++){let s=Fp(e,i),a=r.documentAnnotationLayerUpdateNotification[s],l=o.documentAnnotationLayerUpdateNotification[s];a!==l&&l&&this.updateLayerAndThumb("annotation",l);let c=r.documentExtensionLayerUpdateNotification[s],d=o.documentExtensionLayerUpdateNotification[s];c!==d&&d&&this.updateLayerAndThumb("drawn",d)}}updateLayerAndThumb(e,r){var c,d;let{document:o,index:i,data:s}=r,a=To.forDocument(e,o,i),l=(c=a.getLayerMetadata())==null?void 0:c.generation;if(!l||s.generation>l){ge.log("updateLayerAndThumb:begin",e);let u=this.card.memberAt(i);((d=u==null?void 0:u.document)==null?void 0:d.id)===o&&a.updateDocumentLayer().then(p=>{ge.log("updateLayerAndThumb:done",p),p==="updated"&&(gr.forDocument(o,i,void 0)[e].redrawThumbnails({geometry:u.drawnGeometry(e),contents:a.packContents()}),this.state.store.reduce(Co()))})}}mtxKeepVisualCenter(e,r){let o=window.devicePixelRatio,i=Xt(e,o),s=Xt(r,o),a=yc(this.card.size,r),l=yc(this.card.size,e);if(a==null||l==null)return Ga(this.camera.vMtx);let{tx:c,ty:d,zoom:u}=this.camera,p=l!==0?a/l:0,h=c*p+(s.width-i.width*p)/2,f=d*p+(s.height-i.height*p)/2;return new ft(u,0,0,u,h,f)}initPdfRenderer(e){var r;(r=this.finePdfRenderer)==null||r.close(),this.finePdfRenderer=void 0,e instanceof Bs&&(this.finePdfRenderer=new yw({card:e,signalRedraw:()=>{}}))}setCard(e){var c,d;let{card:r,mtx:o,forceInit:i}=e,s=this.card;this._card=r;let a=(c=s.document)==null?void 0:c.id,l=(d=r.document)==null?void 0:d.id;a&&l&&a!==l?this.rootCardMonitor.set(r):this.rootCardMonitor.update(r),(i||s!==r)&&setTimeout(()=>{this.state.editorStore.setEditorMoveMode(void 0),this.state.editorStore.uninitializeAvSource(),this.playManager.playEnded();let u=Dt(s,this.callback);u.player=void 0,this.state.editorStore.initializeAvSource(r,this.state.store),this.playManager.pageChanged(this.state.editorStore,r),this.updateFullScreenSharing()},0),this.initPdfRenderer(r),r.gadgets.drawn||this.callback.onEnsureDrawnGadget(r),this.initStrokeManager(r),this.cardPlacer=new sv(r),this.invalidateMipmap(),this.state.store.reduce(lo()),this.updateCardView(this,s,r),this.currentViewEffect(this,this.cardView),this.zoomMarker.mark(),o?Fm(this.camera.vMtx,o):this.resetTransform()}initStrokeManager(e){let r=this.strokeManager,o=()=>{let a=e.drawnGeometry(this.role.drawnType),l=r.packContents();this.fineStrokeRenderer.redrawFineThumbnail({mtx:this.getCardTransform(),canvasSize:Ze(this.canvas),contents:l,geometry:a,type:this.role.drawnType,contentLocalBounds:this.card.contentLocalBounds,drawnLocalBounds:this.card.drawnLocalBounds(this.role.drawnType)}),this.state.editorStore.setExecutableStrokeOperation(r.canUndo(),r.canRedo(),r.canClearAllStroke())};r.updateTransformMatrix({canvasSize:this.canvas,mtx:Ga(this.camera.vMtx),card:this.card});let i=gr.get(e),s=["drawn","annotation"];for(let a of s)i[a].load("high",this.card).then(o)}invalidateMipmap(){Dt(this.card,this.callback).invalidateMipmapWithLevel("high");let e=this.getCardTransform().a;for(let r of this.card.familyIterator({withoutSelf:!0}))Dt(r,this.callback).invalidateMipmap(e)}forwardPage(){var e;if(this.card.hasNextCardOrGroup){let r=this.card,o=(e=r.next)!=null?e:r.nextGroup;$e(o),this.callback.onCardSelected(o)}}backwardPage(){var e;if(this.card.hasPrevCardOrGroup){let r=this.card,o=(e=r.prev)!=null?e:r.prevGroup;$e(o),this.callback.onCardSelected(o)}}popPage(e){this.callback.onPop(e)}backgroundAlpha(){let e=this.animator.get("enter");if(e)return e.current().alpha;if(this.camera.zoom>1)return 1;let r=this.animator.get("translate");if(this.moveMode!=="vertical"&&!(r instanceof ul))return 1;let o=this.state.viewStack.length>1?.5:1;return 1-(this.camera.ty-this.height/2)/this.height*o}get toolOpacity(){if(this.camera.zoom>1)return 1;let e=this.animator.get("translate");return this.moveMode!=="vertical"&&!(e instanceof ul)||this.state.viewStack.length>1?1:1-(this.camera.ty-this.height/2)/this.height}hasAnimation(){return!!(this.animator.has("translate")||this.animator.has("zoom")||this.animator.has("enter")||this.animator.has("exit"))}update(){this.animator.update(this.engine.deltaTime);let e=this.animator.get("zoom"),{tx:r,ty:o,zoom:i}=this.camera;if(e){let c=hr.mul(fn(),e.current(),this.camera.vMtx),{left:d,right:u,top:p,bottom:h}=this.getScrollLimit(this.insetsPool.use(0),this.camera.zoom);i=c[0],r=ht(c[12],d,u),o=ht(c[13],p,h),e.finished&&this.zoomMarker.mark()}let s=this.animator.get("translate");s&&(r=s.current().x,o=s.current().y,s.finished&&(s instanceof Gl?(s.direction==="forward"?this.forwardPage():this.backwardPage(),s.activateTextEditor&&this.state.editorStore.setTool(Ge.Text),i=1,r=this.width/2,o=this.height/2):s instanceof ul?(this.popPage(!1),r=this.camera.tx,o=this.camera.ty,i=this.camera.zoom):this.updateFullScreenSharing(new ft(i,0,0,i,r,o)),this.closed||this.state.editorStore.setEditorMoveMode(void 0)));let a=this.animator.get("enter");if(a){let c=a.current();i=c.scale,r=c.pos.x,o=c.pos.y,a.finished&&(this.updateFullScreenSharing(),this.zoomMarker.mark())}let l=this.animator.get("exit");l&&l.finished&&(this.updateFullScreenSharing(),this.zoomMarker.mark()),this.camera.tx=r,this.camera.ty=o,this.camera.zoom=i}close(){var e;(e=this.finePdfRenderer)==null||e.close(),this.state.editorStore.uninitializeAvSource(),this.closed=!0}runStrokeOperation(e){let o=((i,s)=>{switch(s){case"undo":return i.undo();case"redo":return i.redo();case"clearAll":return i.clearAllStroke();case"clearHistory":i.clearHistory()}})(this.strokeManager,e);if(o){let i=gr.get(this.card),s=this.strokeManager.packContents(),a=this.card.createDrawnGeometry(this.role.drawnType),l=i[this.role.drawnType].redrawThumbnails({geometry:a,contents:s});this.fineStrokeRenderer.clear(this.role.drawnType),this.fineRedrawStrategy="redraw",this.callback.onDrawnMarkedAsUnsaved({card:this.card,op:o,thumbs:l})}this.state.editorStore.setExecutableStrokeOperation(this.strokeManager.canUndo(),this.strokeManager.canRedo(),this.strokeManager.canClearAllStroke())}clear(){this.runStrokeOperation("clearAll")}redo(){this.runStrokeOperation("redo")}undo(){this.runStrokeOperation("undo")}updateFullScreenSharing(e){var c;if(!this.fullScreenSharingProvider||!((c=this.state.store.screenSharingState)==null?void 0:c.fullscreen)||this.state.documentLoading||this.state.store.screenSharingForPresenter||this.hasAnimation())return;let r=this.getFullScreenSharingState(e),{document:o,authorId:i,presentedWebURL:s,presentedQuizId:a,presentedAttendanceId:l}=this.state.store.screenSharingState.fullscreen;this.fullScreenSharingProvider.update({document:o,authorId:i,presentedWebURL:s,presentedQuizId:a,presentedAttendanceId:l,...r})}getFullScreenSharingState(e){var a;let r=(l,c)=>{var w,k,T,A;let d=c.indexOverGroup(),u=l.a,p=this.getCardSizeOnCanvas(this.sizePool.use(0),c,l.a),{width:h,height:f}=this.state.screen,m=window.devicePixelRatio,g={x:(h*m/2-(l.e-p.width/2))/p.width,y:(f*m/2-(l.f-p.height/2))/p.height},v=(k=(w=this.playManager)==null?void 0:w.remotePlaying)!=null?k:!1,y=(A=(T=this.playManager)==null?void 0:T.playToken)!=null?A:void 0,S=this.state.editorStore.avSeekTime,C=this.state.editorStore.avEnded,b=this.state.editorStore.avSpeedScale,x=this.state.editorStore.toolVisible;return{page:d,scale:u,center:g,isPlaying:v,playToken:y,currentTime:S,needsDecorateFavorite:x,isPlayEnded:C,playbackRate:b,zoom:void 0}},o=this.rootCardMonitor.get();if(!o){let l=this.card.rootParent();o=l.document?l:this.card}let i=(a=this.parentStack.find(l=>l.card.id===(o==null?void 0:o.id)))==null?void 0:a.mtx;i||(i=e!=null?e:Ga(this.camera.vMtx));let s=r(i,o);if(this.card.id!==o.id){let l=e!=null?e:Ga(this.camera.vMtx),{page:c,zoom:d,...u}=r(l,this.card);s.zoom={id:this.card.id,...u},s.currentTime=0,s.playToken=void 0,s.isPlaying=!1,s.playbackRate=1,s.isPlayEnded=!1}return s}updateFullScreenSharingDocument(e){var a,l,c,d;if(!this.fullScreenSharingProvider)return;let{document:r,page:o,authorId:i}=e,s={page:o,scale:1,center:{x:.5,y:.5},isPlaying:(l=(a=this.playManager)==null?void 0:a.remotePlaying)!=null?l:!1,playToken:(d=(c=this.playManager)==null?void 0:c.playToken)!=null?d:void 0,currentTime:0,needsDecorateFavorite:this.state.editorStore.toolVisible,isPlayEnded:!1};this.fullScreenSharingProvider.update({document:r,authorId:i,presentedWebURL:void 0,presentedQuizId:void 0,presentedAttendanceId:void 0,...s})}};var xb=X(he()),K2=({engine:t})=>{let[e,r]=(0,xb.useState)([]);return(0,xb.useEffect)(()=>(t.statManager.recorder.onFps=({fps:o,frameTimes:i,records:s})=>{let a=[],l=(d,u)=>u==="count"?Math.round(d):d.toFixed(2)+"ms";a.push("fps: "+o);let c=i.filter(d=>d>1e3/16);a.push("Over Frames: "+c.length+""),a=a.concat(Array.from(s).map(([d,{avg:u,std:p,unit:h}])=>`${d}: ${l(u,h)}`)),r(a)},()=>t.statManager.recorder.onFps=void 0),[t]),xb.default.createElement("div",{style:{position:"fixed",left:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",color:"white",width:400,height:200}},e.map((o,i)=>xb.default.createElement("p",{key:i},o)))};var nRe={enableRightClick:!0,enableCardEditTool:!0,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,canLeave:!0,drawnType:"drawn",shouldSyncPlayController(t,e){return e.publisher===t.userInfo.user_id&&t.screenSharingForSelf}},q2=class extends as.Component{constructor(e){super(e);this.textEditingTargetHistory=new YT;this.onKeyDown=e=>{var l;let{selectedTool:r,addUrlDialogOpen:o,quizView:i,attendanceView:s,narrationRecording:a}=this.state.store;r===Ge.Text||o||a||i!==void 0||s!==void 0||Ks(this.props.store)||(l=this.editorRenderer)==null||l.handleKey(e)};this.onPaste=async e=>{if(!hie(this.props.store,this.state.store)||!this.editorRenderer)return;let{clipboardData:o}=e;!o||!o.types.includes("Files")||o.files.length<1||Nt(new ud(o.files,void 0))};this.onCommandMessage=e=>{var o,i,s,a,l,c,d,u;let r=(o=this.editorRenderer)==null?void 0:o.card.id;if(e instanceof _p)this.onNoteEffect(e);else if(e instanceof Fa)e.cardId===r&&((i=this.editorRenderer)==null||i.onTextCardDroppedInSelf(e),this.state.store.setAddCardDialogOpen(!1));else if(e instanceof Lg){if(e.cardId===r){let p=this.editorRenderer.createDroppedSheet(e);this.uploadSheetAsset(e.sheetType,p).then(()=>{var h;(h=this.editorRenderer)==null||h.onSheetDropped(p),this.state.store.setAddCardDialogOpen(!1)})}}else if(e instanceof Ap)e.creatorCardId===r&&((s=this.editorRenderer)==null||s.onCardInsertedInSelf(e));else if(e instanceof $g)e.cardId===r&&((a=this.editorRenderer)==null||a.onWebCardInsertedFromQr(e));else if(e instanceof Al||e instanceof Vg)e.cardId===r&&((l=this.editorRenderer)==null||l.onWebCardInserted(e));else if(e instanceof Wg)e.cardId===r&&((c=this.editorRenderer)==null||c.onPictureCardCreateFromExtension(e));else if(e instanceof zg)e.creatorCardId===r&&this.onCapturedPhotoInserted(e);else if(e instanceof Ug)e.creatorCardId===r&&this.onCapturedVideoInserted(e);else if(e instanceof Hg)e.creatorCardId===r&&this.uploadSheetAsset(e.sheetType,e.card).then(()=>{var p;(p=this.editorRenderer)==null||p.onCardInsertedInSelf(e)});else if(e instanceof Gg)e.cardId===r&&((d=this.editorRenderer)==null||d.onLocalFileInserted(e));else if(e instanceof ud){let p=this.context;if(!Nm(this.props.store,e.files))return;this.props.store.reduce(Fe(oe.insertDocument,p.insertingFile)),(u=this.editorRenderer)==null||u.onLocalFilePasted(e).catch(h=>{if(!(h instanceof mc))if(h instanceof Ec||h instanceof Bl){let f=h.message;h instanceof Ec?f=(0,i8.sprintf)(p.unsupportedFileErrorMsg,h.type,h.extension):h instanceof Bl&&(f=p.unsupportedFileErrorWithoutOptMsg),this.props.store.reduce(Pe(oe.insertDocument,{title:p.couldntLoadFileTitle,message:f,okMessage:p.back,onOk:()=>{this.props.store.reduce(Pe(oe.insertDocument,void 0))}}))}else throw h}).finally(()=>{this.props.store.reduce(Fe(oe.insertDocument,null))})}};this.onWebcardCreateInEditor=e=>{var a;ge.log("onWebcardCreateInEditor"),this.state.store.setTool(Ge.Finger),this.state.store.setAddUrlDialogOpen(!1);let r=De.get().strings;if(!hie(this.props.store,this.state.store)){alert(r.failedCreateWebCardFromExtension);return}let o=e.detail,i=I0(o.imageStr),s;o.url?s=new Vg(this.props.card.id,o.url,(a=o.title)!=null?a:r.webCard,i):s=new Wg(this.props.card.id,i),Nt(s)};this.onStoreChanged=e=>{let r=e.selectedTool===Ge.Finger&&e.toolVisible,o=[];this.props.store.teacherToolVisible!==r&&o.push(zo(r));let i=this.state.store.selectedTool;if(e.selectedTool===Ge.Text){let s=this.selectTextEditableCard(),a=this.editorRenderer;a&&s&&o.push(Uo({id:s.id,pinned:s.pinned,favorite:s.favorite,canPin:s.canPin(),canRotate:s.canRotate(),canAlign:s.canAlign(),bounds:a.boundingBoxRectToScreen(s.bounds)}),cr(!1),Pr(void 0))}else i===Ge.Text&&this.deleteUnmodifiedEmptyCard();e.moveMode&&o.push(cr(!1)),this.setState({store:e}),this.props.store.reduce(...o)};this.onCardSelected=e=>{let r=this.state.store;r.selectedTool===Ge.Text&&[...e.familyIterator()].every(i=>!fi(i))&&r.setTool(Ge.Finger);let o=!r.slideshowPlaying;!!this.props.store.screenSharingState&&this.editorRenderer&&(o=this.editorRenderer.screenSharingRootCards(e)),this.props.store.reduce(xf(e.id,o))};this.onDrawnUpdate=({card:e,op:r,thumbs:o})=>{var s;let{store:i}=this.props;if(i.reduce(Up({cardIdList:[e.id],type:"drawn",state:"unsaved"})),(s=i.screenSharingState)==null?void 0:s.fullscreen){let{document:a}=i.screenSharingState.fullscreen;this.layerUpdater.update({documentId:a,index:e.indexOverGroup(),card:e,thumbs:o,op:r})}};this.handleSingle=(e,r)=>{this.pointerEventRouter.handleSingle(e,r)};this.handleDoubleMove=(e,r)=>{this.pointerEventRouter.handleDoubleMove(e,r)};this.onTextButtonClickedInHeader=()=>{if(this.selectTextEditableCard()===void 0){let r=this.editorRenderer;if(!r)return;let o=this.props.store.screen,[i,s]=[o.width/2,o.height/2],a=new Fa({cardId:this.props.card.id,color:rn(),backcolor:Ra,position:{x:i,y:s},unmodified:!0});r.onTextCardDroppedInSelf(a)}this.state.store.setTool(Ge.Text)};this.onQuizButtonClicked=e=>{let r=this.editorRenderer;if(!r)return;let{store:o}=this.props,i=this.state.store,s=r.card;if(s instanceof zr&&s.content.quiz_author!==void 0&&s.content.quiz_author.id!=="")switch(i.setTool(Ge.Finger),e){case Wr.EDIT:i.setQuizView({card:s,mode:"create"});break;case Wr.ANSWER:i.setQuizView({card:s,mode:"answer"});break;case Wr.RESULT:i.setQuizView({card:s,mode:"result"});break;case Wr.ANSWER_TOGETHER:i.setQuizView({card:s,mode:"result"});let a=r.getFullScreenSharingState();Hv({store:o,editorRendererState:a,authorId:o.userInfo.user_id,card:s,anonymous:!1});break;case Wr.HELP:let l=oRe(s.content.preset,this.context);window.open(l);break}};this.onQuizCardFrameContainerDismiss=()=>{this.state.store.setQuizView(void 0);let{store:e}=this.props;if(!e.screenSharingState)return;let r=this.editorRenderer;!r||gh(e,r.getFullScreenSharingState(),void 0)};this.onAttendanceButtonClicked=e=>{let r=this.editorRenderer;if(!r)return;let o=r.card;if(!(o instanceof an))return;let i=this.state.store,{store:s}=this.props;switch(i.setTool(Ge.Finger),e){case Do.OPEN:case Do.ANSWER:if(i.setAttendanceView({card:o,mode:"open"}),s.screenSharingForSelf){let d=r.getFullScreenSharingState(),u=o.content.attendance_id;Md(s,d,u)}break;case Do.HELP:let a=s.userInfo.is_teacher,l=this.context,c=iRe(a,l);window.open(c);break}};this.onAttendanceCardFrameContainerDismiss=()=>{this.state.store.setAttendanceView(void 0);let{store:e}=this.props;if(!e.screenSharingState)return;let r=this.editorRenderer;!r||Md(e,r.getFullScreenSharingState(),void 0)};this.canvas=as.createRef(),this.editorText=as.createRef();let r=Kc();r.subscribe(this.onStoreChanged);let{onCardInsertionCompleted:o,onCardClicked:i,onCardFullscreenButtonClicked:s,onCardHeld:a,...l}=this.props.cardRendererCallback;this.layerUpdater=Jm({store:this.props.store,drawnType:"drawn",uploadThumb:!1}),this.cardRendererCallback={onCardInsertionCompleted:(c,d)=>{d.activateTextEditor&&(this.props.store.reduce(Uo({id:c.id,pinned:c.pinned,favorite:c.favorite,canPin:c.canPin(),canRotate:c.canRotate(),canAlign:c.canAlign(),bounds:this.editorRenderer.boundingBoxRectToScreen(c.bounds)}),cr(!1),Pr(void 0)),this.state.store.setTool(Ge.Text))},onCardClicked:(c,d)=>{this.props.store.screenSharingState!==void 0?i(Mc(c,this.props.card)||c,d):fi(c)&&(c.id===this.props.card.id||!c.isFolded)?this.onEditableTextCardClicked(c,d):(this.state.store.selectedTool!==Ge.Text&&i(Mc(c,this.props.card)||c,d),this.state.store.setTool(Ge.Finger),this.props.store.reduce(lo()))},onCardFullscreenButtonClicked:c=>{var d;(d=this.editorRenderer)==null||d.clearCardModificationMonitor(),this.state.store.setTool(Ge.Finger),s(Mc(c,this.props.card)||c)},onCardHeld:(c,d)=>{if(a(c,d),c&&!this.props.store.screenSharingState)for(let u of[c,...c.parentsIterator()])this.props.note.bringCardTreeToFront(u,u===c&&(c.isFolded||d))},...l},this.state={store:r}}componentDidMount(){let{store:e}=this.props,r=this.canvas.current,o=this.props.store.editor.length,i=this.props.card,s=new bC(r,{name:"editor",debug:e.logEnabled,classes:[Xu,nb,ob,yC,ib,sb]});this.editorRenderer=new o8({note:this.props.note,state:{store:this.props.store,card:this.props.card,editorStore:this.state.store,screen:this.props.store.screen,viewStack:this.props.store.editor,noteMtx:this.props.noteMtx,documentLoading:!1},role:nRe,playManager:new ec,callback:{onCardSelected:this.onCardSelected,onPop:a=>this.onBack(a),onTrashBoxHit:a=>{e.reduce(nv(a?"editorTrashBox":void 0))},onDrawnMarkedAsUnsaved:this.onDrawnUpdate,onEnsureDrawnGadget:a=>{let l=a.drawnGeometry("drawn");We(Sn(a.id,{"gadgets.drawn":l}))},onZoomScroll:a=>{var l,c;this.state.store.setZoom(a.a),(l=this.editorText.current)==null||l.updateTextFrameIfNeeded(),(c=this.editorText.current)==null||c.updateTextInputBounds()},getCardOnNote:a=>{if(!!this.props.note.hasCard(a))return this.props.note.getCard(a)},onQuizButtonClicked:this.onQuizButtonClicked,onAttendanceButtonClicked:this.onAttendanceButtonClicked,...this.cardRendererCallback},remotePointerManager:this.props.remotePointerManager}),s.root.addChild(this.editorRenderer),this.subscription=cu(this.onCommandMessage),this.initialize({editorSize:o,card:i}),this.loadFontIfNeeded(i),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("webcardcreate",this.onWebcardCreateInEditor),document.addEventListener("paste",this.onPaste),s.start(),this.setState({engine:s})}loadFontIfNeeded(e){(e instanceof zr||e instanceof an)&&Promise.all([Vt.regularFont.fetch(),Vt.boldFont.fetch()]).then(()=>{this.props.store.reduce(Co())})}async uploadSheetAsset(e,r){let o=await fetch(lb(e)),i=this.context,s=a=>{this.props.store.reduce(Pe(oe.insertDocument,{title:i.couldntLoadFileTitle,message:a,okMessage:i.back,onOk:()=>this.props.store.reduce(Pe(oe.insertDocument,void 0))}))};if(o.status!==200)return s((0,i8.sprintf)(i.couldntDownloadFileErrorMsg,o.status));try{let a=new File([await o.arrayBuffer()],"file.pdf",{type:"application/pdf"}),l=[{width:r.content.page_size.width,height:r.content.page_size.height}],c=await Is.fromFile(a);eo(this.props.store,{file:a,metadata:l,extension:".pdf",cardIdList:[r.id],thumbnailsGenerator:()=>c.generateThumbnailsWithOptions({imageType:"image/png"})})}catch(a){ge.error(a),s(i.corruptFileErrorMsg)}}async updateWebcardUrlAndThumbnail(e,r){if(r.thumbnailFile){let o=await $o.fromFile(r.thumbnailFile),i=no.get(hi(r.thumbnailFile));eo(this.props.store,{file:r.thumbnailFile,metadata:o.getMetadata(),description:r.title,extension:i,cardIdList:[e.id],thumbnailsGenerator:()=>o.generateThumbnails()})}We(Sn(e.id,{"content.uri":r.url}))}onCapturedPhotoInserted(e){this.onCapturedPhotoInsertedInternal(e).finally(()=>{URL.revokeObjectURL(e.url)})}async onCapturedPhotoInsertedInternal(e){let{card:r,imageFile:o}=e,{contentType:i,image:s,name:a,extension:l}=o;if(i!==hd)throw new Error(`cannot yet handle files of type "${i}`);let c=await xo(s,i,a),d=o.getMetadata();eo(this.props.store,{file:c,metadata:d,extension:l,cardIdList:[r.id],thumbnailsGenerator:()=>o.generateThumbnails()}),this.editorRenderer.onCardInsertedInSelf(e)}onCapturedVideoInserted(e){this.onCapturedVideoInsertedInternal(e).finally(()=>{URL.revokeObjectURL(e.url)})}async onCapturedVideoInsertedInternal(e){let{card:r,videoFile:o}=e,{contentType:i,video:s,name:a,extension:l}=o;if(!al(i))throw new Error(`cannot yet handle files of type "${i}"`);let c=s.src,d=await Wf(c,a,i),u=o.getMetadata();eo(this.props.store,{file:d,metadata:u,extension:l,cardIdList:[r.id],thumbnailsGenerator:()=>o.generateThumbnails()}),this.editorRenderer.onCardInsertedInSelf(e)}onNoteEffect(e){this.editorRenderer.onNoteEffect(e)}deleteUnmodifiedEmptyCard(){var r;let e=(r=this.editorRenderer)==null?void 0:r.clearCardModificationMonitor();if(e){let o=this.props.card.getCard(e.id);(o==null?void 0:o.lastModified.getTime())===e.lastModified.getTime()&&We(Ma(e.id))}}componentWillUnmount(){let{store:e}=this.props;this.reset(),e.reduce(zo(!0)),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("webcardcreate",this.onWebcardCreateInEditor),document.removeEventListener("paste",this.onPaste)}componentDidUpdate(e,r,o){var m,g;let{card:i,store:s}=this.props,{card:a,store:l}=e,c=(m=l.desktop)==null?void 0:m.focusingCard,d=(g=s.desktop)==null?void 0:g.focusingCard;if(d&&(c==null?void 0:c.id)!==d.id&&r.store.selectedTool===Ge.Text&&this.state.store.selectedTool===Ge.Text&&this.deleteUnmodifiedEmptyCard(),i!==a){let v=this.props.store.editor;this.initialize({card:this.props.card,editorSize:v.length})}a.isDescendantOf(i.id)&&(this.state.store.selectedTool!==Ge.Finger||this.state.store.activeFingerTool!=="finger")&&(this.state.store.setTool(Ge.Finger),this.state.store.setActiveFingerTool("finger")),Ks(this.props.store)&&(this.state.store.avPlaying&&this.editorRenderer.playManager.pause(this.state.store),this.state.store.selectedTool===Ge.Text&&this.onTextBlur());let u=s.screen,p=l.screen;this.editorRenderer.onNextState({card:i,store:s,editorStore:this.state.store,viewStack:s.editor,screen:u,noteMtx:this.props.noteMtx,documentLoading:!1}),this.updateTextEditorFocus(this.state.store.selectedTool,r.store.selectedTool),this.state.store.selectedTool===Ge.Text&&(u.keyboardHeight!==p.keyboardHeight&&this.ensureTextCaretVisible(),il(u,p)||s.reduce(Co())),r.store.selectedTool!==this.state.store.selectedTool&&s.reduce(cr(!1),Pr(void 0));let h=!this.state.store.slideshowPlaying&&r.store.slideshowPlaying,f=!this.props.store.screenSharingState&&!!e.store.screenSharingState;(h||f)&&s.reduce(xf(i.id))}initialize(e){this.editorText.current&&this.editorText.current.initialize(),this.state.store.setTextHistoryTool({canUndo:!1,canRedo:!1}),this.state.store.setHideAnnotation(!1),this.editorRenderer.runStrokeOperation("clearHistory")}stopScreenSharing(e){var i;let r=(i=e.screenSharingState)==null?void 0:i.sessionId,o=or(e);r&&typeof o=="number"&&Fd({courseId:o,sessionId:r,store:e,showDialog:!1})}get editingCard(){var r,o;let e=(o=(r=this.props.store.desktop)==null?void 0:r.focusingCard)==null?void 0:o.id;if(e){let i=this.props.card.getCard(e);if(i)return i}return this.props.card}selectTextEditableCard(){var a;let e=this.props.card;if(!this.props.store.desktop||!this.editorRenderer)return;let r=(a=this.props.store.desktop.focusingCard)==null?void 0:a.id,o=this.editorRenderer.getCardTransform().a/devicePixelRatio,i=l=>fi(l)&&l.isVisibleInCardTree(e)&&hm(l,o).resizable;if(r){let l=this.props.card.getCard(r);if(l&&i(l))return this.textEditingTargetHistory.push(l.id),l}let s=this.textEditingTargetHistory.lastTargeted(e);if(s&&!i(s)&&(s=void 0),s||fi(this.props.card)&&(s=this.props.card),!s){for(let l of this.props.card.rflatTree())if(i(l)){s=l;break}}return s&&this.textEditingTargetHistory.push(s.id),s}focusEditingTextCard(){var r;if(((r=this.props.store.desktop)==null?void 0:r.focusingCard)!==void 0)return;let e=this.textEditingTargetHistory.lastTargeted(this.props.card);!e||e.id!==this.props.card.id&&this.props.store.reduce(Uo({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:this.editorRenderer.boundingBoxRectToScreen(e.bounds)}))}reset(){var e,r,o;(e=this.editorRenderer)==null||e.close(),(r=this.subscription)==null||r.close(),this.layerUpdater.close(),(o=this.state.engine)==null||o.close()}onBack(e){var o;let r=!this.props.store.screenSharingState;((o=this.editorRenderer)==null?void 0:o.screenSharingRootCards(this.props.card))&&(r=!0,this.stopScreenSharing(this.props.store)),this.props.store.reduce(lo(),Pr(void 0),$y({deleted:e,updateEditorState:r}))}render(){var c,d,u,p;let e=window.innerWidth,r=window.innerHeight,o=this.state.store.selectedTool===Ge.Finger&&this.state.store.activeFingerTool==="laser",i=this.selectTextEditableCard(),s=(d=(c=this.editorRenderer)==null?void 0:c.toolOpacity)!=null?d:1,a=this.state.store.quizView&&this.props.card.getCard(this.state.store.quizView.cardId),l=this.state.store.attendanceView&&this.props.card.getCard(this.state.store.attendanceView.cardId);return as.createElement("div",{style:{position:"fixed",top:0,left:0,minWidth:"100%",minHeight:"100%",background:pn({...Sy,a:s*255}).toRGBAHex()}},as.createElement("canvas",{ref:this.canvas,className:"canvas",style:{width:`${e}px`,height:`${r}px`},width:e*window.devicePixelRatio,height:r*window.devicePixelRatio}),o&&this.canvas.current&&as.createElement(ml,{canvasSize:this.canvas.current,callback:this.laserLayerCallback,consumer:(u=this.editorRenderer)==null?void 0:u.laserPointerConsumer}),i&&this.editorRenderer&&as.createElement(ZC,{ref:this.editorText,store:this.props.store,editorStore:this.state.store,callback:this,rootCard:this.props.card,card:i,delegate:{renderRect:()=>this.renderRect(i)},playManager:this.editorRenderer.playManager}),as.createElement(Vr,{className:"centralizedModalWrapper",open:this.state.store.addUrlDialogOpen,overlay:!0,onClose:()=>this.state.store.setAddUrlDialogOpen(!1)},as.createElement(g2,{store:this.props.store,invokeType:$m.Edit,onCreate:h=>{this.updateWebcardUrlAndThumbnail(this.editingCard,h)},onDismiss:()=>this.state.store.setAddUrlDialogOpen(!1)})),this.editorRenderer&&as.createElement(as.Fragment,null,as.createElement(L2,{store:this.props.store,editorStore:this.state.store,card:this.props.card,focusingCard:this.editingCard,drawToolDispatcher:this.editorRenderer,textActionDispatcher:this.editorText.current||sRe(),getEditorRenderer:()=>this.editorRenderer,opacity:s,playManager:this.editorRenderer.playManager,editorHeaderDispatcher:{onTextButtonClicked:this.onTextButtonClickedInHeader},onBack:h=>this.onBack(h)}),this.state.store.quizView&&a instanceof zr&&as.createElement(np,{card:a,store:this.props.store,editorRendererState:()=>{var h;return(h=this.editorRenderer)==null?void 0:h.getFullScreenSharingState()},onClosing:()=>this.state.store.setQuizView({card:a,mode:"closing"}),onDismiss:this.onQuizCardFrameContainerDismiss,viewMode:this.state.store.quizView.mode,updateCoverDataBeforeUnload:((p=a.content.quiz_author)==null?void 0:p.id)===String(this.props.store.userInfo.user_id)}),this.state.store.attendanceView&&l instanceof an&&as.createElement(op,{card:l,editorRendererState:()=>{var h;return(h=this.editorRenderer)==null?void 0:h.getFullScreenSharingState()},onDismiss:this.onAttendanceCardFrameContainerDismiss,viewMode:this.state.store.attendanceView.mode,updateCoverDataBeforeUnload:this.props.store.userInfo.is_teacher}),this.state.store.selectedTool!==Ge.Text&&this.state.store.quizView===void 0&&this.state.store.attendanceView===void 0&&as.createElement(ep,{card:this.props.card,editorStore:this.state.store,store:this.props.store,screen:this.props.store.screen,editable:!0,onCardSelected:h=>{this.props.store.reduce(xf(h.id))},opacity:s,cardRendererCallback:this.cardRendererCallback,playManager:this.editorRenderer.playManager})),this.state.engine&&as.createElement(K2,{engine:this.state.engine}))}renderRect(e){let r=new ft;if(this.editorRenderer){let o=window.devicePixelRatio;r=this.editorRenderer.getCardTransform().scale(1/o)}return r.applied(e.bounds)}onTextSelectionChange({caretRect:e,selectionRange:r,compositionRange:o}){let i=this.editorRenderer;if(!i||!Dt(i.card,i.callback))return;let a=this.editingCard,l=Dt(a,i.callback);if(!!l&&(l.setTextSelectedRange(r),l.setTextCompositionRange(o),this.ensureTextCaretVisible(),this.state.store.selectedTool===Ge.Text&&e)){let c=i.getCardTransform().scale(1/window.devicePixelRatio).invert().applied(e);We(eE(a.id,this.props.store.userInfo,c))}}onTextUndoHistoryChange({canUndo:e,canRedo:r}){this.state.store.setTextHistoryTool({canUndo:e,canRedo:r})}onTextBlur(){this.state.store.setTool(Ge.Finger)}onTypingAttributeChange(e){this.state.store.setTypingAttributes(e)}copyTextCard(e){var o,i;(o=this.editorRenderer)==null||o.clearCardModificationMonitor();let r=this.props.card.id===e;(i=this.editorText.current)==null||i.reset(),Nt(new Kg(e,r))}updateTextEditorFocus(e,r){let o=this.editorText.current;if(!!o&&e!==r)if(e===Ge.Text)o.focus();else{for(let i of this.props.card.familyIterator()){let s=Dt(i,this.cardRendererCallback);s.setTextSelectedRange(void 0),s.setTextCompositionRange(void 0)}o.blur()}}ensureTextCaretVisible(){let e=this.editorText.current,r=this.editorRenderer;if(!e||!r||this.state.store.selectedTool!==Ge.Text)return;let o=e.currentCaretRect;if(!o)return;let i=this.editingCard,s=r.boundingBoxRectToScreen(nt(i.bounds.x,i.bounds.y)),a=nt(o.x+s.x,o.y+s.y,o.width,o.height);r.ensureTextCaretVisible(a)}onEditableTextCardClicked(e,r){var i;if(e.id!==this.editingCard.id){let s=Dt(this.editingCard,this.cardRendererCallback);s.setTextSelectedRange(void 0),s.setTextCompositionRange(void 0)}let o=this.editorRenderer.boundingBoxRectToScreen(e.bounds);this.props.store.reduce(Uo({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:o}),cr(!1),Pr(void 0)),this.state.store.setTool(Ge.Text),(i=this.editorText.current)==null||i.moveCaretTo(r)}};q2.contextType=su;function oRe(t,e){switch(t){case"test":return e.helpPageLinkForQuizCardTest;case"survey":return e.helpPageLinkForQuizCardSurvey}}function iRe(t,e){return t?e.helpPageLinkForAttendanceCardTeacher:e.helpPageLinkForAttendanceCardStudent}function sRe(){return{toggleVertical(){},undo(){},redo(){},changeColor(t){},toggleBoldface(){},changeListStyle(){},changeLineHeightMultiple(t){},changeAlignment(t,e){},changeTextSize(t,e){},copyTextCard(t){},selectWordAt(t){},fontSizeInputWillFocus(){},fontSizeInputDidBlurred(){},fontSizeDidChanged(t,e){}}}function hie(t,e){let{selectedTool:r,narrationRecording:o,addCardDialogOpen:i,addUrlDialogOpen:s,quizView:a,attendanceView:l}=e;return!(r!==Ge.Finger&&r!==Ge.Recording||o||i||s||a||l||Ks(t)||Ly(t)||t.screenSharingState)}var fie=({editor:t,noteContext:e})=>{let r=qe();return r.useWebGlRenderer?s8.default.createElement(q2,{store:r,cardRendererCallback:e.getManager().cardRendererCallback,card:e.getNote().getCard(t.cardId),noteMtx:e.getRenderer().applyTransform(),note:e.getNote(),remotePointerManager:e.getRemotePointerManager()}):s8.default.createElement(W2,{store:r,cardRendererCallback:e.getManager().cardRendererCallback,card:e.getNote().getCard(t.cardId),noteMtx:e.getRenderer().applyTransform(),noteRendererCallback:e.getNote(),remotePointerManager:e.getRemotePointerManager()})};var Wi=X(he()),mie=X(he());var gie=X(on());var vie=({store:t,rejection:e})=>{let r=Te(),{courseId:o,note:i,noteId:s}=e,a=async()=>{let u=t.notes.byId[s],p=u?u.name:r.unnamedNote;if(l==="saveOther"){let h=(0,gie.sprintf)(r.copyOf,p);zre(t,{courseId:o,note:e.note,name:h,baseNoteId:s})}else l==="useOurs"?Ure(t,{noteId:s,courseId:o,note:i,version:e.info.existing_version+1,name:p,assets:Wu(i.data.frames)}):l==="useTheirs"&&t.reduce(vd())},[l,c]=(0,mie.useState)("saveOther"),d=({id:u,type:p,children:h})=>Wi.createElement("div",{className:"noteConflictResolveInputGroup"},Wi.createElement("input",{role:"button",type:"radio",id:u,name:p,value:p,checked:l===p,onChange:()=>c(p)}),Wi.createElement("label",{role:"button",className:"noteConflictResolveInputRight",htmlFor:u},h));return Wi.createElement(vy,{title:r.noteConflictDialogTitle,type:"error"},Wi.createElement(P7,null,Wi.createElement("div",{className:"noteConflictResolveDialogContent"},Wi.createElement("div",{className:"noteConflictResolveInputGroup"},Wi.createElement(d,{type:"saveOther",id:"noteConflictResolveDialog-saveOther"},Wi.createElement("div",{className:"noteConflictResolveInputGroupTitle"},r.saveNoteUnderOtherNameTitle),Wi.createElement("div",{className:"noteConflictResolveInputGroupDesc"},r.saveNoteUnderOtherNameDesc))),Wi.createElement("div",{className:"noteConflictResolveInputGroup"},Wi.createElement(d,{type:"useOurs",id:"noteConflictResolveDialog-useOurs"},Wi.createElement("div",{className:"noteConflictResolveInputGroupTitle"},r.prioritizeThisVersionTitle),Wi.createElement("div",{className:"noteConflictResolveInputGroupDesc"},r.prioritizeThisVersionDesc))),Wi.createElement("div",{className:"noteConflictResolveInputGroup"},Wi.createElement(d,{type:"useTheirs",id:"noteConflictResolveDialog-userTheirs"},Wi.createElement("div",{className:"noteConflictResolveInputGroupTitle"},r.deferToOtherDeviceVersionTitle),Wi.createElement("div",{className:"noteConflictResolveInputGroupDesc"},r.deferToOtherDeviceVersionDesc))))),Wi.createElement(El,null,Wi.createElement(ma,{onClick:a},r.resolve)))};var ZT=X(he()),nS=X(he());var bie=()=>{var t,e;return typeof((t=navigator.clipboard)==null?void 0:t.read)=="function"&&typeof((e=navigator.clipboard)==null?void 0:e.readText)=="function"},yie=()=>{let t=async()=>{let e=await navigator.clipboard.read();if((e==null?void 0:e.length)===0)return;let r=e[0];if(r.types.find(l=>l===u9))return await navigator.clipboard.readText();let i=r.types.find(l=>h9(l));if(!i)return;let s=await r.getType(i),a=no.get(i);return new File([s],`pasted_file${a}`)};return new Ev(()=>t().catch(e=>{if(e.name!=="DataError")throw e}))},Cie=t=>{let e=De.get().strings;return Td()?Promise.resolve({text:e.paste,disabled:!1}):t.fetch(void 0).then(r=>{if(r.type==="success"){let o=!r.value,i=o?e.nothingToPaste:e.paste;return typeof r.value=="string"?i=Vm(r.value)?e.pasteWeb:e.pasteText:r.value instanceof File&&(i=e.pasteImage),{text:i,disabled:o}}else if(r.type==="error")return{text:e.paste,disabled:!1}})},Sie=async t=>{var a;let{store:e,data:r,position:o}=t,i=De.get().strings,s=(a=e.editor)==null?void 0:a[e.editor.length-1].cardId;if(r instanceof File){s?Nt(new ud([r],o)):Nt(new Pp([r],o));return}if(Vm(r)){let l=oe.createWebCard;e.reduce(Fe(l,i.creatingWebCard));let c={id:e.userInfo.user_id,name:e.userInfo.username},d=await oC(r,c);e.reduce(Fe(l,null)),s?Nt(new Al(s,o,d.url,d.title,d.thumbnailFile)):Nt(new Og(o,d));return}if(s)Nt(new Fa({cardId:s,color:qn(),backcolor:rn(),position:o,text:r}));else{Nt(new sl({color:qn(),backcolor:rn(),position:o,text:r}));return}},xie=(t,e)=>{let r=De.get().strings,o=r.errorOccurred,{message:i}=Ht(e);if(e.name==="NotAllowedError"&&(o=r.accessNotPermitted,i=r.giveClipboardAccess),!Td()||e.name!=="NotAllowedError"){let s=oe.clipboard;t.reduce(Pe(s,{title:o,message:i,okMessage:r.okay,onOk:()=>{t.reduce(Pe(s,void 0))}}))}};var wie=({store:t,position:e})=>{let{x:r,y:o}=e,i=new DOMRect(r,o-10,0,0),[s,a]=(0,nS.useState)(),l=(0,nS.useRef)(yie()),c=()=>{t.reduce(Pr(void 0))};return(0,nS.useEffect)(()=>{if(!bie()){c();return}if(!t.pageFocused){c();return}Cie(l.current).then(a)},[]),s?ZT.createElement(wh,{className:"fade",anchor:"topCenter",arrowColor:"#323232",getParentBounds:()=>i},ZT.createElement(aRe,{store:t,position:e,text:s.text,disabled:s.disabled,reader:l.current,onClose:c})):null},aRe=({store:t,position:e,text:r,disabled:o,reader:i,onClose:s})=>{let a=De.get().strings;return ZT.createElement("div",{className:"cardPopover"},ZT.createElement("div",{role:"button",className:"cardPopoverItem",onClick:async()=>{await i.fetch(void 0).then(c=>{c.type==="success"?c.value&&Sie({store:t,data:c.value,position:e}):c.type==="error"&&xie(t,c.error)}),s()},"data-disabled":o,title:o?a.pasteTips:""},r))};var Tie=({store:t})=>{let e=Te(),r=ju(),o=(0,Ka.useRef)(null),[i,s]=(0,Ka.useState)(void 0),{editor:a,screen:l,noteStates:c}=t,{courseId:d,noteId:u,isShared:p,positionPopoverOpen:h}=r,{width:f,height:m}=l;(0,Ka.useEffect)(()=>{t.pageVisible&&un(d)&&t.drawer&&t.courseId!==void 0&&Pm(t,d)},[d,t.pageVisible]),es(()=>(document.addEventListener("paste",C),window.addEventListener("webcardcreate",b),()=>{document.removeEventListener("paste",C),window.removeEventListener("webcardcreate",b)}));let g=(0,Ka.useRef)(t);(0,Ka.useEffect)(()=>{g.current=t},[t]),(0,Ka.useEffect)(()=>{let k=o.current,T;if(p){$e(d!=="self-study");let A=t.sharedNoteFiles[u];if(!A){FC(t,{noteId:u,courseId:d,pushState:!1});return}let{file:E,commands:F}=A;T=bT.create({store:t,canvas:k,noteId:u,commands:F,file:E})}else{let A=t.noteFiles[u];if(!A){RC(t,{noteId:u,courseId:d,pushState:!1});return}let E=aC(u,A.note);T=new Bz({store:t,canvas:k,note:E})}return T.schedule(),s(T),t.reduce(eB(!0)),()=>{T.close(),t.reduce(eB(!1))}},[u,p,t.noteFiles,t.sharedNoteFiles,t.useWebGlRenderer]),(0,Ka.useEffect)(()=>{i==null||i.onNextStore(t)},[t]);let v=c[r.noteId],y=window.devicePixelRatio,S=a&&a[a.length-1];(0,Ka.useEffect)(()=>{S&&i&&!i.getNote().hasCard(S.cardId)&&t.reduce($y({deleted:!0}))},[S,i]);let C=k=>{if(!Die(g.current))return;let{clipboardData:T}=k;if(!T||!T.types.includes("Files")||T.files.length<1)return;let E=Re();Nt(new bf(T.files,E))},b=k=>{var L;if(ge.log("onWebcardCreate in desktop"),!Die(g.current)){let{editor:R}=g.current;R||alert(e.failedCreateWebCardFromExtension);return}if(!o.current)return;let T=k.detail,A=I0(T.imageStr),E=o.current.getBoundingClientRect(),F={x:E.right,y:E.top},z;T.url?z=new lu(F,{url:T.url,title:(L=T.title)!=null?L:e.webCard,thumbnailFile:A}):z=new Ux(F,A),Nt(z)},x=k=>({width:f*y,height:m*y,style:{width:f,height:m,display:k?"block":"none"}}),w=i==null?void 0:i.getRenderer();return Qo.createElement("div",null,t.useWebGlRenderer?Qo.createElement("canvas",{className:"webgl-canvas",key:"webgl-canvas",ref:o,...x(!0)}):Qo.createElement("canvas",{className:"2d-canvas",key:"2d-canvas",ref:o,...x(!0)}),Qo.createElement(Vr,{open:(v==null?void 0:v.saveState)instanceof Ag,overlay:!0,onClose:()=>{}},Qo.createElement(vie,{store:t,rejection:v==null?void 0:v.saveState})),Qo.createElement(dRe,{store:t,noteState:v}),!r.isShared&&Qo.createElement(lRe,{store:t,state:v}),S&&i&&i.getNote().hasCard(S.cardId)&&Qo.createElement(fie,{editor:S,noteContext:i}),i&&Qo.createElement(cne,{store:t,noteContext:i}),h&&Qo.createElement(wie,{store:t,position:h}),r.isShared&&Qo.createElement(gne,null),Qo.createElement(cRe,null),w instanceof Mm&&!S&&Qo.createElement(K2,{engine:w.getEngine()}))},lRe=({store:t,state:e})=>{if(!e)return null;let r=Te();return e.saveState==="unsaved"?Qo.createElement("div",{role:"button",className:"noteSaveIndicator",onClick:()=>{t.reduce(nV())}},r.unsaved):e.saveState==="saving"?Qo.createElement("div",{className:"noteSaveIndicator"},r.saving):e.saveState==="done"?Qo.createElement("div",{className:"noteSaveIndicator"},r.saved):null},cRe=()=>{let t=qe();if(!t.userPreference.experimentalFeatures.enableWebGlEngine)return null;let[e,r]=(0,Ka.useState)("normal");return(0,Ka.useEffect)(()=>{t.reduce(()=>({useWebGlRenderer:{$set:e==="webgl"}}))},[e]),Qo.createElement("div",{style:{position:"fixed",bottom:35,right:0}},Qo.createElement("select",{onChange:o=>{r(o.currentTarget.value)}},Qo.createElement("option",{value:"normal"},"\u901A\u5E38\u7248"),Qo.createElement("option",{value:"webgl"},"WebGL\u7248")))},dRe=({store:t,noteState:e})=>{let[r,o]=(0,Ka.useState)(!1);(0,Ka.useEffect)(()=>{var a;let s=(a=t.desktop)==null?void 0:a.noteId;typeof s=="number"&&t.noteNeedsReload[s]&&((e==null?void 0:e.saveState)==="done"?o(!0):t.reduce(TP(s,!1)))},[t.noteNeedsReload]);let i=Te();return Qo.createElement(Vr,{open:r,overlay:!0,onClose:()=>{}},Qo.createElement(vy,{title:i.noteChangedFromOtherDevice},Qo.createElement(El,null,Qo.createElement(ma,{disableAfterSubmit:!0,onClick:()=>location.assign(location.href)},i.okay))))};function Die(t){let{editor:e}=t;return!(e||R9(t)||Ly(t)||Ks(t))}var ro=X(he()),Iie=X(he());var Y2=X(he());var uRe=({backgroundColor:t,subColor:e,textColor:r,store:o,onDismiss:i})=>{let s=()=>{let c=wb();!c||(Nt(new dd({backcolor:t,color:r,startPosition:c})),i())};return Y2.createElement("div",{className:"textCardDialogCell",draggable:!0,onDragStart:c=>{let d={backcolor:t.toARGBHex(),color:r.toARGBHex(),isTransparent:!1,name:"addTextCard"};c.dataTransfer.setData(No.TextCard,JSON.stringify(d)),c.dataTransfer.effectAllowed="copy"},onDragEnd:c=>{Nt(new kp({x:c.pageX,y:c.pageY},!0)),i()},style:{backgroundColor:t.toCSSRGBA(),borderBottom:`3px solid ${e.toCSSRGBA()}`,cursor:"pointer"},onClick:s})},kie=({store:t,onDismiss:e})=>Y2.createElement("div",{className:"textCardDialog"},Wk.map((r,o)=>Y2.createElement(uRe,{subColor:Pt(r.subColor),textColor:Pt(r.textColor),backgroundColor:Pt(r.backgroundColor),key:o,store:t,onDismiss:e})));var tc=X(he()),oS=X(he());var pRe=({store:t,preset:e,onCreate:r,onDismiss:o})=>{let i=Te(),s=tc.useCallback(async()=>{if(!wb())return;let u=await Zn.issue("loilonote-quiz"),p=Zn.getEndpoint("loilonote-quiz");if(u&&p){t.reduce(Fe(oe.insertDocument,i.creatingTestCard));let h=new zv({lnsEndpoint:t.lnsEndpoint,lnqEndpoint:p,logEnabled:t.logEnabled}),f=await h.createQuiz(e,u.app_token).catch(m=>{ge.error(m),t.reduce(Fe(oe.insertDocument,null),Pe(oe.insertDocument,{title:i.failedCreateTestCard,okMessage:i.back,onOk:()=>t.reduce(Pe(oe.insertDocument,void 0))}))});if(f){ge.log("\u30AF\u30A4\u30BA\u306E\u4F5C\u6210\u306B\u6210\u529F\u3057\u307E\u3057\u305F"),ge.log(`\u65B0\u3057\u3044\u30AF\u30A4\u30BAid: ${f.quizId}`);let m=await h.getCoverData(f.quizId,u.app_token).catch(g=>{ge.error(g),t.reduce(Fe(oe.insertDocument,i.failedCreateTestCard),Pe(oe.insertDocument,{title:i.failedCreateTestCard,okMessage:i.back,onOk:()=>t.reduce(Pe(oe.insertDocument,void 0))}))});if(m){ge.log({coverInfo:m});let g={quiz_id:f.quizId,preset:e,quiz_author:m.author,title:m.title,question_count:m.questionCount,isAnswered:!1};ge.log("CoverInfo\u306E\u53D6\u5F97\u306B\u6210\u529F\u3057\u307E\u3057\u305F"),ge.log({newQuizContentBase:g}),t.reduce(Fe(oe.insertDocument,null),Pn({type:"normal",text:i.createdTestCard})),r(g)}else ge.log("CoverInfo\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F")}}o()},[e]),{title:a,buttonImagePath:l,className:c}=fRe(e,i);return tc.createElement(Pie,{onClick:s,buttonImagePath:l,title:a,className:c})},hRe=({store:t,onCreate:e,onDismiss:r})=>{let o=Te(),i=(0,oS.useRef)(t);(0,oS.useEffect)(()=>{i.current=t},[t]);let s=(0,oS.useCallback)(c=>{t.reduce(Fe(oe.insertDocument,null),Pe(oe.insertDocument,{title:o.failedCreateAttendanceCard,okMessage:o.back,onOk:()=>t.reduce(Pe(oe.insertDocument,void 0))}))},[t]),a=async()=>{if(!wb())return;let d=await Zn.issue("loilonote-attendance"),u=Zn.getEndpoint("loilonote-attendance");if(!d||!u)return;let p=oe.insertDocument;t.reduce(Fe(p,o.creatingAttendanceCard));let h=new Ov({lnsEndpoint:t.lnsEndpoint,lnaEndpoint:u,logEnabled:t.logEnabled}),f=await h.create(d.app_token).catch(s);if(!f)return;let{attendanceId:m}=f,g=await h.getCoverData(m,d.app_token).catch(s);if(!g)return;let{author:v,title:y}=g,S={attendanceId:m,author:v,title:y};t.reduce(Fe(p,null),Pn({type:"normal",text:o.createdAttendanceCard})),e(S)};return tc.createElement(Pie,{className:"attendanceMenuTitle",buttonImagePath:"/svg/attendance_60x60_margin_less.svg",onClick:()=>{a().finally(r)},title:o.attendance})},Pie=({buttonImagePath:t,title:e,className:r,onClick:o})=>{let i=50,s=200,a=11,l=i/2-s/2;return tc.createElement("div",{className:"menuButton",onClick:o,role:"button"},tc.createElement(Fr,{className:"menuButtonIcon",src:t,alt:e}),tc.createElement("div",{className:"menuTitle"},tc.createElement("div",{style:{width:i,height:a}},tc.createElement("div",{className:r,style:{left:l,width:s}},e))))};function fRe(t,e){switch(t){case"test":return{title:e.quizPresetTest,buttonImagePath:e.testBtnImgPath,className:"quizTestMenuTitle"};case"survey":return{title:e.quizPresetSurvey,buttonImagePath:e.surveyBtnImgPath,className:"quizSurveyMenuTitle"}}}var Eie=({store:t,onCreate:e,onDismiss:r})=>tc.createElement("div",{className:"testCardDialog"},a8()&&DO.map((o,i)=>tc.createElement(pRe,{preset:o,key:i,store:t,onCreate:e,onDismiss:r})),l8()&&t.userInfo.is_teacher&&tc.createElement(hRe,{store:t,onCreate:e,onDismiss:r}));function a8(){return Zn.getEndpoint("loilonote-quiz")!==void 0}function l8(){return Zn.getEndpoint("loilonote-attendance")!==void 0}function _ie(t){return fa(t,{attendanceId:ol,author:e=>fa(e,{name:ol,id:ol}),title:ol})}var qa=X(he());var Aie=({onDismiss:t})=>{let e=Te();return qa.default.createElement("div",{className:"leadingWebCardExtDialog"},qa.default.createElement("div",{className:"leadingWebCardExtDialogHeader"},qa.default.createElement(dr,{round:!0,inPopover:!0},qa.default.createElement(fr,null,qa.default.createElement(mr,null,qa.default.createElement(Mt,{onClick:t},e.close)),qa.default.createElement(wr,null)))),qa.default.createElement("div",{className:"leadingWebCardExtText"},qa.default.createElement("p",null,e.webCardExtensionLeadingText)),qa.default.createElement("div",{className:"leadingWebCardExtLinkBox"},qa.default.createElement("div",{className:"leadingWebCardExtLink"},qa.default.createElement("a",{href:e.helpWebCardExtensionUrl,target:"_blank",rel:"noreferrer noopener"},e.learnMore))),qa.default.createElement("div",{className:"leadingWebCardExtDialogImg"},qa.default.createElement(Fr,{src:"/img/LeadingWebCardExt.png"})))};var X2,wb=()=>X2,Rie=({store:t})=>{let e=Te(),r=m=>{let g=m.currentTarget.getBoundingClientRect();X2=Or(g),t.reduce(()=>({addSheetDialogOpen:{$set:!0}}))},o=()=>{t.reduce(Tf(!0))},i=m=>{let g=m.currentTarget.getBoundingClientRect(),v=Or(g);X2=v,t.screen.isMobile?Nt(new dd({backcolor:rn(),color:qn(),startPosition:v})):t.reduce(()=>({addTextCardDialogOpen:{$set:!0}}))},s=m=>{let g=m.currentTarget.getBoundingClientRect(),v=Or(g);t.leadingWebCardExtensionDialogState==="ready"?(M2(),t.reduce(()=>({leadingWebCardExtensionDialogState:{$set:"open"}}))):Nt(new lu(v))},a=m=>{let g=m.currentTarget.getBoundingClientRect();X2=Or(g),t.reduce(()=>({addQuizCardDialogOpen:{$set:!0}}))},l=()=>{t.reduce(()=>({addSheetDialogOpen:{$set:!1}}))},c=()=>{t.reduce(()=>({addTextCardDialogOpen:{$set:!1}}))},d=()=>{t.reduce(()=>({addQuizCardDialogOpen:{$set:!1}}))},u=()=>{t.reduce(pw(void 0))},p=m=>{let g=wb();!g||Nt(new wy(m,g))},h=m=>{let g=wb();!g||(UQ(m)?Nt(new Hx(g,m)):_ie(m)&&Nt(new Gx(g,m)))},f=a8()||l8();return ro.createElement("div",{className:"menu"},ro.createElement(c8,{title:e.camera,imageSrc:"/svg/camera_margin_less.svg",onClick:o}),ro.createElement("div",{className:"menuButton",style:{position:"relative"}},ro.createElement("div",{style:{textAlign:"center"},onClick:i,"data-collapse-on-mobile":!1},ro.createElement(Fr,{className:"menuButtonIcon",src:e.textCardMenuBtnImgPath,alt:e.text}),ro.createElement("div",{className:"menuTitle"},e.text)),ro.createElement(jt,{open:t.addTextCardDialogOpen,onClose:c,anchor:"middleRight",arrowColor:"#565e6b",triOffset:{top:110}},ro.createElement(kie,{store:t,onDismiss:c}))),ro.createElement(c8,{title:"Web",imageSrc:"/svg/web_margin_less.svg",onClick:s}),ro.createElement(mRe,{title:e.file,imageSrc:"/svg/picture_margin_less.svg"}),ro.createElement(gRe,{onClick:r}),ro.createElement(Vr,{open:t.addSheetDialogOpen,onClose:l,overlay:!0},ro.createElement($C,{onSelect:p,onDismiss:l,dismissOnSelect:!0,draggable:!0})),ro.createElement(Vr,{className:"centralizedModalWrapper",open:t.leadingWebCardExtensionDialogState==="open",onClose:u,overlay:!0},ro.createElement(Aie,{onDismiss:u})),f&&ro.createElement("div",{className:"relative",style:{width:"100%"}},ro.createElement(c8,{title:e.quiz,onClick:a,imageSrc:e.quizCardMenuBtnImgPath}),ro.createElement(jt,{open:t.addQuizCardDialogOpen,onClose:d,anchor:t.screen.isMobile&&xp(t.screen)==="portrait"?"topCenter":"middleRight",arrowColor:"rgb(248, 248, 248)"},ro.createElement(Eie,{store:t,onCreate:h,onDismiss:d}))))},c8=({imageSrc:t,title:e,collapseOnMobile:r=!1,titleClass:o,...i})=>ro.createElement("div",{className:"menuButton","data-collapse-on-mobile":r,...i},ro.createElement(Fr,{className:"menuButtonIcon",src:t,alt:e}),ro.createElement("div",{className:o!=null?o:"menuTitle"},e)),mRe=({imageSrc:t,title:e,collapseOnMobile:r=!1})=>{let o=(0,Iie.useRef)(null),i=a=>{let l=a.currentTarget.getBoundingClientRect(),c=Or(l),d=o.current;d instanceof HTMLInputElement&&(d.click(),d.onchange=()=>{!d.files||d.files.length===0||(Nt(new bf(d.files,c)),d.value="")})},s=[...no.keys(),...Ey.keys()].join(", ");return ro.createElement("div",{className:"menuButton","data-collapse-on-mobile":r,onClick:i},ro.createElement(Fr,{className:"menuButtonIcon",src:t,alt:e}),ro.createElement("div",{className:"menuTitle"},e),ro.createElement("input",{ref:o,hidden:!0,type:"file",accept:s,multiple:!0}))},gRe=({onClick:t})=>{let e=Te(),r=50,o=200,i=11,s=r/2-o/2;return ro.createElement("div",{className:"menuButton",role:"button",onClick:t},ro.createElement(Fr,{className:"menuButtonIcon",src:"/svg/tt_margin_less.svg",alt:e.thinkingTool}),ro.createElement("div",{className:"menuTitle"},ro.createElement("div",{style:{width:r,height:i}},ro.createElement("div",{className:"thinkingToolTitle",style:{left:s,width:o}},e.thinkingTool))))};var ip=X(he()),Q2=X(he());var eD=function({role:e,imageSrc:r,hover:o,uploading:i,badge:s,text:a,onEffect:l,onClick:c,arriving:d=!1}){let u=(0,Q2.useRef)(null);return(0,Q2.useEffect)(()=>{let p=u.current.getBoundingClientRect();l(nt(p.left,p.top,p.width,p.height))}),ip.createElement("div",{className:"sendButton",role:e,ref:u,onClick:c},ip.createElement("div",{className:"sendButtonIconWrapper","data-hover":o},ip.createElement(Fr,{className:"sendButtonIcon","data-uploading":i,src:r,alt:a}),d&&ip.createElement("div",{className:"sendButtonArrivingAnimation"}),i&&ip.createElement(Fr,{src:"/svg/loading-white.svg",alt:"sendLoadingIndicator",className:"sendButtonLoading"})),ip.createElement("div",{className:"sendButtonText"},a),typeof s=="number"&&ip.createElement("div",{className:"sendButtonBadge"},s>999?"999+":s),s==="dot"&&ip.createElement("div",{className:"sendButtonDotMark"}),typeof s=="string"&&s!=="dot"&&ip.createElement(Fr,{src:s,alt:"checkMark",className:"shareButtonImageBadge"}))};var Mie=X(he()),iS=X(he());var Fie=t=>{if(t.length===0)return;let e=new Map;for(let o of t){if(o.type!=="submit")continue;let i=o.data.submission_number,s=o.data.author_id;if(!i||!s)continue;let a=e.get(i);(a==null?void 0:a.some(l=>l===s))||(a===void 0?a=[s]:a.push(s),e.set(i,a))}return Array.from(e.values()).map(o=>o.length).reduce((o,i)=>o+i)};var Nie=({store:t})=>{var d,u,p,h;let{courseId:e}=ju();$e(typeof e=="number");let[r,o]=(0,iS.useState)();(0,iS.useEffect)(()=>{t.userInfo.is_teacher&&o(i())},[t.mobilePushes,e]);let i=()=>{var m,g;$e(t.userInfo.is_teacher);let f=(g=(m=t.mobilePushes.byCourseId[e])==null?void 0:m.map(v=>t.mobilePushes.byId[v]))==null?void 0:g.filter(v=>(v==null?void 0:v.data.type)==="submit");if(!!f)return Fie(f)},[s,a]=(0,iS.useState)(),l=(u=(d=t.submissions.byActiveInCourse[e])==null?void 0:d.map(f=>t.submissions.byKey[f]))==null?void 0:u.filter(f=>!(f==null?void 0:f.submitted)),c=(h=(p=t.mobilePushes.byCourseId[e])==null?void 0:p.map(f=>t.mobilePushes.byId[f]))==null?void 0:h.some(f=>f.type==="reveal_submission_answers");return(0,iS.useEffect)(()=>{t.userInfo.is_teacher||(l&&l.length>0?a(l.length):c?a("dot"):l&&(l==null?void 0:l.length)===0?a("/svg/check_white.svg"):a(void 0))},[l==null?void 0:l.length,c]),Mie.createElement(eD,{role:"submit",hover:t.fixedUIHit==="submitButton",imageSrc:"/svg/submit.svg",uploading:t.submitting,text:Te().submit,badge:t.userInfo.is_teacher?r:s,onClick:()=>t.reduce(jy(!0)),onEffect:f=>qg("submitButton",f)})};var Bie=X(he()),J2=X(on());var Lie=({store:t})=>{let{savingAssetThumbsCount:e,savingAssetsCount:r}=t,o=Te(),i="",s=De.get(),a=s.pluralSafeSuffix(r),l=s.pluralSafeSuffix(e);return r>0&&e>0?i+=(0,J2.sprintf)(o.pendingFileAndThumbUploadCount,r,e,a,l):r>0?i+=(0,J2.sprintf)(o.pendingFileUploadCount,r,a):e>0&&(i+=(0,J2.sprintf)(o.pendingThumbUploadCount,e,l)),Bie.createElement("div",{className:"assetSaveIndicator"},i)};var Oie=()=>{var u,p;let t=qe(),{desktop:e,materialBoxOpen:r,submissionBoxOpen:o,timelineOpen:i}=t,s=Te(),a=(0,Z2.useRef)(e);(0,Z2.useEffect)(()=>{a.current=e},[e]),es(()=>(window.addEventListener("webcardcreate",l),()=>{window.removeEventListener("webcardcreate",l)}));let l=()=>{a.current||t.reduce(Ps(oe.createWebCard,{title:s.failedCreateWebCardFromExtensionTitle,message:s.failedCreateWebCardFromExtension,okMessage:s.back,onOk:()=>t.reduce(Pe(oe.createWebCard,void 0)),color:"info"}))},c=()=>{t.reduce(fu(!0))},d=or(t);return e?ls.createElement("div",{className:"desktop"},ls.createElement(S4.Provider,{value:e},ls.createElement("div",{className:"menuWrapper"},ls.createElement(qr,{className:"desktopBackButton",onClick:c},ls.createElement("div",{className:"navHeaderBackButtonIcon desktopBackButtonIcon"}),ls.createElement("span",null,s.back)),ls.createElement(Rie,{store:t}),ls.createElement("div",{className:"mstMenu"},ls.createElement(eD,{role:"material",text:s.materialsStorage,hover:t.fixedUIHit==="materialBox",onEffect:h=>qg("materialBox",h),uploading:t.uploadingMaterialCount>0,imageSrc:"/svg/material_box.svg",onClick:()=>t.reduce(Hp(!0))}),typeof e.courseId=="number"&&ls.createElement(ls.Fragment,null,ls.createElement(Nie,{store:t}),ls.createElement(eD,{role:"share",text:s.send,hover:t.fixedUIHit==="shareButton",uploading:t.sendingTasks.length>0,onClick:()=>t.reduce(NP(!0)),onEffect:h=>qg("shareButton",h),arriving:!!t.arrivedDocument,imageSrc:"/svg/send.svg",badge:((p=(u=t.mobilePushes.byCourseId[e.courseId])==null?void 0:u.filter(h=>{var f;return["share","distribute","comment_on_submission_answer"].includes((f=t.mobilePushes.byId[h])==null?void 0:f.type)}))==null?void 0:p.length)||void 0}))),ls.createElement("div",{className:"desktopTrashBox"},ls.createElement(zC,{store:t,type:"desktopTrashBox"}))),ls.createElement(qZ,{store:t}),ls.createElement(Tie,{store:t}),!t.editor&&ls.createElement(Lie,{store:t}))):null};var Ta=X(he()),zie=X(he());var Uie=()=>{let t=qe(),{checkingScreenLockState:e}=t,r=or(t),o=typeof r=="number"?t.screenLockStates[r]:!1,i=o&&!t.userInfo.is_teacher,s=Te();if((0,zie.useEffect)(()=>{e==="done"&&o&&(alert(s.teacherLockedScreens),t.reduce(Vy(null)))},[e,o]),typeof r!="number"||!i)return null;let a=fd(t,r),l=Ji(t,r),c=()=>{xoe(t,r)};return Ta.createElement("div",{className:"screenLock"},Ta.createElement("div",{className:"screenLockInner"},Ta.createElement("div",{className:"screenLockPanel"},Ta.createElement("div",{className:"screenLockGroupCourseInfo"},Ta.createElement("div",{className:"screenLockGroupName"},a),Ta.createElement("div",{className:"screenLockCourseName"},l)),Ta.createElement("hr",{className:"screenLockHr"}),Ta.createElement("div",{className:"screenLockTitle"},s.screensAreLocked),Ta.createElement("div",{className:"screenLockParagraph"},s.focusOnTheTeacher),Ta.createElement("div",{className:"screenLockPin screenLockPinLT"}),Ta.createElement("div",{className:"screenLockPin screenLockPinLB"}),Ta.createElement("div",{className:"screenLockPin screenLockPinRT"}),Ta.createElement("div",{className:"screenLockPin screenLockPinRB"})),Ta.createElement(qr,{className:"screenLockConfirmButton",disabled:e==="fetching",onClick:c},Ta.createElement("div",null,e==="fetching"?s.checking:s.checkScreenLock))))};var rD=X(he());var io=X(he()),Bn=X(he());var Vie=X(on());var Xc=X(he());var Hie=X(on()),Gie=({url:t,authorName:e,anonymous:r,onDismiss:o,onConfirm:i})=>{let s=Te(),a=r?s.webPageSharedText:(0,Hie.sprintf)(s.webPageSharedTextBy,e);return Xc.default.createElement("div",{className:"sharedURLConfirmDialog"},Xc.default.createElement(dr,{round:!0,inPopover:!0},Xc.default.createElement(fr,null,Xc.default.createElement(mr,null,Xc.default.createElement(Mt,{onClick:o},s.close)),Xc.default.createElement(wr,null))),Xc.default.createElement("div",{className:"sharedURLConfirmDialogContentWrapper"},Xc.default.createElement("div",{className:"sharedURLConfirmDialogURLContent"},a),Xc.default.createElement("div",{className:"sharedURLText",title:t},t),Xc.default.createElement("div",{className:"sharedURLConfirmDialogOpenLink"},Xc.default.createElement("a",{onClick:i},s.openWebPage))))};var vRe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!1,enableAttendanceCoverButtons:!1,enableFullScreenSharing:!1,drawnType:"annotation",canLeave:!1,shouldSyncPlayController(t,e){return!0}},$ie=({store:t,notification:e,courseId:r})=>{var we,ve,Me;let o=(0,Bn.useRef)(null),i=(0,Bn.useRef)(null),s=(0,Bn.useRef)(),a=(0,Bn.useRef)(),l=(0,Bn.useRef)(),c=(0,Bn.useRef)(),d=(0,Bn.useRef)(null),[u,p]=(0,Bn.useState)(),[h,f]=(0,Bn.useState)(),[m,g]=(0,Bn.useState)(),[v,y]=(0,Bn.useState)(!1),[S,C]=(0,Bn.useState)(),[b,x]=(0,Bn.useState)(0),[w,k]=(0,Bn.useState)(!1),[T,A]=(0,Bn.useState)(!1),[E,F]=(0,Bn.useState)(void 0),[z,L]=(0,Bn.useState)(void 0),{document:R,page:N,scale:V,center:W,zoom:me,playToken:ie,currentTime:Z,isPlaying:P,needsDecorateFavorite:_,presentedWebURL:I,presentedQuizId:U,presentedAttendanceId:M}=e.fullscreen,$=(we=e.fullscreen.playbackRate)!=null?we:1,H=u==null?void 0:u[N],Y=H;if(me){let re=H==null?void 0:H.getCard(me.id);re&&(Y=re,V=me.scale,W=me.center,ie=me.playToken,P=me.isPlaying,$=(ve=me.playbackRate)!=null?ve:1,Z=me.currentTime,_=me.needsDecorateFavorite)}let{x:ae,y:le}=W,{screenHeight:xe,screenWidth:Se,id:je,publisher:ze}=e,{screen:{width:Le,height:dt}}=t,mt=Te();(0,Bn.useEffect)(()=>{c.current=new H1(t,je,r)},[]),(0,Bn.useEffect)(()=>{var re;v&&w&&((re=c.current)==null||re.notifyReadyState(!0))},[v,w]),(0,Bn.useEffect)(()=>{var fe;(fe=c.current)==null||fe.notifyReadyState(!1),k(!1);let re=setTimeout(()=>{t.reduce(Fe(oe.screenSharing,mt.preparingScreenSharing))},1e3);Uv(()=>ue.lnsClient.downloadDocument(R).then(ta).then(Q=>ra({id:R,file:Q,remapIds:!1,author:Qi(t,ze)})),async({error:Q,retryCount:pe,totalConsumedTimeMs:ke})=>{if(Q instanceof Yr&&Q.status===202&&(pe<5||ke<6e4))return{delay:wv,unit:pr.sec};throw Q}).then(Q=>{ot(Q),p(Array.from(Q.iteratorOverGroup())),clearTimeout(re),t.reduce(Fe(oe.screenSharing,null))}).catch(Q=>{let pe=()=>{t.reduce(Pe(oe.screenSharing,void 0),Fe(oe.screenSharing,null),Op(r,void 0))};if(Q instanceof Yr)t.reduce(Pe(oe.screenSharing,{title:mt.couldntReceiveScreenShare,message:(0,Vie.sprintf)(mt.screenSharingTimedOutErrorMsg,Q.status),okMessage:mt.endScreenShareReceiving,onOk:pe}));else{let ke=zc({error:Q,isDocument:!0,courseId:r,targetId:`documents/${R}`,title:mt.couldntReceiveScreenShare,okMessage:mt.endScreenShareReceiving,onOk:pe});t.reduce(Pe(oe.screenSharing,ke))}})},[R]);let ot=re=>{for(let fe of re.memberAndChildrenIteratorOverGroup()){let Q=gr.get(fe);Q.drawn.clear(),Q.annotation.clear()}};(0,Bn.useEffect)(()=>{if(!H||R!==H.headGroup().document.id||!Y)return;let re=Kc();re.subscribe(q=>{g(q),y(q.avInitialized)});let fe={...Oi},Q=Y.descendantsCount()+1;l.current=new jA(Y.id,Q),fe.onCardLoadingStateChanged=(q,K)=>{var G,se;K==="loaded"&&((G=l.current)==null?void 0:G.addLoadedList(q))&&((se=l.current)==null?void 0:se.isReady())&&k(!0)};let pe=$t(),ke=new $d({canvas:pe,state:{editorStore:re,card:Y,screen:{width:pe.width,height:pe.height,keyboardHeight:0},store:t,noteMtx:new ft,viewStack:[{cardId:Y.id}],documentLoading:!1},role:vRe,playManager:new ec,callback:{onCardSelected:()=>{},onPop:()=>()=>{},onDrawnMarkedAsUnsaved:()=>{},onTrashBoxHit(q){},onEnsureDrawnGadget(q){q.gadgets.drawn=q.drawnGeometry("drawn")},onZoomScroll:()=>{},...fe},decorateFavorites:_!=null?_:!1}),Ie=(q,K)=>{ke.handleSingle(q,K),q==="up"&&(ke.hideTool(3e3),C(!0))};return a.current={onHandleSingle:Ie,onHandleDoubleMove:ke.handleDoubleMove,onHandleWheel:ke.handleWheel},ke.setToolVisible(!0),ke.hideTool(3e3),ke.scheduleRender(),f(ke),g(re),()=>{ke&&ke.close()}},[u]),(0,Bn.useEffect)(()=>{I?A(!0):(T&&A(!1),d.current&&d.current.close())},[I]),kf(()=>{d.current&&d.current.close()}),(0,Bn.useEffect)(()=>{if(U){let re=(Y==null?void 0:Y.author.id)===t.userInfo.user_id;F(re?"create":"answer")}else E&&F(void 0)},[U]),(0,Bn.useEffect)(()=>{M?L("open"):z&&L(void 0)},[M]),(0,Bn.useEffect)(()=>{var Q,pe,ke;if(!h||!H||!m||!Y)return;if(!((Q=l.current)==null?void 0:Q.isTargetCard(Y))){k(!1),(pe=c.current)==null||pe.notifyReadyState(!1);let Ie=Y.descendantsCount()+1;l.current=new jA(Y.id,Ie)}if(((ke=H.document)==null?void 0:ke.id)!==R)return;let re=Kt(Y),fe=o.current;h.onNextState({card:Y,editorStore:m,noteMtx:new ft,screen:{width:fe.width,height:fe.height,keyboardHeight:0},store:t,viewStack:[{cardId:Y.id}],documentLoading:!1},re.clone())},[h,N,V,ae,le,Le,dt,xe,Se,Y==null?void 0:Y.id]),(0,Bn.useEffect)(()=>{v&&m&&!m.avPlaying&&(h==null||h.playManager.beginSeek(m),h==null||h.playManager.seek(m,Z),h==null||h.playManager.endSeek(m,h.card))},[Z]),(0,Bn.useEffect)(()=>{m==null||m.setAvSpeedScale($)},[v,$]),(0,Bn.useEffect)(()=>{v&&m&&(h==null||h.playManager.beginSeek(m),h==null||h.playManager.seek(m,Z),h==null||h.playManager.endSeek(m,h.card),P?h==null||h.playManager.play(m):h==null||h.playManager.pause(m))},[v,P,ie]),(0,Bn.useEffect)(()=>{h&&(h.decorateFavorite=_,t.reduce(Co()))},[_]);let vt=re=>{var pe;if(!h||!u||!m||!Y)return;let fe=u[N];if(((pe=fe==null?void 0:fe.headGroup().document)==null?void 0:pe.id)!==R)return;let Q=o.current;h.onNextState({card:Y,editorStore:m,noteMtx:new ft,screen:{width:Q.width,height:Q.height,keyboardHeight:0},store:t,viewStack:[{cardId:Y.id}],documentLoading:!1},re==null?void 0:re.clone())};(0,Bn.useEffect)(()=>{S&&vt(s.current),C(!1)},[S]),(0,Bn.useEffect)(()=>vt(),[t,m,u]);let $t=()=>{let re=i.current,fe=window.devicePixelRatio,Q=re.getBoundingClientRect(),pe=Q.width/Se,ke=Q.height/xe,Ie=pe<ke?pe:ke,q=Ze(Math.floor(Se*Ie*fe),Math.floor(xe*Ie*fe));return il(o.current,q)||(o.current.width=q.width,o.current.height=q.height,o.current.style.width=Se*Ie+"px",o.current.style.height=xe*Ie+"px"),x(Ie),o.current},Kt=re=>{let fe=$t(),Q=fe.getBoundingClientRect(),pe=pi(Q.width,Q.height,re.size.width,re.size.height),ke=window.devicePixelRatio,Ie={width:re.size.width*pe*ke,height:re.size.height*pe*ke},q=fe.width*.5,K=fe.height*.5;return 1<=V&&(q-=(ae-.5)*Ie.width*V,K-=(le-.5)*Ie.height*V),s.current=new ft(V,0,0,V,q,K)},_t=(Me=m==null?void 0:m.avVolume)!=null?Me:0;(m==null?void 0:m.avMuted)&&(_t=0);let nr=()=>{let re=m==null?void 0:m.avMuted;m==null||m.setAvMuted(!re)},vn=()=>{I&&(d.current=QC(I))},Cr=(re,fe,Q)=>{Q==="up"&&re===0?(m==null||m.setAvVolume(fe),m==null||m.setAvMuted(!0),h==null||h.setToolVisible(!0),h==null||h.hideTool(3e3)):(m==null||m.setAvMuted(!1),m==null||m.setAvVolume(re),h==null||h.setToolVisible(!0))},Ot=Y instanceof Ao||Y instanceof Yo,Wt=Y==null?void 0:Y.gadgets.naration,Et=o.current&&h,zt=e.fullscreen.authorId,Ar=t.users.byId[zt];(0,Bn.useEffect)(()=>{Ar||qC(t,zt)},[Ar]);let yn=Ut(Ar);return io.createElement(io.Fragment,null,io.createElement("div",{className:"screenSharingFullscreen",ref:i,onMouseMove:()=>{C(!0)}},io.createElement("canvas",{ref:o}),Et&&io.createElement(ml,{canvasSize:o.current,notification:e,scale:b,callback:a.current})),Y instanceof zr&&io.createElement(io.Fragment,null,E&&io.createElement(np,{card:Y,store:t,editorRendererState:()=>h==null?void 0:h.getFullScreenSharingState(),onDismiss:()=>F(void 0),onClosing:()=>F("closing"),viewMode:E,updateCoverDataBeforeUnload:!1})),Y instanceof an&&io.createElement(io.Fragment,null,z&&io.createElement(op,{card:Y,editorRendererState:()=>h==null?void 0:h.getFullScreenSharingState(),viewMode:z,onDismiss:()=>L(void 0),updateCoverDataBeforeUnload:!1})),I&&io.createElement(oo,{open:T,onClose:()=>A(!1),transition:"fade",container:"none"},io.createElement(Gie,{url:I,authorName:yn,anonymous:!!e.anonymous,onDismiss:()=>A(!1),onConfirm:()=>vn()})),m&&io.createElement(wa,{in:m.toolVisible},io.createElement("div",{className:"fade",onMouseEnter:()=>{h==null||h.setToolVisible(!0)},onMouseLeave:()=>{h==null||h.hideTool(3e3)}},io.createElement("div",{className:"editorHeader"},io.createElement("div",{className:"editorHeaderInner"},io.createElement("div",{className:"editorHeaderFixedSpacer"}),io.createElement("div",{className:"editorHeaderSpacer"}),io.createElement("div",{className:"editorHeaderSpacer"}),io.createElement(Zl,{store:t,courseId:r,sessionId:je,publisher:ze,forStudent:e.presenter!=null,editorRendererState:()=>h==null?void 0:h.getFullScreenSharingState()}))),io.createElement("div",{className:"editorFooter fade"},io.createElement("div",{className:"editorFooterInner"},(Ot||Wt)&&io.createElement("div",{className:"screenSharingVolumeTool"},io.createElement("div",{className:"editorButton editorWhiteCircleButton animeVolumeButton screenSharingVolumeButton",role:"button",onClick:nr},io.createElement("div",{className:`editorButtonIcon ${m.avMuted?"muteButtonIcon":"volumeButtonIcon"}`})),io.createElement(HC,{contentClassName:"screenSharingVolumeSlider",knobDiameter:15,onChange:Cr,volume:_t})),!e.anonymous&&io.createElement("div",{className:"screenSharingAuthorNameWrapper"},io.createElement("div",{className:"screenSharingAuthorName"},yn)))))))};var Zc=X(he()),tD=X(he());var Qc=X(he());var sS=X(he());var Wie=X(he()),Kd=X(he());var eR=({src:t,actualSrc:e,invalidationToken:r,fallbackSrc:o,debug:i,maxRetryCount:s,skipForKnown404Url:a=!1,children:l,onLoadStart:c,onLoadEnd:d,onDragStart:u,...p})=>{var w;let{ref:h,inView:f}=mV(),[m,g]=(0,Kd.useState)(),[v,y]=(0,Kd.useState)(!1),S=Mu.get(t),C=(0,Kd.useRef)(new AbortController);(0,Kd.useEffect)(()=>(C.current=new AbortController,()=>C.current.abort()),[t]),(0,Kd.useEffect)(()=>{!v&&f&&y(!0)},[f]),(0,Kd.useEffect)(()=>{let k=S.cachedUrl();if(k){c==null||c(),g(k),d==null||d(!0);return}if(!v)return;let{signal:T}=C.current,A=e!=null?e:t;c==null||c(),S.toUrl({url:A,maxRetryCount:s,skipForKnown404Url:a,signal:T}).then(E=>{T.aborted||(d==null||d(E!=null),g(E!=null?E:o))}).catch(()=>{T.aborted||(d==null||d(!1),g(o))})},[t,e,S,v,r]);let b=(0,Kd.useMemo)(()=>{let k={};return i&&(k["data-original-src"]=t,k["data-actual-src"]=e),k},[i,t,e]),x=(w=m!=null?m:o)!=null?w:rK;return Wie.createElement("img",{src:x,ref:h,...b,alt:"image",...p})};var jie=["small","medium","high"],Kie=({srcs:t,actualSrcs:e,invalidationToken:r,style:o={},debug:i,showLoadingBar:s,fallbackSrc:a,skipForKnown404Url:l,onLoadLevel:c,onLoadStart:d,onDragStart:u,thumbDraggable:p})=>{let[h,f]=wn({index:0,src:void 0,loaded:!1}),{index:m,loaded:g,src:v,actualSrc:y}=h,S=jie[Math.min(m,jie.length-1)],C=w=>{c==null||c(S,w);let k=Math.min(m+1,t.length-1);f({loaded:!0,index:k,src:t[k],actualSrc:e==null?void 0:e[k]})};o0(()=>{f({index:0,src:t[0],actualSrc:e==null?void 0:e[0],loaded:!1})},[t.join(","),e==null?void 0:e.join(","),r]);let b=v!=null?v:t[0],x=y!=null?y:y==null?void 0:y[0];return sS.createElement(sS.Fragment,null,s&&!g&&sS.createElement(ur,null),sS.createElement(eR,{className:"mipmapImage",skipForKnown404Url:l,fallbackSrc:a,src:b,actualSrc:x,invalidationToken:r,debug:i,style:o,draggable:p,onLoadStart:()=>d==null?void 0:d(S),onLoadEnd:C,onDragStart:u}))};var Jc=({id:t,index:e,thumbnails:r,comment_snapshot_id:o,onDragStart:i,skipForKnown404Url:s,fallbackSrc:a,updatable:l,onLoadChanged:c})=>{let[d,u]=wn({loadingDocThumb:!1,loadingAnnoThumb:!1});return(0,Qc.useEffect)(()=>{c==null||c(d.loadingDocThumb||d.loadingAnnoThumb)},[d.loadingDocThumb,d.loadingAnnoThumb]),Qc.default.createElement("div",{className:"documentThumbnail",draggable:i!=null,onDragStart:i},(d.loadingDocThumb||d.loadingAnnoThumb)&&Qc.default.createElement(ur,{absolute:"top"}),Qc.default.createElement(qie,{type:"document",docId:t,index:e,snapshotId:o,fallbackSrc:a,updatable:l,preSignedUrls:r,skipForKnown404Url:s,onLoadChange:p=>u({loadingDocThumb:p})}),Qc.default.createElement("div",{className:"annotation"},Qc.default.createElement(qie,{type:"annotations",docId:t,index:e,snapshotId:o,updatable:l,preSignedUrls:r,skipForKnown404Url:s,onLoadChange:p=>u({loadingAnnoThumb:p})})))},qie=({type:t,docId:e,index:r,snapshotId:o,preSignedUrls:i,updatable:s,fallbackSrc:a,skipForKnown404Url:l,onLoadChange:c})=>{var S;let d=qe(),[{invalidationToken:u},p]=wn({}),h=()=>["small","medium"].map(b=>ue.res.docOrAnnoThumbUrl({type:t,docId:e,index:r,size:b,snapshotId:o})),f=(0,Qc.useMemo)(()=>{let C=h();if(u==null&&i&&r===0){let b=i[t];if(!b||!b.small||!b.medium)return;let x=b.small.url,w=b.medium.url;return{srcs:C,actualSrcs:[x,w]}}return{srcs:C}},[e,r,o,JSON.stringify(i),u]),m=Iy(e,r),g=d.thumbUpdateNotifications[t][m],v=(S=d.thumbKnownGenerations[t][m])!=null?S:-1;if((0,Qc.useEffect)(()=>{if(!g||!s||g.generation<=v)return;for(let b of h())Mu.get(b).invalidate();p({invalidationToken:Date.now()});let C=Iy(g.document,g.index);d.reduce(()=>({thumbKnownGenerations:{[t]:{[C]:{$set:g.generation}}}}))},[g,s,v]),!f)return null;let y=C=>b=>{b==="small"&&c(C)};return Qc.default.createElement(Kie,{srcs:f.srcs,actualSrcs:f.actualSrcs,fallbackSrc:a,onLoadStart:y(!0),onLoadLevel:y(!1),invalidationToken:u,debug:d.logEnabled,skipForKnown404Url:l,style:{pointerEvents:"none"}})};var Yie=({store:t,notification:e,courseId:r})=>{let{comparison:o,id:i,publisher:s,anonymous:a}=e,l=(0,tD.useRef)(new H1(t,i,r)),c=(0,tD.useRef)([]),d=()=>{let x=!0;for(let w of o.items)if(c.current.indexOf(w.document)===-1){x=!1;break}l.current.notifyReadyState(x)};(0,tD.useEffect)(()=>{d()},[o.items.length]);let u=x=>w=>{if(w){let k=c.current.indexOf(x);c.current.splice(k,k>-1?1:0),d()}else c.current.includes(x)||(c.current.push(x),d())},{screen:p}=t,h=p.width/e.screenWidth,f=p.height/e.screenHeight,m=Math.min(h,f),g=e.screenWidth*m,v=e.screenHeight*m,y={width:g+"px",height:v+"px"},S=g/o.columnCount,C=v/o.rowCount,b={display:"grid",gridTemplateColumns:`repeat(${o.columnCount}, ${S}px)`,gridTemplateRows:`repeat(${o.rowCount}, ${C}px)`};return Zc.createElement("div",{className:"screenSharingComparison"},Zc.createElement("div",{className:"screenSharingComparisonInner",style:y},Zc.createElement("div",{style:b},o.items.map(x=>{let w=t.users.byId[x.authorId];w||qC(t,x.authorId);let k=Ut(w),T={gridRow:Math.floor(x.order/o.columnCount)+1,gridColumn:x.order%o.columnCount+1};return Zc.createElement("div",{key:x.document,className:"screenSharingComparisonCell",style:T},Zc.createElement(Jc,{id:x.document,index:x.page,skipForKnown404Url:!1,updatable:!0,onLoadChanged:u(x.document)}),!a&&Zc.createElement("div",{className:"screenSharingComparisonCellAuthorName"},k))}))),Zc.createElement(ml,{canvasSize:{width:g*window.devicePixelRatio,height:v*window.devicePixelRatio},notification:e,scale:m}),Zc.createElement("div",{className:"editorHeader"},Zc.createElement("div",{className:"editorHeaderInner"},Zc.createElement("div",{className:"editorHeaderSpacer"}),Zc.createElement(Zl,{store:t,courseId:r,sessionId:i,publisher:s,forStudent:!1}))))};var Wn=X(he()),qd=X(he());var bRe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,canLeave:!0,drawnType:"drawn",shouldSyncPlayController(t,e){return e.presenter===t.userInfo.user_id}},Xie=({store:t,courseId:e,notification:r})=>{var R,N,V,W,me,ie,Z,P,_,I,U;let o=(0,qd.useRef)(null),i=(0,qd.useRef)(null),[s,a]=wn({viewStack:[]}),l=(0,qd.useRef)(s),c=Te(),d=(0,qd.useRef)(t);(0,qd.useEffect)(()=>{d.current=t},[t]),(0,qd.useEffect)(()=>(ue.lnsClient.downloadDocument(r.fullscreen.document).then(ta).then(async M=>{var H;let $=await ra({id:r.fullscreen.document,file:M,author:Qi(t,(H=r.presenter)!=null?H:t.userInfo.user_id)});u($),a({head:$})}).catch(yt.handleError).catch(M=>{ge.error(M);let $="documents/"+r.fullscreen.document;EI({store:t,targetId:$,courseId:e,onOk:()=>{t.reduce(Pe(oe.openDocument,void 0))}})(M)}),t.reduce(Pn({type:"normal",text:c.yourTurnToPresent})),()=>{t.reduce(Zi(void 0))}),[]);let u=M=>{for(let $ of M.memberAndChildrenIteratorOverGroup())gr.get($).annotation.clear()};(0,qd.useEffect)(()=>{var vn,Cr;$e(o.current!=null);let M=s.head;if(!M)return;let $=o.current,{page:H,currentTime:Y,zoom:ae}=r.fullscreen,le=(vn=M.memberAt(H))!=null?vn:M;ae&&(le=(Cr=le.getCard(ae.id))!=null?Cr:le);let xe=Jm({store:t,drawnType:"drawn",uploadThumb:!0}),Se=Kc({avSeekTime:Y}),je=(Ot,Wt,Et)=>{Ot.id===Et.cardId&&Wt.avSpeedScale!==Et.avSpeedScale&&Ot.replaceContent({"metadata.playback_rate":Et.avSpeedScale})};Se.subscribe(Ot=>{var zt;let Wt=(zt=l.current.renderer)==null?void 0:zt.card,Et=l.current.editorStore;Wt&&Et&&je(Wt,Et,Ot),a({editorStore:Ot})});let ze=({card:Ot,op:Wt,thumbs:Et})=>{$e(Ot.document!=null);let{id:zt,index:Ar}=Ot.document;xe.update({documentId:zt,index:Ar,card:Ot,op:Wt,thumbs:Et})},Le=({type:Ot,target:Wt})=>Wt==="card"&&["down","up"].includes(Ot),dt=Ot=>{let Wt=l.current.viewStack,Et=Mc(Ot,$t.card)||Ot;Wt.push({cardId:Et.id,animate:!0}),a({viewStack:Wt}),$t.onNextState({store:d.current,card:Et,editorStore:Se,noteMtx:new ft,screen:t.screen,viewStack:[...Wt],documentLoading:!1})},mt=Ot=>{for(let Wt of M.iteratorOverGroup()){let Et=Wt.getCard(Ot);if(Et)return Et}},vt=[...[...le.parentsIterator()].reverse().map(Ot=>({cardId:Ot.id})),{cardId:le.id}],$t=new $d({canvas:$,state:{store:t,editorStore:Se,card:le,screen:t.screen,viewStack:[...vt],noteMtx:new ft,documentLoading:!1},role:bRe,playManager:new ec,callback:{onCardSelected:h,onPop:p,onDrawnMarkedAsUnsaved:ze,onTrashBoxHit(){},onEnsureDrawnGadget(Ot){Ot.gadgets.drawn=Ot.drawnGeometry("drawn")},onZoomScroll(){},onQuizButtonClicked:b,onAttendanceButtonClicked:x,...Oi,shouldHandleCardEvent:Le,onCardClicked:dt,getCardOnNote:mt}});$t.scheduleRender();let Kt=new Mn($);Kt.onSingle=$t.handleSingle,Kt.onDoubleMove=$t.handleDoubleMove;let _t=new Kl($);_t.onFreeMove=A;let nr={onHandleSingle:()=>{},onHandleDoubleMove:$t.handleDoubleMove,onHandleWheel:$t.handleWheel};return a({renderer:$t,editorStore:Se,laserLayerCallback:nr,viewStack:vt}),window.addEventListener("keydown",f),()=>{Kt.unbind(),_t.unbind(),$t.close(),xe.close(),window.removeEventListener("keydown",f)}},[s.head]),(0,qd.useEffect)(()=>{let{renderer:M,editorStore:$}=s;if(!M||!$)return;l.current=s;let H=d.current;M.onNextState({store:H,card:M.card,editorStore:$,screen:H.screen,noteMtx:new ft,viewStack:[...s.viewStack],documentLoading:!1})}),(0,qd.useEffect)(()=>{let{renderer:M}=s;if(!M)return;let{id:$,type:H,publisher:Y,presenter:ae,anonymous:le,clientId:xe,fullscreen:Se}=r,{authorId:je,document:ze,presentedQuizId:Le,presentedAttendanceId:dt}=Se;t.reduce(Zi({courseId:e,type:H,presenter:ae,sessionId:$,publisher:Y,clientId:xe,anonymous:le===!0,fullscreen:{authorId:je,document:ze,presentedQuizId:Le,presentedAttendanceId:dt}}))},[s.renderer]);let p=()=>{let{renderer:M,editorStore:$}=l.current;if(!M||!$)return;let H=M.card.parent;if(!H)return;let Y=d.current,ae=l.current.viewStack;ae.pop(),a({viewStack:ae}),M.onNextState({store:Y,card:H,editorStore:$,screen:Y.screen,noteMtx:new ft,viewStack:[...ae],documentLoading:!1})},h=M=>{let{renderer:$,editorStore:H}=l.current;if(!$||!H)return;let Y=d.current,ae=l.current.viewStack;ae[ae.length-1]={cardId:M.id},a({viewStack:ae}),$.onNextState({store:Y,card:M,editorStore:H,screen:Y.screen,noteMtx:new ft,viewStack:[...ae],documentLoading:!1})},f=M=>{let $=l.current;if(!$)return;let{renderer:H,quizViewMode:Y,attendanceViewMode:ae}=$;Y!==void 0||ae!==void 0||H==null||H.handleKey(M)},m=window.devicePixelRatio,[g,v]=[Math.floor(t.screen.width*m),Math.floor(t.screen.height*m)],y=((R=s.editorStore)==null?void 0:R.selectedTool)===Ge.Finger&&((N=s.editorStore)==null?void 0:N.activeFingerTool)==="laser",S=(W=(V=s.renderer)==null?void 0:V.toolOpacity)!=null?W:1,C=(me=s.renderer)==null?void 0:me.card,b=M=>{let{renderer:$,editorStore:H}=l.current,Y=d.current;if(!$||!H)return;let ae=$.card;if(ae instanceof zr)switch(H.setToolVisible(!0),M){case Wr.ANSWER_TOGETHER:let le=$.getFullScreenSharingState();a({quizViewMode:"result",attendanceViewMode:void 0}),gh(Y,le,ae.content.quiz_id);break;case Wr.ANSWER:a({quizViewMode:"answer"});break;case Wr.RESULT:a({quizViewMode:"result"});break;case Wr.EDIT:a({quizViewMode:"create"});break;case Wr.HELP:let{preset:xe}=ae.content,Se=XT(xe,c);window.open(Se);break}},x=M=>{let{renderer:$,editorStore:H}=l.current;if(!$||!H)return;let Y=d.current,{card:ae}=$;if(ae instanceof an)switch(H.setToolVisible(!0),M){case Do.ANSWER:a({attendanceViewMode:"open"});break;case Do.OPEN:if(a({attendanceViewMode:"open"}),Y.userInfo.is_teacher){let Se=$.getFullScreenSharingState();Md(Y,Se,ae.content.attendance_id)}break;case Do.HELP:let le=Y.userInfo.is_teacher,xe=QT(le,c);window.open(xe);break}},w=()=>{a({quizViewMode:void 0});let{renderer:M}=l.current;!M||gh(d.current,M.getFullScreenSharingState(),void 0)},k=()=>{a({quizViewMode:"closing"})},T=()=>{a({attendanceViewMode:void 0});let{renderer:M}=l.current;!M||Md(t,M.getFullScreenSharingState(),void 0)},A=M=>{var xe,Se,je;let{renderer:$,quizViewMode:H,attendanceViewMode:Y}=l.current;if(!$)return;let ae=o.current;if(!ae)return;let le="default";if(!H&&!Y){let ze=$.getObjectUnderPoint(M);(((xe=ze==null?void 0:ze.eventTarget)==null?void 0:xe.startsWith("card"))||((Se=ze==null?void 0:ze.eventTarget)==null?void 0:Se.startsWith("quizButton"))||((je=ze==null?void 0:ze.eventTarget)==null?void 0:je.startsWith("attendanceButton")))&&(le="pointer")}ae.style.cursor=le},E=M=>{let{renderer:$}=l.current;if(!$)return;let H=$.getFullScreenSharingState();!H||dC(d.current,H,M)},F=jC({store:t,isScreenSharing:!0}),z=((ie=s.editorStore)==null?void 0:ie.selectedTool)===Ge.Draw,L=F?!z:!0;return((Z=s.renderer)==null?void 0:Z.card.parent)&&(L=!1),Wn.createElement(Wn.Fragment,null,Wn.createElement("div",{className:"submissionPreview"},!s.renderer&&Wn.createElement(ur,{absolute:"top"}),y&&Wn.createElement(ml,{canvasSize:{width:g,height:v},callback:s.laserLayerCallback,consumer:(P=s.renderer)==null?void 0:P.laserPointerConsumer}),s.editorStore&&C&&s.renderer&&!s.quizViewMode&&!s.attendanceViewMode&&Wn.createElement(Wn.Fragment,null,Wn.createElement(wa,{in:s.editorStore.toolVisible},Wn.createElement("div",{className:"editorHeader"},Wn.createElement("div",{className:"editorHeaderInner"},s.renderer.card.parent?Wn.createElement("div",{className:"editorHeaderButtonGroup"},Wn.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Wn.createElement("div",{role:"button",className:"editorButton",onClick:p},Wn.createElement("div",{className:"editorButtonIcon backButtonIcon"})))):Wn.createElement("div",{className:"editorHeaderFixedSpacer"}),Wn.createElement("div",{className:"editorHeaderSpacer"}),Wn.createElement("div",{className:"editorHeaderButtonGroup"},Wn.createElement(qm,{editorStore:s.editorStore}),L&&Wn.createElement(Rh,{store:t,editorStore:s.editorStore,forDocument:!0,drawToolDispatcher:s.renderer}),C instanceof ri&&C.content.uri&&Wn.createElement(Xm,{card:C,onClick:()=>{s.renderer&&s.editorStore&&s.renderer.playManager.pause(s.editorStore)},onClickWithShare:()=>E(C.content.uri),closedWindowCallback:()=>E(void 0)})),Wn.createElement("div",{className:"editorHeaderSpacer"}),Wn.createElement("div",{className:"editorHeaderButtonGroup"},t.screenSharingState&&Wn.createElement(Fh,{store:t,sharingState:t.screenSharingState}),Wn.createElement(Zl,{store:t,courseId:e,sessionId:r.id,publisher:r.publisher,forStudent:!0,editorRendererState:()=>{var M;return(M=s.renderer)==null?void 0:M.getFullScreenSharingState()}}))),F&&z&&Wn.createElement("div",{className:"editorHeaderInner"},Wn.createElement("div",{className:"editorHeaderButtonGroup"},Wn.createElement(Rh,{store:t,editorStore:s.editorStore,forDocument:!0,drawToolDispatcher:s.renderer}))))),Wn.createElement(ep,{card:C,store:t,editorStore:s.editorStore,screen:t.screen,editable:!1,onCardSelected:h,playManager:s.renderer.playManager,opacity:S,cardRendererCallback:Oi,popoverContainer:(_=i.current)!=null?_:void 0})),Wn.createElement("canvas",{ref:o,className:"canvas",width:g,height:v,style:{backgroundColor:s.renderer?"transparent":"#888",width:"100%",height:"100%"}}),((I=s.renderer)==null?void 0:I.card)instanceof zr&&s.quizViewMode&&Wn.createElement(np,{card:s.renderer.card,store:t,editorRendererState:()=>{var M;return(M=s.renderer)==null?void 0:M.getFullScreenSharingState()},onDismiss:w,onClosing:k,viewMode:s.quizViewMode,updateCoverDataBeforeUnload:!1}),((U=s.renderer)==null?void 0:U.card)instanceof an&&s.attendanceViewMode&&Wn.createElement(op,{card:s.renderer.card,editorRendererState:()=>{var M;return(M=s.renderer)==null?void 0:M.getFullScreenSharingState()},viewMode:s.attendanceViewMode,onDismiss:T,updateCoverDataBeforeUnload:!1})),Wn.createElement("div",{ref:i}))};var Qie=()=>{let t=qe(),e=or(t);if(typeof e!="number")return null;let r=t.screenSharingActionNotification[e];if(!r||Mp(r))return null;let o=t.userInfo.user_id;return r.publisher===o&&r.presenter===void 0?null:rD.createElement("div",{className:"screenSharing"},xi(r)&&r.presenter!==o&&rD.createElement($ie,{store:t,notification:r,courseId:e}),xi(r)&&r.presenter===o&&rD.createElement(Xie,{store:t,notification:r,courseId:e}),Jx(r)&&rD.createElement(Yie,{store:t,notification:r,courseId:e}))};var gl=X(he()),Jie=X(he());var Zie=()=>{let t=qe();return gl.createElement(Vr,{className:"centralizedModalWrapper userGroupJoinCodeDialogWrapper",open:t.userGroupJoinCode!=null,onClose:()=>{t.reduce(()=>({userGroupJoinCode:{$set:void 0}}))},container:"none"},gl.createElement(yRe,{store:t}))},yRe=({store:t})=>{if(!t.userGroupJoinCode)return null;let{code:e,userGroup:r}=t.userGroupJoinCode,o=t.userGroups.attendancesById[r.id];(0,Jie.useEffect)(()=>{A2(t,r.id)},[]);let i=o==null?void 0:o.length,s=()=>{t.reduce(()=>({userGroupJoinCode:{$set:void 0}}))},a=Te();return gl.createElement("div",{className:"userGroupJoinCodeDialogItem userGroupJoinCodeDialog"},gl.createElement("div",{className:"userGroupJoinCodeDialogItem userGroupJoinCodeDialogTitle"},gl.createElement("div",{className:"userGroupJoinCodeDialogTitlePrefix"},a.groupName),gl.createElement("div",{className:"userGroupJoinCodeDialogTitleGroupName"},r.name)),gl.createElement("div",{className:"userGroupJoinCodeDialogItem userGroupJoinCodeDialogCode"},e),gl.createElement("div",{className:"userGroupJoinCodeDialogItem"},a.groupJoinInstructions),gl.createElement("div",{className:"userGroupJoinCodeDialogItem"},gl.createElement("span",null,a.membersJoinedCount),gl.createElement("span",{style:{display:"inline-block",width:"3em",padding:"0 5px 0 0",textAlign:"right"}},i!=null?i:"")),gl.createElement("div",{className:"userGroupJoinCodeDialogButtonWrap"},gl.createElement(qr,{onClick:s,className:"userGroupJoinCodeDialogButton"},a.close)))};var aS=X(he()),tR=X(he());var ese=()=>{let t=qe(),[e,r]=(0,tR.useState)(!1);return(0,tR.useEffect)(()=>{let o=Object.values(t.restartLoadingDialogOpen).filter(i=>i===!0).length;r(o>0)},[t.restartLoadingDialogOpen]),e?aS.createElement(aS.Fragment,null,aS.createElement(ur,{absolute:"top"}),aS.createElement("div",{className:"restartLoadingDialog"})):null};var nD=X(he());var rc=X(he());var Zm=({diameter:t,color:e,period:r,diameterRatio:o,startAngle:i})=>{let s=t*o/2,a=Math.PI/2-i,l=t/2+Math.cos(a)*t/2-s,c=t/2+Math.sin(a)*t/2-s;return rc.default.createElement("div",{className:"circleActivityIndicatorElementLayer",style:{animation:`circleActivityIndicatorElementLayerAnimation ${r}s linear infinite`}},rc.default.createElement("div",{style:{position:"absolute",width:s*2,height:s*2,top:c,left:l,backgroundColor:e.toCSSRGBA(),borderRadius:"50%"}}))},tse=({diameter:t})=>{let e=t*.5;return rc.default.createElement("div",{className:"circleActivityIndicator",onDragOver:i=>{i.preventDefault()},onDrop:i=>{i.preventDefault()}},rc.default.createElement("div",{style:{position:"absolute",top:`calc(50% - ${e}px)`,left:`calc(50% - ${e}px)`,width:t,height:t,pointerEvents:"none"}},rc.default.createElement(Zm,{diameter:t,color:pn({r:0,g:192,b:108,a:255}),diameterRatio:.2,startAngle:0,period:1.6}),rc.default.createElement(Zm,{diameter:t,color:pn({r:255,g:0,b:60,a:255}),diameterRatio:.2,startAngle:5,period:1.142857142857143}),rc.default.createElement(Zm,{diameter:t,color:pn({r:250,g:190,b:40,a:255}),diameterRatio:.2,startAngle:3,period:2}),rc.default.createElement(Zm,{diameter:t,color:pn({r:0,g:192,b:108,a:255}),diameterRatio:.12,startAngle:0,period:1.25}),rc.default.createElement(Zm,{diameter:t,color:pn({r:255,g:0,b:60,a:255}),diameterRatio:.12,startAngle:1,period:1.428571428571429}),rc.default.createElement(Zm,{diameter:t,color:pn({r:250,g:190,b:40,a:255}),diameterRatio:.12,startAngle:2,period:1.176470588235294}),rc.default.createElement(Zm,{diameter:t,color:pn({r:136,g:0,b:193,a:255}),diameterRatio:.12,startAngle:3,period:1.666666666666667}),rc.default.createElement(Zm,{diameter:t,color:pn({r:0,g:136,b:193,a:255}),diameterRatio:.12,startAngle:4,period:1.481481481481481})))};var d8=()=>{let t=qe(),e=t.updatingMessageOrder,[r]=Object.values(t.alerts);if(r)return nD.createElement(mf,{...r});if(e.length===0)return null;let o=e.map(i=>({id:i,message:t.updatingMessages[i]}));return o.some(i=>i.message.length>0)?nD.createElement(gy,null,o.map(i=>nD.createElement(k7,{key:i.id},i.message))):nD.createElement(tse,{diameter:160})};var oD=X(he()),rR=X(he());var rse=()=>{var o,i;let t=qe(),[e,r]=(0,rR.useState)(!1);return(0,rR.useEffect)(()=>{t.toastMessage&&(r(!0),setTimeout(()=>{r(!1)},3e3))},[t.toastMessage]),oD.createElement(si,{in:e,timeout:300,classNames:"toast",unmountOnExit:!0,onExited:()=>t.reduce(Pn(void 0))},oD.createElement("div",{className:"toast"},oD.createElement("div",{className:"toastInner","data-toast-type":(o=t.toastMessage)==null?void 0:o.type,onClick:()=>r(!1)},(i=t.toastMessage)==null?void 0:i.text.split(`
`).map((s,a)=>oD.createElement("div",{key:a},s)))))};var ed=X(he());var yr=X(he()),oR=X(he());var vr=X(he()),eg=X(he());var u8=X(on());function nR(t,e){return t.subject_name.localeCompare(e.subject_name)}function CRe(t,e){return e.some(r=>r.name===t)}function SRe(t,e){return e.some(r=>r.subject_name===t)}var nse=({store:t,onClose:e})=>{let r=Te(),[o,i]=wn({editing:!1}),{editing:s,selectedUserGroup:a,deletingUserGroupId:l}=o,c=Object.values(t.userGroups.byId).sort((x,w)=>x.name.localeCompare(w.name)),d=[],u=t.fetchStates[wt.prepareForAddCourse()];es(()=>{Doe(t)}),(0,eg.useEffect)(()=>{s||u!=="done"||c.map(x=>{A2(t,x.id)})},[t.userGroups.byId,u]),(0,eg.useEffect)(()=>{var w;let x=(w=t.userGroups.recentlyCreated)==null?void 0:w.id;x!==void 0&&(i({selectedUserGroup:t.userGroups.byId[x]}),t.reduce(()=>({userGroups:{recentlyCreated:{$set:void 0}}})))},[t.userGroups.byId,t.userGroups.recentlyCreated]),(0,eg.useEffect)(()=>{c.length===0&&i({editing:!1})},[t.userGroups.byId]);let p=(x,w)=>()=>{a&&a.id===x?i({selectedUserGroup:void 0}):i({selectedUserGroup:{id:x,name:w}})},h=()=>{i({editing:!s,selectedUserGroup:void 0,deletingUserGroupId:void 0})},f=()=>{let x=bs(r.enterNewGroupName,{maxLength:255,defaultValue:r.userGroupNamePlaceholder});if(x!==null){if(CRe(x,c))return alert(r.duplicatedUserGroup);koe(t,x)}},m=()=>{e(),t.reduce(ui(wt.prepareForAddCourse(),null))},g=x=>{if(!!s)return{deleting:l===x.id,onDeleting:w=>i({deletingUserGroupId:w?x.id:void 0}),onDelete:()=>{confirm((0,u8.sprintf)(r.confirmDeleteTarget,x.name))&&Poe(t,x)}}},v=(x,w)=>{if(x.userGroups.attendancesById[w.id].length===0){let k=oe.noMembersInGroup;x.reduce(Ps(k,{title:r.noMembersInGroup,message:r.showCodeToInviteStudents,okMessage:r.groupCode,cancelMessage:r.close,onOk:()=>{C(w),x.reduce(Ps(k,void 0))},onCancel:()=>{x.reduce(Ps(k,void 0))},color:"info"}))}},y=async x=>{await Eoe(t,x.subject_name,x.userGroup),v(t,x.userGroup)},S=async x=>{await _oe(t,x.subject),v(t,x.userGroup)},C=x=>{_2(t,x)},b;if(a&&u==="done"){let x=Object.values(t.courses.byId).filter(T=>T.user_group_id===a.id).sort(nR);for(let T of x)d.push({course_id:T.course_id,subject_name:T.subject_name,subject_id:T.subject_id,user_group_id:a.id,user_group_name:a.name});let w=[],k=t.courses.joinedCourseIds.map(T=>t.courses.byId[T]).filter(T=>T.user_group_id===a.id);for(let T of k)w.push({course_id:T.course_id,subject_id:T.subject_id,subject_name:T.subject_name,user_group_id:a.id,user_group_name:a.name});b=vr.createElement(xRe,{userGroup:a,userGroupCourses:d,joinedUserGroupCourses:w,onAddCourse:y,onJoinSubject:S})}return vr.createElement($r,{round:!t.screen.isMobile},vr.createElement(dr,null,vr.createElement(fr,null,vr.createElement(mr,null,vr.createElement(Mt,{onClick:m},r.close)),vr.createElement(kr,null,r.addCourseLabel),vr.createElement(wr,null,vr.createElement(Mt,{onClick:h},s?r.complete:r.delete))),u==="fetching"&&vr.createElement(ur,{absolute:"bottom"})),vr.createElement(mn,null,u instanceof Error&&vr.createElement("div",{className:"addCourseModalDesc"},r.groupFetchErrorOccurred),u==="done"&&vr.createElement(vr.Fragment,null,vr.createElement(TRe,{editing:s,numOfUserGroups:c.length}),vr.createElement(yo,null,c&&c.map(x=>{var w,k;return vr.createElement("div",{key:x.id,ref:T=>{(a==null?void 0:a.id)===x.id&&(T==null||T.scrollIntoView({behavior:"smooth"}))}},vr.createElement(Xn,{expandable:s?void 0:{expanded:!!a&&a.id===x.id},onClick:p(x.id,x.name),deleteOpts:g(x)},vr.createElement(gi,null,vr.createElement(to,{disablePopover:!0},x.name)),vr.createElement($n,null,vr.createElement("p",{className:"addCourseGroupMembers"},(k=(w=t.userGroups.attendancesById[x.id])==null?void 0:w.length)!=null?k:"-",r.members)),vr.createElement($n,null,vr.createElement(Mt,{disabled:o.editing,onClick:T=>{C(x),T.stopPropagation()}},r.groupCode))),a&&a.id===x.id&&b)})))),vr.createElement(LC,null,vr.createElement(qr,{className:"addCourseAddUserGroupButton",onClick:f,disabled:o.editing||u!=="done"},r.createNewGroupBtnLabel)))},xRe=({userGroup:t,onAddCourse:e,onJoinSubject:r,userGroupCourses:o,joinedUserGroupCourses:i})=>{let s=Te(),a=l=>{if(SRe(l,o))return alert(s.duplicatedSubjectError);e({subject_name:l,userGroup:t})};return vr.createElement("div",{className:"addCourseSelectSubjectView"},vr.createElement("div",{className:"addCourseSelectSectionTitle"},s.createNewSubjectBtnLabel),vr.createElement(wRe,{onSubmit:a}),vr.createElement("div",{className:"addCourseSelectSectionTitle"},s.createdSubjectsListTitle),vr.createElement("div",null,o.length===0&&vr.createElement("div",{className:"addCourseSelectSubjectNoCourse"},s.thisGroupHasNoSubjects),o.map(l=>{let c=()=>{let u={id:l.subject_id,name:l.subject_name};r({subject:u,userGroup:t})},d=i.findIndex(u=>u.course_id===l.course_id)>-1;return vr.createElement(Xn,{key:l.course_id,border:{left:!0,right:!0}},vr.createElement(gi,null,vr.createElement(to,{disablePopover:!0},l.subject_name)),vr.createElement($n,null,d?vr.createElement("span",{className:"addCourseJoinCourseMark"},s.courseJoinedMark):vr.createElement("div",{className:"addCourseJoinCourseButton",role:"button",onClick:c},s.addCourseDialogJoinCourseBtnLabel)))})))},wRe=({onSubmit:t})=>{let[e,r]=(0,eg.useState)(""),o=(0,eg.useRef)(null),i=Te(),s=()=>{setTimeout(()=>{window.confirm((0,u8.sprintf)(i.confirmCreateSubject,e))&&(t(e),r(""),o.current.value="")},0)};return vr.createElement("div",{className:"addCourseCreateSubject"},vr.createElement("input",{ref:o,onChange:l=>{r(l.target.value)},type:"text",placeholder:i.subjectNameInputPlaceholder}),vr.createElement("button",{className:"addCourseCreateSubjectButton",disabled:e.length===0,role:"button",onClick:s},i.create))},TRe=({editing:t,numOfUserGroups:e})=>{let r=Te();return vr.createElement("div",{className:"addCourseModalDesc"},t?r.chooseGroupToDelete:vr.createElement(vr.Fragment,null,e>0?vr.createElement(vr.Fragment,null,vr.createElement("p",null,r.chooseGroupToAddTo),vr.createElement("p",{className:"guideText"},r.groupDesc)):vr.createElement(vr.Fragment,null,vr.createElement("p",null,r.noGroups),vr.createElement("p",{className:"guideText"},r.groupDesc),vr.createElement("p",{className:"guideText bold"},r.createNewGroupDesc))))};var iD=({title:t,children:e})=>yr.createElement("div",{className:"courseListSection"},yr.createElement(yo,{title:t},e)),DRe=({status:t})=>{let e="red",r="",o=Te();return t==="submitted"?(r=o.submitted,e="#70b700"):(t==="unsubmitted"||t==="waiting")&&(r=o.openForSubmissions),yr.createElement($n,null,yr.createElement("div",{className:"courseListStatus",style:{color:e,border:`1px solid ${e}`}},r))},p8=({course:t,deleteOpts:e,showArrow:r,dotMark:o,status:i,onClick:s})=>yr.createElement(Xn,{key:t.course_id,deleteOpts:e,showArrow:r,onClick:s},yr.createElement(gi,null,yr.createElement(to,{disablePopover:!0},t.subject_name)),o&&yr.createElement($n,null,yr.createElement("div",{className:"courseListDotMark"})),i&&yr.createElement(DRe,{status:i})),ose=({store:t})=>((0,oR.useEffect)(()=>{t.pageVisible&&Pm(t)},[t.pageVisible]),yr.createElement(sse,{store:t,isDialog:!1,onClickCell:i=>{t.reduce(Wy(i),mu({type:"noteList",courseId:i}))},onClickOtherTeacher:()=>{t.reduce(mu({type:"unassignedCourseList"}))},onClickClosed:()=>{t.reduce(mu({type:"closedYearList"}))}})),ise=({store:t,onClickCell:e,closeDialog:r,onClickOtherTeacher:o,onClickClosed:i})=>yr.createElement(sse,{store:t,isDialog:!0,onClickCell:e,onClickOtherTeacher:o,onClickClosed:i,closeDialog:r}),sse=({store:t,onClickClosed:e,message:r,isDialog:o,onClickCell:i,onClickOtherTeacher:s,closeDialog:a})=>{let l=Te(),[c,d]=wn({editing:!1,addCourseModalOpen:!1}),{editing:u,deletingId:p}=c,h=t.updatingMessages[oe.deleteCourse]!==void 0,f=t.courses.joinedCourseIds;es(()=>{f.length===0&&QA(t)}),(0,oR.useEffect)(()=>{!o&&t.fetchStates[wt.courses()]==="done"&&f.length>0&&OJ(t,f)},[t.fetchStates[wt.courses()]]),(0,oR.useEffect)(()=>{f.length===0&&u&&d({editing:!1})},[f]);let m=x=>{if(!!u)return{deleting:x.course_id===p,onDeleting:w=>{d({deletingId:w?x.course_id:void 0})},onDelete:()=>{confirm(l.confirmDelete)?wJ(t,x):d({deletingId:void 0})}}},g=x=>{if(o)return;let w=t.submissionMessages.byCourseId[x];if((w==null?void 0:w.submission_messages.not_submitted.length)>0)return t.userInfo.is_teacher?"waiting":"unsubmitted";if((w==null?void 0:w.submission_messages.submitted.length)>0)return t.userInfo.is_teacher?"waiting":"submitted"},v=f.map(x=>t.courses.byId[x]),y=Ny(v),S=t.fetchStates[wt.courses()],C=x=>{var w;return o?!1:(w=t.mobilePushes.byCourseId[x])==null?void 0:w.some(k=>{var T,A,E,F;return((T=t.mobilePushes.byId[k])==null?void 0:T.type)==="submit"||((A=t.mobilePushes.byId[k])==null?void 0:A.type)==="share"||((E=t.mobilePushes.byId[k])==null?void 0:E.type)==="distribute"||((F=t.mobilePushes.byId[k])==null?void 0:F.type)==="comment_on_submission_answer"})},b=o&&!t.screen.isMobile;return yr.createElement($r,{round:b},yr.createElement(dr,null,yr.createElement(fr,null,yr.createElement(mr,null,o&&a&&yr.createElement(Mt,{onClick:a},l.cancel)),yr.createElement(kr,null,l.subjectTitle),yr.createElement(wr,null,t.userInfo.is_teacher&&!o&&yr.createElement(Mt,{disabled:S==="fetching"||h,onClick:()=>{d({editing:!u,deletingId:void 0})}},u?l.complete:l.edit))),S==="fetching"&&yr.createElement(ur,{absolute:"bottom"})),yr.createElement(mn,null,S instanceof Error&&yr.createElement("div",{className:"drawerContentSubDesc"},l.courseFetchErrorOccurred),S==="done"&&f.length===0&&yr.createElement("div",{className:"drawerContentSubDesc"},t.userInfo.is_teacher?yr.createElement(yr.Fragment,null,yr.createElement("p",null,l.teacherNoJoinedCourseTitle1),yr.createElement("p",null,l.noJoinedCourseTitle2),yr.createElement("p",{className:"guideText bold"},l.addCourseDesc)):yr.createElement(yr.Fragment,null,yr.createElement("p",null,l.enterClassCodeToJoinClass),yr.createElement("p",{className:"guideText bold"},l.endedCoursesDesc))),r&&yr.createElement("div",{className:"drawerContentDesc"},r),S==="done"&&f.length>0&&yr.createElement("div",null,yr.createElement("div",{className:"courseListFixedSpacer"}),y.map(x=>yr.createElement(iD,{title:x[0].user_group_name,key:x[0].user_group_id},x.sort(nR).map(w=>yr.createElement(p8,{key:w.course_id,course:w,deleteOpts:o?void 0:m(w),showArrow:!o,dotMark:C(w.course_id),status:g(w.course_id),onClick:()=>i(w.course_id)}))))),t.userInfo.is_teacher&&!o&&yr.createElement(Th,{onClick:()=>d({addCourseModalOpen:!0}),disabled:u},l.addCourseLabel),!t.userInfo.is_teacher&&!o&&yr.createElement(Th,{onClick:()=>Aoe(t),disabled:u},l.joinCourseBtnLabel),yr.createElement(iD,null,t.userInfo.is_teacher&&yr.createElement(Xn,{onClick:s,showArrow:!0},yr.createElement(gi,null,l.otherTeachersCoursesTitle)),!o&&yr.createElement(Xn,{onClick:e,showArrow:!0},yr.createElement(gi,null,l.endedCoursesTitle))),yr.createElement("div",{className:"courseListFixedSpacer"}),yr.createElement(iD,null,yr.createElement(Xn,{onClick:()=>i("self-study"),showArrow:!o},yr.createElement(gi,null,l.selfStudy)))),!o&&yr.createElement(oo,{open:c.addCourseModalOpen,onClose:()=>d({addCourseModalOpen:!1}),transition:"up"},yr.createElement(nse,{store:t,onClose:()=>d({addCourseModalOpen:!1})})))};var ase=X(he()),lse=X(he());var cse=({children:t,zIndex:e,className:r="",onClick:o=()=>{}})=>{let i=(0,lse.useRef)(null);return es(()=>{i.current.addEventListener("touchmove",s=>{s.preventDefault()})}),ase.createElement("div",{ref:i,className:`fullScreenPortal ${r}`,style:e?{zIndex:e}:{},onClick:o},t)};var cs=X(he());var dse=X(on());var h8=({store:t,forYear:e})=>cs.createElement(pse,{store:t,onClickCell:i=>{t.reduce(Wy(i),mu({type:"noteList",courseId:i}))},onClickBack:()=>{t.reduce(ov())},forYear:e,isDialog:!1}),use=({store:t,onClickCell:e,onClickBack:r})=>cs.createElement(pse,{store:t,onClickCell:e,onClickBack:r,isDialog:!0}),pse=({store:t,onClickCell:e,onClickBack:r,isDialog:o,forYear:i})=>{let s=i?t.courses.byYear[i].school:t.courses.otherTeacherCourseIds;es(()=>{s.length===0&&xJ(t)});let a=s.map(p=>t.courses.byId[p]),l=Ny(a),c=i?t.fetchStates[wt.closedCoursesByYear(i)]:t.fetchStates[wt.otherTeacherCourses()],d=Te(),u=i?(0,dse.sprintf)(d.year,i):"";return cs.createElement($r,{round:o&&!t.screen.isMobile},cs.createElement(dr,null,cs.createElement(fr,null,cs.createElement(mr,null,cs.createElement(Mt,{onClick:r},d.back)),cs.createElement(kr,null,cs.createElement(jc,null,i&&cs.createElement($c,null,u),cs.createElement(Wc,null,d.otherTeachersCoursesTitle))),cs.createElement(wr,null)),c==="fetching"&&cs.createElement(ur,{absolute:"bottom"})),cs.createElement(mn,null,c instanceof Error&&cs.createElement("div",{className:"drawerContentSubDesc"},d.courseFetchErrorOccurred),c==="done"&&s.length===0&&cs.createElement("div",{className:"drawerContentSubDesc"},d.otherTeachersCourseNotFound),c==="done"&&s.length>0&&cs.createElement("div",null,l.map(p=>cs.createElement(iD,{key:p[0].user_group_id,title:p[0].user_group_name},p.sort((h,f)=>h.subject_name.localeCompare(f.subject_name)).map(h=>cs.createElement(p8,{key:h.course_id,course:h,showArrow:!o,onClick:()=>e(h.course_id)})))))))};var Ln=X(he()),f8=X(he());var m8=X(on());var hse=function({store:e}){let r=Te(),o=e.fetchStates[wt.closedYears()],i=e.userInfo.is_teacher?e.closedYears.school:e.closedYears.user;(0,f8.useEffect)(()=>{o!=="done"&&CJ(e)},[]);let s=l=>()=>{e.reduce(mu({type:"closedCourseList",year:l}))},a=i&&i.length>0;return Ln.createElement($r,null,Ln.createElement(dr,null,Ln.createElement(fr,null,Ln.createElement(mr,null,Ln.createElement(Mt,{onClick:()=>e.reduce(ov())},r.back)),Ln.createElement(kr,null,r.endedCoursesTitle),Ln.createElement(wr,null)),o==="fetching"&&Ln.createElement(ur,{absolute:"bottom"})),Ln.createElement(mn,null,a?Ln.createElement(yo,null,i.map(l=>Ln.createElement(Xn,{onClick:s(l),showArrow:!0,key:l},Ln.createElement(gi,null,(0,m8.sprintf)(r.year,l))))):o==="done"&&Ln.createElement(mse,{isTeacher:e.userInfo.is_teacher})))},fse=function({store:e,year:r}){var u,p;let o=Te(),i=wt.closedCoursesByYear(r),s=e.fetchStates[i],l=((p=(u=e.courses.byYear[r])==null?void 0:u.user)!=null?p:[]).map(h=>e.courses.byId[h]),c=Ny(l);(0,f8.useEffect)(()=>{s!="done"&&SJ(e,r)},[]);let d=h=>()=>{e.reduce(Wy(h),mu({type:"noteList",courseId:h}))};return Ln.createElement($r,null,Ln.createElement(dr,null,Ln.createElement(fr,null,Ln.createElement(mr,null,Ln.createElement(Mt,{onClick:()=>e.reduce(ov())},o.back)),Ln.createElement(kr,null,Ln.createElement(jc,null,Ln.createElement($c,null,(0,m8.sprintf)(o.year,r)),Ln.createElement(Wc,null,o.subjectTitle))),Ln.createElement(wr,null)),s==="fetching"&&Ln.createElement(ur,{absolute:"bottom"})),Ln.createElement(mn,null,s==="done"&&c.length===0&&Ln.createElement(mse,{isTeacher:e.userInfo.is_teacher}),s==="done"&&c.length>0&&c.map(h=>Ln.createElement(yo,{title:h[0].user_group_name,key:h[0].user_group_id},h.map(f=>Ln.createElement(Xn,{showArrow:!0,onClick:d(f.course_id),key:f.course_id},Ln.createElement(gi,null,f.subject_name))))),e.userInfo.is_teacher&&Ln.createElement(yo,{title:""},Ln.createElement(Xn,{disabled:s!=="done",onClick:()=>{e.reduce(mu({type:"closedUnassignedCourseList",year:r}))},showArrow:!0},Ln.createElement(gi,null,o.otherTeachersCoursesTitle)))))},mse=({isTeacher:t})=>{let e=Te();return Ln.createElement("div",{className:"drawerContentSubDesc"},Ln.createElement("p",null,t?e.teacherNoClosedCourseTitle:e.studentNoClosedCourseTitle))};var Cse=X(lS()),kt=X(he()),Us=X(he()),Sse=X(on());function iR(t,e){let r=/^(.+?) \((\d+)\)/,o=!1,[i]=t.map(s=>(s===e&&(o=!0),s.match(r))).filter(s=>s!=null&&s[1]==e).map(s=>parseInt(s[2])).sort((s,a)=>a-s);return i!=null?`${e} (${Math.max(i,1)+1})`:o?`${e} (2)`:e}var v8=X(he()),sR=({children:t,className:e="",...r})=>v8.createElement("div",{className:["flex",e].join(" "),...r},t),xs=()=>v8.createElement("div",{className:"flexSpacer"});var vl=X(he()),cS=X(he());function aR(){return({disabled:t,sortKeys:e,sortKey:r,sortDirection:o,onChange:i,titleForKey:s})=>{var p;let[a,l]=(0,cS.useState)(!1),c=h=>()=>{i(h,o),l(!1)},d=(0,cS.useCallback)(()=>{let h=o=="ascending"?"descending":"ascending";i(r,h)},[e]),u=(0,cS.useRef)(null);return vl.createElement("div",{className:"uiSortPanel"},vl.createElement(qr,{className:"uiSortButton",disabled:t,onClick:()=>l(!0)},vl.createElement("div",{className:"uiSortButtonPopoverAnchor",ref:u},vl.createElement("div",{className:"uiSortButtonTitle"},s(r)),vl.createElement("div",{className:"uiSortButtonDropdownArrow"}))),vl.createElement(jt,{open:a,onClose:()=>l(!1),parentBounds:(p=u.current)==null?void 0:p.getBoundingClientRect()},e.map(h=>vl.createElement(Tn,{key:h,className:"uiSortMenuItem",onClick:c(h),role:"button"},vl.createElement("div",{className:"uiSortMenuItemCheckMark","data-selected":h===r}),vl.createElement("div",{className:"uiSortMenuItemTitle"},s(h))))),vl.createElement(qr,{className:"uiSortButton",disabled:t,onClick:d},vl.createElement(kRe,{direction:o})))}}var kRe=({direction:t})=>vl.createElement("div",{className:"uiSortPanelSortDirectionButton"},vl.createElement("div",{className:"uiSortPanelSortDirectionIcon","data-direction":t}));var vse=X(he()),bse=X(he());var yse=({courseId:t,noteIds:e,onFinish:r})=>{let o=Te(),i=qe(),[s,a]=wn({count:1,ctrl:new AbortController}),l=()=>{s.ctrl.abort()};return(0,bse.useEffect)(()=>{let c=Ji(i,t),{lnsClient:d}=ue,{signal:u}=s.ctrl;if(e.length===1){let[p]=e,h=i.notes.byId[p].name,f=kh(`${c}_${h}`,".loilonote");aU({noteId:p,signal:u,lnsClient:d}).then(m=>{r({type:"success",value:new File([m],f,{type:"application/octet-stream"})})}).catch(m=>{u.aborted?r({type:"cancelled"}):r({type:"error",error:m})})}else{let p=f=>{a({count:f})},h=e.map(f=>i.notes.byId[f]).sort((f,m)=>f.id-m.id);kne({lnsClient:d,notes:h,signal:u,onProgress:p,appVersion:i.appVersion}).then(async f=>{if(f.type==="cancelled")r(f);else if(f.type==="error")r(f);else{let m=Ji(i,t),g=kh(`${m}`,".loilonotes");r({type:"success",value:new File([f.value],g,{type:"application/octet-stream"})})}})}return()=>l()},[e]),vse.createElement(GC,{title:`${o.exportingNotes}
(${s.count}/${e.length})`,cancelMessage:o.cancel,onCancel:l})};var sp=kt.createContext({state:{popoverOpen:!1,memberDialogId:void 0,memberDialogOpen:!1,copyModalOpen:!1,selectedItems:[]},props:{courseId:0,onCreateShared(t){},onCreateStandard(t){},fetchState:null,onFetch(){},isEditable(t,e){return!1},onDelete(){},onOpen(t){},onRename(t){},onCopy(t){},onImport(){},onExport(){},notes:[]},dispatch:()=>{}}),xse=({courseId:t})=>{let e=qe(),[r,o]=wn({popoverOpen:!1,copyModalOpen:!1,memberDialogOpen:!1,selectedItems:[]}),i=Ane(e,t,o);(0,Us.useEffect)(()=>{i.fetchState==null&&i.onFetch()},[i.fetchState]);let{editMode:s}=r,a=Te(),l;s==="copy"?l=a.chooseNoteToCopy:s==="rename"?l=a.chooseNoteToRename:s==="manage-member"?l=a.chooseNoteToManageMember:s==="export"?l=a.chooseNoteToExport:s==="share"&&(l=a.chooseNoteToShare);let c=()=>o({memberDialogOpen:!1});return kt.createElement(sp.Provider,{value:{state:r,dispatch:o,props:i}},kt.createElement($r,null,kt.createElement(RRe,null),kt.createElement(mn,null,l&&kt.createElement("div",{className:"drawerContentDesc"},l),kt.createElement(PRe,null),kt.createElement(FRe,null)),kt.createElement(LRe,{copySuffix:a.duplicateNoteNameSuffix}),kt.createElement(oo,{open:r.memberDialogOpen,onClose:c,onExited:()=>o({memberDialogId:void 0}),transition:"up"},r.memberDialogId&&kt.createElement(i2,{courseId:xn(t),noteId:r.memberDialogId,onClose:c}))),r.exportingNotes&&kt.createElement(yse,{courseId:t,noteIds:r.exportingNotes,onFinish:i.onExport}),r.importingNotes&&kt.createElement(u2,{courseId:t,files:r.importingNotes,onImported:d=>e.reduce(zp(t,[d])),onClose:()=>o({importingNotes:void 0}),onFinish:i.onImport}),kt.createElement(oo,{open:!!r.sharingNote,onClose:()=>o({sharingNote:void 0})},r.sharingNote&&kt.createElement(hne,{noteId:r.sharingNote.id,courseId:xn(t),onClose:d=>{o(d==="cancel"?{sharingNote:void 0}:{sharingNote:void 0,editMode:void 0})}})))},PRe=()=>{let{state:t}=(0,Us.useContext)(sp),e=!t.editMode||t.editMode==="delete",r=t.editMode==="copy"||t.editMode==="export";return kt.createElement(kt.Fragment,null,e&&kt.createElement(ARe,null),kt.createElement(e2,null,kt.createElement(sR,null,r&&kt.createElement(IRe,null),kt.createElement(xs,null),kt.createElement(_Re,null))))},ERe=aR(),_Re=()=>{let t=["updatedAt","createdAt"],e=qe(),r=Te(),{props:o}=(0,Us.useContext)(sp),i=e.userPreference.noteListSortOrder,s=(l,c)=>{e.reduce(_s({noteListSortOrder:{$set:{key:l,direction:c}}}))},a=l=>l==="updatedAt"?r.sortUpdateDateOrder:r.sortCreateDateOrder;return o.notes.length===0?null:kt.createElement(ERe,{disabled:o.notes.length===0,sortKeys:t,sortKey:i.key,sortDirection:i.direction,titleForKey:a,onChange:s})},ARe=()=>{let{state:t,props:e}=(0,Us.useContext)(sp),{notes:r}=e,o=Te(),[i,s]=(0,Us.useState)(!1),a=e.fetchState!=="done"||t.editMode==="delete",l=qe(),c=async()=>{GN(l)?s(!0):u()},d=()=>{let h=new Date,f=(0,Sse.sprintf)(o.newNoteDefaultNameFmt,h.getFullYear(),h.getMonth()+1,h.getDate());f=iR(r.map(g=>g.name),f);let m=bs(o.createNewNote,{defaultValue:f,maxLength:255});if(m!==null)return m},u=()=>{let h=d();h&&e.onCreateStandard(h),s(!1)},p=()=>{let h=d();h&&e.onCreateShared(h),s(!1)};return kt.createElement("div",null,kt.createElement(Th,{style:{marginBottom:14},disabled:a,onClick:c},o.createNewNote),kt.createElement(jt,{open:i,onClose:()=>s(!1)},kt.createElement(vb,null,kt.createElement(Tn,{role:"button",onClick:u},o.standardNote),kt.createElement(Tn,{role:"button",onClick:p},o.sharedNote))))},IRe=()=>{let t=Te(),{state:e,props:r,dispatch:o}=(0,Us.useContext)(sp),i=e.selectedItems.length===r.notes.length,s=()=>{o(i?{selectedItems:[]}:{selectedItems:r.notes.filter(l=>r.isEditable(l,e.editMode)).map(l=>l.id)})},a=i?t.releaseAll:t.selectAll;return kt.createElement(Mt,{disabled:r.notes.length===0,onClick:s},a)},RRe=()=>{let{state:t,dispatch:e,props:r}=(0,Us.useContext)(sp),o=qe(),i=Te(),{editMode:s,popoverOpen:a}=t,l=!!(o.updatingMessages[oe.createNote]||o.updatingMessages[oe.deleteNote]||o.updatingMessages[oe.renameNote]),c=fd(o,r.courseId),d=Ji(o,r.courseId),u=()=>{o.reduce(ov())},p=()=>{let f=document.createElement("input");f.type="file",f.accept=".loilonote,.loilonotes",f.multiple=!0,f.onchange=()=>{!f.files||f.files.length===0||e({popoverOpen:!1,importingNotes:Array.from(f.files)})},f.click()},h=f=>{f==="import"?p():e({editMode:f,popoverOpen:!1})};return kt.createElement(dr,null,kt.createElement(fr,null,kt.createElement(mr,null,s?kt.createElement(MRe,null):kt.createElement(Mt,{onClick:u,disabled:l},i.back)),kt.createElement(kr,null,kt.createElement(jc,null,kt.createElement($c,{enablePopover:!0},c!=null?c:""),kt.createElement(Wc,{enablePopover:!0},d!=null?d:""))),kt.createElement(wr,null,kt.createElement("div",{className:"relative"},kt.createElement(NRe,null),kt.createElement(jt,{open:a,onClose:()=>e({popoverOpen:!1})},kt.createElement(BRe,{onSelect:h}))))),r.fetchState==="fetching"&&kt.createElement(ur,{absolute:"bottom"}))},FRe=()=>{let t=qe(),e=Te(),{state:r,dispatch:o,props:i}=(0,Us.useContext)(sp),{notes:s,fetchState:a}=i,{editMode:l,selectedItems:c,deletingId:d}=r,u=t.userPreference.noteListSortOrder,p=g=>{if(l==="rename"){let v=bs(e.renameNoteDialogMsg,{defaultValue:g.name,maxLength:255});v!==null&&i.onRename({noteId:g.id,prevName:g.name,nextName:v})}else l==="share"?o({sharingNote:g}):l==="manage-member"?o({memberDialogOpen:!0,memberDialogId:g.id}):i.onOpen(g)},h=g=>{if(!!i.isEditable(g,"delete")&&l==="delete")return{deleting:d===g.id,onDeleting:v=>{o({deletingId:v?g.id:void 0})},onDelete:()=>{confirm(e.confirmDelete)&&i.onDelete(g)}}},f=g=>{if(l==="copy"||l==="export")return{selected:c.findIndex(v=>v===g.id)>-1,onSelect:v=>{o(v?{selectedItems:[...c,g.id]}:{selectedItems:c.filter(y=>y!==g.id)})}}},m=(0,Us.useMemo)(()=>Array.from(s).sort(XQ(u)),[s,u.key,u.direction]);return kt.createElement(yo,null,a instanceof Error&&kt.createElement("div",{className:"drawerContentSubDesc"},e.noteFetchErrorOccurred),a==="done"&&s.length===0&&kt.createElement("div",{className:"drawerContentSubDesc"},e.noNotesFound),a==="done"&&m.map(g=>{let v=r.editMode?!i.isEditable(g,r.editMode):!1;return kt.createElement(b8,{key:g.id,note:g,disabled:v,checked:t.desktop&&t.desktop.noteId===g.id,onClick:()=>p(g),deleteOpts:h(g),selectOpts:f(g)})}))},b8=({note:t,children:e,...r})=>{let o=Te(),i="";return t.updated_at&&(i=(0,Cse.default)(t.updated_at,o.fileUpdatedAtDateTimeFmt)),kt.createElement(Xn,{...r},kt.createElement($n,null,kt.createElement("div",{className:"drawerNoteListNoteIcon"})),kt.createElement(QI,null,kt.createElement(JI,null,t.name),kt.createElement(ZI,null,i)),t.is_shared&&kt.createElement($n,null,kt.createElement("div",{className:"noteListSharedNoteIcon"})))},MRe=()=>{let{state:t,dispatch:e}=(0,Us.useContext)(sp),r=Te();return t.editMode==="copy"||t.editMode==="export"?kt.createElement(Mt,{onClick:()=>e({editMode:void 0,selectedItems:[]})},r.back):null},NRe=()=>{let{state:t,dispatch:e,props:r}=(0,Us.useContext)(sp),o=Te();if(t.editMode){if(t.editMode==="delete"||t.editMode==="rename"||t.editMode==="manage-member"||t.editMode==="share")return kt.createElement(Mt,{onClick:()=>{e({editMode:void 0,deletingId:void 0})}},o.complete);if(t.editMode==="copy")return kt.createElement(Mt,{disabled:t.selectedItems.length===0,onClick:()=>e({copyModalOpen:!0})},o.copy);if(t.editMode==="export")return kt.createElement(Mt,{disabled:t.selectedItems.length===0,onClick:()=>e({exportingNotes:t.selectedItems})},o.exportCard)}else return kt.createElement(Um,{onClick:()=>e({popoverOpen:!0})});throw new Error("invalid editmode")},Tb=({onClick:t,children:e})=>kt.createElement("div",{className:"uiPopoverItem",role:"button",onClick:t},e),BRe=({onSelect:t})=>{let e=Te(),r=qe();return kt.createElement(kt.Fragment,null,kt.createElement(Tb,{onClick:()=>t("rename")},e.rename),kt.createElement(Tb,{onClick:()=>t("copy")},e.copy),kt.createElement(Tb,{onClick:()=>t("delete")},e.delete),GN(r)&&kt.createElement(kt.Fragment,null,kt.createElement(Tb,{onClick:()=>t("share")},e.convertToSharedNote),kt.createElement(Tb,{onClick:()=>t("manage-member")},e.manageSharedNoteMember)),kt.createElement(Tb,{onClick:()=>t("import")},e.import),kt.createElement(Tb,{onClick:()=>t("export")},e.export))},LRe=({copySuffix:t})=>{let e=qe(),{state:r,props:o,dispatch:i}=(0,Us.useContext)(sp),[s,a]=(0,Us.useState)("joined");(0,Us.useEffect)(()=>{a("joined")},[]);let l=d=>{o.onCopy({destCourseId:d,noteIds:r.selectedItems,copySuffix:t})},c=()=>s==="joined"?kt.createElement(ise,{store:e,onClickCell:l,onClickOtherTeacher:()=>{a("otherTeachers")},onClickClosed:()=>{},closeDialog:()=>i({copyModalOpen:!1})}):kt.createElement(use,{store:e,onClickCell:l,onClickBack:()=>{a("joined")}});return kt.createElement(oo,{open:r.copyModalOpen,transition:"up",onClose:()=>{i({copyModalOpen:!1}),a("joined")}},c())};var wse=()=>{let t=qe(),e=()=>{t.desktop&&t.reduce(j9())},{drawer:r}=t,o=null,i=r.viewStack[r.viewStack.length-1];return i.type==="courseList"?o=ed.createElement(ose,{store:t}):i.type==="unassignedCourseList"?o=ed.createElement(h8,{store:t}):i.type==="closedYearList"?o=ed.createElement(hse,{store:t}):i.type==="noteList"?o=ed.createElement(xse,{courseId:i.courseId}):i.type==="closedCourseList"?o=ed.createElement(fse,{store:t,year:i.year}):i.type==="closedUnassignedCourseList"&&(o=ed.createElement(h8,{store:t,forYear:i.year})),ed.createElement("div",{className:"drawerWrapper"},ed.createElement(si,{timeout:250,in:r.open,unmountOnExit:!0,classNames:"drawerPortal"},ed.createElement(cse,{className:"drawerPortal",onClick:e})),ed.createElement(si,{timeout:250,in:r.open,unmountOnExit:!0,classNames:"drawer"},ed.createElement("div",{className:"drawer"},o)))};var In=X(he()),aD=X(he());var tr=X(he()),lR=X(he());var Tse=()=>{let t=qe(),e=!t.screen.isMobile,r=()=>{t.reduce(t0(!1))},o=Te(),i=({currentTarget:u})=>{let p=u.selectedIndex,h=u.options[p].value;$e(b7(h),"selected value should be of type AppLocale");let f=new URL(location.href);f.searchParams.set("hl",h),location.href=f.toString()},s=()=>{t.reduce(_s({experimentalFeatures:{enableSharedNote:{$set:!t.userPreference.experimentalFeatures.enableSharedNote}}}))},a=()=>{t.reduce(_s({experimentalFeatures:{enableWebGlEngine:{$set:!t.userPreference.experimentalFeatures.enableWebGlEngine}}}))},l=Object.entries(y7).map(([u,p])=>tr.createElement("option",{key:u,value:u},o[p])),[c,d]=(0,lR.useState)();return(0,lR.useEffect)(()=>{C4().then(u=>{!u||(t.pushTokenState==="registered"?c=o.registered:t.pushTokenState==="register failed"||t.pushTokenState==="update failed"?c=o.error:c=o.unregistered,d(c))}).catch(u=>{ge.log(u),d(o.error)})},[t.pushTokenState]),tr.createElement(oo,{open:t.preferenceOpen,onClose:r,transition:"up"},tr.createElement($r,{round:e},tr.createElement(dr,null,tr.createElement(fr,null,tr.createElement(mr,null,tr.createElement(Mt,{onClick:r},o.close)),tr.createElement(kr,null,o.preferences),tr.createElement(wr,null))),tr.createElement(mn,{className:"userPreferencePanel"},tr.createElement(yo,{title:o.zoomTitle},tr.createElement(Xn,{role:"general"},tr.createElement(gi,null,tr.createElement("label",{htmlFor:"userPreferenceInvertMouseWheel"},o.invertMouseWheel),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},tr.createElement("input",{id:"userPreferenceInvertMouseWheel",type:"checkbox",checked:t.userPreference.invertMouseWheel,onChange:()=>{t.reduce(_s({invertMouseWheel:{$set:!t.userPreference.invertMouseWheel}}))}})))),tr.createElement(Xn,{role:"general"},tr.createElement(gi,null,tr.createElement("div",null,o.mouseWheelSensitivity),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},tr.createElement("input",{type:"range",onChange:u=>{let p=parseInt(u.target.value);t.reduce(_s({mouseWheelMultiplier:{$set:p/100}}))},min:10,max:400,value:t.userPreference.mouseWheelMultiplier*100}),tr.createElement("div",{style:{paddingLeft:5,width:"44px"}},Math.round(t.userPreference.mouseWheelMultiplier*100),"%")))),tr.createElement(Xn,{role:"general"},tr.createElement(gi,null,tr.createElement("div",null,o.trackpadPinchZoomSensitivity),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},tr.createElement("input",{type:"range",onChange:u=>{let p=parseInt(u.target.value);t.reduce(_s({trackpadPinchZoomMultiplier:{$set:p/100}}))},min:10,max:400,value:t.userPreference.trackpadPinchZoomMultiplier*100}),tr.createElement("div",{style:{paddingLeft:5,width:"44px"}},Math.round(t.userPreference.trackpadPinchZoomMultiplier*100),"%"))))),tr.createElement(yo,{title:o.languageSettingTitle},tr.createElement(Xn,{role:"general"},tr.createElement(gi,null,tr.createElement("select",{className:"uiLangSelector",onChange:i,value:t.locale},l)))),tr.createElement(yo,{title:o.experimentalFeatures},tr.createElement(Xn,{role:"general"},tr.createElement($n,null,tr.createElement("label",{htmlFor:"userPreferenceExperimentalFeatures"},o.enableSharedNote)),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},tr.createElement("input",{id:"userPreferenceExperimentalFeatures",type:"checkbox",checked:t.userPreference.experimentalFeatures.enableSharedNote,onChange:s}))),t.releaseStage.match(/local|development/)&&tr.createElement(Xn,{role:"general"},tr.createElement($n,null,tr.createElement("label",{htmlFor:"userPreferenceExperimentalFeatures"},"WebGL\u30EC\u30F3\u30C0\u30E9\u30FC\u3092\u6709\u52B9\u306B\u3059\u308B")),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},tr.createElement("input",{id:"userPreferenceExperimentalFeatures",type:"checkbox",checked:t.userPreference.experimentalFeatures.enableWebGlEngine,onChange:a})))),tr.createElement(yo,{title:o.aboutThisApp},tr.createElement(Xn,{role:"general"},tr.createElement($n,null,o.version),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},t.appVersion)),c&&tr.createElement(Xn,{role:"general"},tr.createElement($n,null,o.pushTokenRegistration),tr.createElement(xs,null),tr.createElement("div",{className:"userPreferenceInputGroup"},c))),tr.createElement(yo,{title:o.connectionStatus},tr.createElement(ORe,{status:t.pushConnectionState})))))},ORe=({status:t})=>{let e=Te(),r=e.connectedToPushServer;return t==="reconnecting"?r=e.reconnectingToPushServer:t==="error"&&(r=e.couldntConnectToPushServer),tr.createElement(Xn,{role:"general"},tr.createElement($n,null,tr.createElement(BC,{status:t})),tr.createElement($n,null,tr.createElement("div",{style:{padding:"10px 0"}},r)))};var sD=he(),dS=({className:t="",children:e,...r})=>sD.createElement("div",{className:`uiInputGroup ${t}`,...r},e),cR=({children:t})=>sD.createElement("div",{className:"uiInputTitle"},t),dR=({className:t="",children:e,...r})=>sD.createElement("input",{className:`uiInputText ${t}`,...r}),Dse=({className:t="",children:e,...r})=>sD.createElement("div",{className:"uiInputSubmitWrapper"},sD.createElement("input",{className:`uiInputSubmit ${t}`,type:"submit",...r}));var kse=X(on());var An=he(),Pse=()=>{let t=qe(),e=Te(),r=!t.screen.isMobile,o=()=>t.reduce(zP(!1));return An.createElement(oo,{open:t.passwordDialogOpen,onClose:o,transition:"up"},An.createElement($r,{round:r},An.createElement(dr,null,An.createElement(fr,null,An.createElement(mr,null,An.createElement(Mt,{onClick:o},e.close)),An.createElement(kr,null,e.changePassword),An.createElement(wr,null))),An.createElement(mn,null,An.createElement(_se,{forInit:!1}))))},Ese=()=>{let t=qe(),e=!t.screen.isMobile,r=Te();return An.createElement("div",{className:"pageContainer"},An.createElement("div",{className:"passwordInitializer"},An.createElement("div",{className:"schoolName"},t.userInfo.school_name),An.createElement("div",{className:"passwordInitializerInner","data-round":e},An.createElement(_se,{forInit:!0})),An.createElement("div",{className:"logoutLink"},An.createElement("a",{href:"/logout"},r.logout))))},_se=({forInit:t})=>{let e=Te(),r=qe(),[o,i]=wn({currentPassword:"",newPassword:"",newPasswordConfirm:"",sending:!1}),s=!!o.currentPassword&&!!o.newPassword&&!!o.newPasswordConfirm,a=()=>{let l=oe.changePassword;i({sending:!0}),r.reduce(Fe(l,"")),ue.apiClient.updatePassword({currentPassword:o.currentPassword,newPassword:o.newPassword,newPasswordConfirm:o.newPasswordConfirm}).then(()=>{r.reduce(J9({title:e.passwordUpdated,okMessage:e.reload,color:"info",onOk:async()=>(location.reload(),new Promise(()=>{}))}))}).catch(yt.handleError).catch(c=>{let{message:d,unknownError:u}=Ht(c,{400:p=>{var f;let h=p.asJson();return((f=h==null?void 0:h.error)==null?void 0:f.msg)?h==null?void 0:h.error.msg:e.invalidRequest},403:p=>{var f;let h=p.asJson();return(h==null?void 0:h.message)==="old_password is incorrect."?e.currentPasswordIncorrect:((f=h==null?void 0:h.message)==null?void 0:f.includes("IP address"))?e.ipAddressRestricted:e.accessDenied}});r.reduce(Fe(l,null),Pe(l,{title:e.couldntChangePassword,message:d,unknownError:u,onOk:()=>{i({sending:!1}),r.reduce(Pe(l,void 0))},okMessage:e.back}))})};return An.createElement("div",{className:"passwordDialog"},t&&An.createElement("div",null,An.createElement("div",{className:"passwordDialogDisplayName"},(0,kse.sprintf)(e.hiUser,Ut(r.userInfo))),An.createElement("div",{className:"passwordDialogDisplayName"},e.welcomeToLns),An.createElement("p",{className:"passwordDialogMessage"},e.setNewPassword)),An.createElement("form",{onSubmit:l=>{l.preventDefault(),a()}},An.createElement("input",{type:"text",hidden:!0,readOnly:!0,autoComplete:"username",value:r.userInfo.username}),An.createElement(dS,null,An.createElement(cR,null,e.currentPassword),An.createElement(dR,{type:"password",required:!0,pattern:"^[0-9A-Za-z_-]+$",autoComplete:"current-password",onChange:l=>{i({currentPassword:l.currentTarget.value})}})),!t&&An.createElement(dS,{style:{textAlign:"center"}},An.createElement("a",{href:e.forgotPasswordPageUrl,rel:"noopener",target:"_blank"},e.forgotPasswordLinkText)),An.createElement(dS,null,An.createElement(cR,null,e.newPassword),An.createElement(dR,{type:"password",minLength:6,maxLength:128,pattern:"^[0-9A-Za-z_-]+$",autoComplete:"new-password",required:!0,onChange:l=>{i({newPassword:l.currentTarget.value})}})),An.createElement(dS,null,An.createElement(cR,null,e.newPasswordConfirm),An.createElement(dR,{type:"password",minLength:6,maxLength:128,pattern:"^[0-9A-Za-z_-]+$",autoComplete:"new-password",required:!0,onChange:l=>{i({newPasswordConfirm:l.currentTarget.value})}})),An.createElement(dS,null,An.createElement(Dse,{disabled:!s||o.sending,value:e.submitPassword}))))};var zRe="WatchTutorial",tg=t=>t.id===zRe,uR=(t,e)=>e!==void 0&&e.rev>=t.rev,pR=(t,e)=>t.filter(r=>!tg(r)&&!uR(r,e[r.id])),Ase=(t,e)=>{let r=t.findIndex(o=>!tg(o)&&!uR(o,e[o.id]));if(r>-1)return r};var Ise=(t,e,r)=>{let o=De.get().strings;return{title:o.failedPlayTutorial,okMessage:o.reload,onOk:()=>{t.reduce(Pe(oe.loadTutorial,void 0)),r()},message:e.message,cancelMessage:o.close,onCancel:()=>{t.reduce(Pe(oe.loadTutorial,void 0))}}};var Rse="https://assets.loilo.tv/loilonote/tutorial/",Fse=t=>`${Rse}${t?"":"Dev"}WebTutorialList.json`,y8=t=>Rse+t.path;var URe=async t=>{let e=De.get().strings,r;try{r=await fetch(Fse(t.releaseStage==="production"))}catch(o){return{type:"canceled",message:e.couldntGet_CheckInternetConnection}}if(r.ok){let o=await r.json(),i=T7(t.locale);return i in o?{type:"success",tutorial:o[i]}:{type:"unsupported"}}else return{type:"canceled",message:`Failed to fetch playlist (status: ${r.status})`}},hR=async t=>{ui(wt.tutorial(),"fetching");let e=await URe(t);if(e.type==="success"){let{tutorial:r}=e,o=t.userInfo.is_teacher?r.teacher:r.student,i=await ue.idb.checkedTutorials.getChecked(t.userInfo.user_id);t.reduce(()=>({tutorials:{$set:{contents:[...o,r.finishTutorial],finishTutorial:r.finishTutorial}},checkedTutorials:{$set:i},tutorialDialogOpen:{$set:pR(o,i).length>0}}),ui(wt.tutorial(),"done"))}else e.type==="unsupported"?t.reduce(ui(wt.tutorial(),null)):t.reduce(Pe(oe.loadTutorial,Ise(t,e,()=>{hR(t)})),ui(wt.tutorial(),null))},Mse=t=>{t.tutorials?t.reduce(()=>({tutorialDialogOpen:{$set:!0}})):hR(t)},Nse=(t,e)=>{ue.idb.checkedTutorials.putChecked(t.userInfo.user_id,e),t.reduce(()=>({checkedTutorials:{$set:e}}))},Bse=(t,e)=>{let{id:r,rev:o}=e;Nse(t,{...t.checkedTutorials,[r]:{rev:o}})},Lse=t=>{let{tutorials:e}=t;if(!e)return;let r={};for(let o of e.contents)tg(o)||(r[o.id]={rev:o.rev});Nse(t,r)};var Ose=()=>{let t=qe(),{userInfo:e}=t,r=Te(),[o,i]=(0,aD.useState)(),s=async()=>{window.confirm(r.confirmLogout)&&location.replace("/logout")};(0,aD.useEffect)(()=>{t.teacherToolOpen&&t.userProfileOpen&&t.reduce(l(!1))},[t.teacherToolOpen]),(0,aD.useEffect)(()=>{i(t.maintenanceInfos.length>0)},[t.maintenanceInfos]);let a=t.editor!=null||t.timelineOpen||t.materialBoxOpen||t.submissionBoxOpen,l=u=>()=>({userProfileOpen:{$set:u}}),c=()=>{let u=[l(!0)];t.teacherToolOpen&&u.push(hu(!1)),t.reduce(...u)},d=F9(t);return In.createElement(In.Fragment,null,In.createElement("div",{className:"userProfile",style:{display:a?"none":"flex"}},In.createElement("div",{className:"userProfileUserNameWrapper"},In.createElement("div",{className:"userProfileUserName",onClick:c},In.createElement("div",{style:{position:"relative"}},In.createElement("div",{className:"profileIcon"}),d&&In.createElement("div",{style:{position:"absolute",top:-3,left:-3}},In.createElement(Qz,{status:d.severity}))),!t.screen.isMobile&&In.createElement("div",{className:"name"},Ut(e)),In.createElement("div",{className:"arrowIcon"})),In.createElement("div",{className:"userProfilePopoverAnchor"},In.createElement(jt,{open:t.userProfileOpen,onClose:()=>t.reduce(l(!1))},In.createElement("div",{className:"userProfilePopover"},In.createElement(Tn,null,In.createElement("div",{className:"userProfilePopoverAccountItem"},In.createElement("div",{style:{marginBottom:10}},t.isSsoUser?`${e.school_name}`:`${e.username}@${e.school_name}`),In.createElement("div",null,Ut(e)))),In.createElement(DT,{href:w7(t.locale,t.userInfo.school_country),target:"_blank"},r.support),t.tutorials&&In.createElement(Tn,{role:"button",onClick:()=>{t.reduce(l(!1)),Mse(t)}},In.createElement("div",null,r.watchTutorial)),t.userInfo.school_country.toLocaleLowerCase()==="jp"&&In.createElement(DT,{href:r.searchExampleLessonPlansPageUrl,target:"_blank"},r.searchExampleLessonPlans),In.createElement(Tn,{role:"button",onClick:()=>{t.reduce(l(!1),t0(!0))}},d&&In.createElement("div",{className:"userInfoNotificationCount"},d.count),In.createElement("div",null,r.preferences)),!t.isSsoUser&&In.createElement(Tn,{role:"button",onClick:()=>{t.reduce(l(!1),zP(!0))}},r.changePassword),In.createElement(DT,{href:x7(t.locale),target:"_blank"},In.createElement("div",null,In.createElement("div",null,r.serviceStatus),o&&In.createElement("div",{className:"userProfileMaintenanceInfo"},r.maintenanceScheduled))),e.is_teacher&&In.createElement(DT,{href:`${t.lnsEndpoint}/users/sign_in`,target:"_blank"},r.adminPage),In.createElement(Tn,{role:"button",onClick:s},r.logoutOption))))),(!t.screen.isMobile||t.screen.width>=480)&&In.createElement(pI,{store:t})),In.createElement(Tse,null),In.createElement(Pse,null))};var nae=X(lS()),jn=X(he()),kb=X(he());var Hs=X(he()),C8=X(he()),zse=X(on());var uS=({store:t,courseId:e,message:r,onClose:o,onNoteSelect:i,onNoteReady:s})=>{var f,m;(0,C8.useEffect)(()=>{l!=="done"&&yT(t,e)},[]),(0,C8.useEffect)(()=>{var g;t.noteManagerReady&&e===((g=t.desktop)==null?void 0:g.courseId)&&s()},[t.noteManagerReady,(f=t.desktop)==null?void 0:f.courseId]);let a=(m=t.notes.byCourseId[e])!=null?m:[],l=t.fetchStates[wt.notes(e)],c=()=>{let g=new Date,v=(0,zse.sprintf)(u.newNoteDefaultNameFmt,g.getFullYear(),g.getMonth()+1,g.getDate());v=iR(a.map(C=>t.notes.byId[C].name),v);let y=bs(u.createNewNote,{defaultValue:v,maxLength:255});if(y===null)return;let S=sC(0).toJSON();i==null||i(),KI(t,{name:y,courseId:e,note:S})},d=g=>()=>{i==null||i(),g.is_shared?FC(t,{courseId:e,noteId:g.id,pushState:!0}):RC(t,{courseId:e,noteId:g.id,pushState:!0})},u=Te(),p=fd(t,e),h=Ji(t,e);return Hs.createElement($r,{round:!t.screen.isMobile},Hs.createElement(dr,null,Hs.createElement(fr,null,Hs.createElement(mr,null,Hs.createElement(Mt,{onClick:o},u.back)),Hs.createElement(kr,null,Hs.createElement(jc,null,Hs.createElement($c,{enablePopover:!0},p!=null?p:""),Hs.createElement(Wc,{enablePopover:!0},h!=null?h:"")))),l==="fetching"&&Hs.createElement(ur,{absolute:"bottom"})),Hs.createElement(mn,null,Hs.createElement("div",{className:"noteSelectionDialogMessage"},r),Hs.createElement(Th,{onClick:c},u.createNewNote),l==="done"&&a.length===0&&Hs.createElement("div",{className:"drawerContentSubDesc"},u.noNotesFound),l instanceof Error&&Hs.createElement("div",{className:"drawerContentSubDesc"},u.noteFetchErrorOccurred),l==="done"&&a.length>0&&Hs.createElement(yo,null,a.map(g=>t.notes.byId[g]).map(g=>Hs.createElement(b8,{note:g,key:g.id,onClick:d(g)})))))};var lr=X(he()),ap=X(he());var Yd=X(he()),fS=X(he());var Use=X(he());var rg=({onClose:t})=>{let e=Te();return Use.createElement(mf,{title:e.submissionBoxDeletedOrNotExisted,okMessage:e.close,color:"error",onOk:t})};var pt=X(he()),Ya=X(he());var lD=X(on());var bl=X(he()),Mh=X(he());var pS=X(he()),S8=X(he());var Hse=X(on());var hS=({submission:t,courseId:e,answers:r,children:o})=>{let i=Te(),s=qe(),[a,l]=(0,S8.useState)(!1),[c,d]=(0,S8.useState)();return pS.createElement(pS.Fragment,null,o(()=>{var m,g;let p=Kx("submitButton"),h=r.map(v=>{let y=t.hide_author?i.answer:(0,Hse.sprintf)(i.submissionName,v.author_name),S=t.hide_author?void 0:v.author_id;return{id:v.id,extension:".lnfragment",asset_proxy:void 0,author_id:S,comment_snapshot_id:void 0,name:y,timestamp:v.timestamp}}),f=new Wx(h,{x:(m=p==null?void 0:p.x)!=null?m:0,y:(g=p==null?void 0:p.y)!=null?g:0});s.desktop?(Nt(f),gC(s)):(d(f),l(!0))}),pS.createElement(oo,{open:a,onClose:()=>{d(void 0),l(!1)},transition:"fade"},pS.createElement(uS,{store:s,courseId:e,message:i.selectNoteForAddingMaterials,onClose:()=>{d(void 0),l(!1)},onNoteReady:()=>{Nt(c),gC(s)}})))};var fR=()=>{let{dispatch:t}=(0,Mh.useContext)(aa);return bl.createElement("div",{className:"submissionListMiddleHeaderItem"},bl.createElement(qr,{className:"submissionListMiddleHeaderExportButton",onClick:()=>{t({mode:"export"})}}))},Gse=()=>bl.createElement(bl.Fragment,null,bl.createElement(x8,null),bl.createElement(xs,null),bl.createElement(HRe,null),bl.createElement(GRe,null)),HRe=()=>{let t=Te(),e=qe(),{state:r,courseId:o,submission:i}=(0,Mh.useContext)(aa),s=r.selectedAnswers.map(a=>e.submissionAnswers.byId[a]);return bl.createElement(hS,{courseId:o,submission:i,answers:s},a=>bl.createElement(Nh,{disabled:r.selectedAnswers.length===0,onClick:a},t.use))},GRe=()=>{let t=Te(),e=qe(),[r,o]=(0,Mh.useState)();(0,Mh.useEffect)(()=>{if(r)return()=>URL.revokeObjectURL(r)},[r]);let{state:i,submission:s,sortedAnswers:a,courseId:l}=(0,Mh.useContext)(aa),c=()=>{let d=Vt.regularFont.getOrFetch(),u=Vt.boldFont.getOrFetch();if(!d||!u)throw new kl;let p=new BT({ctx:ue,regularFont:d,boldFont:u}),h=oe.exportCard,f=i.selectedAnswers.length,m=nn(a.map(y=>y.submissionAnswer).filter(y=>y!=null).map(y=>[y.id,y])),g=i.selectedAnswers.map(y=>{let S=m[y];return{id:y,author:{id:S.author_id,name:S.author_name}}}),v=y=>{let S=`${t.exportingCardAsPdf} (${y}/${f})`;e.reduce(Fe(h,S))};v(0),p.exportDocumentsAsPdf({documents:g,onProgress:v,printAuthor:!s.hide_author}).then(y=>{e.reduce(Fe(h,null));let S=URL.createObjectURL(y),C=document.createElement("a");C.href=S;let b=fd(e,l),x=Ji(e,l);C.download=kh(`${b}_${x}_${s.message}`,".pdf"),C.click(),o(S)}).catch(y=>{e.reduce(Fe(h,null),Pe(h,{title:t.couldntExportCard,...Ht(y),onOk:()=>e.reduce(Pe(h,void 0)),okMessage:t.back}))})};return bl.createElement(Nh,{disabled:i.selectedAnswers.length===0,onClick:c},t.pdf)},x8=()=>{let{state:t,dispatch:e,answers:r,sortedAnswers:o}=(0,Mh.useContext)(aa),i=Te(),s=t.selectedAnswers.length===r.length;return bl.createElement(Nh,{onClick:()=>{if(s)e({selectedAnswers:[]});else{let l=o.filter(c=>!!c.submissionAnswer).map(c=>c.submissionAnswer.id);e({selectedAnswers:l})}}},s?i.releaseAll:i.selectAll)};var ng=X(Dm());function Vse(t,e=new Date){let r=e.getFullYear(),o=e.getMonth(),i=e.getDate(),s=e.getHours(),a=e.getMinutes(),l=Gr(r,2),c=t.getFullYear()>r,d=c?Gr(1,12):Gr(o+1,12-o),u=t.getMonth()>o,p=VRe(t),h=c||u?Gr(1,p):Gr(i,p+1-i),f=t.getDate()>i,m=c||u||f?Gr(0,24):Gr(s,24-s),g=t.getHours()>s,v=c||u||f||g?Gr(0,60):Gr(a,60-a);return{year:l,month:d,date:h,hour:m,minutes:v}}function VRe(t){let e=t.getMonth()+1,r=t.getFullYear(),o=r%4==0&&!(r%100==0&&r%400!=0);return[1,3,5,7,8,10,12].includes(e)?31:[4,6,9,11].includes(e)?30:o?29:28}var w8="anonymous",$se=()=>{let t=qe(),{state:e,dispatch:r,answers:o,submissionNumber:i,courseId:s,answersRevealed:a,submission:l}=(0,Ya.useContext)(aa),c=o.filter(y=>y.reply_status.annotation_layer_updated&&y.author_id!==t.userInfo.user_id),[d,u]=$a(t,!1),p=Te(),h=()=>{let y=l.reveal_answer;(y!==Bi.No||confirm(p.confirmAnswerShare))&&fC(t,{courseId:s,submissionNumber:i,opts:{reveal_answer:y===Bi.No?Bi.Yes:Bi.No}})},f=()=>{let y=c.length;if(y<1)return;let S=De.get(),C=(0,lD.sprintf)(p.confirmSendBackAll,y,S.pluralSafeSuffix(y));confirm(C)&&LJ(t,{list:c.map(b=>({documentId:b.id,pageCount:b.page_count,fallback:async(x,w)=>{let T=(await ue.lnsClient.downloadDocument(b.id).then(ta).then(A=>ra({id:b.id,file:A,author:Qi(t,b.author_id)}))).memberAt(x);if(!T)throw new Error("member not found at "+x);return w==="document"?zA(T):UA(T)}}))})},m=y=>{fC(t,{courseId:s,submissionNumber:i,opts:{expiry:y.toISOString()}})},g=()=>{r({mode:"comparison"})},v=!(!t.userInfo.is_teacher&&(l.hide_author||l.reveal_answer===Bi.No));return pt.createElement("div",{className:"submissionListMiddleHeader"},e.mode==="comparison"&&pt.createElement(pt.Fragment,null,pt.createElement(x8,null),pt.createElement(xs,null),pt.createElement(Nh,{disabled:e.selectedAnswers.length===0,onClick:()=>{!cD(e.answerVisible,r)||t.reduce(gu(e.selectedAnswers))}},p.startComparing)),e.mode==="default"&&pt.createElement(pt.Fragment,null,t.userInfo.is_teacher&&pt.createElement("div",{className:"submissionListMiddleHeaderItem"},pt.createElement(qr,{className:"submissionListAnswerOnButton","data-off":!e.answerVisible,onClick:()=>r({answerVisible:!e.answerVisible})})),v&&pt.createElement(WRe,null),!t.userInfo.is_teacher&&pt.createElement(pt.Fragment,null,pt.createElement(xs,null),pt.createElement(T8,null),a&&pt.createElement(fR,null),pt.createElement(D8,{store:t,expiry:l.expiry,isSubmitted:l.submitted,onChangeExpiry:m}),l.reveal_answer===Bi.Yes&&pt.createElement(Nh,{onClick:g},p.comparison)),t.userInfo.is_teacher&&!t.screen.isMobile&&pt.createElement(pt.Fragment,null,pt.createElement(Nh,{onClick:h},pt.createElement("span",{className:"submissionListMiddleHeaderLineCramp"},l.reveal_answer===Bi.No?p.startAnswerSharing:p.sharingAnswers)),pt.createElement(Nh,{onClick:f,disabled:c.length===0},pt.createElement("span",{className:"submissionListMiddleHeaderLineCramp"},p.sendBackAll)),pt.createElement(xs,null),pt.createElement(T8,null),pt.createElement(D8,{store:t,expiry:l.expiry,isSubmitted:l.submitted,onChangeExpiry:m}),pt.createElement(fR,null),pt.createElement(Nh,{onClick:g},pt.createElement("span",{className:"submissionListMiddleHeaderLineCramp"},p.comparison))),t.userInfo.is_teacher&&t.screen.isMobile&&pt.createElement(pt.Fragment,null,pt.createElement(xs,null),pt.createElement(T8,null),pt.createElement(D8,{store:t,expiry:l.expiry,isSubmitted:l.submitted,onChangeExpiry:m}),pt.createElement(fR,null),pt.createElement("div",{className:"submissionListMiddleHeaderItem"},pt.createElement(Um,{onClick:()=>u(!0)}),pt.createElement(jt,{open:d,onClose:()=>u(!1)},pt.createElement(Tn,{onClick:h},l.reveal_answer===Bi.No?p.startAnswerSharing:p.endAnswerSharing),pt.createElement(Tn,{onClick:f,disabled:c.length===0},p.sendBackAll),pt.createElement(Tn,{onClick:()=>{r({mode:"comparison"}),u(!1)}},p.compare))))),e.mode==="export"&&pt.createElement(Gse,null))},$Re=So(),T8=()=>{let t=Te(),e=qe(),{state:r,dispatch:o}=(0,Ya.useContext)(aa),i=k8(window.screen),[s,a]=(0,Ya.useState)(!1),l=u=>{$Re(()=>{e.reduce(_s({submissonListColumnSize:{$set:u}}))},1e3)},c=u=>{let p=Number(u.target.value);o({listColumnSize:p,style:gR(p)}),l(p)},d=()=>{o({listColumnSize:i,style:gR(i)}),l(i)};return pt.createElement("div",null,pt.createElement(qr,{className:"submissionColumnSizePopoverButton submissionListMiddleHeaderItem",onClick:()=>a(!0)}),pt.createElement(jt,{open:s,onClose:()=>a(!1)},pt.createElement("div",{className:"submissionColumnSizePopoverItem"},pt.createElement("div",{className:"submissionColumnSizePopoverItemTitle"},t.changeLayout),pt.createElement("div",{className:"submissionColumnSizePopoverItemDescription"},t.changeLayoutDescription),pt.createElement("div",{className:"submissionColumnSizeSliderWrapper"},pt.createElement("div",{className:"submissionColumnSizeSliderLeftIcon"}),pt.createElement("input",{className:"submissionColumnSizeSlider",type:"range",min:"1",max:"8",value:r.listColumnSize,step:"1",onChange:c}),pt.createElement("div",{className:"submissionColumnSizeSliderRightIcon"}))),pt.createElement(Tn,{role:"button",onClick:()=>d()},t.resetLayout)))},WRe=()=>{let t=qe(),{submission:e,courseId:r,submissionNumber:o,state:i,dispatch:s}=(0,Ya.useContext)(aa),[a,l]=(0,Ya.useState)(!1),c=Te(),d=p=>async()=>{if(e.hide_author&&p!==w8){let h="";if(p==="byAuthorName"?h=c.nameOrder:p==="byUpdatedDate"?h=c.updateOrder:p==="bySubmissionDate"&&(h=c.submitOrder),!confirm((0,lD.sprintf)(c.confirmRevealSubmitterNames,h)))return}l(!1),!((e.hide_author||p==="anonymous")&&!await fC(t,{courseId:r,submissionNumber:o,opts:{hide_author:p===w8}}))&&p!==w8&&s({orderType:p})},u={byAuthorName:c.nameOrder,bySubmissionDate:c.submitOrder,byUpdatedDate:c.updateOrder};return pt.createElement("div",{className:"submissionListMiddleHeaderItem submissionListMiddleHeaderSortButton"},pt.createElement(qr,{className:"primaryTextButton submissionListMiddleHeaderSort submissionListMiddleButton",onClick:()=>l(!0)},pt.createElement("span",{className:"submissionListMiddleHeaderLineCramp"},e.hide_author?c.anonymous:u[i.orderType])),pt.createElement(jt,{open:a,onClose:()=>l(!1)},pt.createElement(Tn,{onClick:d("bySubmissionDate")},c.submitOrder),pt.createElement(Tn,{onClick:d("byUpdatedDate")},c.updateOrder),pt.createElement(Tn,{onClick:d("byAuthorName")},c.nameOrder),t.userInfo.is_teacher&&pt.createElement(Tn,{onClick:d("anonymous")},c.anonymous)))},D8=({expiry:t,store:e,isSubmitted:r,onChangeExpiry:o})=>{let i=Te(),[s,a]=$a(e,!1),l=()=>a(!1),c=bc(),d,u;t&&(d=new Date(t),u=new Gp(d.getTime()-Date.now()));let p=(0,Ya.useRef)();(0,Ya.useEffect)(()=>((u==null?void 0:u.isPast())===!1&&(p.current=setTimeout(()=>{c()},1e3)),()=>clearTimeout(p.current)));let h=v=>{o(v),a(!1)},f=e.userInfo.is_teacher?pt.createElement(jt,{open:s,onClose:l},pt.createElement(jRe,{expiry:d,onOk:h})):pt.createElement(jt,{open:s,onClose:l},pt.createElement("div",{className:"submissionExpiryText"},pt.createElement("div",{className:"submissionExpiryTextSub"},i.expiryDialogTitle),pt.createElement("div",{className:"submissionExpiryTextMain"},(0,ng.default)(d).format("lll")))),m="";u&&!u.isPast()&&(m=r?"#70b700":"#ff1d1d");let g=i.noExpiry;return u&&(g=u.isPast()?i.expiry:u.toRelativeString()),pt.createElement("div",{className:"submissionListMiddleHeaderItem"},pt.createElement(Mt,{className:"submissionListMiddleHeaderButton",onClick:()=>a(!0),style:{color:m}},pt.createElement("div",{className:"submissionListMiddleHeaderClock",style:{backgroundColor:m}}),pt.createElement("div",{className:"submissionListMiddleHeaderDeadline"},g)),f)},Nh=({className:t="",onClick:e,disabled:r,children:o})=>pt.createElement(qr,{className:`primaryTextButton submissionListMiddleHeaderItem submissionListMiddleHeaderButton ${t}`,disabled:r,onClick:e},pt.createElement("span",null,o)),jRe=({expiry:t,onOk:e})=>{let r=(0,Ya.useMemo)(()=>new Date,[]),o=!t||r>t?r:t,[i,s]=(0,Ya.useState)(o),a=c=>s(c<r?r:c),l=Te();return pt.createElement("div",{className:"submissionExpiryDialog"},pt.createElement(qRe,{date:i,onChange:a}),pt.createElement("div",{className:"submissionExpiryDialogItem",style:{textAlign:"center"}},(0,ng.default)(i).format("lll")," | ",(0,ng.default)().isBefore(i)?(0,ng.default)(i).fromNow():l.hasExpired),pt.createElement("div",{className:"submissionExpiryDialogItem"},pt.createElement(KRe,null,t&&r<t&&pt.createElement(mR,{key:0,onClick:()=>{s(new As)}},l.closeNow),pt.createElement(mR,{key:1,onClick:()=>{s(new As().after(10*pr.min))}},l.closeAfterTen),pt.createElement(mR,{key:2,onClick:()=>{s(As.tomorrow().after(-2*pr.hour))}},l.closeToday),pt.createElement(mR,{key:3,onClick:()=>{e(i)}},l.okay))))},KRe=({children:t})=>pt.createElement("div",{className:"uiSelector",style:{width:"100%"}},t),mR=({children:t,onClick:e,flex:r})=>pt.createElement("div",{className:"uiSelectorItem",style:{flex:r},role:"button",onClick:e},t),qRe=({onChange:t,date:e})=>{let r=(0,Ya.useMemo)(()=>new Date,[]),o=(0,ng.default)().add(1,"year").format("YYYY-MM-DDTHH:mm"),i=(0,ng.default)(r).format("YYYY-MM-DDTHH:mm"),s=Te();if(HE())return pt.createElement("input",{required:!0,type:"datetime-local",min:i,max:o,value:(0,ng.default)(e).format("YYYY-MM-DDTHH:mm"),onChange:a=>{let l=a.target.value;l&&t(new Date(l))}});{let a=Vse(e,r);return pt.createElement("div",null,pt.createElement("div",{className:"submissionDateTimeInputGroup"},pt.createElement("label",{className:"submissionDateTimeInputLabel"},s.dateLabel),pt.createElement("div",{className:"submissionDateTimeInputItem"},pt.createElement("select",{name:"year",value:e.getFullYear(),onChange:l=>{let c=new Date(e);c.setFullYear(+l.target.value),t(c)}},a.year.map(l=>pt.createElement("option",{key:l,value:l},l))),pt.createElement("select",{name:"month",value:e.getMonth(),onChange:l=>{let c=new Date(e);c.setMonth(+l.target.value),t(c)}},a.month.map(l=>pt.createElement("option",{key:l,value:l-1},l))),pt.createElement("select",{name:"date",value:e.getDate(),onChange:l=>{let c=new Date(e);c.setDate(+l.target.value),t(c)}},a.date.map(l=>pt.createElement("option",{key:l,value:l},l))))),pt.createElement("div",{className:"submissionDateTimeInputGroup"},pt.createElement("label",{className:"submissionDateTimeInputLabel"},s.timeLabel),pt.createElement("div",{className:"submissionDateTimeInputItem"},pt.createElement("select",{name:"hour",value:e.getHours(),onChange:l=>{let c=new Date(e);c.setHours(+l.target.value),t(c)}},a.hour.map(l=>pt.createElement("option",{key:l,value:l},(0,lD.sprintf)("%02d",l)))),pt.createElement("select",{name:"minute",value:e.getMinutes(),onChange:l=>{let c=new Date(e);c.setMinutes(+l.target.value),t(c)}},a.minutes.map(l=>pt.createElement("option",{key:l,value:l},(0,lD.sprintf)("%02d",l)))))))}};function cD(t,e,r=!0){return t?!0:confirm(De.get().strings.confirmDisplayAnswers)?(r&&e({answerVisible:!0}),!0):!1}var Wse=X(lS()),On=X(he()),Db=X(he());var jse=({isCourseAnswersLoaded:t})=>{let e=qe(),{state:r,dispatch:o,sortedAnswers:i,answersRevealed:s,submission:a,courseId:l}=(0,Db.useContext)(aa);(0,Db.useEffect)(()=>{e.userInfo.is_teacher||tI({store:e,courseId:l,submissionNumber:a.submission_number})},[e.mobilePushes,a.submission_number]);let c=u=>()=>{var p;if(r.mode==="comparison"||r.mode==="export"){let h=r.selectedAnswers.indexOf(u);if(h>-1){let f=[...r.selectedAnswers];f.splice(h,1),o({selectedAnswers:f})}else o({selectedAnswers:[...r.selectedAnswers,u]})}else{if(!cD(r.answerVisible,o,!1))return;let h=i.filter(g=>g.submissionAnswer).map(g=>g.submissionAnswer.id),f=(p=e.submissionAnswerPageIndexStates[u])!=null?p:0,m=r.orderType;e.reduce(Es({id:u,pageIndex:f,orderedAnswers:h,orderType:m}))}},d={opacity:t?1:0,gridTemplateColumns:r.style.gridTemplateColumnsStyle};return On.createElement(mn,null,On.createElement("div",{className:"submissionListBody relative",style:d},i.map(u=>{var f,m,g,v;if(!u.submissionAnswer)return On.createElement(YRe,{key:`unSubmitted-${u.user.id}`,authorName:a.hide_author?void 0:Ut(u.user),isMine:u.user.id===e.userInfo.user_id,isTeacher:e.userInfo.is_teacher,authorIsTeacher:u.user.is_teacher,attended:u.attendantStatus==="good",visible:r.answerVisible,reveal:s});let p=(f=e.submissionAnswerPageIndexStates[u.submissionAnswer.id])!=null?f:0,h=a.hide_author?void 0:u.submissionAnswer.author_name;return My(u.submissionAnswer,a,e.userInfo)?On.createElement(QRe,{key:"answer-"+u.submissionAnswer.id,pageIndex:p,visible:r.answerVisible,onClick:c(u.submissionAnswer.id),authorName:h,expiry:(m=a.expiry)!=null?m:void 0,selected:r.selectedAnswers.indexOf(u.submissionAnswer.id)>-1,data:u.submissionAnswer,mobilePushesEntities:(v=(g=e.mobilePushes.byCourseId[l])==null?void 0:g.map(y=>e.mobilePushes.byId[y]))!=null?v:[]}):On.createElement(XRe,{key:"hidden-"+u.submissionAnswer.id,isMine:u.submissionAnswer.author_id===e.userInfo.user_id,authorName:h,authorIsTeacher:u.submissionAnswer.author_is_teacher,attended:u.attendantStatus==="good",reveal:s})})))},YRe=({authorName:t,isMine:e,isTeacher:r,authorIsTeacher:o,attended:i,visible:s,reveal:a})=>{let{state:l}=(0,Db.useContext)(aa),c=()=>{let d="#dcdddd",u="#aaaaaa",p="#76ceff",h="#0b8ef9";return e?s?u:h:i?r&&!s?h:!r&&!a?p:u:d};return On.createElement("div",{className:"submissionListCell",role:"button","data-owner-type":P8({authorName:t,isMine:e,authorIsTeacher:o}),"data-disabled":!0,style:l.style.listCellStyle},On.createElement("div",{className:"submissionListCellContent"},On.createElement("div",{className:"submissionListCellNotAnswered",style:{backgroundColor:c()}})),On.createElement("div",{className:"submissionListCellHeader","data-invisible":t===void 0},On.createElement(to,{className:"submissionListCellUserName"},t)))},XRe=({isMine:t,authorName:e,authorIsTeacher:r,attended:o,reveal:i})=>{let{state:s}=(0,Db.useContext)(aa);return On.createElement("div",{className:"submissionListCell","data-owner-type":P8({authorName:e,isMine:t,authorIsTeacher:r}),role:"button","data-disabled":!0,style:s.style.listCellStyle},On.createElement("div",{className:"submissionListCellContent"},On.createElement("div",{className:"submissionListCellHiddenContent","data-blue":!i&&o})),On.createElement("div",{className:"submissionListCellHeader","data-invisible":e===void 0},On.createElement(to,{className:"submissionListCellUserName"},e)))},QRe=({authorName:t,visible:e,selected:r,pageIndex:o,onClick:i,data:s,disabled:a,expiry:l,mobilePushesEntities:c})=>{let{state:d,courseId:u,submissionNumber:p}=(0,Db.useContext)(aa),{userInfo:h}=qe(),f=Te(),m=s.author_is_teacher,g=s.author_id===h.user_id,v=new Date(s.timestamp),y=new Date().getUTCFullYear()===v.getUTCFullYear()?f.submissionListDateShortFmt:f.submissionListDateFullFmt,S=l&&new Date(l).getTime()-v.getTime()>0?"#70b700":"#555555",C=!!c.find(b=>b.data.type==="submit"&&b.data.course_id===u&&b.data.submission_number===p&&b.data.author_id===s.author_id);return On.createElement("div",{className:"submissionListCell","data-owner-type":P8({authorName:t,isMine:g,authorIsTeacher:m}),style:d.style.listCellStyle},On.createElement("div",{className:"submissionListCellContent",role:"button","data-disabled":a,onClick:i},On.createElement(Jc,{id:s.id,thumbnails:{document:s.document_thumbnail,annotations:s.annotation_thumbnail},index:o,updatable:!0,skipForKnown404Url:!1}),On.createElement(wa,{in:!e},On.createElement("div",{className:"submissionListCellHiddenContent","data-blue":!0,"data-image":!0}))),On.createElement("div",{className:"submissionListCellFooter"},On.createElement("div",{className:"submissionListCellSubmittedDate",style:{color:S}},(0,Wse.default)(s.timestamp,y)),s.page_count>1&&On.createElement("div",{className:"submissionListCellFooterPageIndex"},`${o+1}/${s.page_count}`)),r&&On.createElement("div",{className:"submissionListCellSelectedMark"},On.createElement(Fr,{src:"/img/Check@2x.png"})),On.createElement("div",{className:"submissionListCellHeader","data-invisible":t===void 0},On.createElement("div",{className:"submissionListCellReplyBase"}),On.createElement(to,{className:"submissionListCellUserName",disablePopover:!t},t),On.createElement(JRe,{replyStatus:s.reply_status,isMine:g,isTeacher:h.is_teacher,isUpdated:C})))},JRe=({replyStatus:t,isMine:e,isTeacher:r,isUpdated:o})=>{let{done:i,annotation_layer_updated:s,extension_layer_updated:a}=t,c=(()=>{if(r){if(e)return;if(o)return"dot";if(i&&!s&&!a)return"check";if(s)return"pencil"}else{if(!e)return;if(i&&!s&&!a||s)return"dot"}})();return On.createElement("div",{className:"submissionListCellReplyBase"},c==="dot"&&On.createElement("div",{className:"redDotIcon"},On.createElement("div",{className:"redDotIconInner"})),c==="pencil"&&On.createElement("div",{className:"submissionListCellIconBase redPencilIcon"}),c==="check"&&On.createElement("div",{className:"submissionListCellIconBase redCheckIcon"}))};function P8(t){let{authorName:e,isMine:r,authorIsTeacher:o}=t;return e===void 0?"":r?"self":o?"teacher":void 0}var ws=X(he()),Kse=X(he());var qse=()=>{let t=qe(),e=Te(),{userInfo:r}=t,{state:o,submission:i,courseId:s,submissionNumber:a,dispatch:l,onBack:c,sortedAnswers:d}=(0,Kse.useContext)(aa),[u,p]=$a(t,!1),h=()=>{let v=bs(e.enterTaskName,{defaultValue:i.message,maxLength:255});v&&fC(t,{courseId:s,submissionNumber:a,opts:{submission_message:v}})},f=()=>{if(!cD(o.answerVisible,l))return;let v=d.filter(y=>!!y.submissionAnswer).map(y=>y.submissionAnswer.id);HA({store:t,anonymous:i.hide_author,answers:v}),p(!1)},m=()=>{l({mode:"default",selectedAnswers:[]})},g=i.message;return g||(g=e.describeTask),ws.createElement(dr,null,ws.createElement(fr,null,ws.createElement(mr,null,["export","comparison"].includes(o.mode)?ws.createElement(Mt,{onClick:m},e.cancel):ws.createElement(OC,{onClick:c})),o.mode==="comparison"&&ws.createElement(kr,null,e.selectAnswersCompare),o.mode==="export"&&ws.createElement(kr,null,e.selectAnswers),o.mode==="default"&&ws.createElement(kr,null,r.is_teacher?ws.createElement("div",{className:"submissionListTitle",role:"button",onClick:h},ws.createElement(to,{disablePopover:!0},g),ws.createElement("div",{className:"submissionListTitlePencilIcon"})):ws.createElement(to,null,i.message)),ws.createElement(wr,null,t.userInfo.is_teacher&&ws.createElement(ws.Fragment,null,o.mode==="default"&&ws.createElement(Mt,{className:"submissionListNavHeaderButton",onClick:()=>p(!0)},e.shareScreen),ws.createElement(HU,{onStart:f,onClose:()=>p(!1),open:u,confirmMessage:e.confirmStartScreenSharing})))))};var aa=Yd.createContext({dispatch(){},onBack(){},answers:[],sortedAnswers:[],courseId:0,submissionNumber:0,answersRevealed:!1,submission:{expiry:"",hide_author:!1,message:"",reveal_answer:Bi.No,submission_number:0,submit_date:"",submitted:!1,timestamp:""},state:{answerVisible:!1,mode:"default",orderType:"bySubmissionDate",selectedAnswers:[],listColumnSize:0,style:{gridTemplateColumnsStyle:"",listCellStyle:{width:"0",height:"0"}}}}),Yse=({onBack:t})=>{let e=qe(),r=xn(or(e)),o=xn(e.submissionNumber),i=ao(r,o),s=e.submissions.byKey[i];if(!s)return Yd.createElement(rg,{onClose:t});let a=e.userPreference.submissonListColumnSize?e.userPreference.submissonListColumnSize:k8(window.screen),[l,c]=wn({orderType:P9,answerVisible:!0,mode:"default",selectedAnswers:[],listColumnSize:a,style:gR(a)}),d=Te(),u=e.submissionAnswers.bySubmissionKey[i],p=[];u&&(p=u.map(S=>e.submissionAnswers.byId[S]).filter(S=>S.submission_number===o));let h=ZRe({courseId:r,submission:s,state:l,store:e,answers:p}),f=u!==void 0;(0,fS.useEffect)(()=>{if(!f||l.mode==="default"||l.selectedAnswers.length<=0)return;let S=vP({targetIds:[...l.selectedAnswers],currentIds:u,submissionAnswers:e.submissionAnswers.byId,submissionNumber:o});c({selectedAnswers:[...S]})},[u]),(0,fS.useEffect)(()=>{c({mode:"default",selectedAnswers:[]}),mC(e,{courseId:r,submissionNumber:o,withTeacher:!0}),E2(e,r)},[o]);let[m,g]=(0,fS.useState)(!1),v=()=>{c({mode:"default",selectedAnswers:[]})};(0,fS.useEffect)(()=>{var S;if(!e.userInfo.is_teacher&&!s.reveal_answer){let C=(S=e.submissionAnswer)==null?void 0:S.id,b=C?e.submissionAnswers.byId[C]:void 0,x=[];b&&!My(b,s,e.userInfo)&&x.push(Es(void 0)),e.submissionComparisonIds&&x.push(gu(void 0)),x.length>0&&(e.reduce(...x),g(!0)),v()}},[s.reveal_answer]);let y=Xx({submission:s,userInfo:e.userInfo});return Yd.createElement(aa.Provider,{value:{state:l,dispatch:c,sortedAnswers:h,submission:s,answersRevealed:y,onBack:t,answers:p,submissionNumber:o,courseId:r}},Yd.createElement("div",{className:"submissionList"},Yd.createElement($r,null,Yd.createElement(qse,null),Yd.createElement($se,null),Yd.createElement(jse,{isCourseAnswersLoaded:f}),m&&Yd.createElement(mf,{title:d.answersNotVisibleWarnTitle,message:d.answersNotVisibleWarnMsg,okMessage:d.backToAnswerList,color:"error",onOk:()=>g(!1)}))))};function k8(t){return t.width<=480&&xp(t)=="portrait"?2:t.width<=1024?5:7}function gR(t){let e=1/t,r=`calc(var(--submissionListWidth) * ${e})`,o=`calc(var(--submissionListWidth) * ${e} * 0.75)`;return{gridTemplateColumnsStyle:`repeat(${t}, ${r})`,listCellStyle:{width:r,height:o}}}function ZRe({courseId:t,submission:e,answers:r,store:o,state:i}){let s=r.map(fP(t,o));if(o.courseAttributes.byId[t]){let c=nn(r.map(p=>[p.author_id,p])),{students:d,teachers:u}=tv({store:o,courseId:t,includeSelf:!0});for(let p of u.concat(d)){if(c[p.id])continue;let h=o.userStatuses.byKey[du(t,p.id)];s.push({user:p,attendantStatus:h==null?void 0:h.status,submissionAnswer:void 0})}}let l=!o.userInfo.is_teacher&&e.reveal_answer===Bi.No;return mP({users:s,orderType:i.orderType,hideAuthor:e.hide_author,topSelectedId:l?o.userInfo.user_id:void 0})}var Xse=X(on());var Qse=lS(),Jse=({store:t,courseId:e,onClose:r})=>{(0,ap.useEffect)(()=>{jl(t,e),hC({store:t,courseId:e,enableFetchError:!0})},[]);let o=a=>{t.userInfo.is_teacher&&jv({store:t,courseId:e,submissionNumber:a})},i=a=>{let l=t.submissionNumber;l!==void 0&&l!==a.submission_number&&o(l),t.reduce(Lp(a.submission_number))},s=()=>{let a=t.submissionNumber;a&&o(a),t.reduce(Lp(void 0))};return lr.createElement("div",{className:"submissionBox"},lr.createElement(eae,{store:t,isDialog:!1,onClick:i,onClose:r}),t.submissionNumber&&lr.createElement(Yse,{onBack:s}))},Zse=({onClose:t,store:e})=>{let r=Te();return lr.createElement(eae,{store:e,isDialog:!0,onClick:async i=>{if(i.submitted){let s=(0,Xse.sprintf)(r.confirmResubmit,i.message);if(!confirm(s))return t()}await MJ(e,i.submission_number)},onClose:t})},eFe=So(),eae=({store:t,isDialog:e,onClick:r,onClose:o})=>{let i=xn(or(t)),s=t.fetchStates[wt.submissions(i)],a=()=>{RJ(t,i)},l=!t.screen.isMobile&&e,c=t.submissionsOldest.byCourseId[i]?void 0:m=>{if(s!=="done")return;let g=m.currentTarget;eFe(()=>{var x;let v=g.scrollHeight-g.offsetHeight;if(v<=0||g.scrollTop/(v-2)<1||((x=t.submissions.byCourseId[i])!=null?x:[]).map(w=>t.submissions.byKey[w]).length<1)return;let b=t.lastSubmissionId.byCourseId[i];hC({store:t,courseId:i,beforeSubmissionID:b})},500)},[d,u]=wn({editing:!1}),p=e?()=>{}:m=>u({editing:m}),h=Te(),f=yf(t,i);return lr.createElement($r,{round:l},lr.createElement(dr,null,lr.createElement(fr,null,lr.createElement(mr,null,!d.editing&&lr.createElement(Mt,{onClick:o},h.back)),lr.createElement(kr,null,lr.createElement(jc,null,f&&lr.createElement($c,{enablePopover:!0},f),lr.createElement(Wc,null,h.taskListTitle))),lr.createElement(wr,null,lr.createElement(rFe,{store:t,courseId:i,isDialog:e,editing:d.editing,onEditChange:p}))),s==="fetching"&&lr.createElement(ur,{absolute:"bottom"})),lr.createElement(mn,{onScroll:c},!e&&t.userInfo.is_teacher&&lr.createElement(Th,{disabled:s==="fetching"||d.editing||!!t.updatingMessages[oe.createSubmission],onClick:a},h.createNewTask),lr.createElement(nFe,{store:t,isDialog:e,onClick:r,editing:d.editing})))},tFe=(t,e)=>{let r;if(t==="production"?r=iu:t==="staging"?r=u7:(t==="development"||t==="local")&&(r=p7),!!r)return`${r}/courses/${e}/submission_messages?mode=students`},rFe=({store:t,courseId:e,isDialog:r,editing:o,onEditChange:i})=>{var f,m;if(r)return null;let s=t.userInfo.is_teacher,[a,l]=(0,ap.useState)(!1),c=()=>{i(!o),l(!1)},d=()=>{let g=tFe(t.releaseStage,e);g&&window.open(g,"_blank")},u=((m=(f=t.mobilePushes.byCourseId[e])==null?void 0:f.filter(g=>{var v,y;return((v=t.mobilePushes.byId[g])==null?void 0:v.type)==="submit"||((y=t.mobilePushes.byId[g])==null?void 0:y.type)==="reveal_submission_answers"}))==null?void 0:m.length)>0,p=()=>{if(!u)return;let g=s?h.confirmMarkAllSubmitsAsRead:h.confirmMarkAllRevealAnswersAsRead;confirm(g)&&(s?jv({store:t,courseId:e}):tI({store:t,courseId:e})),l(!1)},h=Te();return o?lr.createElement(Mt,{onClick:()=>i(!1)},h.complete):lr.createElement("div",{className:"relative"},lr.createElement(Um,{onClick:()=>l(!0)}),lr.createElement(jt,{open:a,onClose:()=>l(!1)},s&&lr.createElement(Tn,{onClick:c},h.delete),lr.createElement(Tn,{onClick:p,disabled:!u},h.markAllAsRead),s&&lr.createElement(Tn,{onClick:d},h.displayByStudent)))},nFe=({editing:t,store:e,isDialog:r,onClick:o})=>{var b,x;let i=xn(or(e)),a=((b=e.submissions.byCourseId[i])!=null?b:[]).map(w=>e.submissions.byKey[w]),l=e.fetchStates[wt.submissions(i)];(0,ap.useEffect)(()=>{l||hC({store:e,courseId:i})},[l]);let[c,d]=(0,ap.useState)(void 0),u=Te(),p=w=>{if(!!t)return{deleting:w===c,onDeleting:k=>d(k?w:void 0),onDelete:()=>{confirm(u.confirmDelete)&&FJ(e,i,w)}}};(0,ap.useEffect)(()=>{t||d(void 0)},[t]);let h=[],f=new ni(()=>[]),m=new Date;for(let w of a){let k=new Date((x=w.expiry)!=null?x:w.timestamp);if(w.expiry&&m.getTime()<k.getTime())h.push(w);else{let T=new Date(k.getFullYear(),k.getMonth(),k.getDate()).getTime(),A=w.expiry!==null,E=`${T}/${A}`;f.get(E).push(w)}}let g=Array.from(f.keys()).sort(oFe).map(w=>{let{time:k,closed:T}=E8(w),A=new Date(k),E=Qse(A,u.taskExpiryFmt);T&&(E+=` ${u.closedTaskLabel}`);let F=f.get(w);return{title:E,subs:F}}),v=(w,k)=>w.expiry&&k.expiry?aB(w.expiry,k.expiry):w.expiry?1:k.expiry?-1:aB(k.timestamp,w.timestamp),y=w=>{var T;let k=new Date((T=w.expiry)!=null?T:w.timestamp);return Qse(k,u.taskExpiryFmt)},S=(0,ap.useMemo)(()=>{var k,T;let w=(T=(k=e.mobilePushes.byCourseId[i])==null?void 0:k.map(A=>e.mobilePushes.byId[A]))!=null?T:[];return iFe(w)},[e.mobilePushes]),C=(0,ap.useMemo)(()=>{var k,T;let w=(T=(k=e.mobilePushes.byCourseId[i])==null?void 0:k.map(A=>e.mobilePushes.byId[A]))!=null?T:[];return sFe(w)},[e.mobilePushes]);return lr.createElement("div",null,lr.createElement(yo,{title:u.openForSubmissions,titleColor:"#ff1d1d"},h.length===0?lr.createElement(Xn,{disabled:!0},lr.createElement(gi,null,u.noOpenTasks)):h.sort(v).map(w=>{let k=new Gp(new Date(w.expiry).getTime()-Date.now());return lr.createElement(Xn,{key:w.submission_number,className:w.submitted?"":"submissionActiveCell",highlight:w.submission_number===e.submissionNumber,deleteOpts:p(w.submission_number),onClick:()=>o(w),showArrow:!t&&!r},lr.createElement($n,null,lr.createElement(Fr,{className:"submissionBoxIcon",src:"/img/Waiting_For_AnswersIcon@2x.png"})),lr.createElement(gi,null,lr.createElement(to,{className:w.message?"":"grayText",disablePopover:!0},w.message?w.message:y(w))),lr.createElement($n,null,lr.createElement(_8,{isSubmitted:w.submitted},k.toRelativeString())),lr.createElement(tae,{submissionNumber:w.submission_number,submitBadgeMap:S,revealBadgeMap:C}),gP(w)&&lr.createElement($n,null,lr.createElement("div",{className:"submissionAnswerRevealedIcon"})),lr.createElement(rae,{isSubmitted:w.submitted,isLate:!1,isTeacher:e.userInfo.is_teacher}))})),g.map(({title:w,subs:k})=>lr.createElement(yo,{key:w,title:w},k.sort(v).reverse().map(T=>{let A=!1;return T.expiry&&T.submit_date&&new Date(T.expiry)<new Date(T.submit_date)&&(A=!0),lr.createElement(Xn,{key:T.submission_number,deleteOpts:p(T.submission_number),highlight:T.submission_number===e.submissionNumber,onClick:()=>o(T),showArrow:!t},lr.createElement($n,null,lr.createElement(Fr,{className:"submissionBoxIcon",src:"/img/ExpiredTaskIcon@2x.png"})),lr.createElement(gi,null,lr.createElement(to,{className:T.message?"":"grayText",disablePopover:!0},T.message?T.message:y(T))),lr.createElement(tae,{submissionNumber:T.submission_number,submitBadgeMap:S,revealBadgeMap:C}),gP(T)&&lr.createElement($n,null,lr.createElement("div",{className:"submissionAnswerRevealedIcon"})),lr.createElement(rae,{isSubmitted:T.submitted,isLate:A,isTeacher:e.userInfo.is_teacher}))}))))},E8=t=>{let e=t.split("/"),r=Number(e[0]),o=e[1]==="true";return{time:r,closed:o}},oFe=(t,e)=>{let{time:r,closed:o}=E8(t),{time:i,closed:s}=E8(e);return r<i?1:r>i?-1:!o&&s?1:o&&!s?-1:0},_8=({isSubmitted:t,children:e})=>lr.createElement("span",{className:"submissionStatusText","data-submitted":t},e),iFe=t=>{let e=new ni(()=>[]);for(let r of t)if(r.type==="submit"){let o=e.get(r.data.submission_number);o.includes(r.data.author_id)||(o.push(r.data.author_id),e.set(r.data.submission_number,o))}return e},sFe=t=>{let e=new Map;for(let r of t)r.type==="reveal_submission_answers"&&e.set(r.data.submission_number,!0);return e},tae=({submissionNumber:t,submitBadgeMap:e,revealBadgeMap:r})=>{var a,l;let o=qe();if(typeof or(o)!="number")return null;if(o.userInfo.is_teacher){let d=((a=e.get(t))!=null?a:[]).length;return d>0&&t!==o.submissionNumber?lr.createElement($n,null,lr.createElement("div",{className:"submissionUnReadCount"},lr.createElement("div",{className:"submissionUnReadCountInner"},d))):null}else return((l=r.get(t))!=null?l:!1)&&t!==o.submissionNumber?lr.createElement($n,null,lr.createElement("div",{className:"submissionAnswerDotMark"})):null},rae=({isSubmitted:t,isLate:e,isTeacher:r})=>{let o="";if(t)e?o="submittedLate":o="submitted";else if(!r)o="notSubmitted";else return null;return lr.createElement($n,null,lr.createElement("div",{className:"submissionStatusMark "+o}))};var oae=()=>{var c;let t=qe(),[e,r]=(0,kb.useState)(!1);if(!t.newSubmissionDialog)return null;let{courseId:o,submissionNumber:i}=t.newSubmissionDialog,s=()=>{var d;o!==((d=t.desktop)==null?void 0:d.courseId)?r(!0):a()},a=()=>{r(!1),t.reduce(n0())},l=De.get().strings;return jn.createElement(jn.Fragment,null,jn.createElement(aFe,{store:t,courseId:t.newSubmissionDialog.courseId,submissionNumber:(c=t.newSubmissionDialog)==null?void 0:c.submissionNumber,onWork:s,onClose:a}),jn.createElement(oo,{open:e,onClose:()=>r(!1),transition:"up",container:"none"},jn.createElement(uS,{store:t,courseId:o,message:l.chooseNoteToWorkIn,onClose:()=>r(!1),onNoteSelect:()=>t.reduce(hw()),onNoteReady:a})))},aFe=({store:t,courseId:e,submissionNumber:r,onWork:o,onClose:i})=>{let[s,a]=(0,kb.useState)(!1),[l,c]=(0,kb.useState)(!1);if((0,kb.useEffect)(()=>{var C;return e!==((C=t.desktop)==null?void 0:C.courseId)?(IJ({store:t,courseId:e,submissionNumber:r}),jl(t,e),c(!0)):a(!0),()=>{a(!1)}},[e,r]),(0,kb.useEffect)(()=>{let C=t.fetchStates[wt.courseAttributes(e)],b=t.fetchStates[wt.submissions(e)];if(C instanceof Error||b instanceof Error){t.reduce(n0());return}!l||C!=="done"||b!=="done"||(c(!1),a(!0))},[t.submissions,t.courseAttributes]),!s)return null;let d=ao(e,r),u=t.submissions.byKey[d],p=De.get().strings;if(!u)return jn.createElement(rg,{onClose:i});let h=fd(t,e),f=Ji(t,e),m=u.message,g=new Date(u.expiry),v=(0,nae.default)(g,p.submissionDeadlineFmt),S=new Gp(g.getTime()-Date.now()).ms>0;return jn.createElement(jn.Fragment,null,jn.createElement(Vr,{className:"newSubmissionBoxDialog",open:!!u,onClose:i,overlay:!0,container:"none"},jn.createElement("div",{className:"newSubmissionBoxDialogInner"},jn.createElement($r,{round:!0},jn.createElement(dr,null,jn.createElement(fr,null,jn.createElement(mr,null),jn.createElement(kr,null,p.newTaskCreated),jn.createElement(wr,null,jn.createElement(OC,{onClick:i})))),jn.createElement(mn,{className:"newSubmissionBoxDialogBody"},jn.createElement("div",{className:"newSubmissionBoxDialogSubtitleContainer"},jn.createElement("div",{className:"newSubmissionBoxDialogGroupNameWrapper"},jn.createElement("div",{className:"newSubmissionBoxDialogGroupName"},jn.createElement(to,{container:"none"},h))),jn.createElement("div",{className:"newSubmissionBoxDialogSubjectNameWrapper"},jn.createElement("div",{className:"newSubmissionBoxDialogSubjectName"},jn.createElement(to,{container:"none"},f)))),jn.createElement("div",{className:"newSubmissionBoxDialogTitleContainer"},S?jn.createElement(Fr,{className:"submissionBoxIcon",src:"/img/Waiting_For_AnswersIcon@2x.png"}):jn.createElement(Fr,{className:"submissionBoxIcon",src:"/img/ExpiredTaskIcon@2x.png"}),jn.createElement(to,{className:"newSubmissionBoxDialogSubmissionName",lineClamp:3,container:"none"},m)),S&&jn.createElement("div",{className:"newSubmissionBoxDialogDeadline"},jn.createElement(_8,{isSubmitted:u.submitted},v)),jn.createElement(qr,{className:"newSubmissionBoxDialogWorkButton",onClick:o},p.getToWork))))))};var ka=X(he()),Pa=X(he());var mS=class{constructor(e,r){this.recorderResult=gc();this.onDataAvailable=e=>{let r=e.data;r.size>0&&this.dataStore.add(r)};this.onStop=()=>{this.dataStore.close().then(({blob:e})=>{this.recorderResult.resolve(e)})};var d,u,p,h;this.cameraStream=e;let o=e.stream.getVideoTracks()[0],{width:i,height:s}=o.getSettings(),a=mS.getPreferredVideoBitRate(i,s);this.dataStore=P2(r),this.recorder=new MediaRecorder(this.cameraStream.stream,{mimeType:r,videoBitsPerSecond:a,audioBitsPerSecond:GT});let l=(u=(d=this.recorder)==null?void 0:d.audioBitsPerSecond)!=null?u:GT,c=(h=(p=this.recorder)==null?void 0:p.videoBitsPerSecond)!=null?h:a;this.maxLengthMS=mS.getVideoMaxLengthMS(l+c),this.recorder.ondataavailable=this.onDataAvailable,this.recorder.onstop=this.onStop,this.recorder.onerror=f=>this.recorderResult.reject(f)}start(){this.recorder.start(500)}async stop(){return this.recorder.stop(),this.recorderResult}get state(){return this.recorder.state}static getPreferredVideoBitRate(e,r){if(!e||!r)return HT.small;let o=Math.min(e,r),i=moe;return o<=i.small?HT.small:o<=i.medium?HT.medium:HT.large}static getVideoMaxLengthMS(e){let r=1073741824*8*.9;return Math.floor(r/e*1e3)}};function lFe(t,e,r){let o=e?{deviceId:{ideal:e}}:{facingMode:{ideal:"environment"}},{width:i,height:s}=t.asLandscape(),a={...o,width:{ideal:i},height:{ideal:s}};return r?{video:a,audio:{deviceId:{ideal:r}}}:{video:a}}async function iae({resolution:t,videoDevice:e,audioDevice:r}){let o=lFe(t,e==null?void 0:e.deviceId,r==null?void 0:r.deviceId),i=await navigator.mediaDevices.getUserMedia(o);return{stream:i,dispose(){i.getTracks().forEach(s=>s.stop())}}}var rd=X(he()),xae=X(he());var R8=X(he()),bR=X(he());function vR(t){return!!t&&t.videoWidth>0&&t.videoHeight>0}var og=100;function ig(t){let{sW:e,sH:r}=t;return e>480&&r>480?[0,0]:e>r?cFe(t):dFe(t)}function A8({sW:t,sH:e,vW:r,vH:o,rotation:i=0}){let s=t>e,a=r>o,l=i%2==0?a:!a;return s===l}function cFe(t){if(!A8(t))return[0,0];let{sW:e,sH:r,vW:o,vH:i}=t,s=Math.max(o,i),a=Math.min(o,i),c=pi(e,r,s,a)*s,d=.5*(e-c);if(d>=og)return[0,0];let u=og-d;return[-Math.min(d,u),0]}function dFe(t){if(!A8(t))return[0,0];let{sW:e,sH:r,vW:o,vH:i}=t,s=Math.min(o,i),a=Math.max(o,i),c=pi(e,r,s,a)*a,d=.5*(r-c);if(d>=og)return[0,0];let u=og-d,p=Math.min(d,u);return[0,-p]}function uFe({sW:t,sH:e,vW:r,vH:o,translation:i}){let s=.5*(t-r),a=.5*(e-o),l=t>e,[c,d]=i,u=new go(s+c,a+d,r,o),p=t-u.right,h=e-u.bottom,f=l?Math.max(og,p):p,m=l?h:Math.max(h,og);return{left:u.x,right:f,bottom:m}}function pFe(t,e){let r=0;return t>e?{left:r,right:og,bottom:0}:{left:r,right:0,bottom:og}}function sae({sW:t,sH:e,vW:r,vH:o,translation:i}){let s=pi(t,e,r,o),[a,l]=[r*s,o*s];return A8({sW:t,sH:e,vW:r,vH:o})?uFe({sW:t,sH:e,vW:a,vH:l,translation:i}):pFe(t,e)}var I8=class{constructor(e,r){this.range=e;this.length=r}toValue(e){let{min:r,max:o,step:i}=this.range;if(e<=0)return r;if(e>=this.length)return o;let s=e/this.length,a=r+(o-r)*s,l=Math.floor((a-r)/i);return ht(r+l*i,r,o)}toPixels(e){let{min:r,max:o}=this.range;if(e<=r)return 0;if(e>=o)return this.length;let i=Math.abs(r-e)/(o-r)*this.length;return ht(i,0,this.length)}};var hFe=(t,e)=>{let r=t.isHidden===e.isHidden&&t.stream.id===e.stream.id&&t.rotation===e.rotation;return e.ignoreScreenSizeChange===!0?r:r&&t.screenSize.width===e.screenSize.width&&t.screenSize.height===e.screenSize.height},gS=t=>{let{screen:e}=qe();return R8.createElement(fFe,{...t,screenSize:e})},fFe=(0,bR.memo)(({isHidden:t,stream:e,videoRef:r,onLoaded:o,screenSize:i,centered:s=!1,rotation:a=0})=>{(0,bR.useEffect)(()=>{var p;if(!!t)return(p=r.current)==null||p.addEventListener("loadeddata",c),()=>{var h;return(h=r.current)==null?void 0:h.removeEventListener("loadeddata",c)}},[t]);let l=p=>{p!==null&&(r.current=p,e!==null&&(p.srcObject=e))},c=({target:p})=>{p instanceof HTMLVideoElement&&p.videoWidth>2&&(p.removeEventListener("loadeddata",c),o(p.videoWidth,p.videoHeight))},d=t?"hidden":"visible",u="";if(vR(r.current)){let{width:p,height:h}=i,{videoWidth:f,videoHeight:m}=r.current,g=90*a,v=1;if(a%2==1){let C=pi(p,h,f,m);v=pi(p,h,m,f)/C}let[y,S]=[0,0];s||([y,S]=ig({sW:p,sH:h,vW:f,vH:m,rotation:a})),u=`translate(${y}px, ${S}px) rotate(${g}deg) scale(${v})`}return R8.createElement("video",{style:{visibility:d,transform:u},ref:l,className:"centeredPreview camFullSize",muted:!0,autoPlay:!0,playsInline:!0})},hFe);var SR=X(he()),SS=X(he());var td=X(he()),Lh=X(he());var sg=X(he()),ag=X(he());var vS=8,aae=({video:t,startPlayback:e,freeze:r})=>{let o=(0,ag.useRef)(null),i=(0,ag.useRef)(null),s=(0,ag.useRef)(!1),[a,l]=(0,ag.useState)(vS);(0,ag.useEffect)(()=>(i.current=new Mn(o.current,{ignoreDevicePixelRatio:!0}),i.current.onSingle=c,()=>{var p;(p=i.current)==null||p.unbind()}),[]);let c=(p,h)=>{if(!o.current||!ga(t.duration))return;p==="down"&&t.playbackRate!==0&&!s.current&&(s.current=!0,r());let{width:f}=o.current.getBoundingClientRect(),m=ht(h.x,vS,f),g=(m-vS)/(f-vS)*t.duration;t.currentTime=g,l(m),p==="up"&&s.current&&(s.current=!1,e())},{duration:d}=t,u=0;if(s.current)u=a;else if(o.current&&ga(d)){let{width:p}=o.current.getBoundingClientRect();u=t.currentTime/d*(p-vS)+vS}return sg.createElement("div",{className:"cameraSliderWrapper"},sg.createElement("div",{className:"cameraSlider camFullSize"},sg.createElement("div",{ref:o,className:"cameraSliderBarWrapper"},sg.createElement("div",{className:"cameraSliderBarInner camFullSize"},sg.createElement("div",{className:"cameraSliderBar"}))),sg.createElement("div",{className:"cameraSliderControlWrapper",style:{transform:`translateX(${u}px)`}},sg.createElement("div",{className:"cameraSliderControl"}))))};var gn=X(he());var Bh=X(he()),yR=X(he());var dD="rgba(7, 14, 30, 0.9)",F8=({state:t,dispatcher:e})=>{let{screen:{isMobile:r,width:o,height:i}}=qe(),[s,a]=(0,yR.useState)(!1),{isLoading:l,mode:c,resolutionIndex:d,resolutionOptions:u}=t,p=o>i,h=u[d];if((0,yR.useEffect)(()=>{var S;if(l||!h||c==="qr")return;let y=(S=pP(window.screen))!=null?S:!p;e.updateResolutionOptionState(y)},[r,p,l]),!h||c==="qr")return null;let f=()=>{l||a(!s)},m=()=>{a(!1)},g=y=>{let S=u[y];S.equals(h)||e.setResolution(S)};return Bh.createElement(mFe,{resolution:h,isMobile:r,disabled:l,onClick:f},Bh.createElement(jt,{onClose:m,open:s,arrowColor:dD,anchor:r&&p?"middleRight":"bottomCenter",className:"resSelectorPopover"},u.map((y,S)=>Bh.createElement(Tn,{key:S,className:S===d?"cameraPopoverSelectedItem":"cameraPopoverItem",onClick:()=>g(S),role:"button"},y.label))))},mFe=({isMobile:t,resolution:e,disabled:r,onClick:o,children:i})=>t?Bh.createElement(lg,{onClick:o,disabled:r},Bh.createElement(bS,{iconClass:"resolutionButton",disabled:r}),i):Bh.createElement("div",{className:"resolutionSelector",role:"button",onClick:o,"data-enabled":!r},Bh.createElement("div",{className:"resolutionSelectorArrow","data-enabled":!r}),Bh.createElement("div",{className:"centeredContent"},e.label),i);var lae=X(he());var cae=vB(),gFe=t=>(uae(t.videoObjectUrl),uae(t.photoObjectUrl),{...t,isLoading:!0,isRecording:!1,isQrCodeScanning:!1,cameraUuid:cae(),videoContentType:null,videoObjectUrl:null,photoObjectUrl:null,qrCodeContent:null,isQrContentPreviewing:!1,error:null,message:null,canSkipCreation:!1});function CR(t){return t==="audio"?"audioDeviceIndex":t==="qr"?"qrVideoDeviceIndex":"videoDeviceIndex"}var vFe=(t,e)=>{let r=e==="audio"?t.audioDevices:t.videoDevices;if(!r||r.length<2)return t;let o=CR(e),s=(t[o]+1)%r.length;return{...t,[o]:s,isLoading:!0,isQrCodeScanning:!1,lastSwitched:e==="video"?"audio":"video"}},bFe=(t,e)=>{if(t.mode==="qr"||!t.videoDevices||t.videoDevices.length<1)return t;let{videoDevices:r,videoDeviceIndex:o,mode:i,resPrefs:s}=t,{deviceId:a}=r[o],l=NN(a,i==="photo"),c={...s,[l]:e};return{...t,isLoading:!0,isQrCodeScanning:!1,resPrefs:c}},yFe=(t,e,r)=>{let o={videoDevices:e.video,audioDevices:e.audio,canSkipCreation:!TFe(t,e)};if(!r)return{...t,...o};let{videoDeviceId:i,audioDeviceId:s,qrVideoDeviceId:a}=r;if(t.cameraStream){let u=M8(t.cameraStream.stream);u.videoDeviceId&&t.mode==="qr"?a=u.videoDeviceId:u.videoDeviceId&&(i=u.videoDeviceId),u.audioDeviceId&&(s=u.audioDeviceId)}let l=e.video.findIndex(u=>u.deviceId===i),c=e.audio.findIndex(u=>u.deviceId===s),d=e.video.findIndex(u=>u.deviceId===a);return l>-1&&(o.videoDeviceIndex=l),c>-1&&(o.audioDeviceIndex=c),d>-1&&(o.qrVideoDeviceIndex=d),{...t,...o}},CFe=(t,e,r)=>{let o=SFe(t,e),i={...t,...o,cameraStream:e,canSkipCreation:!1};if(t.mode==="qr")return i;let s=dae(e,r);return{...i,...s,isFirstLaunch:!1}},M8=t=>{let[e]=t.getVideoTracks(),r=e.getSettings().deviceId,[o]=t==null?void 0:t.getAudioTracks(),i=o==null?void 0:o.getSettings().deviceId;return{videoDeviceId:r,audioDeviceId:i}},SFe=(t,e)=>{var l,c,d,u;let{videoDeviceId:r,audioDeviceId:o}=M8(e.stream),i=(c=(l=t.videoDevices)==null?void 0:l.findIndex(p=>p.deviceId===r))!=null?c:-1,s=(u=(d=t.audioDevices)==null?void 0:d.findIndex(p=>p.deviceId===o))!=null?u:-1,a={};if(i>=0){let p=CR(t.mode==="qr"?"qr":"video");a[p]=i}return s>=0&&(a.audioDeviceIndex=s),a},dae=(t,e)=>{let r=[],o=-1;try{let i=t.stream.getVideoTracks()[0],s=b9(i),a=y9(i);r=v9(s,a,e),o=r.findIndex(l=>l.equals(s))}catch(i){ge.log("could not get resolution options",i)}return{resolutionOptions:r,resolutionIndex:o}},xFe=(t,e)=>{let{cameraStream:r}=t;if(!r)return t;let o=dae(r,e);return{...t,...o}},wFe=t=>{let e=(t.photoRotation+3)%4;return{...t,photoRotation:e}};function uae(t){t!==null&&t.length>0&&window.URL.revokeObjectURL(t)}var pae=class{constructor(e,r){this.dispatch=e;this.onDismiss=r}dispatchPart(e){this.dispatch(r=>({...r,...e}))}endLoad(){this.dispatchPart({isLoading:!1})}startRecording(){this.dispatchPart({isRecording:!0})}setMode(e){let r=e==="video"?"audio":"video";this.dispatchPart({isLoading:!0,lastSwitched:r,mode:e})}setScanningState(e){this.dispatchPart({isQrCodeScanning:e})}reset(){this.dispatch(gFe)}setResolution(e){this.dispatch(r=>bFe(r,e))}setNextDevice(e){this.dispatch(r=>vFe(r,e))}setVideoUrl(e,r){this.dispatchPart({videoObjectUrl:e,isRecording:!1,videoContentType:r})}setPhotoUrl(e){this.dispatchPart({photoObjectUrl:e})}setQrCodeContent(e){this.dispatchPart({qrCodeContent:e})}startQrContentPreviewing(){this.dispatchPart({isQrContentPreviewing:!0,isQrCodeScanning:!1})}resetQrContentState(){this.dispatchPart({qrCodeContent:null,isQrContentPreviewing:!1})}setDevices(e,r){this.dispatch(o=>yFe(o,e,r))}setCameraStream(e,r){this.dispatch(o=>CFe(o,e,r))}updateResolutionOptionState(e){this.dispatch(r=>xFe(r,e))}setError(e){this.dispatchPart({error:e,isRecording:!1,isQrCodeScanning:!1})}setMessage(e){this.dispatchPart({message:e})}rotatePhoto(){this.dispatch(wFe)}dismissDialog(){this.dispatchPart({isQrCodeScanning:!1}),this.onDismiss()}endFirstLaunch(){this.dispatchPart({isFirstLaunch:!1})}resetCanSkipCreation(){this.dispatchPart({canSkipCreation:!1})}},hae=(t,e,r)=>{let{resolutions:o,videoDeviceId:i}=r,[s,a]=(0,lae.useState)({isLoading:!0,isRecording:!1,mode:e,isQrCodeScanning:!1,cameraUuid:cae(),videoDeviceIndex:0,audioDeviceIndex:0,qrVideoDeviceIndex:-1,videoContentType:null,videoObjectUrl:null,photoObjectUrl:null,qrCodeContent:null,isQrContentPreviewing:!1,videoDevices:null,audioDevices:null,cameraStream:null,resPrefs:o,error:null,lastSwitched:"video",message:null,photoRotation:0,resolutionOptions:[],resolutionIndex:-1,isFirstLaunch:i===null,canSkipCreation:!1,supportedVideoRecorderFormat:k2("video")});return[s,new pae(a,t)]},fae=(t,e)=>{let{mode:r,cameraStream:o}=t,{videoDeviceId:i,audioDeviceId:s}=M8(o.stream);if(r==="qr")return{mode:r,qrVideoDeviceId:i};let a={mode:r,videoDeviceId:i};if(r==="video"&&s&&(a.audioDeviceId=s),Object.entries(t.resPrefs).length>0){let l={...e,...t.resPrefs};a.resolutions=l}return a};function mae(t){var f;let{videoDevices:e,videoDeviceIndex:r,audioDevices:o,audioDeviceIndex:i,qrVideoDeviceIndex:s,resPrefs:a,mode:l,isFirstLaunch:c}=t,d,u;if(c)return{videoDevice:d,audioDevice:u,resolution:MN};d=e[r];let p=NN((f=d==null?void 0:d.deviceId)!=null?f:"",l==="photo"),h=a[p];return l==="photo"&&!h?h=MN:l==="video"?(u=o==null?void 0:o[i],h=h!=null?h:S9):l==="qr"&&(d=e[s],h=hP),{videoDevice:d,audioDevice:u,resolution:h}}var N8=t=>e=>e.deviceId===t;function TFe(t,e){var p,h,f;let{videoDevices:r,videoDeviceIndex:o,qrVideoDeviceIndex:i,audioDevices:s,audioDeviceIndex:a,mode:l}=t;if(l==="qr"){let m=(p=r==null?void 0:r[i])==null?void 0:p.deviceId;return m?!e.video.some(N8(m)):!0}let c=(h=r==null?void 0:r[o])==null?void 0:h.deviceId;if(!c||!e.video.some(N8(c)))return!0;if(l==="photo")return!1;let u=(f=s==null?void 0:s[a])==null?void 0:f.deviceId;return u?!e.audio.some(N8(u)):!0}var uD=X(he()),yS=X(he());var DFe=(t,e)=>{let[r,o]=(0,yS.useState)(!0),i=(0,yS.useRef)(-1);return(0,yS.useEffect)(()=>(o(!0),i.current>0&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=-1,o(!1)},t),()=>{i.current&&(window.clearTimeout(i.current),i.current=-1)}),e),r},B8=({type:t,label:e})=>{let r=DFe(2e3,[e]);return uD.createElement(si,{in:r,appear:!0,enter:!0,exit:!0,unmountOnExit:!0,timeout:3e3,classNames:"fadeOutText"},uD.createElement("div",{className:"deviceDisplay"},uD.createElement("div",{className:`mediaDeviceIcon ${t}`}),uD.createElement("span",null,e)))};var yl=X(he()),gae=X(he());var kFe=({index:t})=>{let e={top:`${t*36}px`};return yl.createElement("div",{className:"cameraModeSelectorHighlight",style:e})};function L8(t,e){return t==="qr"?"QR":e[t]}var PFe=({mode:t,selected:e,disabled:r,onClick:o})=>{let i=Te();return yl.createElement("div",{className:`cameraModeOption centeredContent ${e?"selectedCameraModeOptionColor":"cameraModeOptionColor"}`,onClick:o,"data-enabled":!r},L8(t,i))},EFe=({isLoading:t,modes:e,modeIndex:r,setMode:o})=>yl.createElement("div",{className:"cameraModeSelector",role:"button"},yl.createElement("div",{className:"cameraModeSelectorFlexContainer"},yl.createElement(kFe,{index:r}),e.map((i,s)=>yl.createElement(PFe,{key:i,mode:i,selected:s===r,onClick:()=>o(i),disabled:t})))),_Fe=({isLoading:t,modes:e,modeIndex:r,setMode:o,isLandscape:i})=>{let[s,a]=(0,gae.useState)(!1),l=()=>{a(!s)},c=Te(),d=i?"middleLeft":"topCenter";return yl.createElement("div",{className:"mobileModeSelector centeredContent",role:"button","data-enabled":!t,onClick:l},yl.createElement("div",{className:"centeredContent"},yl.createElement("div",null,L8(e[r],c)),yl.createElement(jt,{className:"mobileModeSelectorPopover",anchor:d,open:s,onClose:l,arrowColor:dD},e.map((u,p)=>yl.createElement(Tn,{key:u,className:"mobileModeSelectorItem",role:"button","data-selected":p===r,onClick:()=>o(u)},L8(u,c))))))},O8=({dispatcher:t,state:e})=>{let{screen:{width:r,height:o,isMobile:i}}=qe(),{mode:s,isLoading:a,supportedVideoRecorderFormat:l}=e,c=l?["photo","video","qr"]:["photo","qr"],d=Math.max(c.indexOf(s),0),p={isLoading:a,modes:c,modeIndex:d,setMode:h=>{a||h===s||t.setMode(h)}};return i?yl.createElement(_Fe,{isLandscape:r>o,...p}):yl.createElement(EFe,{...p})};var Jo=X(he()),Da=X(he());function AFe(t,e){let{min:r,max:o,step:i}=e,s=Math.round(t/i)*i;return ht(s,r,o)}var z8="exposureCompensation",U8="brightness",H8=class{constructor(e){this.track=e;let r=e.getCapabilities();z8 in r?this.brightnessMetadata={key:z8,range:r[z8]}:U8 in r?this.brightnessMetadata={key:U8,range:r[U8]}:this.brightnessMetadata=null}apply({brightness:e}){if(!un(e)||!this.brightnessMetadata||this.brightness===e)return Promise.resolve();let{key:o,range:i}=this.brightnessMetadata,s=AFe(e,i);return this.track.applyConstraints({advanced:[{[o]:s}]})}get brightness(){if(this.brightnessMetadata)return this.track.getSettings()[this.brightnessMetadata.key]}};var G8=({state:t})=>{let e=(0,Da.useMemo)(()=>{if(!t.cameraStream)return;let{stream:r}=t.cameraStream,[o]=r.getVideoTracks();if(!uP(o))return;let i=o.getSettings();if(!!Dl(i))return new H8(o)},[t.cameraStream]);return t.mode==="qr"||!e||!e.brightnessMetadata?null:Jo.createElement(IFe,{isLoading:t.isLoading,trackSettings:e})},IFe=({isLoading:t,trackSettings:e})=>{var p;let{screen:r}=qe(),[o,i]=(0,Da.useState)(!1),[s,a]=(0,Da.useState)((p=e.brightness)!=null?p:0);(0,Da.useEffect)(()=>{var h;a((h=e.brightness)!=null?h:0)},[e]);let l=()=>{t||i(h=>!h)},c=()=>{i(!1)},d=h=>{a(h),e.apply({brightness:h}).catch(ge.error)},u="middleLeft";return r.isMobile&&xp(r)==="landscape"?u="middleRight":r.isMobile&&(u="bottomCenter"),Jo.createElement(Jo.Fragment,null,Jo.createElement("div",{className:"brightnessButton"},Jo.createElement(lg,{disabled:t,onClick:l},Jo.createElement(bS,{iconClass:"brightnessButtonIcon",disabled:t})),Jo.createElement(jt,{onClose:c,open:o,arrowColor:dD,anchor:u,className:"brightnessPopover"},Jo.createElement("div",{className:"brightnessSliderContainer"},Jo.createElement(RFe,{settingName:"brightness",range:e.brightnessMetadata.range,value:s,setValue:d,vertical:!0},Jo.createElement(Fr,{src:"/svg/brightness_icon_yellow.svg",alt:"brightness slider thumb",className:"brightnessThumb"}))))))},RFe=({range:t,value:e,setValue:r,settingName:o,vertical:i,children:s})=>{let{min:a,max:l,step:c}=t,d=(u,p)=>{r(u)};return Jo.createElement("div",{className:`${o}Control`},Jo.createElement(BFe,{value:e,step:c}),Jo.createElement(FFe,{value:e,enabled:!0,min:a,max:l,step:c,onChange:d,thumbDiameter:30,thumbMargin:5,length:200,className:`${o}Slider`,vertical:i},s))},FFe=({children:t,onChange:e,step:r,min:o,max:i,value:s,thumbDiameter:a,thumbMargin:l,length:c,enabled:d=!0,className:u="",vertical:p})=>{let h=(0,Da.useRef)(null),f=(0,Da.useRef)();(0,Da.useEffect)(()=>(f.current=new Mn(h.current,{ignoreDevicePixelRatio:!0}),()=>{var w;(w=f.current)==null||w.unbind(),f.current=void 0}),[]);let m=(0,Da.useMemo)(()=>new I8({min:o,max:i,step:r},c),[o,i,r,c]),g=(0,Da.useRef)(0);(0,Da.useEffect)(()=>{!f.current||(f.current.onSingle=(w,k)=>{let T=p?k.y:k.x;if(w==="down"){let F=m.toPixels(s)+a;F<=T&&T<F+a&&(g.current=F+a/2-T)}let A=T-a/2+g.current,E=m.toValue(p?c-A:A);e(E,w)})},[s,a,e]);let v=m.toPixels(s),y=a/2+l,S=Math.max(0,v-y),C=Math.max(0,c-v-y),b=p?"vertical":"horizontal",x=p?"height":"width";return Jo.createElement("div",{className:`cameraInputRange ${b} ${u}`,style:{[x]:`${c}px`},"data-enabled":d},Jo.createElement(vae,{length:S,vertical:p}),Jo.createElement(MFe,{diameter:a,margin:l},t),Jo.createElement(vae,{length:C,vertical:p}),Jo.createElement(NFe,{ref:h,thumbDiameter:a,length:c,vertical:p}))},MFe=({diameter:t,margin:e,children:r})=>{let o=`${t}px`,i=`${t+2*e}px`;return Jo.createElement("div",{className:"rangeThumbWrapper",style:{width:i,height:i}},Jo.createElement("div",{className:"rangeThumb",style:{width:o,height:o}},r))},vae=({length:t,vertical:e})=>{let r=e?{height:`${t}px`,width:"2px"}:{height:"2px",width:`${t}px`};return Jo.createElement("div",{className:"rangeBar",style:r})},NFe=(0,Da.forwardRef)(({vertical:t,length:e,thumbDiameter:r},o)=>{let[i,s]=t?["height","width"]:["width","height"];return Jo.createElement("div",{className:"rangeTouchArea",ref:o,style:{[t?"bottom":"left"]:`${r/-2}px`,[s]:`${r}px`,[i]:`${e+r}px`}})}),BFe=({value:t,step:e})=>{let r=Math.round(Math.log10(e)),o=Math.max(0,-1*r);return Jo.createElement("div",{className:"sliderValue"},t.toFixed(o))};var CS=({state:t,dispatcher:e})=>{let{screen:{isMobile:r}}=qe(),{cancel:o}=Te(),{isRecording:i,isQrContentPreviewing:s}=t,a=()=>{e.dismissDialog()};return i||s?null:gn.createElement(gn.Fragment,null,r?gn.createElement(gn.Fragment,null,gn.createElement("div",{className:"primaryControlTray"},gn.createElement("div",{className:"cameraToggleContainer"},gn.createElement(bae,{state:t,dispatcher:e,isMobile:!0})),gn.createElement("div",{className:"modeSelectorContainer"},gn.createElement(O8,{state:t,dispatcher:e}))),gn.createElement("div",{className:"secondaryControlTray"},gn.createElement("div",{className:"cancelButtonPlaceHolder"}),gn.createElement(yae,{state:t,dispatcher:e}),gn.createElement(F8,{state:t,dispatcher:e}),gn.createElement(G8,{state:t,dispatcher:e})),gn.createElement("button",{className:"mobileCancelButton iconButton centeredContent",onClick:a,role:"button"},gn.createElement("div",{className:"crossIcon"}))):gn.createElement(gn.Fragment,null,gn.createElement("div",{className:"primaryControlTray"},gn.createElement("div",{className:"toggleButtonContainer"},gn.createElement(bae,{state:t,dispatcher:e}),gn.createElement(yae,{state:t,dispatcher:e}),gn.createElement(G8,{state:t,dispatcher:e})),gn.createElement(O8,{state:t,dispatcher:e})),gn.createElement("div",{className:"resSelectorContainer"},gn.createElement(F8,{state:t,dispatcher:e})),gn.createElement("button",{className:"cancelButton centeredContent",onClick:a,role:"button"},o)),gn.createElement(LFe,{state:t}))},LFe=({state:t})=>{let{isLoading:e,mode:r,videoDevices:o,audioDevices:i,videoDeviceIndex:s,qrVideoDeviceIndex:a,audioDeviceIndex:l}=t,c=r==="qr"?a:s,d=o==null?void 0:o[c],u=i==null?void 0:i[l];return gn.createElement("div",{className:"deviceDisplayContainer"},!e&&d&&gn.createElement(B8,{type:"video",label:d.label}),r==="video"&&!e&&u&&gn.createElement(B8,{type:"audio",label:u.label}))},bae=({state:t,dispatcher:e,isMobile:r=!1})=>{var h,f;let{isLoading:o,videoDevices:i}=t,s=t.mode==="qr"?"qr":"video",a=CR(s),l=t[a];if(i===null||i.length<2)return null;let c=()=>{e.setNextDevice(s)},d=(f=(h=i[l])==null?void 0:h.label)!=null?f:"";return gn.createElement("div",{className:"cameraToggleButton",title:d},gn.createElement(lg,{disabled:o,onClick:c,className:r?"oblongControlIconButton":void 0},gn.createElement(bS,{className:r?"oblongControlIcon":void 0,iconClass:"videoToggleIconButton",disabled:o})))},yae=({state:t,dispatcher:e})=>{var p,h;let{mode:r,isLoading:o,audioDevices:i,audioDeviceIndex:s}=t,a=r==="video",l=i!==null&&i.length>1;if(a&&!l)return null;let c=()=>{o||(a?e.setNextDevice("audio"):e.rotatePhoto())},d=a&&(h=(p=i==null?void 0:i[s])==null?void 0:p.label)!=null?h:"";return gn.createElement("div",{className:"secondaryToggleButton",title:d},gn.createElement(lg,{disabled:o,onClick:c},gn.createElement(bS,{iconClass:a?"audioToggleIconButton":"rotateIconButton",disabled:o})))},lg=({onClick:t,disabled:e=!1,className:r="iconButton",children:o})=>{let i=e?()=>{}:t;return gn.createElement("div",{className:`${r} centeredContent`,onClick:i,role:"button"},o)},bS=({iconClass:t,disabled:e,className:r="cameraControlIcon"})=>gn.createElement("div",{className:`${r} ${t}`,"data-enabled":!e});var Cae=({onResetRequested:t,onImageUsed:e,videoObjectUrl:r,isInterrupted:o})=>{let{screen:{width:i,height:s}}=qe(),a=(0,Lh.useRef)(null),[l,c]=(0,Lh.useState)([0,0]),[d,u]=(0,Lh.useState)(0),[p,h]=(0,Lh.useState)(!1);(0,Lh.useEffect)(()=>{o&&p&&f()},[o]),(0,Lh.useEffect)(()=>{if(a.current){let{videoWidth:x,videoHeight:w}=a.current,k=ig({sW:i,sH:s,vW:x,vH:w,rotation:0});c(k)}},[i,s]);let f=()=>{let x=a.current;x.playbackRate===1&&(x.playbackRate=0,h(!1))},m=()=>{let x=a.current;x.playbackRate===0&&(x.playbackRate=1,h(!0))},g=async()=>{let x=a.current;x.paused?(x.playbackRate=1,await x.play(),h(!0)):m()},v=({target:x})=>{if(!(x instanceof HTMLVideoElement))return;let{videoWidth:w,videoHeight:k}=x,T=ig({sW:i,sH:s,vW:w,vH:k,rotation:0});c(T),f()},y=({target:x})=>{x instanceof HTMLVideoElement&&u(x.currentTime)},[S,C]=l,b=`translate(${S}px, ${C}px)`;return td.createElement("div",{className:"camFullSize"},td.createElement("video",{src:r,style:{transform:b},className:"centeredPreview camFullSize",ref:a,autoPlay:!1,preload:"auto",playsInline:!0,onLoadedData:v,onTimeUpdate:y,onPause:f}),td.createElement(OFe,{video:a.current,isPlaying:p,currentTime:d,translation:l,startPlayback:g,freeze:f}),td.createElement(V8,{onImageUsed:e,onResetRequested:t}))},OFe=({video:t,isPlaying:e,currentTime:r,translation:o,startPlayback:i,freeze:s})=>{let{screen:{isMobile:a,width:l,height:c}}=qe();if(t===null)return null;let d=()=>{e?s():i()},u={left:0,bottom:0,right:200};if(a&&vR(t)){let{videoWidth:h,videoHeight:f}=t;u=sae({sW:l,sH:c,vW:h,vH:f,translation:o})}let p={left:`${u.left}px`,bottom:`${u.bottom}px`,right:`${u.right}px`};return td.createElement("div",{className:"videoPlaybackControls",style:p},td.createElement(lg,{onClick:d},td.createElement(Fr,{src:e?"/svg/pause_icon.svg":"/svg/play_icon.svg",className:"cameraControlIcon cameraControlIconShadow"})),td.createElement(aae,{video:t,currentTime:r,startPlayback:i,freeze:s}))},V8=({onImageUsed:t,onResetRequested:e})=>{let r=Te();return td.createElement("div",{className:"postCaptureActionButtonTray"},td.createElement("button",{onClick:e,className:"postCaptureActionButton",role:"button"},r.retake),td.createElement("button",{onClick:t,className:"postCaptureActionButton",role:"button"},r.use))};var Sae=({onResetRequested:t,onImageUsed:e,photoObjectUrl:r})=>{let{screen:{width:o,height:i}}=qe(),[s,a]=(0,SS.useState)([0,0]),l=(0,SS.useRef)(null);(0,SS.useEffect)(()=>{if(l.current){let{naturalWidth:h,naturalHeight:f}=l.current,m=ig({sW:o,sH:i,vW:h,vH:f,rotation:0});a(m)}},[o,i]);let c=h=>{if(h.target instanceof HTMLImageElement){let{naturalWidth:f,naturalHeight:m}=h.target,g=ig({sW:o,sH:i,vW:f,vH:m,rotation:0});a(g)}},[d,u]=s,p=`translate(${d}px, ${u}px)`;return SR.createElement("div",{className:"camFullSize"},SR.createElement("img",{style:{transform:p},ref:l,alt:"captured by camera",className:"centeredPreview camFullSize",src:r,onLoad:c}),SR.createElement(V8,{onImageUsed:e,onResetRequested:t}))};var zFe=({state:t,dispatcher:e})=>{let{cameraStream:r,isLoading:o,photoRotation:i}=t;$e(r!==null,"cameraStream should not be null");let{stream:s}=r,a=(0,xae.useRef)(null),l=Te();return rd.createElement(rd.Fragment,null,rd.createElement(gS,{isHidden:o,stream:s,videoRef:a,onLoaded:()=>{e.endLoad()},rotation:i}),rd.createElement(CS,{state:t,dispatcher:e}),rd.createElement("button",{disabled:o,onClick:()=>{if(a.current===null)return;let u=a.current;m9(u,i).then(p=>{e.setPhotoUrl(p)}).catch(p=>{ge.warn(p),e.setError({error:p,title:l.errorOccurred,message:l.couldntGetPhotoData,okMessage:l.resetCamera,onOk:()=>e.reset()})})},className:"cameraShutter",role:"button"},rd.createElement("div",{className:"photoShutterCircle"})))},wae=({state:t,dispatcher:e,onUsed:r})=>{let{cameraUuid:o,photoObjectUrl:i,cameraStream:s}=t;return rd.createElement(rd.Fragment,null,s!==null&&i===null&&rd.createElement(zFe,{key:o,state:t,dispatcher:e}),i!==null&&rd.createElement(Sae,{onResetRequested:()=>e.reset(),onImageUsed:()=>{i&&r(i)},photoObjectUrl:i}))};var Xa=X(he()),nd=X(he());var UFe=(0,nd.memo)(({start:t,className:e})=>{let r=(0,nd.useRef)(-1),o=()=>Math.floor((Date.now()-t)/1e3),[i,s]=(0,nd.useState)(o);return(0,nd.useEffect)(()=>(r.current>0&&window.clearInterval(r.current),r.current=window.setInterval(()=>{s(o())},500),()=>{r.current>0&&window.clearInterval(r.current)})),Xa.createElement("div",{className:e},s0(i),Xa.createElement("div",{className:"blinkingDot"}))},(t,e)=>t.streamId===e.streamId),HFe=({state:t,dispatcher:e,isInterrupted:r})=>{let{cameraStream:o,isLoading:i,isRecording:s,error:a,supportedVideoRecorderFormat:l}=t;$e(o!==null,"cameraStream should not be null"),$e(l!==void 0,"supportedVideoRecorderFormat should not be undefined");let c=(0,nd.useRef)(null),d=(0,nd.useRef)(null),u=(0,nd.useRef)(-1),p=Te();(0,nd.useEffect)(()=>{var m,g;s&&r&&f(),a&&((m=d.current)==null?void 0:m.state)!=="inactive"&&f(),a&&((g=c.current)==null||g.pause())},[r,t.error]);let h=()=>{let m=new mS(o,l);u.current=window.setTimeout(()=>{f().then(()=>{e.setMessage({message:p.videoRecordingTimeLimitReached,onOk:()=>{e.setMessage(null)}})})},m.maxLengthMS),e.startRecording(),m.start(),d.current=m},f=async()=>{try{if(!d.current)return;window.clearTimeout(u.current);let m=await d.current.stop();if(!al(m.type))throw new Error(`un-supported video MIME type: ${m.type}`);let g=URL.createObjectURL(m);e.setVideoUrl(g,m.type)}catch(m){ge.warn(m);let g=Pl(m,p.unexpectedErrorOccurred);e.setError({error:g,title:p.errorOccurred,message:p.couldntGetVideoData,okMessage:p.resetCamera,onOk:()=>{e.reset()}})}};return Xa.createElement(Xa.Fragment,null,Xa.createElement(gS,{isHidden:i,stream:o.stream,videoRef:c,onLoaded:()=>e.endLoad()}),s&&Xa.createElement(UFe,{start:Date.now(),streamId:o.stream.id,className:"durationCounter centeredContent"}),Xa.createElement(CS,{state:t,dispatcher:e}),Xa.createElement("button",{disabled:i,onClick:s?f:h,className:"cameraShutter",role:"button"},Xa.createElement("div",{className:s?"videoShutterCircleRecording":"videoShutterCircle"})))},Tae=({state:t,dispatcher:e,isInterrupted:r,onUsed:o})=>{let i=Te(),{cameraStream:s,videoObjectUrl:a,videoContentType:l,cameraUuid:c}=t;return Xa.createElement(Xa.Fragment,null,s!==null&&a===null&&Xa.createElement(HFe,{key:c,state:t,dispatcher:e,isInterrupted:r}),a!==null&&l!==null&&Xa.createElement(Cae,{onResetRequested:()=>{confirm(i.confirmResetVideoCamera)&&e.reset()},onImageUsed:()=>{a&&l&&o(a,l)},videoObjectUrl:a,isInterrupted:r}))};var _o=X(he()),od=X(he());var $8=100,W8=class{constructor(e){this.worker=null;var o;this.video=e.video,this.imageSideLength=e.videoSideLength-2*$8,this.onFound=e.onFound,this.scanning=!1;let r=this.onMessage.bind(this);this.createWorker=()=>e.workerFactory(r),this.canvas=(o=e.canvas)!=null?o:Dr.create(this.imageSideLength,this.imageSideLength)}onMessage(e){var r,o;!this.scanning||(((r=e.data)==null?void 0:r.error)&&ge.warn(e.data.error),((o=e.data)==null?void 0:o.text)?(this.setScanning(!1),this.onFound(e.data.text)):this.scan())}scan(){if(!this.scanning||!this.worker)return;let e=this.canvas.getContext2dForce(),r=this.imageSideLength;e.drawImage(this.video,$8,$8,r,r,0,0,r,r);let o=e.getImageData(0,0,r,r);this.worker.postMessage({buffer:o.data.buffer,imageSideLength:r})}setScanning(e){var r;e!==this.scanning&&(this.scanning=e,e?(this.worker=this.createWorker(),this.scan()):((r=this.worker)==null||r.terminate(),this.worker=null))}},j8=class{constructor(e,r){this.worker=new Worker(e),this.worker.onmessage=r}postMessage(e){var r;(r=this.worker)==null||r.postMessage(e,[e.buffer])}terminate(){var e;(e=this.worker)==null||e.terminate()}};var GFe=gU(),VFe=({state:t,dispatcher:e,onQrCodeUsed:r,videoRef:o})=>{let{isLoading:i,qrCodeContent:s,cameraStream:a}=t,l=(0,od.useRef)(null),c=(0,od.useRef)(-1),d=(0,od.useRef)(-1),[u,p]=(0,od.useState)(()=>{var b;return(b=Vt.qrCodeWorkerScript.getOrLoad())!=null?b:""}),[h,f]=(0,od.useState)(!1),m=Te();(0,od.useEffect)(()=>{u===""&&Vt.qrCodeWorkerScript.fetch().then(b=>{b&&p(b)})},[]);let g=b=>{var x;s||c.current>0||(c.current=window.setTimeout(()=>{var w;e.startQrContentPreviewing(),(w=o.current)==null||w.pause(),c.current=-1,f(!0)},200),e.setQrCodeContent(b),l.current=null,typeof((x=window==null?void 0:window.navigator)==null?void 0:x.vibrate)=="function"&&window.navigator.vibrate([100]))},v=hP.width;(0,od.useEffect)(()=>{i||s||l.current||!o.current||u===""||(l.current=new W8({video:o.current,videoSideLength:v,onFound:g,workerFactory:b=>new j8(u,b)}),d.current=window.setTimeout(()=>{var b;try{(b=l.current)==null||b.setScanning(!0)}catch(x){let w=Pl(x,m.unexpectedErrorOccurred);e.setError({error:w,title:m.qrCodeScannerPrepError,message:"",okMessage:m.okay,onOk:()=>{e.setError(null),e.setMode("photo")}})}},100))},[o.current,i,u,s]),(0,od.useEffect)(()=>()=>{var b;(b=l.current)==null||b.setScanning(!1),l.current=null,window.clearTimeout(c.current),window.clearTimeout(d.current)},[a]);let y=async b=>{b=="url"?r({type:b,url:s}):r({type:b,text:s})},S=()=>{f(!1)},C=()=>{e.resetQrContentState(),o.current!==null&&o.current.play()};return _o.createElement(_o.Fragment,null,!i&&!h&&_o.createElement("div",{className:"qrModeGuidanceContainer"},_o.createElement("div",{className:"qrModeGuidance"},m.qrModeGuidance)),!i&&_o.createElement(WFe,{qrFound:!!s}),_o.createElement(Vr,{className:"qrPreviewFadeModal",overlay:!0,container:"none",open:h,onClose:S,onExited:C},_o.createElement($Fe,{onDismiss:S,onUsed:y,text:s})))},$Fe=({onDismiss:t,onUsed:e,text:r})=>{let o=Te(),i=r?GFe(r,{protocols:["http","https"]}):!1,s=i?decodeURI(r):r,a=i?"qrPreviewUrl":"qrPreviewText",l=i?o.createWebCard:o.createTextCard,c=()=>{window.open(r,"_blank")},d=()=>{e(i?"url":"text")};return _o.createElement("div",{className:"qrPreviewModal"},_o.createElement(dr,{round:!0},_o.createElement(fr,null,_o.createElement(mr,null),_o.createElement(kr,null,o.qrCodePreviewDialogTitle),_o.createElement(wr,null))),_o.createElement("div",{className:"qrPreviewBody"},_o.createElement("div",{className:a},s)),_o.createElement("div",{className:"qrPreviewFooter"},_o.createElement(K8,{className:"secondary",onClick:t},o.cancel),i&&_o.createElement(K8,{onClick:c},o.open),_o.createElement(K8,{onClick:d},l)))},K8=({onClick:t,className:e,children:r})=>_o.createElement("div",{role:"button",className:`qrPreviewActionButton ${e}`,onClick:t},r),WFe=({qrFound:t})=>_o.createElement("div",{className:`centeredQrFrame ${t?"yellowFrame":""}`}),Dae=({state:t,dispatcher:e,onUsed:r})=>{let{cameraStream:o,isLoading:i}=t,s=(0,od.useRef)(null),a=(l,c)=>{e.endLoad()};return o===null?null:_o.createElement(_o.Fragment,null,_o.createElement(gS,{isHidden:i,stream:o.stream,videoRef:s,onLoaded:a,rotation:t.photoRotation,centered:!0,ignoreScreenSizeChange:!0}),_o.createElement(VFe,{state:t,dispatcher:e,onQrCodeUsed:r,videoRef:s}),_o.createElement(CS,{state:t,dispatcher:e}))};function kae(t,e,r){if(t.editor&&t.editor.length>0){let o=t.editor[t.editor.length-1].cardId;return jFe(t,o,e,r)}else return KFe(t,r)}function jFe(t,e,r,o){let i=De.get().strings,s={id:t.userInfo.user_id,name:Ut(t.userInfo)};return{onPhotoUsed:async d=>{o();let u=await $o.fromObjectURL(d,hd),{image:p,extension:h,name:f}=u,m=Wp({asset:{description:f,extension:h},contentSize:Ze(p.width,p.height),author:s});r({rootCardId:e,card:m,type:"picture",file:u,thumb:p,url:d})},onVideoUsed:async(d,u)=>{o();let p=await zi.fromObjectUrl(d,u),[{width:h,height:f,duration:m}]=p.getMetadata();if(!h||!f||!m||m<=0)throw new Error("video file has invalid metadata");let g=jp({asset:{description:p.name,extension:p.extension},duration:m,author:s,contentSize:Ze(h,f)}),v=await p.generateHeadThumbnail();r({rootCardId:e,card:g,type:"video",file:p,thumb:v,url:d})},onQrCodeUsed:async d=>{if(o(),d.type==="url"){let u=d.url;t.reduce(Fe(oe.createWebCard,i.creatingWebCard));let p={id:t.userInfo.user_id,name:t.userInfo.username},{thumbnailFile:h}=await oC(u,p),f=await $o.fromFile(h),{image:m}=f,g=lv({author:p,url:u});r({rootCardId:e,card:g,type:"web",file:f,thumb:m}),t.reduce(Fe(oe.createWebCard,null))}else{let u=await Na({url:ue.res.src(i.textCardPlaceholderImgPath)}),p=Sd({backcolor:"#FFFFFFFF",color:"#FF000000",author:s,text:d.text});r({rootCardId:e,card:p,type:"other",thumb:u})}}}}function KFe(t,e){let r=De.get().strings,o=Re(t.screen.width*.5,0);return{onPhotoUsed:l=>{e(),Nt(new Vx(l,o))},onVideoUsed:(l,c)=>{e(),$e(c,"mimeType must be provided for video content"),Nt(new $x(l,c,o))},onQrCodeUsed:async l=>{if(e(),l.type==="url"){let c=l.url;t.reduce(Fe(oe.createWebCard,r.creatingWebCard));let d=await ue.apiClient.getOgpMetadata(c),u=await N1({author:{id:t.userInfo.user_id,name:t.userInfo.username},decodedUrl:decodeURI(c),title:d.title,description:d.description});t.reduce(Fe(oe.createWebCard,null)),Nt(new lu(o,{url:c,thumbnailFile:u,title:d.title}))}else Nt(new dd({backcolor:Fn("#FFFFFFFF"),color:Fn("#FF000000"),startPosition:o,text:l.text}))}}}var Pae=()=>{let t=qe(),e=()=>{t.reduce(Tf(!1))},[r,o]=(0,Pa.useState)();return ka.createElement(ka.Fragment,null,ka.createElement(Vr,{open:t.cameraDialogOpen,onClose:e},ka.createElement(qFe,{store:t,setSelectorState:o,onDismiss:e})),r&&ka.createElement(YFe,{store:t,selectorState:r,setSelectorState:o}))},qFe=({store:t,setSelectorState:e,onDismiss:r})=>{let o=Te(),i=(0,Pa.useRef)(()=>{}),s=(0,Pa.useRef)(1),a=(0,Pa.useRef)(1),l=!1,c=!1,d=or(t);if(typeof d=="number"){l=t.screenLockStates[d];let ie=t.screenSharingActionNotification[d];c=!!ie&&Qx(ie)}let u=!t.pageVisible||l||c,p=t.userPreference.cameraPrefs,[h,f]=hae(r,p.mode,p),{isLoading:m,mode:g,isRecording:v,videoDeviceIndex:y,audioDeviceIndex:S,qrVideoDeviceIndex:C,videoObjectUrl:b,photoObjectUrl:x,videoDevices:w,audioDevices:k,resPrefs:T,error:A,message:E,qrCodeContent:F}=h,z=!!x||!!b;(0,Pa.useEffect)(()=>(t.reduce(zo(!1)),()=>{t.reduce(zo(!0))}),[]);let L=(0,Pa.useMemo)(()=>new FN,[]),R=()=>{L.getReport().then(ie=>{f.setDevices(ie,p)}).catch(ie=>{ie.name==="NotAllowedError"?f.setError({error:ie,title:o.cameraMicPermissionDeniedErrorMsg,okMessage:o.getHelp,onOk:()=>window.open(o.helpPageLinkToPermitCameraAndMic),cancelMessage:o.close,onCancel:()=>{f.dismissDialog()}}):f.setError({error:ie,title:o.generalCameraPrepError,message:ie.name==="NotFoundError"?o.cantFindUsableDevice:ie.message,okMessage:o.close,onOk:()=>{f.dismissDialog()}})})};(0,Pa.useEffect)(()=>{if(!f9()){let _=Error("MediaCapture not supported");ge.warn(_),f.setError({error:_,title:o.generalCameraPrepError,message:o.browserDoesntSupportMediaCapture,okMessage:o.closeCamera,onOk:()=>{f.dismissDialog()}});return}R();let ie=So(),Z=()=>{ie(R,1e3)},P="ondevicechange"in navigator.mediaDevices;return P&&navigator.mediaDevices.addEventListener("devicechange",Z),()=>{P&&navigator.mediaDevices.removeEventListener("devicechange",Z)}},[]),(0,Pa.useEffect)(()=>{v||z||F&&!t.pageVisible||u&&f.dismissDialog()},[u]),(0,Pa.useEffect)(()=>{if(!w||!k)return;if(h.canSkipCreation){f.resetCanSkipCreation();return}if(i.current(),z)return;let ie=mae(h);iae(ie).then(Z=>{var U;i.current=()=>Z.dispose(),s.current=1,a.current=1;let{width:P,height:_}=t.screen,I=(U=pP(window.screen))!=null?U:P<=_;f.setCameraStream(Z,I)}).catch(N)},[g,w,k,y,S,C,z,T]),(0,Pa.useEffect)(()=>()=>i.current(),[]),(0,Pa.useEffect)(()=>{var ie;u||(A?t.reduce(Pe(oe.insertDocument,{title:(ie=A.title)!=null?ie:"",message:A.message,okMessage:A.okMessage,cancelMessage:A.cancelMessage,onOk:()=>{var Z;t.reduce(Pe(oe.insertDocument,void 0)),(Z=A.onOk)==null||Z.call(A)},onCancel:()=>{var Z;t.reduce(Pe(oe.insertDocument,void 0)),(Z=A==null?void 0:A.onCancel)==null||Z.call(A)}})):E&&t.reduce(Ps(oe.insertDocument,{title:"",message:E.message,okMessage:o.okay,color:"info",onOk:()=>{t.reduce(Pe(oe.insertDocument,void 0)),E.onOk()}})))},[u,A,E]),(0,Pa.useEffect)(()=>{if(!h.cameraStream)return;let ie=t.userPreference.cameraPrefs.resolutions,Z=fae(h,ie);t.reduce(()=>({userPreference:{cameraPrefs:{$merge:Z}}}))},[h.cameraStream]);let N=ie=>{var I,U;if(h.isFirstLaunch){f.endFirstLaunch();return}let{lastSwitched:Z}=h,P=(I=w==null?void 0:w.length)!=null?I:0,_=(U=k==null?void 0:k.length)!=null?U:0;Z==="video"&&P>1&&a.current<P?(a.current+=1,f.setNextDevice("video")):Z==="audio"&&_>1&&s.current<_?(s.current+=1,f.setNextDevice("audio")):(ge.warn("could not create CameraStream",ie),f.setError({error:ie,title:o.generalCameraPrepError,message:ie.message,okMessage:o.closeCamera,onOk:()=>{f.dismissDialog()}}))},{onPhotoUsed:V,onVideoUsed:W,onQrCodeUsed:me}=kae(t,e,r);return ka.createElement("div",{className:"cameraDialogModalWrapper camFullSize"},ka.createElement("div",{className:"cameraRelativelyPositioned camFullSize"},m&&ka.createElement(ur,{absolute:"top"}),g==="photo"&&ka.createElement(wae,{state:h,dispatcher:f,onUsed:V}),g==="video"&&ka.createElement(Tae,{state:h,dispatcher:f,isInterrupted:u,onUsed:W}),g==="qr"&&ka.createElement(Dae,{state:h,dispatcher:f,onUsed:me})))},YFe=({store:t,selectorState:e,setSelectorState:r})=>{let o=s=>()=>{s&&e.url!==void 0&&URL.revokeObjectURL(e.url),r(void 0)},i=s=>async a=>{let l=a?"inside":"next",c=s.card;s.type==="picture"&&(s==null?void 0:s.file)instanceof $o?Nt(new zg({creatorCardId:s.rootCardId,card:c,insertType:l,imageFile:s.file,url:s.url})):s.type==="video"&&(s==null?void 0:s.file)instanceof zi?Nt(new Ug({creatorCardId:s.rootCardId,card:c,insertType:l,videoFile:s.file,url:s.url})):s.type==="web"&&(s==null?void 0:s.file)instanceof $o?Nt(new $g(s.rootCardId,c,s.file,l)):Nt(new Ap({cardId:s.rootCardId,card:c,type:l})),o(!1)()};return ka.createElement(Vr,{className:"cameraAddTypeSelectDialog",open:e!==void 0,onClose:o(!1),overlay:!0,backDropStatic:!0},ka.createElement("div",{className:"cameraAddTypeSelectDialogInner"},ka.createElement(bU,{store:t,onBack:o(!0),onClick:i(e),thumb:e.thumb,card:e.card,forCamera:!0})))};var ji=X(he()),xS=X(he());var xR=X(Dm());function Eae(t){return`maintenances.${t.serviceCode}_${t.startTime}_${t.endTime}`}function _ae(t,e){let r=Eae(e),o=ue.localStorage.get(r);if(!o)return!0;let i=new Date(e.startTime).getTime(),s=t.getTime()-new Date(o).getTime(),a=i-t.getTime();return s>=24*pr.hour&&a<=24*pr.hour}function Aae(t,e){ue.localStorage.put(Eae(e),t.toISOString())}var Iae=()=>{let t=qe(),e=Te(),[r,o]=(0,xS.useState)([]);(0,xS.useEffect)(()=>{let s=new Date,a=t.maintenanceInfos.filter(l=>_ae(s,l));o(a)},[t.maintenanceInfos]),(0,xS.useEffect)(()=>{let s=new Date;r.forEach(a=>Aae(s,a))},[r]),(0,xS.useEffect)(()=>{let[s]=t.maintenanceInfos.filter(d=>d.shouldStopAll).sort((d,u)=>d.startTime.localeCompare(u.startTime));if(!s)return;let a=Date.now(),c=new Date(s.startTime).getTime()-a;if(c<=24*pr.hour){let d=setTimeout(()=>{o([]),t.reduce(Z9({color:"info",title:e.underMaintenace,message:[s.title,s.description,`${e.endSchedule}: ${(0,xR.default)(s.endTime).format("llll")}`],okMessage:e.reload,onOk:()=>location.reload()}))},Math.max(0,c));return()=>clearTimeout(d)}},[t.maintenanceInfos]);let i=()=>{o([])};return ji.createElement(Vr,{className:"m10eDialogWrapper",overlay:!0,open:r.length>0,onClose:i},ji.createElement($r,{className:"m10eDialog",round:!0},ji.createElement(dr,{round:!0},ji.createElement(fr,null,ji.createElement(mr,null,ji.createElement(Mt,{onClick:i},e.close)),ji.createElement(kr,null,e.maintenanceNotification),ji.createElement(wr,null))),ji.createElement(mn,{round:!0},ji.createElement(XFe,{infos:t.maintenanceInfos}))))},XFe=({infos:t})=>{let e=r=>[r.serviceCode,r.startTime,r.endTime].join("_");return ji.createElement("div",{className:"m10eBody"},t.map(r=>ji.createElement(QFe,{info:r,key:e(r)})))},QFe=({info:t})=>{let e=Te();return ji.createElement("div",{className:"m10eSection"},ji.createElement("div",{className:"m10eTitle"},t.title),ji.createElement("div",{className:"m10eSubSection"},ji.createElement("div",{className:"m10ePara"},t.description),ji.createElement("div",{className:"m10ePara"},(0,xR.default)(t.startTime).format("llll")," ~"," ",(0,xR.default)(t.endTime).format("llll"))),ji.createElement("div",{className:"m10eSubSection"},ji.createElement("div",{className:"m10ePara"},ji.createElement("a",{href:t.url,target:"_blank"},e.seeDetail))))};var sr=X(he());var q8=[{type:"tiny",width:256,height:192},{type:"small",width:384,height:288},{type:"medium",width:512,height:384},{type:"large",width:760,height:570}],JFe=t=>{let e=[q8[0]];for(let r=1;r<q8.length;r++){let o=q8[r];t.width>=o.width&&t.height>=Fae(o)&&e.push(o)}return e},Y8=55,Rae=4,ZFe=45,Fae=t=>ZFe+t.height+Y8+Rae,Mae=()=>{let t=Te(),e=qe(),r=(0,sr.useRef)(null),o=(0,sr.useRef)(null),i=(0,sr.useRef)(null),s=(0,sr.useRef)(null),a=(0,sr.useRef)(null),l=JFe(e.screen),[c,d]=wn({sizeIndex:Math.max(l.length-3,0),videoIndex:0,duration:0,listShown:!1,confirmShown:!1,isDragging:!1,isLoading:!1,tutorials:void 0,closeAndCheckAll:!1}),u=(F=c.sizeIndex)=>l[F%l.length],p=()=>e.tutorials!==void 0&&tg(e.tutorials.contents[c.videoIndex]),h=(F,z,L=!1,R)=>{let N=ht(F,0,window.innerWidth-u(R).width),V=ht(z,0,window.innerHeight-Fae(u(R))),{style:W}=i.current;W.transform=`translate(${N}px, ${V}px)`,W.right="unset",W.bottom="unset",W.transition=L?"transform, 0.5s":""},f=()=>{let F=c.sizeIndex+1;d({sizeIndex:F});let{x:z,y:L}=i.current.getBoundingClientRect();h(z,L,!0,F)},m=F=>!c.isDragging&&F(),g=()=>{p()?e.reduce(()=>({tutorialDialogOpen:{$set:!1}})):d({confirmShown:!0})},v=()=>{d({listShown:!c.listShown})},y=()=>{p()?e.reduce(()=>({tutorialDialogOpen:{$set:!1}})):(Bse(e,e.tutorials.contents[c.videoIndex]),d({videoIndex:c.videoIndex+1}))},S=F=>{if(!e.tutorials)return!1;let z=e.tutorials.contents[F];return uR(z,e.checkedTutorials[z.id])};(0,sr.useEffect)(()=>{hR(e)},[]),(0,sr.useEffect)(()=>{var F;e.tutorialDialogOpen&&e.tutorials&&d({videoIndex:(F=Ase(e.tutorials.contents,e.checkedTutorials))!=null?F:0})},[e.tutorialDialogOpen]),(0,sr.useEffect)(()=>{let F={x:0,y:0};if(!o.current)return;let z=new Mn(o.current,{onlyEventOnTarget:!1,ignoreDevicePixelRatio:!0,preventOnTouch:!1});return z.onSingle=(L,R)=>{if(L==="down"&&(F=i.current.getBoundingClientRect()),L==="move"&&R.down){let N=R.x-R.down.x,V=R.y-R.down.y;if(Math.hypot(Math.abs(N),Math.abs(V))<=5)return;d({isDragging:!0});let W=F.x+N,me=F.y+V;h(W,me)}L==="up"&&setTimeout(()=>{d({isDragging:!1})},50)},()=>{z.unbind()}},[e.tutorialDialogOpen,c.sizeIndex,e.screen]),(0,sr.useEffect)(()=>{var F;if(i.current){let{x:z,y:L}=(F=i.current)==null?void 0:F.getBoundingClientRect();h(z,L,!0)}},[e.screen]),(0,sr.useEffect)(()=>{var F;if(i.current){let{x:z,y:L}=(F=i.current)==null?void 0:F.getBoundingClientRect();h(z,L)}},[e.tutorialDialogOpen]),(0,sr.useEffect)(()=>{var F;c.listShown&&((F=document.querySelector(`[data-index="${c.videoIndex}"]`))==null||F.scrollIntoView())},[c.listShown]),(0,sr.useEffect)(()=>{if(!e.tutorialDialogOpen)return;let F=()=>{s.current&&r.current&&(s.current.style.transform=`scaleX(${r.current.currentTime/c.duration})`),a.current=requestAnimationFrame(F)};return a.current=requestAnimationFrame(F),()=>{a.current&&cancelAnimationFrame(a.current)}},[e.tutorialDialogOpen,c.duration]);let C=()=>{if(!e.tutorials)return"";let F=e.tutorials.contents[c.videoIndex];return tg(F)?F.title:`${c.videoIndex+1}. ${F.title}`},b=()=>e.tutorials?e.tutorials.contents.filter(F=>!tg(F)).map((F,z)=>sr.default.createElement(Tn,{className:"tutorialItem",key:z,"data-index":z,onClick:()=>{d({videoIndex:z})}},sr.default.createElement(Nae,{checked:S(z)}),sr.default.createElement("span",null,z+1,". ",F.title))):[],x=sr.default.createElement(dr,{className:"tutorialDialogHeader",round:!0},sr.default.createElement(qr,{onClick:()=>m(v)},e.tutorials&&sr.default.createElement(sr.default.Fragment,null,S(c.videoIndex)&&sr.default.createElement(Nae,{checked:!0}),sr.default.createElement("div",{className:"tutorialTitle","data-size":u().type},C()),sr.default.createElement("div",{className:"tutorialItemListAnchor"},sr.default.createElement("div",{className:"tutorialItemListArrow"}),sr.default.createElement(jt,{open:c.listShown,onClose:()=>{}},sr.default.createElement("div",{className:"tutorialItemListPopover",style:{maxHeight:u().height+Y8}},b()))))),sr.default.createElement("div",{className:"tutorialHeaderActionWrapper"},l.length>1&&sr.default.createElement(sr.default.Fragment,null,sr.default.createElement("div",{className:"tutorialHeaderAction tutorialArrowIcon",role:"button",onClick:()=>m(f)}),sr.default.createElement("div",{className:"tutorialHeaderButtonsBorder"})),sr.default.createElement("div",{className:"tutorialHeaderAction tutorialCloseIcon",role:"button",onClick:()=>m(g)}))),w=()=>{d({isLoading:!1});let F=()=>e.reduce(Pe(oe.loadTutorial,void 0)),z={title:t.failedPlayTutorial,okMessage:t.reload,cancelMessage:t.close,onOk:()=>{F(),r.current.load()},onCancel:F};e.reduce(Pe(oe.loadTutorial,z))},k=sr.default.createElement(sr.default.Fragment,null,sr.default.createElement("div",{className:"tutorialDialogVideo",style:u()},e.tutorials&&sr.default.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,loop:!0,ref:r,src:y8(e.tutorials.contents[c.videoIndex]),onLoadedMetadata:F=>{d({duration:F.currentTarget.duration})},onLoadStart:()=>d({isLoading:!0}),onLoadedData:()=>d({isLoading:!1}),onError:w})),c.isLoading||e.fetchStates[wt.tutorial()]==="fetching"?sr.default.createElement(ur,{height:Rae,style:{background:"#D0D0D0"}}):sr.default.createElement("div",{className:"tutorialProgressBar"},sr.default.createElement("div",{className:"tutorialProgressBarIndicator",ref:s}))),T=sr.default.createElement("div",{className:"tutorialDialogFooter",style:{height:`${Y8}px`}},sr.default.createElement(qr,{className:"tutorialOkButton",onClick:()=>m(y),disabled:!e.tutorials||c.isLoading},p()?sr.default.createElement("div",null,t.close):sr.default.createElement(sr.default.Fragment,null,sr.default.createElement("div",{className:"tutorialOkIcon"}),sr.default.createElement("div",null,t.understood)))),A=e.tutorials&&pR(e.tutorials.contents,e.checkedTutorials).length>0,E=sr.default.createElement(Vr,{open:c.confirmShown,onClose:()=>{}},sr.default.createElement(vy,{title:t.closeTutorialTitle},sr.default.createElement("div",{className:"tutorialCloseDialogContent"},sr.default.createElement("p",null,t.closeTutorialMsg),e.tutorials&&sr.default.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,loop:!0,src:y8(e.tutorials.finishTutorial)}),sr.default.createElement("p",null,A&&sr.default.createElement("label",null,sr.default.createElement("input",{type:"checkbox",onChange:F=>{d({closeAndCheckAll:F.target.checked})}}),t.closeTutorialCheckLabel))),sr.default.createElement(El,null,sr.default.createElement(ma,{onClick:()=>{d({confirmShown:!1})}},t.cancel),sr.default.createElement(ma,{onClick:()=>{c.closeAndCheckAll&&Lse(e),e.reduce(()=>({tutorialDialogOpen:{$set:!1}})),d({confirmShown:!1,closeAndCheckAll:!1})}},t.end))));return sr.default.createElement("div",{className:"tutorialContainer",ref:o},sr.default.createElement(si,{timeout:250,unmountOnExit:!0,in:e.tutorialDialogOpen,appear:e.tutorialDialogOpen,classNames:"fade"},sr.default.createElement("div",{className:"tutorialDialog",style:{width:u().width},ref:i},x,k,T)),E)},Nae=({checked:t})=>sr.default.createElement("div",{className:"tutorialTitleCheck","data-checked":t});var Pb=X(he()),wR=X(he());var X8=X(on());var Bae=()=>{let t=qe(),[e,r]=(0,wR.useState)(),o=Pb.useRef(-1),i=Te(),s=!t.desktop||t.timelineOpen||t.submissionBoxOpen||t.materialBoxOpen||t.addSheetDialogOpen||t.addTextCardDialogOpen||t.cameraDialogOpen||t.userProfileOpen||t.preferenceOpen||t.passwordDialogOpen||t.userStatusListOpen||t.editor||md(t)||ew(t),a=l=>{let c=l[0],d=c.split(`
`)[0],u=c.split(`
`)[1];if(l.length>1){let p=l.length-1;u?u+=`${(0,X8.sprintf)(i.others,p)}`:d+=`${(0,X8.sprintf)(i.others,p)}`}return{firstLine:d,secondLine:u}};return(0,wR.useEffect)(()=>{if(!!e&&s){r(void 0),window.clearTimeout(o.current),o.current=-1;return}if(t.mobilePushMessages.length<=0||s)return;let l=a(t.mobilePushMessages);r(l),t.reduce(HJ()),window.clearTimeout(o.current),o.current=-1,o.current=window.setTimeout(()=>{r(void 0),o.current=-1},5e3)},[t.mobilePushMessages.length,s]),Pb.createElement(si,{in:!!e,appear:!!e,timeout:200,classNames:"pushForegroundNotification",unmountOnExit:!0},Pb.createElement("div",{className:"pushForegroundNotification"},Pb.createElement("div",{className:"pushForegroundNotificationContent"},e==null?void 0:e.firstLine,Pb.createElement("br",null),e==null?void 0:e.secondLine)))};var nc=X(he());var br=X(he()),Ts=X(he());var Eb=X(he()),lp=X(he());var Lae=function({store:e,pageIndex:r,pageCount:o,outerClassName:i,innerClassName:s,onPageChange:a,onClick:l,getPage:c,disabled:d,screenSize:u,cellSize:p}){let h=(0,lp.useRef)(null),f=(0,lp.useRef)(null),m=(0,lp.useRef)(0),g=b=>{!h.current||(h.current.style.transform=`translate(${b}px, 0)`,m.current=b)},v=()=>m.current,[y,S]=(0,lp.useState)(null),C=(0,lp.useRef)(r);return(0,lp.useEffect)(()=>{if(d)return;$e(h.current!=null),$e(f.current!=null);let b=f.current.getBoundingClientRect().width,x=new Mn(f.current,{ignoreDevicePixelRatio:!0,onlyEventOnTarget:!1}),w,k=0,T=!1,A=()=>{w={anim:Ls({from:v(),to:0,durationSec:.5,easing:Fo}),type:"bounce"}},E=z=>{w={anim:Ls({from:v(),to:z?-b:b,durationSec:.5,easing:Fo}),type:z?"forward":"backward"}};k=performance.now();let F=z=>{if(T)return;let L=(z-k)/1e3;k=z,w&&(g(w.anim.update(L)),w.anim.finished&&(w.type!=="bounce"&&a(w.type==="forward"?r+1:r-1),w=void 0)),requestAnimationFrame(F)};if(x.onSingle=(z,L)=>{if(!h.current)return;z==="down"&&(w=void 0);let R=v()<0,N=!R&&r==0||R&&r===o-1;z==="move"&&g(N?v()+L.dx/10:v()+L.dx),z==="up"&&(uo(L)?(g(0),l()):RQ(L,!0)||Math.abs(v())>b/2?N?A():E(R):A())},requestAnimationFrame(F),r>C.current){$e(y!=null);let z=[y[1],y[2],c(r+1)];S(z)}else if(r<C.current){$e(y!=null);let z=[c(r-1),y[0],y[1]];S(z)}else S([c(r-1),c(r),c(r+1)]);return C.current=r,()=>{g(0),w=void 0,T=!0,x.unbind()}},[u,r,o,d]),(0,lp.useEffect)(()=>{S([c(r-1),c(r),c(r+1)])},[u,p]),Eb.createElement("div",{className:i,ref:f},Eb.createElement("div",{className:s,ref:h},y&&Eb.createElement(Eb.Fragment,null,y[0],y[1],y[2])))},Oae=({children:t,className:e="",...r})=>Eb.createElement("div",{className:"uiPagerPage "+e,...r},t);var zae=({courseId:t,onClose:e})=>{var L;let r=qe(),o=()=>{var N;let R=(N=r.screenSharingState)==null?void 0:N.sessionId;R&&Fd({courseId:t,sessionId:R,store:r,showDialog:!1}),e()},[i,s]=(0,Ts.useState)(()=>{var N;let R=(N=r.submissionComparisonIds)!=null?N:[];return BA(r.screen,R)}),a=xn(r.submissionNumber),l=ao(t,a),c=r.submissionAnswers.bySubmissionKey[l];(0,Ts.useEffect)(()=>{if(!r.userInfo.is_teacher)return;let R=i.filter(N=>N!==null).map(N=>r.submissionAnswers.byId[N].author_id);R.length<=0||jv({store:r,courseId:t,submissionNumber:a,authors:R})},[r.mobilePushes]),(0,Ts.useEffect)(()=>{let R=vP({targetIds:[...i.filter(N=>N!==null)],currentIds:c,submissionAnswers:r.submissionAnswers.byId,submissionNumber:a});s(BA(r.screen,R))},[c]);let{cols:d,rows:u}=iC(r.screen,i.length),[p,h]=$a(r,!1),[f,m]=(0,Ts.useState)(),[g,v]=(0,Ts.useState)(),y=r.screen.width/d,S=r.screen.height/u,C=R=>{let N=R.filter(me=>!!me),{rows:V,cols:W}=iC(r.screen,N.length);if(V!==u||W!==d){s(N);return}s(R)};(0,Ts.useEffect)(()=>{let R=i.filter(N=>N!==null);s(BA(r.screen,R))},[d,u]);let b=(0,Ts.useRef)(r);b.current=r;let x=(0,Ts.useRef)(new LO(()=>b.current)).current;(0,Ts.useEffect)(()=>{var R,N;((R=r.screenSharingState)==null?void 0:R.type)!=="comparison"||((N=r.submissionAnswer)==null?void 0:N.id)||x.update(i)},[d,u,i,r.screen,r.submissionAnswerPageIndexStates,(L=r.screenSharingState)==null?void 0:L.type]),(0,Ts.useEffect)(()=>{var R;if(!r.submissionAnswer&&((R=r.screenSharingState)==null?void 0:R.type)==="fullscreen"){let N=r.screenSharingState.anonymous,V=$A(r,t,i),W=V.map(_=>_.document),{rows:me,cols:ie}=iC(r.screen,i.length),Z={rowCount:me,columnCount:ie,height:r.screen.height,scrollOffset:0,items:V},P=z1({store:r,anonymous:N,documentDependency:W,body:Z});r.reduce(Zi(Gv(r.screenSharingState.sessionId,t,P)))}},[r.submissionAnswer]);let w=i.filter(R=>R!=null).map(R=>r.submissionAnswers.byId[R]),k=r.submissions.byKey[l];if(!k)return br.createElement(rg,{onClose:o});let T=({id:R,index:N,done:V})=>{if(V){let W=[...i],me=W.indexOf(R),ie=W[me];W[me]=W[N],W[N]=ie,C(W),m(void 0)}else m(N)},A=R=>()=>{let N=[...i];N[R]=null,C(N)},E=Te(),F=()=>{r.teacherToolOpen&&r.reduce(hu(!1)),v("edit")},z=w.length<2?E.use:E.useAll;return br.createElement(br.Fragment,null,br.createElement("div",{className:"submissionComparison"},br.createElement("div",{className:"editorHeader",style:{zIndex:1}},br.createElement("div",{className:"editorHeaderInner"},g!==void 0&&br.createElement(br.Fragment,null,br.createElement("div",{className:"editorHeaderButtonGroup"},br.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},br.createElement("div",{className:"editorButton editorTextButton",role:"button",onClick:()=>v(void 0)},E.complete))),br.createElement("div",{className:"editorHeaderSpacer"}),r.screenSharingState&&br.createElement("div",{className:"editorHeaderButtonGroup"},br.createElement(Fh,{store:r,sharingState:r.screenSharingState}),br.createElement("div",{className:"editorHeaderScreenSharingText"},E.sharing))),g===void 0&&br.createElement(br.Fragment,null,br.createElement("div",{className:"editorHeaderButtonGroup"},br.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},br.createElement("div",{className:"editorButton editorTextButton",role:"button",onClick:o},E.end)),br.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},br.createElement("div",{className:"editorButton",role:"button",onClick:()=>v("draw")},br.createElement("div",{className:"editorSvgButtonIcon laserIcon","data-finger-tool-type":"laser"})))),br.createElement("div",{className:"editorHeaderSpacer"}),br.createElement("div",{className:"editorHeaderButtonGroup"},r.screenSharingState&&br.createElement(Fh,{store:r,sharingState:r.screenSharingState}),br.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},br.createElement("div",{className:"editorButton editorTextButton",role:"button",onClick:F},E.edit)),!r.screenSharingState&&br.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},br.createElement("div",{className:"editorButton",onClick:()=>h(!0),"data-disabled":w.length===0},br.createElement("div",{className:"editorButtonIcon exportButtonIcon"})),br.createElement(jt,{open:p,onClose:()=>h(!1)},br.createElement(hS,{submission:k,courseId:t,answers:w},R=>br.createElement(Tn,{onClick:R},z)))),br.createElement(Ooe,{store:r,answerTable:i,onPopoverOpened:()=>{h(!1)}}))))),br.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${d}, ${y}px)`,gridTemplateRows:`repeat(${u}, ${S}px)`}},i.map((R,N)=>{let V=f===N;return R===null?br.createElement(eMe,{key:`empty-${N}`,hover:V}):br.createElement(tMe,{store:r,courseId:t,key:R,id:R,editing:g==="edit",rows:u,cols:d,hover:V,cellSize:{width:y,height:S},onHoverChange:T,onClickDelete:A(N),answerTable:i})})),g==="draw"&&br.createElement(ml,{canvasSize:Xt(r.screen,window.devicePixelRatio),consumer:x})))},eMe=({hover:t})=>br.createElement("div",{className:"submissionComparisonCell","data-hover":t}),tMe=({store:t,courseId:e,id:r,rows:o,cols:i,hover:s,cellSize:a,editing:l,onClickDelete:c,onHoverChange:d,answerTable:u})=>{var k;let p=t.submissionAnswers.byId[r],h=(k=t.submissionAnswerPageIndexStates[r])!=null?k:0,{width:f,height:m}=a,g={width:m*4/3,height:m},v=(0,Ts.useRef)(null),y=(0,Ts.useRef)(null),S=(0,Ts.useRef)(Re()),C=(0,Ts.useRef)([]),{submissionNumber:b}=t;$e(typeof b=="number");let x=ao(e,b),w=t.submissions.byKey[x];return(0,Ts.useEffect)(()=>{if($e(v.current!=null&&y.current!=null),!l)return;let T=new Mn(v.current,{ignoreDevicePixelRatio:!0,onlyEventOnTarget:!1}),A=E=>{let F,z;return E.x<0?z=0:t.screen.width<E.x?z=i-1:z=Math.floor(E.x/f),E.y<0?F=0:t.screen.height<E.y?F=o-1:F=Math.floor(E.y/m),[F,z]};return T.onSingle=(E,F)=>{E==="down"&&(S.current.x=0,S.current.y=0,y.current.style.transform=""),S.current.x+=F.dx,S.current.y+=F.dy;let z=Re(F.original.pageX,F.original.pageY),[L,R]=A(z),N=L*i+R;if(N<=o*i&&d({id:r,index:N,done:E==="up"}),E==="move"){let[V,W]=[S.current.x,S.current.y];y.current.style.transform=`translate3d(${V}px, ${W}px, 0)`}else E==="up"&&(y.current.style.transform="")},()=>T.unbind()},[t.screen,l,o,i,u]),(0,Ts.useEffect)(()=>{C.current=u.filter(T=>!!T).map(T=>T)},[u]),br.createElement("div",{className:"submissionComparisonCell","data-hover":s},br.createElement("div",{className:"submissionComparisonCellDrag",ref:y},br.createElement(si,{in:l,appear:l,classNames:"submissionComparisonCellOuter",timeout:250},br.createElement("div",{className:"submissionComparisonCellOuter"},br.createElement("div",{style:{position:"relative",overflow:"hidden"}},br.createElement("div",{className:"submissionComparisonCellInner",ref:v},br.createElement(Lae,{store:t,screenSize:t.screen,cellSize:a,disabled:l,childClassName:"submissionComparisonCellContent",onClick:()=>t.reduce(Es({id:r,pageIndex:h,orderedAnswers:C.current,orderType:"comparison"})),onPageChange:T=>{t.reduce(oV(r,T))},pageCount:p.page_count,pageIndex:h,getPage:T=>br.createElement(Oae,{key:T,className:"submissionComparisonCellContent",role:"button"},br.createElement(rMe,{id:r,pageIndex:T,data:p,style:g}))}))),!w.hide_author&&br.createElement("div",{className:"submissionComparisonCellAuthorName"},p.author_name),l&&br.createElement(qr,{className:"submissionComparisonCellDeleteButton",onClick:c})))))},rMe=({style:t,id:e,pageIndex:r,data:o})=>r<0||o.page_count<=r?null:br.createElement("div",{style:t,className:"relative"},br.createElement(Jc,{id:e,index:r,skipForKnown404Url:!1,updatable:!0}));var ar=X(he()),Uae=X(he());var Hae=X(on());var nMe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,drawnType:"annotation",canLeave:!0,shouldSyncPlayController(t,e){return e.publisher===t.userInfo.user_id&&e.presenter===void 0}},TR=class extends ar.Component{constructor(e){super(e);this.shouldHandleCardEvent=({type:e,target:r})=>r==="card"&&["down","up"].includes(e);this.onCardClicked=e=>{let{store:r}=this.props,{editorStore:o,renderer:i}=this.state;if(!i||!o)return;let s=Mc(e,i.card)||e;this.viewStack.push({cardId:s.id,animate:!0}),r.reduce(dw(s.id,!0)),i.onNextState({store:r,card:s,editorStore:o,noteMtx:new ft,screen:r.screen,viewStack:[...this.viewStack],documentLoading:!1})};this.createCardLoadingStateChangedCallback=()=>{let e=So();return(r,o)=>{o==="loaded"&&e(()=>this.props.store.reduce(Co()),300)}};this.canvasRef=ar.createRef();this.loadingSubmissionAnswer=!1;this.viewStack=[];this.onDrawnUpdate=async({card:e,op:r,thumbs:o})=>{var c;let{store:i}=this.props,s=i.submissionAnswer;if(!s)return;let{id:a,pageIndex:l}=s;(c=this.layerUpdater)==null||c.update({documentId:a,index:l,card:e,op:r,thumbs:o})};this.onCardSelected=e=>{var u,p;let{store:r}=this.props,{editorStore:o,renderer:i,answer:s}=this.state;if(!i||!o||!s)return;let a=this.viewStack.length-1;this.viewStack[a]={cardId:e.id},i.onNextState({store:r,card:e,editorStore:o,noteMtx:new ft,screen:r.screen,viewStack:[...this.viewStack],documentLoading:!1});let l=e.rootParent().indexOverGroup(),c=(u=r.submissionAnswer)==null?void 0:u.pageIndex,d=(p=r.submissionAnswer)==null?void 0:p.zoomCardId;c!==l?r.reduce(tB(s.id,l,!o.slideshowPlaying)):d&&d!==e.id&&r.reduce(dw(e.id,!o.slideshowPlaying))};this.onPagerButtonClicked=e=>{this.changePage({direction:e,jumpToHead:!0})};this.onDocumentSelected=e=>{this.changePage({direction:e,jumpToHead:!1})};this.hasNextDocument=()=>{let{store:e}=this.props,r=this.state.renderer;if(!r)return!1;let o=Oy(e,r.card);return o?o.next!==void 0:!1};this.hasPreviousDocument=()=>{let{store:e}=this.props,r=this.state.renderer;if(!r)return!1;let o=Oy(e,r.card);return o?o.prev!==void 0:!1};this.onKeyDown=e=>{var s;if((s=this.props.store.screenSharingState)==null?void 0:s.presenter)return;let{renderer:r,quizViewMode:o,attendanceViewMode:i}=this.state;o!==void 0||i!==void 0||Ks(this.props.store)||!r||r.handleKey(e)||e.key==="Escape"&&this.dismiss()};this.dismiss=()=>{let e=this.props.store,{renderer:r,editorStore:o}=this.state;if(!r||!o){e.reduce(Es(void 0));return}if(this.viewStack.pop(),this.viewStack.length===0){e.reduce(Es(void 0));return}let i=this.viewStack.length-1,s=this.viewStack[i].cardId,a=r.card.rootParent().getCard(s);if(!a){e.reduce(Es(void 0));return}e.reduce(dw(void 0)),r.onNextState({store:e,card:a,editorStore:o,noteMtx:new ft,screen:e.screen,viewStack:[...this.viewStack],documentLoading:!1})};this.onQuizButtonClicked=e=>{let{store:r}=this.props,{renderer:o,editorStore:i}=this.state;if(!o||!i)return;let{card:s}=o;if(!(s instanceof zr))return;let a=String(r.userInfo.user_id),{quiz_author:l}=s.content,{submissionNumber:c}=r;if(!c)return;let d=ao(this.props.courseId,c),u=r.submissions.byKey[d];if(!!u)switch(i.setToolVisible(!0),e){case Wr.ANSWER_TOGETHER:{if(this.setState({quizViewMode:"result"}),a===(l==null?void 0:l.id)){let p=o.getFullScreenSharingState();Hv({store:r,card:s,anonymous:u.hide_author,authorId:r.userInfo.user_id,editorRendererState:p})}break}case Wr.EDIT:{this.setState({quizViewMode:"create"});break}case Wr.RESULT:{this.setState({quizViewMode:"result"});break}case Wr.ANSWER:{this.setState({quizViewMode:"answer"});break}case Wr.HELP:{let p=s.content.preset,h=this.context,f=XT(p,h);window.open(f);break}}};this.onAttendanceButtonClicked=e=>{let{store:r}=this.props,{renderer:o,editorStore:i}=this.state;if(!o||!i)return;let{card:s}=o;if(s instanceof an)switch(i.setToolVisible(!0),e){case Do.OPEN:{this.setState({attendanceViewMode:"open"});let{submissionNumber:l,userInfo:c,screenSharingForSelf:d}=r;if(!l)break;let u=ao(this.props.courseId,l),p=r.submissions.byKey[u];if(!p)break;if(c.is_teacher&&d&&o){let h=o.getFullScreenSharingState();Hv({store:r,card:s,anonymous:p.hide_author,authorId:c.user_id,editorRendererState:h})}break}case Do.ANSWER:this.setState({attendanceViewMode:"open"});break;case Do.HELP:let a=QT(r.userInfo.is_teacher,this.context);window.open(a);break}};this.onFreeMove=e=>{var a,l,c;if(!this.canvasRef.current)return;let r="default",{renderer:o,quizViewMode:i,attendanceViewMode:s}=this.state;if(o&&!i&&!s){let d=o.getObjectUnderPoint(e);(((a=d==null?void 0:d.eventTarget)==null?void 0:a.startsWith("quizButton"))||((l=d==null?void 0:d.eventTarget)==null?void 0:l.startsWith("attendanceButton"))||((c=d==null?void 0:d.eventTarget)==null?void 0:c.startsWith("card")))&&(r="pointer")}this.canvasRef.current.style.cursor=r};let{store:r}=e,o=r.submissionAnswer.id,i=r.submissionAnswers.byId[o];this.state={answer:i},this.cardRendererCallback={...Oi,shouldHandleCardEvent:this.shouldHandleCardEvent,onCardClicked:this.onCardClicked,onCardLoadingStateChanged:this.createCardLoadingStateChangedCallback()}}componentWillUnmount(){var r,o,i,s;this.clearDocumentLayerUpdateNotification(),this.props.store.reduce(zo(!0)),(r=this.state.processor)==null||r.unbind(),(o=this.state.freeMoveProcessor)==null||o.unbind(),(i=this.state.renderer)==null||i.close(),(s=this.layerUpdater)==null||s.close();let{store:e}=this.props;e.submissionComparisonIds||Fd({store:this.props.store,sessionId:void 0,courseId:this.props.courseId,showDialog:!1}),window.removeEventListener("keydown",this.onKeyDown)}componentDidMount(){let{store:e}=this.props;if(this.layerUpdater=Jm({store:e,drawnType:"annotation",uploadThumb:!0}),window.addEventListener("keydown",this.onKeyDown),!e.submissionNumber){e.reduce(Es(void 0));return}let r=e.submissionAnswer;if(!r)return;let o=e.submissionAnswers.byId[r.id];!o||oMe(e,this.props.courseId,o)&&this.loadSubmissionAnswer(o,r.pageIndex,r.zoomCardId)}async unsafeLoadSubmissionAnswer(e,r,o){var f,m;let{id:i}=e,s=this.canvasRef.current;if(!s)return;let{store:a}=this.props,l=await ue.lnsClient.downloadDocument(i).then(ta).then(g=>ra({id:i,file:g,author:Qi(a,e.author_id)}));this.clearDrawnAnnotationMipmap(l);let c=(f=l.memberAt(r))!=null?f:l,d=(m=this.state.editorStore)!=null?m:this.createEditorStore();a.reduce(Fe(oe.pagingSubmissionAnswer,null));let u;this.state.renderer?(this.clearDocumentLayerUpdateNotification(),u=this.state.renderer,this.viewStack=[{cardId:c.id}],u.onNextState({store:a,card:c,editorStore:d,screen:a.screen,noteMtx:new ft,viewStack:[...this.viewStack],documentLoading:!1})):(u=this.createEditorRenderer({editorStore:d,card:c,canvas:s,zoomCardId:o}),u.scheduleRender());let p;this.state.processor?p=this.state.processor:(p=new Mn(s),p.onSingle=u.handleSingle,p.onDoubleMove=u.handleDoubleMove);let h;this.state.freeMoveProcessor?h=this.state.freeMoveProcessor:(h=new Kl(s),h.onFreeMove=this.onFreeMove),this.laserLayerCallback={onHandleSingle:()=>{},onHandleDoubleMove:u.handleDoubleMove,onHandleWheel:u.handleWheel},this.setState({renderer:u,processor:p,freeMoveProcessor:h,editorStore:d,answer:e,documentLoading:void 0})}clearDocumentLayerUpdateNotification(){var s;let e=this.state.renderer;if(!e)return;let r=(s=e.card.document)==null?void 0:s.id;if(!r)return;let o=[],i=e.card.headGroup();for(let a=0;a<i.memberCountOverGroup();a++){let l=Fp(r,a);o.push(_P(l,void 0),AP(l,void 0))}this.props.store.reduce(...o)}clearDrawnAnnotationMipmap(e){for(let r of e.memberAndChildrenIteratorOverGroup()){if(!r.document){let l=gr.get(r);l.annotation.clear(),l.drawn.clear();continue}let o=Fp(r.document.id,r.document.index),i=this.props.store.documentAnnotationLayerUpdateNotification[o],s=this.props.store.documentExtensionLayerUpdateNotification[o],a=gr.get(r);i&&a.annotation.clear(),s&&a.drawn.clear()}}async loadSubmissionAnswer(e,r,o){try{await this.unsafeLoadSubmissionAnswer(e,r,o),this.readMobilePush(e.author_id)}catch(i){if(yt.catchError(i))return;let{store:s}=this.props;ge.error(i);let a="documents/"+e.id;EI({store:s,targetId:a,courseId:this.props.courseId,onOk:()=>{this.props.store.reduce(Pe(oe.openDocument,void 0),Es(void 0))}})(i)}}createEditorStore(){let e=Kc();return e.subscribe(r=>{var a;let o=r.selectedTool===Ge.Finger&&r.toolVisible;this.props.store.teacherToolVisible!==o&&this.props.store.reduce(zo(o));let i=(a=this.state.renderer)==null?void 0:a.card,s=this.state.editorStore;i&&s&&this.updateCardContent(i,s,r),this.setState({editorStore:r})}),e}updateCardContent(e,r,o){e.id===o.cardId&&r.avSpeedScale!==o.avSpeedScale&&e.replaceContent({"metadata.playback_rate":o.avSpeedScale})}createEditorRenderer(e){let{editorStore:r,card:o,canvas:i,zoomCardId:s}=e,{store:a}=this.props,l=new ec,c=o;this.viewStack=[{cardId:o.id}];let d;s&&(d=o.getCard(s),d&&(this.viewStack.push({cardId:s}),c=d));let u=p=>{for(let h of o.iteratorOverGroup()){let f=h.getCard(p);if(f)return f}};return new $d({canvas:i,state:{store:a,editorStore:r,card:c,screen:a.screen,noteMtx:new ft,viewStack:[...this.viewStack],documentLoading:!1},role:nMe,playManager:l,callback:{onCardSelected:this.onCardSelected,onPop:this.dismiss,onDrawnMarkedAsUnsaved:this.onDrawnUpdate,onTrashBoxHit(p){},onEnsureDrawnGadget(p){p.gadgets.drawn=p.drawnGeometry("drawn")},onZoomScroll:()=>{this.forceUpdate()},onQuizButtonClicked:this.onQuizButtonClicked,onAttendanceButtonClicked:this.onAttendanceButtonClicked,getCardOnNote:u,...this.cardRendererCallback},documentPagerDelegate:{hasNextDocument:this.hasNextDocument,hasPreviousDocument:this.hasPreviousDocument,onDocumentSelected:this.onDocumentSelected}})}componentDidUpdate(e,r,o){var b,x,w,k;let{store:i}=this.props,{answer:s,renderer:a,editorStore:l,popoverType:c}=this.state,{submissionNumber:d,submissionAnswer:u}=i;if(u===void 0||d===void 0)return;if(s===void 0){mC(i,{courseId:this.props.courseId,submissionNumber:d,withTeacher:!0}),i.reduce(Es(void 0));return}else if(s.id!==u.id){let T=i.submissionAnswers.byId[u.id];T?this.loadingSubmissionAnswer||(this.loadingSubmissionAnswer=!0,this.loadSubmissionAnswer(T,u.pageIndex).finally(()=>{this.loadingSubmissionAnswer=!1})):i.reduce(Es(void 0));return}if(!e.store.teacherToolOpen&&i.teacherToolOpen&&c&&this.setState({popoverType:void 0}),!a||!l)return;!r.popoverType&&c&&(i.reduce(hu(!1)),a==null||a.playManager.pause(l));let{id:p,pageIndex:h,orderedAnswers:f,orderType:m,zoomCardId:g}=u,v=this.currentScreenSharingFullscreenNotification(),y=a.card;if(v){let T=v.fullscreen.page,A=(b=v.fullscreen.zoom)==null?void 0:b.id,E=a.card.rootParent().memberAt(T);if((!A||T!==h)&&(y=E,this.viewStack=[{cardId:y.id}],T!==h&&i.reduce(Es({id:p,pageIndex:T,orderedAnswers:f,orderType:m}))),A&&A!==a.card.id)if(y=E.getCard(A),y.isDescendantOf(a.card.id))this.viewStack.push({cardId:y.id});else{let F=this.viewStack.findIndex(z=>z.cardId===y.id);if(F>=0)this.viewStack=this.viewStack.slice(0,F+1);else{let z=this.viewStack.length-1;this.viewStack[z]={cardId:y.id}}}}a.onNextState({store:i,card:y,editorStore:l,screen:i.screen,noteMtx:new ft,viewStack:[...this.viewStack],documentLoading:this.state.documentLoading!==void 0}),Ks(i)&&l.avPlaying&&a.playManager.pause(l);let S=i.screenSharingState;if((S==null?void 0:S.type)==="comparison"){let{anonymous:T,publisher:A,presenter:E}=S,F=Nc({store:i,anonymous:T,presenter:E,publisher:A,fullscreen:{document:s.id,page:h,authorId:s.author_id,scale:1,center:{x:.5,y:.5},playToken:a.playManager.playToken,currentTime:l.avSeekTime,isPlaying:a.playManager.remotePlaying,isPlayEnded:l.avEnded,needsDecorateFavorite:a.card.favorite}});i.reduce(Zi(Gv(S.sessionId,this.props.courseId,F)))}r.documentLoading&&this.state.documentLoading===void 0&&this.showToastMessage({direction:r.documentLoading});let C=this.props.courseId;((x=e.store.mobilePushes.byCourseId[C])==null?void 0:x.length)<((w=this.props.store.mobilePushes.byCourseId[C])==null?void 0:w.length)&&this.readMobilePush(s.author_id),!l.slideshowPlaying&&((k=r.editorStore)==null?void 0:k.slideshowPlaying)&&i.reduce(tB(s.id,h),dw(g))}currentScreenSharingFullscreenNotification(){let e=this.props.store;if(!e.screenSharingForPresenter)return;let r=e.screenSharingActionNotification[this.props.courseId];if(xi(r))return r}showToastMessage(e){let{direction:r}=e,{store:o}=this.props,{desktop:i,submissionNumber:s}=o;if(!i||!s)return;let{courseId:a}=i;if(typeof a!="number")return;let{answer:l}=this.state;if(!l)return;let c=De.get().strings,d=ao(a,s),u=o.submissions.byKey[d],p;u.hide_author?r==="prev"?p=c.previousSomeonesAnswer:p=c.nextSomeonesAnswer:p=(0,Hae.sprintf)(c.submittersAnswer,l.author_name),o.reduce(Pn({type:"normal",text:p}))}readMobilePush(e){e!==void 0&&this.props.store.submissionNumber!==void 0&&(!this.props.store.userInfo.is_teacher||jv({store:this.props.store,courseId:this.props.courseId,submissionNumber:this.props.store.submissionNumber,authors:[e]}))}changePage(e){var f;let{direction:r,jumpToHead:o}=e,{store:i}=this.props,s=this.state.renderer;if(!i.submissionAnswer||!s)return;let a=Oy(i,s.card);if(!a||r==="prev"&&!a.prev||r==="next"&&!a.next)return;this.setState({documentLoading:r});let{orderedAnswers:l,orderType:c}=i.submissionAnswer,d=l.indexOf(i.submissionAnswer.id),u,p,h;if(r==="prev"&&d-1>-1){u=l[d-1];let m=i.submissionAnswers.byId[u];if(!m)return;o?p=0:p=m.page_count-1,h=m.author_id}else if(r==="next"&&d+1<l.length){u=l[d+1];let m=i.submissionAnswers.byId[u];if(!m)return;p=0,h=m.author_id}else return;i.reduce(Fe(oe.pagingSubmissionAnswer,""),Es({id:u,pageIndex:p,orderedAnswers:l,orderType:c})),(f=this.state.renderer)==null||f.updateFullScreenSharingDocument({document:u,page:p,authorId:h})}render(){var k,T,A;let{store:e}=this.props,{renderer:r,editorStore:o,answer:i,popoverType:s}=this.state,{submissionNumber:a,submissionAnswer:l}=e;if(!a||!l||!i)return null;let c=ao(this.props.courseId,a),d=e.submissions.byKey[c];if(!d)return ar.createElement(rg,{onClose:()=>{e.reduce(Lp(void 0))}});let{width:u,height:p,dpr:h}=e.screen,[f,m]=[Math.floor(u*h),Math.floor(p*h)],g=(o==null?void 0:o.selectedTool)===Ge.Finger&&(o==null?void 0:o.activeFingerTool)==="laser",v=(k=r==null?void 0:r.toolOpacity)!=null?k:1,y=r==null?void 0:r.card,S=()=>{if(this.setState({quizViewMode:void 0}),e.screenSharingForSelf&&this.state.renderer){let E=this.state.renderer.getFullScreenSharingState();gh(e,E,void 0)}},C=()=>{this.setState({quizViewMode:"closing"})},b=()=>{if(this.setState({attendanceViewMode:void 0}),e.screenSharingForSelf&&this.state.renderer){let E=this.state.renderer.getFullScreenSharingState();Md(e,E,void 0)}},x={authorName:i.author_name,pageCount:i.page_count,pageIndex:(A=(T=this.props.store.submissionAnswer)==null?void 0:T.pageIndex)!=null?A:0,anonymous:d.hide_author},w=this.state.quizViewMode!==void 0||this.state.attendanceViewMode!==void 0;return ar.createElement("div",{className:"submissionPreview"},g&&ar.createElement(ml,{canvasSize:{width:f,height:m},callback:this.laserLayerCallback,consumer:r==null?void 0:r.laserPointerConsumer}),!r&&ar.createElement(ur,{absolute:"top"}),o&&y&&r&&!w&&ar.createElement(ar.Fragment,null,ar.createElement(sMe,{store:e,courseId:this.props.courseId,editorStore:o,submission:d,answer:i,card:y,setPopoverType:E=>this.setState({popoverType:E}),drawToolDispatcher:r,popoverType:s,opacity:v,editorRendererScreenShareState:()=>{var E;return(E=this.state.renderer)==null?void 0:E.getFullScreenSharingState()},playManager:r.playManager,onBack:this.dismiss}),!this.state.documentLoading&&ar.createElement(ep,{card:y,store:e,editorStore:o,screen:e.screen,editable:!1,onCardSelected:this.onCardSelected,onPagerButtonClicked:this.onPagerButtonClicked,opacity:v,cardRendererCallback:this.cardRendererCallback,playManager:r.playManager,authorPageNumState:x})),ar.createElement("canvas",{ref:this.canvasRef,className:"canvas",width:f,height:m,style:{backgroundColor:r?"transparent":"#888",width:"100%",height:"100%"}}),(r==null?void 0:r.card)instanceof zr&&this.state.quizViewMode&&ar.createElement(np,{card:r.card,store:e,editorRendererState:()=>r.getFullScreenSharingState(),onDismiss:S,onClosing:C,viewMode:this.state.quizViewMode,updateCoverDataBeforeUnload:!1}),(r==null?void 0:r.card)instanceof an&&this.state.attendanceViewMode&&ar.createElement(op,{card:r.card,editorRendererState:()=>r.getFullScreenSharingState(),viewMode:this.state.attendanceViewMode,onDismiss:b,updateCoverDataBeforeUnload:!1}))}};TR.contextType=su;function oMe(t,e,r){let o=xn(t.submissionNumber),i=ao(e,o),s=t.submissions.byKey[i];return s?My(r,s,t.userInfo):!1}function iMe(t,e){$e(e.document!=null,"document must be set");let r=e.document,o=e.memberCountOverGroup();BJ(t,{documentId:r.id,pageCount:o,fallback:(i,s)=>{let a=e.memberAt(i);return ge.log("fallback",i,s),s==="document"?zA(a):UA(a)}})}var sMe=({store:t,courseId:e,editorStore:r,answer:o,card:i,submission:s,popoverType:a,setPopoverType:l,drawToolDispatcher:c,opacity:d,editorRendererScreenShareState:u,playManager:p,onBack:h})=>{let f=t.userInfo.is_teacher,m=!!t.screenSharingState,g=o.author_id!==t.userInfo.user_id,v=()=>{l(void 0)},y=()=>{iMe(t,i),l(void 0)};(0,Uae.useEffect)(()=>{r.moveMode&&v()},[r.moveMode]);let S=Te(),C=i.parent===void 0,b=r.selectedTool===Ge.Finger,x=r.selectedTool===Ge.Draw,w=!1;t.userInfo.is_teacher&&(w=jC({store:t,isScreenSharing:m,isFingerMode:b,isFocusWebCard:i instanceof ri,bounds:1100,boundsForScreenSharing:1010}));let k=w?!x:!0,T=w&&C?!b:!0,A=F=>{let z=u();!z||dC(t,z,F)},E=C?!0:bb(t);return ar.createElement(wa,{in:r.toolVisible},ar.createElement("div",{className:"editorHeader fade",style:{opacity:d<1?d:void 0}},ar.createElement("div",{className:"editorHeaderInner"},(!m||t.screenSharingForSelf)&&ar.createElement("div",{className:"editorHeaderButtonGroup"},ar.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},ar.createElement("div",{role:"button",className:"editorButton",onClick:h},ar.createElement("div",{className:"editorButtonIcon backButtonIcon"})))),ar.createElement("div",{className:"editorHeaderSpacer"}),ar.createElement("div",{className:"editorHeaderButtonGroup"},T&&ar.createElement(qm,{editorStore:r}),f&&k&&C&&ar.createElement(Rh,{store:t,editorStore:r,forDocument:!0,drawToolDispatcher:c}),i instanceof ri&&i.content.uri&&ar.createElement(ar.Fragment,null,m&&ar.createElement(Xm,{card:i,onClick:()=>p.pause(r),onClickWithShare:()=>A(i.content.uri),closedWindowCallback:()=>A(void 0)}),!m&&ar.createElement(Xm,{card:i,onClick:()=>p.pause(r)}))),ar.createElement("div",{className:"editorHeaderSpacer"}),ar.createElement("div",{className:"editorHeaderButtonGroup"},C&&!m&&ar.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},ar.createElement("div",{className:"editorButton",role:"button",onClick:()=>l("export")},ar.createElement("div",{className:"editorButtonIcon exportButtonIcon"})),ar.createElement(hS,{submission:s,courseId:e,answers:[o]},F=>ar.createElement(aMe,{open:a==="export",onClose:v,onClickUse:F,isTeacher:t.userInfo.is_teacher}))),t.screenSharingState&&ar.createElement(Fh,{store:t,sharingState:t.screenSharingState}),f&&p&&ar.createElement(ar.Fragment,null,C&&!m&&ar.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},ar.createElement("div",{className:"editorButton editorTextButton","data-disabled":!g,onClick:()=>l("reply")},ar.createElement(Cb,{lines:S.localeCode==="en-US"?[S.send,S.back]:[S.sendBack]})),ar.createElement(lMe,{open:a==="reply",onClose:v,onClickReply:y})),E&&ar.createElement(WT,{store:t,editorStore:r,card:i,presenter:o.author_id,authorId:o.author_id,anonymous:s.hide_author,editorRendererState:u,onPopoverOpened:v,playManager:p}),E&&!t.screenSharingForPresenter&&ar.createElement(WT,{store:t,editorStore:r,authorId:o.author_id,anonymous:s.hide_author,card:i,editorRendererState:u,onPopoverOpened:v,playManager:p})))),w&&C&&ar.createElement("div",{className:"editorHeaderInner"},ar.createElement("div",{className:"editorHeaderButtonGroup"},b&&ar.createElement(qm,{editorStore:r}),f&&x&&ar.createElement(Rh,{store:t,editorStore:r,forDocument:!0,drawToolDispatcher:c})))))},aMe=({isTeacher:t,onClickUse:e,...r})=>{let o=Te();return ar.createElement(jt,{...r},ar.createElement(Tn,{onClick:e},o.use))},lMe=({open:t,onClose:e,onClickReply:r})=>{let o=Te();return ar.createElement(jt,{open:t,onClose:e},ar.createElement("div",{className:"popoverDialog"},ar.createElement("div",{className:"popoverDialogInner"},ar.createElement("div",{className:"popoverDialogConfirmMessage"},o.confirmSendBack),ar.createElement("div",{className:"popoverDialogButtonGroup"},ar.createElement("div",{className:"popoverDialogButton popoverDialogCancelButton",role:"button",onClick:e},o.cancel),ar.createElement("div",{className:"popoverDialogButton popoverDialogOkButton popoverDialogSendBackButton",role:"button",onClick:r},o.sendBack)))))};var Gae=()=>{let t=qe(),{submissionBoxOpen:e,submissionNumber:r,submissionComparisonIds:o,desktop:i}=t,s=or(t);return nc.default.createElement(nc.default.Fragment,null,i&&un(i.courseId)&&nc.default.createElement(oo,{open:t.submittingDocument!==void 0,transition:"up",onClose:()=>{t.reduce(iv(void 0))}},nc.default.createElement(Zse,{store:t,onClose:()=>{t.reduce(iv(void 0))}})),un(s)&&nc.default.createElement(nc.default.Fragment,null,nc.default.createElement(Vr,{open:e,overlay:!0,container:"none",onClose:()=>gC(t)},nc.default.createElement(Jse,{store:t,courseId:s,onClose:()=>gC(t)})),nc.default.createElement(Vr,{open:t.submissionComparisonIds!=null,container:"none",onClose:()=>{t.reduce(gu(void 0))}},!!r&&e&&!!o&&nc.default.createElement(zae,{courseId:s,onClose:()=>{t.reduce(gu(void 0))}})),nc.default.createElement(Vr,{open:t.submissionAnswer!==void 0&&t.submissionNumber!==void 0,container:"none",onClose:()=>{t.reduce(Es(void 0))}},nc.default.createElement(TR,{store:t,courseId:s}))))};var Ab=X(he());var Mi=X(he()),kS=X(he()),dle=X(on());var cMe=async function(t){try{let e=await Pu(t);return{metadata:e.getMetadata(),thumbnails:e.generateThumbnails()}}catch(e){if(e instanceof Ec)return{metadata:[{duration:0}]};throw e}},dMe=async({lnsClient:t,file:e,groupId:r,extension:o,signal:i})=>{let{metadata:s,thumbnails:a}=await cMe(e),{result:l}=await t.uploadAssetV2({file:e,metadata:s,extWithDot:o,signal:i});if(a){let d=0;for(;d<s.length;){let u=await a.next();if(u.done)break;if(u.value){let[p,h]=await Promise.all([xo(u.value.small,"image/png","small.png"),xo(u.value.medium,"image/png","medium.png")]);await t.uploadAssetThumbnails({uuid:l,index:d,small:p,medium:h,signal:i})}d++}}let{id:c}=await t.uploadDocumentMaterialWithAsset({name:e.name,asset:l,groupId:r,signal:i});return{id:c,asset:l}};async function Vae({lnsClient:t,groupId:e,files:r,onProgress:o,onUpload:i,signal:s}){let a=1;try{for(let l of r){o(a);let c=Xs(l.name),{id:d,asset:u}=await dMe({lnsClient:t,file:l,extension:c,groupId:e,signal:s});i({id:d,name:l.name,asset:u}),a++}return{type:"success",value:void 0}}catch(l){return s.aborted?{type:"cancelled"}:{type:"error",error:l}}}var uMe=/[\\\n\r\/:;\?\*<>"\|]/,pMe=/^\.+?$/;function DR(t){if(Xs(t).length===0)return"no-ext";if(uMe.test(t)||pMe.test(t))return"bad-chars"}function kR({category:t,userInfo:e}){return t==="private"?!0:e.is_teacher?t==="district-all"||t==="district-teacher"?e.district_document_group_write_permission===!0:!0:!1}var ai=X(he()),Qa=X(he());var hMe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!1,enableAttendanceCoverButtons:!1,enableFullScreenSharing:!1,canLeave:!0,drawnType:"annotation",shouldSyncPlayController(t,e){return!1}};function fMe(t,e,r){let o=t.extension.toLocaleLowerCase();if(Xg(o)&&!t.asset_proxy)return e!==void 0;if(r){if(Ay(o))return!0}else return!1;return!1}function mMe(t,e){let r=t.extension.toLocaleLowerCase();return Ay(r)&&e!==null?!0:!!(Xg(r)&&!t.asset_proxy)}var PR=({document:t,store:e,onClose:r})=>{var E,F,z;let o=Te(),i=(0,Qa.useRef)(null),s=(0,Qa.useRef)(null),a=(0,Qa.useRef)(),l=(0,Qa.useRef)(),[c,d]=(0,Qa.useState)(),[u,p]=(0,Qa.useState)(!1),[h,f]=(0,Qa.useState)(),m=o.cannotInsertWhileStillLoadingDocument,g;t.asset_proxy&&(g=e.assetMetadata[t.asset_proxy]);let v=(E=s.current)==null?void 0:E.getBoundingClientRect(),y=Ks(e),S=bc(),C=L=>{l.current=L,S()};(0,Qa.useEffect)(()=>{let L=R=>{if(R.target instanceof HTMLInputElement)return;let N=a.current;!N||y||N.handleKey(R)||R.key==="Escape"&&r()};return window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}},[y]),kf(()=>{var L;e.reduce(zo(!0)),(L=a.current)==null||L.close(),a.current=void 0}),(0,Qa.useEffect)(()=>{t.asset_proxy&&g===void 0&&LA(e,t.asset_proxy,t.extension.toLowerCase()===".pdf")},[t.id]),(0,Qa.useEffect)(()=>{let L=i.current;if(!L)return;let R=s.current,{width:N,height:V}=R.getBoundingClientRect(),W=window.devicePixelRatio;L.width=N*W,L.height=V*W;let me=new Mn(L),ie=(I,U,M)=>{I.id===M.cardId&&U.avSpeedScale!==M.avSpeedScale&&I.replaceContent({"metadata.playback_rate":M.avSpeedScale})},Z=I=>{let U=Kc();U.subscribe($=>{var ae,le;let H=(ae=a.current)==null?void 0:ae.card;H&&ie(H,U,$),d($),(le=a.current)==null||le.setNeedsDisplay()});let M=new $d({canvas:L,state:{store:e,editorStore:U,card:I,screen:{width:N,height:V,keyboardHeight:0},viewStack:[{cardId:I.id}],noteMtx:new ft,documentLoading:!1},role:hMe,decorateFavorites:!0,playManager:new ec,callback:{onCardSelected:C,onPop:()=>r(),onDrawnMarkedAsUnsaved:()=>{},onTrashBoxHit($){},onEnsureDrawnGadget($){$.gadgets.drawn=$.drawnGeometry("drawn")},onZoomScroll:$=>{U.setZoom($.a)},...Oi}});me.onSingle=M.handleSingle,me.onDoubleMove=M.handleDoubleMove,M.scheduleRender(),d(U),a.current=M,l.current=I},P=I=>{ge.error(I);let U="documents/"+t.id;e.reduce(Pe(oe.openDocument,zc({error:I,isDocument:!0,targetId:U,courseId:w,okMessage:o.closeThisScreen,onOk:()=>{r(),e.reduce(Pe(oe.openDocument,void 0))}})))},{asset_proxy:_}=t;return _?ue.lnsClient.getAssetMetadataAll(_).then(async I=>{let U=await jj({ext:t.extension,remote_id:_,metadataList:I,author:{id:-1,name:""}});return U.forEach(M=>{gr.forCard(M.id).content.load("small",M)}),U}).then(Z).catch(P):ue.lnsClient.downloadDocument(t.id).then(ta).then(I=>{var U;return ra({id:t.id,file:I,snapshotId:t.comment_snapshot_id,author:Qi(e,(U=t.author_id)!=null?U:e.userInfo.user_id)})}).then(I=>Z(I)).catch(P),()=>{me.unbind(),a.current&&(a.current.close(),a.current=void 0)}},[t.id,t.comment_snapshot_id]),(0,Qa.useEffect)(()=>{let L=i.current;if(!L||!v||!a.current||!l.current)return;let R=window.devicePixelRatio,N=Ze(Math.floor(v.width*R),Math.floor(v.height*R));il(L,N)||(L.width=N.width,L.height=N.height),a.current.onNextState({store:e,card:l.current,editorStore:c,screen:{width:v.width,height:v.height,keyboardHeight:0},noteMtx:new ft,viewStack:[{cardId:l.current.id}],documentLoading:!1})},[s.current,l.current,e.teacherToolVisible,c,v]),(0,Qa.useEffect)(()=>{var L;y&&c&&((L=a.current)==null||L.playManager.pause(c))},[y]);let b=fMe(t,a.current,g);!b&&g===null&&(m=o.unsupportedContentType);let x=L=>{let R=L.currentTarget.getBoundingClientRect(),N=Or(R),V=new Ty(t,N);e.desktop?(Nt(V),r()):(f(V),p(!0))},w=or(e),k=(z=(F=a.current)==null?void 0:F.toolOpacity)!=null?z:1,T=v!=null?v:e.screen,A={width:T.width,height:T.height,isMobile:e.screen.isMobile};return ai.createElement(ai.Fragment,null,ai.createElement("div",{className:"documentPreview",style:{opacity:k}},ai.createElement(dr,null,ai.createElement(fr,null,ai.createElement(mr,null,ai.createElement(OC,{onClick:r}),ai.createElement(dne,null)),ai.createElement(kr,null,ai.createElement(to,null,t.name)),ai.createElement(wr,null,ai.createElement(Mt,{onClick:x,disabled:!b,title:b?o.insertCardFromDocument:m},o.useFormally)))),ai.createElement("div",{className:"documentDetailContent",ref:s,onDragOver:r},mMe(t,g)&&ai.createElement("div",{className:"documentCanvasWrapper"},!a.current&&ai.createElement(ur,{absolute:"top"}),ai.createElement("canvas",{ref:i,style:{width:"100%",height:"100%"}}),ai.createElement("div",{className:"documentDetailFooter"},a.current&&c&&l.current&&ai.createElement(wa,{in:c.toolVisible},ai.createElement(ep,{card:l.current,store:e,editorStore:c,screen:A,editable:!1,onCardSelected:C,cardRendererCallback:Oi,opacity:1,playManager:a.current.playManager})))),g===null&&ai.createElement("div",{className:"unsupportedDocumentFile"},m))),un(w)&&ai.createElement(oo,{open:u,onClose:()=>{f(void 0),p(!1)},transition:"fade"},ai.createElement(uS,{store:e,courseId:w,message:o.selectNoteForAddingMaterials,onClose:()=>{f(void 0),p(!1)},onNoteReady:()=>{Nt(h),r()}})))};var Oh=X(he()),zh=X(he());var gMe=L0(),pD=class extends Error{constructor(e){super("exceed exportable limits");this.type=e}},$ae=class{constructor(){this.maxItemNumber=3e3;this.maxHierarchyNumber=100;this.document=0;this.group=1;this.hierarchy=0;this.maxHierarchy=0}addCount(e,r){if(this.document+=e,this.group+=r,this.document+this.group>=this.maxItemNumber)throw new pD("items")}addHierarchy(){if(this.hierarchy+=1,this.maxHierarchy=Math.max(this.hierarchy,this.maxHierarchy),this.maxHierarchy>this.maxHierarchyNumber)throw new pD("hierarchy")}decreaseHierarchy(){this.hierarchy-=1}},Q8=class{constructor(e){this.structureMap={};this.docId2AssetId=new Map;this.retryable=!1;let r=this.outputFolderName(e.author.name,e.schoolName),i=new gMe().folder(r);if(!i)throw new Error("Failed to initialize document exporter zip folder");this.fileName=r,this.folder=i,this.ctx=e.ctx,this.author=e.author,this.appVersion=e.appVersion,this.signal=e.signal,this.onProgress=e.onProgress}async do(e){try{$e(e!==void 0||this.retryable,"params must not be undefined or retryable must be true"),this.retryable=!1,e&&await this.analyze(e.curDir,e.selectedItems),await this.export();let r=await this.getBlob();return{type:"success",value:r}}catch(r){return r instanceof Sp&&this.signal.aborted?{type:"cancelled"}:r instanceof Yr&&r.status>=500&&this.lastIndex!==void 0?(this.retryable=!0,{type:"error",error:r}):{type:"error",error:r}}}async getBlob(){$e(Object.keys(this.structureMap).length>0,"structureMap must not be empty");let e={creator:{app:"web",version:this.appVersion},folders:this.structureMap,documents_count:this.docId2AssetId.size};return this.folder.file("structure.json",JSON.stringify(e)),{blob:await this.folder.generateAsync({type:"blob",mimeType:"application/octet-stream"}),name:this.fileName}}async analyze(e,r){$e(e.contents!==void 0,"contents must not be undefined");let o={document:s=>r==null?void 0:r.some(a=>a.type==="document"&&a.id===s.id),group:s=>r==null?void 0:r.some(a=>a.type==="group"&&a.id===s.id)},i=new $ae;await this.analyzeDocumentGroupRecursive(e.documentGroup,this.structureMap,i,o)}async analyzeDocumentGroupRecursive(e,r,o,i){o.addHierarchy();let s=e.id,a=await this.ctx.lnsClient.getDocumentGroupsContents(s,this.signal),l=a.documents,c=a.subfolders;i!==void 0&&(l=a.documents.filter(i.document),c=a.subfolders.filter(i.group)),o.addCount(l.length,c.length);for(let d of c)await this.analyzeDocumentGroupRecursive(d,r,o);r[i?"root":s]={name:i?"root":e.name,subfolders:c.map(d=>d.id),documents:l.map(d=>d.id)};for(let d of l)d.asset_proxy?this.docId2AssetId.set(d.id,[]):this.docId2AssetId.set(d.id,void 0);o.decreaseHierarchy()}async export(){var o;if(this.docId2AssetId.size<1)return;let e=[...this.docId2AssetId.keys()].sort(),r=(o=this.lastIndex)!=null?o:0;$e(r<e.length,"invalid restart download index");for(let i=r;i<e.length;i++){this.lastIndex=i,this.onProgress(i+1,e.length);let s=e[i],a=this.docId2AssetId.get(s);if(!a){let c=await this.ctx.lnsClient.downloadDocument(s,this.signal),d=await ta(c),u=ra({id:s,file:d,author:this.author});a=Wu([...u.memberAndChildrenIteratorOverGroup()].map(p=>p.toJSON()))}let l=await this.ctx.lnsClient.exportDocument(e[i],a,this.signal);this.folder.file(`${e[i]}.loilocard`,l)}this.lastIndex=void 0}outputFolderName(e,r){let o=new Date,i=("0"+(o.getMonth()+1)).slice(-2),s=("0"+o.getDate()).slice(-2);return r!=null?`${r}_${e}_${o.getFullYear()}${i}${s}`:`${e}_${o.getFullYear()}${i}${s}`}};var Wae=()=>{let t=qe(),e=(0,zh.useContext)(Ki),r=Te(),[o,i]=(0,zh.useState)(r.analyzingDocument),s=(0,zh.useMemo)(()=>new AbortController,[]),a=(f,m)=>{i(`${r.exportingDocument}
(${f}/${m})`)},l=(0,zh.useMemo)(()=>new Q8({ctx:ue,author:Qi(t,t.userInfo.user_id),schoolName:t.isSsoUser?void 0:t.userInfo.school_name,appVersion:t.appVersion,signal:s.signal,onProgress:a}),[]),c=f=>{if(f.type==="error"){if(l.retryable){i(`${r.couldntExportDocument}`);return}d(f.error)}else if(f.type==="success"){let m;try{m=URL.createObjectURL(f.value.blob);let g=document.createElement("a");g.href=m,g.download=kh(f.value.name,".loilomaterials"),g.click()}catch(g){d(g)}finally{m&&URL.revokeObjectURL(m)}}u()},d=f=>{if(yt.catchError(f))return;ge.error(f);let m=r.couldntExportDocument;f instanceof pD&&(f.type==="items"?m=r.exceedNumberOfExportableItemsMsg:m=r.exceedNumberOfExportableHierarchyMsg);let g=oe.exportDocument;t.reduce(Fe(g,null),Pe(g,{title:r.errorOccurred,message:m,okMessage:r.okay,onOk:()=>t.reduce(Pe(g,void 0))}))};(0,zh.useEffect)(()=>{$e(e.history.length>0,"history must be not empty"),$e(e.selectedItems.length>0,"selectedItems must be not empty");let f=e.history[e.history.length-1],m=e.selectedItems;l.do({curDir:f,selectedItems:m}).then(c).catch(d)},[]);let u=()=>{e.reduce(()=>({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}))},p=()=>{l.do().then(c).catch(d)},h=()=>{s.abort()};return Oh.createElement(gy,null,Oh.createElement("div",{className:"uiDialogContent"},!l.retryable&&Oh.createElement(ur,null),Oh.createElement("div",{className:"uiDialogTitle"},r.export),Oh.createElement("div",{className:"uiDialogMessage materialExportDialogMessage"},o),Oh.createElement(El,null,Oh.createElement(ma,{className:"uiDialogCancelButton",onClick:h},r.cancel),l.retryable&&Oh.createElement(ma,{onClick:p},r.retry))))};var cg=X(he()),ER=X(he());var vMe=L0();async function jae({lnsClient:t,file:e,groupId:r,signal:o,onProgress:i}){var s;try{if(!e.name.endsWith(".loilomaterials"))throw new Error("invalid import file");let a=await vMe.loadAsync(e),l=await((s=a.file("structure.json"))==null?void 0:s.async("string"));if(!l)throw new Error("structure.json not found");let c=JSON.parse(l);return await Kae({lnsClient:t,importGroupId:r,exportGroupId:"root",structure:c,zip:a,signal:o,count:1,onProgress:i}),{type:"success",value:{}}}catch(a){return o.aborted?{type:"cancelled"}:{type:"error",error:a}}}async function Kae({lnsClient:t,importGroupId:e,exportGroupId:r,structure:o,zip:i,signal:s,count:a,onProgress:l}){let c=a,d=o.folders[r];for(let u of d.subfolders){let p=o.folders[u],{id:h}=await t.createSubDocumentGroup(e,p.name,s);c=await Kae({lnsClient:t,importGroupId:h,exportGroupId:u,structure:o,zip:i,signal:s,count:c,onProgress:l})}for(let u of d.documents){let p=i.file(`${u}.loilocard`);if(p){let h=await p.async("blob");await t.importDocument({groupId:e,file:h,signal:s}),l(c++,o.documents_count)}}return c}var wS=X(on());async function qae(t,{docIds:e,docGroupIds:r,destId:o,callback:i}){if(e.length<1&&r.length<1)throw new Error("selected documents do not exist");let s=De.get().strings;t.reduce(Fe(oe.copyDocuments,s.copyingDocument));try{let a=[];e.length>0&&a.push(ue.lnsClient.copyDocuments(e,o)),r.length>0&&a.push(ue.lnsClient.copyDocumentGroups(r,o)),await Promise.all(a).catch(yt.handleError),await i(),t.reduce(Fe(oe.copyDocuments,null))}catch(a){throw ge.error(a),t.reduce(Fe(oe.copyDocuments,null),Pe(oe.copyDocuments,{title:s.couldntCopyDocument,...Ht(a,{400:s.invalidDocumentCopyDetails,403:s.documentCopyDenied}),okMessage:s.back,onOk:()=>t.reduce(Pe(oe.copyDocuments,void 0))})),a}}async function Yae(t,{docIds:e,docGroupIds:r,destId:o,callback:i}){if(e.length<1&&r.length<1)throw new Error("selected documents do not exist");let s=De.get().strings;t.reduce(Fe(oe.moveDocuments,s.movingDocument));try{let a=[];e.length>0&&a.push(ue.lnsClient.moveDocuments(e,o)),r.length>0&&a.push(ue.lnsClient.moveDocumentGroups(r,o)),await Promise.all(a).catch(yt.handleError),await i(),t.reduce(Fe(oe.moveDocuments,null))}catch(a){throw ge.error(a),t.reduce(Fe(oe.moveDocuments,null),Pe(oe.moveDocuments,{title:s.couldntMoveDocument,...Ht(a,{400:s.invalidDocumentMoveDetails,403:s.documentMoveDenied}),okMessage:s.back,onOk:()=>t.reduce(Pe(oe.moveDocuments,void 0))})),a}}async function TS(t,{docGroupId:e,name:r,callback:o}){let i=De.get().strings,s=oe.createSubDocumentGroup;t.reduce(Fe(s,i.creatingFolder));try{let{id:a}=await ue.lnsClient.createSubDocumentGroup(e,r);await o({id:a,name:r}),t.reduce(Fe(s,null))}catch(a){if(yt.catchError(a))return;let l=Ht(a,{400:c=>{let d=c.asJson();return(d==null?void 0:d.result)===1?i.folderWithThisNameAlreadyExists:(d==null?void 0:d.result)===2?i.pleaseEnterFolderName:(d==null?void 0:d.result)===3?i.invalidFolderName:i.invalidRequest},403:i.folderCreationDenied,404:i.folderLocationNotFound});throw ge.error(a),t.reduce(Fe(s,null),Pe(s,{title:i.couldntCreateFolder,...l,okMessage:i.back,onOk:()=>t.reduce(Pe(s,void 0))})),a}}async function Xae(t,{id:e,name:r,type:o}){let i=De.get().strings,s=o==="group"?i.folder:i.file;t.reduce(Fe(oe.renameDocument,(0,wS.sprintf)(i.renamingItem,s)));try{return o==="group"?await ue.lnsClient.renameDocumentGroup(e,r).catch(yt.handleError):await ue.lnsClient.renameDocument(e,r).catch(yt.handleError),t.reduce(Fe(oe.renameDocument,null)),!0}catch(a){return ge.error(a),t.reduce(Fe(oe.renameDocument,null),Pe(oe.renameDocument,{title:(0,wS.sprintf)(i.couldntRenameItem,s),...Ht(a,{400:(0,wS.sprintf)(i.itemNameInvalid,s),403:(0,wS.sprintf)(i.itemRenameDenied,s),404:(0,wS.sprintf)(i.itemNotFound,s)}),okMessage:i.back,onOk:()=>t.reduce(Pe(oe.renameDocument,void 0))})),!1}}async function Qae(t,e,r){let o=De.get().strings;t.reduce(Fe(oe.deleteDocument,o.deletingDocument));try{let i=[];r.length>0&&i.push(ue.lnsClient.deleteDocumentGroups(r)),e.length>0&&i.push(ue.lnsClient.deleteDocuments(e)),await Promise.all(i).catch(yt.handleError),t.reduce(Fe(oe.deleteDocument,null))}catch(i){ge.error(i),t.reduce(Fe(oe.deleteDocument,null),Pe(oe.deleteDocument,{title:o.couldntDeleteDocument,...Ht(i,{400:o.fileOrFolderInvalid,403:o.fileOrFolderDeletionDenied}),okMessage:o.back,onOk:()=>t.reduce(Pe(oe.deleteDocument,void 0))}))}}async function Jae({store:t,docGroupId:e,name:r}){let o=De.get().strings;$e(t.uploadingDocument!=null,"uploadingDocument must be set");let{card:i}=t.uploadingDocument;t.reduce(cw(1),Df(void 0));let s=oe.uploadDocuments;try{await Sm(t,i)}catch(c){t.reduce(cw(-1),Pe(s,{title:o.couldntUploadDocument,...Ht(c),okMessage:o.okay,onOk(){t.reduce(Pe(s,void 0))}}));return}let a={id:t.userInfo.user_id,name:Ut(t.userInfo)},l=await cC(i,a);try{await ue.lnsClient.uploadDocumentAsMaterial({...l,docGroupId:e,name:r}),t.reduce(cw(-1),Pn({type:"normal",text:o.didSaveToMaterialsStorage}))}catch(c){let d=Ht(c,{400:o.invalidDocumentName,403:o.folderCreationDenied,404:o.folderNotFound});throw ge.error(c),t.reduce(cw(-1),Pe(oe.uploadDocuments,{title:o.couldntSaveToMaterials,...d,okMessage:o.back,onOk:()=>t.reduce(Pe(oe.uploadDocuments,void 0))})),c}}var Zae=()=>{let t=qe(),e=(0,ER.useContext)(Ki),r=Te(),[o,i]=wn({message:r.importDocument,ctrl:new AbortController}),s=(c,d)=>{i({message:`${r.importDocument}
(${c}/${d})`})},a=c=>{if(yt.catchError(c))return;ge.error(c);let d=oe.importDocument;t.reduce(Fe(d,null),Pe(d,{title:r.errorOccurred,message:r.couldntImportDocument,okMessage:r.okay,onOk:()=>t.reduce(Pe(d,void 0))}))};(0,ER.useEffect)(()=>{$e(e.history.length>0,"history must be not empty"),$e(e.importingMaterial,"importing material must be not empty");let c=bs(r.folderForImportedItemsWillBeCreated,{defaultValue:f0(e.importingMaterial.name),maxLength:255});if(c===null){e.reduce(()=>({importingMaterial:{$set:void 0}}));return}let d=e.history.length-1,u=e.history[d],p=async h=>{$e(e.importingMaterial,"importing material must be not empty"),jae({lnsClient:ue.lnsClient,file:e.importingMaterial,groupId:h.id,signal:o.ctrl.signal,onProgress:s}).then(f=>{let m=[...u.contents.subfolders];m.push(h),e.reduce(()=>({history:{[d]:{contents:{subfolders:{$set:m}}}}})),f.type==="error"&&a(f.error)}).finally(()=>{e.reduce(()=>({importingMaterial:{$set:void 0}}))})};TS(t,{docGroupId:u.documentGroup.id,name:c,callback:p}).catch(()=>{e.reduce(()=>({importingMaterial:{$set:void 0}}))})},[]);let l=()=>{o.ctrl.abort()};return cg.createElement(gy,null,cg.createElement("div",{className:"uiDialogContent"},cg.createElement(ur,null),cg.createElement("div",{className:"uiDialogTitle"},r.import),cg.createElement("div",{className:"uiDialogMessage materialExportDialogMessage"},o.message),cg.createElement(El,null,cg.createElement(ma,{className:"uiDialogCancelButton",onClick:l},r.cancel))))};var DS=X(he()),FR=X(he());var Rn=X(he()),J8=X(he());var rle=X(on());var Cl=X(he());var bMe=lS(),ele=({document:t,onClick:e,selected:r,selectOpts:o,disabled:i,draggable:s,dateTimeFormat:a})=>{let l=bMe(t.timestamp,a),c=t.name;t.extension!==".lnfragment"&&(c+=t.extension.toLowerCase());let d=p=>{p.dataTransfer.setData(No.FileDocument,JSON.stringify(t)),p.dataTransfer.effectAllowed="copy"},{res:u}=ue;return Cl.createElement(Xn,{key:t.id,selectOpts:o,onClick:e,checked:r,disabled:i,draggable:s,onDragStart:d},Cl.createElement($n,null,Cl.createElement("div",{className:"materialBoxDialogThumbnail"},t.asset_proxy&&Cl.createElement(eR,{src:u.assetThumbUrl({assetId:t.asset_proxy,index:0,size:"small"}),fallbackSrc:tle(t.extension),alt:`thumbnail of document: '${t.name}'`}),!t.asset_proxy&&Cl.createElement(Jc,{id:t.id,index:0,comment_snapshot_id:t.comment_snapshot_id,skipForKnown404Url:!0,fallbackSrc:tle(t.extension)}))),Cl.createElement(QI,null,Cl.createElement(JI,null,c),Cl.createElement(ZI,null,l)))},Uh=({onClick:t,disabled:e,selectOpts:r,title:o,showArrow:i,category:s})=>{let a=hD(s);return Cl.createElement(Xn,{...{disabled:e,selectOpts:e?void 0:r,onClick:t,showArrow:i}},Cl.createElement($n,null,Cl.createElement(Fr,{className:"materialBoxDialogFolderIcon",src:a,alt:"folder icon"})),Cl.createElement(gi,null,Cl.createElement(to,{disablePopover:!0},o)))};function hD(t){switch(t){case"private":return"/svg/materialbox/MaterialFolderPrivate.svg";case"school-class":return"/svg/materialbox/MaterialFolderClass.svg";case"school-teacher":return"/svg/materialbox/MaterialFolderTeacher.svg";case"school-all":return"/svg/materialbox/MaterialFolderSchool.svg";case"district-all":return"/svg/materialbox/MaterialFolderDistrict.svg";case"district-teacher":return"/svg/materialbox/MaterialFolderTeacher.svg"}}var tle=t=>Rp(t)?ue.res.src("/svg/materialbox/MaterialAudioFile.svg"):ue.res.src("/svg/materialbox/MaterialFile.svg");var nle=({handleBack:t,selectingMaterialDestination:e})=>{let r=(0,J8.useContext)(Ki),o=qe(),i=Te(),{title:s,category:a,categoryDescription:l}=Z8(o,r.history),c=async()=>{let h=r.selectedItems.length,f=h>1?i.confirmMultiFileDelete:i.confirmSingleFileDelete;if(!confirm((0,rle.sprintf)(f,h)))return;let{docIds:m,docGroupIds:g}=_R(r);try{await Qae(o,m,g);let v=r.history[r.history.length-1].contents,y=tw(v.subfolders,C=>g.indexOf(C.id)>-1),S=tw(v.documents,C=>m.indexOf(C.id)>-1);r.reduce(()=>({document:{$set:void 0},selectedItems:{$set:[]},history:{[r.history.length-1]:{contents:{subfolders:{$set:y},documents:{$set:S}}}}}))}catch(v){}},d=()=>{r.reduce(()=>({$merge:{editMode:void 0,selectedItems:[]}}))},u=r.history[r.history.length-1],p=r.history.length===0;return Rn.createElement(dr,null,Rn.createElement(fr,null,Rn.createElement(mr,null,!r.editMode&&Rn.createElement(Mt,{onClick:t},i.back),r.editMode&&Rn.createElement(Mt,{onClick:d},i.cancel)),Rn.createElement(kr,null,Rn.createElement("div",{className:"materialBoxDialogHeader"},l&&Rn.createElement(to,{className:"materialBoxDialogHeaderCategory"},l),Rn.createElement("div",{className:"materialBoxDialogHeaderTitle"},a&&Rn.createElement(Fr,{className:"materialBoxDialogHeaderTitleIcon",src:hD(a),alt:"folder icon"}),Rn.createElement(to,{className:"materialBoxDialogHeaderTitleText"},s)))),Rn.createElement(wr,null,!p&&Rn.createElement("div",{className:"relative"},e&&Rn.createElement(Mt,{onClick:ole(o,r)},i.createFolder),!e&&!r.editMode&&Rn.createElement(Um,{onClick:()=>r.reduce(()=>({popoverOpen:{$set:!0}}))}),!e&&r.editMode==="delete"&&Rn.createElement(Mt,{disabled:r.selectedItems.length===0,onClick:c},i.delete),!e&&r.editMode==="move"&&Rn.createElement(Mt,{disabled:r.selectedItems.length===0,onClick:()=>r.reduce(()=>({modalMode:{$set:"select"}}))},i.move),!e&&r.editMode==="copy"&&Rn.createElement(Mt,{disabled:r.selectedItems.length===0,onClick:()=>r.reduce(()=>({modalMode:{$set:"select"}}))},i.copy),!e&&r.editMode==="export"&&Rn.createElement(Mt,{disabled:r.selectedItems.length===0,onClick:()=>r.reduce(()=>({modalMode:{$set:"export"}}))},i.export),!e&&Rn.createElement(jt,{open:r.popoverOpen,onClose:()=>r.reduce(()=>({popoverOpen:{$set:!1}}))},Rn.createElement(yMe,{category:a}))))),u&&!u.contents&&!u.error&&Rn.createElement(ur,{absolute:"bottom"}))},yMe=({category:t})=>{let e=qe(),r=(0,J8.useContext)(Ki),o=d=>()=>{r.reduce(()=>({$merge:{editMode:d,popoverOpen:!1}}))},i=t!=null&&kR({category:t,userInfo:e.userInfo}),a=!r.history[r.history.length-1].contents,l=Te(),c=()=>{let d=document.createElement("input");d.type="file",d.multiple=!0,d.onchange=()=>{let u=d.files;if(!(!u||u.length===0)){for(let p of u){let h=DR(p.name),f;if(!!h){h==="no-ext"?f=l.filesNoExtCannotBeUploaded:f=l.fileWithInvalidNameContained,e.reduce(Pe(oe.uploadDocuments,{title:l.couldntUploadDocument,message:f,okMessage:l.close,onOk:()=>e.reduce(Pe(oe.uploadDocuments,void 0))})),r.reduce(()=>({popoverOpen:{$set:!1}}));return}}r.reduce(()=>({popoverOpen:{$set:!1},uploadingFiles:{$set:Array.from(u)}}))}},d.click()};return Rn.createElement(Rn.Fragment,null,i&&Rn.createElement(dg,{onClick:ole(e,r),disabled:a},l.createFolder),i&&Rn.createElement(dg,{onClick:o("rename"),disabled:a},l.rename),i&&Rn.createElement(dg,{onClick:o("move"),disabled:a},l.move),Rn.createElement(dg,{onClick:o("copy"),disabled:a},l.copy),i&&Rn.createElement(dg,{onClick:o("delete"),disabled:a},l.delete),i&&Rn.createElement(dg,{onClick:c,disabled:a},l.upload),t==="private"&&Rn.createElement(Rn.Fragment,null,Rn.createElement(dg,{onClick:CMe(r),disabled:a},l.import),Rn.createElement(dg,{onClick:o("export"),disabled:a},l.export)))},dg=({onClick:t,disabled:e,children:r})=>Rn.createElement("div",{className:"uiPopoverItem","aria-disabled":e,role:"button",onClick:t},r),Z8=(t,e)=>{let r=De.get().strings;if(e.length===0)return{title:r.materialsStorage};let o=e[e.length-1],i=or(t),s=Ji(t,i),a=o.documentGroup.name,l=o.documentGroup.category,c;return l==="school-class"?c=s:l==="school-all"||l==="school-teacher"?c=r.schoolWideFolder:(l==="district-all"||l==="district-teacher")&&(c=t.userInfo.district_name),{title:a,category:l,categoryDescription:c}},ole=(t,e)=>()=>{let r=De.get().strings,o=bs(r.pleaseEnterFolderName,{maxLength:255});if(o===null)return;let i=e.history.length-1,s=e.history[i].documentGroup.id;TS(t,{docGroupId:s,name:o,callback:async l=>{let c=[...e.history[i].contents.subfolders];c.push(l),e.reduce(()=>({popoverOpen:{$set:!1},history:{[i]:{contents:{subfolders:{$set:c}}}}}))}}).catch(()=>{})},CMe=t=>()=>{let e=document.createElement("input");e.type="file",e.accept=".loilomaterials",e.multiple=!1,e.onchange=()=>{if(!e.files||e.files.length<1)return;let r=e.files[0];t.reduce(()=>({popoverOpen:{$set:!1},importingMaterial:{$set:r}}))},e.click()};var Hh=X(he()),sle=X(he());var Zo=X(he()),e5=X(he());var fD=X(on());var AR=({selectingMaterialDestination:t,onClick:e})=>{let r=qe(),{userInfo:o}=r,i=Te(),s,a=or(r);typeof a=="number"&&(s=r.courseAttributes.byId[a]);let{district_name:l,district_root_document_group_id:c,district_teacher_document_group_id:d,is_teacher:u,school_document_group_id:p,teacher_document_group_id:h}=r.userInfo,f=!0,m=s!==void 0,g=c!==void 0&&l!==void 0,v=u&&d!==void 0&&l!==void 0;t&&(f=f&&u,m=m&&u,g=g&&u);let y=c!==void 0&&RR({userInfo:o,id:c,selectingMaterialDestination:t}),S=d!==void 0&&RR({userInfo:o,id:d,selectingMaterialDestination:t}),C=RR({userInfo:o,id:h,selectingMaterialDestination:t});return Zo.createElement(Zo.Fragment,null,Zo.createElement(yo,{title:" "},Zo.createElement(Uh,{disabled:!1,title:i.myFolder,onClick:()=>{e({id:"private",name:i.myFolder,category:"private"})},showArrow:!0,category:"private"})),(g||v)&&Zo.createElement(yo,{title:l},g&&Zo.createElement(Uh,{title:(0,fD.sprintf)(i.districtShared,l),disabled:!y,onClick:()=>{e({id:c,name:(0,fD.sprintf)(i.districtShared,l),category:"district-all"})},showArrow:y,category:"district-all"}),v&&Zo.createElement(Uh,{title:i.teachersOnlyFolder,disabled:!S,onClick:()=>e({id:d,name:i.teachersOnlyFolder,category:"district-teacher"}),showArrow:S,category:"district-teacher"})),f&&Zo.createElement(yo,{title:i.schoolWideFolder},Zo.createElement(Uh,{title:i.schoolShared,disabled:!1,onClick:()=>e({id:p,name:i.schoolShared,category:"school-all"}),showArrow:!0,category:"school-all"}),u&&Zo.createElement(Uh,{title:i.teachersOnlyFolder,disabled:!C,onClick:()=>e({id:h,name:i.teachersOnlyFolder,category:"school-teacher"}),showArrow:C,category:"school-teacher"})),m&&Zo.createElement(yo,{title:s==null?void 0:s.name},Zo.createElement(Uh,{title:i.classShared,disabled:!1,onClick:()=>e({id:s.document_groups.common_group_id,name:i.classShared,category:"school-class"}),showArrow:!0,category:"school-class"}),s.document_groups.class_group_ids.map(b=>{let x=(0,fD.sprintf)(i.classFolder,b.name);return Zo.createElement(Uh,{disabled:!1,key:b.id,showArrow:!0,title:x,onClick:()=>e({id:b.id,name:(0,fD.sprintf)(i.classFolder,b.name),category:"school-class"}),category:"school-class"})})))},IR=({sortOrder:t,onChangeSortOrder:e,documentGroup:r,contents:o,onClickDocumentGroup:i,onClickDocument:s,selectingMaterialDestination:a,selectedFileId:l,disableSelectOpts:c=!1,disabledFolders:d=[],disableFileCell:u=!1})=>{let p=qe(),h=(0,e5.useContext)(Ki),f=Te(),{documents:m,subfolders:g}=o,v=c?void 0:(b,x)=>{if(h.editMode==="copy"||h.editMode==="delete"||h.editMode==="move"||h.editMode==="export"){let w=h.selectedItems.findIndex(k=>k.id===b&&k.type===x);return{selected:w>-1,selectionType:h.editMode==="delete"?"delete":"normal",onSelect:k=>{k?h.reduce(()=>({selectedItems:{$push:[{id:b,type:x}]}})):h.reduce(()=>({selectedItems:{$splice:[[w,1]]}}))}}}},y=m.length<1&&g.length<1,S=m.length>1||g.length>1,C=["name","updateDate","fileUpdateDateFolderName"];return Zo.createElement(yo,null,y&&Zo.createElement(Vd,null,f.thisIsAnEmptyFolder),!y&&Zo.createElement(e2,null,Zo.createElement(sR,null,Zo.createElement(SMe,null),Zo.createElement(xs,null),Zo.createElement(xMe,{disabled:!S,sortKey:t.key,sortDirection:t.direction,sortKeys:C,titleForKey:wMe,onChange:(b,x)=>e({key:b,direction:x})}))),g.sort(DMe(t)).map(b=>{let x=RR({userInfo:p.userInfo,disabledFolders:d,id:b.id,selectingMaterialDestination:a,editMode:h.editMode}),w=x&&(h.editMode===void 0||a),{category:k}=r;return Zo.createElement(Uh,{key:b.id,showArrow:w,category:k,selectOpts:v&&v(b.id,"group"),onClick:()=>i({id:b.id,name:b.name,category:k}),disabled:!x,title:b.name})}),m.sort(kMe(t)).map(b=>{let x=Ay(b.extension)||Xg(b.extension)&&!b.asset_proxy;return Zo.createElement(ele,{key:b.id,document:b,selectOpts:v&&v(b.id,"document"),selected:b.id===l,onClick:()=>s(b),draggable:x,disabled:u,dateTimeFormat:f.fileUpdatedAtDateTimeFmt})}))},SMe=()=>{var l,c,d,u;let t=Te(),e=(0,e5.useContext)(Ki),r=e.history[e.history.length-1],o=(c=(l=r.contents)==null?void 0:l.documents.length)!=null?c:0,i=(u=(d=r.contents)==null?void 0:d.subfolders.length)!=null?u:0,s=e.selectedItems.length===o+i,a=()=>{if(!!r.contents)if(s)e.reduce(()=>({selectedItems:{$set:[]}}));else{let p=r.contents.subfolders.map(m=>({id:m.id,type:"group"})),h=r.contents.documents.map(m=>({id:m.id,type:"document"})),f=[...p,...h];e.reduce(()=>({selectedItems:{$set:f}}))}};return e.editMode!=="export"?null:Zo.createElement(qr,{className:"primaryTextButton",onClick:a},s?t.releaseAll:t.selectAll)},xMe=aR();function wMe(t){let e=Te();switch(t){case"fileUpdateDateFolderName":return e.materialFileUpdateDateFolderNameOrder;case"name":return e.materialNameOrder;case"updateDate":return e.sortUpdateDateOrder}}function RR(t){let{userInfo:e,disabledFolders:r,id:o,selectingMaterialDestination:i,editMode:s}=t;if(r==null?void 0:r.includes(o))return!1;let{district_document_group_write_permission:a,district_root_document_group_id:l,district_teacher_document_group_id:c,school_document_group_id:d,teacher_document_group_id:u,is_teacher:p}=e;return o===l?i?p&&a===!0:s===void 0:o===c?i?p&&a===!0:p&&s===void 0:o===d?i?p:s===void 0:o===u?i?p:p&&s===void 0:!0}function t5(t,e){let r=t.name.localeCompare(e.name);return r===0?t.id-e.id:r}function TMe(t,e){let r=new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();return r===0?t5(t,e):r}function ile(t){return(e,r)=>t(r,e)}function DMe(t){let{key:e,direction:r}=t,o;switch(e){case"name":case"fileUpdateDateFolderName":o=t5;break;case"updateDate":o=(i,s)=>i.id-s.id;break}switch(r){case"ascending":return o;case"descending":return ile(o)}}function kMe(t){let{key:e,direction:r}=t,o;switch(e){case"name":o=t5;break;case"updateDate":case"fileUpdateDateFolderName":o=TMe;break}switch(r){case"ascending":return o;case"descending":return ile(o)}}var ale=({selectingMaterialDestination:t,sortOrder:e,onChangeSortOrder:r})=>{var p;let o=qe(),i=Te(),s=(0,sle.useContext)(Ki),a=async h=>{s.editMode?s.editMode==="rename"&&typeof h.id=="number"&&await c(h.id,h.name,"group"):s.reduce(()=>({history:{$push:[{documentGroup:h}]}}))},l=async h=>{s.editMode?s.editMode==="rename"&&await c(h.id,h.name,"document"):s.reduce(()=>({$merge:{document:h}}))},c=async(h,f,m)=>{var C;let v=m==="group"?i.enterFolderName:i.enterFileName,y=bs(v,{defaultValue:f,maxLength:255});if(y===null||f===y||!await Xae(o,{id:h,name:y,type:m}))return;let S=EMe({history:s.history,id:h,nextName:y,type:m});S&&h===((C=s.document)==null?void 0:C.id)?s.reduce(()=>({document:{name:{$set:y}},...S})):S&&s.reduce(()=>S)},d=PMe(s.editMode),u=s.history[s.history.length-1];return Hh.createElement(mn,null,d&&Hh.createElement("div",{className:"drawerContentDesc"},d),(u==null?void 0:u.error)&&Hh.createElement(Vd,null,i.couldntFetchData),Hh.createElement(Hh.Fragment,null,u===void 0&&Hh.createElement(AR,{selectingMaterialDestination:t,onClick:a}),(u==null?void 0:u.contents)&&Hh.createElement(IR,{sortOrder:e,onChangeSortOrder:r,contents:u.contents,documentGroup:u.documentGroup,selectedFileId:(p=s.document)==null?void 0:p.id,onClickDocumentGroup:a,onClickDocument:l,disableFileCell:o.uploadingDocument!==void 0,selectingMaterialDestination:t})))};function PMe(t){let e=Te();return t==="copy"?e.chooseFileToCopy:t==="delete"?e.chooseFileToDelete:t==="move"?e.chooseFileToMove:t==="rename"?e.chooseFileToRename:t=="export"?e.selectItemsToExport:""}function EMe({history:t,id:e,nextName:r,type:o}){let i=t.length-1,s=t[i];if(!!s.contents)if(o==="document"){let a=s.contents.documents.findIndex(l=>l.id===e);if(a>=0)return{history:{[i]:{contents:{documents:{[a]:{name:{$set:r}}}}}}}}else{let a=s.contents.subfolders.findIndex(l=>l.id===e);if(a>=0)return{history:{[i]:{contents:{subfolders:{[a]:{name:{$set:r}}}}}}}}}var MR=({onBack:t,selectingMaterialDestination:e,sortOrder:r,onChangeSortOrder:o})=>{let i=(0,FR.useContext)(Ki);return(0,FR.useEffect)(()=>{let a=i.history.length-1;if(a<0)return;let l=i.history[a];if(l.contents)return;let c=l.documentGroup.id;ue.lnsClient.getDocumentGroupsContents(c).then(d=>{i.reduce(lle({id:c,contents:d}))}).catch(yt.handleError).catch(d=>{i.reduce(lle({id:c,error:d}))})},[i.history.length]),DS.createElement(DS.Fragment,null,DS.createElement(nle,{handleBack:()=>{if(i.history.length>i.minHistoryLength){let a=i.history.length;i.reduce(()=>({history:{$splice:[[a-1,1]]}}))}else t()},selectingMaterialDestination:e}),DS.createElement(ale,{selectingMaterialDestination:e,sortOrder:r,onChangeSortOrder:o}))};function lle({id:t,contents:e,error:r}){return o=>{let i=o.history.findIndex(a=>a.documentGroup.id===t);if(i<0)return{};let s={};return e&&(s.contents=e),r&&(s.error=r),{history:{[i]:{$merge:s}}}}}var Fi=X(he()),_b=X(he());var cle=()=>{let t=(0,_b.useContext)(Ki),e=qe(),r=Te(),o=i0({history:[]}),{history:i}=o,{docIds:s,docGroupIds:a}=_R(t),[l,c]=(0,_b.useState)(e.userPreference.materialBoxSortOrder);(0,_b.useEffect)(()=>{e.reduce(_s({materialBoxSortOrder:{$set:l}}))},[l]),es(()=>{if(e.userInfo.is_teacher)o.reduce(()=>({history:{$set:[]}}));else{let R={id:"private",name:r.myFolder,category:"private"};o.reduce(()=>({history:{$set:[{documentGroup:R}]}}))}return()=>{o.reduce(()=>({history:{$set:[]}}))}});let d=R=>N=>{let V=i.findIndex(W=>W.documentGroup.id===R);V<0||o.reduce(()=>({history:{[V]:{contents:{$set:N}}}}))};(0,_b.useEffect)(()=>{let R=i.length-1,N=i[i.length-1];if(!N||N.contents)return;let V=N.documentGroup.id;ue.lnsClient.getDocumentGroupsContents(V).then(d(V)).catch(yt.handleError).catch(W=>{o.reduce(()=>({history:{[R]:{error:{$set:W}}}}))})},[i.length]);let u=()=>{t.reduce(()=>({modalMode:{$set:void 0}}))},p=()=>{o.reduce(()=>({history:{$splice:[[-1,1]]}}))},h=R=>{o.reduce(()=>({history:{$push:[{documentGroup:R}]}}))},f=R=>{let N=R[R.length-1];if(!N)throw new Error("destination folder is invalid");return N.documentGroup.id},m=R=>{let N=R.findIndex(me=>{var ie,Z;if(s.length>0)return(ie=me.contents)==null?void 0:ie.documents.some(P=>P.id===s[0]);if(a.length>0)return(Z=me.contents)==null?void 0:Z.subfolders.some(P=>P.id===a[0])}),V=R[N];if(!V)throw new Error("selected items are invalid");let W=V.documentGroup.id;return{srcIndex:N,srcId:W}},g=async()=>{let R=f(i),N=async()=>{let V=t.history.findIndex(me=>me.documentGroup.id===R);if(V<0){t.reduce(()=>({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}));return}let W=await ue.lnsClient.getDocumentGroupsContents(R);t.reduce(()=>({history:{[V]:{contents:{$set:W}}},editMode:{$set:void 0},selectedItems:{$set:[]},modalMode:{$set:void 0}}))};try{await qae(e,{docIds:s,docGroupIds:a,destId:R,callback:N})}catch(V){t.reduce(()=>({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}))}},v=async()=>{let R=f(i),{srcIndex:N,srcId:V}=m(t.history);if(R===V){t.reduce(()=>({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}));return}let W=async()=>{let me=await ue.lnsClient.getDocumentGroupsContents(V),ie={[N]:{contents:{$set:me}}},Z=t.history.findIndex(P=>P.documentGroup.id===R);if(Z>-1){let P=await ue.lnsClient.getDocumentGroupsContents(R);ie={...ie,[Z]:{contents:{$set:P}}}}t.reduce(()=>({history:ie,editMode:{$set:void 0},selectedItems:{$set:[]},modalMode:{$set:void 0}}))};try{await Yae(e,{docIds:s,docGroupIds:a,destId:R,callback:W})}catch(me){t.reduce(()=>({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}))}},y=async()=>{},S="";t.editMode==="copy"?(S=r.copyToThisFolder,y=g):t.editMode==="move"&&(S=r.moveToThisFolder,y=v);let C=(R,N,V)=>{let W=R.findIndex(ie=>ie.documentGroup.id===N);return W<0?void 0:{subfolders:[...R[W].contents.subfolders,V],index:W}},b=()=>{let R=bs(r.pleaseEnterFolderName,{maxLength:255});if(R===null)return;let N=i[i.length-1].documentGroup.id;TS(e,{docGroupId:N,name:R,callback:async W=>{let me=C(t.history,N,W);me&&t.reduce(()=>({history:{[me.index]:{contents:{subfolders:{$set:me.subfolders}}}}}));let ie=C(i,N,W);ie&&o.reduce(()=>({history:{[ie.index]:{contents:{subfolders:{$set:ie.subfolders}}}}}))}})};if(t.editMode!=="copy"&&t.editMode!=="move")return null;let x;i.length>0&&(x=i[i.length-1]);let w=i.length===0,k=e.userInfo.is_teacher?0:1,T=i.length===k,A=!w&&x!==void 0,E=t.editMode==="move"&&t.history.length>0&&i.length>0&&f(i)===m(t.history).srcId,{title:F,category:z,categoryDescription:L}=Z8(e,i);return Fi.createElement($r,{round:!e.screen.isMobile},Fi.createElement(dr,null,Fi.createElement(fr,null,Fi.createElement(mr,null,T&&Fi.createElement(Mt,{onClick:u},r.cancel),!T&&Fi.createElement(Mt,{onClick:p},r.back)),Fi.createElement(kr,null,Fi.createElement("div",{className:"materialBoxDialogHeader"},L&&Fi.createElement("div",{className:"materialBoxDialogHeaderCategory"},L),Fi.createElement("div",{className:"materialBoxDialogHeaderTitle"},z&&Fi.createElement(Fr,{className:"materialBoxDialogHeaderTitleIcon",src:hD(z),alt:"folder icon"}),Fi.createElement(to,{className:"materialBoxDialogHeaderTitleText"},F)))),Fi.createElement(wr,null,i.length>0&&Fi.createElement(Mt,{onClick:b},r.createFolder))),x&&!x.contents&&!x.error&&Fi.createElement(ur,{absolute:"bottom"})),Fi.createElement(mn,null,w&&Fi.createElement(AR,{selectingMaterialDestination:!0,onClick:h}),!w&&x&&x.contents&&Fi.createElement(IR,{sortOrder:l,onChangeSortOrder:c,documentGroup:x.documentGroup,contents:x.contents,onClickDocumentGroup:h,onClickDocument:()=>{},disableSelectOpts:!0,disabledFolders:a,disableFileCell:!0,selectingMaterialDestination:!0}),(x==null?void 0:x.error)&&Fi.createElement(Vd,null,r.couldntFetchData)),A&&Fi.createElement("button",{type:"button",role:"button",className:"materialDialogSaveButton",onClick:y,disabled:E},Fi.createElement("div",{className:"materialDialogSaveButtonInner"},S)))};var Ki=Mi.createContext(ky({history:[],minHistoryLength:0,modalMode:void 0,popoverOpen:!1,selectedItems:[],uploadingFiles:[]})),ule=({onBack:t})=>{let e=qe(),r=i0({history:[],minHistoryLength:0,modalMode:void 0,popoverOpen:!1,selectedItems:[],uploadingFiles:[]}),[o,i]=(0,kS.useState)(e.userPreference.materialBoxSortOrder);return(0,kS.useEffect)(()=>{e.reduce(_s({materialBoxSortOrder:{$set:o}}))},[o]),Mi.createElement(Ki.Provider,{value:r},Mi.createElement(_Me,null,Mi.createElement($r,null,Mi.createElement(MR,{sortOrder:o,onChangeSortOrder:i,onBack:t,selectingMaterialDestination:!1}))),r.document&&Mi.createElement(PR,{document:r.document,store:e,onClose:()=>r.reduce(()=>({$unset:["document"]}))}),Mi.createElement(oo,{open:r.modalMode==="select",transition:"up",onClose:()=>r.reduce(()=>({popoverOpen:{$set:!1}}))},Mi.createElement(cle,null)),Mi.createElement(Vr,{open:r.modalMode==="export",transition:"fade",onClose:()=>r.reduce(()=>({popoverOpen:{$set:!1}}))},Mi.createElement(Wae,null)),Mi.createElement(Vr,{open:r.importingMaterial!==void 0,transition:"fade",onClose:()=>r.reduce(()=>({popoverOpen:{$set:!1}}))},Mi.createElement(Zae,null)),Mi.createElement(AMe,null))},_Me=({children:t})=>{let e=Mi.useContext(Ki),r=qe(),o=Te(),i=e.history[e.history.length-1],s=d=>{d.stopPropagation()},a=i!==void 0&&e.editMode===void 0&&kR({category:i.documentGroup.category,userInfo:r.userInfo});return Mi.createElement("div",{className:"materialBox relative",onDragOver:d=>{!d.dataTransfer.types.includes(No.Files)||(d.preventDefault(),d.stopPropagation(),d.dataTransfer.dropEffect="copy")},onDrop:d=>{if(!!d.dataTransfer.types.includes(No.Files)){if(!a){r.reduce(Pe(oe.uploadDocuments,{title:o.couldntUploadDocument,message:o.insufficientPermissionToDocumentGroup,okMessage:o.okay,onOk:()=>r.reduce(Pe(oe.uploadDocuments,void 0))}));return}d.preventDefault(),d.stopPropagation();try{let u=B9(d.dataTransfer.items,p=>{var m,g;let h=p.getAsFile();if(!h)return;if((g=(m=p.webkitGetAsEntry)==null?void 0:m.call(p))==null?void 0:g.isDirectory)throw new hs(o.folderCannotBeUploaded);let f=DR(h.name);if(f==="no-ext")throw new hs(o.filesNoExtCannotBeUploaded);if(f==="bad-chars")throw new hs(o.fileWithInvalidNameContained);return h});e.reduce(()=>({uploadingFiles:{$set:u}}))}catch(u){let p=oe.uploadDocuments;r.reduce(Pe(p,{title:o.couldntUploadDocument,...Ht(u),okMessage:o.okay,onOk:()=>r.reduce(Pe(p,void 0))}))}}},onClick:s},t)},AMe=()=>{let t=Mi.useContext(Ki),e=qe(),r=Te(),o=t.history[t.history.length-1],i=Mi.useRef(new AbortController),[s,a]=(0,kS.useState)(0);(0,kS.useEffect)(()=>{if(t.uploadingFiles.length===0)return;i.current=new AbortController;let p=oe.uploadDocuments;Vae({lnsClient:ue.lnsClient,groupId:o.documentGroup.id,files:t.uploadingFiles,signal:i.current.signal,onProgress:h=>{a(h)},onUpload:({id:h,name:f,asset:m})=>{let g={id:h,name:f0(f),asset_proxy:m,author_id:e.userInfo.user_id,timestamp:new Date().toISOString(),extension:Xs(f)};t.reduce(()=>({history:{[t.history.length-1]:{contents:{documents:{$splice:[[-1,0,g]]}}}}}))}}).then(h=>{if(h.type==="error"){let f=h.error;if(yt.catchError(f))return;e.reduce(Pe(p,{title:r.couldntUploadDocument,...Ht(f),okMessage:r.close,onOk:()=>e.reduce(Pe(p,void 0))}))}t.reduce(()=>({uploadingFiles:{$set:[]}}))})},[t.uploadingFiles]);let l=t.uploadingFiles.length;if(l===0)return null;let c=De.get().pluralSafeSuffix(l),d=`${(0,dle.sprintf)(r.uploadingXXX,r.file+c)}(${s}/${l})`;return Mi.createElement(GC,{title:d,cancelMessage:r.cancel,onCancel:()=>i.current.abort()})},_R=t=>{let e=t.selectedItems.filter(o=>o.type==="document").map(o=>o.id),r=t.selectedItems.filter(o=>o.type==="group").map(o=>o.id);return{docIds:e,docGroupIds:r}};var PS=X(he()),NR=X(he());var ple=({onBack:t})=>{let e=qe(),r=Te(),o=i0({history:e.userInfo.is_teacher?[]:[{documentGroup:{id:"private",name:r.myFolder,category:"private"}}],minHistoryLength:e.userInfo.is_teacher?0:1,popoverOpen:!1,modalMode:void 0,selectedItems:[],uploadingFiles:[]}),[i,s]=(0,NR.useState)(e.userPreference.materialBoxSortOrder);(0,NR.useEffect)(()=>{e.reduce(_s({materialBoxSortOrder:{$set:i}}))},[i]);let a=async u=>{let{card:p}=e.uploadingDocument,h=bs(r.enterDocumentName,{defaultValue:IMe(p),maxLength:255});h!==null&&(Jae({store:e,name:h,docGroupId:u}),t())},l=()=>{let u=o.history.length-1,p=o.history[u];a(p.documentGroup.id)},c=o.history.length===0,d=!e.screen.isMobile;return PS.createElement(Ki.Provider,{value:o},PS.createElement($r,{round:d},PS.createElement(MR,{onBack:t,selectingMaterialDestination:!0,sortOrder:i,onChangeSortOrder:s}),!c&&PS.createElement("button",{type:"button",role:"button",className:"materialDialogSaveButton",onClick:l},PS.createElement("div",{className:"materialDialogSaveButtonInner"},r.saveToThisFolder))))},IMe=t=>{let e=De.get().strings,r=t.headGroup(),o=KQ(r);return r instanceof Rd?o||e.photoDefaultFileName:r instanceof MA?e.drawingDefaultFileName:r instanceof Ao?o||e.videoDefaultFileName:r instanceof ri?o||e.webDefaultFileName:r instanceof nh?e.mapDefaultFileName:r instanceof ym?o||e.textDefaultFileName:r instanceof Bs?o||e.pdfDefaultFileName:r instanceof Yo?o||e.audioDefaultFileName:r instanceof zr?o||r.content.preset==="test"?e.quizPresetTest:e.quizPresetSurvey:r instanceof an?o||e.attendanceReport:""};var hle=()=>{let t=qe();return t.desktop?Ab.default.createElement(Ab.default.Fragment,null,Ab.default.createElement(Vr,{open:t.materialBoxOpen,overlay:!0,container:"none",onClose:()=>t.reduce(Hp(!1))},Ab.default.createElement(ule,{onBack:()=>{t.reduce(Hp(!1),Df(void 0))}})),Ab.default.createElement(oo,{open:t.uploadingDocument!==void 0,transition:"up",onClose:()=>{t.reduce(Hp(!1),Df(void 0))}},Ab.default.createElement(ple,{onBack:()=>{t.reduce(Hp(!1),Df(void 0))}}))):null};var Rb=X(he());function BR(t,e,r={}){bo(t,{fetchingId:wt.timelineEntries(e),promise:ue.lnsClient.getTimelineEntries(e,r),doneReducer:o=>{var a;let i=(a=t.timelineEntries.byCourseId[e])!=null?a:[],s=o.entries.map(l=>l.id);return s.length>0&&(r.after||r.before?(i=Array.from(new Set(i.concat(s))),i.sort((l,c)=>l-c)):i=s.reverse()),()=>({timelineEntries:{byId:{$merge:nn(o.entries.map(l=>[l.id,l]))},byCourseId:{[e]:{$set:i}}}})}})}function r5(t){t.reduce(NP(!1),fu(!t.desktop))}var bn=X(he()),Ib=X(he()),mle=X(on());async function fle({store:t,sendTo:e,taskId:r,courseId:o}){$e(t.sendingDocument!=null,"sendingDocument must be set");let{card:i}=t.sendingDocument;t.reduce(r0(void 0),rV({id:r,sendTo:e,timestamp:new Date().toISOString()}));let s=oe.sendDocument,a=De.get().strings;try{await Sm(t,i)}catch(d){t.reduce(LP(r),Pe(s,{title:a.couldntSendCards,...Ht(d),okMessage:a.okay,onOk(){t.reduce(Pe(s,void 0))}}));return}let l={id:t.userInfo.user_id,name:Ut(t.userInfo)},c=await cC(i,l);ue.lnsClient.sendDocument({...c,sendTo:e,courseId:o}).then(()=>{t.reduce(LP(r),Pn({type:"normal",text:a.didSendCards}))}).catch(yt.handleError).catch(d=>{ge.error(d);let{message:u,unknownError:p}=Ht(d,{[403]:h=>{let f=h.asJson();return(f==null?void 0:f.error_code)===8?a.actionCannotBeCarriedOutOnClosedCourse:a.insufficientPermission}});t.reduce(LP(r),Pe(oe.sendDocument,{title:a.couldntSendCards,message:u,unknownError:p,okMessage:a.back,onOk:()=>t.reduce(Pe(oe.sendDocument,void 0))}))})}var RMe=Cc(),gle=({store:t,onClose:e})=>t.userInfo.is_teacher?bn.createElement(FMe,{store:t,onClose:e}):bn.createElement(MMe,{store:t,onClose:e}),FMe=({store:t,onClose:e})=>{let[r,o]=(0,Ib.useState)(!0),[i,s]=(0,Ib.useState)(!1),a=xn(or(t)),l=ble({store:t,courseId:a,onClose:e}),c=p=>{p.currentTarget===p.target&&e()},{isMobile:d}=t.screen,u=Te();return bn.createElement("div",{className:"sendDialog",onClick:c},r&&bn.createElement(bn.Fragment,null,bn.createElement(dr,{round:!0},bn.createElement(fr,null,bn.createElement(mr,null,bn.createElement(Mt,{onClick:e},u.cancel)),bn.createElement(kr,null,u.sendToDialogTitle),bn.createElement(wr,null))),bn.createElement("div",{className:"sendDialogBody"},bn.createElement("div",{className:"sendDialogCell",role:"button",onClick:()=>l("all")},bn.createElement(Fr,{width:100,height:100,src:"/img/ToAll.png",srcSet:"/img/ToAll.png 1x, /img/ToAll@2x.png 2x"}),bn.createElement("div",{className:"sendDialogCellTitle"},u.allMembers)),bn.createElement("div",{className:"sendDialogCell",role:"button",onClick:()=>{s(!0),o(!1)}},bn.createElement(Fr,{width:100,height:100,src:"/img/ToPersons.png",srcSet:"/img/ToPersons.png 1x, /img/ToPersons@2x.png 2x"}),bn.createElement("div",{className:"sendDialogCellTitle"},u.sendToIndividuals)))),bn.createElement(oo,{open:i,onClose:()=>{s(!1),e()},transition:d?"up":void 0,overlay:!1},bn.createElement(vle,{store:t,onSend:p=>l(p),onClose:()=>{s(!1),e()}})))},MMe=({store:t,onClose:e})=>{let r=xn(or(t)),o=ble({store:t,onClose:e,courseId:r}),i=a=>{a.currentTarget===a.target&&e()},{isMobile:s}=t.screen;return bn.createElement("div",{className:"sendDialog",onClick:i},bn.createElement(oo,{open:!0,onClose:e,transition:s?"up":void 0,container:"none"},bn.createElement(vle,{store:t,onSend:o,onClose:e})))},vle=({store:t,onClose:e,onSend:r})=>{let o=xn(or(t)),i=t.tunnelStates[o],s=t.userInfo.is_teacher,a=t.courseAttributes.byId[o],[l,c]=(0,Ib.useState)([]);(0,Ib.useEffect)(()=>{jl(t,o)},[]),(0,Ib.useEffect)(()=>{c([])},[i]);let d=v=>{let y=l.indexOf(v);if(y>-1){let S=[...l];S.splice(y,1),c(S)}else c([...l,v])},u=Te(),p=bn.useMemo(()=>{let{students:v,teachers:y,allIds:S}=tv({store:t,courseId:o,includeSelf:!1});return!s&&!i&&(v=[]),{students:v,teachers:y,allIds:S}},[t.users,i]),h=!t.screen.isMobile,f=l.length<=0?u.send:(0,mle.sprintf)(u.sendToMultiple,l.length),m=()=>{c(s||i?[...p.allIds]:p.teachers.map(v=>v.id))},g=()=>{c([])};return bn.createElement($r,{className:"sendUserPicker",round:h},bn.createElement(dr,null,bn.createElement(fr,null,bn.createElement(mr,null,bn.createElement(Mt,{onClick:e},u.cancel)),bn.createElement(kr,null,u.sendToDialogTitle),bn.createElement(wr,null,bn.createElement(Mt,{disabled:l.length===0,onClick:()=>r(l)},f))),a===void 0&&bn.createElement(ur,{absolute:"bottom"})),bn.createElement(mn,{style:{backgroundColor:"white"}},a!==void 0&&bn.createElement(r2,{onClickUser:d,selectedIds:l,sections:[[u.teacher,p.teachers],[u.student,p.students]]})),bn.createElement(LC,null,bn.createElement(n2,{onClickReleaseAll:g,onClickSelectAll:m,disableReleaseAll:l.length===0,disableSelectAll:l.length===p.students.length+p.teachers.length})))},ble=({store:t,courseId:e,onClose:r})=>async o=>{let i=De.get().strings;if(o==="all"&&!confirm(i.confirmSendToAll))return;let s=RMe();await fle({store:t,taskId:s,courseId:e,sendTo:o}),r()};var Jt=X(he()),Sl=X(he());var ES=X(on());var NMe=So(),yle=({store:t,courseId:e,onClose:r})=>{let o=Te(),i=t.fetchStates[wt.timelineEntries(e)],[s,a]=(0,Sl.useState)([]),[l,c]=(0,Sl.useState)(!1),d=(0,Sl.useRef)(null),u=(0,Sl.useRef)(null),p=(0,Sl.useRef)(t);p.current=t,(0,Sl.useEffect)(()=>{BR(t,e),zJ({store:p.current,courseId:e})},[]),(0,Sl.useEffect)(()=>{let v=()=>{var b;let C=u.current;C.scrollTop=C.scrollHeight-((b=d.current)!=null?b:0)},y=new MutationObserver(v),S=u.current;return y.observe(S,{attributes:!0,attributeFilter:["data-entry-count"]}),()=>y.disconnect()},[]),(0,Sl.useEffect)(()=>{if(i==="done"){let v=t.timelineEntries.byCourseId[e];if(v){let y=v.map(C=>t.timelineEntries.byId[C]);y.length-s.length<20&&d.current!=null&&c(!0),a(y);let S=t.timelineEntry;if(!l&&S&&!v.includes(S)){let C=Math.min(...v);BR(t,e,{before:C})}}}},[i]);let h=v=>()=>{t.reduce(ZN(v.id))},f=Cle(t,t.timelineEntry,o),m=v=>{if(l||i!=="done")return;let y=v.currentTarget;d.current=y.scrollHeight-y.scrollTop,NMe(()=>{var b;let S=(b=p.current.timelineEntries.byCourseId[e])!=null?b:[];if(S.length===0||y.scrollTop>0)return;let C=Math.min(...S);BR(t,e,{before:C})},500)},g=yf(t,e);return Jt.createElement(Jt.Fragment,null,Jt.createElement("div",{className:"timeline"},Jt.createElement($r,null,Jt.createElement(dr,null,Jt.createElement(fr,null,Jt.createElement(mr,null,Jt.createElement(Mt,{onClick:r},o.back)),Jt.createElement(kr,null,Jt.createElement(jc,null,g&&Jt.createElement($c,{enablePopover:!0},g),Jt.createElement(Wc,null,o.timelineTitle))),Jt.createElement(wr,null)),i==="fetching"&&Jt.createElement(ur,{absolute:"bottom"})),Jt.createElement("div",{ref:u,className:"navBody",onScroll:m,"data-entry-count":s.length},Jt.createElement("div",{className:"timelineBody"},s.map(v=>Jt.createElement(BMe,{store:t,key:v.id,entry:v,onClick:h(v),userId:t.userInfo.user_id})),t.sendingTasks.sort((v,y)=>v.timestamp.localeCompare(y.timestamp)).map(v=>Jt.createElement(LMe,{key:v.id,store:t,task:v})))))),t.timelineEntry&&f&&Jt.createElement(PR,{store:t,document:f,onClose:()=>t.reduce(ZN(void 0))}))},BMe=({store:t,entry:e,userId:r,onClick:o})=>{let i=Te(),s=Cle(t,e.id,i);if(e.type==="assignment"){let a=e.assignment,l=a.expiry&&new Date<=new Date(a.expiry);return Jt.createElement(LR,{isMyEntry:a.author.id===r,timestamp:e.timestamp,displayName:a.author.display_name},Jt.createElement("div",{className:"timelineEntryMessage"},a.message),Jt.createElement("div",{className:"timelineEntryDesc"},Jt.createElement(Fr,{className:"timelineEntryDescIcon",src:l?"/svg/clock_red.svg":"/svg/clock.svg",width:12,height:12}),(()=>a.expiry===null?i.noExpiry:l?Jt.createElement("span",null,i.deadlineDate," : ",new As(a.expiry).toTimelineDate()):Jt.createElement("span",null,i.hasExpired," : ",new As(a.expiry).toTimelineDate()))()))}else if(e.type==="submission"){let a=e.submission,l=c=>{c.dataTransfer.clearData(),c.dataTransfer.setData(No.FileDocument,JSON.stringify(s)),c.dataTransfer.effectAllowed="copy"};return Jt.createElement(LR,{isMyEntry:a.author.id===r,timestamp:e.timestamp,displayName:a.author.display_name},Jt.createElement("div",{className:"timelineEntryDesc"},a.submission_message),Jt.createElement(n5,{onClick:o},Jt.createElement(Jc,{id:a.document.id,index:0,comment_snapshot_id:a.comment_snapshot_id,onDragStart:t.desktop?l:void 0,skipForKnown404Url:!0})),Jt.createElement("div",{className:"timelineEntryDesc"},Jt.createElement(Fr,{className:"timelineEntryDescIcon",src:r===a.author.id?"/svg/pencil_orange.svg":"/svg/pencil_blue.svg",width:12,height:12}),i.submit))}else if(e.type==="share"){let a=e.share,l=c=>{c.dataTransfer.clearData(),c.dataTransfer.setData(No.FileDocument,JSON.stringify(s)),c.dataTransfer.effectAllowed="copy"};return Jt.createElement(LR,{isMyEntry:a.author.id===r,timestamp:e.timestamp,displayName:a.author.display_name},Jt.createElement(n5,{onClick:o},Jt.createElement(Jc,{id:a.document.id,index:0,onDragStart:t.desktop?l:void 0,skipForKnown404Url:!0})),Jt.createElement("div",{className:"timelineEntryDesc"},Jt.createElement(Fr,{className:"timelineEntryDescIcon",src:r===a.author.id?"/svg/user_orange.svg":"/svg/user.svg",width:12,height:12}),Jt.createElement("div",null,Jt.createElement(Sle,{store:t,authorId:a.author.id,shared_with:a.shared_with}))))}else if(e.reply){let a=e.reply,l=a.replied_document,c=l.author.display_name;l.author.id!==r&&a.hide_author&&(c=i.anonymous);let d=u=>{u.dataTransfer.clearData(),u.dataTransfer.setData(No.FileDocument,JSON.stringify(s)),u.dataTransfer.effectAllowed="copy"};return Jt.createElement(LR,{isMyEntry:a.author.id===r,timestamp:e.timestamp,displayName:a.author.display_name},Jt.createElement("div",{className:"timelineEntryDesc"},a.submission_message),Jt.createElement(n5,{onClick:o},Jt.createElement(Jc,{id:l.document.id,index:0,comment_snapshot_id:a.comment_snapshot_id,onDragStart:t.desktop?d:void 0,skipForKnown404Url:!0})),Jt.createElement("div",{className:"timelineEntryDesc"},c," / ",i.sendBack))}return null},Cle=(t,e,r)=>{if(!e)return;let o=t.timelineEntries.byId[e];if(!!o){if(o.share){let i=o.share,s=(0,ES.sprintf)(r.sharedBy,i.author.display_name);return{id:i.document.id,name:s,timestamp:o.timestamp,author_id:i.author.id,extension:i.document.extension,asset_proxy:null}}else if(o.submission){let i=o.submission,s=(0,ES.sprintf)(r.submittedBy,i.author.display_name);return{id:i.document.id,name:s,timestamp:o.timestamp,extension:i.document.extension,author_id:i.author.id,asset_proxy:null,comment_snapshot_id:i.comment_snapshot_id}}else if(o.reply){let i=o.reply,s=(0,ES.sprintf)(r.sentBackBy,i.author.display_name);return{id:i.replied_document.document.id,name:s,timestamp:o.timestamp,extension:i.replied_document.document.extension,author_id:i.hide_author?void 0:i.author.id,asset_proxy:null,comment_snapshot_id:i.comment_snapshot_id}}}},Sle=({store:t,authorId:e,shared_with:r})=>{let o=Te(),[i,s]=(0,Sl.useState)(!1),a="";if(r==="all")return Jt.createElement("span",null,o.allMembers);let l=r.filter(h=>h!==e),c=t.users.byId[l[0]];if(c?a=Ut(c):a=o.unknownUser,l.length===1)return Jt.createElement("span",null,a);let d=De.get().pluralSafeSuffix(l.length-1),u=(0,ES.sprintf)(o.andOtherMembers,l.length-1,d),p=l.slice(1,l.length).map(h=>t.users.byId[h]).map(h=>h?Ut(h):o.unknownUser);return Jt.createElement("span",null,Jt.createElement("span",null,`${a}, `),Jt.createElement("span",{onClick:()=>s(!i),role:"button",style:{textDecoration:"underline"}},u,Jt.createElement(jt,{anchor:"topCenter",arrowColor:"#323232",open:i,onClose:()=>s(!1)},Jt.createElement("div",{className:"timelineSendToPopover"},p.map((h,f)=>Jt.createElement("div",{key:f},h))))))},n5=({children:t,...e})=>Jt.createElement("div",{className:"timelineEntryThumb",role:"button",...e},t),LR=({children:t,timestamp:e,displayName:r,isMyEntry:o})=>Jt.createElement("div",{className:"timelineEntry","data-my-entry":o},Jt.createElement("div",{className:"timelineEntryInner"},Jt.createElement("div",{className:"timelineDisplayName"},r),Jt.createElement(OMe,null,t),Jt.createElement("div",{className:"timelineDate"},new As(e).toTimelineDate()))),LMe=({store:t,task:e})=>{let[r,o]=(0,Sl.useState)(1);(0,Sl.useEffect)(()=>{setTimeout(()=>{let l=r+1;l===4&&(l=1),o(l)},500)},[r]);let i=Array.from({length:r}).map(()=>".").join(""),s=Te(),a=(0,ES.sprintf)(s.nowSharingIndicator,"",i);return Jt.createElement("div",{className:"timelineEntry"},Jt.createElement("div",{className:"timelineEntryInner","data-my-entry":"true"},Jt.createElement("div",{className:"timelineSendingIndicator"},Jt.createElement(Sle,{store:t,authorId:t.userInfo.user_id,shared_with:e.sendTo}),a)))},OMe=({children:t})=>Jt.createElement("div",{className:"timelineBalloon"},Jt.createElement("div",{className:"timelineBalloonArrow"}),Jt.createElement("div",{className:"timelineBalloonContent"},t));var xle=()=>{let t=qe(),{desktop:e,timelineOpen:r}=t,o=or(t),i=()=>{t.reduce(r0(void 0))};return Rb.default.createElement(Rb.default.Fragment,null,e&&un(e.courseId)&&Rb.default.createElement(Vr,{className:"centralizedModalWrapper",open:t.sendingDocument!==void 0,overlay:!0,onClose:i},Rb.default.createElement(gle,{store:t,onClose:i})),un(o)&&Rb.default.createElement(Vr,{open:r,onClose:()=>r5(t),overlay:!0,container:"none"},Rb.default.createElement(yle,{store:t,courseId:o,onClose:()=>r5(t)})))};var wle=Qn.createContext();function qe(){return(0,OR.useContext)(wle)}var Tle=({store:t,localizedStrings:e})=>Qn.createElement(wle.Provider,{value:t},Qn.createElement(D7,{value:e},Qn.createElement(zMe,{store:t}))),zMe=({store:t})=>!t.isSsoUser&&t.userInfo.password_change_required?Qn.createElement(Qn.Fragment,null,Qn.createElement(Ese,null),Qn.createElement("div",{id:YI},(0,OR.useContext)(XI)),Qn.createElement(d8,null)):Qn.createElement(Hne,{store:t},Qn.createElement(WZ,null),Qn.createElement(Oie,null),Qn.createElement(wse,null),Qn.createElement(Ose,null),Qn.createElement(Gae,null),Qn.createElement(hle,null),Qn.createElement(xle,null),Qn.createElement(Mae,null),Qn.createElement(Pae,null),Qn.createElement("div",{id:YI},(0,OR.useContext)(XI)),Qn.createElement(oae,null),Qn.createElement(Iae,null),Qn.createElement(Uie,null),Qn.createElement(Qie,null),Qn.createElement(Roe,null),Qn.createElement(Bae,null),Qn.createElement(Zie,null),Qn.createElement(ese,null),Qn.createElement(d8,null),Qn.createElement(rse,null));var kle=Dm(),Ple=({initialState:t})=>{let[e,r]=(0,Gh.useState)(()=>{delete t.pushState;let l=[YN({width:window.innerWidth,height:window.innerHeight,keyboardHeight:0,dpr:window.devicePixelRatio}),OP(T9(t))],c;(document.referrer===jk||sessionStorage.getItem(jk)==="true")&&(sessionStorage.setItem(jk,"true"),c=gd(location.pathname),l.push(lV(!0)));let d=IN(t,...l),u=k9(d);return u.subscribe(p=>r(p)),window.history.replaceState(Ry(u),document.title,c),u});(0,Gh.useEffect)(()=>{e.setHanged(e.sessionExpired)},[e.sessionExpired]);let o=S7(t.locale);kle.locale()!==o&&kle.locale(o),De.get().setLocale(t.locale);let i=De.get().strings,s=()=>{document.documentElement.style.setProperty("--vh",`${I7(1)}px`)},a=(0,Gh.useRef)(e);return es(()=>{s()}),(0,Gh.useEffect)(()=>{ue.pushClient.delegate=l=>{e.reduce(G9(l))}},[ue.pushClient]),(0,Gh.useEffect)(()=>{a.current=e},[e]),(0,Gh.useEffect)(()=>{let l=w=>{let{noteStates:k,assetUploadStates:T,assetThumbnailUploadStates:A,sessionExpired:E}=a.current,F=Object.values(k).filter(V=>V.saveState!=="done"),z=Object.values(T).filter(V=>V.content!==void 0||V.drawn!==void 0||V.narration!==void 0),L=Object.values(A).filter(V=>V.content!==void 0||V.drawn!==void 0),R=E,N=F.length+z.length+L.length;!R&&N>0&&(w.preventDefault(),w.returnValue=i.confirmReloadWhileUnsavedChangesExist)},c=()=>{a.current.pageVisible&&ue.lnsClient.notifyEnterBackground()},d=So(),u=()=>{let w=document.visibilityState==="visible";a.current.pageVisible!==w&&TJ(a.current,w)},p=()=>{d(u,500)},h=w=>{yt.catchError(w)||e.reduce(sP(w))},f=w=>{w.promise.catch(h)},m=w=>{w.error&&h(w.error)},g=So(),v=()=>{e.reduce(W9(document.hasFocus()))},y=()=>{g(v,500)},S=(w,k)=>{s(),e.reduce(YN({width:w.width,height:w.height,keyboardHeight:k,dpr:window.devicePixelRatio}))},C=()=>{M2(),e.reduce(pw(void 0))},b=()=>{Uoe()&&e.reduce(pw("ready"))},x=new KU(S);return window.addEventListener("error",m),window.addEventListener("unhandledrejection",f),window.addEventListener("beforeunload",l),window.addEventListener("unload",c),document.addEventListener("visibilitychange",p),window.addEventListener("focus",y),window.addEventListener("blur",y),window.addEventListener("webcardcreate",C),window.addEventListener("webcardExtensionInstalled",b),()=>{window.removeEventListener("error",m),window.removeEventListener("unhandledrejection",f),window.removeEventListener("beforeunload",l),window.removeEventListener("unload",c),document.removeEventListener("visibilitychange",p),window.removeEventListener("focus",y),window.removeEventListener("blur",y),window.removeEventListener("webcardcreate",C),window.removeEventListener("webcardExtensionInstalled",b),x.close()}},[]),Dle.createElement(Tle,{store:e,localizedStrings:i})};var sYt=X(Ele()),aYt=X(_le()),lYt=X(Ale());var d5=class{constructor(e){this.options=e}async send(e){let{endpoint:r,authToken:o}=this.options,i=new Vl({method:e.method,url:r+e.url,body:e.body,signal:e.signal});if(o&&i.addParam("auth_token",o),e.headers)for(let[s,a]of e.headers)i.headers.append(s,a);return Vu(i,{enableLog:this.options.enableDebug,noCache:e.noCache,responseType:e.responseType,keepalive:e.keepalive})}async getCourse(e){return this.send({method:"GET",url:`/api/courses/${e}`,responseType:"json"})}async linkCourse(e){let r=new URLSearchParams;return r.set("subject_id",e.subject_id+""),r.set("user_group_id",e.user_group_id+""),this.send({method:"POST",url:"/api/courses",body:r,responseType:"json"})}async createCourse(e){let r=new URLSearchParams;return r.set("subject_name",e.subject_name),r.set("user_group_id",e.user_group_id+""),this.send({method:"POST",url:"/api/courses",body:r,responseType:"json"})}async attendCourse(e){if(!e)throw new Error(`invalid course_id: ${e}`);return this.send({method:"POST",url:`/api/courses/${e}/attend`,responseType:"json"})}async leaveCourse(){return this.send({method:"POST",url:"/api/courses/0/attend",responseType:"json"})}async deleteCourse(e){return this.send({method:"DELETE",url:`/api/courses/${e}`,responseType:"json"})}async getCourses(e){return e?this.coursesTeacher():this.courseStudent()}async getClosedYears(e){let r=new URLSearchParams;return e.user&&r.append("target[]","user"),e.school&&r.append("target[]","school"),this.send({method:"GET",url:`/api/courses/closed?${r.toString()}`,responseType:"json"})}async getClosedCourses({year:e,target:r}){let o=new URLSearchParams;return r.user&&o.append("target[]","user"),r.school&&o.append("target[]","school"),await this.send({method:"GET",url:`/api/courses/closed/${e}?${o.toString()}`,responseType:"json"})}async courseStudent(){let e=await this.send({method:"GET",url:"/api/courses/student",responseType:"json"});return bP(e)}async coursesTeacher(){let e=await this.send({method:"GET",url:"/api/courses/teacher",responseType:"json"}),r=UN(e);return bP(r)}async coursesArchiveTeacher(){return this.send({method:"GET",url:"/api/courses/archive/teacher",responseType:"json"})}async getAllCourses(){let e=await this.send({method:"GET",url:"/api/courses/school",responseType:"json"});return bP(UN(e))}async coursesArchiveSchool(){return this.send({method:"GET",url:"/api/courses/archive/school",responseType:"json"})}async getCourseUserStatues(e){return this.send({method:"GET",url:`/api/courses/${e}/user_status`,responseType:"json"})}async getCourseTeacherStatues(e){return this.send({method:"GET",url:`/api/courses/${e}/teacher_status`,responseType:"json"})}async getCourseTemporaryTeachers(e){return this.send({method:"GET",url:`/api/courses/${e}/temporary_teachers`,responseType:"json"})}async getCourseAndNote(e,r){let{course:o,note:i}=await this.send({method:"GET",url:`/api/courses/${e}/notes/${r}`,responseType:"json"});return e==="self-study"?{note:i}:{course:o,note:i}}async sendDocument(e){let r=new FormData;return e.sendTo==="all"?r.set("send_to","all"):r.set("send_to",JSON.stringify(e.sendTo)),u5(r,e),this.send({method:"POST",url:`/api/courses/${e.courseId}/share`,body:r,responseType:"json"})}async getNotes(e){return this.send({method:"GET",url:`/api/courses/${e}/notes`,responseType:"json"})}async getMixedNotes(e){return this.send({method:"GET",url:`/api/courses/${e}/mixed_notes`,responseType:"json"})}async getSelfStudyNotes(){return this.send({method:"GET",url:"/api/notes/free",responseType:"json"})}async downloadNote(e,r){return this.send({method:"GET",url:`/api/notes/${e}`,noCache:!0,responseType:"arrayBuffer",signal:r})}async getNoteHeader(e){return this.send({method:"HEAD",url:`/api/notes/${e}`,responseType:"headers"}).then(r=>{let o=r.get("loilo-note-version"),i=r.get("loilo-note-author"),s=r.get("loilo-note-last-device");if(!!o)return{version:parseInt(o),author_id:i?parseInt(i):void 0,device_id:s!=null?s:void 0}})}async deleteNote(e){return this.send({method:"DELETE",url:`/api/notes/${e}`,responseType:"json"})}async renameNote({noteId:e,noteName:r}){let o=new FormData;return o.set("id",e+""),o.set("name",r),this.send({method:"POST",url:`/api/notes/${e}/rename`,responseType:"json",body:o})}async copyNotes(e){let r=new FormData;return r.set("note_ids",JSON.stringify(e.noteIds)),e.destCourseId==="self-study"?r.set("destination_course_id","0"):r.set("destination_course_id",e.destCourseId+""),e.suffix&&r.set("name_suffix",e.suffix),this.send({method:"POST",url:"/api/notes/multi_copy",body:r,responseType:"json"})}async createNote({courseId:e,name:r,note:o,version:i,header:s}){let a=new FormData,l=await s1({note:o,version:i,header:s});return a.set("name",r),e!=="self-study"&&a.set("course_id",`${e}`),a.set("version",`${i}`),a.set("data",new Blob([l])),this.send({method:"POST",url:"/api/notes/upload",body:a,responseType:"json"})}async uploadNote({noteId:e,courseId:r,version:o,note:i,assets:s,header:a}){if(typeof e!="number")throw new Error("noteId is not number:"+e);let l=new FormData,c=await s1({note:i,version:o,header:a});l.set("id",`${e}`),r!=="self-study"&&l.set("course_id",`${r}`),l.set("version",`${o}`),l.set("data",new File([c],"note.lnnote",{type:"application/zip"})),l.set("assets",JSON.stringify(s));try{return await this.send({url:"/api/notes/upload",method:"POST",body:l,responseType:"json"})}catch(d){if(d instanceof Yr&&d.status===400){ge.log(d.message,e,r,o);let u=JSON.parse(d.message);return new Ag({resp:u,note:i,noteId:e,courseId:r})}throw d}}async makeNoteShared(e,r){await this.send({method:"POST",url:`/api/notes/${e}/make_shared`,body:new Ui({protocol_version:r}),responseType:"json"})}async makeNoteStandard(e){return this.send({method:"POST",url:`/api/notes/${e}/make_standard`,body:new Ui({}),responseType:"json"})}async importNote({courseId:e,file:r,signal:o}){let i=new FormData;return e!=="self-study"&&i.set("course_id",e+""),i.set("file",r),this.send({method:"POST",url:"/api/notes/import",body:i,responseType:"json",signal:o})}async exportNote({noteId:e,assetUUIDs:r,signal:o}){let i=new URLSearchParams;return i.set("assets",JSON.stringify(r)),this.send({method:"POST",url:`/api/notes/${e}/export`,responseType:"blob",body:i,signal:o})}async listNoteMembers(e){return this.send({method:"GET",url:`/api/notes/${e}/members`,responseType:"json"})}async addNoteMember(e,r){await this.send({method:"POST",url:`/api/notes/${e}/members/add`,body:new Ui({user_id:r}),responseType:"json"})}async deleteNoteMember(e,r){await this.send({method:"POST",url:`/api/notes/${e}/members/delete`,body:new Ui({user_id:r}),responseType:"json"})}async leaveNoteMember(e){await this.send({method:"POST",url:`/api/notes/${e}/members/leave`,responseType:"json"})}async createNoteSnapshot({noteId:e,commandRevision:r,protocolVersion:o,noteFile:i}){let s=new FormData;s.set("protocol_version",o),s.set("revision",r),s.set("file",i);try{await this.send({method:"POST",url:`/api/notes/${e}/snapshot`,body:s,responseType:"json"})}catch(a){if(a instanceof Yr&&a.status===400){let l=a.asJson();if(l)return l}throw a}}downloadSnapshot({noteId:e,protocolVersion:r}){return this.send({method:"GET",url:`/api/notes/${e}/snapshot?protocol_version=${r}`,responseType:"arrayBuffer"})}async downloadAsset(e){return this.send({method:"GET",url:`/api/assets/${e}`,responseType:"blob"})}async getAssetInfo(e){return this.send({method:"GET",url:`/api/assets/${e}/info`,responseType:"json"})}async getAssetMetadataAll(e){return this.send({url:`/api/assets/${e}/metadata`,method:"GET",responseType:"json"})}async getAssetMetadata(e,r=0){return this.send({url:`/api/assets/${e}/metadata/${r}`,method:"GET",responseType:"json"})}async uploadAssetV2({file:e,metadata:r,extWithDot:o,signal:i}){let s=new URLSearchParams;return s.set("page_count",r.length+""),s.set("extension",o),s.set("metadata",JSON.stringify(r)),await this.send({method:"POST",url:`/api/assets/upload/v2?${s.toString()}`,responseType:"json",headers:new Headers({"content-type":e.type}),body:e,signal:i})}async uploadAssetThumbnails({uuid:e,index:r,small:o,medium:i,signal:s}){let a=new FormData;a.set("uuid",e),a.set("index",r+""),a.set("small",o),a.set("medium",i),await this.send({method:"POST",url:"/api/assets/thumbnails",responseType:"json",body:a,signal:s})}async getCoursesAttributes(e){return this.send({method:"GET",url:`/api/courses/attributes?ids=${e}`,responseType:"json"})}async lockScreen(e,r){let o=r?`?duration=${r}`:"";return this.send({method:"POST",url:`/api/courses/${e}/lock_screen${o}`,responseType:"json"})}async unlockScreen(e){return this.send({method:"POST",url:`/api/courses/${e}/unlock_screen`,responseType:"json"})}async getScreenSharingState(e){try{return await this.send({method:"GET",url:`/api/courses/${e}/screen_sharing`,responseType:"json"})}catch(r){if(r instanceof Yr&&r.status===404)return;throw r}}async updateScreenSharing(e,r,o){return this.send({method:"PATCH",url:`/api/courses/${e}/screen_sharing/${r}`,body:new Ui(o),responseType:"json"})}async updateScreenSharingReadyStatus(e,r,o){let i=new URLSearchParams,s=o?"1":"0";return i.set("state",s),this.send({method:"POST",url:`/api/courses/${e}/screen_sharing/${r}/ready`,body:i,responseType:"json"})}async getScreenSharingReadyStatus(e,r){return this.send({method:"GET",url:`/api/courses/${e}/screen_sharing/${r}/ready`,responseType:"json"})}async uploadDocumentForScreenSharing(e){let r=new FormData;return u5(r,e,!1),this.send({method:"POST",url:`/api/courses/${e.courseId}/screen_sharing/documents`,body:r,responseType:"json"})}async startScreenSharing(e){return this.send({method:"POST",url:`/api/courses/${e.courseId}/screen_sharing`,body:new Ui(e.command),responseType:"json"})}async stopScreenSharing(e,r){return this.send({method:"DELETE",url:`/api/courses/${e}/screen_sharing/${r}`,responseType:"json"})}async keepScreenSharingAlive(e,r,o){let i=new URLSearchParams([["expiration",o+""]]);return this.send({method:"POST",url:`/api/courses/${e}/screen_sharing/${r}/keepalive`,body:i,responseType:"json"})}async enableTunnel(e,r){let o=new URLSearchParams([["enabled",r+""]]);return this.send({method:"POST",url:`/api/courses/${e}/tunnel_enabled`,body:o,responseType:"json"})}async getUser(e){return this.send({method:"GET",url:`/api/users/${e}`,responseType:"json"})}async getUserGroups(){return this.send({method:"GET",url:"/api/user_groups",responseType:"json"})}async getUserGroupAttendances(e){return this.send({method:"GET",url:`/api/user_groups/${e}`,responseType:"json"})}async getUserGroupCode(e){return(await this.send({method:"GET",url:`/api/user_groups/${e}/code`,responseType:"json"})).code}async createUserGroup(e){let r=new URLSearchParams;return r.set("name",e),this.send({method:"POST",url:"/api/user_groups",body:r,responseType:"json"})}joinUserGroup(e){return this.send({method:"POST",url:`/api/user_groups/${e}/join`,responseType:"json"})}async getUserGroupInfoByCode(e){return this.send({method:"GET",url:`/api/user_groups/by_code/${e}`,responseType:"json"})}async deleteUserGroup(e){return this.send({method:"DELETE",url:`/api/user_groups/${e}`,responseType:"json"})}getSubjects(){return this.send({method:"GET",url:"/api/subjects",responseType:"json"})}async joinSubject(e){return this.send({method:"POST",url:`/api/subjects/${e}/join`,responseType:"json"})}async leaveSubject(e){return this.send({method:"POST",url:`/api/subjects/${e}/leave`,responseType:"json"})}async getDocumentGroupsContents(e,r){return this.send({method:"GET",url:`/api/document_groups/${e}/contents`,signal:r,responseType:"json"})}async deleteDocuments(e){let r=new URLSearchParams;return r.set("document_ids",JSON.stringify(e)),this.send({method:"POST",url:"/api/documents/delete",body:r,responseType:"json"})}async deleteDocumentGroups(e){let r=new URLSearchParams;return r.set("document_group_ids",JSON.stringify(e)),this.send({method:"POST",url:"/api/document_groups/delete",body:r,responseType:"json"})}async renameDocument(e,r){let o=new URLSearchParams;return o.set("name",r),this.send({method:"POST",url:`/api/documents/${e}/rename`,body:o,responseType:"json"})}async renameDocumentGroup(e,r){let o=new URLSearchParams;return o.set("name",r),this.send({method:"POST",url:`/api/document_groups/${e}/rename`,body:o,responseType:"json"})}async createSubDocumentGroup(e,r,o){let i=new URLSearchParams;return i.set("name",r),this.send({method:"POST",url:`/api/document_groups/${e}/new_subfolder`,body:i,signal:o,responseType:"json"})}async copyDocuments(e,r){let o=new URLSearchParams;return o.set("document_ids",JSON.stringify(e)),o.set("destination",r+""),this.send({method:"POST",url:"/api/documents/copy",body:o,responseType:"json"})}async copyDocumentGroups(e,r){let o=new URLSearchParams;return o.set("document_group_ids",JSON.stringify(e)),o.set("destination",r+""),this.send({method:"POST",url:"/api/document_groups/copy",body:o,responseType:"json"})}async moveDocuments(e,r){let o=new URLSearchParams;return o.set("document_ids",JSON.stringify(e)),o.set("destination",r+""),this.send({method:"POST",url:"/api/documents/move",body:o,responseType:"json"})}async moveDocumentGroups(e,r){let o=new URLSearchParams;return o.set("document_group_ids",JSON.stringify(e)),o.set("destination",r+""),this.send({method:"POST",url:"/api/document_groups/move",body:o,responseType:"json"})}async importDocument({groupId:e,file:r,signal:o}){let i=new FormData;return i.set("group_id",e+""),i.set("file",r),this.send({method:"POST",url:"/api/documents/import",body:i,signal:o,responseType:"json"})}async exportDocument(e,r,o){let i=new URLSearchParams;return r!==void 0&&r.length>0&&i.set("assets",JSON.stringify(r)),this.send({method:"POST",url:`/api/documents/${e}/export`,body:i,signal:o,responseType:"arrayBuffer"})}async getTimelineEntries(e,r={}){let{count:o,before:i,after:s}=r,a=[];return o&&a.push("count="+o),i&&a.push("before="+i),s&&a.push("after="+s),this.send({method:"GET",url:`/api/courses/${e}/timeline_entries?${a.join("&")}`,responseType:"json"})}async getTimelineEntryUnreadCount(e){let{count:r}=await this.send({method:"GET",url:`/api/courses/${e}/timeline_entries/unread_count`,responseType:"json"});return r}async downloadDocument(e,r){return this.send({method:"GET",url:`/api/documents/${e}`,signal:r,responseType:"arrayBuffer"})}async getDocumentLayer({type:e,documentId:r,afterGeneration:o,index:i}){let s=e==="annotation"?`/api/documents/${r}/annotation_layers/${i}`:`/api/documents/${r}/extension_layers/${i}`;s+=`?after_generation=${o}`;try{let{contents:a,...l}=await this.send({method:"GET",url:s,responseType:"json"});return[{...l},y_(a)]}catch(a){if(a instanceof Yr&&a.status===404)return;throw a}}async getDocumentLayerSnapshot({type:e,documentId:r,index:o,snapshotId:i}){let s=e==="annotation"?`/api/documents/${r}/annotation_layers/snapshots/${i}`:`/api/documents/${r}/extension_layers/snapshots/${i}`;typeof o=="number"&&(s+=`/${o}`);try{let a=await this.send({method:"GET",url:s,responseType:"json"});if(a===null)return;let{contents:l,...c}=a;return[{...c},y_(l)]}catch(a){if(a instanceof Yr&&a.status===404)return;throw a}}async downloadDocumentAnnotationThumbnail(e,r,o){return this.send({url:`/api/documents/${e}/annotation_layers/thumbnail/${r}/${o}`,responseType:"arrayBuffer",method:"GET"})}async downloadDocumentExtensionThumbnail(e,r,o){return this.send({url:`/api/documents/${e}/extension_layers/thumbnail/${r}/${o}`,responseType:"arrayBuffer",method:"GET"})}async updateDocumentAnnotation({documentId:e,index:r,document_comment:o}){return this.send({method:"PATCH",url:`/api/documents/${e}/annotation_layers/${r}`,body:new Ui({document_comment:o}),responseType:"json"})}async updateDocumentExtension({documentId:e,index:r,document_comment:o,screen_sharing_keepalive:i}){return this.send({method:"PATCH",url:`/api/documents/${e}/extension_layers/${r}`,body:new Ui({document_comment:o,screen_sharing_keepalive:i}),responseType:"json"})}async uploadDocumentThumbnail({documentId:e,index:r,generation:o,data:i}){let s=new FormData;return s.set("generation",o+""),s.set("data",i),this.send({method:"POST",url:`/api/documents/${e}/thumbnail/${r}`,body:s,responseType:"json"})}async uploadDocumentAnnotationThumbnail({documentId:e,index:r,generation:o,data:i}){let s=new FormData;return o!==void 0&&s.set("generation",o+""),s.set("data",i),this.send({method:"POST",url:`/api/documents/${e}/annotation_layers/thumbnail/${r}`,body:s,responseType:"json"})}async replyToDocument({documentId:e,to:r,thumbs:o,pageCount:i}){let s=new FormData;if(r&&s.set("to",`${r}`),o){$e(o.length===i,"thumb.length must be pageCount");let a=[],l=[];for(let c=0;c<i;c++){let d=o[c];(d==null?void 0:d.document)?a.push(`thumbnail_${c}`):a.push(null),(d==null?void 0:d.annotation)?l.push(`annotation_thumbnail_${c}`):l.push(null)}s.set("thumbnail_index",JSON.stringify(a)),s.set("annotation_thumbnail_index",JSON.stringify(l));for(let c=0;c<i;c++){let d=o[c];(d==null?void 0:d.document)&&s.set(`thumbnail_${c}`,d.document),(d==null?void 0:d.annotation)&&s.set(`annotation_thumbnail_${c}`,d.annotation)}}try{return await this.send({method:"POST",url:`/api/documents/${e}/response`,body:s,responseType:"json"}),"ok"}catch(a){if(a instanceof Yr&&a.status===202){let l=a.asJson();if(l)return l}throw a}}async getSubmissions(e,r,o){let i=new URLSearchParams;r&&i.set("count",r+""),o&&i.set("before",o+"");let s=this.getUrlQuery(i);return this.send({method:"GET",url:`/api/courses/${e}/submissions${s}`,responseType:"json"})}getUrlQuery(e){let r=e.toString();return r?"?"+r:""}async getSubmissionInfo(e,r){return this.send({method:"GET",url:`/api/courses/${e}/submissions/${r}/info`,responseType:"json"})}async getSubmissionIsSubmitted(e,r){return(await this.send({method:"GET",url:`/api/courses/${e}/submissions/${r}/submitted`,responseType:"json"})).result}async getSubmissionAnswers(e,r,o){let i=o.withTeacher?"?with_teacher=true":"";return this.send({method:"GET",url:`/api/courses/${e}/submissions/${r}${i}`,responseType:"json"})}async getDetailedSubmissionAnswers(e,r,o){let i=o.withTeacher?"?with_teacher=true":"";return this.send({method:"GET",url:`/api/courses/${e}/submissions/${r}/detail${i}`,responseType:"json"})}async getSubmissionAnswersV2({courseId:e,submissionNumber:r,withTeacher:o,limit:i,afterAuthorId:s}){let a=new URLSearchParams;return i!=null&&a.set("limit",i+""),o!=null&&a.set("with_teacher",o+""),s!=null&&a.set("after_author_id",s+""),this.send({method:"GET",url:`/api/courses/${e}/submissions/${r}/documents?${a.toString()}`,responseType:"json"})}async submitDocumentV2(e){let r=new FormData;return r.set("data",e.data),r.set("thumbnails",JSON.stringify(e.thumbnails)),r.set("annotation_thumbnails",JSON.stringify(e.annotation_thumbnails)),this.send({method:"POST",url:`/api/courses/${e.courseId}/submissions/${e.submission_number}/v2`,body:r,responseType:"json"})}async createSubmission(e,r={}){return this.updateSubmissionInternal({courseId:e,...r})}async updateSubmission(e,r,o){return this.updateSubmissionInternal({courseId:e,submissionId:r,...o})}async updateSubmissionInternal(e){let r=new URLSearchParams;return e.submission_message!==void 0&&r.set("submission_message",e.submission_message),e.expiry!==void 0&&r.set("expiry",e.expiry),e.hide_author!==void 0&&r.set("hide_author",e.hide_author+""),e.reveal_answer!==void 0&&r.set("reveal_answer",e.reveal_answer+""),e.submissionId?(await this.send({method:"PATCH",url:`/api/courses/${e.courseId}/submissions/${e.submissionId}`,body:r,responseType:"json"}),{submission_number:e.submissionId}):this.send({method:"POST",url:`/api/courses/${e.courseId}/submissions`,body:r,responseType:"json"})}async deleteSubmission(e,r){return this.send({method:"DELETE",url:`/api/courses/${e}/submissions/${r}`,responseType:"json"})}async getSubmissionMessage(e){let r=new URLSearchParams;return r.set("course_ids",JSON.stringify(e)),this.send({method:"GET",url:`/api/submission_messages/active?${r.toString()}`,responseType:"json"})}async notifyEnterBackground(){return this.send({method:"GET",url:"/api/status/enter_background",responseType:"json",keepalive:!0})}async uploadDocumentAsMaterial(e){let r=new FormData;return r.set("group_id",e.docGroupId+""),r.set("name",e.name),u5(r,e),this.send({method:"POST",url:"/api/documents/as_material",body:r,responseType:"json"})}async uploadDocumentMaterialWithAsset({name:e,groupId:r,asset:o,signal:i}){let s=new URLSearchParams;return s.set("group_id",String(r)),s.set("asset",o),s.set("name",e),this.send({method:"POST",url:"/api/documents/assets",body:s,responseType:"json",signal:i})}async authenticateAppToken(e){let r=new URLSearchParams;return r.set("app_id",e+""),this.send({method:"POST",url:"/api/apps/authenticate",body:r,responseType:"json"})}async checkWebSiteIsViewable(e,r){let o=new URLSearchParams([["url",r]]);return typeof e=="number"&&o.set("course_id",""+e),this.send({method:"GET",url:`/api/web_filtering/can_view?${o.toString()}`,responseType:"json"})}async getUnreadMobilePushes(e){let r=e!==void 0?`?course_id=${e}`:"";return this.send({method:"GET",url:`/api/mobile_push${r}`,responseType:"json"})}async readMobilePushes(e){let r=new URLSearchParams;return r.set("selection",JSON.stringify(e)),this.send({method:"DELETE",url:`/api/mobile_push/selected?${r.toString()}`,responseType:"json"})}async registerMobilePush(e){let{token:r,releaseStage:o,lang:i}=e,s=new URLSearchParams;return s.set("token",r),s.set("platform","web"),s.set("attributes",JSON.stringify({environment:o})),s.set("lang",i),s.set("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone),this.send({method:"POST",url:"/api/mobile_push/device",body:s,responseType:"json"})}async changePassword({currentPassword:e,newPassword:r,newPasswordConfirm:o,language:i}){let s=new Ui({old_password:e,new_password:r,new_password_confirmation:o,language:i});return this.send({method:"POST",url:"/api/users/password",body:s,responseType:"json"})}async uploadGenericFile(e){let{file:r,extWithDot:o}=e,i=new URLSearchParams;return i.set("extension",o),await this.send({method:"POST",url:`/api/generic_files?${i.toString()}`,responseType:"json",headers:new Headers({"content-type":r.type}),body:r})}};function u5(t,e,r=!0){if(t.set("assets",JSON.stringify(e.assetUUIDs)),t.set("page_count",e.pageCount+""),t.set("data",e.data),r){$e(e.thumbnails.length===e.pageCount,"thumbnails count must be page count");let o=[];for(let a=0;a<e.thumbnails.length;a++){let l=e.thumbnails[a],c=`thumbnail_${a}`;t.set(c,l),o.push(c)}t.set("thumbnail_index",JSON.stringify(o)),$e(e.annotationThumbnails.length===e.pageCount,"annotation thumbnails count must be page count");let i=[];for(let a=0;a<e.annotationThumbnails.length;a++){let l=e.annotationThumbnails[a];if(l){let c=`annotation_thumbnail_${a}`;i.push(c),t.set(c,l)}else i.push(null)}t.set("annotation_thumbnail_index",JSON.stringify(i)),$e(e.annotations.length===e.pageCount,"annotations count must be page count");let s=[];for(let a=0;a<e.annotations.length;a++){let l=e.annotations[a];if(l){let c=`annotation_${a}`,{canvas:d,version:u}=l;t.set(c,JSON.stringify({canvas:d,version:u})),s.push(c)}else s.push(null)}t.set("annotation_index",JSON.stringify(s))}}function Ile(t){return`/courses/${t}`}function Rle(t){return`/notes/${t}`}function UMe(t){return`/users/${t}`}var p5=class{constructor({endpoint:e,issuer:r}){this.buses=new ni(Ip);this.requestBuf=[];this._connectionState="unknown";this.maxRetryCount=5;this.reconnectCount=0;this.endpoint=e,this.issuer=r,this.connect()}setConnectionState(e){var r;e!==this._connectionState&&(this._connectionState=e,(r=this.delegate)==null||r.call(this,e))}get connectionState(){return this._connectionState}connect(){this.setConnectionState(this.reconnectCount>0?"reconnecting":"connecting"),ge.log(`connecting: ${this.endpoint}...`),this.issuer.mustIssue("loilonote-push").then(e=>{let r=new URL(this.endpoint);r.protocol=r.protocol==="https:"?"wss:":"ws:",r.pathname="/notification",r.searchParams.set("app_token",e.app_token);let o=new WebSocket(r.toString());o.addEventListener("open",()=>{this.onConnect(o)}),o.addEventListener("close",()=>{this.onClosed()}),o.addEventListener("message",i=>{try{this.onMessage(JSON.parse(i.data))}catch(s){ge.error("message parse error: ",s)}}),o.addEventListener("error",i=>{ge.error("connection error",i),this.onError()})}).catch(e=>{ge.error("couldn't issue appToken",e),this.onError()})}onConnect(e){ge.log(`connected: ${this.endpoint}`),this.sock=e,this.reconnectCount>0&&this.resubscribe(),this.reconnectCount=0,this.flush(),this.setConnectionState("connected")}onClosed(){ge.log(`closed: ${this.endpoint}`),this.reconnect()}reconnect(){this.reconnectCount+=1;let e=Math.pow(2,this.reconnectCount);ge.log(`reconnecting to ${this.endpoint}... (count=${this.reconnectCount},delay=${e}s)`),jf({unit:pr.sec,delay:e}).then(()=>{this.connect()})}onError(){this.reconnectCount>this.maxRetryCount?(ge.error(`couldn't connect to ${this.endpoint} after ${this.reconnectCount} retries`),this.setConnectionState("error")):this.reconnect()}onMessage(e){e.type==="subscribed"||e.type==="unsubscribed"?ge.log(e):e.type==="message"?(ge.log(e),this.buses.get(e.channel).publish(e.data)):e.type==="error"&&ge.error(e)}subscribeCourse(e,r){return this.subscribe(Ile(e),r)}unsubscribeCourse(e,r){this.unsubscribe(Ile(e),r)}subscribeNote(e,r){this.subscribe(Rle(e),r)}unsubscribeNote(e){this.unsubscribe(Rle(e))}subscribeUser(e,r){this.subscribe(UMe(e),r)}send(e){this.sock?(ge.log(e),this.sock.send(JSON.stringify(e))):this.requestBuf.push(e)}resubscribe(){let e=Array.from(this.buses.keys());ge.log("resubscribe:",e);for(let r of e)this.sendSubscribe(r)}flush(){let e=this.requestBuf;this.requestBuf=[];for(let r of e)this.send(r)}subscribe(e,r){if(this.buses.has(e))return this.buses.get(e).subscribe(r);let o=this.buses.get(e).subscribe(r);return this.sendSubscribe(e),o}sendSubscribe(e){let r={type:"subscribe",channel:e};this.send(r)}unsubscribe(e,r){if(r&&(r.close(),this.buses.get(e).subscribers()>0))return;this.buses.delete(e);let o={type:"unsubscribe",channel:e};this.send(o)}};var h5=class{constructor(e){this.options=e}url(e){return this.options.endpoint+e}async listCommands(e,{start:r="-",end:o="+",count:i}){let s=new Vl({method:"GET",url:this.url(`/api/shared-notes/${e}/commands`)});r&&s.url.searchParams.set("start",r),o&&s.url.searchParams.set("end",o),i&&s.url.searchParams.set("count",String(i));let a=await this.options.issuer.mustIssue("loilonote-share");return s.url.searchParams.set("appToken",a.app_token),(await Vu(s,{responseType:"json",enableLog:this.options.enableDebug})).commands}};var Fle=/^https?:\/\//,f5=class{constructor(e){this.lnsEndpoint=this.assertEndpoint(e.lnsEndpoint),this.cdnEndpoint=this.assertEndpoint(e.cdnEndpoint),this.authToken=e.authToken}assertEndpoint(e){if(e==="")return origin;if(!e.match(Fle))throw new Error("invalid endpoint: "+e);return e.endsWith("/")?e.substr(0,e.length-1):e}join(e,r){if(!r.startsWith("/"))throw new Error("resource path must start with / : "+r);return new URL(e+r)}lnsUrl(e){let r=this.join(this.lnsEndpoint,e);return r.searchParams.set("auth_token",this.authToken),r.toString()}src(e){return e.match(Fle)?e:this.join(this.cdnEndpoint,e).toString()}srcSet(e){return e.split(",").map(r=>r.trim()).map(r=>{let o=r.match(/^(.+?) (.*?)$/);return o?`${this.src(o[1])} ${o[2]}`:r}).join(", ")}cardThumbUrl(e,r="small"){let o=e.contentAssetId();if(!!o){if(e instanceof Rd||e instanceof ri||e instanceof Ao||e instanceof nh)return this.assetThumbUrl({assetId:o,index:0,size:r});if(e instanceof Bs)return this.assetThumbUrl({assetId:o,index:e.content.page_index,size:r})}}assetUrl(e){if(!!e)return this.lnsUrl(`/api/assets/${e}`)}assetThumbUrl({assetId:e,size:r,index:o}){return this.lnsUrl(`/api/assets/${e}/thumbnail/${o}/${r}`)}docOrAnnoThumbUrl({type:e,...r}){return e==="document"?this.documentThumbUrl(r):this.annotationLayerThumbUrl(r)}documentThumbUrl({docId:e,index:r,size:o,snapshotId:i}){return i!=null?this.lnsUrl(`/api/documents/${e}/snapshots/${i}/thumbnail/${r}/${o}`):this.lnsUrl(`/api/documents/${e}/thumbnail/${r}/${o}`)}annotationLayerThumbUrl({docId:e,index:r,size:o,snapshotId:i}){return i!=null?this.lnsUrl(`/api/documents/${e}/annotation_layers/snapshots/${i}/thumbnail/${r}/${o}`):this.lnsUrl(`/api/documents/${e}/annotation_layers/thumbnail/${r}/${o}`)}drawnThumbUrl(e,r,o){let i;if(e.document){if(r==="annotation"){let{id:s,index:a,commentSnapshotId:l}=e.document;l?i=this.annotationLayerThumbUrl({docId:s,index:a,snapshotId:l,size:o}):i=this.annotationLayerThumbUrl({docId:s,index:a,size:o})}}else{let s=e.drawnAssetId(r);s&&(i=this.assetThumbUrl({assetId:s,size:o,index:0}))}return i}};var m5=class{constructor(e){this.ctx=e;this.localContentAssets=new Map}getContentAssetUrl(e){let r=this.getContentLocalFileAsset(e);return r||this.ctx.res.assetUrl(e.contentAssetId())}getContentLocalFileAsset(e){return this.localContentAssets.get(e.id)}setContentLocalFileAsset(e,r){if(typeof URL.createObjectURL!="function")return;let o=URL.createObjectURL(r);e.forEach(i=>this.localContentAssets.set(i,o))}};var g5=class{constructor(e){this.opts=e}async send(e){return e.headers.set("x-csrf-token",this.opts.csrfToken),Vu(e,{enableLog:this.opts.enableLog,responseType:"json"})}async updatePassword(e){let r=new Vl({method:"POST",url:"/api/password",body:new Ui(e)});return this.send(r)}async setMobilePushToken(e){let r=new URLSearchParams;r.set("token",e);let o=new Vl({method:"POST",url:"/api/push-token",body:r});await this.send(o)}async getOgpMetadata(e){let r=new URLSearchParams;r.set("url",e);let o=new Vl({method:"POST",url:"/api/ogp",body:r});o.timeout={delay:5,unit:pr.sec};try{return(await this.send(o)).page}catch(i){return ge.error(i),{url:e,title:decodeURI(e)}}}};async function Mle(t){return new Promise(e=>{let r=indexedDB.deleteDatabase(t);r.onerror=o=>{ge.error(o),e(!1)},r.onsuccess=()=>{ge.log("idb deleted: "+t),e(!0)}})}async function Nle(t,e,r){return new Promise((o,i)=>{let s=indexedDB.open(t,e);s.onerror=()=>{i(s.error)},s.onsuccess=a=>{let l=a.target.result;o(l),ge.log("db: opened")},s.onupgradeneeded=a=>{ge.log("db: begin IDB upgrade");let l=a.target.result;for(let c of r)l.objectStoreNames.contains(c.name)||(l.createObjectStore(c.name,c.params),ge.log(`db: store '${c.name}' created`));for(let c=0;c<l.objectStoreNames.length;c++){let d=l.objectStoreNames[c];r.some(u=>u.name===d)||(l.deleteObjectStore(d),ge.log(`db: store '${d}' deleted`))}ge.log("db: end IDB upgrade")}})}var Ble=class extends Error{constructor(e){super(e==null?void 0:e.message);this.error=e}},Lle=class extends Error{constructor(){super("transaction aborted")}},v5=class{constructor(e){this.db=e}table(e){return new Ole(this.db,e)}},Ole=class{constructor(e,r){this.db=e;this.name=r}tx(e,r){return new Promise((o,i)=>{let s,a=this.db.transaction(this.name,e),l=c=>{ge.error(c),i(new Ble(c))};a.oncomplete=()=>{s?o(s.value):i(new Error("Unexpected completion of transaction"))},a.onerror=l,a.onabort=()=>{i(new Lle)},r(a).then(c=>{s={value:c}}).catch(l)})}put(e){return this.tx("readwrite",r=>new Promise((o,i)=>{let s=r.objectStore(this.name).put(e);s.onsuccess=()=>o(),s.onerror=i}))}delete(e){return this.tx("readwrite",r=>new Promise((o,i)=>{let s=r.objectStore(this.name).delete(e);s.onsuccess=()=>o(),s.onerror=i}))}get(e){return this.tx("readonly",r=>new Promise((o,i)=>{let s=r.objectStore(this.name).get(e);s.onsuccess=()=>o(s.result),s.onerror=i}))}clear(){return this.tx("readwrite",e=>new Promise((r,o)=>{let i=e.objectStore(this.name).clear();i.onsuccess=()=>r(),i.onerror=o}))}};var HMe={idbCleared:"20210311_01"},b5=class{constructor(e){this.storage=e;this.runId=Date.now().toString()}async run(){await this.do(HMe.idbCleared,()=>Mle("app.loilonote.assets"))}async do(e,r){let o="migrations."+e;this.storage.get(o)||await r()&&this.storage.put(o,this.runId)}};var GMe="app.loilonote.";function y5(t){return GMe+t}var C5=class{put(e,r){localStorage==null||localStorage.setItem(y5(e),r)}get(e){var r;return(r=localStorage==null?void 0:localStorage.getItem(y5(e)))!=null?r:null}removeItem(e){localStorage==null||localStorage.removeItem(y5(e))}};var mD=class{constructor(e,r){this.name=e;this.fetcher=r}async table(){return this.fetcher.fetch().then(e=>e==null?void 0:e.table(this.name))}async get(e){let r=await this.table();if(!!r)try{let o=await r.get(e);return o?this.unwrap(o):void 0}catch(o){}}async put(e,r){let o=await this.table();if(!!o)try{let i=this.wrap(e,r);await o.put(i)}catch(i){}}async clear(){let e=await this.table();return e==null?void 0:e.clear()}};function zle(t){let{pathname:e}=new URL(t,"http://localhost");return`/lns${e}`}function Ule(t){return`urlNotFound?${zle(t)}`}var S5=class extends mD{constructor(e){super(S5.schema.name,e)}putUrlNotFound(e){return this.put(Ule(e),!0)}async urlNotFound(e){return this.get(Ule(e))}unwrap(e){return e.value}wrap(e,r){return{key:e,value:r}}},gD=S5;gD.schema={name:"booleans",params:{keyPath:"key"}};var x5=class extends mD{constructor(e){super(x5.schema.name,e)}async getChecked(e){var r;return(r=await this.get(`${e}`))!=null?r:{}}putChecked(e,r){return this.put(`${e}`,r)}unwrap(e){return e.value}wrap(e,r){return{key:e,value:r}}},vD=x5;vD.schema={name:"checkedTutorials",params:{keyPath:"key"}};var VMe="app.loilonote.main",$Me=41;function Hle(){let t=Fl(()=>Nle(VMe,$Me,[gD.schema,vD.schema]).then(e=>new v5(e)).catch(async e=>{ge.error(e)}));return{open:async()=>{await t.fetch()},booleans:new gD(t),checkedTutorials:new vD(t)}}var Gle={name:"ja-Hira",weekdays:"\u306B\u3061\u3088\u3046\u3073_\u3052\u3064\u3088\u3046\u3073_\u304B\u3088\u3046\u3073_\u3059\u3044\u3088\u3046\u3073_\u3082\u304F\u3088\u3046\u3073_\u304D\u3093\u3088\u3046\u3073_\u3069\u3088\u3046\u3073".split("_"),weekdaysShort:"\u306B\u3061_\u3052\u3064_\u304B_\u3059\u3044_\u3082\u304F_\u304D\u3093_\u3069".split("_"),weekdaysMin:"\u306B\u3061_\u3052\u3064_\u304B_\u3059\u3044_\u3082\u304F_\u304D\u3093_\u3069".split("_"),months:"1\u304C\u3064_2\u304C\u3064_3\u304C\u3064_4\u304C\u3064_5\u304C\u3064_6\u304C\u3064_7\u304C\u3064_8\u304C\u3064_9\u304C\u3064_10\u304C\u3064_11\u304C\u3064_12\u304C\u3064".split("_"),monthsShort:"1\u304C\u3064_2\u304C\u3064_3\u304C\u3064_4\u304C\u3064_5\u304C\u3064_6\u304C\u3064_7\u304C\u3064_8\u304C\u3064_9\u304C\u3064_10\u304C\u3064_11\u304C\u3064_12\u304C\u3064".split("_"),ordinal:t=>`${t}\u306B\u3061`,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061",LLL:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061 HH:mm",LLLL:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061",lll:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061 HH:mm",llll:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061\uFF08ddd\uFF09HH:mm"},meridiem:t=>t<12?"\u3054\u305C\u3093":"\u3054\u3054",relativeTime:{future:"%s\u3054",past:"%s\u307E\u3048",s:"\u3059\u3046\u3073\u3087\u3046",m:"1\u3075\u3093",mm:"%d\u3075\u3093",h:"1\u3058\u304B\u3093",hh:"%d\u3058\u304B\u3093",d:"1\u306B\u3061",dd:"%d\u306B\u3061",M:"1\u304B\u3052\u3064",MM:"%d\u304B\u3052\u3064",y:"1\u306D\u3093",yy:"%d\u306D\u3093"}};var WMe=Vle(),jMe=$le(),KMe=Wle(),UR=Dm(),qMe=Cc();document.addEventListener("DOMContentLoaded",()=>{var h;console.log("started.");let t=document.getElementById("initial-state");if(!t)throw new Error("#initial-state not found");let e=t.getAttribute("data-json");if(!e)throw new Error("initial state not found");let r=decodeURIComponent(atob(e));(h=t.parentElement)==null||h.removeChild(t);let o=JSON.parse(r);ge.setEnabled(o.logEnabled);let i=o.logEnabled?[]:void 0;_5.default.start({apiKey:"e24061592088481839075dd6fb538e76",enabledReleaseStages:["local","development","staging","production"],releaseStage:o.releaseStage,appVersion:o.appVersion,enabledBreadcrumbTypes:i,redactedKeys:["auth_token","app_token","appToken"],trackInlineScripts:!1,onError:f=>{ge.error(f);let m=qMe();return f.addMetadata("metadata","id",m),f.originalError&&(f.originalError.id=m),o.releaseStage!=="local"&&!yt.catchError(f.originalError)},plugins:[new Kle.default]});let s=_5.default.getPlugin("react"),a=s==null?void 0:s.createErrorBoundary(zR);UR.extend(WMe),UR.extend(jMe),UR.extend(KMe),UR.locale(Gle,void 0,!0),ue.initialState=o,ue.res=new f5({cdnEndpoint:o.cdnEndpoint,lnsEndpoint:o.lnsEndpoint,authToken:o.authToken}),ue.lnsClient=new d5({endpoint:o.lnsEndpoint,authToken:o.authToken,enableDebug:o.logEnabled}),ue.apiClient=new g5({enableLog:o.logEnabled,csrfToken:o.csrfToken}),ue.fileManager=new m5(ue),ue.localStorage=new C5;let l=Zn.getEndpoint("loilonote-share");l&&(ue.shareClient=new h5({endpoint:l,enableDebug:o.logEnabled,issuer:Zn})),ue.pdf=n$();let c=Zn.mustGetEndpoint("loilonote-push");ue.pushClient=new p5({endpoint:c,issuer:Zn}),ue.idb=Hle();let d=document.getElementById("main"),u=()=>{new b5(ue.localStorage).run(),ue.idb.open(),Vt.init()},p=f=>{f.ctrlKey&&f.preventDefault()};document.body.addEventListener("wheel",p,{passive:!1}),(0,jle.render)(zR.createElement(a!=null?a:zR.Fragment,{FallbackComponent:_7},zR.createElement(Ple,{initialState:o})),d),u()});})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!

JSZip v3.7.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * UAParser.js v0.7.24
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
/*! https://mths.be/codepointat v0.2.0 by @mathias */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
ts-ebml licensed under MIT. Copyright (c) legokichi duckscallion
QRコードは（株）デンソーウェーブの登録商標です
*/
